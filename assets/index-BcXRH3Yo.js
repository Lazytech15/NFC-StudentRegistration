(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var Ah={exports:{}},su={},Ch={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function N2(){if(Sp)return Ne;Sp=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),s=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.iterator;function m(j){return j===null||typeof j!="object"?null:(j=v&&j[v]||j["@@iterator"],typeof j=="function"?j:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,I={};function R(j,ee,ye){this.props=j,this.context=ee,this.refs=I,this.updater=ye||_}R.prototype.isReactComponent={},R.prototype.setState=function(j,ee){if(typeof j!="object"&&typeof j!="function"&&j!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,j,ee,"setState")},R.prototype.forceUpdate=function(j){this.updater.enqueueForceUpdate(this,j,"forceUpdate")};function L(){}L.prototype=R.prototype;function P(j,ee,ye){this.props=j,this.context=ee,this.refs=I,this.updater=ye||_}var F=P.prototype=new L;F.constructor=P,A(F,R.prototype),F.isPureReactComponent=!0;var z=Array.isArray,q=Object.prototype.hasOwnProperty,Q={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function T(j,ee,ye){var Oe,Pe={},Be=null,Ke=null;if(ee!=null)for(Oe in ee.ref!==void 0&&(Ke=ee.ref),ee.key!==void 0&&(Be=""+ee.key),ee)q.call(ee,Oe)&&!D.hasOwnProperty(Oe)&&(Pe[Oe]=ee[Oe]);var qe=arguments.length-2;if(qe===1)Pe.children=ye;else if(1<qe){for(var at=Array(qe),$t=0;$t<qe;$t++)at[$t]=arguments[$t+2];Pe.children=at}if(j&&j.defaultProps)for(Oe in qe=j.defaultProps,qe)Pe[Oe]===void 0&&(Pe[Oe]=qe[Oe]);return{$$typeof:n,type:j,key:Be,ref:Ke,props:Pe,_owner:Q.current}}function N(j,ee){return{$$typeof:n,type:j.type,key:ee,ref:j.ref,props:j.props,_owner:j._owner}}function k(j){return typeof j=="object"&&j!==null&&j.$$typeof===n}function V(j){var ee={"=":"=0",":":"=2"};return"$"+j.replace(/[=:]/g,function(ye){return ee[ye]})}var U=/\/+/g;function b(j,ee){return typeof j=="object"&&j!==null&&j.key!=null?V(""+j.key):ee.toString(36)}function Fe(j,ee,ye,Oe,Pe){var Be=typeof j;(Be==="undefined"||Be==="boolean")&&(j=null);var Ke=!1;if(j===null)Ke=!0;else switch(Be){case"string":case"number":Ke=!0;break;case"object":switch(j.$$typeof){case n:case e:Ke=!0}}if(Ke)return Ke=j,Pe=Pe(Ke),j=Oe===""?"."+b(Ke,0):Oe,z(Pe)?(ye="",j!=null&&(ye=j.replace(U,"$&/")+"/"),Fe(Pe,ee,ye,"",function($t){return $t})):Pe!=null&&(k(Pe)&&(Pe=N(Pe,ye+(!Pe.key||Ke&&Ke.key===Pe.key?"":(""+Pe.key).replace(U,"$&/")+"/")+j)),ee.push(Pe)),1;if(Ke=0,Oe=Oe===""?".":Oe+":",z(j))for(var qe=0;qe<j.length;qe++){Be=j[qe];var at=Oe+b(Be,qe);Ke+=Fe(Be,ee,ye,at,Pe)}else if(at=m(j),typeof at=="function")for(j=at.call(j),qe=0;!(Be=j.next()).done;)Be=Be.value,at=Oe+b(Be,qe++),Ke+=Fe(Be,ee,ye,at,Pe);else if(Be==="object")throw ee=String(j),Error("Objects are not valid as a React child (found: "+(ee==="[object Object]"?"object with keys {"+Object.keys(j).join(", ")+"}":ee)+"). If you meant to render a collection of children, use an array instead.");return Ke}function ct(j,ee,ye){if(j==null)return j;var Oe=[],Pe=0;return Fe(j,Oe,"","",function(Be){return ee.call(ye,Be,Pe++)}),Oe}function Rt(j){if(j._status===-1){var ee=j._result;ee=ee(),ee.then(function(ye){(j._status===0||j._status===-1)&&(j._status=1,j._result=ye)},function(ye){(j._status===0||j._status===-1)&&(j._status=2,j._result=ye)}),j._status===-1&&(j._status=0,j._result=ee)}if(j._status===1)return j._result.default;throw j._result}var We={current:null},se={transition:null},me={ReactCurrentDispatcher:We,ReactCurrentBatchConfig:se,ReactCurrentOwner:Q};function ce(){throw Error("act(...) is not supported in production builds of React.")}return Ne.Children={map:ct,forEach:function(j,ee,ye){ct(j,function(){ee.apply(this,arguments)},ye)},count:function(j){var ee=0;return ct(j,function(){ee++}),ee},toArray:function(j){return ct(j,function(ee){return ee})||[]},only:function(j){if(!k(j))throw Error("React.Children.only expected to receive a single React element child.");return j}},Ne.Component=R,Ne.Fragment=t,Ne.Profiler=i,Ne.PureComponent=P,Ne.StrictMode=r,Ne.Suspense=c,Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=me,Ne.act=ce,Ne.cloneElement=function(j,ee,ye){if(j==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+j+".");var Oe=A({},j.props),Pe=j.key,Be=j.ref,Ke=j._owner;if(ee!=null){if(ee.ref!==void 0&&(Be=ee.ref,Ke=Q.current),ee.key!==void 0&&(Pe=""+ee.key),j.type&&j.type.defaultProps)var qe=j.type.defaultProps;for(at in ee)q.call(ee,at)&&!D.hasOwnProperty(at)&&(Oe[at]=ee[at]===void 0&&qe!==void 0?qe[at]:ee[at])}var at=arguments.length-2;if(at===1)Oe.children=ye;else if(1<at){qe=Array(at);for(var $t=0;$t<at;$t++)qe[$t]=arguments[$t+2];Oe.children=qe}return{$$typeof:n,type:j.type,key:Pe,ref:Be,props:Oe,_owner:Ke}},Ne.createContext=function(j){return j={$$typeof:s,_currentValue:j,_currentValue2:j,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},j.Provider={$$typeof:o,_context:j},j.Consumer=j},Ne.createElement=T,Ne.createFactory=function(j){var ee=T.bind(null,j);return ee.type=j,ee},Ne.createRef=function(){return{current:null}},Ne.forwardRef=function(j){return{$$typeof:l,render:j}},Ne.isValidElement=k,Ne.lazy=function(j){return{$$typeof:g,_payload:{_status:-1,_result:j},_init:Rt}},Ne.memo=function(j,ee){return{$$typeof:h,type:j,compare:ee===void 0?null:ee}},Ne.startTransition=function(j){var ee=se.transition;se.transition={};try{j()}finally{se.transition=ee}},Ne.unstable_act=ce,Ne.useCallback=function(j,ee){return We.current.useCallback(j,ee)},Ne.useContext=function(j){return We.current.useContext(j)},Ne.useDebugValue=function(){},Ne.useDeferredValue=function(j){return We.current.useDeferredValue(j)},Ne.useEffect=function(j,ee){return We.current.useEffect(j,ee)},Ne.useId=function(){return We.current.useId()},Ne.useImperativeHandle=function(j,ee,ye){return We.current.useImperativeHandle(j,ee,ye)},Ne.useInsertionEffect=function(j,ee){return We.current.useInsertionEffect(j,ee)},Ne.useLayoutEffect=function(j,ee){return We.current.useLayoutEffect(j,ee)},Ne.useMemo=function(j,ee){return We.current.useMemo(j,ee)},Ne.useReducer=function(j,ee,ye){return We.current.useReducer(j,ee,ye)},Ne.useRef=function(j){return We.current.useRef(j)},Ne.useState=function(j){return We.current.useState(j)},Ne.useSyncExternalStore=function(j,ee,ye){return We.current.useSyncExternalStore(j,ee,ye)},Ne.useTransition=function(){return We.current.useTransition()},Ne.version="18.3.1",Ne}var Tp;function Rd(){return Tp||(Tp=1,Ch.exports=N2()),Ch.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rp;function b2(){if(Rp)return su;Rp=1;var n=Rd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function s(l,c,h){var g,v={},m=null,_=null;h!==void 0&&(m=""+h),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(_=c.ref);for(g in c)r.call(c,g)&&!o.hasOwnProperty(g)&&(v[g]=c[g]);if(l&&l.defaultProps)for(g in c=l.defaultProps,c)v[g]===void 0&&(v[g]=c[g]);return{$$typeof:e,type:l,key:m,ref:_,props:v,_owner:i.current}}return su.Fragment=t,su.jsx=s,su.jsxs=s,su}var Op;function M2(){return Op||(Op=1,Ah.exports=b2()),Ah.exports}var ot=M2(),Wi=Rd(),Jl={},Ih={exports:{}},Fn={},Sh={exports:{}},Th={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dp;function k2(){return Dp||(Dp=1,function(n){function e(se,me){var ce=se.length;se.push(me);e:for(;0<ce;){var j=ce-1>>>1,ee=se[j];if(0<i(ee,me))se[j]=me,se[ce]=ee,ce=j;else break e}}function t(se){return se.length===0?null:se[0]}function r(se){if(se.length===0)return null;var me=se[0],ce=se.pop();if(ce!==me){se[0]=ce;e:for(var j=0,ee=se.length,ye=ee>>>1;j<ye;){var Oe=2*(j+1)-1,Pe=se[Oe],Be=Oe+1,Ke=se[Be];if(0>i(Pe,ce))Be<ee&&0>i(Ke,Pe)?(se[j]=Ke,se[Be]=ce,j=Be):(se[j]=Pe,se[Oe]=ce,j=Oe);else if(Be<ee&&0>i(Ke,ce))se[j]=Ke,se[Be]=ce,j=Be;else break e}}return me}function i(se,me){var ce=se.sortIndex-me.sortIndex;return ce!==0?ce:se.id-me.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();n.unstable_now=function(){return s.now()-l}}var c=[],h=[],g=1,v=null,m=3,_=!1,A=!1,I=!1,R=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function F(se){for(var me=t(h);me!==null;){if(me.callback===null)r(h);else if(me.startTime<=se)r(h),me.sortIndex=me.expirationTime,e(c,me);else break;me=t(h)}}function z(se){if(I=!1,F(se),!A)if(t(c)!==null)A=!0,Rt(q);else{var me=t(h);me!==null&&We(z,me.startTime-se)}}function q(se,me){A=!1,I&&(I=!1,L(T),T=-1),_=!0;var ce=m;try{for(F(me),v=t(c);v!==null&&(!(v.expirationTime>me)||se&&!V());){var j=v.callback;if(typeof j=="function"){v.callback=null,m=v.priorityLevel;var ee=j(v.expirationTime<=me);me=n.unstable_now(),typeof ee=="function"?v.callback=ee:v===t(c)&&r(c),F(me)}else r(c);v=t(c)}if(v!==null)var ye=!0;else{var Oe=t(h);Oe!==null&&We(z,Oe.startTime-me),ye=!1}return ye}finally{v=null,m=ce,_=!1}}var Q=!1,D=null,T=-1,N=5,k=-1;function V(){return!(n.unstable_now()-k<N)}function U(){if(D!==null){var se=n.unstable_now();k=se;var me=!0;try{me=D(!0,se)}finally{me?b():(Q=!1,D=null)}}else Q=!1}var b;if(typeof P=="function")b=function(){P(U)};else if(typeof MessageChannel<"u"){var Fe=new MessageChannel,ct=Fe.port2;Fe.port1.onmessage=U,b=function(){ct.postMessage(null)}}else b=function(){R(U,0)};function Rt(se){D=se,Q||(Q=!0,b())}function We(se,me){T=R(function(){se(n.unstable_now())},me)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(se){se.callback=null},n.unstable_continueExecution=function(){A||_||(A=!0,Rt(q))},n.unstable_forceFrameRate=function(se){0>se||125<se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<se?Math.floor(1e3/se):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(se){switch(m){case 1:case 2:case 3:var me=3;break;default:me=m}var ce=m;m=me;try{return se()}finally{m=ce}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(se,me){switch(se){case 1:case 2:case 3:case 4:case 5:break;default:se=3}var ce=m;m=se;try{return me()}finally{m=ce}},n.unstable_scheduleCallback=function(se,me,ce){var j=n.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?j+ce:j):ce=j,se){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=ce+ee,se={id:g++,callback:me,priorityLevel:se,startTime:ce,expirationTime:ee,sortIndex:-1},ce>j?(se.sortIndex=ce,e(h,se),t(c)===null&&se===t(h)&&(I?(L(T),T=-1):I=!0,We(z,ce-j))):(se.sortIndex=ee,e(c,se),A||_||(A=!0,Rt(q))),se},n.unstable_shouldYield=V,n.unstable_wrapCallback=function(se){var me=m;return function(){var ce=m;m=me;try{return se.apply(this,arguments)}finally{m=ce}}}}(Th)),Th}var Pp;function L2(){return Pp||(Pp=1,Sh.exports=k2()),Sh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Np;function F2(){if(Np)return Fn;Np=1;var n=Rd(),e=L2();function t(a){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+a,f=1;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f]);return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,i={};function o(a,u){s(a,u),s(a+"Capture",u)}function s(a,u){for(i[a]=u,a=0;a<u.length;a++)r.add(u[a])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,g={},v={};function m(a){return c.call(v,a)?!0:c.call(g,a)?!1:h.test(a)?v[a]=!0:(g[a]=!0,!1)}function _(a,u,f,p){if(f!==null&&f.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return p?!1:f!==null?!f.acceptsBooleans:(a=a.toLowerCase().slice(0,5),a!=="data-"&&a!=="aria-");default:return!1}}function A(a,u,f,p){if(u===null||typeof u>"u"||_(a,u,f,p))return!0;if(p)return!1;if(f!==null)switch(f.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function I(a,u,f,p,y,w,C){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=p,this.attributeNamespace=y,this.mustUseProperty=f,this.propertyName=a,this.type=u,this.sanitizeURL=w,this.removeEmptyString=C}var R={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){R[a]=new I(a,0,!1,a,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var u=a[0];R[u]=new I(u,1,!1,a[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(a){R[a]=new I(a,2,!1,a.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){R[a]=new I(a,2,!1,a,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){R[a]=new I(a,3,!1,a.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(a){R[a]=new I(a,3,!0,a,null,!1,!1)}),["capture","download"].forEach(function(a){R[a]=new I(a,4,!1,a,null,!1,!1)}),["cols","rows","size","span"].forEach(function(a){R[a]=new I(a,6,!1,a,null,!1,!1)}),["rowSpan","start"].forEach(function(a){R[a]=new I(a,5,!1,a.toLowerCase(),null,!1,!1)});var L=/[\-:]([a-z])/g;function P(a){return a[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var u=a.replace(L,P);R[u]=new I(u,1,!1,a,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var u=a.replace(L,P);R[u]=new I(u,1,!1,a,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(a){var u=a.replace(L,P);R[u]=new I(u,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(a){R[a]=new I(a,1,!1,a.toLowerCase(),null,!1,!1)}),R.xlinkHref=new I("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(a){R[a]=new I(a,1,!1,a.toLowerCase(),null,!0,!0)});function F(a,u,f,p){var y=R.hasOwnProperty(u)?R[u]:null;(y!==null?y.type!==0:p||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(A(u,f,y,p)&&(f=null),p||y===null?m(u)&&(f===null?a.removeAttribute(u):a.setAttribute(u,""+f)):y.mustUseProperty?a[y.propertyName]=f===null?y.type===3?!1:"":f:(u=y.attributeName,p=y.attributeNamespace,f===null?a.removeAttribute(u):(y=y.type,f=y===3||y===4&&f===!0?"":""+f,p?a.setAttributeNS(p,u,f):a.setAttribute(u,f))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,q=Symbol.for("react.element"),Q=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),V=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),Fe=Symbol.for("react.suspense_list"),ct=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy"),We=Symbol.for("react.offscreen"),se=Symbol.iterator;function me(a){return a===null||typeof a!="object"?null:(a=se&&a[se]||a["@@iterator"],typeof a=="function"?a:null)}var ce=Object.assign,j;function ee(a){if(j===void 0)try{throw Error()}catch(f){var u=f.stack.trim().match(/\n( *(at )?)/);j=u&&u[1]||""}return`
`+j+a}var ye=!1;function Oe(a,u){if(!a||ye)return"";ye=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(K){var p=K}Reflect.construct(a,[],u)}else{try{u.call()}catch(K){p=K}a.call(u.prototype)}else{try{throw Error()}catch(K){p=K}a()}}catch(K){if(K&&p&&typeof K.stack=="string"){for(var y=K.stack.split(`
`),w=p.stack.split(`
`),C=y.length-1,M=w.length-1;1<=C&&0<=M&&y[C]!==w[M];)M--;for(;1<=C&&0<=M;C--,M--)if(y[C]!==w[M]){if(C!==1||M!==1)do if(C--,M--,0>M||y[C]!==w[M]){var B=`
`+y[C].replace(" at new "," at ");return a.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",a.displayName)),B}while(1<=C&&0<=M);break}}}finally{ye=!1,Error.prepareStackTrace=f}return(a=a?a.displayName||a.name:"")?ee(a):""}function Pe(a){switch(a.tag){case 5:return ee(a.type);case 16:return ee("Lazy");case 13:return ee("Suspense");case 19:return ee("SuspenseList");case 0:case 2:case 15:return a=Oe(a.type,!1),a;case 11:return a=Oe(a.type.render,!1),a;case 1:return a=Oe(a.type,!0),a;default:return""}}function Be(a){if(a==null)return null;if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case D:return"Fragment";case Q:return"Portal";case N:return"Profiler";case T:return"StrictMode";case b:return"Suspense";case Fe:return"SuspenseList"}if(typeof a=="object")switch(a.$$typeof){case V:return(a.displayName||"Context")+".Consumer";case k:return(a._context.displayName||"Context")+".Provider";case U:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case ct:return u=a.displayName||null,u!==null?u:Be(a.type)||"Memo";case Rt:u=a._payload,a=a._init;try{return Be(a(u))}catch{}}return null}function Ke(a){var u=a.type;switch(a.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return a=u.render,a=a.displayName||a.name||"",u.displayName||(a!==""?"ForwardRef("+a+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Be(u);case 8:return u===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function qe(a){switch(typeof a){case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function at(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function $t(a){var u=at(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),p=""+a[u];if(!a.hasOwnProperty(u)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,w=f.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return y.call(this)},set:function(C){p=""+C,w.call(this,C)}}),Object.defineProperty(a,u,{enumerable:f.enumerable}),{getValue:function(){return p},setValue:function(C){p=""+C},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function qr(a){a._valueTracker||(a._valueTracker=$t(a))}function Zo(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var f=u.getValue(),p="";return a&&(p=at(a)?a.checked?"true":"false":a.value),a=p,a!==f?(u.setValue(a),!0):!1}function mi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}function so(a,u){var f=u.checked;return ce({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:f??a._wrapperState.initialChecked})}function Jo(a,u){var f=u.defaultValue==null?"":u.defaultValue,p=u.checked!=null?u.checked:u.defaultChecked;f=qe(u.value!=null?u.value:f),a._wrapperState={initialChecked:p,initialValue:f,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function ds(a,u){u=u.checked,u!=null&&F(a,"checked",u,!1)}function ps(a,u){ds(a,u);var f=qe(u.value),p=u.type;if(f!=null)p==="number"?(f===0&&a.value===""||a.value!=f)&&(a.value=""+f):a.value!==""+f&&(a.value=""+f);else if(p==="submit"||p==="reset"){a.removeAttribute("value");return}u.hasOwnProperty("value")?ea(a,u.type,f):u.hasOwnProperty("defaultValue")&&ea(a,u.type,qe(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(a.defaultChecked=!!u.defaultChecked)}function Bu(a,u,f){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var p=u.type;if(!(p!=="submit"&&p!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+a._wrapperState.initialValue,f||u===a.value||(a.value=u),a.defaultValue=u}f=a.name,f!==""&&(a.name=""),a.defaultChecked=!!a._wrapperState.initialChecked,f!==""&&(a.name=f)}function ea(a,u,f){(u!=="number"||mi(a.ownerDocument)!==a)&&(f==null?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+f&&(a.defaultValue=""+f))}var Yr=Array.isArray;function Qr(a,u,f,p){if(a=a.options,u){u={};for(var y=0;y<f.length;y++)u["$"+f[y]]=!0;for(f=0;f<a.length;f++)y=u.hasOwnProperty("$"+a[f].value),a[f].selected!==y&&(a[f].selected=y),y&&p&&(a[f].defaultSelected=!0)}else{for(f=""+qe(f),u=null,y=0;y<a.length;y++){if(a[y].value===f){a[y].selected=!0,p&&(a[y].defaultSelected=!0);return}u!==null||a[y].disabled||(u=a[y])}u!==null&&(u.selected=!0)}}function gs(a,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return ce({},u,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}function ta(a,u){var f=u.value;if(f==null){if(f=u.children,u=u.defaultValue,f!=null){if(u!=null)throw Error(t(92));if(Yr(f)){if(1<f.length)throw Error(t(93));f=f[0]}u=f}u==null&&(u=""),f=u}a._wrapperState={initialValue:qe(f)}}function na(a,u){var f=qe(u.value),p=qe(u.defaultValue);f!=null&&(f=""+f,f!==a.value&&(a.value=f),u.defaultValue==null&&a.defaultValue!==f&&(a.defaultValue=f)),p!=null&&(a.defaultValue=""+p)}function vs(a){var u=a.textContent;u===a._wrapperState.initialValue&&u!==""&&u!==null&&(a.value=u)}function Nt(a){switch(a){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bt(a,u){return a==null||a==="http://www.w3.org/1999/xhtml"?Nt(u):a==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":a}var Zr,ys=function(a){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,f,p,y){MSApp.execUnsafeLocalFunction(function(){return a(u,f,p,y)})}:a}(function(a,u){if(a.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in a)a.innerHTML=u;else{for(Zr=Zr||document.createElement("div"),Zr.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Zr.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;u.firstChild;)a.appendChild(u.firstChild)}});function _i(a,u){if(u){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=u;return}}a.textContent=u}var uo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lo=["Webkit","ms","Moz","O"];Object.keys(uo).forEach(function(a){lo.forEach(function(u){u=u+a.charAt(0).toUpperCase()+a.substring(1),uo[u]=uo[a]})});function ms(a,u,f){return u==null||typeof u=="boolean"||u===""?"":f||typeof u!="number"||u===0||uo.hasOwnProperty(a)&&uo[a]?(""+u).trim():u+"px"}function _s(a,u){a=a.style;for(var f in u)if(u.hasOwnProperty(f)){var p=f.indexOf("--")===0,y=ms(f,u[f],p);f==="float"&&(f="cssFloat"),p?a.setProperty(f,y):a[f]=y}}var xs=ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ws(a,u){if(u){if(xs[a]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,a));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function Es(a,u){if(a.indexOf("-")===-1)return typeof u.is=="string";switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var co=null;function ra(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var ia=null,Yn=null,Pr=null;function oa(a){if(a=$s(a)){if(typeof ia!="function")throw Error(t(280));var u=a.stateNode;u&&(u=pl(u),ia(a.stateNode,a.type,u))}}function Nr(a){Yn?Pr?Pr.push(a):Pr=[a]:Yn=a}function As(){if(Yn){var a=Yn,u=Pr;if(Pr=Yn=null,oa(a),u)for(a=0;a<u.length;a++)oa(u[a])}}function fo(a,u){return a(u)}function Cs(){}var Jr=!1;function Is(a,u,f){if(Jr)return a(u,f);Jr=!0;try{return fo(a,u,f)}finally{Jr=!1,(Yn!==null||Pr!==null)&&(Cs(),As())}}function It(a,u){var f=a.stateNode;if(f===null)return null;var p=pl(f);if(p===null)return null;f=p[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(a=a.type,p=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!p;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(t(231,u,typeof f));return f}var aa=!1;if(l)try{var fr={};Object.defineProperty(fr,"passive",{get:function(){aa=!0}}),window.addEventListener("test",fr,fr),window.removeEventListener("test",fr,fr)}catch{aa=!1}function ho(a,u,f,p,y,w,C,M,B){var K=Array.prototype.slice.call(arguments,3);try{u.apply(f,K)}catch(ne){this.onError(ne)}}var po=!1,sa=null,hr=!1,Ss=null,Yc={onError:function(a){po=!0,sa=a}};function ua(a,u,f,p,y,w,C,M,B){po=!1,sa=null,ho.apply(Yc,arguments)}function Vu(a,u,f,p,y,w,C,M,B){if(ua.apply(this,arguments),po){if(po){var K=sa;po=!1,sa=null}else throw Error(t(198));hr||(hr=!0,Ss=K)}}function dr(a){var u=a,f=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,u.flags&4098&&(f=u.return),a=u.return;while(a)}return u.tag===3?f:null}function go(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function pr(a){if(dr(a)!==a)throw Error(t(188))}function Uu(a){var u=a.alternate;if(!u){if(u=dr(a),u===null)throw Error(t(188));return u!==a?null:a}for(var f=a,p=u;;){var y=f.return;if(y===null)break;var w=y.alternate;if(w===null){if(p=y.return,p!==null){f=p;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===f)return pr(y),a;if(w===p)return pr(y),u;w=w.sibling}throw Error(t(188))}if(f.return!==p.return)f=y,p=w;else{for(var C=!1,M=y.child;M;){if(M===f){C=!0,f=y,p=w;break}if(M===p){C=!0,p=y,f=w;break}M=M.sibling}if(!C){for(M=w.child;M;){if(M===f){C=!0,f=w,p=y;break}if(M===p){C=!0,p=w,f=y;break}M=M.sibling}if(!C)throw Error(t(189))}}if(f.alternate!==p)throw Error(t(190))}if(f.tag!==3)throw Error(t(188));return f.stateNode.current===f?a:u}function Ts(a){return a=Uu(a),a!==null?la(a):null}function la(a){if(a.tag===5||a.tag===6)return a;for(a=a.child;a!==null;){var u=la(a);if(u!==null)return u;a=a.sibling}return null}var ca=e.unstable_scheduleCallback,Rs=e.unstable_cancelCallback,zu=e.unstable_shouldYield,Qc=e.unstable_requestPaint,st=e.unstable_now,Hu=e.unstable_getCurrentPriorityLevel,vo=e.unstable_ImmediatePriority,xi=e.unstable_UserBlockingPriority,Qn=e.unstable_NormalPriority,Os=e.unstable_LowPriority,ju=e.unstable_IdlePriority,yo=null,Hn=null;function Gu(a){if(Hn&&typeof Hn.onCommitFiberRoot=="function")try{Hn.onCommitFiberRoot(yo,a,void 0,(a.current.flags&128)===128)}catch{}}var En=Math.clz32?Math.clz32:$u,Ds=Math.log,Wu=Math.LN2;function $u(a){return a>>>=0,a===0?32:31-(Ds(a)/Wu|0)|0}var fa=64,ha=4194304;function wi(a){switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return a&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return a}}function mo(a,u){var f=a.pendingLanes;if(f===0)return 0;var p=0,y=a.suspendedLanes,w=a.pingedLanes,C=f&268435455;if(C!==0){var M=C&~y;M!==0?p=wi(M):(w&=C,w!==0&&(p=wi(w)))}else C=f&~y,C!==0?p=wi(C):w!==0&&(p=wi(w));if(p===0)return 0;if(u!==0&&u!==p&&!(u&y)&&(y=p&-p,w=u&-u,y>=w||y===16&&(w&4194240)!==0))return u;if(p&4&&(p|=f&16),u=a.entangledLanes,u!==0)for(a=a.entanglements,u&=p;0<u;)f=31-En(u),y=1<<f,p|=a[f],u&=~y;return p}function Zc(a,u){switch(a){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ei(a,u){for(var f=a.suspendedLanes,p=a.pingedLanes,y=a.expirationTimes,w=a.pendingLanes;0<w;){var C=31-En(w),M=1<<C,B=y[C];B===-1?(!(M&f)||M&p)&&(y[C]=Zc(M,u)):B<=u&&(a.expiredLanes|=M),w&=~M}}function jn(a){return a=a.pendingLanes&-1073741825,a!==0?a:a&1073741824?1073741824:0}function _o(){var a=fa;return fa<<=1,!(fa&4194240)&&(fa=64),a}function Ei(a){for(var u=[],f=0;31>f;f++)u.push(a);return u}function Ai(a,u,f){a.pendingLanes|=u,u!==536870912&&(a.suspendedLanes=0,a.pingedLanes=0),a=a.eventTimes,u=31-En(u),a[u]=f}function it(a,u){var f=a.pendingLanes&~u;a.pendingLanes=u,a.suspendedLanes=0,a.pingedLanes=0,a.expiredLanes&=u,a.mutableReadLanes&=u,a.entangledLanes&=u,u=a.entanglements;var p=a.eventTimes;for(a=a.expirationTimes;0<f;){var y=31-En(f),w=1<<y;u[y]=0,p[y]=-1,a[y]=-1,f&=~w}}function Ci(a,u){var f=a.entangledLanes|=u;for(a=a.entanglements;f;){var p=31-En(f),y=1<<p;y&u|a[p]&u&&(a[p]|=u),f&=~y}}var ke=0;function Ii(a){return a&=-a,1<a?4<a?a&268435455?16:536870912:4:1}var Xu,da,Ku,qu,Yu,Ps=!1,br=[],nn=null,gr=null,vr=null,Si=new Map,Zn=new Map,Mr=[],Jc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qu(a,u){switch(a){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":gr=null;break;case"mouseover":case"mouseout":vr=null;break;case"pointerover":case"pointerout":Si.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zn.delete(u.pointerId)}}function Dn(a,u,f,p,y,w){return a===null||a.nativeEvent!==w?(a={blockedOn:u,domEventName:f,eventSystemFlags:p,nativeEvent:w,targetContainers:[y]},u!==null&&(u=$s(u),u!==null&&da(u)),a):(a.eventSystemFlags|=p,u=a.targetContainers,y!==null&&u.indexOf(y)===-1&&u.push(y),a)}function ef(a,u,f,p,y){switch(u){case"focusin":return nn=Dn(nn,a,u,f,p,y),!0;case"dragenter":return gr=Dn(gr,a,u,f,p,y),!0;case"mouseover":return vr=Dn(vr,a,u,f,p,y),!0;case"pointerover":var w=y.pointerId;return Si.set(w,Dn(Si.get(w)||null,a,u,f,p,y)),!0;case"gotpointercapture":return w=y.pointerId,Zn.set(w,Dn(Zn.get(w)||null,a,u,f,p,y)),!0}return!1}function Zu(a){var u=Co(a.target);if(u!==null){var f=dr(u);if(f!==null){if(u=f.tag,u===13){if(u=go(f),u!==null){a.blockedOn=u,Yu(a.priority,function(){Ku(f)});return}}else if(u===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function ti(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var f=pa(a.domEventName,a.eventSystemFlags,u[0],a.nativeEvent);if(f===null){f=a.nativeEvent;var p=new f.constructor(f.type,f);co=p,f.target.dispatchEvent(p),co=null}else return u=$s(f),u!==null&&da(u),a.blockedOn=f,!1;u.shift()}return!0}function xo(a,u,f){ti(a)&&f.delete(u)}function Ju(){Ps=!1,nn!==null&&ti(nn)&&(nn=null),gr!==null&&ti(gr)&&(gr=null),vr!==null&&ti(vr)&&(vr=null),Si.forEach(xo),Zn.forEach(xo)}function yr(a,u){a.blockedOn===u&&(a.blockedOn=null,Ps||(Ps=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Ju)))}function mr(a){function u(y){return yr(y,a)}if(0<br.length){yr(br[0],a);for(var f=1;f<br.length;f++){var p=br[f];p.blockedOn===a&&(p.blockedOn=null)}}for(nn!==null&&yr(nn,a),gr!==null&&yr(gr,a),vr!==null&&yr(vr,a),Si.forEach(u),Zn.forEach(u),f=0;f<Mr.length;f++)p=Mr[f],p.blockedOn===a&&(p.blockedOn=null);for(;0<Mr.length&&(f=Mr[0],f.blockedOn===null);)Zu(f),f.blockedOn===null&&Mr.shift()}var ni=z.ReactCurrentBatchConfig,Ti=!0;function gt(a,u,f,p){var y=ke,w=ni.transition;ni.transition=null;try{ke=1,Ns(a,u,f,p)}finally{ke=y,ni.transition=w}}function tf(a,u,f,p){var y=ke,w=ni.transition;ni.transition=null;try{ke=4,Ns(a,u,f,p)}finally{ke=y,ni.transition=w}}function Ns(a,u,f,p){if(Ti){var y=pa(a,u,f,p);if(y===null)df(a,u,p,wo,f),Qu(a,p);else if(ef(y,a,u,f,p))p.stopPropagation();else if(Qu(a,p),u&4&&-1<Jc.indexOf(a)){for(;y!==null;){var w=$s(y);if(w!==null&&Xu(w),w=pa(a,u,f,p),w===null&&df(a,u,p,wo,f),w===y)break;y=w}y!==null&&p.stopPropagation()}else df(a,u,p,null,f)}}var wo=null;function pa(a,u,f,p){if(wo=null,a=ra(p),a=Co(a),a!==null)if(u=dr(a),u===null)a=null;else if(f=u.tag,f===13){if(a=go(u),a!==null)return a;a=null}else if(f===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null);return wo=a,null}function bs(a){switch(a){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Hu()){case vo:return 1;case xi:return 4;case Qn:case Os:return 16;case ju:return 536870912;default:return 16}default:return 16}}var Gn=null,ga=null,Pn=null;function Ms(){if(Pn)return Pn;var a,u=ga,f=u.length,p,y="value"in Gn?Gn.value:Gn.textContent,w=y.length;for(a=0;a<f&&u[a]===y[a];a++);var C=f-a;for(p=1;p<=C&&u[f-p]===y[w-p];p++);return Pn=y.slice(a,1<p?1-p:void 0)}function va(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function kr(){return!0}function ks(){return!1}function rn(a){function u(f,p,y,w,C){this._reactName=f,this._targetInst=y,this.type=p,this.nativeEvent=w,this.target=C,this.currentTarget=null;for(var M in a)a.hasOwnProperty(M)&&(f=a[M],this[M]=f?f(w):w[M]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?kr:ks,this.isPropagationStopped=ks,this}return ce(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=kr)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=kr)},persist:function(){},isPersistent:kr}),u}var _r={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ya=rn(_r),Lr=ce({},_r,{view:0,detail:0}),nf=rn(Lr),ma,ri,Ri,Eo=ce({},Lr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Fr,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ri&&(Ri&&a.type==="mousemove"?(ma=a.screenX-Ri.screenX,ri=a.screenY-Ri.screenY):ri=ma=0,Ri=a),ma)},movementY:function(a){return"movementY"in a?a.movementY:ri}}),_a=rn(Eo),Ls=ce({},Eo,{dataTransfer:0}),el=rn(Ls),xa=ce({},Lr,{relatedTarget:0}),wa=rn(xa),tl=ce({},_r,{animationName:0,elapsedTime:0,pseudoElement:0}),ii=rn(tl),nl=ce({},_r,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),rl=rn(nl),il=ce({},_r,{data:0}),Fs=rn(il),Ea={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},An={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ol={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function al(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=ol[a])?!!u[a]:!1}function Fr(){return al}var d=ce({},Lr,{key:function(a){if(a.key){var u=Ea[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=va(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?An[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Fr,charCode:function(a){return a.type==="keypress"?va(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?va(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),x=rn(d),E=ce({},Eo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),S=rn(E),G=ce({},Lr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Fr}),Y=rn(G),ae=ce({},_r,{propertyName:0,elapsedTime:0,pseudoElement:0}),et=rn(ae),Mt=ce({},Eo,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),Ve=rn(Mt),Xt=[9,13,27,32],Ot=l&&"CompositionEvent"in window,Jn=null;l&&"documentMode"in document&&(Jn=document.documentMode);var Wn=l&&"TextEvent"in window&&!Jn,Ao=l&&(!Ot||Jn&&8<Jn&&11>=Jn),Aa=" ",x1=!1;function w1(a,u){switch(a){case"keyup":return Xt.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E1(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ca=!1;function Om(a,u){switch(a){case"compositionend":return E1(u);case"keypress":return u.which!==32?null:(x1=!0,Aa);case"textInput":return a=u.data,a===Aa&&x1?null:a;default:return null}}function Dm(a,u){if(Ca)return a==="compositionend"||!Ot&&w1(a,u)?(a=Ms(),Pn=ga=Gn=null,Ca=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Ao&&u.locale!=="ko"?null:u.data;default:return null}}var Pm={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function A1(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!Pm[a.type]:u==="textarea"}function C1(a,u,f,p){Nr(p),u=fl(u,"onChange"),0<u.length&&(f=new ya("onChange","change",null,f,p),a.push({event:f,listeners:u}))}var Bs=null,Vs=null;function Nm(a){H1(a,0)}function sl(a){var u=Oa(a);if(Zo(u))return a}function bm(a,u){if(a==="change")return u}var I1=!1;if(l){var rf;if(l){var of="oninput"in document;if(!of){var S1=document.createElement("div");S1.setAttribute("oninput","return;"),of=typeof S1.oninput=="function"}rf=of}else rf=!1;I1=rf&&(!document.documentMode||9<document.documentMode)}function T1(){Bs&&(Bs.detachEvent("onpropertychange",R1),Vs=Bs=null)}function R1(a){if(a.propertyName==="value"&&sl(Vs)){var u=[];C1(u,Vs,a,ra(a)),Is(Nm,u)}}function Mm(a,u,f){a==="focusin"?(T1(),Bs=u,Vs=f,Bs.attachEvent("onpropertychange",R1)):a==="focusout"&&T1()}function km(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return sl(Vs)}function Lm(a,u){if(a==="click")return sl(u)}function Fm(a,u){if(a==="input"||a==="change")return sl(u)}function Bm(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var xr=typeof Object.is=="function"?Object.is:Bm;function Us(a,u){if(xr(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var f=Object.keys(a),p=Object.keys(u);if(f.length!==p.length)return!1;for(p=0;p<f.length;p++){var y=f[p];if(!c.call(u,y)||!xr(a[y],u[y]))return!1}return!0}function O1(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function D1(a,u){var f=O1(a);a=0;for(var p;f;){if(f.nodeType===3){if(p=a+f.textContent.length,a<=u&&p>=u)return{node:f,offset:u-a};a=p}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=O1(f)}}function P1(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?P1(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function N1(){for(var a=window,u=mi();u instanceof a.HTMLIFrameElement;){try{var f=typeof u.contentWindow.location.href=="string"}catch{f=!1}if(f)a=u.contentWindow;else break;u=mi(a.document)}return u}function af(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}function Vm(a){var u=N1(),f=a.focusedElem,p=a.selectionRange;if(u!==f&&f&&f.ownerDocument&&P1(f.ownerDocument.documentElement,f)){if(p!==null&&af(f)){if(u=p.start,a=p.end,a===void 0&&(a=u),"selectionStart"in f)f.selectionStart=u,f.selectionEnd=Math.min(a,f.value.length);else if(a=(u=f.ownerDocument||document)&&u.defaultView||window,a.getSelection){a=a.getSelection();var y=f.textContent.length,w=Math.min(p.start,y);p=p.end===void 0?w:Math.min(p.end,y),!a.extend&&w>p&&(y=p,p=w,w=y),y=D1(f,w);var C=D1(f,p);y&&C&&(a.rangeCount!==1||a.anchorNode!==y.node||a.anchorOffset!==y.offset||a.focusNode!==C.node||a.focusOffset!==C.offset)&&(u=u.createRange(),u.setStart(y.node,y.offset),a.removeAllRanges(),w>p?(a.addRange(u),a.extend(C.node,C.offset)):(u.setEnd(C.node,C.offset),a.addRange(u)))}}for(u=[],a=f;a=a.parentNode;)a.nodeType===1&&u.push({element:a,left:a.scrollLeft,top:a.scrollTop});for(typeof f.focus=="function"&&f.focus(),f=0;f<u.length;f++)a=u[f],a.element.scrollLeft=a.left,a.element.scrollTop=a.top}}var Um=l&&"documentMode"in document&&11>=document.documentMode,Ia=null,sf=null,zs=null,uf=!1;function b1(a,u,f){var p=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;uf||Ia==null||Ia!==mi(p)||(p=Ia,"selectionStart"in p&&af(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),zs&&Us(zs,p)||(zs=p,p=fl(sf,"onSelect"),0<p.length&&(u=new ya("onSelect","select",null,u,f),a.push({event:u,listeners:p}),u.target=Ia)))}function ul(a,u){var f={};return f[a.toLowerCase()]=u.toLowerCase(),f["Webkit"+a]="webkit"+u,f["Moz"+a]="moz"+u,f}var Sa={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionend:ul("Transition","TransitionEnd")},lf={},M1={};l&&(M1=document.createElement("div").style,"AnimationEvent"in window||(delete Sa.animationend.animation,delete Sa.animationiteration.animation,delete Sa.animationstart.animation),"TransitionEvent"in window||delete Sa.transitionend.transition);function ll(a){if(lf[a])return lf[a];if(!Sa[a])return a;var u=Sa[a],f;for(f in u)if(u.hasOwnProperty(f)&&f in M1)return lf[a]=u[f];return a}var k1=ll("animationend"),L1=ll("animationiteration"),F1=ll("animationstart"),B1=ll("transitionend"),V1=new Map,U1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(a,u){V1.set(a,u),o(u,[a])}for(var cf=0;cf<U1.length;cf++){var ff=U1[cf],zm=ff.toLowerCase(),Hm=ff[0].toUpperCase()+ff.slice(1);Oi(zm,"on"+Hm)}Oi(k1,"onAnimationEnd"),Oi(L1,"onAnimationIteration"),Oi(F1,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(B1,"onTransitionEnd"),s("onMouseEnter",["mouseout","mouseover"]),s("onMouseLeave",["mouseout","mouseover"]),s("onPointerEnter",["pointerout","pointerover"]),s("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hs));function z1(a,u,f){var p=a.type||"unknown-event";a.currentTarget=f,Vu(p,u,void 0,a),a.currentTarget=null}function H1(a,u){u=(u&4)!==0;for(var f=0;f<a.length;f++){var p=a[f],y=p.event;p=p.listeners;e:{var w=void 0;if(u)for(var C=p.length-1;0<=C;C--){var M=p[C],B=M.instance,K=M.currentTarget;if(M=M.listener,B!==w&&y.isPropagationStopped())break e;z1(y,M,K),w=B}else for(C=0;C<p.length;C++){if(M=p[C],B=M.instance,K=M.currentTarget,M=M.listener,B!==w&&y.isPropagationStopped())break e;z1(y,M,K),w=B}}}if(hr)throw a=Ss,hr=!1,Ss=null,a}function ft(a,u){var f=u[_f];f===void 0&&(f=u[_f]=new Set);var p=a+"__bubble";f.has(p)||(j1(u,a,2,!1),f.add(p))}function hf(a,u,f){var p=0;u&&(p|=4),j1(f,a,p,u)}var cl="_reactListening"+Math.random().toString(36).slice(2);function js(a){if(!a[cl]){a[cl]=!0,r.forEach(function(f){f!=="selectionchange"&&(jm.has(f)||hf(f,!1,a),hf(f,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[cl]||(u[cl]=!0,hf("selectionchange",!1,u))}}function j1(a,u,f,p){switch(bs(u)){case 1:var y=gt;break;case 4:y=tf;break;default:y=Ns}f=y.bind(null,u,f,a),y=void 0,!aa||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(y=!0),p?y!==void 0?a.addEventListener(u,f,{capture:!0,passive:y}):a.addEventListener(u,f,!0):y!==void 0?a.addEventListener(u,f,{passive:y}):a.addEventListener(u,f,!1)}function df(a,u,f,p,y){var w=p;if(!(u&1)&&!(u&2)&&p!==null)e:for(;;){if(p===null)return;var C=p.tag;if(C===3||C===4){var M=p.stateNode.containerInfo;if(M===y||M.nodeType===8&&M.parentNode===y)break;if(C===4)for(C=p.return;C!==null;){var B=C.tag;if((B===3||B===4)&&(B=C.stateNode.containerInfo,B===y||B.nodeType===8&&B.parentNode===y))return;C=C.return}for(;M!==null;){if(C=Co(M),C===null)return;if(B=C.tag,B===5||B===6){p=w=C;continue e}M=M.parentNode}}p=p.return}Is(function(){var K=w,ne=ra(f),re=[];e:{var te=V1.get(a);if(te!==void 0){var le=ya,de=a;switch(a){case"keypress":if(va(f)===0)break e;case"keydown":case"keyup":le=x;break;case"focusin":de="focus",le=wa;break;case"focusout":de="blur",le=wa;break;case"beforeblur":case"afterblur":le=wa;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=_a;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=el;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Y;break;case k1:case L1:case F1:le=ii;break;case B1:le=et;break;case"scroll":le=nf;break;case"wheel":le=Ve;break;case"copy":case"cut":case"paste":le=rl;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=S}var pe=(u&4)!==0,St=!pe&&a==="scroll",W=pe?te!==null?te+"Capture":null:te;pe=[];for(var H=K,X;H!==null;){X=H;var oe=X.stateNode;if(X.tag===5&&oe!==null&&(X=oe,W!==null&&(oe=It(H,W),oe!=null&&pe.push(Gs(H,oe,X)))),St)break;H=H.return}0<pe.length&&(te=new le(te,de,null,f,ne),re.push({event:te,listeners:pe}))}}if(!(u&7)){e:{if(te=a==="mouseover"||a==="pointerover",le=a==="mouseout"||a==="pointerout",te&&f!==co&&(de=f.relatedTarget||f.fromElement)&&(Co(de)||de[oi]))break e;if((le||te)&&(te=ne.window===ne?ne:(te=ne.ownerDocument)?te.defaultView||te.parentWindow:window,le?(de=f.relatedTarget||f.toElement,le=K,de=de?Co(de):null,de!==null&&(St=dr(de),de!==St||de.tag!==5&&de.tag!==6)&&(de=null)):(le=null,de=K),le!==de)){if(pe=_a,oe="onMouseLeave",W="onMouseEnter",H="mouse",(a==="pointerout"||a==="pointerover")&&(pe=S,oe="onPointerLeave",W="onPointerEnter",H="pointer"),St=le==null?te:Oa(le),X=de==null?te:Oa(de),te=new pe(oe,H+"leave",le,f,ne),te.target=St,te.relatedTarget=X,oe=null,Co(ne)===K&&(pe=new pe(W,H+"enter",de,f,ne),pe.target=X,pe.relatedTarget=St,oe=pe),St=oe,le&&de)t:{for(pe=le,W=de,H=0,X=pe;X;X=Ta(X))H++;for(X=0,oe=W;oe;oe=Ta(oe))X++;for(;0<H-X;)pe=Ta(pe),H--;for(;0<X-H;)W=Ta(W),X--;for(;H--;){if(pe===W||W!==null&&pe===W.alternate)break t;pe=Ta(pe),W=Ta(W)}pe=null}else pe=null;le!==null&&G1(re,te,le,pe,!1),de!==null&&St!==null&&G1(re,St,de,pe,!0)}}e:{if(te=K?Oa(K):window,le=te.nodeName&&te.nodeName.toLowerCase(),le==="select"||le==="input"&&te.type==="file")var ve=bm;else if(A1(te))if(I1)ve=Fm;else{ve=km;var we=Mm}else(le=te.nodeName)&&le.toLowerCase()==="input"&&(te.type==="checkbox"||te.type==="radio")&&(ve=Lm);if(ve&&(ve=ve(a,K))){C1(re,ve,f,ne);break e}we&&we(a,te,K),a==="focusout"&&(we=te._wrapperState)&&we.controlled&&te.type==="number"&&ea(te,"number",te.value)}switch(we=K?Oa(K):window,a){case"focusin":(A1(we)||we.contentEditable==="true")&&(Ia=we,sf=K,zs=null);break;case"focusout":zs=sf=Ia=null;break;case"mousedown":uf=!0;break;case"contextmenu":case"mouseup":case"dragend":uf=!1,b1(re,f,ne);break;case"selectionchange":if(Um)break;case"keydown":case"keyup":b1(re,f,ne)}var Ee;if(Ot)e:{switch(a){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ca?w1(a,f)&&(Ie="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Ie="onCompositionStart");Ie&&(Ao&&f.locale!=="ko"&&(Ca||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ca&&(Ee=Ms()):(Gn=ne,ga="value"in Gn?Gn.value:Gn.textContent,Ca=!0)),we=fl(K,Ie),0<we.length&&(Ie=new Fs(Ie,a,null,f,ne),re.push({event:Ie,listeners:we}),Ee?Ie.data=Ee:(Ee=E1(f),Ee!==null&&(Ie.data=Ee)))),(Ee=Wn?Om(a,f):Dm(a,f))&&(K=fl(K,"onBeforeInput"),0<K.length&&(ne=new Fs("onBeforeInput","beforeinput",null,f,ne),re.push({event:ne,listeners:K}),ne.data=Ee))}H1(re,u)})}function Gs(a,u,f){return{instance:a,listener:u,currentTarget:f}}function fl(a,u){for(var f=u+"Capture",p=[];a!==null;){var y=a,w=y.stateNode;y.tag===5&&w!==null&&(y=w,w=It(a,f),w!=null&&p.unshift(Gs(a,w,y)),w=It(a,u),w!=null&&p.push(Gs(a,w,y))),a=a.return}return p}function Ta(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5);return a||null}function G1(a,u,f,p,y){for(var w=u._reactName,C=[];f!==null&&f!==p;){var M=f,B=M.alternate,K=M.stateNode;if(B!==null&&B===p)break;M.tag===5&&K!==null&&(M=K,y?(B=It(f,w),B!=null&&C.unshift(Gs(f,B,M))):y||(B=It(f,w),B!=null&&C.push(Gs(f,B,M)))),f=f.return}C.length!==0&&a.push({event:u,listeners:C})}var Gm=/\r\n?/g,Wm=/\u0000|\uFFFD/g;function W1(a){return(typeof a=="string"?a:""+a).replace(Gm,`
`).replace(Wm,"")}function hl(a,u,f){if(u=W1(u),W1(a)!==u&&f)throw Error(t(425))}function dl(){}var pf=null,gf=null;function vf(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var yf=typeof setTimeout=="function"?setTimeout:void 0,$m=typeof clearTimeout=="function"?clearTimeout:void 0,$1=typeof Promise=="function"?Promise:void 0,Xm=typeof queueMicrotask=="function"?queueMicrotask:typeof $1<"u"?function(a){return $1.resolve(null).then(a).catch(Km)}:yf;function Km(a){setTimeout(function(){throw a})}function mf(a,u){var f=u,p=0;do{var y=f.nextSibling;if(a.removeChild(f),y&&y.nodeType===8)if(f=y.data,f==="/$"){if(p===0){a.removeChild(y),mr(u);return}p--}else f!=="$"&&f!=="$?"&&f!=="$!"||p++;f=y}while(f);mr(u)}function Di(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return a}function X1(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(u===0)return a;u--}else f==="/$"&&u++}a=a.previousSibling}return null}var Ra=Math.random().toString(36).slice(2),Br="__reactFiber$"+Ra,Ws="__reactProps$"+Ra,oi="__reactContainer$"+Ra,_f="__reactEvents$"+Ra,qm="__reactListeners$"+Ra,Ym="__reactHandles$"+Ra;function Co(a){var u=a[Br];if(u)return u;for(var f=a.parentNode;f;){if(u=f[oi]||f[Br]){if(f=u.alternate,u.child!==null||f!==null&&f.child!==null)for(a=X1(a);a!==null;){if(f=a[Br])return f;a=X1(a)}return u}a=f,f=a.parentNode}return null}function $s(a){return a=a[Br]||a[oi],!a||a.tag!==5&&a.tag!==6&&a.tag!==13&&a.tag!==3?null:a}function Oa(a){if(a.tag===5||a.tag===6)return a.stateNode;throw Error(t(33))}function pl(a){return a[Ws]||null}var xf=[],Da=-1;function Pi(a){return{current:a}}function ht(a){0>Da||(a.current=xf[Da],xf[Da]=null,Da--)}function ut(a,u){Da++,xf[Da]=a.current,a.current=u}var Ni={},dn=Pi(Ni),Nn=Pi(!1),Io=Ni;function Pa(a,u){var f=a.type.contextTypes;if(!f)return Ni;var p=a.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===u)return p.__reactInternalMemoizedMaskedChildContext;var y={},w;for(w in f)y[w]=u[w];return p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=u,a.__reactInternalMemoizedMaskedChildContext=y),y}function bn(a){return a=a.childContextTypes,a!=null}function gl(){ht(Nn),ht(dn)}function K1(a,u,f){if(dn.current!==Ni)throw Error(t(168));ut(dn,u),ut(Nn,f)}function q1(a,u,f){var p=a.stateNode;if(u=u.childContextTypes,typeof p.getChildContext!="function")return f;p=p.getChildContext();for(var y in p)if(!(y in u))throw Error(t(108,Ke(a)||"Unknown",y));return ce({},f,p)}function vl(a){return a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ni,Io=dn.current,ut(dn,a),ut(Nn,Nn.current),!0}function Y1(a,u,f){var p=a.stateNode;if(!p)throw Error(t(169));f?(a=q1(a,u,Io),p.__reactInternalMemoizedMergedChildContext=a,ht(Nn),ht(dn),ut(dn,a)):ht(Nn),ut(Nn,f)}var ai=null,yl=!1,wf=!1;function Q1(a){ai===null?ai=[a]:ai.push(a)}function Qm(a){yl=!0,Q1(a)}function bi(){if(!wf&&ai!==null){wf=!0;var a=0,u=ke;try{var f=ai;for(ke=1;a<f.length;a++){var p=f[a];do p=p(!0);while(p!==null)}ai=null,yl=!1}catch(y){throw ai!==null&&(ai=ai.slice(a+1)),ca(vo,bi),y}finally{ke=u,wf=!1}}return null}var Na=[],ba=0,ml=null,_l=0,er=[],tr=0,So=null,si=1,ui="";function To(a,u){Na[ba++]=_l,Na[ba++]=ml,ml=a,_l=u}function Z1(a,u,f){er[tr++]=si,er[tr++]=ui,er[tr++]=So,So=a;var p=si;a=ui;var y=32-En(p)-1;p&=~(1<<y),f+=1;var w=32-En(u)+y;if(30<w){var C=y-y%5;w=(p&(1<<C)-1).toString(32),p>>=C,y-=C,si=1<<32-En(u)+y|f<<y|p,ui=w+a}else si=1<<w|f<<y|p,ui=a}function Ef(a){a.return!==null&&(To(a,1),Z1(a,1,0))}function Af(a){for(;a===ml;)ml=Na[--ba],Na[ba]=null,_l=Na[--ba],Na[ba]=null;for(;a===So;)So=er[--tr],er[tr]=null,ui=er[--tr],er[tr]=null,si=er[--tr],er[tr]=null}var $n=null,Xn=null,vt=!1,wr=null;function J1(a,u){var f=or(5,null,null,0);f.elementType="DELETED",f.stateNode=u,f.return=a,u=a.deletions,u===null?(a.deletions=[f],a.flags|=16):u.push(f)}function e0(a,u){switch(a.tag){case 5:var f=a.type;return u=u.nodeType!==1||f.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(a.stateNode=u,$n=a,Xn=Di(u.firstChild),!0):!1;case 6:return u=a.pendingProps===""||u.nodeType!==3?null:u,u!==null?(a.stateNode=u,$n=a,Xn=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(f=So!==null?{id:si,overflow:ui}:null,a.memoizedState={dehydrated:u,treeContext:f,retryLane:1073741824},f=or(18,null,null,0),f.stateNode=u,f.return=a,a.child=f,$n=a,Xn=null,!0):!1;default:return!1}}function Cf(a){return(a.mode&1)!==0&&(a.flags&128)===0}function If(a){if(vt){var u=Xn;if(u){var f=u;if(!e0(a,u)){if(Cf(a))throw Error(t(418));u=Di(f.nextSibling);var p=$n;u&&e0(a,u)?J1(p,f):(a.flags=a.flags&-4097|2,vt=!1,$n=a)}}else{if(Cf(a))throw Error(t(418));a.flags=a.flags&-4097|2,vt=!1,$n=a}}}function t0(a){for(a=a.return;a!==null&&a.tag!==5&&a.tag!==3&&a.tag!==13;)a=a.return;$n=a}function xl(a){if(a!==$n)return!1;if(!vt)return t0(a),vt=!0,!1;var u;if((u=a.tag!==3)&&!(u=a.tag!==5)&&(u=a.type,u=u!=="head"&&u!=="body"&&!vf(a.type,a.memoizedProps)),u&&(u=Xn)){if(Cf(a))throw n0(),Error(t(418));for(;u;)J1(a,u),u=Di(u.nextSibling)}if(t0(a),a.tag===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(t(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8){var f=a.data;if(f==="/$"){if(u===0){Xn=Di(a.nextSibling);break e}u--}else f!=="$"&&f!=="$!"&&f!=="$?"||u++}a=a.nextSibling}Xn=null}}else Xn=$n?Di(a.stateNode.nextSibling):null;return!0}function n0(){for(var a=Xn;a;)a=Di(a.nextSibling)}function Ma(){Xn=$n=null,vt=!1}function Sf(a){wr===null?wr=[a]:wr.push(a)}var Zm=z.ReactCurrentBatchConfig;function Xs(a,u,f){if(a=f.ref,a!==null&&typeof a!="function"&&typeof a!="object"){if(f._owner){if(f=f._owner,f){if(f.tag!==1)throw Error(t(309));var p=f.stateNode}if(!p)throw Error(t(147,a));var y=p,w=""+a;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===w?u.ref:(u=function(C){var M=y.refs;C===null?delete M[w]:M[w]=C},u._stringRef=w,u)}if(typeof a!="string")throw Error(t(284));if(!f._owner)throw Error(t(290,a))}return a}function wl(a,u){throw a=Object.prototype.toString.call(u),Error(t(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a))}function r0(a){var u=a._init;return u(a._payload)}function i0(a){function u(W,H){if(a){var X=W.deletions;X===null?(W.deletions=[H],W.flags|=16):X.push(H)}}function f(W,H){if(!a)return null;for(;H!==null;)u(W,H),H=H.sibling;return null}function p(W,H){for(W=new Map;H!==null;)H.key!==null?W.set(H.key,H):W.set(H.index,H),H=H.sibling;return W}function y(W,H){return W=zi(W,H),W.index=0,W.sibling=null,W}function w(W,H,X){return W.index=X,a?(X=W.alternate,X!==null?(X=X.index,X<H?(W.flags|=2,H):X):(W.flags|=2,H)):(W.flags|=1048576,H)}function C(W){return a&&W.alternate===null&&(W.flags|=2),W}function M(W,H,X,oe){return H===null||H.tag!==6?(H=yh(X,W.mode,oe),H.return=W,H):(H=y(H,X),H.return=W,H)}function B(W,H,X,oe){var ve=X.type;return ve===D?ne(W,H,X.props.children,oe,X.key):H!==null&&(H.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Rt&&r0(ve)===H.type)?(oe=y(H,X.props),oe.ref=Xs(W,H,X),oe.return=W,oe):(oe=Wl(X.type,X.key,X.props,null,W.mode,oe),oe.ref=Xs(W,H,X),oe.return=W,oe)}function K(W,H,X,oe){return H===null||H.tag!==4||H.stateNode.containerInfo!==X.containerInfo||H.stateNode.implementation!==X.implementation?(H=mh(X,W.mode,oe),H.return=W,H):(H=y(H,X.children||[]),H.return=W,H)}function ne(W,H,X,oe,ve){return H===null||H.tag!==7?(H=ko(X,W.mode,oe,ve),H.return=W,H):(H=y(H,X),H.return=W,H)}function re(W,H,X){if(typeof H=="string"&&H!==""||typeof H=="number")return H=yh(""+H,W.mode,X),H.return=W,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case q:return X=Wl(H.type,H.key,H.props,null,W.mode,X),X.ref=Xs(W,null,H),X.return=W,X;case Q:return H=mh(H,W.mode,X),H.return=W,H;case Rt:var oe=H._init;return re(W,oe(H._payload),X)}if(Yr(H)||me(H))return H=ko(H,W.mode,X,null),H.return=W,H;wl(W,H)}return null}function te(W,H,X,oe){var ve=H!==null?H.key:null;if(typeof X=="string"&&X!==""||typeof X=="number")return ve!==null?null:M(W,H,""+X,oe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case q:return X.key===ve?B(W,H,X,oe):null;case Q:return X.key===ve?K(W,H,X,oe):null;case Rt:return ve=X._init,te(W,H,ve(X._payload),oe)}if(Yr(X)||me(X))return ve!==null?null:ne(W,H,X,oe,null);wl(W,X)}return null}function le(W,H,X,oe,ve){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return W=W.get(X)||null,M(H,W,""+oe,ve);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case q:return W=W.get(oe.key===null?X:oe.key)||null,B(H,W,oe,ve);case Q:return W=W.get(oe.key===null?X:oe.key)||null,K(H,W,oe,ve);case Rt:var we=oe._init;return le(W,H,X,we(oe._payload),ve)}if(Yr(oe)||me(oe))return W=W.get(X)||null,ne(H,W,oe,ve,null);wl(H,oe)}return null}function de(W,H,X,oe){for(var ve=null,we=null,Ee=H,Ie=H=0,Yt=null;Ee!==null&&Ie<X.length;Ie++){Ee.index>Ie?(Yt=Ee,Ee=null):Yt=Ee.sibling;var $e=te(W,Ee,X[Ie],oe);if($e===null){Ee===null&&(Ee=Yt);break}a&&Ee&&$e.alternate===null&&u(W,Ee),H=w($e,H,Ie),we===null?ve=$e:we.sibling=$e,we=$e,Ee=Yt}if(Ie===X.length)return f(W,Ee),vt&&To(W,Ie),ve;if(Ee===null){for(;Ie<X.length;Ie++)Ee=re(W,X[Ie],oe),Ee!==null&&(H=w(Ee,H,Ie),we===null?ve=Ee:we.sibling=Ee,we=Ee);return vt&&To(W,Ie),ve}for(Ee=p(W,Ee);Ie<X.length;Ie++)Yt=le(Ee,W,Ie,X[Ie],oe),Yt!==null&&(a&&Yt.alternate!==null&&Ee.delete(Yt.key===null?Ie:Yt.key),H=w(Yt,H,Ie),we===null?ve=Yt:we.sibling=Yt,we=Yt);return a&&Ee.forEach(function(Hi){return u(W,Hi)}),vt&&To(W,Ie),ve}function pe(W,H,X,oe){var ve=me(X);if(typeof ve!="function")throw Error(t(150));if(X=ve.call(X),X==null)throw Error(t(151));for(var we=ve=null,Ee=H,Ie=H=0,Yt=null,$e=X.next();Ee!==null&&!$e.done;Ie++,$e=X.next()){Ee.index>Ie?(Yt=Ee,Ee=null):Yt=Ee.sibling;var Hi=te(W,Ee,$e.value,oe);if(Hi===null){Ee===null&&(Ee=Yt);break}a&&Ee&&Hi.alternate===null&&u(W,Ee),H=w(Hi,H,Ie),we===null?ve=Hi:we.sibling=Hi,we=Hi,Ee=Yt}if($e.done)return f(W,Ee),vt&&To(W,Ie),ve;if(Ee===null){for(;!$e.done;Ie++,$e=X.next())$e=re(W,$e.value,oe),$e!==null&&(H=w($e,H,Ie),we===null?ve=$e:we.sibling=$e,we=$e);return vt&&To(W,Ie),ve}for(Ee=p(W,Ee);!$e.done;Ie++,$e=X.next())$e=le(Ee,W,Ie,$e.value,oe),$e!==null&&(a&&$e.alternate!==null&&Ee.delete($e.key===null?Ie:$e.key),H=w($e,H,Ie),we===null?ve=$e:we.sibling=$e,we=$e);return a&&Ee.forEach(function(P2){return u(W,P2)}),vt&&To(W,Ie),ve}function St(W,H,X,oe){if(typeof X=="object"&&X!==null&&X.type===D&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case q:e:{for(var ve=X.key,we=H;we!==null;){if(we.key===ve){if(ve=X.type,ve===D){if(we.tag===7){f(W,we.sibling),H=y(we,X.props.children),H.return=W,W=H;break e}}else if(we.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Rt&&r0(ve)===we.type){f(W,we.sibling),H=y(we,X.props),H.ref=Xs(W,we,X),H.return=W,W=H;break e}f(W,we);break}else u(W,we);we=we.sibling}X.type===D?(H=ko(X.props.children,W.mode,oe,X.key),H.return=W,W=H):(oe=Wl(X.type,X.key,X.props,null,W.mode,oe),oe.ref=Xs(W,H,X),oe.return=W,W=oe)}return C(W);case Q:e:{for(we=X.key;H!==null;){if(H.key===we)if(H.tag===4&&H.stateNode.containerInfo===X.containerInfo&&H.stateNode.implementation===X.implementation){f(W,H.sibling),H=y(H,X.children||[]),H.return=W,W=H;break e}else{f(W,H);break}else u(W,H);H=H.sibling}H=mh(X,W.mode,oe),H.return=W,W=H}return C(W);case Rt:return we=X._init,St(W,H,we(X._payload),oe)}if(Yr(X))return de(W,H,X,oe);if(me(X))return pe(W,H,X,oe);wl(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"?(X=""+X,H!==null&&H.tag===6?(f(W,H.sibling),H=y(H,X),H.return=W,W=H):(f(W,H),H=yh(X,W.mode,oe),H.return=W,W=H),C(W)):f(W,H)}return St}var ka=i0(!0),o0=i0(!1),El=Pi(null),Al=null,La=null,Tf=null;function Rf(){Tf=La=Al=null}function Of(a){var u=El.current;ht(El),a._currentValue=u}function Df(a,u,f){for(;a!==null;){var p=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,p!==null&&(p.childLanes|=u)):p!==null&&(p.childLanes&u)!==u&&(p.childLanes|=u),a===f)break;a=a.return}}function Fa(a,u){Al=a,Tf=La=null,a=a.dependencies,a!==null&&a.firstContext!==null&&(a.lanes&u&&(Mn=!0),a.firstContext=null)}function nr(a){var u=a._currentValue;if(Tf!==a)if(a={context:a,memoizedValue:u,next:null},La===null){if(Al===null)throw Error(t(308));La=a,Al.dependencies={lanes:0,firstContext:a}}else La=La.next=a;return u}var Ro=null;function Pf(a){Ro===null?Ro=[a]:Ro.push(a)}function a0(a,u,f,p){var y=u.interleaved;return y===null?(f.next=f,Pf(u)):(f.next=y.next,y.next=f),u.interleaved=f,li(a,p)}function li(a,u){a.lanes|=u;var f=a.alternate;for(f!==null&&(f.lanes|=u),f=a,a=a.return;a!==null;)a.childLanes|=u,f=a.alternate,f!==null&&(f.childLanes|=u),f=a,a=a.return;return f.tag===3?f.stateNode:null}var Mi=!1;function Nf(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function s0(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,effects:a.effects})}function ci(a,u){return{eventTime:a,lane:u,tag:0,payload:null,callback:null,next:null}}function ki(a,u,f){var p=a.updateQueue;if(p===null)return null;if(p=p.shared,je&2){var y=p.pending;return y===null?u.next=u:(u.next=y.next,y.next=u),p.pending=u,li(a,f)}return y=p.interleaved,y===null?(u.next=u,Pf(p)):(u.next=y.next,y.next=u),p.interleaved=u,li(a,f)}function Cl(a,u,f){if(u=u.updateQueue,u!==null&&(u=u.shared,(f&4194240)!==0)){var p=u.lanes;p&=a.pendingLanes,f|=p,u.lanes=f,Ci(a,f)}}function u0(a,u){var f=a.updateQueue,p=a.alternate;if(p!==null&&(p=p.updateQueue,f===p)){var y=null,w=null;if(f=f.firstBaseUpdate,f!==null){do{var C={eventTime:f.eventTime,lane:f.lane,tag:f.tag,payload:f.payload,callback:f.callback,next:null};w===null?y=w=C:w=w.next=C,f=f.next}while(f!==null);w===null?y=w=u:w=w.next=u}else y=w=u;f={baseState:p.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:p.shared,effects:p.effects},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=u}function Il(a,u,f,p){var y=a.updateQueue;Mi=!1;var w=y.firstBaseUpdate,C=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var B=M,K=B.next;B.next=null,C===null?w=K:C.next=K,C=B;var ne=a.alternate;ne!==null&&(ne=ne.updateQueue,M=ne.lastBaseUpdate,M!==C&&(M===null?ne.firstBaseUpdate=K:M.next=K,ne.lastBaseUpdate=B))}if(w!==null){var re=y.baseState;C=0,ne=K=B=null,M=w;do{var te=M.lane,le=M.eventTime;if((p&te)===te){ne!==null&&(ne=ne.next={eventTime:le,lane:0,tag:M.tag,payload:M.payload,callback:M.callback,next:null});e:{var de=a,pe=M;switch(te=u,le=f,pe.tag){case 1:if(de=pe.payload,typeof de=="function"){re=de.call(le,re,te);break e}re=de;break e;case 3:de.flags=de.flags&-65537|128;case 0:if(de=pe.payload,te=typeof de=="function"?de.call(le,re,te):de,te==null)break e;re=ce({},re,te);break e;case 2:Mi=!0}}M.callback!==null&&M.lane!==0&&(a.flags|=64,te=y.effects,te===null?y.effects=[M]:te.push(M))}else le={eventTime:le,lane:te,tag:M.tag,payload:M.payload,callback:M.callback,next:null},ne===null?(K=ne=le,B=re):ne=ne.next=le,C|=te;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;te=M,M=te.next,te.next=null,y.lastBaseUpdate=te,y.shared.pending=null}}while(!0);if(ne===null&&(B=re),y.baseState=B,y.firstBaseUpdate=K,y.lastBaseUpdate=ne,u=y.shared.interleaved,u!==null){y=u;do C|=y.lane,y=y.next;while(y!==u)}else w===null&&(y.shared.lanes=0);Po|=C,a.lanes=C,a.memoizedState=re}}function l0(a,u,f){if(a=u.effects,u.effects=null,a!==null)for(u=0;u<a.length;u++){var p=a[u],y=p.callback;if(y!==null){if(p.callback=null,p=f,typeof y!="function")throw Error(t(191,y));y.call(p)}}}var Ks={},Vr=Pi(Ks),qs=Pi(Ks),Ys=Pi(Ks);function Oo(a){if(a===Ks)throw Error(t(174));return a}function bf(a,u){switch(ut(Ys,u),ut(qs,a),ut(Vr,Ks),a=u.nodeType,a){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:bt(null,"");break;default:a=a===8?u.parentNode:u,u=a.namespaceURI||null,a=a.tagName,u=bt(u,a)}ht(Vr),ut(Vr,u)}function Ba(){ht(Vr),ht(qs),ht(Ys)}function c0(a){Oo(Ys.current);var u=Oo(Vr.current),f=bt(u,a.type);u!==f&&(ut(qs,a),ut(Vr,f))}function Mf(a){qs.current===a&&(ht(Vr),ht(qs))}var _t=Pi(0);function Sl(a){for(var u=a;u!==null;){if(u.tag===13){var f=u.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||f.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var kf=[];function Lf(){for(var a=0;a<kf.length;a++)kf[a]._workInProgressVersionPrimary=null;kf.length=0}var Tl=z.ReactCurrentDispatcher,Ff=z.ReactCurrentBatchConfig,Do=0,xt=null,kt=null,Kt=null,Rl=!1,Qs=!1,Zs=0,Jm=0;function pn(){throw Error(t(321))}function Bf(a,u){if(u===null)return!1;for(var f=0;f<u.length&&f<a.length;f++)if(!xr(a[f],u[f]))return!1;return!0}function Vf(a,u,f,p,y,w){if(Do=w,xt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Tl.current=a===null||a.memoizedState===null?r2:i2,a=f(p,y),Qs){w=0;do{if(Qs=!1,Zs=0,25<=w)throw Error(t(301));w+=1,Kt=kt=null,u.updateQueue=null,Tl.current=o2,a=f(p,y)}while(Qs)}if(Tl.current=Pl,u=kt!==null&&kt.next!==null,Do=0,Kt=kt=xt=null,Rl=!1,u)throw Error(t(300));return a}function Uf(){var a=Zs!==0;return Zs=0,a}function Ur(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?xt.memoizedState=Kt=a:Kt=Kt.next=a,Kt}function rr(){if(kt===null){var a=xt.alternate;a=a!==null?a.memoizedState:null}else a=kt.next;var u=Kt===null?xt.memoizedState:Kt.next;if(u!==null)Kt=u,kt=a;else{if(a===null)throw Error(t(310));kt=a,a={memoizedState:kt.memoizedState,baseState:kt.baseState,baseQueue:kt.baseQueue,queue:kt.queue,next:null},Kt===null?xt.memoizedState=Kt=a:Kt=Kt.next=a}return Kt}function Js(a,u){return typeof u=="function"?u(a):u}function zf(a){var u=rr(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var p=kt,y=p.baseQueue,w=f.pending;if(w!==null){if(y!==null){var C=y.next;y.next=w.next,w.next=C}p.baseQueue=y=w,f.pending=null}if(y!==null){w=y.next,p=p.baseState;var M=C=null,B=null,K=w;do{var ne=K.lane;if((Do&ne)===ne)B!==null&&(B=B.next={lane:0,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),p=K.hasEagerState?K.eagerState:a(p,K.action);else{var re={lane:ne,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null};B===null?(M=B=re,C=p):B=B.next=re,xt.lanes|=ne,Po|=ne}K=K.next}while(K!==null&&K!==w);B===null?C=p:B.next=M,xr(p,u.memoizedState)||(Mn=!0),u.memoizedState=p,u.baseState=C,u.baseQueue=B,f.lastRenderedState=p}if(a=f.interleaved,a!==null){y=a;do w=y.lane,xt.lanes|=w,Po|=w,y=y.next;while(y!==a)}else y===null&&(f.lanes=0);return[u.memoizedState,f.dispatch]}function Hf(a){var u=rr(),f=u.queue;if(f===null)throw Error(t(311));f.lastRenderedReducer=a;var p=f.dispatch,y=f.pending,w=u.memoizedState;if(y!==null){f.pending=null;var C=y=y.next;do w=a(w,C.action),C=C.next;while(C!==y);xr(w,u.memoizedState)||(Mn=!0),u.memoizedState=w,u.baseQueue===null&&(u.baseState=w),f.lastRenderedState=w}return[w,p]}function f0(){}function h0(a,u){var f=xt,p=rr(),y=u(),w=!xr(p.memoizedState,y);if(w&&(p.memoizedState=y,Mn=!0),p=p.queue,jf(g0.bind(null,f,p,a),[a]),p.getSnapshot!==u||w||Kt!==null&&Kt.memoizedState.tag&1){if(f.flags|=2048,eu(9,p0.bind(null,f,p,y,u),void 0,null),qt===null)throw Error(t(349));Do&30||d0(f,u,y)}return y}function d0(a,u,f){a.flags|=16384,a={getSnapshot:u,value:f},u=xt.updateQueue,u===null?(u={lastEffect:null,stores:null},xt.updateQueue=u,u.stores=[a]):(f=u.stores,f===null?u.stores=[a]:f.push(a))}function p0(a,u,f,p){u.value=f,u.getSnapshot=p,v0(u)&&y0(a)}function g0(a,u,f){return f(function(){v0(u)&&y0(a)})}function v0(a){var u=a.getSnapshot;a=a.value;try{var f=u();return!xr(a,f)}catch{return!0}}function y0(a){var u=li(a,1);u!==null&&Ir(u,a,1,-1)}function m0(a){var u=Ur();return typeof a=="function"&&(a=a()),u.memoizedState=u.baseState=a,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Js,lastRenderedState:a},u.queue=a,a=a.dispatch=n2.bind(null,xt,a),[u.memoizedState,a]}function eu(a,u,f,p){return a={tag:a,create:u,destroy:f,deps:p,next:null},u=xt.updateQueue,u===null?(u={lastEffect:null,stores:null},xt.updateQueue=u,u.lastEffect=a.next=a):(f=u.lastEffect,f===null?u.lastEffect=a.next=a:(p=f.next,f.next=a,a.next=p,u.lastEffect=a)),a}function _0(){return rr().memoizedState}function Ol(a,u,f,p){var y=Ur();xt.flags|=a,y.memoizedState=eu(1|u,f,void 0,p===void 0?null:p)}function Dl(a,u,f,p){var y=rr();p=p===void 0?null:p;var w=void 0;if(kt!==null){var C=kt.memoizedState;if(w=C.destroy,p!==null&&Bf(p,C.deps)){y.memoizedState=eu(u,f,w,p);return}}xt.flags|=a,y.memoizedState=eu(1|u,f,w,p)}function x0(a,u){return Ol(8390656,8,a,u)}function jf(a,u){return Dl(2048,8,a,u)}function w0(a,u){return Dl(4,2,a,u)}function E0(a,u){return Dl(4,4,a,u)}function A0(a,u){if(typeof u=="function")return a=a(),u(a),function(){u(null)};if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function C0(a,u,f){return f=f!=null?f.concat([a]):null,Dl(4,4,A0.bind(null,u,a),f)}function Gf(){}function I0(a,u){var f=rr();u=u===void 0?null:u;var p=f.memoizedState;return p!==null&&u!==null&&Bf(u,p[1])?p[0]:(f.memoizedState=[a,u],a)}function S0(a,u){var f=rr();u=u===void 0?null:u;var p=f.memoizedState;return p!==null&&u!==null&&Bf(u,p[1])?p[0]:(a=a(),f.memoizedState=[a,u],a)}function T0(a,u,f){return Do&21?(xr(f,u)||(f=_o(),xt.lanes|=f,Po|=f,a.baseState=!0),u):(a.baseState&&(a.baseState=!1,Mn=!0),a.memoizedState=f)}function e2(a,u){var f=ke;ke=f!==0&&4>f?f:4,a(!0);var p=Ff.transition;Ff.transition={};try{a(!1),u()}finally{ke=f,Ff.transition=p}}function R0(){return rr().memoizedState}function t2(a,u,f){var p=Vi(a);if(f={lane:p,action:f,hasEagerState:!1,eagerState:null,next:null},O0(a))D0(u,f);else if(f=a0(a,u,f,p),f!==null){var y=In();Ir(f,a,p,y),P0(f,u,p)}}function n2(a,u,f){var p=Vi(a),y={lane:p,action:f,hasEagerState:!1,eagerState:null,next:null};if(O0(a))D0(u,y);else{var w=a.alternate;if(a.lanes===0&&(w===null||w.lanes===0)&&(w=u.lastRenderedReducer,w!==null))try{var C=u.lastRenderedState,M=w(C,f);if(y.hasEagerState=!0,y.eagerState=M,xr(M,C)){var B=u.interleaved;B===null?(y.next=y,Pf(u)):(y.next=B.next,B.next=y),u.interleaved=y;return}}catch{}finally{}f=a0(a,u,y,p),f!==null&&(y=In(),Ir(f,a,p,y),P0(f,u,p))}}function O0(a){var u=a.alternate;return a===xt||u!==null&&u===xt}function D0(a,u){Qs=Rl=!0;var f=a.pending;f===null?u.next=u:(u.next=f.next,f.next=u),a.pending=u}function P0(a,u,f){if(f&4194240){var p=u.lanes;p&=a.pendingLanes,f|=p,u.lanes=f,Ci(a,f)}}var Pl={readContext:nr,useCallback:pn,useContext:pn,useEffect:pn,useImperativeHandle:pn,useInsertionEffect:pn,useLayoutEffect:pn,useMemo:pn,useReducer:pn,useRef:pn,useState:pn,useDebugValue:pn,useDeferredValue:pn,useTransition:pn,useMutableSource:pn,useSyncExternalStore:pn,useId:pn,unstable_isNewReconciler:!1},r2={readContext:nr,useCallback:function(a,u){return Ur().memoizedState=[a,u===void 0?null:u],a},useContext:nr,useEffect:x0,useImperativeHandle:function(a,u,f){return f=f!=null?f.concat([a]):null,Ol(4194308,4,A0.bind(null,u,a),f)},useLayoutEffect:function(a,u){return Ol(4194308,4,a,u)},useInsertionEffect:function(a,u){return Ol(4,2,a,u)},useMemo:function(a,u){var f=Ur();return u=u===void 0?null:u,a=a(),f.memoizedState=[a,u],a},useReducer:function(a,u,f){var p=Ur();return u=f!==void 0?f(u):u,p.memoizedState=p.baseState=u,a={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:u},p.queue=a,a=a.dispatch=t2.bind(null,xt,a),[p.memoizedState,a]},useRef:function(a){var u=Ur();return a={current:a},u.memoizedState=a},useState:m0,useDebugValue:Gf,useDeferredValue:function(a){return Ur().memoizedState=a},useTransition:function(){var a=m0(!1),u=a[0];return a=e2.bind(null,a[1]),Ur().memoizedState=a,[u,a]},useMutableSource:function(){},useSyncExternalStore:function(a,u,f){var p=xt,y=Ur();if(vt){if(f===void 0)throw Error(t(407));f=f()}else{if(f=u(),qt===null)throw Error(t(349));Do&30||d0(p,u,f)}y.memoizedState=f;var w={value:f,getSnapshot:u};return y.queue=w,x0(g0.bind(null,p,w,a),[a]),p.flags|=2048,eu(9,p0.bind(null,p,w,f,u),void 0,null),f},useId:function(){var a=Ur(),u=qt.identifierPrefix;if(vt){var f=ui,p=si;f=(p&~(1<<32-En(p)-1)).toString(32)+f,u=":"+u+"R"+f,f=Zs++,0<f&&(u+="H"+f.toString(32)),u+=":"}else f=Jm++,u=":"+u+"r"+f.toString(32)+":";return a.memoizedState=u},unstable_isNewReconciler:!1},i2={readContext:nr,useCallback:I0,useContext:nr,useEffect:jf,useImperativeHandle:C0,useInsertionEffect:w0,useLayoutEffect:E0,useMemo:S0,useReducer:zf,useRef:_0,useState:function(){return zf(Js)},useDebugValue:Gf,useDeferredValue:function(a){var u=rr();return T0(u,kt.memoizedState,a)},useTransition:function(){var a=zf(Js)[0],u=rr().memoizedState;return[a,u]},useMutableSource:f0,useSyncExternalStore:h0,useId:R0,unstable_isNewReconciler:!1},o2={readContext:nr,useCallback:I0,useContext:nr,useEffect:jf,useImperativeHandle:C0,useInsertionEffect:w0,useLayoutEffect:E0,useMemo:S0,useReducer:Hf,useRef:_0,useState:function(){return Hf(Js)},useDebugValue:Gf,useDeferredValue:function(a){var u=rr();return kt===null?u.memoizedState=a:T0(u,kt.memoizedState,a)},useTransition:function(){var a=Hf(Js)[0],u=rr().memoizedState;return[a,u]},useMutableSource:f0,useSyncExternalStore:h0,useId:R0,unstable_isNewReconciler:!1};function Er(a,u){if(a&&a.defaultProps){u=ce({},u),a=a.defaultProps;for(var f in a)u[f]===void 0&&(u[f]=a[f]);return u}return u}function Wf(a,u,f,p){u=a.memoizedState,f=f(p,u),f=f==null?u:ce({},u,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Nl={isMounted:function(a){return(a=a._reactInternals)?dr(a)===a:!1},enqueueSetState:function(a,u,f){a=a._reactInternals;var p=In(),y=Vi(a),w=ci(p,y);w.payload=u,f!=null&&(w.callback=f),u=ki(a,w,y),u!==null&&(Ir(u,a,y,p),Cl(u,a,y))},enqueueReplaceState:function(a,u,f){a=a._reactInternals;var p=In(),y=Vi(a),w=ci(p,y);w.tag=1,w.payload=u,f!=null&&(w.callback=f),u=ki(a,w,y),u!==null&&(Ir(u,a,y,p),Cl(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var f=In(),p=Vi(a),y=ci(f,p);y.tag=2,u!=null&&(y.callback=u),u=ki(a,y,p),u!==null&&(Ir(u,a,p,f),Cl(u,a,p))}};function N0(a,u,f,p,y,w,C){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(p,w,C):u.prototype&&u.prototype.isPureReactComponent?!Us(f,p)||!Us(y,w):!0}function b0(a,u,f){var p=!1,y=Ni,w=u.contextType;return typeof w=="object"&&w!==null?w=nr(w):(y=bn(u)?Io:dn.current,p=u.contextTypes,w=(p=p!=null)?Pa(a,y):Ni),u=new u(f,w),a.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=Nl,a.stateNode=u,u._reactInternals=a,p&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=y,a.__reactInternalMemoizedMaskedChildContext=w),u}function M0(a,u,f,p){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(f,p),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(f,p),u.state!==a&&Nl.enqueueReplaceState(u,u.state,null)}function $f(a,u,f,p){var y=a.stateNode;y.props=f,y.state=a.memoizedState,y.refs={},Nf(a);var w=u.contextType;typeof w=="object"&&w!==null?y.context=nr(w):(w=bn(u)?Io:dn.current,y.context=Pa(a,w)),y.state=a.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Wf(a,u,w,f),y.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(u=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),u!==y.state&&Nl.enqueueReplaceState(y,y.state,null),Il(a,f,y,p),y.state=a.memoizedState),typeof y.componentDidMount=="function"&&(a.flags|=4194308)}function Va(a,u){try{var f="",p=u;do f+=Pe(p),p=p.return;while(p);var y=f}catch(w){y=`
Error generating stack: `+w.message+`
`+w.stack}return{value:a,source:u,stack:y,digest:null}}function Xf(a,u,f){return{value:a,source:null,stack:f??null,digest:u??null}}function Kf(a,u){try{console.error(u.value)}catch(f){setTimeout(function(){throw f})}}var a2=typeof WeakMap=="function"?WeakMap:Map;function k0(a,u,f){f=ci(-1,f),f.tag=3,f.payload={element:null};var p=u.value;return f.callback=function(){Vl||(Vl=!0,lh=p),Kf(a,u)},f}function L0(a,u,f){f=ci(-1,f),f.tag=3;var p=a.type.getDerivedStateFromError;if(typeof p=="function"){var y=u.value;f.payload=function(){return p(y)},f.callback=function(){Kf(a,u)}}var w=a.stateNode;return w!==null&&typeof w.componentDidCatch=="function"&&(f.callback=function(){Kf(a,u),typeof p!="function"&&(Fi===null?Fi=new Set([this]):Fi.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})}),f}function F0(a,u,f){var p=a.pingCache;if(p===null){p=a.pingCache=new a2;var y=new Set;p.set(u,y)}else y=p.get(u),y===void 0&&(y=new Set,p.set(u,y));y.has(f)||(y.add(f),a=x2.bind(null,a,u,f),u.then(a,a))}function B0(a){do{var u;if((u=a.tag===13)&&(u=a.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return a;a=a.return}while(a!==null);return null}function V0(a,u,f,p,y){return a.mode&1?(a.flags|=65536,a.lanes=y,a):(a===u?a.flags|=65536:(a.flags|=128,f.flags|=131072,f.flags&=-52805,f.tag===1&&(f.alternate===null?f.tag=17:(u=ci(-1,1),u.tag=2,ki(f,u,1))),f.lanes|=1),a)}var s2=z.ReactCurrentOwner,Mn=!1;function Cn(a,u,f,p){u.child=a===null?o0(u,null,f,p):ka(u,a.child,f,p)}function U0(a,u,f,p,y){f=f.render;var w=u.ref;return Fa(u,y),p=Vf(a,u,f,p,w,y),f=Uf(),a!==null&&!Mn?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,fi(a,u,y)):(vt&&f&&Ef(u),u.flags|=1,Cn(a,u,p,y),u.child)}function z0(a,u,f,p,y){if(a===null){var w=f.type;return typeof w=="function"&&!vh(w)&&w.defaultProps===void 0&&f.compare===null&&f.defaultProps===void 0?(u.tag=15,u.type=w,H0(a,u,w,p,y)):(a=Wl(f.type,null,p,u,u.mode,y),a.ref=u.ref,a.return=u,u.child=a)}if(w=a.child,!(a.lanes&y)){var C=w.memoizedProps;if(f=f.compare,f=f!==null?f:Us,f(C,p)&&a.ref===u.ref)return fi(a,u,y)}return u.flags|=1,a=zi(w,p),a.ref=u.ref,a.return=u,u.child=a}function H0(a,u,f,p,y){if(a!==null){var w=a.memoizedProps;if(Us(w,p)&&a.ref===u.ref)if(Mn=!1,u.pendingProps=p=w,(a.lanes&y)!==0)a.flags&131072&&(Mn=!0);else return u.lanes=a.lanes,fi(a,u,y)}return qf(a,u,f,p,y)}function j0(a,u,f){var p=u.pendingProps,y=p.children,w=a!==null?a.memoizedState:null;if(p.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(za,Kn),Kn|=f;else{if(!(f&1073741824))return a=w!==null?w.baseLanes|f:f,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:a,cachePool:null,transitions:null},u.updateQueue=null,ut(za,Kn),Kn|=a,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=w!==null?w.baseLanes:f,ut(za,Kn),Kn|=p}else w!==null?(p=w.baseLanes|f,u.memoizedState=null):p=f,ut(za,Kn),Kn|=p;return Cn(a,u,y,f),u.child}function G0(a,u){var f=u.ref;(a===null&&f!==null||a!==null&&a.ref!==f)&&(u.flags|=512,u.flags|=2097152)}function qf(a,u,f,p,y){var w=bn(f)?Io:dn.current;return w=Pa(u,w),Fa(u,y),f=Vf(a,u,f,p,w,y),p=Uf(),a!==null&&!Mn?(u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~y,fi(a,u,y)):(vt&&p&&Ef(u),u.flags|=1,Cn(a,u,f,y),u.child)}function W0(a,u,f,p,y){if(bn(f)){var w=!0;vl(u)}else w=!1;if(Fa(u,y),u.stateNode===null)Ml(a,u),b0(u,f,p),$f(u,f,p,y),p=!0;else if(a===null){var C=u.stateNode,M=u.memoizedProps;C.props=M;var B=C.context,K=f.contextType;typeof K=="object"&&K!==null?K=nr(K):(K=bn(f)?Io:dn.current,K=Pa(u,K));var ne=f.getDerivedStateFromProps,re=typeof ne=="function"||typeof C.getSnapshotBeforeUpdate=="function";re||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==p||B!==K)&&M0(u,C,p,K),Mi=!1;var te=u.memoizedState;C.state=te,Il(u,p,C,y),B=u.memoizedState,M!==p||te!==B||Nn.current||Mi?(typeof ne=="function"&&(Wf(u,f,ne,p),B=u.memoizedState),(M=Mi||N0(u,f,M,p,te,B,K))?(re||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(u.flags|=4194308)):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=p,u.memoizedState=B),C.props=p,C.state=B,C.context=K,p=M):(typeof C.componentDidMount=="function"&&(u.flags|=4194308),p=!1)}else{C=u.stateNode,s0(a,u),M=u.memoizedProps,K=u.type===u.elementType?M:Er(u.type,M),C.props=K,re=u.pendingProps,te=C.context,B=f.contextType,typeof B=="object"&&B!==null?B=nr(B):(B=bn(f)?Io:dn.current,B=Pa(u,B));var le=f.getDerivedStateFromProps;(ne=typeof le=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==re||te!==B)&&M0(u,C,p,B),Mi=!1,te=u.memoizedState,C.state=te,Il(u,p,C,y);var de=u.memoizedState;M!==re||te!==de||Nn.current||Mi?(typeof le=="function"&&(Wf(u,f,le,p),de=u.memoizedState),(K=Mi||N0(u,f,K,p,te,de,B)||!1)?(ne||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(p,de,B),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(p,de,B)),typeof C.componentDidUpdate=="function"&&(u.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=1024),u.memoizedProps=p,u.memoizedState=de),C.props=p,C.state=de,C.context=B,p=K):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&te===a.memoizedState||(u.flags|=1024),p=!1)}return Yf(a,u,f,p,w,y)}function Yf(a,u,f,p,y,w){G0(a,u);var C=(u.flags&128)!==0;if(!p&&!C)return y&&Y1(u,f,!1),fi(a,u,w);p=u.stateNode,s2.current=u;var M=C&&typeof f.getDerivedStateFromError!="function"?null:p.render();return u.flags|=1,a!==null&&C?(u.child=ka(u,a.child,null,w),u.child=ka(u,null,M,w)):Cn(a,u,M,w),u.memoizedState=p.state,y&&Y1(u,f,!0),u.child}function $0(a){var u=a.stateNode;u.pendingContext?K1(a,u.pendingContext,u.pendingContext!==u.context):u.context&&K1(a,u.context,!1),bf(a,u.containerInfo)}function X0(a,u,f,p,y){return Ma(),Sf(y),u.flags|=256,Cn(a,u,f,p),u.child}var Qf={dehydrated:null,treeContext:null,retryLane:0};function Zf(a){return{baseLanes:a,cachePool:null,transitions:null}}function K0(a,u,f){var p=u.pendingProps,y=_t.current,w=!1,C=(u.flags&128)!==0,M;if((M=C)||(M=a!==null&&a.memoizedState===null?!1:(y&2)!==0),M?(w=!0,u.flags&=-129):(a===null||a.memoizedState!==null)&&(y|=1),ut(_t,y&1),a===null)return If(u),a=u.memoizedState,a!==null&&(a=a.dehydrated,a!==null)?(u.mode&1?a.data==="$!"?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(C=p.children,a=p.fallback,w?(p=u.mode,w=u.child,C={mode:"hidden",children:C},!(p&1)&&w!==null?(w.childLanes=0,w.pendingProps=C):w=$l(C,p,0,null),a=ko(a,p,f,null),w.return=u,a.return=u,w.sibling=a,u.child=w,u.child.memoizedState=Zf(f),u.memoizedState=Qf,a):Jf(u,C));if(y=a.memoizedState,y!==null&&(M=y.dehydrated,M!==null))return u2(a,u,C,p,M,y,f);if(w){w=p.fallback,C=u.mode,y=a.child,M=y.sibling;var B={mode:"hidden",children:p.children};return!(C&1)&&u.child!==y?(p=u.child,p.childLanes=0,p.pendingProps=B,u.deletions=null):(p=zi(y,B),p.subtreeFlags=y.subtreeFlags&14680064),M!==null?w=zi(M,w):(w=ko(w,C,f,null),w.flags|=2),w.return=u,p.return=u,p.sibling=w,u.child=p,p=w,w=u.child,C=a.child.memoizedState,C=C===null?Zf(f):{baseLanes:C.baseLanes|f,cachePool:null,transitions:C.transitions},w.memoizedState=C,w.childLanes=a.childLanes&~f,u.memoizedState=Qf,p}return w=a.child,a=w.sibling,p=zi(w,{mode:"visible",children:p.children}),!(u.mode&1)&&(p.lanes=f),p.return=u,p.sibling=null,a!==null&&(f=u.deletions,f===null?(u.deletions=[a],u.flags|=16):f.push(a)),u.child=p,u.memoizedState=null,p}function Jf(a,u){return u=$l({mode:"visible",children:u},a.mode,0,null),u.return=a,a.child=u}function bl(a,u,f,p){return p!==null&&Sf(p),ka(u,a.child,null,f),a=Jf(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function u2(a,u,f,p,y,w,C){if(f)return u.flags&256?(u.flags&=-257,p=Xf(Error(t(422))),bl(a,u,C,p)):u.memoizedState!==null?(u.child=a.child,u.flags|=128,null):(w=p.fallback,y=u.mode,p=$l({mode:"visible",children:p.children},y,0,null),w=ko(w,y,C,null),w.flags|=2,p.return=u,w.return=u,p.sibling=w,u.child=p,u.mode&1&&ka(u,a.child,null,C),u.child.memoizedState=Zf(C),u.memoizedState=Qf,w);if(!(u.mode&1))return bl(a,u,C,null);if(y.data==="$!"){if(p=y.nextSibling&&y.nextSibling.dataset,p)var M=p.dgst;return p=M,w=Error(t(419)),p=Xf(w,p,void 0),bl(a,u,C,p)}if(M=(C&a.childLanes)!==0,Mn||M){if(p=qt,p!==null){switch(C&-C){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(p.suspendedLanes|C)?0:y,y!==0&&y!==w.retryLane&&(w.retryLane=y,li(a,y),Ir(p,a,y,-1))}return gh(),p=Xf(Error(t(421))),bl(a,u,C,p)}return y.data==="$?"?(u.flags|=128,u.child=a.child,u=w2.bind(null,a),y._reactRetry=u,null):(a=w.treeContext,Xn=Di(y.nextSibling),$n=u,vt=!0,wr=null,a!==null&&(er[tr++]=si,er[tr++]=ui,er[tr++]=So,si=a.id,ui=a.overflow,So=u),u=Jf(u,p.children),u.flags|=4096,u)}function q0(a,u,f){a.lanes|=u;var p=a.alternate;p!==null&&(p.lanes|=u),Df(a.return,u,f)}function eh(a,u,f,p,y){var w=a.memoizedState;w===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:p,tail:f,tailMode:y}:(w.isBackwards=u,w.rendering=null,w.renderingStartTime=0,w.last=p,w.tail=f,w.tailMode=y)}function Y0(a,u,f){var p=u.pendingProps,y=p.revealOrder,w=p.tail;if(Cn(a,u,p.children,f),p=_t.current,p&2)p=p&1|2,u.flags|=128;else{if(a!==null&&a.flags&128)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&q0(a,f,u);else if(a.tag===19)q0(a,f,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}p&=1}if(ut(_t,p),!(u.mode&1))u.memoizedState=null;else switch(y){case"forwards":for(f=u.child,y=null;f!==null;)a=f.alternate,a!==null&&Sl(a)===null&&(y=f),f=f.sibling;f=y,f===null?(y=u.child,u.child=null):(y=f.sibling,f.sibling=null),eh(u,!1,y,f,w);break;case"backwards":for(f=null,y=u.child,u.child=null;y!==null;){if(a=y.alternate,a!==null&&Sl(a)===null){u.child=y;break}a=y.sibling,y.sibling=f,f=y,y=a}eh(u,!0,f,null,w);break;case"together":eh(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ml(a,u){!(u.mode&1)&&a!==null&&(a.alternate=null,u.alternate=null,u.flags|=2)}function fi(a,u,f){if(a!==null&&(u.dependencies=a.dependencies),Po|=u.lanes,!(f&u.childLanes))return null;if(a!==null&&u.child!==a.child)throw Error(t(153));if(u.child!==null){for(a=u.child,f=zi(a,a.pendingProps),u.child=f,f.return=u;a.sibling!==null;)a=a.sibling,f=f.sibling=zi(a,a.pendingProps),f.return=u;f.sibling=null}return u.child}function l2(a,u,f){switch(u.tag){case 3:$0(u),Ma();break;case 5:c0(u);break;case 1:bn(u.type)&&vl(u);break;case 4:bf(u,u.stateNode.containerInfo);break;case 10:var p=u.type._context,y=u.memoizedProps.value;ut(El,p._currentValue),p._currentValue=y;break;case 13:if(p=u.memoizedState,p!==null)return p.dehydrated!==null?(ut(_t,_t.current&1),u.flags|=128,null):f&u.child.childLanes?K0(a,u,f):(ut(_t,_t.current&1),a=fi(a,u,f),a!==null?a.sibling:null);ut(_t,_t.current&1);break;case 19:if(p=(f&u.childLanes)!==0,a.flags&128){if(p)return Y0(a,u,f);u.flags|=128}if(y=u.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ut(_t,_t.current),p)break;return null;case 22:case 23:return u.lanes=0,j0(a,u,f)}return fi(a,u,f)}var Q0,th,Z0,J0;Q0=function(a,u){for(var f=u.child;f!==null;){if(f.tag===5||f.tag===6)a.appendChild(f.stateNode);else if(f.tag!==4&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return;f=f.return}f.sibling.return=f.return,f=f.sibling}},th=function(){},Z0=function(a,u,f,p){var y=a.memoizedProps;if(y!==p){a=u.stateNode,Oo(Vr.current);var w=null;switch(f){case"input":y=so(a,y),p=so(a,p),w=[];break;case"select":y=ce({},y,{value:void 0}),p=ce({},p,{value:void 0}),w=[];break;case"textarea":y=gs(a,y),p=gs(a,p),w=[];break;default:typeof y.onClick!="function"&&typeof p.onClick=="function"&&(a.onclick=dl)}ws(f,p);var C;f=null;for(K in y)if(!p.hasOwnProperty(K)&&y.hasOwnProperty(K)&&y[K]!=null)if(K==="style"){var M=y[K];for(C in M)M.hasOwnProperty(C)&&(f||(f={}),f[C]="")}else K!=="dangerouslySetInnerHTML"&&K!=="children"&&K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&K!=="autoFocus"&&(i.hasOwnProperty(K)?w||(w=[]):(w=w||[]).push(K,null));for(K in p){var B=p[K];if(M=y!=null?y[K]:void 0,p.hasOwnProperty(K)&&B!==M&&(B!=null||M!=null))if(K==="style")if(M){for(C in M)!M.hasOwnProperty(C)||B&&B.hasOwnProperty(C)||(f||(f={}),f[C]="");for(C in B)B.hasOwnProperty(C)&&M[C]!==B[C]&&(f||(f={}),f[C]=B[C])}else f||(w||(w=[]),w.push(K,f)),f=B;else K==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,M=M?M.__html:void 0,B!=null&&M!==B&&(w=w||[]).push(K,B)):K==="children"?typeof B!="string"&&typeof B!="number"||(w=w||[]).push(K,""+B):K!=="suppressContentEditableWarning"&&K!=="suppressHydrationWarning"&&(i.hasOwnProperty(K)?(B!=null&&K==="onScroll"&&ft("scroll",a),w||M===B||(w=[])):(w=w||[]).push(K,B))}f&&(w=w||[]).push("style",f);var K=w;(u.updateQueue=K)&&(u.flags|=4)}},J0=function(a,u,f,p){f!==p&&(u.flags|=4)};function tu(a,u){if(!vt)switch(a.tailMode){case"hidden":u=a.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var p=null;f!==null;)f.alternate!==null&&(p=f),f=f.sibling;p===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:p.sibling=null}}function gn(a){var u=a.alternate!==null&&a.alternate.child===a.child,f=0,p=0;if(u)for(var y=a.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags&14680064,p|=y.flags&14680064,y.return=a,y=y.sibling;else for(y=a.child;y!==null;)f|=y.lanes|y.childLanes,p|=y.subtreeFlags,p|=y.flags,y.return=a,y=y.sibling;return a.subtreeFlags|=p,a.childLanes=f,u}function c2(a,u,f){var p=u.pendingProps;switch(Af(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gn(u),null;case 1:return bn(u.type)&&gl(),gn(u),null;case 3:return p=u.stateNode,Ba(),ht(Nn),ht(dn),Lf(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(xl(u)?u.flags|=4:a===null||a.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,wr!==null&&(hh(wr),wr=null))),th(a,u),gn(u),null;case 5:Mf(u);var y=Oo(Ys.current);if(f=u.type,a!==null&&u.stateNode!=null)Z0(a,u,f,p,y),a.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!p){if(u.stateNode===null)throw Error(t(166));return gn(u),null}if(a=Oo(Vr.current),xl(u)){p=u.stateNode,f=u.type;var w=u.memoizedProps;switch(p[Br]=u,p[Ws]=w,a=(u.mode&1)!==0,f){case"dialog":ft("cancel",p),ft("close",p);break;case"iframe":case"object":case"embed":ft("load",p);break;case"video":case"audio":for(y=0;y<Hs.length;y++)ft(Hs[y],p);break;case"source":ft("error",p);break;case"img":case"image":case"link":ft("error",p),ft("load",p);break;case"details":ft("toggle",p);break;case"input":Jo(p,w),ft("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!w.multiple},ft("invalid",p);break;case"textarea":ta(p,w),ft("invalid",p)}ws(f,w),y=null;for(var C in w)if(w.hasOwnProperty(C)){var M=w[C];C==="children"?typeof M=="string"?p.textContent!==M&&(w.suppressHydrationWarning!==!0&&hl(p.textContent,M,a),y=["children",M]):typeof M=="number"&&p.textContent!==""+M&&(w.suppressHydrationWarning!==!0&&hl(p.textContent,M,a),y=["children",""+M]):i.hasOwnProperty(C)&&M!=null&&C==="onScroll"&&ft("scroll",p)}switch(f){case"input":qr(p),Bu(p,w,!0);break;case"textarea":qr(p),vs(p);break;case"select":case"option":break;default:typeof w.onClick=="function"&&(p.onclick=dl)}p=y,u.updateQueue=p,p!==null&&(u.flags|=4)}else{C=y.nodeType===9?y:y.ownerDocument,a==="http://www.w3.org/1999/xhtml"&&(a=Nt(f)),a==="http://www.w3.org/1999/xhtml"?f==="script"?(a=C.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild)):typeof p.is=="string"?a=C.createElement(f,{is:p.is}):(a=C.createElement(f),f==="select"&&(C=a,p.multiple?C.multiple=!0:p.size&&(C.size=p.size))):a=C.createElementNS(a,f),a[Br]=u,a[Ws]=p,Q0(a,u,!1,!1),u.stateNode=a;e:{switch(C=Es(f,p),f){case"dialog":ft("cancel",a),ft("close",a),y=p;break;case"iframe":case"object":case"embed":ft("load",a),y=p;break;case"video":case"audio":for(y=0;y<Hs.length;y++)ft(Hs[y],a);y=p;break;case"source":ft("error",a),y=p;break;case"img":case"image":case"link":ft("error",a),ft("load",a),y=p;break;case"details":ft("toggle",a),y=p;break;case"input":Jo(a,p),y=so(a,p),ft("invalid",a);break;case"option":y=p;break;case"select":a._wrapperState={wasMultiple:!!p.multiple},y=ce({},p,{value:void 0}),ft("invalid",a);break;case"textarea":ta(a,p),y=gs(a,p),ft("invalid",a);break;default:y=p}ws(f,y),M=y;for(w in M)if(M.hasOwnProperty(w)){var B=M[w];w==="style"?_s(a,B):w==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&ys(a,B)):w==="children"?typeof B=="string"?(f!=="textarea"||B!=="")&&_i(a,B):typeof B=="number"&&_i(a,""+B):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(i.hasOwnProperty(w)?B!=null&&w==="onScroll"&&ft("scroll",a):B!=null&&F(a,w,B,C))}switch(f){case"input":qr(a),Bu(a,p,!1);break;case"textarea":qr(a),vs(a);break;case"option":p.value!=null&&a.setAttribute("value",""+qe(p.value));break;case"select":a.multiple=!!p.multiple,w=p.value,w!=null?Qr(a,!!p.multiple,w,!1):p.defaultValue!=null&&Qr(a,!!p.multiple,p.defaultValue,!0);break;default:typeof y.onClick=="function"&&(a.onclick=dl)}switch(f){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return gn(u),null;case 6:if(a&&u.stateNode!=null)J0(a,u,a.memoizedProps,p);else{if(typeof p!="string"&&u.stateNode===null)throw Error(t(166));if(f=Oo(Ys.current),Oo(Vr.current),xl(u)){if(p=u.stateNode,f=u.memoizedProps,p[Br]=u,(w=p.nodeValue!==f)&&(a=$n,a!==null))switch(a.tag){case 3:hl(p.nodeValue,f,(a.mode&1)!==0);break;case 5:a.memoizedProps.suppressHydrationWarning!==!0&&hl(p.nodeValue,f,(a.mode&1)!==0)}w&&(u.flags|=4)}else p=(f.nodeType===9?f:f.ownerDocument).createTextNode(p),p[Br]=u,u.stateNode=p}return gn(u),null;case 13:if(ht(_t),p=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(vt&&Xn!==null&&u.mode&1&&!(u.flags&128))n0(),Ma(),u.flags|=98560,w=!1;else if(w=xl(u),p!==null&&p.dehydrated!==null){if(a===null){if(!w)throw Error(t(318));if(w=u.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(t(317));w[Br]=u}else Ma(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;gn(u),w=!1}else wr!==null&&(hh(wr),wr=null),w=!0;if(!w)return u.flags&65536?u:null}return u.flags&128?(u.lanes=f,u):(p=p!==null,p!==(a!==null&&a.memoizedState!==null)&&p&&(u.child.flags|=8192,u.mode&1&&(a===null||_t.current&1?Lt===0&&(Lt=3):gh())),u.updateQueue!==null&&(u.flags|=4),gn(u),null);case 4:return Ba(),th(a,u),a===null&&js(u.stateNode.containerInfo),gn(u),null;case 10:return Of(u.type._context),gn(u),null;case 17:return bn(u.type)&&gl(),gn(u),null;case 19:if(ht(_t),w=u.memoizedState,w===null)return gn(u),null;if(p=(u.flags&128)!==0,C=w.rendering,C===null)if(p)tu(w,!1);else{if(Lt!==0||a!==null&&a.flags&128)for(a=u.child;a!==null;){if(C=Sl(a),C!==null){for(u.flags|=128,tu(w,!1),p=C.updateQueue,p!==null&&(u.updateQueue=p,u.flags|=4),u.subtreeFlags=0,p=f,f=u.child;f!==null;)w=f,a=p,w.flags&=14680066,C=w.alternate,C===null?(w.childLanes=0,w.lanes=a,w.child=null,w.subtreeFlags=0,w.memoizedProps=null,w.memoizedState=null,w.updateQueue=null,w.dependencies=null,w.stateNode=null):(w.childLanes=C.childLanes,w.lanes=C.lanes,w.child=C.child,w.subtreeFlags=0,w.deletions=null,w.memoizedProps=C.memoizedProps,w.memoizedState=C.memoizedState,w.updateQueue=C.updateQueue,w.type=C.type,a=C.dependencies,w.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),f=f.sibling;return ut(_t,_t.current&1|2),u.child}a=a.sibling}w.tail!==null&&st()>Ha&&(u.flags|=128,p=!0,tu(w,!1),u.lanes=4194304)}else{if(!p)if(a=Sl(C),a!==null){if(u.flags|=128,p=!0,f=a.updateQueue,f!==null&&(u.updateQueue=f,u.flags|=4),tu(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!vt)return gn(u),null}else 2*st()-w.renderingStartTime>Ha&&f!==1073741824&&(u.flags|=128,p=!0,tu(w,!1),u.lanes=4194304);w.isBackwards?(C.sibling=u.child,u.child=C):(f=w.last,f!==null?f.sibling=C:u.child=C,w.last=C)}return w.tail!==null?(u=w.tail,w.rendering=u,w.tail=u.sibling,w.renderingStartTime=st(),u.sibling=null,f=_t.current,ut(_t,p?f&1|2:f&1),u):(gn(u),null);case 22:case 23:return ph(),p=u.memoizedState!==null,a!==null&&a.memoizedState!==null!==p&&(u.flags|=8192),p&&u.mode&1?Kn&1073741824&&(gn(u),u.subtreeFlags&6&&(u.flags|=8192)):gn(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function f2(a,u){switch(Af(u),u.tag){case 1:return bn(u.type)&&gl(),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ba(),ht(Nn),ht(dn),Lf(),a=u.flags,a&65536&&!(a&128)?(u.flags=a&-65537|128,u):null;case 5:return Mf(u),null;case 13:if(ht(_t),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(t(340));Ma()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return ht(_t),null;case 4:return Ba(),null;case 10:return Of(u.type._context),null;case 22:case 23:return ph(),null;case 24:return null;default:return null}}var kl=!1,vn=!1,h2=typeof WeakSet=="function"?WeakSet:Set,he=null;function Ua(a,u){var f=a.ref;if(f!==null)if(typeof f=="function")try{f(null)}catch(p){Et(a,u,p)}else f.current=null}function nh(a,u,f){try{f()}catch(p){Et(a,u,p)}}var ep=!1;function d2(a,u){if(pf=Ti,a=N1(),af(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var p=f.getSelection&&f.getSelection();if(p&&p.rangeCount!==0){f=p.anchorNode;var y=p.anchorOffset,w=p.focusNode;p=p.focusOffset;try{f.nodeType,w.nodeType}catch{f=null;break e}var C=0,M=-1,B=-1,K=0,ne=0,re=a,te=null;t:for(;;){for(var le;re!==f||y!==0&&re.nodeType!==3||(M=C+y),re!==w||p!==0&&re.nodeType!==3||(B=C+p),re.nodeType===3&&(C+=re.nodeValue.length),(le=re.firstChild)!==null;)te=re,re=le;for(;;){if(re===a)break t;if(te===f&&++K===y&&(M=C),te===w&&++ne===p&&(B=C),(le=re.nextSibling)!==null)break;re=te,te=re.parentNode}re=le}f=M===-1||B===-1?null:{start:M,end:B}}else f=null}f=f||{start:0,end:0}}else f=null;for(gf={focusedElem:a,selectionRange:f},Ti=!1,he=u;he!==null;)if(u=he,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,he=a;else for(;he!==null;){u=he;try{var de=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(de!==null){var pe=de.memoizedProps,St=de.memoizedState,W=u.stateNode,H=W.getSnapshotBeforeUpdate(u.elementType===u.type?pe:Er(u.type,pe),St);W.__reactInternalSnapshotBeforeUpdate=H}break;case 3:var X=u.stateNode.containerInfo;X.nodeType===1?X.textContent="":X.nodeType===9&&X.documentElement&&X.removeChild(X.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(oe){Et(u,u.return,oe)}if(a=u.sibling,a!==null){a.return=u.return,he=a;break}he=u.return}return de=ep,ep=!1,de}function nu(a,u,f){var p=u.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var y=p=p.next;do{if((y.tag&a)===a){var w=y.destroy;y.destroy=void 0,w!==void 0&&nh(u,f,w)}y=y.next}while(y!==p)}}function Ll(a,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var f=u=u.next;do{if((f.tag&a)===a){var p=f.create;f.destroy=p()}f=f.next}while(f!==u)}}function rh(a){var u=a.ref;if(u!==null){var f=a.stateNode;switch(a.tag){case 5:a=f;break;default:a=f}typeof u=="function"?u(a):u.current=a}}function tp(a){var u=a.alternate;u!==null&&(a.alternate=null,tp(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&(delete u[Br],delete u[Ws],delete u[_f],delete u[qm],delete u[Ym])),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}function np(a){return a.tag===5||a.tag===3||a.tag===4}function rp(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||np(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ih(a,u,f){var p=a.tag;if(p===5||p===6)a=a.stateNode,u?f.nodeType===8?f.parentNode.insertBefore(a,u):f.insertBefore(a,u):(f.nodeType===8?(u=f.parentNode,u.insertBefore(a,f)):(u=f,u.appendChild(a)),f=f._reactRootContainer,f!=null||u.onclick!==null||(u.onclick=dl));else if(p!==4&&(a=a.child,a!==null))for(ih(a,u,f),a=a.sibling;a!==null;)ih(a,u,f),a=a.sibling}function oh(a,u,f){var p=a.tag;if(p===5||p===6)a=a.stateNode,u?f.insertBefore(a,u):f.appendChild(a);else if(p!==4&&(a=a.child,a!==null))for(oh(a,u,f),a=a.sibling;a!==null;)oh(a,u,f),a=a.sibling}var on=null,Ar=!1;function Li(a,u,f){for(f=f.child;f!==null;)ip(a,u,f),f=f.sibling}function ip(a,u,f){if(Hn&&typeof Hn.onCommitFiberUnmount=="function")try{Hn.onCommitFiberUnmount(yo,f)}catch{}switch(f.tag){case 5:vn||Ua(f,u);case 6:var p=on,y=Ar;on=null,Li(a,u,f),on=p,Ar=y,on!==null&&(Ar?(a=on,f=f.stateNode,a.nodeType===8?a.parentNode.removeChild(f):a.removeChild(f)):on.removeChild(f.stateNode));break;case 18:on!==null&&(Ar?(a=on,f=f.stateNode,a.nodeType===8?mf(a.parentNode,f):a.nodeType===1&&mf(a,f),mr(a)):mf(on,f.stateNode));break;case 4:p=on,y=Ar,on=f.stateNode.containerInfo,Ar=!0,Li(a,u,f),on=p,Ar=y;break;case 0:case 11:case 14:case 15:if(!vn&&(p=f.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){y=p=p.next;do{var w=y,C=w.destroy;w=w.tag,C!==void 0&&(w&2||w&4)&&nh(f,u,C),y=y.next}while(y!==p)}Li(a,u,f);break;case 1:if(!vn&&(Ua(f,u),p=f.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=f.memoizedProps,p.state=f.memoizedState,p.componentWillUnmount()}catch(M){Et(f,u,M)}Li(a,u,f);break;case 21:Li(a,u,f);break;case 22:f.mode&1?(vn=(p=vn)||f.memoizedState!==null,Li(a,u,f),vn=p):Li(a,u,f);break;default:Li(a,u,f)}}function op(a){var u=a.updateQueue;if(u!==null){a.updateQueue=null;var f=a.stateNode;f===null&&(f=a.stateNode=new h2),u.forEach(function(p){var y=E2.bind(null,a,p);f.has(p)||(f.add(p),p.then(y,y))})}}function Cr(a,u){var f=u.deletions;if(f!==null)for(var p=0;p<f.length;p++){var y=f[p];try{var w=a,C=u,M=C;e:for(;M!==null;){switch(M.tag){case 5:on=M.stateNode,Ar=!1;break e;case 3:on=M.stateNode.containerInfo,Ar=!0;break e;case 4:on=M.stateNode.containerInfo,Ar=!0;break e}M=M.return}if(on===null)throw Error(t(160));ip(w,C,y),on=null,Ar=!1;var B=y.alternate;B!==null&&(B.return=null),y.return=null}catch(K){Et(y,u,K)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)ap(u,a),u=u.sibling}function ap(a,u){var f=a.alternate,p=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:if(Cr(u,a),zr(a),p&4){try{nu(3,a,a.return),Ll(3,a)}catch(pe){Et(a,a.return,pe)}try{nu(5,a,a.return)}catch(pe){Et(a,a.return,pe)}}break;case 1:Cr(u,a),zr(a),p&512&&f!==null&&Ua(f,f.return);break;case 5:if(Cr(u,a),zr(a),p&512&&f!==null&&Ua(f,f.return),a.flags&32){var y=a.stateNode;try{_i(y,"")}catch(pe){Et(a,a.return,pe)}}if(p&4&&(y=a.stateNode,y!=null)){var w=a.memoizedProps,C=f!==null?f.memoizedProps:w,M=a.type,B=a.updateQueue;if(a.updateQueue=null,B!==null)try{M==="input"&&w.type==="radio"&&w.name!=null&&ds(y,w),Es(M,C);var K=Es(M,w);for(C=0;C<B.length;C+=2){var ne=B[C],re=B[C+1];ne==="style"?_s(y,re):ne==="dangerouslySetInnerHTML"?ys(y,re):ne==="children"?_i(y,re):F(y,ne,re,K)}switch(M){case"input":ps(y,w);break;case"textarea":na(y,w);break;case"select":var te=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!w.multiple;var le=w.value;le!=null?Qr(y,!!w.multiple,le,!1):te!==!!w.multiple&&(w.defaultValue!=null?Qr(y,!!w.multiple,w.defaultValue,!0):Qr(y,!!w.multiple,w.multiple?[]:"",!1))}y[Ws]=w}catch(pe){Et(a,a.return,pe)}}break;case 6:if(Cr(u,a),zr(a),p&4){if(a.stateNode===null)throw Error(t(162));y=a.stateNode,w=a.memoizedProps;try{y.nodeValue=w}catch(pe){Et(a,a.return,pe)}}break;case 3:if(Cr(u,a),zr(a),p&4&&f!==null&&f.memoizedState.isDehydrated)try{mr(u.containerInfo)}catch(pe){Et(a,a.return,pe)}break;case 4:Cr(u,a),zr(a);break;case 13:Cr(u,a),zr(a),y=a.child,y.flags&8192&&(w=y.memoizedState!==null,y.stateNode.isHidden=w,!w||y.alternate!==null&&y.alternate.memoizedState!==null||(uh=st())),p&4&&op(a);break;case 22:if(ne=f!==null&&f.memoizedState!==null,a.mode&1?(vn=(K=vn)||ne,Cr(u,a),vn=K):Cr(u,a),zr(a),p&8192){if(K=a.memoizedState!==null,(a.stateNode.isHidden=K)&&!ne&&a.mode&1)for(he=a,ne=a.child;ne!==null;){for(re=he=ne;he!==null;){switch(te=he,le=te.child,te.tag){case 0:case 11:case 14:case 15:nu(4,te,te.return);break;case 1:Ua(te,te.return);var de=te.stateNode;if(typeof de.componentWillUnmount=="function"){p=te,f=te.return;try{u=p,de.props=u.memoizedProps,de.state=u.memoizedState,de.componentWillUnmount()}catch(pe){Et(p,f,pe)}}break;case 5:Ua(te,te.return);break;case 22:if(te.memoizedState!==null){lp(re);continue}}le!==null?(le.return=te,he=le):lp(re)}ne=ne.sibling}e:for(ne=null,re=a;;){if(re.tag===5){if(ne===null){ne=re;try{y=re.stateNode,K?(w=y.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none"):(M=re.stateNode,B=re.memoizedProps.style,C=B!=null&&B.hasOwnProperty("display")?B.display:null,M.style.display=ms("display",C))}catch(pe){Et(a,a.return,pe)}}}else if(re.tag===6){if(ne===null)try{re.stateNode.nodeValue=K?"":re.memoizedProps}catch(pe){Et(a,a.return,pe)}}else if((re.tag!==22&&re.tag!==23||re.memoizedState===null||re===a)&&re.child!==null){re.child.return=re,re=re.child;continue}if(re===a)break e;for(;re.sibling===null;){if(re.return===null||re.return===a)break e;ne===re&&(ne=null),re=re.return}ne===re&&(ne=null),re.sibling.return=re.return,re=re.sibling}}break;case 19:Cr(u,a),zr(a),p&4&&op(a);break;case 21:break;default:Cr(u,a),zr(a)}}function zr(a){var u=a.flags;if(u&2){try{e:{for(var f=a.return;f!==null;){if(np(f)){var p=f;break e}f=f.return}throw Error(t(160))}switch(p.tag){case 5:var y=p.stateNode;p.flags&32&&(_i(y,""),p.flags&=-33);var w=rp(a);oh(a,w,y);break;case 3:case 4:var C=p.stateNode.containerInfo,M=rp(a);ih(a,M,C);break;default:throw Error(t(161))}}catch(B){Et(a,a.return,B)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function p2(a,u,f){he=a,sp(a)}function sp(a,u,f){for(var p=(a.mode&1)!==0;he!==null;){var y=he,w=y.child;if(y.tag===22&&p){var C=y.memoizedState!==null||kl;if(!C){var M=y.alternate,B=M!==null&&M.memoizedState!==null||vn;M=kl;var K=vn;if(kl=C,(vn=B)&&!K)for(he=y;he!==null;)C=he,B=C.child,C.tag===22&&C.memoizedState!==null?cp(y):B!==null?(B.return=C,he=B):cp(y);for(;w!==null;)he=w,sp(w),w=w.sibling;he=y,kl=M,vn=K}up(a)}else y.subtreeFlags&8772&&w!==null?(w.return=y,he=w):up(a)}}function up(a){for(;he!==null;){var u=he;if(u.flags&8772){var f=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:vn||Ll(5,u);break;case 1:var p=u.stateNode;if(u.flags&4&&!vn)if(f===null)p.componentDidMount();else{var y=u.elementType===u.type?f.memoizedProps:Er(u.type,f.memoizedProps);p.componentDidUpdate(y,f.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var w=u.updateQueue;w!==null&&l0(u,w,p);break;case 3:var C=u.updateQueue;if(C!==null){if(f=null,u.child!==null)switch(u.child.tag){case 5:f=u.child.stateNode;break;case 1:f=u.child.stateNode}l0(u,C,f)}break;case 5:var M=u.stateNode;if(f===null&&u.flags&4){f=M;var B=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&f.focus();break;case"img":B.src&&(f.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var K=u.alternate;if(K!==null){var ne=K.memoizedState;if(ne!==null){var re=ne.dehydrated;re!==null&&mr(re)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}vn||u.flags&512&&rh(u)}catch(te){Et(u,u.return,te)}}if(u===a){he=null;break}if(f=u.sibling,f!==null){f.return=u.return,he=f;break}he=u.return}}function lp(a){for(;he!==null;){var u=he;if(u===a){he=null;break}var f=u.sibling;if(f!==null){f.return=u.return,he=f;break}he=u.return}}function cp(a){for(;he!==null;){var u=he;try{switch(u.tag){case 0:case 11:case 15:var f=u.return;try{Ll(4,u)}catch(B){Et(u,f,B)}break;case 1:var p=u.stateNode;if(typeof p.componentDidMount=="function"){var y=u.return;try{p.componentDidMount()}catch(B){Et(u,y,B)}}var w=u.return;try{rh(u)}catch(B){Et(u,w,B)}break;case 5:var C=u.return;try{rh(u)}catch(B){Et(u,C,B)}}}catch(B){Et(u,u.return,B)}if(u===a){he=null;break}var M=u.sibling;if(M!==null){M.return=u.return,he=M;break}he=u.return}}var g2=Math.ceil,Fl=z.ReactCurrentDispatcher,ah=z.ReactCurrentOwner,ir=z.ReactCurrentBatchConfig,je=0,qt=null,Dt=null,an=0,Kn=0,za=Pi(0),Lt=0,ru=null,Po=0,Bl=0,sh=0,iu=null,kn=null,uh=0,Ha=1/0,hi=null,Vl=!1,lh=null,Fi=null,Ul=!1,Bi=null,zl=0,ou=0,ch=null,Hl=-1,jl=0;function In(){return je&6?st():Hl!==-1?Hl:Hl=st()}function Vi(a){return a.mode&1?je&2&&an!==0?an&-an:Zm.transition!==null?(jl===0&&(jl=_o()),jl):(a=ke,a!==0||(a=window.event,a=a===void 0?16:bs(a.type)),a):1}function Ir(a,u,f,p){if(50<ou)throw ou=0,ch=null,Error(t(185));Ai(a,f,p),(!(je&2)||a!==qt)&&(a===qt&&(!(je&2)&&(Bl|=f),Lt===4&&Ui(a,an)),Ln(a,p),f===1&&je===0&&!(u.mode&1)&&(Ha=st()+500,yl&&bi()))}function Ln(a,u){var f=a.callbackNode;ei(a,u);var p=mo(a,a===qt?an:0);if(p===0)f!==null&&Rs(f),a.callbackNode=null,a.callbackPriority=0;else if(u=p&-p,a.callbackPriority!==u){if(f!=null&&Rs(f),u===1)a.tag===0?Qm(hp.bind(null,a)):Q1(hp.bind(null,a)),Xm(function(){!(je&6)&&bi()}),f=null;else{switch(Ii(p)){case 1:f=vo;break;case 4:f=xi;break;case 16:f=Qn;break;case 536870912:f=ju;break;default:f=Qn}f=xp(f,fp.bind(null,a))}a.callbackPriority=u,a.callbackNode=f}}function fp(a,u){if(Hl=-1,jl=0,je&6)throw Error(t(327));var f=a.callbackNode;if(ja()&&a.callbackNode!==f)return null;var p=mo(a,a===qt?an:0);if(p===0)return null;if(p&30||p&a.expiredLanes||u)u=Gl(a,p);else{u=p;var y=je;je|=2;var w=pp();(qt!==a||an!==u)&&(hi=null,Ha=st()+500,bo(a,u));do try{m2();break}catch(M){dp(a,M)}while(!0);Rf(),Fl.current=w,je=y,Dt!==null?u=0:(qt=null,an=0,u=Lt)}if(u!==0){if(u===2&&(y=jn(a),y!==0&&(p=y,u=fh(a,y))),u===1)throw f=ru,bo(a,0),Ui(a,p),Ln(a,st()),f;if(u===6)Ui(a,p);else{if(y=a.current.alternate,!(p&30)&&!v2(y)&&(u=Gl(a,p),u===2&&(w=jn(a),w!==0&&(p=w,u=fh(a,w))),u===1))throw f=ru,bo(a,0),Ui(a,p),Ln(a,st()),f;switch(a.finishedWork=y,a.finishedLanes=p,u){case 0:case 1:throw Error(t(345));case 2:Mo(a,kn,hi);break;case 3:if(Ui(a,p),(p&130023424)===p&&(u=uh+500-st(),10<u)){if(mo(a,0)!==0)break;if(y=a.suspendedLanes,(y&p)!==p){In(),a.pingedLanes|=a.suspendedLanes&y;break}a.timeoutHandle=yf(Mo.bind(null,a,kn,hi),u);break}Mo(a,kn,hi);break;case 4:if(Ui(a,p),(p&4194240)===p)break;for(u=a.eventTimes,y=-1;0<p;){var C=31-En(p);w=1<<C,C=u[C],C>y&&(y=C),p&=~w}if(p=y,p=st()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*g2(p/1960))-p,10<p){a.timeoutHandle=yf(Mo.bind(null,a,kn,hi),p);break}Mo(a,kn,hi);break;case 5:Mo(a,kn,hi);break;default:throw Error(t(329))}}}return Ln(a,st()),a.callbackNode===f?fp.bind(null,a):null}function fh(a,u){var f=iu;return a.current.memoizedState.isDehydrated&&(bo(a,u).flags|=256),a=Gl(a,u),a!==2&&(u=kn,kn=f,u!==null&&hh(u)),a}function hh(a){kn===null?kn=a:kn.push.apply(kn,a)}function v2(a){for(var u=a;;){if(u.flags&16384){var f=u.updateQueue;if(f!==null&&(f=f.stores,f!==null))for(var p=0;p<f.length;p++){var y=f[p],w=y.getSnapshot;y=y.value;try{if(!xr(w(),y))return!1}catch{return!1}}}if(f=u.child,u.subtreeFlags&16384&&f!==null)f.return=u,u=f;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Ui(a,u){for(u&=~sh,u&=~Bl,a.suspendedLanes|=u,a.pingedLanes&=~u,a=a.expirationTimes;0<u;){var f=31-En(u),p=1<<f;a[f]=-1,u&=~p}}function hp(a){if(je&6)throw Error(t(327));ja();var u=mo(a,0);if(!(u&1))return Ln(a,st()),null;var f=Gl(a,u);if(a.tag!==0&&f===2){var p=jn(a);p!==0&&(u=p,f=fh(a,p))}if(f===1)throw f=ru,bo(a,0),Ui(a,u),Ln(a,st()),f;if(f===6)throw Error(t(345));return a.finishedWork=a.current.alternate,a.finishedLanes=u,Mo(a,kn,hi),Ln(a,st()),null}function dh(a,u){var f=je;je|=1;try{return a(u)}finally{je=f,je===0&&(Ha=st()+500,yl&&bi())}}function No(a){Bi!==null&&Bi.tag===0&&!(je&6)&&ja();var u=je;je|=1;var f=ir.transition,p=ke;try{if(ir.transition=null,ke=1,a)return a()}finally{ke=p,ir.transition=f,je=u,!(je&6)&&bi()}}function ph(){Kn=za.current,ht(za)}function bo(a,u){a.finishedWork=null,a.finishedLanes=0;var f=a.timeoutHandle;if(f!==-1&&(a.timeoutHandle=-1,$m(f)),Dt!==null)for(f=Dt.return;f!==null;){var p=f;switch(Af(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&gl();break;case 3:Ba(),ht(Nn),ht(dn),Lf();break;case 5:Mf(p);break;case 4:Ba();break;case 13:ht(_t);break;case 19:ht(_t);break;case 10:Of(p.type._context);break;case 22:case 23:ph()}f=f.return}if(qt=a,Dt=a=zi(a.current,null),an=Kn=u,Lt=0,ru=null,sh=Bl=Po=0,kn=iu=null,Ro!==null){for(u=0;u<Ro.length;u++)if(f=Ro[u],p=f.interleaved,p!==null){f.interleaved=null;var y=p.next,w=f.pending;if(w!==null){var C=w.next;w.next=y,p.next=C}f.pending=p}Ro=null}return a}function dp(a,u){do{var f=Dt;try{if(Rf(),Tl.current=Pl,Rl){for(var p=xt.memoizedState;p!==null;){var y=p.queue;y!==null&&(y.pending=null),p=p.next}Rl=!1}if(Do=0,Kt=kt=xt=null,Qs=!1,Zs=0,ah.current=null,f===null||f.return===null){Lt=1,ru=u,Dt=null;break}e:{var w=a,C=f.return,M=f,B=u;if(u=an,M.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var K=B,ne=M,re=ne.tag;if(!(ne.mode&1)&&(re===0||re===11||re===15)){var te=ne.alternate;te?(ne.updateQueue=te.updateQueue,ne.memoizedState=te.memoizedState,ne.lanes=te.lanes):(ne.updateQueue=null,ne.memoizedState=null)}var le=B0(C);if(le!==null){le.flags&=-257,V0(le,C,M,w,u),le.mode&1&&F0(w,K,u),u=le,B=K;var de=u.updateQueue;if(de===null){var pe=new Set;pe.add(B),u.updateQueue=pe}else de.add(B);break e}else{if(!(u&1)){F0(w,K,u),gh();break e}B=Error(t(426))}}else if(vt&&M.mode&1){var St=B0(C);if(St!==null){!(St.flags&65536)&&(St.flags|=256),V0(St,C,M,w,u),Sf(Va(B,M));break e}}w=B=Va(B,M),Lt!==4&&(Lt=2),iu===null?iu=[w]:iu.push(w),w=C;do{switch(w.tag){case 3:w.flags|=65536,u&=-u,w.lanes|=u;var W=k0(w,B,u);u0(w,W);break e;case 1:M=B;var H=w.type,X=w.stateNode;if(!(w.flags&128)&&(typeof H.getDerivedStateFromError=="function"||X!==null&&typeof X.componentDidCatch=="function"&&(Fi===null||!Fi.has(X)))){w.flags|=65536,u&=-u,w.lanes|=u;var oe=L0(w,M,u);u0(w,oe);break e}}w=w.return}while(w!==null)}vp(f)}catch(ve){u=ve,Dt===f&&f!==null&&(Dt=f=f.return);continue}break}while(!0)}function pp(){var a=Fl.current;return Fl.current=Pl,a===null?Pl:a}function gh(){(Lt===0||Lt===3||Lt===2)&&(Lt=4),qt===null||!(Po&268435455)&&!(Bl&268435455)||Ui(qt,an)}function Gl(a,u){var f=je;je|=2;var p=pp();(qt!==a||an!==u)&&(hi=null,bo(a,u));do try{y2();break}catch(y){dp(a,y)}while(!0);if(Rf(),je=f,Fl.current=p,Dt!==null)throw Error(t(261));return qt=null,an=0,Lt}function y2(){for(;Dt!==null;)gp(Dt)}function m2(){for(;Dt!==null&&!zu();)gp(Dt)}function gp(a){var u=_p(a.alternate,a,Kn);a.memoizedProps=a.pendingProps,u===null?vp(a):Dt=u,ah.current=null}function vp(a){var u=a;do{var f=u.alternate;if(a=u.return,u.flags&32768){if(f=f2(f,u),f!==null){f.flags&=32767,Dt=f;return}if(a!==null)a.flags|=32768,a.subtreeFlags=0,a.deletions=null;else{Lt=6,Dt=null;return}}else if(f=c2(f,u,Kn),f!==null){Dt=f;return}if(u=u.sibling,u!==null){Dt=u;return}Dt=u=a}while(u!==null);Lt===0&&(Lt=5)}function Mo(a,u,f){var p=ke,y=ir.transition;try{ir.transition=null,ke=1,_2(a,u,f,p)}finally{ir.transition=y,ke=p}return null}function _2(a,u,f,p){do ja();while(Bi!==null);if(je&6)throw Error(t(327));f=a.finishedWork;var y=a.finishedLanes;if(f===null)return null;if(a.finishedWork=null,a.finishedLanes=0,f===a.current)throw Error(t(177));a.callbackNode=null,a.callbackPriority=0;var w=f.lanes|f.childLanes;if(it(a,w),a===qt&&(Dt=qt=null,an=0),!(f.subtreeFlags&2064)&&!(f.flags&2064)||Ul||(Ul=!0,xp(Qn,function(){return ja(),null})),w=(f.flags&15990)!==0,f.subtreeFlags&15990||w){w=ir.transition,ir.transition=null;var C=ke;ke=1;var M=je;je|=4,ah.current=null,d2(a,f),ap(f,a),Vm(gf),Ti=!!pf,gf=pf=null,a.current=f,p2(f),Qc(),je=M,ke=C,ir.transition=w}else a.current=f;if(Ul&&(Ul=!1,Bi=a,zl=y),w=a.pendingLanes,w===0&&(Fi=null),Gu(f.stateNode),Ln(a,st()),u!==null)for(p=a.onRecoverableError,f=0;f<u.length;f++)y=u[f],p(y.value,{componentStack:y.stack,digest:y.digest});if(Vl)throw Vl=!1,a=lh,lh=null,a;return zl&1&&a.tag!==0&&ja(),w=a.pendingLanes,w&1?a===ch?ou++:(ou=0,ch=a):ou=0,bi(),null}function ja(){if(Bi!==null){var a=Ii(zl),u=ir.transition,f=ke;try{if(ir.transition=null,ke=16>a?16:a,Bi===null)var p=!1;else{if(a=Bi,Bi=null,zl=0,je&6)throw Error(t(331));var y=je;for(je|=4,he=a.current;he!==null;){var w=he,C=w.child;if(he.flags&16){var M=w.deletions;if(M!==null){for(var B=0;B<M.length;B++){var K=M[B];for(he=K;he!==null;){var ne=he;switch(ne.tag){case 0:case 11:case 15:nu(8,ne,w)}var re=ne.child;if(re!==null)re.return=ne,he=re;else for(;he!==null;){ne=he;var te=ne.sibling,le=ne.return;if(tp(ne),ne===K){he=null;break}if(te!==null){te.return=le,he=te;break}he=le}}}var de=w.alternate;if(de!==null){var pe=de.child;if(pe!==null){de.child=null;do{var St=pe.sibling;pe.sibling=null,pe=St}while(pe!==null)}}he=w}}if(w.subtreeFlags&2064&&C!==null)C.return=w,he=C;else e:for(;he!==null;){if(w=he,w.flags&2048)switch(w.tag){case 0:case 11:case 15:nu(9,w,w.return)}var W=w.sibling;if(W!==null){W.return=w.return,he=W;break e}he=w.return}}var H=a.current;for(he=H;he!==null;){C=he;var X=C.child;if(C.subtreeFlags&2064&&X!==null)X.return=C,he=X;else e:for(C=H;he!==null;){if(M=he,M.flags&2048)try{switch(M.tag){case 0:case 11:case 15:Ll(9,M)}}catch(ve){Et(M,M.return,ve)}if(M===C){he=null;break e}var oe=M.sibling;if(oe!==null){oe.return=M.return,he=oe;break e}he=M.return}}if(je=y,bi(),Hn&&typeof Hn.onPostCommitFiberRoot=="function")try{Hn.onPostCommitFiberRoot(yo,a)}catch{}p=!0}return p}finally{ke=f,ir.transition=u}}return!1}function yp(a,u,f){u=Va(f,u),u=k0(a,u,1),a=ki(a,u,1),u=In(),a!==null&&(Ai(a,1,u),Ln(a,u))}function Et(a,u,f){if(a.tag===3)yp(a,a,f);else for(;u!==null;){if(u.tag===3){yp(u,a,f);break}else if(u.tag===1){var p=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Fi===null||!Fi.has(p))){a=Va(f,a),a=L0(u,a,1),u=ki(u,a,1),a=In(),u!==null&&(Ai(u,1,a),Ln(u,a));break}}u=u.return}}function x2(a,u,f){var p=a.pingCache;p!==null&&p.delete(u),u=In(),a.pingedLanes|=a.suspendedLanes&f,qt===a&&(an&f)===f&&(Lt===4||Lt===3&&(an&130023424)===an&&500>st()-uh?bo(a,0):sh|=f),Ln(a,u)}function mp(a,u){u===0&&(a.mode&1?(u=ha,ha<<=1,!(ha&130023424)&&(ha=4194304)):u=1);var f=In();a=li(a,u),a!==null&&(Ai(a,u,f),Ln(a,f))}function w2(a){var u=a.memoizedState,f=0;u!==null&&(f=u.retryLane),mp(a,f)}function E2(a,u){var f=0;switch(a.tag){case 13:var p=a.stateNode,y=a.memoizedState;y!==null&&(f=y.retryLane);break;case 19:p=a.stateNode;break;default:throw Error(t(314))}p!==null&&p.delete(u),mp(a,f)}var _p;_p=function(a,u,f){if(a!==null)if(a.memoizedProps!==u.pendingProps||Nn.current)Mn=!0;else{if(!(a.lanes&f)&&!(u.flags&128))return Mn=!1,l2(a,u,f);Mn=!!(a.flags&131072)}else Mn=!1,vt&&u.flags&1048576&&Z1(u,_l,u.index);switch(u.lanes=0,u.tag){case 2:var p=u.type;Ml(a,u),a=u.pendingProps;var y=Pa(u,dn.current);Fa(u,f),y=Vf(null,u,p,a,y,f);var w=Uf();return u.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,bn(p)?(w=!0,vl(u)):w=!1,u.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Nf(u),y.updater=Nl,u.stateNode=y,y._reactInternals=u,$f(u,p,a,f),u=Yf(null,u,p,!0,w,f)):(u.tag=0,vt&&w&&Ef(u),Cn(null,u,y,f),u=u.child),u;case 16:p=u.elementType;e:{switch(Ml(a,u),a=u.pendingProps,y=p._init,p=y(p._payload),u.type=p,y=u.tag=C2(p),a=Er(p,a),y){case 0:u=qf(null,u,p,a,f);break e;case 1:u=W0(null,u,p,a,f);break e;case 11:u=U0(null,u,p,a,f);break e;case 14:u=z0(null,u,p,Er(p.type,a),f);break e}throw Error(t(306,p,""))}return u;case 0:return p=u.type,y=u.pendingProps,y=u.elementType===p?y:Er(p,y),qf(a,u,p,y,f);case 1:return p=u.type,y=u.pendingProps,y=u.elementType===p?y:Er(p,y),W0(a,u,p,y,f);case 3:e:{if($0(u),a===null)throw Error(t(387));p=u.pendingProps,w=u.memoizedState,y=w.element,s0(a,u),Il(u,p,null,f);var C=u.memoizedState;if(p=C.element,w.isDehydrated)if(w={element:p,isDehydrated:!1,cache:C.cache,pendingSuspenseBoundaries:C.pendingSuspenseBoundaries,transitions:C.transitions},u.updateQueue.baseState=w,u.memoizedState=w,u.flags&256){y=Va(Error(t(423)),u),u=X0(a,u,p,f,y);break e}else if(p!==y){y=Va(Error(t(424)),u),u=X0(a,u,p,f,y);break e}else for(Xn=Di(u.stateNode.containerInfo.firstChild),$n=u,vt=!0,wr=null,f=o0(u,null,p,f),u.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling;else{if(Ma(),p===y){u=fi(a,u,f);break e}Cn(a,u,p,f)}u=u.child}return u;case 5:return c0(u),a===null&&If(u),p=u.type,y=u.pendingProps,w=a!==null?a.memoizedProps:null,C=y.children,vf(p,y)?C=null:w!==null&&vf(p,w)&&(u.flags|=32),G0(a,u),Cn(a,u,C,f),u.child;case 6:return a===null&&If(u),null;case 13:return K0(a,u,f);case 4:return bf(u,u.stateNode.containerInfo),p=u.pendingProps,a===null?u.child=ka(u,null,p,f):Cn(a,u,p,f),u.child;case 11:return p=u.type,y=u.pendingProps,y=u.elementType===p?y:Er(p,y),U0(a,u,p,y,f);case 7:return Cn(a,u,u.pendingProps,f),u.child;case 8:return Cn(a,u,u.pendingProps.children,f),u.child;case 12:return Cn(a,u,u.pendingProps.children,f),u.child;case 10:e:{if(p=u.type._context,y=u.pendingProps,w=u.memoizedProps,C=y.value,ut(El,p._currentValue),p._currentValue=C,w!==null)if(xr(w.value,C)){if(w.children===y.children&&!Nn.current){u=fi(a,u,f);break e}}else for(w=u.child,w!==null&&(w.return=u);w!==null;){var M=w.dependencies;if(M!==null){C=w.child;for(var B=M.firstContext;B!==null;){if(B.context===p){if(w.tag===1){B=ci(-1,f&-f),B.tag=2;var K=w.updateQueue;if(K!==null){K=K.shared;var ne=K.pending;ne===null?B.next=B:(B.next=ne.next,ne.next=B),K.pending=B}}w.lanes|=f,B=w.alternate,B!==null&&(B.lanes|=f),Df(w.return,f,u),M.lanes|=f;break}B=B.next}}else if(w.tag===10)C=w.type===u.type?null:w.child;else if(w.tag===18){if(C=w.return,C===null)throw Error(t(341));C.lanes|=f,M=C.alternate,M!==null&&(M.lanes|=f),Df(C,f,u),C=w.sibling}else C=w.child;if(C!==null)C.return=w;else for(C=w;C!==null;){if(C===u){C=null;break}if(w=C.sibling,w!==null){w.return=C.return,C=w;break}C=C.return}w=C}Cn(a,u,y.children,f),u=u.child}return u;case 9:return y=u.type,p=u.pendingProps.children,Fa(u,f),y=nr(y),p=p(y),u.flags|=1,Cn(a,u,p,f),u.child;case 14:return p=u.type,y=Er(p,u.pendingProps),y=Er(p.type,y),z0(a,u,p,y,f);case 15:return H0(a,u,u.type,u.pendingProps,f);case 17:return p=u.type,y=u.pendingProps,y=u.elementType===p?y:Er(p,y),Ml(a,u),u.tag=1,bn(p)?(a=!0,vl(u)):a=!1,Fa(u,f),b0(u,p,y),$f(u,p,y,f),Yf(null,u,p,!0,a,f);case 19:return Y0(a,u,f);case 22:return j0(a,u,f)}throw Error(t(156,u.tag))};function xp(a,u){return ca(a,u)}function A2(a,u,f,p){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(a,u,f,p){return new A2(a,u,f,p)}function vh(a){return a=a.prototype,!(!a||!a.isReactComponent)}function C2(a){if(typeof a=="function")return vh(a)?1:0;if(a!=null){if(a=a.$$typeof,a===U)return 11;if(a===ct)return 14}return 2}function zi(a,u){var f=a.alternate;return f===null?(f=or(a.tag,u,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=u,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&14680064,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,u=a.dependencies,f.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f}function Wl(a,u,f,p,y,w){var C=2;if(p=a,typeof a=="function")vh(a)&&(C=1);else if(typeof a=="string")C=5;else e:switch(a){case D:return ko(f.children,y,w,u);case T:C=8,y|=8;break;case N:return a=or(12,f,u,y|2),a.elementType=N,a.lanes=w,a;case b:return a=or(13,f,u,y),a.elementType=b,a.lanes=w,a;case Fe:return a=or(19,f,u,y),a.elementType=Fe,a.lanes=w,a;case We:return $l(f,y,w,u);default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case k:C=10;break e;case V:C=9;break e;case U:C=11;break e;case ct:C=14;break e;case Rt:C=16,p=null;break e}throw Error(t(130,a==null?a:typeof a,""))}return u=or(C,f,u,y),u.elementType=a,u.type=p,u.lanes=w,u}function ko(a,u,f,p){return a=or(7,a,p,u),a.lanes=f,a}function $l(a,u,f,p){return a=or(22,a,p,u),a.elementType=We,a.lanes=f,a.stateNode={isHidden:!1},a}function yh(a,u,f){return a=or(6,a,null,u),a.lanes=f,a}function mh(a,u,f){return u=or(4,a.children!==null?a.children:[],a.key,u),u.lanes=f,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}function I2(a,u,f,p,y){this.tag=u,this.containerInfo=a,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ei(0),this.expirationTimes=Ei(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ei(0),this.identifierPrefix=p,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function _h(a,u,f,p,y,w,C,M,B){return a=new I2(a,u,f,M,B),u===1?(u=1,w===!0&&(u|=8)):u=0,w=or(3,null,null,u),a.current=w,w.stateNode=a,w.memoizedState={element:p,isDehydrated:f,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nf(w),a}function S2(a,u,f){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Q,key:p==null?null:""+p,children:a,containerInfo:u,implementation:f}}function wp(a){if(!a)return Ni;a=a._reactInternals;e:{if(dr(a)!==a||a.tag!==1)throw Error(t(170));var u=a;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(bn(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(a.tag===1){var f=a.type;if(bn(f))return q1(a,f,u)}return u}function Ep(a,u,f,p,y,w,C,M,B){return a=_h(f,p,!0,a,y,w,C,M,B),a.context=wp(null),f=a.current,p=In(),y=Vi(f),w=ci(p,y),w.callback=u??null,ki(f,w,y),a.current.lanes=y,Ai(a,y,p),Ln(a,p),a}function Xl(a,u,f,p){var y=u.current,w=In(),C=Vi(y);return f=wp(f),u.context===null?u.context=f:u.pendingContext=f,u=ci(w,C),u.payload={element:a},p=p===void 0?null:p,p!==null&&(u.callback=p),a=ki(y,u,C),a!==null&&(Ir(a,y,C,w),Cl(a,y,C)),C}function Kl(a){if(a=a.current,!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Ap(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<u?f:u}}function xh(a,u){Ap(a,u),(a=a.alternate)&&Ap(a,u)}function T2(){return null}var Cp=typeof reportError=="function"?reportError:function(a){console.error(a)};function wh(a){this._internalRoot=a}ql.prototype.render=wh.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(t(409));Xl(a,u,null,null)},ql.prototype.unmount=wh.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;No(function(){Xl(null,a,null,null)}),u[oi]=null}};function ql(a){this._internalRoot=a}ql.prototype.unstable_scheduleHydration=function(a){if(a){var u=qu();a={blockedOn:null,target:a,priority:u};for(var f=0;f<Mr.length&&u!==0&&u<Mr[f].priority;f++);Mr.splice(f,0,a),f===0&&Zu(a)}};function Eh(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function Yl(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11&&(a.nodeType!==8||a.nodeValue!==" react-mount-point-unstable "))}function Ip(){}function R2(a,u,f,p,y){if(y){if(typeof p=="function"){var w=p;p=function(){var K=Kl(C);w.call(K)}}var C=Ep(u,p,a,0,null,!1,!1,"",Ip);return a._reactRootContainer=C,a[oi]=C.current,js(a.nodeType===8?a.parentNode:a),No(),C}for(;y=a.lastChild;)a.removeChild(y);if(typeof p=="function"){var M=p;p=function(){var K=Kl(B);M.call(K)}}var B=_h(a,0,!1,null,null,!1,!1,"",Ip);return a._reactRootContainer=B,a[oi]=B.current,js(a.nodeType===8?a.parentNode:a),No(function(){Xl(u,B,f,p)}),B}function Ql(a,u,f,p,y){var w=f._reactRootContainer;if(w){var C=w;if(typeof y=="function"){var M=y;y=function(){var B=Kl(C);M.call(B)}}Xl(u,C,a,y)}else C=R2(f,u,a,y,p);return Kl(C)}Xu=function(a){switch(a.tag){case 3:var u=a.stateNode;if(u.current.memoizedState.isDehydrated){var f=wi(u.pendingLanes);f!==0&&(Ci(u,f|1),Ln(u,st()),!(je&6)&&(Ha=st()+500,bi()))}break;case 13:No(function(){var p=li(a,1);if(p!==null){var y=In();Ir(p,a,1,y)}}),xh(a,1)}},da=function(a){if(a.tag===13){var u=li(a,134217728);if(u!==null){var f=In();Ir(u,a,134217728,f)}xh(a,134217728)}},Ku=function(a){if(a.tag===13){var u=Vi(a),f=li(a,u);if(f!==null){var p=In();Ir(f,a,u,p)}xh(a,u)}},qu=function(){return ke},Yu=function(a,u){var f=ke;try{return ke=a,u()}finally{ke=f}},ia=function(a,u,f){switch(u){case"input":if(ps(a,f),u=f.name,f.type==="radio"&&u!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<f.length;u++){var p=f[u];if(p!==a&&p.form===a.form){var y=pl(p);if(!y)throw Error(t(90));Zo(p),ps(p,y)}}}break;case"textarea":na(a,f);break;case"select":u=f.value,u!=null&&Qr(a,!!f.multiple,u,!1)}},fo=dh,Cs=No;var O2={usingClientEntryPoint:!1,Events:[$s,Oa,pl,Nr,As,dh]},au={findFiberByHostInstance:Co,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},D2={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){return a=Ts(a),a===null?null:a.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||T2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zl.isDisabled&&Zl.supportsFiber)try{yo=Zl.inject(D2),Hn=Zl}catch{}}return Fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O2,Fn.createPortal=function(a,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(u))throw Error(t(200));return S2(a,u,null,f)},Fn.createRoot=function(a,u){if(!Eh(a))throw Error(t(299));var f=!1,p="",y=Cp;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(p=u.identifierPrefix),u.onRecoverableError!==void 0&&(y=u.onRecoverableError)),u=_h(a,1,!1,null,null,f,!1,p,y),a[oi]=u.current,js(a.nodeType===8?a.parentNode:a),new wh(u)},Fn.findDOMNode=function(a){if(a==null)return null;if(a.nodeType===1)return a;var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(t(188)):(a=Object.keys(a).join(","),Error(t(268,a)));return a=Ts(u),a=a===null?null:a.stateNode,a},Fn.flushSync=function(a){return No(a)},Fn.hydrate=function(a,u,f){if(!Yl(u))throw Error(t(200));return Ql(null,a,u,!0,f)},Fn.hydrateRoot=function(a,u,f){if(!Eh(a))throw Error(t(405));var p=f!=null&&f.hydratedSources||null,y=!1,w="",C=Cp;if(f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(w=f.identifierPrefix),f.onRecoverableError!==void 0&&(C=f.onRecoverableError)),u=Ep(u,null,a,1,f??null,y,!1,w,C),a[oi]=u.current,js(a),p)for(a=0;a<p.length;a++)f=p[a],y=f._getVersion,y=y(f._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[f,y]:u.mutableSourceEagerHydrationData.push(f,y);return new ql(u)},Fn.render=function(a,u,f){if(!Yl(u))throw Error(t(200));return Ql(null,a,u,!1,f)},Fn.unmountComponentAtNode=function(a){if(!Yl(a))throw Error(t(40));return a._reactRootContainer?(No(function(){Ql(null,null,a,!1,function(){a._reactRootContainer=null,a[oi]=null})}),!0):!1},Fn.unstable_batchedUpdates=dh,Fn.unstable_renderSubtreeIntoContainer=function(a,u,f,p){if(!Yl(f))throw Error(t(200));if(a==null||a._reactInternals===void 0)throw Error(t(38));return Ql(a,u,f,!1,p)},Fn.version="18.3.1-next-f1338f8080-20240426",Fn}var bp;function B2(){if(bp)return Ih.exports;bp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ih.exports=F2(),Ih.exports}var Mp;function V2(){if(Mp)return Jl;Mp=1;var n=B2();return Jl.createRoot=n.createRoot,Jl.hydrateRoot=n.hydrateRoot,Jl}var U2=V2(),kp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},z2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=n[t++],s=n[t++],l=n[t++],c=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=n[t++],s=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},mv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const o=n[i],s=i+1<n.length,l=s?n[i+1]:0,c=i+2<n.length,h=c?n[i+2]:0,g=o>>2,v=(o&3)<<4|l>>4;let m=(l&15)<<2|h>>6,_=h&63;c||(_=64,s||(m=64)),r.push(t[g],t[v],t[m],t[_])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(yv(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):z2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const o=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;const h=i<n.length?t[n.charAt(i)]:64;++i;const v=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||l==null||h==null||v==null)throw new H2;const m=o<<2|l>>4;if(r.push(m),h!==64){const _=l<<4&240|h>>2;if(r.push(_),v!==64){const A=h<<6&192|v;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class H2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const j2=function(n){const e=yv(n);return mv.encodeByteArray(e,!0)},xc=function(n){return j2(n).replace(/\./g,"")},G2=function(n){try{return mv.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=()=>W2().__FIREBASE_DEFAULTS__,X2=()=>{if(typeof process>"u"||typeof kp>"u")return;const n=kp.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},K2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&G2(n[1]);return e&&JSON.parse(e)},Od=()=>{try{return $2()||X2()||K2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},q2=n=>{var e,t;return(t=(e=Od())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},_v=n=>{const e=q2(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},xv=()=>{var n;return(n=Od())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[xc(JSON.stringify(t)),xc(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Z2(){var n;const e=(n=Od())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J2(){return!Z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function e_(){try{return typeof indexedDB=="object"}catch{return!1}}function t_(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="FirebaseError";class Xo extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=n_,Object.setPrototypeOf(this,Xo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ev.prototype.create)}}class Ev{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?r_(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Xo(i,l,r)}}function r_(n,e){return n.replace(i_,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const i_=/\{\$([^}]+)}/g;function Xh(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const o=n[i],s=e[i];if(Lp(o)&&Lp(s)){if(!Xh(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function Lp(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(n){return n&&n._delegate?n._delegate:n}class Ja{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Y2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(s_(e))try{this.getOrInitializeService({instanceIdentifier:Bo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Bo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bo){return this.instances.has(e)}getOptions(e=Bo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:a_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Bo){return this.component?this.component.multipleInstances?e:Bo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function a_(n){return n===Bo?void 0:n}function s_(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o_(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(He||(He={}));const l_={debug:He.DEBUG,verbose:He.VERBOSE,info:He.INFO,warn:He.WARN,error:He.ERROR,silent:He.SILENT},c_=He.INFO,f_={[He.DEBUG]:"log",[He.VERBOSE]:"log",[He.INFO]:"info",[He.WARN]:"warn",[He.ERROR]:"error"},h_=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=f_[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Av{constructor(e){this.name=e,this._logLevel=c_,this._logHandler=h_,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in He))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?l_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,He.DEBUG,...e),this._logHandler(this,He.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,He.VERBOSE,...e),this._logHandler(this,He.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,He.INFO,...e),this._logHandler(this,He.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,He.WARN,...e),this._logHandler(this,He.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,He.ERROR,...e),this._logHandler(this,He.ERROR,...e)}}const d_=(n,e)=>e.some(t=>n instanceof t);let Fp,Bp;function p_(){return Fp||(Fp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function g_(){return Bp||(Bp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cv=new WeakMap,Kh=new WeakMap,Iv=new WeakMap,Rh=new WeakMap,Dd=new WeakMap;function v_(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",s)},o=()=>{t(qi(n.result)),i()},s=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",s)});return e.then(t=>{t instanceof IDBCursor&&Cv.set(t,n)}).catch(()=>{}),Dd.set(e,n),e}function y_(n){if(Kh.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",s),n.removeEventListener("abort",s)},o=()=>{t(),i()},s=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",s),n.addEventListener("abort",s)});Kh.set(n,e)}let qh={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Kh.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Iv.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return qi(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function m_(n){qh=n(qh)}function __(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Oh(this),e,...t);return Iv.set(r,e.sort?e.sort():[e]),qi(r)}:g_().includes(n)?function(...e){return n.apply(Oh(this),e),qi(Cv.get(this))}:function(...e){return qi(n.apply(Oh(this),e))}}function x_(n){return typeof n=="function"?__(n):(n instanceof IDBTransaction&&y_(n),d_(n,p_())?new Proxy(n,qh):n)}function qi(n){if(n instanceof IDBRequest)return v_(n);if(Rh.has(n))return Rh.get(n);const e=x_(n);return e!==n&&(Rh.set(n,e),Dd.set(e,n)),e}const Oh=n=>Dd.get(n);function w_(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(n,e),l=qi(s);return r&&s.addEventListener("upgradeneeded",c=>{r(qi(s.result),c.oldVersion,c.newVersion,qi(s.transaction),c)}),t&&s.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),i&&c.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const E_=["get","getKey","getAll","getAllKeys","count"],A_=["put","add","delete","clear"],Dh=new Map;function Vp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Dh.get(e))return Dh.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=A_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||E_.includes(t)))return;const o=async function(s,...l){const c=this.transaction(s,i?"readwrite":"readonly");let h=c.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[t](...l),i&&c.done]))[0]};return Dh.set(e,o),o}m_(n=>({...n,get:(e,t,r)=>Vp(e,t)||n.get(e,t,r),has:(e,t)=>!!Vp(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(I_(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function I_(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Yh="@firebase/app",Up="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gi=new Av("@firebase/app"),S_="@firebase/app-compat",T_="@firebase/analytics-compat",R_="@firebase/analytics",O_="@firebase/app-check-compat",D_="@firebase/app-check",P_="@firebase/auth",N_="@firebase/auth-compat",b_="@firebase/database",M_="@firebase/data-connect",k_="@firebase/database-compat",L_="@firebase/functions",F_="@firebase/functions-compat",B_="@firebase/installations",V_="@firebase/installations-compat",U_="@firebase/messaging",z_="@firebase/messaging-compat",H_="@firebase/performance",j_="@firebase/performance-compat",G_="@firebase/remote-config",W_="@firebase/remote-config-compat",$_="@firebase/storage",X_="@firebase/storage-compat",K_="@firebase/firestore",q_="@firebase/vertexai",Y_="@firebase/firestore-compat",Q_="firebase",Z_="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh="[DEFAULT]",J_={[Yh]:"fire-core",[S_]:"fire-core-compat",[R_]:"fire-analytics",[T_]:"fire-analytics-compat",[D_]:"fire-app-check",[O_]:"fire-app-check-compat",[P_]:"fire-auth",[N_]:"fire-auth-compat",[b_]:"fire-rtdb",[M_]:"fire-data-connect",[k_]:"fire-rtdb-compat",[L_]:"fire-fn",[F_]:"fire-fn-compat",[B_]:"fire-iid",[V_]:"fire-iid-compat",[U_]:"fire-fcm",[z_]:"fire-fcm-compat",[H_]:"fire-perf",[j_]:"fire-perf-compat",[G_]:"fire-rc",[W_]:"fire-rc-compat",[$_]:"fire-gcs",[X_]:"fire-gcs-compat",[K_]:"fire-fst",[Y_]:"fire-fst-compat",[q_]:"fire-vertex","fire-js":"fire-js",[Q_]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new Map,ex=new Map,Zh=new Map;function zp(n,e){try{n.container.addComponent(e)}catch(t){gi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Cu(n){const e=n.name;if(Zh.has(e))return gi.debug(`There were multiple attempts to register component ${e}.`),!1;Zh.set(e,n);for(const t of wc.values())zp(t,n);for(const t of ex.values())zp(t,n);return!0}function Sv(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yi=new Ev("app","Firebase",tx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nx{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ja("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tv=Z_;function Rv(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Qh,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Yi.create("bad-app-name",{appName:String(i)});if(t||(t=xv()),!t)throw Yi.create("no-options");const o=wc.get(i);if(o){if(Xh(t,o.options)&&Xh(r,o.config))return o;throw Yi.create("duplicate-app",{appName:i})}const s=new u_(i);for(const c of Zh.values())s.addComponent(c);const l=new nx(t,r,s);return wc.set(i,l),l}function Ov(n=Qh){const e=wc.get(n);if(!e&&n===Qh&&xv())return Rv();if(!e)throw Yi.create("no-app",{appName:n});return e}function Qi(n,e,t){var r;let i=(r=J_[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),gi.warn(l.join(" "));return}Cu(new Ja(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="firebase-heartbeat-database",ix=1,Iu="firebase-heartbeat-store";let Ph=null;function Dv(){return Ph||(Ph=w_(rx,ix,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Iu)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yi.create("idb-open",{originalErrorMessage:n.message})})),Ph}async function ox(n){try{const t=(await Dv()).transaction(Iu),r=await t.objectStore(Iu).get(Pv(n));return await t.done,r}catch(e){if(e instanceof Xo)gi.warn(e.message);else{const t=Yi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});gi.warn(t.message)}}}async function Hp(n,e){try{const r=(await Dv()).transaction(Iu,"readwrite");await r.objectStore(Iu).put(e,Pv(n)),await r.done}catch(t){if(t instanceof Xo)gi.warn(t.message);else{const r=Yi.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});gi.warn(r.message)}}}function Pv(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=1024,sx=30*24*60*60*1e3;class ux{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new cx(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=jp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const l=new Date(s.date).valueOf();return Date.now()-l<=sx}),this._storage.overwrite(this._heartbeatsCache))}catch(r){gi.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=jp(),{heartbeatsToSend:r,unsentEntries:i}=lx(this._heartbeatsCache.heartbeats),o=xc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return gi.warn(t),""}}}function jp(){return new Date().toISOString().substring(0,10)}function lx(n,e=ax){const t=[];let r=n.slice();for(const i of n){const o=t.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),Gp(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Gp(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class cx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return e_()?t_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await ox(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Gp(n){return xc(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(n){Cu(new Ja("platform-logger",e=>new C_(e),"PRIVATE")),Cu(new Ja("heartbeat",e=>new ux(e),"PRIVATE")),Qi(Yh,Up,n),Qi(Yh,Up,"esm2017"),Qi("fire-js","")}fx("");var hx="firebase",dx="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qi(hx,dx,"app");var Wp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ho,Nv;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,T){function N(){}N.prototype=T.prototype,D.D=T.prototype,D.prototype=new N,D.prototype.constructor=D,D.C=function(k,V,U){for(var b=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)b[Fe-2]=arguments[Fe];return T.prototype[V].apply(k,b)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(D,T,N){N||(N=0);var k=Array(16);if(typeof T=="string")for(var V=0;16>V;++V)k[V]=T.charCodeAt(N++)|T.charCodeAt(N++)<<8|T.charCodeAt(N++)<<16|T.charCodeAt(N++)<<24;else for(V=0;16>V;++V)k[V]=T[N++]|T[N++]<<8|T[N++]<<16|T[N++]<<24;T=D.g[0],N=D.g[1],V=D.g[2];var U=D.g[3],b=T+(U^N&(V^U))+k[0]+3614090360&4294967295;T=N+(b<<7&4294967295|b>>>25),b=U+(V^T&(N^V))+k[1]+3905402710&4294967295,U=T+(b<<12&4294967295|b>>>20),b=V+(N^U&(T^N))+k[2]+606105819&4294967295,V=U+(b<<17&4294967295|b>>>15),b=N+(T^V&(U^T))+k[3]+3250441966&4294967295,N=V+(b<<22&4294967295|b>>>10),b=T+(U^N&(V^U))+k[4]+4118548399&4294967295,T=N+(b<<7&4294967295|b>>>25),b=U+(V^T&(N^V))+k[5]+1200080426&4294967295,U=T+(b<<12&4294967295|b>>>20),b=V+(N^U&(T^N))+k[6]+2821735955&4294967295,V=U+(b<<17&4294967295|b>>>15),b=N+(T^V&(U^T))+k[7]+4249261313&4294967295,N=V+(b<<22&4294967295|b>>>10),b=T+(U^N&(V^U))+k[8]+1770035416&4294967295,T=N+(b<<7&4294967295|b>>>25),b=U+(V^T&(N^V))+k[9]+2336552879&4294967295,U=T+(b<<12&4294967295|b>>>20),b=V+(N^U&(T^N))+k[10]+4294925233&4294967295,V=U+(b<<17&4294967295|b>>>15),b=N+(T^V&(U^T))+k[11]+2304563134&4294967295,N=V+(b<<22&4294967295|b>>>10),b=T+(U^N&(V^U))+k[12]+1804603682&4294967295,T=N+(b<<7&4294967295|b>>>25),b=U+(V^T&(N^V))+k[13]+4254626195&4294967295,U=T+(b<<12&4294967295|b>>>20),b=V+(N^U&(T^N))+k[14]+2792965006&4294967295,V=U+(b<<17&4294967295|b>>>15),b=N+(T^V&(U^T))+k[15]+1236535329&4294967295,N=V+(b<<22&4294967295|b>>>10),b=T+(V^U&(N^V))+k[1]+4129170786&4294967295,T=N+(b<<5&4294967295|b>>>27),b=U+(N^V&(T^N))+k[6]+3225465664&4294967295,U=T+(b<<9&4294967295|b>>>23),b=V+(T^N&(U^T))+k[11]+643717713&4294967295,V=U+(b<<14&4294967295|b>>>18),b=N+(U^T&(V^U))+k[0]+3921069994&4294967295,N=V+(b<<20&4294967295|b>>>12),b=T+(V^U&(N^V))+k[5]+3593408605&4294967295,T=N+(b<<5&4294967295|b>>>27),b=U+(N^V&(T^N))+k[10]+38016083&4294967295,U=T+(b<<9&4294967295|b>>>23),b=V+(T^N&(U^T))+k[15]+3634488961&4294967295,V=U+(b<<14&4294967295|b>>>18),b=N+(U^T&(V^U))+k[4]+3889429448&4294967295,N=V+(b<<20&4294967295|b>>>12),b=T+(V^U&(N^V))+k[9]+568446438&4294967295,T=N+(b<<5&4294967295|b>>>27),b=U+(N^V&(T^N))+k[14]+3275163606&4294967295,U=T+(b<<9&4294967295|b>>>23),b=V+(T^N&(U^T))+k[3]+4107603335&4294967295,V=U+(b<<14&4294967295|b>>>18),b=N+(U^T&(V^U))+k[8]+1163531501&4294967295,N=V+(b<<20&4294967295|b>>>12),b=T+(V^U&(N^V))+k[13]+2850285829&4294967295,T=N+(b<<5&4294967295|b>>>27),b=U+(N^V&(T^N))+k[2]+4243563512&4294967295,U=T+(b<<9&4294967295|b>>>23),b=V+(T^N&(U^T))+k[7]+1735328473&4294967295,V=U+(b<<14&4294967295|b>>>18),b=N+(U^T&(V^U))+k[12]+2368359562&4294967295,N=V+(b<<20&4294967295|b>>>12),b=T+(N^V^U)+k[5]+4294588738&4294967295,T=N+(b<<4&4294967295|b>>>28),b=U+(T^N^V)+k[8]+2272392833&4294967295,U=T+(b<<11&4294967295|b>>>21),b=V+(U^T^N)+k[11]+1839030562&4294967295,V=U+(b<<16&4294967295|b>>>16),b=N+(V^U^T)+k[14]+4259657740&4294967295,N=V+(b<<23&4294967295|b>>>9),b=T+(N^V^U)+k[1]+2763975236&4294967295,T=N+(b<<4&4294967295|b>>>28),b=U+(T^N^V)+k[4]+1272893353&4294967295,U=T+(b<<11&4294967295|b>>>21),b=V+(U^T^N)+k[7]+4139469664&4294967295,V=U+(b<<16&4294967295|b>>>16),b=N+(V^U^T)+k[10]+3200236656&4294967295,N=V+(b<<23&4294967295|b>>>9),b=T+(N^V^U)+k[13]+681279174&4294967295,T=N+(b<<4&4294967295|b>>>28),b=U+(T^N^V)+k[0]+3936430074&4294967295,U=T+(b<<11&4294967295|b>>>21),b=V+(U^T^N)+k[3]+3572445317&4294967295,V=U+(b<<16&4294967295|b>>>16),b=N+(V^U^T)+k[6]+76029189&4294967295,N=V+(b<<23&4294967295|b>>>9),b=T+(N^V^U)+k[9]+3654602809&4294967295,T=N+(b<<4&4294967295|b>>>28),b=U+(T^N^V)+k[12]+3873151461&4294967295,U=T+(b<<11&4294967295|b>>>21),b=V+(U^T^N)+k[15]+530742520&4294967295,V=U+(b<<16&4294967295|b>>>16),b=N+(V^U^T)+k[2]+3299628645&4294967295,N=V+(b<<23&4294967295|b>>>9),b=T+(V^(N|~U))+k[0]+4096336452&4294967295,T=N+(b<<6&4294967295|b>>>26),b=U+(N^(T|~V))+k[7]+1126891415&4294967295,U=T+(b<<10&4294967295|b>>>22),b=V+(T^(U|~N))+k[14]+2878612391&4294967295,V=U+(b<<15&4294967295|b>>>17),b=N+(U^(V|~T))+k[5]+4237533241&4294967295,N=V+(b<<21&4294967295|b>>>11),b=T+(V^(N|~U))+k[12]+1700485571&4294967295,T=N+(b<<6&4294967295|b>>>26),b=U+(N^(T|~V))+k[3]+2399980690&4294967295,U=T+(b<<10&4294967295|b>>>22),b=V+(T^(U|~N))+k[10]+4293915773&4294967295,V=U+(b<<15&4294967295|b>>>17),b=N+(U^(V|~T))+k[1]+2240044497&4294967295,N=V+(b<<21&4294967295|b>>>11),b=T+(V^(N|~U))+k[8]+1873313359&4294967295,T=N+(b<<6&4294967295|b>>>26),b=U+(N^(T|~V))+k[15]+4264355552&4294967295,U=T+(b<<10&4294967295|b>>>22),b=V+(T^(U|~N))+k[6]+2734768916&4294967295,V=U+(b<<15&4294967295|b>>>17),b=N+(U^(V|~T))+k[13]+1309151649&4294967295,N=V+(b<<21&4294967295|b>>>11),b=T+(V^(N|~U))+k[4]+4149444226&4294967295,T=N+(b<<6&4294967295|b>>>26),b=U+(N^(T|~V))+k[11]+3174756917&4294967295,U=T+(b<<10&4294967295|b>>>22),b=V+(T^(U|~N))+k[2]+718787259&4294967295,V=U+(b<<15&4294967295|b>>>17),b=N+(U^(V|~T))+k[9]+3951481745&4294967295,D.g[0]=D.g[0]+T&4294967295,D.g[1]=D.g[1]+(V+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+U&4294967295}r.prototype.u=function(D,T){T===void 0&&(T=D.length);for(var N=T-this.blockSize,k=this.B,V=this.h,U=0;U<T;){if(V==0)for(;U<=N;)i(this,D,U),U+=this.blockSize;if(typeof D=="string"){for(;U<T;)if(k[V++]=D.charCodeAt(U++),V==this.blockSize){i(this,k),V=0;break}}else for(;U<T;)if(k[V++]=D[U++],V==this.blockSize){i(this,k),V=0;break}}this.h=V,this.o+=T},r.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var T=1;T<D.length-8;++T)D[T]=0;var N=8*this.o;for(T=D.length-8;T<D.length;++T)D[T]=N&255,N/=256;for(this.u(D),D=Array(16),T=N=0;4>T;++T)for(var k=0;32>k;k+=8)D[N++]=this.g[T]>>>k&255;return D};function o(D,T){var N=l;return Object.prototype.hasOwnProperty.call(N,D)?N[D]:N[D]=T(D)}function s(D,T){this.h=T;for(var N=[],k=!0,V=D.length-1;0<=V;V--){var U=D[V]|0;k&&U==T||(N[V]=U,k=!1)}this.g=N}var l={};function c(D){return-128<=D&&128>D?o(D,function(T){return new s([T|0],0>T?-1:0)}):new s([D|0],0>D?-1:0)}function h(D){if(isNaN(D)||!isFinite(D))return v;if(0>D)return R(h(-D));for(var T=[],N=1,k=0;D>=N;k++)T[k]=D/N|0,N*=4294967296;return new s(T,0)}function g(D,T){if(D.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(D.charAt(0)=="-")return R(g(D.substring(1),T));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var N=h(Math.pow(T,8)),k=v,V=0;V<D.length;V+=8){var U=Math.min(8,D.length-V),b=parseInt(D.substring(V,V+U),T);8>U?(U=h(Math.pow(T,U)),k=k.j(U).add(h(b))):(k=k.j(N),k=k.add(h(b)))}return k}var v=c(0),m=c(1),_=c(16777216);n=s.prototype,n.m=function(){if(I(this))return-R(this).m();for(var D=0,T=1,N=0;N<this.g.length;N++){var k=this.i(N);D+=(0<=k?k:4294967296+k)*T,T*=4294967296}return D},n.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(A(this))return"0";if(I(this))return"-"+R(this).toString(D);for(var T=h(Math.pow(D,6)),N=this,k="";;){var V=z(N,T).g;N=L(N,V.j(T));var U=((0<N.g.length?N.g[0]:N.h)>>>0).toString(D);if(N=V,A(N))return U+k;for(;6>U.length;)U="0"+U;k=U+k}},n.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function A(D){if(D.h!=0)return!1;for(var T=0;T<D.g.length;T++)if(D.g[T]!=0)return!1;return!0}function I(D){return D.h==-1}n.l=function(D){return D=L(this,D),I(D)?-1:A(D)?0:1};function R(D){for(var T=D.g.length,N=[],k=0;k<T;k++)N[k]=~D.g[k];return new s(N,~D.h).add(m)}n.abs=function(){return I(this)?R(this):this},n.add=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],k=0,V=0;V<=T;V++){var U=k+(this.i(V)&65535)+(D.i(V)&65535),b=(U>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);k=b>>>16,U&=65535,b&=65535,N[V]=b<<16|U}return new s(N,N[N.length-1]&-2147483648?-1:0)};function L(D,T){return D.add(R(T))}n.j=function(D){if(A(this)||A(D))return v;if(I(this))return I(D)?R(this).j(R(D)):R(R(this).j(D));if(I(D))return R(this.j(R(D)));if(0>this.l(_)&&0>D.l(_))return h(this.m()*D.m());for(var T=this.g.length+D.g.length,N=[],k=0;k<2*T;k++)N[k]=0;for(k=0;k<this.g.length;k++)for(var V=0;V<D.g.length;V++){var U=this.i(k)>>>16,b=this.i(k)&65535,Fe=D.i(V)>>>16,ct=D.i(V)&65535;N[2*k+2*V]+=b*ct,P(N,2*k+2*V),N[2*k+2*V+1]+=U*ct,P(N,2*k+2*V+1),N[2*k+2*V+1]+=b*Fe,P(N,2*k+2*V+1),N[2*k+2*V+2]+=U*Fe,P(N,2*k+2*V+2)}for(k=0;k<T;k++)N[k]=N[2*k+1]<<16|N[2*k];for(k=T;k<2*T;k++)N[k]=0;return new s(N,0)};function P(D,T){for(;(D[T]&65535)!=D[T];)D[T+1]+=D[T]>>>16,D[T]&=65535,T++}function F(D,T){this.g=D,this.h=T}function z(D,T){if(A(T))throw Error("division by zero");if(A(D))return new F(v,v);if(I(D))return T=z(R(D),T),new F(R(T.g),R(T.h));if(I(T))return T=z(D,R(T)),new F(R(T.g),T.h);if(30<D.g.length){if(I(D)||I(T))throw Error("slowDivide_ only works with positive integers.");for(var N=m,k=T;0>=k.l(D);)N=q(N),k=q(k);var V=Q(N,1),U=Q(k,1);for(k=Q(k,2),N=Q(N,2);!A(k);){var b=U.add(k);0>=b.l(D)&&(V=V.add(N),U=b),k=Q(k,1),N=Q(N,1)}return T=L(D,V.j(T)),new F(V,T)}for(V=v;0<=D.l(T);){for(N=Math.max(1,Math.floor(D.m()/T.m())),k=Math.ceil(Math.log(N)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),U=h(N),b=U.j(T);I(b)||0<b.l(D);)N-=k,U=h(N),b=U.j(T);A(U)&&(U=m),V=V.add(U),D=L(D,b)}return new F(V,D)}n.A=function(D){return z(this,D).h},n.and=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],k=0;k<T;k++)N[k]=this.i(k)&D.i(k);return new s(N,this.h&D.h)},n.or=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],k=0;k<T;k++)N[k]=this.i(k)|D.i(k);return new s(N,this.h|D.h)},n.xor=function(D){for(var T=Math.max(this.g.length,D.g.length),N=[],k=0;k<T;k++)N[k]=this.i(k)^D.i(k);return new s(N,this.h^D.h)};function q(D){for(var T=D.g.length+1,N=[],k=0;k<T;k++)N[k]=D.i(k)<<1|D.i(k-1)>>>31;return new s(N,D.h)}function Q(D,T){var N=T>>5;T%=32;for(var k=D.g.length-N,V=[],U=0;U<k;U++)V[U]=0<T?D.i(U+N)>>>T|D.i(U+N+1)<<32-T:D.i(U+N);return new s(V,D.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Nv=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=g,Ho=s}).apply(typeof Wp<"u"?Wp:typeof self<"u"?self:typeof window<"u"?window:{});var ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bv,hu,Mv,hc,Jh,kv,Lv,Fv;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,x,E){return d==Array.prototype||d==Object.prototype||(d[x]=E.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof ec=="object"&&ec];for(var x=0;x<d.length;++x){var E=d[x];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function i(d,x){if(x)e:{var E=r;d=d.split(".");for(var S=0;S<d.length-1;S++){var G=d[S];if(!(G in E))break e;E=E[G]}d=d[d.length-1],S=E[d],x=x(S),x!=S&&x!=null&&e(E,d,{configurable:!0,writable:!0,value:x})}}function o(d,x){d instanceof String&&(d+="");var E=0,S=!1,G={next:function(){if(!S&&E<d.length){var Y=E++;return{value:x(Y,d[Y]),done:!1}}return S=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}i("Array.prototype.values",function(d){return d||function(){return o(this,function(x,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},l=this||self;function c(d){var x=typeof d;return x=x!="object"?x:d?Array.isArray(d)?"array":x:"null",x=="array"||x=="object"&&typeof d.length=="number"}function h(d){var x=typeof d;return x=="object"&&d!=null||x=="function"}function g(d,x,E){return d.call.apply(d.bind,arguments)}function v(d,x,E){if(!d)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,S),d.apply(x,G)}}return function(){return d.apply(x,arguments)}}function m(d,x,E){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?g:v,m.apply(null,arguments)}function _(d,x){var E=Array.prototype.slice.call(arguments,1);return function(){var S=E.slice();return S.push.apply(S,arguments),d.apply(this,S)}}function A(d,x){function E(){}E.prototype=x.prototype,d.aa=x.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(S,G,Y){for(var ae=Array(arguments.length-2),et=2;et<arguments.length;et++)ae[et-2]=arguments[et];return x.prototype[G].apply(S,ae)}}function I(d){const x=d.length;if(0<x){const E=Array(x);for(let S=0;S<x;S++)E[S]=d[S];return E}return[]}function R(d,x){for(let E=1;E<arguments.length;E++){const S=arguments[E];if(c(S)){const G=d.length||0,Y=S.length||0;d.length=G+Y;for(let ae=0;ae<Y;ae++)d[G+ae]=S[ae]}else d.push(S)}}class L{constructor(x,E){this.i=x,this.j=E,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function P(d){return/^[\s\xa0]*$/.test(d)}function F(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function z(d){return z[" "](d),d}z[" "]=function(){};var q=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function Q(d,x,E){for(const S in d)x.call(E,d[S],S,d)}function D(d,x){for(const E in d)x.call(void 0,d[E],E,d)}function T(d){const x={};for(const E in d)x[E]=d[E];return x}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(d,x){let E,S;for(let G=1;G<arguments.length;G++){S=arguments[G];for(E in S)d[E]=S[E];for(let Y=0;Y<N.length;Y++)E=N[Y],Object.prototype.hasOwnProperty.call(S,E)&&(d[E]=S[E])}}function V(d){var x=1;d=d.split(":");const E=[];for(;0<x&&d.length;)E.push(d.shift()),x--;return d.length&&E.push(d.join(":")),E}function U(d){l.setTimeout(()=>{throw d},0)}function b(){var d=me;let x=null;return d.g&&(x=d.g,d.g=d.g.next,d.g||(d.h=null),x.next=null),x}class Fe{constructor(){this.h=this.g=null}add(x,E){const S=ct.get();S.set(x,E),this.h?this.h.next=S:this.g=S,this.h=S}}var ct=new L(()=>new Rt,d=>d.reset());class Rt{constructor(){this.next=this.g=this.h=null}set(x,E){this.h=x,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let We,se=!1,me=new Fe,ce=()=>{const d=l.Promise.resolve(void 0);We=()=>{d.then(j)}};var j=()=>{for(var d;d=b();){try{d.h.call(d.g)}catch(E){U(E)}var x=ct;x.j(d),100>x.h&&(x.h++,d.next=x.g,x.g=d)}se=!1};function ee(){this.s=this.s,this.C=this.C}ee.prototype.s=!1,ee.prototype.ma=function(){this.s||(this.s=!0,this.N())},ee.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(d,x){this.type=d,this.g=this.target=x,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var Oe=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,x=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,x),l.removeEventListener("test",E,x)}catch{}return d}();function Pe(d,x){if(ye.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,S=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=x,x=d.relatedTarget){if(q){e:{try{z(x.nodeName);var G=!0;break e}catch{}G=!1}G||(x=null)}}else E=="mouseover"?x=d.fromElement:E=="mouseout"&&(x=d.toElement);this.relatedTarget=x,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Be[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Pe.aa.h.call(this)}}A(Pe,ye);var Be={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),qe=0;function at(d,x,E,S,G){this.listener=d,this.proxy=null,this.src=x,this.type=E,this.capture=!!S,this.ha=G,this.key=++qe,this.da=this.fa=!1}function $t(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function qr(d){this.src=d,this.g={},this.h=0}qr.prototype.add=function(d,x,E,S,G){var Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);var ae=mi(d,x,S,G);return-1<ae?(x=d[ae],E||(x.fa=!1)):(x=new at(x,this.src,Y,!!S,G),x.fa=E,d.push(x)),x};function Zo(d,x){var E=x.type;if(E in d.g){var S=d.g[E],G=Array.prototype.indexOf.call(S,x,void 0),Y;(Y=0<=G)&&Array.prototype.splice.call(S,G,1),Y&&($t(x),d.g[E].length==0&&(delete d.g[E],d.h--))}}function mi(d,x,E,S){for(var G=0;G<d.length;++G){var Y=d[G];if(!Y.da&&Y.listener==x&&Y.capture==!!E&&Y.ha==S)return G}return-1}var so="closure_lm_"+(1e6*Math.random()|0),Jo={};function ds(d,x,E,S,G){if(Array.isArray(x)){for(var Y=0;Y<x.length;Y++)ds(d,x[Y],E,S,G);return null}return E=vs(E),d&&d[Ke]?d.K(x,E,h(S)?!!S.capture:!!S,G):ps(d,x,E,!1,S,G)}function ps(d,x,E,S,G,Y){if(!x)throw Error("Invalid event type");var ae=h(G)?!!G.capture:!!G,et=ta(d);if(et||(d[so]=et=new qr(d)),E=et.add(x,E,S,ae,Y),E.proxy)return E;if(S=Bu(),E.proxy=S,S.src=d,S.listener=E,d.addEventListener)Oe||(G=ae),G===void 0&&(G=!1),d.addEventListener(x.toString(),S,G);else if(d.attachEvent)d.attachEvent(Qr(x.toString()),S);else if(d.addListener&&d.removeListener)d.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Bu(){function d(E){return x.call(d.src,d.listener,E)}const x=gs;return d}function ea(d,x,E,S,G){if(Array.isArray(x))for(var Y=0;Y<x.length;Y++)ea(d,x[Y],E,S,G);else S=h(S)?!!S.capture:!!S,E=vs(E),d&&d[Ke]?(d=d.i,x=String(x).toString(),x in d.g&&(Y=d.g[x],E=mi(Y,E,S,G),-1<E&&($t(Y[E]),Array.prototype.splice.call(Y,E,1),Y.length==0&&(delete d.g[x],d.h--)))):d&&(d=ta(d))&&(x=d.g[x.toString()],d=-1,x&&(d=mi(x,E,S,G)),(E=-1<d?x[d]:null)&&Yr(E))}function Yr(d){if(typeof d!="number"&&d&&!d.da){var x=d.src;if(x&&x[Ke])Zo(x.i,d);else{var E=d.type,S=d.proxy;x.removeEventListener?x.removeEventListener(E,S,d.capture):x.detachEvent?x.detachEvent(Qr(E),S):x.addListener&&x.removeListener&&x.removeListener(S),(E=ta(x))?(Zo(E,d),E.h==0&&(E.src=null,x[so]=null)):$t(d)}}}function Qr(d){return d in Jo?Jo[d]:Jo[d]="on"+d}function gs(d,x){if(d.da)d=!0;else{x=new Pe(x,this);var E=d.listener,S=d.ha||d.src;d.fa&&Yr(d),d=E.call(S,x)}return d}function ta(d){return d=d[so],d instanceof qr?d:null}var na="__closure_events_fn_"+(1e9*Math.random()>>>0);function vs(d){return typeof d=="function"?d:(d[na]||(d[na]=function(x){return d.handleEvent(x)}),d[na])}function Nt(){ee.call(this),this.i=new qr(this),this.M=this,this.F=null}A(Nt,ee),Nt.prototype[Ke]=!0,Nt.prototype.removeEventListener=function(d,x,E,S){ea(this,d,x,E,S)};function bt(d,x){var E,S=d.F;if(S)for(E=[];S;S=S.F)E.push(S);if(d=d.M,S=x.type||x,typeof x=="string")x=new ye(x,d);else if(x instanceof ye)x.target=x.target||d;else{var G=x;x=new ye(S,d),k(x,G)}if(G=!0,E)for(var Y=E.length-1;0<=Y;Y--){var ae=x.g=E[Y];G=Zr(ae,S,!0,x)&&G}if(ae=x.g=d,G=Zr(ae,S,!0,x)&&G,G=Zr(ae,S,!1,x)&&G,E)for(Y=0;Y<E.length;Y++)ae=x.g=E[Y],G=Zr(ae,S,!1,x)&&G}Nt.prototype.N=function(){if(Nt.aa.N.call(this),this.i){var d=this.i,x;for(x in d.g){for(var E=d.g[x],S=0;S<E.length;S++)$t(E[S]);delete d.g[x],d.h--}}this.F=null},Nt.prototype.K=function(d,x,E,S){return this.i.add(String(d),x,!1,E,S)},Nt.prototype.L=function(d,x,E,S){return this.i.add(String(d),x,!0,E,S)};function Zr(d,x,E,S){if(x=d.i.g[String(x)],!x)return!0;x=x.concat();for(var G=!0,Y=0;Y<x.length;++Y){var ae=x[Y];if(ae&&!ae.da&&ae.capture==E){var et=ae.listener,Mt=ae.ha||ae.src;ae.fa&&Zo(d.i,ae),G=et.call(Mt,S)!==!1&&G}}return G&&!S.defaultPrevented}function ys(d,x,E){if(typeof d=="function")E&&(d=m(d,E));else if(d&&typeof d.handleEvent=="function")d=m(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:l.setTimeout(d,x||0)}function _i(d){d.g=ys(()=>{d.g=null,d.i&&(d.i=!1,_i(d))},d.l);const x=d.h;d.h=null,d.m.apply(null,x)}class uo extends ee{constructor(x,E){super(),this.m=x,this.l=E,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:_i(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lo(d){ee.call(this),this.h=d,this.g={}}A(lo,ee);var ms=[];function _s(d){Q(d.g,function(x,E){this.g.hasOwnProperty(E)&&Yr(x)},d),d.g={}}lo.prototype.N=function(){lo.aa.N.call(this),_s(this)},lo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xs=l.JSON.stringify,ws=l.JSON.parse,Es=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function co(){}co.prototype.h=null;function ra(d){return d.h||(d.h=d.i())}function ia(){}var Yn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pr(){ye.call(this,"d")}A(Pr,ye);function oa(){ye.call(this,"c")}A(oa,ye);var Nr={},As=null;function fo(){return As=As||new Nt}Nr.La="serverreachability";function Cs(d){ye.call(this,Nr.La,d)}A(Cs,ye);function Jr(d){const x=fo();bt(x,new Cs(x))}Nr.STAT_EVENT="statevent";function Is(d,x){ye.call(this,Nr.STAT_EVENT,d),this.stat=x}A(Is,ye);function It(d){const x=fo();bt(x,new Is(x,d))}Nr.Ma="timingevent";function aa(d,x){ye.call(this,Nr.Ma,d),this.size=x}A(aa,ye);function fr(d,x){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},x)}function ho(){this.g=!0}ho.prototype.xa=function(){this.g=!1};function po(d,x,E,S,G,Y){d.info(function(){if(d.g)if(Y)for(var ae="",et=Y.split("&"),Mt=0;Mt<et.length;Mt++){var Ve=et[Mt].split("=");if(1<Ve.length){var Xt=Ve[0];Ve=Ve[1];var Ot=Xt.split("_");ae=2<=Ot.length&&Ot[1]=="type"?ae+(Xt+"="+Ve+"&"):ae+(Xt+"=redacted&")}}else ae=null;else ae=Y;return"XMLHTTP REQ ("+S+") [attempt "+G+"]: "+x+`
`+E+`
`+ae})}function sa(d,x,E,S,G,Y,ae){d.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+G+"]: "+x+`
`+E+`
`+Y+" "+ae})}function hr(d,x,E,S){d.info(function(){return"XMLHTTP TEXT ("+x+"): "+Yc(d,E)+(S?" "+S:"")})}function Ss(d,x){d.info(function(){return"TIMEOUT: "+x})}ho.prototype.info=function(){};function Yc(d,x){if(!d.g)return x;if(!x)return null;try{var E=JSON.parse(x);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var S=E[d];if(!(2>S.length)){var G=S[1];if(Array.isArray(G)&&!(1>G.length)){var Y=G[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var ae=1;ae<G.length;ae++)G[ae]=""}}}}return xs(E)}catch{return x}}var ua={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vu={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},dr;function go(){}A(go,co),go.prototype.g=function(){return new XMLHttpRequest},go.prototype.i=function(){return{}},dr=new go;function pr(d,x,E,S){this.j=d,this.i=x,this.l=E,this.R=S||1,this.U=new lo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uu}function Uu(){this.i=null,this.g="",this.h=!1}var Ts={},la={};function ca(d,x,E){d.L=1,d.v=Ci(jn(x)),d.m=E,d.P=!0,Rs(d,null)}function Rs(d,x){d.F=Date.now(),st(d),d.A=jn(d.v);var E=d.A,S=d.R;Array.isArray(S)||(S=[String(S)]),Si(E.i,"t",S),d.C=0,E=d.j.J,d.h=new Uu,d.g=il(d.j,E?x:null,!d.m),0<d.O&&(d.M=new uo(m(d.Y,d,d.g),d.O)),x=d.U,E=d.g,S=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(ms[0]=G.toString()),G=ms);for(var Y=0;Y<G.length;Y++){var ae=ds(E,G[Y],S||x.handleEvent,!1,x.h||x);if(!ae)break;x.g[ae.key]=ae}x=d.H?T(d.H):{},d.m?(d.u||(d.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,x)):(d.u="GET",d.g.ea(d.A,d.u,null,x)),Jr(),po(d.i,d.u,d.A,d.l,d.R,d.m)}pr.prototype.ca=function(d){d=d.target;const x=this.M;x&&Pn(d)==3?x.j():this.Y(d)},pr.prototype.Y=function(d){try{if(d==this.g)e:{const Ot=Pn(this.g);var x=this.g.Ba();const Jn=this.g.Z();if(!(3>Ot)&&(Ot!=3||this.g&&(this.h.h||this.g.oa()||Ms(this.g)))){this.J||Ot!=4||x==7||(x==8||0>=Jn?Jr(3):Jr(2)),vo(this);var E=this.g.Z();this.X=E;t:if(zu(this)){var S=Ms(this.g);d="";var G=S.length,Y=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qn(this),xi(this);var ae="";break t}this.h.i=new l.TextDecoder}for(x=0;x<G;x++)this.h.h=!0,d+=this.h.i.decode(S[x],{stream:!(Y&&x==G-1)});S.length=0,this.h.g+=d,this.C=0,ae=this.h.g}else ae=this.g.oa();if(this.o=E==200,sa(this.i,this.u,this.A,this.l,this.R,Ot,E),this.o){if(this.T&&!this.K){t:{if(this.g){var et,Mt=this.g;if((et=Mt.g?Mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(et)){var Ve=et;break t}}Ve=null}if(E=Ve)hr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Os(this,E);else{this.o=!1,this.s=3,It(12),Qn(this),xi(this);break e}}if(this.P){E=!0;let Wn;for(;!this.J&&this.C<ae.length;)if(Wn=Qc(this,ae),Wn==la){Ot==4&&(this.s=4,It(14),E=!1),hr(this.i,this.l,null,"[Incomplete Response]");break}else if(Wn==Ts){this.s=4,It(15),hr(this.i,this.l,ae,"[Invalid Chunk]"),E=!1;break}else hr(this.i,this.l,Wn,null),Os(this,Wn);if(zu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ot!=4||ae.length!=0||this.h.h||(this.s=1,It(16),E=!1),this.o=this.o&&E,!E)hr(this.i,this.l,ae,"[Invalid Chunked Response]"),Qn(this),xi(this);else if(0<ae.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+ae.length),Ls(Xt),Xt.M=!0,It(11))}}else hr(this.i,this.l,ae,null),Os(this,ae);Ot==4&&Qn(this),this.o&&!this.J&&(Ot==4?wa(this.j,this):(this.o=!1,st(this)))}else va(this.g),E==400&&0<ae.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),Qn(this),xi(this)}}}catch{}finally{}};function zu(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Qc(d,x){var E=d.C,S=x.indexOf(`
`,E);return S==-1?la:(E=Number(x.substring(E,S)),isNaN(E)?Ts:(S+=1,S+E>x.length?la:(x=x.slice(S,S+E),d.C=S+E,x)))}pr.prototype.cancel=function(){this.J=!0,Qn(this)};function st(d){d.S=Date.now()+d.I,Hu(d,d.I)}function Hu(d,x){if(d.B!=null)throw Error("WatchDog timer not null");d.B=fr(m(d.ba,d),x)}function vo(d){d.B&&(l.clearTimeout(d.B),d.B=null)}pr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ss(this.i,this.A),this.L!=2&&(Jr(),It(17)),Qn(this),this.s=2,xi(this)):Hu(this,this.S-d)};function xi(d){d.j.G==0||d.J||wa(d.j,d)}function Qn(d){vo(d);var x=d.M;x&&typeof x.ma=="function"&&x.ma(),d.M=null,_s(d.U),d.g&&(x=d.g,d.g=null,x.abort(),x.ma())}function Os(d,x){try{var E=d.j;if(E.G!=0&&(E.g==d||En(E.h,d))){if(!d.K&&En(E.h,d)&&E.G==3){try{var S=E.Da.g.parse(x)}catch{S=null}if(Array.isArray(S)&&S.length==3){var G=S;if(G[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)xa(E),_r(E);else break e;_a(E),It(18)}}else E.za=G[1],0<E.za-E.T&&37500>G[2]&&E.F&&E.v==0&&!E.C&&(E.C=fr(m(E.Za,E),6e3));if(1>=Gu(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ii(E,11)}else if((d.K||E.g==d)&&xa(E),!P(x))for(G=E.Da.g.parse(x),x=0;x<G.length;x++){let Ve=G[x];if(E.T=Ve[0],Ve=Ve[1],E.G==2)if(Ve[0]=="c"){E.K=Ve[1],E.ia=Ve[2];const Xt=Ve[3];Xt!=null&&(E.la=Xt,E.j.info("VER="+E.la));const Ot=Ve[4];Ot!=null&&(E.Aa=Ot,E.j.info("SVER="+E.Aa));const Jn=Ve[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(S=1.5*Jn,E.L=S,E.j.info("backChannelRequestTimeoutMs_="+S)),S=E;const Wn=d.g;if(Wn){const Ao=Wn.g?Wn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ao){var Y=S.h;Y.g||Ao.indexOf("spdy")==-1&&Ao.indexOf("quic")==-1&&Ao.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(Ds(Y,Y.h),Y.h=null))}if(S.D){const Aa=Wn.g?Wn.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(S.ya=Aa,it(S.I,S.D,Aa))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),S=E;var ae=d;if(S.qa=rl(S,S.J?S.ia:null,S.W),ae.K){Wu(S.h,ae);var et=ae,Mt=S.L;Mt&&(et.I=Mt),et.B&&(vo(et),st(et)),S.g=ae}else Eo(S);0<E.i.length&&Lr(E)}else Ve[0]!="stop"&&Ve[0]!="close"||ii(E,7);else E.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?ii(E,7):rn(E):Ve[0]!="noop"&&E.l&&E.l.ta(Ve),E.v=0)}}Jr(4)}catch{}}var ju=class{constructor(d,x){this.g=d,this.map=x}};function yo(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Hn(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Gu(d){return d.h?1:d.g?d.g.size:0}function En(d,x){return d.h?d.h==x:d.g?d.g.has(x):!1}function Ds(d,x){d.g?d.g.add(x):d.h=x}function Wu(d,x){d.h&&d.h==x?d.h=null:d.g&&d.g.has(x)&&d.g.delete(x)}yo.prototype.cancel=function(){if(this.i=$u(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function $u(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let x=d.i;for(const E of d.g.values())x=x.concat(E.D);return x}return I(d.i)}function fa(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(c(d)){for(var x=[],E=d.length,S=0;S<E;S++)x.push(d[S]);return x}x=[],E=0;for(S in d)x[E++]=d[S];return x}function ha(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(c(d)||typeof d=="string"){var x=[];d=d.length;for(var E=0;E<d;E++)x.push(E);return x}x=[],E=0;for(const S in d)x[E++]=S;return x}}}function wi(d,x){if(d.forEach&&typeof d.forEach=="function")d.forEach(x,void 0);else if(c(d)||typeof d=="string")Array.prototype.forEach.call(d,x,void 0);else for(var E=ha(d),S=fa(d),G=S.length,Y=0;Y<G;Y++)x.call(void 0,S[Y],E&&E[Y],d)}var mo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zc(d,x){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var S=d[E].indexOf("="),G=null;if(0<=S){var Y=d[E].substring(0,S);G=d[E].substring(S+1)}else Y=d[E];x(Y,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function ei(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ei){this.h=d.h,_o(this,d.j),this.o=d.o,this.g=d.g,Ei(this,d.s),this.l=d.l;var x=d.i,E=new br;E.i=x.i,x.g&&(E.g=new Map(x.g),E.h=x.h),Ai(this,E),this.m=d.m}else d&&(x=String(d).match(mo))?(this.h=!1,_o(this,x[1]||"",!0),this.o=ke(x[2]||""),this.g=ke(x[3]||"",!0),Ei(this,x[4]),this.l=ke(x[5]||"",!0),Ai(this,x[6]||"",!0),this.m=ke(x[7]||"")):(this.h=!1,this.i=new br(null,this.h))}ei.prototype.toString=function(){var d=[],x=this.j;x&&d.push(Ii(x,da,!0),":");var E=this.g;return(E||x=="file")&&(d.push("//"),(x=this.o)&&d.push(Ii(x,da,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(Ii(E,E.charAt(0)=="/"?qu:Ku,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",Ii(E,Ps)),d.join("")};function jn(d){return new ei(d)}function _o(d,x,E){d.j=E?ke(x,!0):x,d.j&&(d.j=d.j.replace(/:$/,""))}function Ei(d,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);d.s=x}else d.s=null}function Ai(d,x,E){x instanceof br?(d.i=x,Mr(d.i,d.h)):(E||(x=Ii(x,Yu)),d.i=new br(x,d.h))}function it(d,x,E){d.i.set(x,E)}function Ci(d){return it(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ke(d,x){return d?x?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ii(d,x,E){return typeof d=="string"?(d=encodeURI(d).replace(x,Xu),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Xu(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var da=/[#\/\?@]/g,Ku=/[#\?:]/g,qu=/[#\?]/g,Yu=/[#\?@]/g,Ps=/#/g;function br(d,x){this.h=this.g=null,this.i=d||null,this.j=!!x}function nn(d){d.g||(d.g=new Map,d.h=0,d.i&&Zc(d.i,function(x,E){d.add(decodeURIComponent(x.replace(/\+/g," ")),E)}))}n=br.prototype,n.add=function(d,x){nn(this),this.i=null,d=Zn(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(x),this.h+=1,this};function gr(d,x){nn(d),x=Zn(d,x),d.g.has(x)&&(d.i=null,d.h-=d.g.get(x).length,d.g.delete(x))}function vr(d,x){return nn(d),x=Zn(d,x),d.g.has(x)}n.forEach=function(d,x){nn(this),this.g.forEach(function(E,S){E.forEach(function(G){d.call(x,G,S,this)},this)},this)},n.na=function(){nn(this);const d=Array.from(this.g.values()),x=Array.from(this.g.keys()),E=[];for(let S=0;S<x.length;S++){const G=d[S];for(let Y=0;Y<G.length;Y++)E.push(x[S])}return E},n.V=function(d){nn(this);let x=[];if(typeof d=="string")vr(this,d)&&(x=x.concat(this.g.get(Zn(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)x=x.concat(d[E])}return x},n.set=function(d,x){return nn(this),this.i=null,d=Zn(this,d),vr(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[x]),this.h+=1,this},n.get=function(d,x){return d?(d=this.V(d),0<d.length?String(d[0]):x):x};function Si(d,x,E){gr(d,x),0<E.length&&(d.i=null,d.g.set(Zn(d,x),I(E)),d.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],x=Array.from(this.g.keys());for(var E=0;E<x.length;E++){var S=x[E];const Y=encodeURIComponent(String(S)),ae=this.V(S);for(S=0;S<ae.length;S++){var G=Y;ae[S]!==""&&(G+="="+encodeURIComponent(String(ae[S]))),d.push(G)}}return this.i=d.join("&")};function Zn(d,x){return x=String(x),d.j&&(x=x.toLowerCase()),x}function Mr(d,x){x&&!d.j&&(nn(d),d.i=null,d.g.forEach(function(E,S){var G=S.toLowerCase();S!=G&&(gr(this,S),Si(this,G,E))},d)),d.j=x}function Jc(d,x){const E=new ho;if(l.Image){const S=new Image;S.onload=_(Dn,E,"TestLoadImage: loaded",!0,x,S),S.onerror=_(Dn,E,"TestLoadImage: error",!1,x,S),S.onabort=_(Dn,E,"TestLoadImage: abort",!1,x,S),S.ontimeout=_(Dn,E,"TestLoadImage: timeout",!1,x,S),l.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=d}else x(!1)}function Qu(d,x){const E=new ho,S=new AbortController,G=setTimeout(()=>{S.abort(),Dn(E,"TestPingServer: timeout",!1,x)},1e4);fetch(d,{signal:S.signal}).then(Y=>{clearTimeout(G),Y.ok?Dn(E,"TestPingServer: ok",!0,x):Dn(E,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(G),Dn(E,"TestPingServer: error",!1,x)})}function Dn(d,x,E,S,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),S(E)}catch{}}function ef(){this.g=new Es}function Zu(d,x,E){const S=E||"";try{wi(d,function(G,Y){let ae=G;h(G)&&(ae=xs(G)),x.push(S+Y+"="+encodeURIComponent(ae))})}catch(G){throw x.push(S+"type="+encodeURIComponent("_badmap")),G}}function ti(d){this.l=d.Ub||null,this.j=d.eb||!1}A(ti,co),ti.prototype.g=function(){return new xo(this.l,this.j)},ti.prototype.i=function(d){return function(){return d}}({});function xo(d,x){Nt.call(this),this.D=d,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(xo,Nt),n=xo.prototype,n.open=function(d,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=x,this.readyState=1,mr(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(x.body=d),(this.D||l).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,yr(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,mr(this)),this.g&&(this.readyState=3,mr(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ju(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ju(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var x=d.value?d.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!d.done}))&&(this.response=this.responseText+=x)}d.done?yr(this):mr(this),this.readyState==3&&Ju(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,yr(this))},n.Qa=function(d){this.g&&(this.response=d,yr(this))},n.ga=function(){this.g&&yr(this)};function yr(d){d.readyState=4,d.l=null,d.j=null,d.v=null,mr(d)}n.setRequestHeader=function(d,x){this.u.append(d,x)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],x=this.h.entries();for(var E=x.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=x.next();return d.join(`\r
`)};function mr(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function ni(d){let x="";return Q(d,function(E,S){x+=S,x+=":",x+=E,x+=`\r
`}),x}function Ti(d,x,E){e:{for(S in E){var S=!1;break e}S=!0}S||(E=ni(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):it(d,x,E))}function gt(d){Nt.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(gt,Nt);var tf=/^https?$/i,Ns=["POST","PUT"];n=gt.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,x,E,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);x=x?x.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():dr.g(),this.v=this.o?ra(this.o):ra(dr),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(x,String(d),!0),this.B=!1}catch(Y){wo(this,Y);return}if(d=E||"",E=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var G in S)E.set(G,S[G]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const Y of S.keys())E.set(Y,S.get(Y));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(E.keys()).find(Y=>Y.toLowerCase()=="content-type"),G=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ns,x,void 0))||S||G||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,ae]of E)this.g.setRequestHeader(Y,ae);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ga(this),this.u=!0,this.g.send(d),this.u=!1}catch(Y){wo(this,Y)}};function wo(d,x){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=x,d.m=5,pa(d),Gn(d)}function pa(d){d.A||(d.A=!0,bt(d,"complete"),bt(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,bt(this,"complete"),bt(this,"abort"),Gn(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Gn(this,!0)),gt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?bs(this):this.bb())},n.bb=function(){bs(this)};function bs(d){if(d.h&&typeof s<"u"&&(!d.v[1]||Pn(d)!=4||d.Z()!=2)){if(d.u&&Pn(d)==4)ys(d.Ea,0,d);else if(bt(d,"readystatechange"),Pn(d)==4){d.h=!1;try{const ae=d.Z();e:switch(ae){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var E;if(!(E=x)){var S;if(S=ae===0){var G=String(d.D).match(mo)[1]||null;!G&&l.self&&l.self.location&&(G=l.self.location.protocol.slice(0,-1)),S=!tf.test(G?G.toLowerCase():"")}E=S}if(E)bt(d,"complete"),bt(d,"success");else{d.m=6;try{var Y=2<Pn(d)?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.Z()+"]",pa(d)}}finally{Gn(d)}}}}function Gn(d,x){if(d.g){ga(d);const E=d.g,S=d.v[0]?()=>{}:null;d.g=null,d.v=null,x||bt(d,"ready");try{E.onreadystatechange=S}catch{}}}function ga(d){d.I&&(l.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Pn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var x=this.g.responseText;return d&&x.indexOf(d)==0&&(x=x.substring(d.length)),ws(x)}};function Ms(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function va(d){const x={};d=(d.g&&2<=Pn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<d.length;S++){if(P(d[S]))continue;var E=V(d[S]);const G=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const Y=x[G]||[];x[G]=Y,Y.push(E)}D(x,function(S){return S.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function kr(d,x,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||x}function ks(d){this.Aa=0,this.i=[],this.j=new ho,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=kr("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=kr("baseRetryDelayMs",5e3,d),this.cb=kr("retryDelaySeedMs",1e4,d),this.Wa=kr("forwardChannelMaxRetries",2,d),this.wa=kr("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new yo(d&&d.concurrentRequestLimit),this.Da=new ef,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ks.prototype,n.la=8,n.G=1,n.connect=function(d,x,E,S){It(0),this.W=d,this.H=x||{},E&&S!==void 0&&(this.H.OSID=E,this.H.OAID=S),this.F=this.X,this.I=rl(this,null,this.W),Lr(this)};function rn(d){if(ya(d),d.G==3){var x=d.U++,E=jn(d.I);if(it(E,"SID",d.K),it(E,"RID",x),it(E,"TYPE","terminate"),ri(d,E),x=new pr(d,d.j,x),x.L=2,x.v=Ci(jn(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(x.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=x.v,E=!0),E||(x.g=il(x.j,null),x.g.ea(x.v)),x.F=Date.now(),st(x)}nl(d)}function _r(d){d.g&&(Ls(d),d.g.cancel(),d.g=null)}function ya(d){_r(d),d.u&&(l.clearTimeout(d.u),d.u=null),xa(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Lr(d){if(!Hn(d.h)&&!d.s){d.s=!0;var x=d.Ga;We||ce(),se||(We(),se=!0),me.add(x,d),d.B=0}}function nf(d,x){return Gu(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=x.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=fr(m(d.Ga,d,x),tl(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new pr(this,this.j,d);let Y=this.o;if(this.S&&(Y?(Y=T(Y),k(Y,this.S)):Y=this.S),this.m!==null||this.O||(G.H=Y,Y=null),this.P)e:{for(var x=0,E=0;E<this.i.length;E++){t:{var S=this.i[E];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(x+=S,4096<x){x=E;break e}if(x===4096||E===this.i.length-1){x=E+1;break e}}x=1e3}else x=1e3;x=Ri(this,G,x),E=jn(this.I),it(E,"RID",d),it(E,"CVER",22),this.D&&it(E,"X-HTTP-Session-Id",this.D),ri(this,E),Y&&(this.O?x="headers="+encodeURIComponent(String(ni(Y)))+"&"+x:this.m&&Ti(E,this.m,Y)),Ds(this.h,G),this.Ua&&it(E,"TYPE","init"),this.P?(it(E,"$req",x),it(E,"SID","null"),G.T=!0,ca(G,E,null)):ca(G,E,x),this.G=2}}else this.G==3&&(d?ma(this,d):this.i.length==0||Hn(this.h)||ma(this))};function ma(d,x){var E;x?E=x.l:E=d.U++;const S=jn(d.I);it(S,"SID",d.K),it(S,"RID",E),it(S,"AID",d.T),ri(d,S),d.m&&d.o&&Ti(S,d.m,d.o),E=new pr(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),x&&(d.i=x.D.concat(d.i)),x=Ri(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),Ds(d.h,E),ca(E,S,x)}function ri(d,x){d.H&&Q(d.H,function(E,S){it(x,S,E)}),d.l&&wi({},function(E,S){it(x,S,E)})}function Ri(d,x,E){E=Math.min(d.i.length,E);var S=d.l?m(d.l.Na,d.l,d):null;e:{var G=d.i;let Y=-1;for(;;){const ae=["count="+E];Y==-1?0<E?(Y=G[0].g,ae.push("ofs="+Y)):Y=0:ae.push("ofs="+Y);let et=!0;for(let Mt=0;Mt<E;Mt++){let Ve=G[Mt].g;const Xt=G[Mt].map;if(Ve-=Y,0>Ve)Y=Math.max(0,G[Mt].g-100),et=!1;else try{Zu(Xt,ae,"req"+Ve+"_")}catch{S&&S(Xt)}}if(et){S=ae.join("&");break e}}}return d=d.i.splice(0,E),x.D=d,S}function Eo(d){if(!d.g&&!d.u){d.Y=1;var x=d.Fa;We||ce(),se||(We(),se=!0),me.add(x,d),d.v=0}}function _a(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=fr(m(d.Fa,d),tl(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,el(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=fr(m(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),_r(this),el(this))};function Ls(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function el(d){d.g=new pr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var x=jn(d.qa);it(x,"RID","rpc"),it(x,"SID",d.K),it(x,"AID",d.T),it(x,"CI",d.F?"0":"1"),!d.F&&d.ja&&it(x,"TO",d.ja),it(x,"TYPE","xmlhttp"),ri(d,x),d.m&&d.o&&Ti(x,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Ci(jn(x)),E.m=null,E.P=!0,Rs(E,d)}n.Za=function(){this.C!=null&&(this.C=null,_r(this),_a(this),It(19))};function xa(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function wa(d,x){var E=null;if(d.g==x){xa(d),Ls(d),d.g=null;var S=2}else if(En(d.h,x))E=x.D,Wu(d.h,x),S=1;else return;if(d.G!=0){if(x.o)if(S==1){E=x.m?x.m.length:0,x=Date.now()-x.F;var G=d.B;S=fo(),bt(S,new aa(S,E)),Lr(d)}else Eo(d);else if(G=x.s,G==3||G==0&&0<x.X||!(S==1&&nf(d,x)||S==2&&_a(d)))switch(E&&0<E.length&&(x=d.h,x.i=x.i.concat(E)),G){case 1:ii(d,5);break;case 4:ii(d,10);break;case 3:ii(d,6);break;default:ii(d,2)}}}function tl(d,x){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*x}function ii(d,x){if(d.j.info("Error code "+x),x==2){var E=m(d.fb,d),S=d.Xa;const G=!S;S=new ei(S||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||_o(S,"https"),Ci(S),G?Jc(S.toString(),E):Qu(S.toString(),E)}else It(2);d.G=0,d.l&&d.l.sa(x),nl(d),ya(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function nl(d){if(d.G=0,d.ka=[],d.l){const x=$u(d.h);(x.length!=0||d.i.length!=0)&&(R(d.ka,x),R(d.ka,d.i),d.h.i.length=0,I(d.i),d.i.length=0),d.l.ra()}}function rl(d,x,E){var S=E instanceof ei?jn(E):new ei(E);if(S.g!="")x&&(S.g=x+"."+S.g),Ei(S,S.s);else{var G=l.location;S=G.protocol,x=x?x+"."+G.hostname:G.hostname,G=+G.port;var Y=new ei(null);S&&_o(Y,S),x&&(Y.g=x),G&&Ei(Y,G),E&&(Y.l=E),S=Y}return E=d.D,x=d.ya,E&&x&&it(S,E,x),it(S,"VER",d.la),ri(d,S),S}function il(d,x,E){if(x&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=d.Ca&&!d.pa?new gt(new ti({eb:E})):new gt(d.pa),x.Ha(d.J),x}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Fs(){}n=Fs.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ea(){}Ea.prototype.g=function(d,x){return new An(d,x)};function An(d,x){Nt.call(this),this.g=new ks(x),this.l=d,this.h=x&&x.messageUrlParams||null,d=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(d?d["X-WebChannel-Content-Type"]=x.messageContentType:d={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(d?d["X-WebChannel-Client-Profile"]=x.va:d={"X-WebChannel-Client-Profile":x.va}),this.g.S=d,(d=x&&x.Sb)&&!P(d)&&(this.g.m=d),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!P(x)&&(this.g.D=x,d=this.h,d!==null&&x in d&&(d=this.h,x in d&&delete d[x])),this.j=new Fr(this)}A(An,Nt),An.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},An.prototype.close=function(){rn(this.g)},An.prototype.o=function(d){var x=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=xs(d),d=E);x.i.push(new ju(x.Ya++,d)),x.G==3&&Lr(x)},An.prototype.N=function(){this.g.l=null,delete this.j,rn(this.g),delete this.g,An.aa.N.call(this)};function ol(d){Pr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var x=d.__sm__;if(x){e:{for(const E in x){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,x=x!==null&&d in x?x[d]:void 0),this.data=x}else this.data=d}A(ol,Pr);function al(){oa.call(this),this.status=1}A(al,oa);function Fr(d){this.g=d}A(Fr,Fs),Fr.prototype.ua=function(){bt(this.g,"a")},Fr.prototype.ta=function(d){bt(this.g,new ol(d))},Fr.prototype.sa=function(d){bt(this.g,new al)},Fr.prototype.ra=function(){bt(this.g,"b")},Ea.prototype.createWebChannel=Ea.prototype.g,An.prototype.send=An.prototype.o,An.prototype.open=An.prototype.m,An.prototype.close=An.prototype.close,Fv=function(){return new Ea},Lv=function(){return fo()},kv=Nr,Jh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ua.NO_ERROR=0,ua.TIMEOUT=8,ua.HTTP_ERROR=6,hc=ua,Vu.COMPLETE="complete",Mv=Vu,ia.EventType=Yn,Yn.OPEN="a",Yn.CLOSE="b",Yn.ERROR="c",Yn.MESSAGE="d",Nt.prototype.listen=Nt.prototype.K,hu=ia,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,bv=gt}).apply(typeof ec<"u"?ec:typeof self<"u"?self:typeof window<"u"?window:{});const $p="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let us="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=new Av("@firebase/firestore");function $a(){return Wo.logLevel}function fe(n,...e){if(Wo.logLevel<=He.DEBUG){const t=e.map(Pd);Wo.debug(`Firestore (${us}): ${n}`,...t)}}function vi(n,...e){if(Wo.logLevel<=He.ERROR){const t=e.map(Pd);Wo.error(`Firestore (${us}): ${n}`,...t)}}function es(n,...e){if(Wo.logLevel<=He.WARN){const t=e.map(Pd);Wo.warn(`Firestore (${us}): ${n}`,...t)}}function Pd(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Se(n="Unexpected state"){const e=`FIRESTORE (${us}) INTERNAL ASSERTION FAILED: `+n;throw vi(e),new Error(e)}function Je(n,e){n||Se()}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends Xo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class px{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_n.UNAUTHENTICATED))}shutdown(){}}class gx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vx{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Je(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let o=new Zi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zi,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},l=c=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zi)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Je(typeof r.accessToken=="string"),new Bv(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new _n(e)}}class yx{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class mx{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new yx(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _x{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xx{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Je(this.o===void 0);const r=o=>{o.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,fe("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Je(typeof t.token=="string"),this.R=t.token,new _x(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=wx(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}}function Le(n,e){return n<e?-1:n>e?1:0}function ts(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{static now(){return Gt.fromMillis(Date.now())}static fromDate(e){return Gt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Gt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Le(this.nanoseconds,e.nanoseconds):Le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new Gt(0,0))}static max(){return new Te(new Gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t,r){t===void 0?t=0:t>e.length&&Se(),r===void 0?r=e.length-t:r>e.length-t&&Se(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Su.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Su?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class yt extends Su{construct(e,t,r){return new yt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(ie.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new yt(t)}static emptyPath(){return new yt([])}}const Ex=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class cn extends Su{construct(e,t,r){return new cn(e,t,r)}static isValidIdentifier(e){return Ex.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),cn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new cn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const o=()=>{if(r.length===0)throw new xe(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new xe(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new xe(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new xe(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new cn(t)}static emptyPath(){return new cn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(yt.fromString(e))}static fromName(e){return new Ce(yt.fromString(e).popFirst(5))}static empty(){return new Ce(yt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&yt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return yt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new yt(e.slice()))}}function Ax(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Te.fromTimestamp(r===1e9?new Gt(t+1,0):new Gt(t,r));return new no(i,Ce.empty(),e)}function Cx(n){return new no(n.readTime,n.key,-1)}class no{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new no(Te.min(),Ce.empty(),-1)}static max(){return new no(Te.max(),Ce.empty(),-1)}}function Ix(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Le(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sx="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Tx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ls(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==Sx)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Se(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):J.reject(t)}static resolve(e){return new J((t,r)=>{t(e)})}static reject(e){return new J((t,r)=>{r(e)})}static waitFor(e){return new J((t,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&t()},c=>r(c))}),s=!0,o===i&&t()})}static or(e){let t=J.resolve(!1);for(const r of e)t=t.next(i=>i?J.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new J((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let c=0;c<o;c++){const h=c;t(e[h]).next(g=>{s[h]=g,++l,l===o&&r(s)},g=>i(g))}})}static doWhile(e,t){return new J((r,i)=>{const o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}}function Rx(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function cs(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mc.oe=-1;function kc(n){return n==null}function Ec(n){return n===0&&1/n==-1/0}function Ox(n){return typeof n=="number"&&Number.isInteger(n)&&!Ec(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dx(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Xp(e)),e=Px(n.get(t),e);return Xp(e)}function Px(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function Xp(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ko(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Uv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new wt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tc(this.root,e,this.comparator,!1)}getReverseIterator(){return new tc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tc(this.root,e,this.comparator,!0)}}class tc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??ln.RED,this.left=i??ln.EMPTY,this.right=o??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new ln(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Se();const e=this.left.check();if(e!==this.right.check())throw Se();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Se()}get value(){throw Se()}get color(){throw Se()}get left(){throw Se()}get right(){throw Se()}copy(e,t,r,i,o){return this}insert(e,t,r){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new qp(this.data.getIterator())}getIteratorFrom(e){return new qp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wt(this.comparator);return t.data=e,t}}class qp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e){this.fields=e,e.sort(cn.comparator)}static empty(){return new Dr([])}unionWith(e){let t=new Wt(cn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ts(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zv("Invalid base64 string: "+o):o}}(e);return new hn(t)}static fromUint8Array(e){const t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new hn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const Nx=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(n){if(Je(!!n),typeof n=="string"){let e=0;const t=Nx.exec(n);if(Je(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function io(n){return typeof n=="string"?hn.fromBase64String(n):hn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Lc(n){const e=n.mapValue.fields.__previous_value__;return Nd(e)?Lc(e):e}function Tu(n){const e=ro(n.mapValue.fields.__local_write_time__.timestampValue);return new Gt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bx{constructor(e,t,r,i,o,s,l,c,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=h}}class Ru{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Ru("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function oo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nd(n)?4:kx(n)?9007199254740991:Mx(n)?10:11:Se()}function $r(n,e){if(n===e)return!0;const t=oo(n);if(t!==oo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tu(n).isEqual(Tu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=ro(i.timestampValue),l=ro(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return io(i.bytesValue).isEqual(io(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return Tt(i.geoPointValue.latitude)===Tt(o.geoPointValue.latitude)&&Tt(i.geoPointValue.longitude)===Tt(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return Tt(i.integerValue)===Tt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=Tt(i.doubleValue),l=Tt(o.doubleValue);return s===l?Ec(s)===Ec(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return ts(n.arrayValue.values||[],e.arrayValue.values||[],$r);case 10:case 11:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Kp(s)!==Kp(l))return!1;for(const c in s)if(s.hasOwnProperty(c)&&(l[c]===void 0||!$r(s[c],l[c])))return!1;return!0}(n,e);default:return Se()}}function Ou(n,e){return(n.values||[]).find(t=>$r(t,e))!==void 0}function ns(n,e){if(n===e)return 0;const t=oo(n),r=oo(e);if(t!==r)return Le(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Le(n.booleanValue,e.booleanValue);case 2:return function(o,s){const l=Tt(o.integerValue||o.doubleValue),c=Tt(s.integerValue||s.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(n,e);case 3:return Yp(n.timestampValue,e.timestampValue);case 4:return Yp(Tu(n),Tu(e));case 5:return Le(n.stringValue,e.stringValue);case 6:return function(o,s){const l=io(o),c=io(s);return l.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),c=s.split("/");for(let h=0;h<l.length&&h<c.length;h++){const g=Le(l[h],c[h]);if(g!==0)return g}return Le(l.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){const l=Le(Tt(o.latitude),Tt(s.latitude));return l!==0?l:Le(Tt(o.longitude),Tt(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Qp(n.arrayValue,e.arrayValue);case 10:return function(o,s){var l,c,h,g;const v=o.fields||{},m=s.fields||{},_=(l=v.value)===null||l===void 0?void 0:l.arrayValue,A=(c=m.value)===null||c===void 0?void 0:c.arrayValue,I=Le(((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0,((g=A==null?void 0:A.values)===null||g===void 0?void 0:g.length)||0);return I!==0?I:Qp(_,A)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===nc.mapValue&&s===nc.mapValue)return 0;if(o===nc.mapValue)return 1;if(s===nc.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),h=s.fields||{},g=Object.keys(h);c.sort(),g.sort();for(let v=0;v<c.length&&v<g.length;++v){const m=Le(c[v],g[v]);if(m!==0)return m;const _=ns(l[c[v]],h[g[v]]);if(_!==0)return _}return Le(c.length,g.length)}(n.mapValue,e.mapValue);default:throw Se()}}function Yp(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Le(n,e);const t=ro(n),r=ro(e),i=Le(t.seconds,r.seconds);return i!==0?i:Le(t.nanos,r.nanos)}function Qp(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const o=ns(t[i],r[i]);if(o)return o}return Le(t.length,r.length)}function rs(n){return ed(n)}function ed(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ro(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return io(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ce.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const o of t.values||[])i?i=!1:r+=",",r+=ed(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${ed(t.fields[s])}`;return i+"}"}(n.mapValue):Se()}function dc(n){switch(oo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Lc(n);return e?16+dc(e):16;case 5:return 2*n.stringValue.length;case 6:return io(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,o)=>i+dc(o),0)}(n.arrayValue);case 10:case 11:return function(r){let i=0;return Ko(r.fields,(o,s)=>{i+=o.length+dc(s)}),i}(n.mapValue);default:throw Se()}}function td(n){return!!n&&"integerValue"in n}function bd(n){return!!n&&"arrayValue"in n}function Zp(n){return!!n&&"nullValue"in n}function Jp(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function pc(n){return!!n&&"mapValue"in n}function Mx(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function _u(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ko(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=_u(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=_u(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.value=e}static empty(){return new sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!pc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=_u(t)}setAll(e){let t=cn.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=l.popLast()}s?r[l.lastSegment()]=_u(s):i.push(l.lastSegment())});const o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){const t=this.field(e.popLast());pc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $r(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];pc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ko(t,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new sr(_u(this.value))}}function Hv(n){const e=[];return Ko(n.fields,(t,r)=>{const i=new cn([t]);if(pc(r)){const o=Hv(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t,r,i,o,s,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new xn(e,0,Te.min(),Te.min(),Te.min(),sr.empty(),0)}static newFoundDocument(e,t,r,i){return new xn(e,1,t,Te.min(),r,i,0)}static newNoDocument(e,t){return new xn(e,2,t,Te.min(),Te.min(),sr.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Te.min(),Te.min(),sr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(e,t){this.position=e,this.inclusive=t}}function eg(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const o=e[i],s=n.position[i];if(o.field.isKeyField()?r=Ce.comparator(Ce.fromName(s.referenceValue),t.key):r=ns(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function tg(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$r(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Lx(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{}class zt extends jv{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Bx(e,t,r):t==="array-contains"?new zx(e,r):t==="in"?new Hx(e,r):t==="not-in"?new jx(e,r):t==="array-contains-any"?new Gx(e,r):new zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Vx(e,r):new Ux(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ns(t,this.value)):t!==null&&oo(this.value)===oo(t)&&this.matchesComparison(ns(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Se()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends jv{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new Xr(e,t)}matches(e){return Gv(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Gv(n){return n.op==="and"}function Wv(n){return Fx(n)&&Gv(n)}function Fx(n){for(const e of n.filters)if(e instanceof Xr)return!1;return!0}function nd(n){if(n instanceof zt)return n.field.canonicalString()+n.op.toString()+rs(n.value);if(Wv(n))return n.filters.map(e=>nd(e)).join(",");{const e=n.filters.map(t=>nd(t)).join(",");return`${n.op}(${e})`}}function $v(n,e){return n instanceof zt?function(r,i){return i instanceof zt&&r.op===i.op&&r.field.isEqual(i.field)&&$r(r.value,i.value)}(n,e):n instanceof Xr?function(r,i){return i instanceof Xr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&$v(s,i.filters[l]),!0):!1}(n,e):void Se()}function Xv(n){return n instanceof zt?function(t){return`${t.field.canonicalString()} ${t.op} ${rs(t.value)}`}(n):n instanceof Xr?function(t){return t.op.toString()+" {"+t.getFilters().map(Xv).join(" ,")+"}"}(n):"Filter"}class Bx extends zt{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class Vx extends zt{constructor(e,t){super(e,"in",t),this.keys=Kv("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ux extends zt{constructor(e,t){super(e,"not-in",t),this.keys=Kv("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Kv(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ce.fromName(r.referenceValue))}class zx extends zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return bd(t)&&Ou(t.arrayValue,this.value)}}class Hx extends zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ou(this.value.arrayValue,t)}}class jx extends zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ou(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Ou(this.value.arrayValue,t)}}class Gx extends zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!bd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Ou(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.ue=null}}function ng(n,e=null,t=[],r=[],i=null,o=null,s=null){return new Wx(n,e,t,r,i,o,s)}function Md(n){const e=Re(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>nd(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rs(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rs(r)).join(",")),e.ue=t}return e.ue}function kd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Lx(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!$v(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tg(n.startAt,e.startAt)&&tg(n.endAt,e.endAt)}function rd(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e,t=null,r=[],i=[],o=null,s="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $x(n,e,t,r,i,o,s,l){return new Fc(n,e,t,r,i,o,s,l)}function Ld(n){return new Fc(n)}function rg(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Xx(n){return n.collectionGroup!==null}function xu(n){const e=Re(n);if(e.ce===null){e.ce=[];const t=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let l=new Wt(cn.comparator);return s.filters.forEach(c=>{c.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Cc(o,r))}),t.has(cn.keyField().canonicalString())||e.ce.push(new Cc(cn.keyField(),r))}return e.ce}function Gr(n){const e=Re(n);return e.le||(e.le=Kx(e,xu(n))),e.le}function Kx(n,e){if(n.limitType==="F")return ng(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Cc(i.field,o)});const t=n.endAt?new Ac(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Ac(n.startAt.position,n.startAt.inclusive):null;return ng(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function id(n,e,t){return new Fc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bc(n,e){return kd(Gr(n),Gr(e))&&n.limitType===e.limitType}function qv(n){return`${Md(Gr(n))}|lt:${n.limitType}`}function Xa(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Xv(i)).join(", ")}]`),kc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>rs(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>rs(i)).join(",")),`Target(${r})`}(Gr(n))}; limitType=${n.limitType})`}function Vc(n,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Ce.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(const o of xu(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,l,c){const h=eg(s,l,c);return s.inclusive?h<=0:h<0}(r.startAt,xu(r),i)||r.endAt&&!function(s,l,c){const h=eg(s,l,c);return s.inclusive?h>=0:h>0}(r.endAt,xu(r),i))}(n,e)}function qx(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Yv(n){return(e,t)=>{let r=!1;for(const i of xu(n)){const o=Yx(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Yx(n,e,t){const r=n.field.isKeyField()?Ce.comparator(e.key,t.key):function(o,s,l){const c=s.data.field(o),h=l.data.field(o);return c!==null&&h!==null?ns(c,h):Se()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Se()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ko(this.inner,(t,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Uv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=new wt(Ce.comparator);function yi(){return Qx}const Qv=new wt(Ce.comparator);function du(...n){let e=Qv;for(const t of n)e=e.insert(t.key,t);return e}function Zv(n){let e=Qv;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Uo(){return wu()}function Jv(){return wu()}function wu(){return new qo(n=>n.toString(),(n,e)=>n.isEqual(e))}const Zx=new wt(Ce.comparator),Jx=new Wt(Ce.comparator);function Me(...n){let e=Jx;for(const t of n)e=e.add(t);return e}const ew=new Wt(Le);function tw(){return ew}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fd(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ec(e)?"-0":e}}function ey(n){return{integerValue:""+n}}function nw(n,e){return Ox(e)?ey(e):Fd(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(){this._=void 0}}function rw(n,e,t){return n instanceof Du?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Nd(o)&&(o=Lc(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Pu?ny(n,e):n instanceof Nu?ry(n,e):function(i,o){const s=ty(i,o),l=ig(s)+ig(i.Pe);return td(s)&&td(i.Pe)?ey(l):Fd(i.serializer,l)}(n,e)}function iw(n,e,t){return n instanceof Pu?ny(n,e):n instanceof Nu?ry(n,e):t}function ty(n,e){return n instanceof Ic?function(r){return td(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Du extends Uc{}class Pu extends Uc{constructor(e){super(),this.elements=e}}function ny(n,e){const t=iy(e);for(const r of n.elements)t.some(i=>$r(i,r))||t.push(r);return{arrayValue:{values:t}}}class Nu extends Uc{constructor(e){super(),this.elements=e}}function ry(n,e){let t=iy(e);for(const r of n.elements)t=t.filter(i=>!$r(i,r));return{arrayValue:{values:t}}}class Ic extends Uc{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function ig(n){return Tt(n.integerValue||n.doubleValue)}function iy(n){return bd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e,t){this.field=e,this.transform=t}}function aw(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Pu&&i instanceof Pu||r instanceof Nu&&i instanceof Nu?ts(r.elements,i.elements,$r):r instanceof Ic&&i instanceof Ic?$r(r.Pe,i.Pe):r instanceof Du&&i instanceof Du}(n.transform,e.transform)}class sw{constructor(e,t){this.version=e,this.transformResults=t}}class di{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new di}static exists(e){return new di(void 0,e)}static updateTime(e){return new di(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class zc{}function oy(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new sy(n.key,di.none()):new bu(n.key,n.data,di.none());{const t=n.data,r=sr.empty();let i=new Wt(cn.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Yo(n.key,r,new Dr(i.toArray()),di.none())}}function uw(n,e,t){n instanceof bu?function(i,o,s){const l=i.value.clone(),c=ag(i.fieldTransforms,o,s.transformResults);l.setAll(c),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Yo?function(i,o,s){if(!gc(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=ag(i.fieldTransforms,o,s.transformResults),c=o.data;c.setAll(ay(i)),c.setAll(l),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function Eu(n,e,t,r){return n instanceof bu?function(o,s,l,c){if(!gc(o.precondition,s))return l;const h=o.value.clone(),g=sg(o.fieldTransforms,c,s);return h.setAll(g),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),null}(n,e,t,r):n instanceof Yo?function(o,s,l,c){if(!gc(o.precondition,s))return l;const h=sg(o.fieldTransforms,c,s),g=s.data;return g.setAll(ay(o)),g.setAll(h),s.convertToFoundDocument(s.version,g).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(n,e,t,r):function(o,s,l){return gc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(n,e,t)}function lw(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),o=ty(r.transform,i||null);o!=null&&(t===null&&(t=sr.empty()),t.set(r.field,o))}return t||null}function og(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ts(r,i,(o,s)=>aw(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class bu extends zc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Yo extends zc{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function ay(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function ag(n,e,t){const r=new Map;Je(n.length===t.length);for(let i=0;i<t.length;i++){const o=n[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,iw(s,l,t[i]))}return r}function sg(n,e,t){const r=new Map;for(const i of n){const o=i.transform,s=t.data.field(i.field);r.set(i.field,rw(o,s,e))}return r}class sy extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cw extends zc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&uw(o,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Eu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Eu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Jv();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=t.has(i.key)?null:l;const c=oy(s,l);c!==null&&r.set(i.key,c),s.isValidDocument()||s.convertToNoDocument(Te.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Me())}isEqual(e){return this.batchId===e.batchId&&ts(this.mutations,e.mutations,(t,r)=>og(t,r))&&ts(this.baseMutations,e.baseMutations,(t,r)=>og(t,r))}}class Bd{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Je(e.mutations.length===r.length);let i=function(){return Zx}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Bd(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pt,Ue;function pw(n){switch(n){default:return Se();case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0}}function uy(n){if(n===void 0)return vi("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Pt.OK:return ie.OK;case Pt.CANCELLED:return ie.CANCELLED;case Pt.UNKNOWN:return ie.UNKNOWN;case Pt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Pt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Pt.INTERNAL:return ie.INTERNAL;case Pt.UNAVAILABLE:return ie.UNAVAILABLE;case Pt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Pt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Pt.NOT_FOUND:return ie.NOT_FOUND;case Pt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Pt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Pt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Pt.ABORTED:return ie.ABORTED;case Pt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Pt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Pt.DATA_LOSS:return ie.DATA_LOSS;default:return Se()}}(Ue=Pt||(Pt={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vw=new Ho([4294967295,4294967295],0);function ug(n){const e=gw().encode(n),t=new Nv;return t.update(e),new Uint8Array(t.digest())}function lg(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ho([t,r],0),new Ho([i,o],0)]}class Vd{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new pu(`Invalid padding: ${t}`);if(r<0)throw new pu(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new pu(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new pu(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Ho.fromNumber(this.Te)}Ee(e,t,r){let i=e.add(t.multiply(Ho.fromNumber(r)));return i.compare(vw)===1&&(i=new Ho([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=ug(e),[r,i]=lg(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Vd(o,i,t);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Te===0)return;const t=ug(e),[r,i]=lg(t);for(let o=0;o<this.hashCount;o++){const s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class pu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Mu.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Hc(Te.min(),i,new wt(Le),yi(),Me())}}class Mu{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Mu(r,t,Me(),Me(),Me())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class ly{constructor(e,t){this.targetId=e,this.me=t}}class cy{constructor(e,t,r=hn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class cg{constructor(){this.fe=0,this.ge=fg(),this.pe=hn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Me(),t=Me(),r=Me();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Se()}}),new Mu(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=fg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Je(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class yw{constructor(e){this.Le=e,this.Be=new Map,this.ke=yi(),this.qe=rc(),this.Qe=rc(),this.Ke=new wt(Le)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.je(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.De(e.resumeToken));break;default:Se()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.me.count,i=this.Ye(t);if(i){const o=i.target;if(rd(o))if(r===0){const s=new Ce(o.path);this.We(t,s,xn.newNoDocument(s,Te.min()))}else Je(r===1);else{const s=this.Ze(t);if(s!==r){const l=this.Xe(e),c=l?this.et(l,e,s):1;if(c!==0){this.He(t);const h=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,h)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t;let s,l;try{s=io(r).toUint8Array()}catch(c){if(c instanceof zv)return es("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Vd(s,i,o)}catch(c){return es(c instanceof pu?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Te===0?null:l}et(e,t,r){return t.me.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(o=>{const s=this.Le.nt(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.We(t,o,null),i++)}),i}it(e){const t=new Map;this.Be.forEach((o,s)=>{const l=this.Ye(s);if(l){if(o.current&&rd(l.target)){const c=new Ce(l.target.path);this.st(c).has(s)||this.ot(s,c)||this.We(s,c,xn.newNoDocument(c,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=Me();this.Qe.forEach((o,s)=>{let l=!0;s.forEachWhile(c=>{const h=this.Ye(c);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));const i=new Hc(e,t,this.Ke,this.ke,r);return this.ke=yi(),this.qe=rc(),this.Qe=rc(),this.Ke=new wt(Le),i}Ue(e,t){if(!this.je(e))return;const r=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,t)?i.Fe(t,1):i.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new cg,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new Wt(Le),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Wt(Le),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new cg),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function rc(){return new wt(Ce.comparator)}function fg(){return new wt(Ce.comparator)}const mw={asc:"ASCENDING",desc:"DESCENDING"},_w={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},xw={and:"AND",or:"OR"};class ww{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function od(n,e){return n.useProto3Json||kc(e)?e:{value:e}}function Sc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fy(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Ew(n,e){return Sc(n,e.toTimestamp())}function Wr(n){return Je(!!n),Te.fromTimestamp(function(t){const r=ro(t);return new Gt(r.seconds,r.nanos)}(n))}function Ud(n,e){return ad(n,e).canonicalString()}function ad(n,e){const t=function(i){return new yt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function hy(n){const e=yt.fromString(n);return Je(yy(e)),e}function sd(n,e){return Ud(n.databaseId,e.path)}function Nh(n,e){const t=hy(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(py(t))}function dy(n,e){return Ud(n.databaseId,e)}function Aw(n){const e=hy(n);return e.length===4?yt.emptyPath():py(e)}function ud(n){return new yt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function py(n){return Je(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function hg(n,e,t){return{name:sd(n,e),fields:t.value.mapValue.fields}}function Cw(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Se()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(h,g){return h.useProto3Json?(Je(g===void 0||typeof g=="string"),hn.fromBase64String(g||"")):(Je(g===void 0||g instanceof Buffer||g instanceof Uint8Array),hn.fromUint8Array(g||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(h){const g=h.code===void 0?ie.UNKNOWN:uy(h.code);return new xe(g,h.message||"")}(s);t=new cy(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Nh(n,r.document.name),o=Wr(r.document.updateTime),s=r.document.createTime?Wr(r.document.createTime):Te.min(),l=new sr({mapValue:{fields:r.document.fields}}),c=xn.newFoundDocument(i,o,s,l),h=r.targetIds||[],g=r.removedTargetIds||[];t=new vc(h,g,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Nh(n,r.document),o=r.readTime?Wr(r.readTime):Te.min(),s=xn.newNoDocument(i,o),l=r.removedTargetIds||[];t=new vc([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Nh(n,r.document),o=r.removedTargetIds||[];t=new vc([],o,i,null)}else{if(!("filter"in e))return Se();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new dw(i,o),l=r.targetId;t=new ly(l,s)}}return t}function Iw(n,e){let t;if(e instanceof bu)t={update:hg(n,e.key,e.value)};else if(e instanceof sy)t={delete:sd(n,e.key)};else if(e instanceof Yo)t={update:hg(n,e.key,e.data),updateMask:Mw(e.fieldMask)};else{if(!(e instanceof cw))return Se();t={verify:sd(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof Du)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Pu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Nu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ic)return{fieldPath:s.field.canonicalString(),increment:l.Pe};throw Se()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Ew(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Se()}(n,e.precondition)),t}function Sw(n,e){return n&&n.length>0?(Je(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Wr(i.updateTime):Wr(o);return s.isEqual(Te.min())&&(s=Wr(o)),new sw(s,i.transformResults||[])}(t,e))):[]}function Tw(n,e){return{documents:[dy(n,e.path)]}}function Rw(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dy(n,i);const o=function(h){if(h.length!==0)return vy(Xr.create(h,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const s=function(h){if(h.length!==0)return h.map(g=>function(m){return{field:Ka(m.field),direction:Pw(m.dir)}}(g))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=od(n,e.limit);return l!==null&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ct:t,parent:i}}function Ow(n){let e=Aw(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Je(r===1);const g=t.from[0];g.allDescendants?i=g.collectionId:e=e.child(g.collectionId)}let o=[];t.where&&(o=function(v){const m=gy(v);return m instanceof Xr&&Wv(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(v){return v.map(m=>function(A){return new Cc(qa(A.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(A.direction))}(m))}(t.orderBy));let l=null;t.limit&&(l=function(v){let m;return m=typeof v=="object"?v.value:v,kc(m)?null:m}(t.limit));let c=null;t.startAt&&(c=function(v){const m=!!v.before,_=v.values||[];return new Ac(_,m)}(t.startAt));let h=null;return t.endAt&&(h=function(v){const m=!v.before,_=v.values||[];return new Ac(_,m)}(t.endAt)),$x(e,i,s,o,l,"F",c,h)}function Dw(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Se()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function gy(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=qa(t.unaryFilter.field);return zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=qa(t.unaryFilter.field);return zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=qa(t.unaryFilter.field);return zt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=qa(t.unaryFilter.field);return zt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Se()}}(n):n.fieldFilter!==void 0?function(t){return zt.create(qa(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Se()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Xr.create(t.compositeFilter.filters.map(r=>gy(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Se()}}(t.compositeFilter.op))}(n):Se()}function Pw(n){return mw[n]}function Nw(n){return _w[n]}function bw(n){return xw[n]}function Ka(n){return{fieldPath:n.canonicalString()}}function qa(n){return cn.fromServerFormat(n.fieldPath)}function vy(n){return n instanceof zt?function(t){if(t.op==="=="){if(Jp(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NAN"}};if(Zp(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Jp(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NAN"}};if(Zp(t.value))return{unaryFilter:{field:Ka(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ka(t.field),op:Nw(t.op),value:t.value}}}(n):n instanceof Xr?function(t){const r=t.getFilters().map(i=>vy(i));return r.length===1?r[0]:{compositeFilter:{op:bw(t.op),filters:r}}}(n):Se()}function Mw(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function yy(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e,t,r,i,o=Te.min(),s=Te.min(),l=hn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Ki(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ki(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e){this.ht=e}}function Lw(n){const e=Ow({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?id(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(){this.ln=new Bw}addToCollectionParentIndex(e,t){return this.ln.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(no.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(no.min())}updateCollectionGroup(e,t,r){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class Bw{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Wt(yt.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Wt(yt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(41943040,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new is(0)}static Qn(){return new is(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pg([n,e],[t,r]){const i=Le(n,t);return i===0?Le(e,r):i}class Vw{constructor(e){this.Gn=e,this.buffer=new Wt(pg),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();pg(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Uw{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){fe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){cs(t)?fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await ls(t)}await this.Yn(3e5)})}}class zw{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return J.resolve(Mc.oe);const r=new Vw(t);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Zn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(dg)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dg):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let r,i,o,s,l,c,h;const g=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(v=>(v>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),i=this.params.maximumSequenceNumbersToCollect):i=v,s=Date.now(),this.nthSequenceNumber(e,i))).next(v=>(r=v,l=Date.now(),this.removeTargets(e,r,t))).next(v=>(o=v,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(v=>(h=Date.now(),$a()<=He.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-g}ms
	Determined least recently used ${i} in `+(l-s)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${v} documents in `+(h-c)+`ms
Total Duration: ${h-g}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:v})))}}function Hw(n,e){return new zw(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(){this.changes=new qo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?J.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Eu(r.mutation,i,Dr.empty(),Gt.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Me()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Me()){const i=Uo();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=du();return o.forEach((l,c)=>{s=s.insert(l,c.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){const r=Uo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Me()))}populateOverlays(e,t,r){const i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{t.set(s,l)})})}computeViews(e,t,r,i){let o=yi();const s=wu(),l=function(){return wu()}();return t.forEach((c,h)=>{const g=r.get(h.key);i.has(h.key)&&(g===void 0||g.mutation instanceof Yo)?o=o.insert(h.key,h):g!==void 0?(s.set(h.key,g.mutation.getFieldMask()),Eu(g.mutation,h,g.mutation.getFieldMask(),Gt.now())):s.set(h.key,Dr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((h,g)=>s.set(h,g)),t.forEach((h,g)=>{var v;return l.set(h,new Gw(g,(v=s.get(h))!==null&&v!==void 0?v:null))}),l))}recalculateAndSaveOverlays(e,t){const r=wu();let i=new wt((s,l)=>s-l),o=Me();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(const l of s)l.keys().forEach(c=>{const h=t.get(c);if(h===null)return;let g=r.get(c)||Dr.empty();g=l.applyToLocalView(h,g),r.set(c,g);const v=(i.get(l.batchId)||Me()).add(c);i=i.insert(l.batchId,v)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),h=c.key,g=c.value,v=Jv();g.forEach(m=>{if(!o.has(m)){const _=oy(t.get(m),r.get(m));_!==null&&v.set(m,_),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,h,v))}return J.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return Ce.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Xx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):J.resolve(Uo());let l=-1,c=o;return s.next(h=>J.forEach(h,(g,v)=>(l<v.largestBatchId&&(l=v.largestBatchId),o.get(g)?J.resolve():this.remoteDocumentCache.getEntry(e,g).next(m=>{c=c.insert(g,m)}))).next(()=>this.populateOverlays(e,h,o)).next(()=>this.computeViews(e,c,h,Me())).next(g=>({batchId:l,changes:Zv(g)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next(r=>{let i=du();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const o=t.collectionGroup;let s=du();return this.indexManager.getCollectionParents(e,o).next(l=>J.forEach(l,c=>{const h=function(v,m){return new Fc(m,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(t,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(g=>{g.forEach((v,m)=>{s=s.insert(v,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((c,h)=>{const g=h.getKey();s.get(g)===null&&(s=s.insert(g,xn.newInvalidDocument(g)))});let l=du();return s.forEach((c,h)=>{const g=o.get(c);g!==void 0&&Eu(g.mutation,h,Dr.empty(),Gt.now()),Vc(t,h)&&(l=l.insert(c,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $w{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return J.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Wr(i.createTime)}}(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(i){return{name:i.name,query:Lw(i.bundledQuery),readTime:Wr(i.readTime)}}(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(){this.overlays=new wt(Ce.comparator),this.Er=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Uo();return J.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.Tt(e,t,o)}),J.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Er.delete(r)),J.resolve()}getOverlaysForCollection(e,t,r){const i=Uo(),o=t.length+1,s=new Ce(t.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const c=l.getNext().value,h=c.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===o&&c.largestBatchId>r&&i.set(c.getKey(),c)}return J.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new wt((h,g)=>h-g);const s=this.overlays.getIterator();for(;s.hasNext();){const h=s.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>r){let g=o.get(h.largestBatchId);g===null&&(g=Uo(),o=o.insert(h.largestBatchId,g)),g.set(h.getKey(),h)}}const l=Uo(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((h,g)=>l.set(h,g)),!(l.size()>=i)););return J.resolve(l)}Tt(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new hw(t,r));let o=this.Er.get(t);o===void 0&&(o=Me(),this.Er.set(t,o)),this.Er.set(t,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(){this.dr=new Wt(Jt.Ar),this.Rr=new Wt(Jt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const r=new Jt(e,t);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.gr(new Jt(e,t))}pr(e,t){e.forEach(r=>this.removeReference(r,t))}yr(e){const t=new Ce(new yt([])),r=new Jt(t,e),i=new Jt(t,e+1),o=[];return this.Rr.forEachInRange([r,i],s=>{this.gr(s),o.push(s.key)}),o}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new Ce(new yt([])),r=new Jt(t,e),i=new Jt(t,e+1);let o=Me();return this.Rr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const t=new Jt(e,0),r=this.dr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return Ce.comparator(e.key,t.key)||Le(e.br,t.br)}static Vr(e,t){return Le(e.br,t.br)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new Wt(Jt.Ar)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const o=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new fw(o,t,r,i);this.mutationQueue.push(s);for(const l of i)this.vr=this.vr.add(new Jt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return J.resolve(s)}lookupMutationBatch(e,t){return J.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.Fr(r),o=i<0?0:i;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Jt(t,0),i=new Jt(t,Number.POSITIVE_INFINITY),o=[];return this.vr.forEachInRange([r,i],s=>{const l=this.Cr(s.br);o.push(l)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wt(Le);return t.forEach(i=>{const o=new Jt(i,0),s=new Jt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([o,s],l=>{r=r.add(l.br)})}),J.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let o=r;Ce.isDocumentKey(o)||(o=o.child(""));const s=new Jt(new Ce(o),0);let l=new Wt(Le);return this.vr.forEachWhile(c=>{const h=c.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(c.br)),!0)},s),J.resolve(this.Mr(l))}Mr(e){const t=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Je(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return J.forEach(t.mutations,i=>{const o=new Jt(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Ln(e){}containsKey(e,t){const r=new Jt(t,0),i=this.vr.firstAfterOrEqual(r);return J.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.Nr=e,this.docs=function(){return new wt(Ce.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Nr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return J.resolve(r?r.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let r=yi();return t.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():xn.newInvalidDocument(i))}),J.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=yi();const s=t.path,l=new Ce(s.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:h,value:{document:g}}=c.getNext();if(!s.isPrefixOf(h.path))break;h.path.length>s.length+1||Ix(Cx(g),r)<=0||(i.has(g.key)||Vc(t,g))&&(o=o.insert(g.key,g.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,t,r,i){Se()}Lr(e,t){return J.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Qw(this)}getSize(e){return J.resolve(this.size)}}class Qw extends jw{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),J.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.persistence=e,this.Br=new qo(t=>Md(t),kd),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.kr=0,this.qr=new zd,this.targetCount=0,this.Qr=is.qn()}forEachTarget(e,t){return this.Br.forEach((r,i)=>t(i)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.kr&&(this.kr=t),J.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new is(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Un(t),J.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,r){let i=0;const o=[];return this.Br.forEach((s,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Br.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),J.waitFor(o).next(()=>i)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const r=this.Br.get(t)||null;return J.resolve(r)}addMatchingKeys(e,t,r){return this.qr.mr(t,r),J.resolve()}removeMatchingKeys(e,t,r){this.qr.pr(t,r);const i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qr.Sr(t);return J.resolve(r)}containsKey(e,t){return J.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Mc(0),this.Ur=!1,this.Ur=!0,this.Wr=new Kw,this.referenceDelegate=e(this),this.Gr=new Zw(this),this.indexManager=new Fw,this.remoteDocumentCache=function(i){return new Yw(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new kw(t),this.jr=new $w(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Xw,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Kr[e.toKey()];return r||(r=new qw(t,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,r){fe("MemoryPersistence","Starting transaction:",e);const i=new Jw(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(o=>this.referenceDelegate.Jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Yr(e,t){return J.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,t)))}}class Jw extends Tx{constructor(e){super(),this.currentSequenceNumber=e}}class Hd{constructor(e){this.persistence=e,this.Zr=new zd,this.Xr=null}static ei(e){return new Hd(e)}get ti(){if(this.Xr)return this.Xr;throw Se()}addReference(e,t,r){return this.Zr.addReference(r,t),this.ti.delete(r.toString()),J.resolve()}removeReference(e,t,r){return this.Zr.removeReference(r,t),this.ti.add(r.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),J.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.ti.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ti,r=>{const i=Ce.fromPath(r);return this.ni(e,i).next(o=>{o||t.removeEntry(i,Te.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(r=>{r?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return J.or([()=>J.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Tc{constructor(e,t){this.persistence=e,this.ri=new qo(r=>Dx(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=Hw(this,t)}static ei(e,t){return new Tc(e,t)}Hr(){}Jr(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}nr(e){let t=0;return this.er(e,r=>{t++}).next(()=>t)}er(e,t){return J.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(o=>o?J.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.Lr(e,s=>this.ir(e,s,t).next(l=>{l||(r++,o.removeEntry(s,Te.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),J.resolve()}removeReference(e,t,r){return this.ri.set(r,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),J.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=dc(e.data.value)),t}ir(e,t,r){return J.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.ri.get(t);return J.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Wi=r,this.Gi=i}static zi(e,t){let r=Me(),i=Me();for(const o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new jd(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tE{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return J2()?8:Rx(Q2())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,r,i){const o={result:null};return this.Xi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.es(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new eE;return this.ts(e,t,s).next(l=>{if(o.result=l,this.Hi)return this.ns(e,t,s,l.size)})}).next(()=>o.result)}ns(e,t,r,i){return r.documentReadCount<this.Ji?($a()<=He.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Xa(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),J.resolve()):($a()<=He.DEBUG&&fe("QueryEngine","Query:",Xa(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?($a()<=He.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Xa(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(t))):J.resolve())}Xi(e,t){if(rg(t))return J.resolve(null);let r=Gr(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=id(t,null,"F"),r=Gr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Me(...o);return this.Zi.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const h=this.rs(t,l);return this.ss(t,h,s,c.readTime)?this.Xi(e,id(t,null,"F")):this.os(e,h,t,c)}))})))}es(e,t,r,i){return rg(t)||i.isEqual(Te.min())?J.resolve(null):this.Zi.getDocuments(e,r).next(o=>{const s=this.rs(t,o);return this.ss(t,s,r,i)?J.resolve(null):($a()<=He.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xa(t)),this.os(e,s,t,Ax(i,-1)).next(l=>l))})}rs(e,t){let r=new Wt(Yv(e));return t.forEach((i,o)=>{Vc(e,o)&&(r=r.add(o))}),r}ss(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}ts(e,t,r){return $a()<=He.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Xa(t)),this.Zi.getDocumentsMatchingQuery(e,t,no.min(),r)}os(e,t,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,t,r,i){this.persistence=e,this._s=t,this.serializer=i,this.us=new wt(Le),this.cs=new qo(o=>Md(o),kd),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ww(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function rE(n,e,t,r){return new nE(n,e,t,r)}async function _y(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.Ps(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let c=Me();for(const h of i){s.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}for(const h of o){l.push(h.batchId);for(const g of h.mutations)c=c.add(g.key)}return t.localDocuments.getDocuments(r,c).next(h=>({Ts:h,removedBatchIds:s,addedBatchIds:l}))})})}function iE(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=t.hs.newChangeBuffer({trackRemovals:!0});return function(l,c,h,g){const v=h.batch,m=v.keys();let _=J.resolve();return m.forEach(A=>{_=_.next(()=>g.getEntry(c,A)).next(I=>{const R=h.docVersions.get(A);Je(R!==null),I.version.compareTo(R)<0&&(v.applyToRemoteDocument(I,h),I.isValidDocument()&&(I.setReadTime(h.commitVersion),g.addEntry(I)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(c,v))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Me();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(c=c.add(l.batch.mutations[h].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function xy(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function oE(n,e){const t=Re(n),r=e.snapshotVersion;let i=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=t.hs.newChangeBuffer({trackRemovals:!0});i=t.us;const l=[];e.targetChanges.forEach((g,v)=>{const m=i.get(v);if(!m)return;l.push(t.Gr.removeMatchingKeys(o,g.removedDocuments,v).next(()=>t.Gr.addMatchingKeys(o,g.addedDocuments,v)));let _=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?_=_.withResumeToken(hn.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):g.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(g.resumeToken,r)),i=i.insert(v,_),function(I,R,L){return I.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,_,g)&&l.push(t.Gr.updateTargetData(o,_))});let c=yi(),h=Me();if(e.documentUpdates.forEach(g=>{e.resolvedLimboDocuments.has(g)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(o,g))}),l.push(aE(o,s,e.documentUpdates).next(g=>{c=g.Is,h=g.Es})),!r.isEqual(Te.min())){const g=t.Gr.getLastRemoteSnapshotVersion(o).next(v=>t.Gr.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(g)}return J.waitFor(l).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,c,h)).next(()=>c)}).then(o=>(t.us=i,o))}function aE(n,e,t){let r=Me(),i=Me();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=yi();return t.forEach((l,c)=>{const h=o.get(l);c.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),c.isNoDocument()&&c.version.isEqual(Te.min())?(e.removeEntry(l,c.readTime),s=s.insert(l,c)):!h.isValidDocument()||c.version.compareTo(h.version)>0||c.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(c),s=s.insert(l,c)):fe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",c.version)}),{Is:s,Es:i}})}function sE(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function uE(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Gr.getTargetData(r,e).next(o=>o?(i=o,J.resolve(i)):t.Gr.allocateTargetId(r).next(s=>(i=new Ki(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.us=t.us.insert(r.targetId,r),t.cs.set(e,r.targetId)),r})}async function ld(n,e,t){const r=Re(n),i=r.us.get(e),o=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!cs(s))throw s;fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function gg(n,e,t){const r=Re(n);let i=Te.min(),o=Me();return r.persistence.runTransaction("Execute query","readwrite",s=>function(c,h,g){const v=Re(c),m=v.cs.get(g);return m!==void 0?J.resolve(v.us.get(m)):v.Gr.getTargetData(h,g)}(r,s,Gr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(s,l.targetId).next(c=>{o=c})}).next(()=>r._s.getDocumentsMatchingQuery(s,e,t?i:Te.min(),t?o:Me())).next(l=>(lE(r,qx(e),l),{documents:l,ds:o})))}function lE(n,e,t){let r=n.ls.get(e)||Te.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.ls.set(e,r)}class vg{constructor(){this.activeTargetIds=tw()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cE{constructor(){this._o=new vg,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,r){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new vg,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ic=null;function bh(){return ic===null?ic=function(){return 268435456+Math.round(2147483648*Math.random())}():ic++,"0x"+ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class pE extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+t.host,this.Mo=`projects/${i}/databases/${o}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Oo(t,r,i,o,s){const l=bh(),c=this.No(t,r.toUriEncodedString());fe("RestConnection",`Sending RPC '${t}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(h,o,s),this.Bo(t,c,h,i).then(g=>(fe("RestConnection",`Received RPC '${t}' ${l}: `,g),g),g=>{throw es("RestConnection",`RPC '${t}' ${l} failed with error: `,g,"url: ",c,"request:",i),g})}ko(t,r,i,o,s,l){return this.Oo(t,r,i,o,s)}Lo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+us}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}No(t,r){const i=hE[t];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,r,i){const o=bh();return new Promise((s,l)=>{const c=new bv;c.setWithCredentials(!0),c.listenOnce(Mv.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case hc.NO_ERROR:const g=c.getResponseJson();fe(yn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(g)),s(g);break;case hc.TIMEOUT:fe(yn,`RPC '${e}' ${o} timed out`),l(new xe(ie.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:const v=c.getStatus();if(fe(yn,`RPC '${e}' ${o} failed with status:`,v,"response text:",c.getResponseText()),v>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const A=function(R){const L=R.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(L)>=0?L:ie.UNKNOWN}(_.status);l(new xe(A,_.message))}else l(new xe(ie.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new xe(ie.UNAVAILABLE,"Connection failed."));break;default:Se()}}finally{fe(yn,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(i);fe(yn,`RPC '${e}' ${o} sending request:`,i),c.send(t,"POST",h,r,15)})}qo(e,t,r){const i=bh(),o=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Fv(),l=Lv(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Lo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const g=o.join("");fe(yn,`Creating RPC '${e}' stream ${i}: ${g}`,c);const v=s.createWebChannel(g,c);let m=!1,_=!1;const A=new dE({Eo:R=>{_?fe(yn,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(fe(yn,`Opening RPC '${e}' stream ${i} transport.`),v.open(),m=!0),fe(yn,`RPC '${e}' stream ${i} sending:`,R),v.send(R))},Ao:()=>v.close()}),I=(R,L,P)=>{R.listen(L,F=>{try{P(F)}catch(z){setTimeout(()=>{throw z},0)}})};return I(v,hu.EventType.OPEN,()=>{_||(fe(yn,`RPC '${e}' stream ${i} transport opened.`),A.So())}),I(v,hu.EventType.CLOSE,()=>{_||(_=!0,fe(yn,`RPC '${e}' stream ${i} transport closed`),A.Do())}),I(v,hu.EventType.ERROR,R=>{_||(_=!0,es(yn,`RPC '${e}' stream ${i} transport errored:`,R),A.Do(new xe(ie.UNAVAILABLE,"The operation could not be completed")))}),I(v,hu.EventType.MESSAGE,R=>{var L;if(!_){const P=R.data[0];Je(!!P);const F=P,z=(F==null?void 0:F.error)||((L=F[0])===null||L===void 0?void 0:L.error);if(z){fe(yn,`RPC '${e}' stream ${i} received error:`,z);const q=z.status;let Q=function(N){const k=Pt[N];if(k!==void 0)return uy(k)}(q),D=z.message;Q===void 0&&(Q=ie.INTERNAL,D="Unknown error status: "+q+" with message "+z.message),_=!0,A.Do(new xe(Q,D)),v.close()}else fe(yn,`RPC '${e}' stream ${i} received:`,P),A.vo(P)}}),I(l,kv.STAT_EVENT,R=>{R.stat===Jh.PROXY?fe(yn,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Jh.NOPROXY&&fe(yn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.bo()},0),A}}function Mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(n){return new ww(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wy{constructor(e,t,r=1e3,i=1.5,o=6e4){this.li=e,this.timerId=t,this.Qo=r,this.Ko=i,this.$o=o,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,t-r);i>0&&fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t,r,i,o,s,l,c){this.li=e,this.Yo=r,this.Zo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new wy(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===t&&this.I_(r,i)},r=>{e(()=>{const i=new xe(ie.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(e,t){const r=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gE extends Ey{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=Cw(this.serializer,e),r=function(o){if(!("targetChange"in o))return Te.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?Te.min():s.readTime?Wr(s.readTime):Te.min()}(e);return this.listener.R_(t,r)}V_(e){const t={};t.database=ud(this.serializer),t.addTarget=function(o,s){let l;const c=s.target;if(l=rd(c)?{documents:Tw(o,c)}:{query:Rw(o,c).ct},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=fy(o,s.resumeToken);const h=od(o,s.expectedCount);h!==null&&(l.expectedCount=h)}else if(s.snapshotVersion.compareTo(Te.min())>0){l.readTime=Sc(o,s.snapshotVersion.toTimestamp());const h=od(o,s.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=Dw(this.serializer,e);r&&(t.labels=r),this.c_(t)}m_(e){const t={};t.database=ud(this.serializer),t.removeTarget=e,this.c_(t)}}class vE extends Ey{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=Sw(e.writeResults,e.commitTime),r=Wr(e.commitTime);return this.listener.y_(r,t)}w_(){const e={};e.database=ud(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Iw(this.serializer,r))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Oo(e,ad(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new xe(ie.UNKNOWN,o.toString())})}ko(e,t,r,i,o){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.ko(e,ad(t,r),i,s,l,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(ie.UNKNOWN,s.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class mE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(vi(t),this.C_=!1):fe("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=o,this.Q_.uo(s=>{r.enqueueAndForget(async()=>{Qo(this)&&(fe("RemoteStore","Restarting streams for network reachability change."),await async function(c){const h=Re(c);h.k_.add(4),await ku(h),h.K_.set("Unknown"),h.k_.delete(4),await Gc(h)}(this))})}),this.K_=new mE(r,i)}}async function Gc(n){if(Qo(n))for(const e of n.q_)await e(!0)}async function ku(n){for(const e of n.q_)await e(!1)}function Ay(n,e){const t=Re(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),Xd(t)?$d(t):fs(t).s_()&&Wd(t,e))}function Gd(n,e){const t=Re(n),r=fs(t);t.B_.delete(e),r.s_()&&Cy(t,e),t.B_.size===0&&(r.s_()?r.a_():Qo(t)&&t.K_.set("Unknown"))}function Wd(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}fs(n).V_(e)}function Cy(n,e){n.U_.xe(e),fs(n).m_(e)}function $d(n){n.U_=new yw({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),fs(n).start(),n.K_.F_()}function Xd(n){return Qo(n)&&!fs(n).i_()&&n.B_.size>0}function Qo(n){return Re(n).k_.size===0}function Iy(n){n.U_=void 0}async function xE(n){n.K_.set("Online")}async function wE(n){n.B_.forEach((e,t)=>{Wd(n,e)})}async function EE(n,e){Iy(n),Xd(n)?(n.K_.O_(e),$d(n)):n.K_.set("Unknown")}async function AE(n,e,t){if(n.K_.set("Online"),e instanceof cy&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.B_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.B_.delete(l),i.U_.removeTarget(l))}(n,e)}catch(r){fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Rc(n,r)}else if(e instanceof vc?n.U_.$e(e):e instanceof ly?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Te.min()))try{const r=await xy(n.localStore);t.compareTo(r)>=0&&await function(o,s){const l=o.U_.it(s);return l.targetChanges.forEach((c,h)=>{if(c.resumeToken.approximateByteSize()>0){const g=o.B_.get(h);g&&o.B_.set(h,g.withResumeToken(c.resumeToken,s))}}),l.targetMismatches.forEach((c,h)=>{const g=o.B_.get(c);if(!g)return;o.B_.set(c,g.withResumeToken(hn.EMPTY_BYTE_STRING,g.snapshotVersion)),Cy(o,c);const v=new Ki(g.target,c,h,g.sequenceNumber);Wd(o,v)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t)}catch(r){fe("RemoteStore","Failed to raise snapshot:",r),await Rc(n,r)}}async function Rc(n,e,t){if(!cs(e))throw e;n.k_.add(1),await ku(n),n.K_.set("Offline"),t||(t=()=>xy(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{fe("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await Gc(n)})}function Sy(n,e){return e().catch(t=>Rc(n,t,e))}async function Wc(n){const e=Re(n),t=ao(e);let r=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;CE(e);)try{const i=await sE(e.localStore,r);if(i===null){e.L_.length===0&&t.a_();break}r=i.batchId,IE(e,i)}catch(i){await Rc(e,i)}Ty(e)&&Ry(e)}function CE(n){return Qo(n)&&n.L_.length<10}function IE(n,e){n.L_.push(e);const t=ao(n);t.s_()&&t.f_&&t.g_(e.mutations)}function Ty(n){return Qo(n)&&!ao(n).i_()&&n.L_.length>0}function Ry(n){ao(n).start()}async function SE(n){ao(n).w_()}async function TE(n){const e=ao(n);for(const t of n.L_)e.g_(t.mutations)}async function RE(n,e,t){const r=n.L_.shift(),i=Bd.from(r,e,t);await Sy(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await Wc(n)}async function OE(n,e){e&&ao(n).f_&&await async function(r,i){if(function(s){return pw(s)&&s!==ie.ABORTED}(i.code)){const o=r.L_.shift();ao(r).__(),await Sy(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Wc(r)}}(n,e),Ty(n)&&Ry(n)}async function mg(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),fe("RemoteStore","RemoteStore received new credentials");const r=Qo(t);t.k_.add(3),await ku(t),r&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await Gc(t)}async function DE(n,e){const t=Re(n);e?(t.k_.delete(2),await Gc(t)):e||(t.k_.add(2),await ku(t),t.K_.set("Unknown"))}function fs(n){return n.W_||(n.W_=function(t,r,i){const o=Re(t);return o.b_(),new gE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:xE.bind(null,n),mo:wE.bind(null,n),po:EE.bind(null,n),R_:AE.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),Xd(n)?$d(n):n.K_.set("Unknown")):(await n.W_.stop(),Iy(n))})),n.W_}function ao(n){return n.G_||(n.G_=function(t,r,i){const o=Re(t);return o.b_(),new vE(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:SE.bind(null,n),po:OE.bind(null,n),p_:TE.bind(null,n),y_:RE.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await Wc(n)):(await n.G_.stop(),n.L_.length>0&&(fe("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Zi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){const s=Date.now()+r,l=new Kd(e,t,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new xe(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qd(n,e){if(vi("AsyncQueue",`${e}: ${n}`),cs(n))return new xe(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{static emptySet(e){return new Za(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=du(),this.sortedSet=new wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Za)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Za;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(){this.z_=new wt(Ce.comparator)}track(e){const t=e.doc.key,r=this.z_.get(t);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(t,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(t):e.type===1&&r.type===2?this.z_=this.z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Se():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class os{constructor(e,t,r,i,o,s,l,c,h){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=h}static fromInitialDocuments(e,t,r,i,o){const s=[];return t.forEach(l=>{s.push({type:0,doc:l})}),new os(e,t,Za.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class NE{constructor(){this.queries=xg(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,r){const i=Re(t),o=i.queries;i.queries=xg(),o.forEach((s,l)=>{for(const c of l.J_)c.onError(r)})})(this,new xe(ie.ABORTED,"Firestore shutting down"))}}function xg(){return new qo(n=>qv(n),Bc)}async function bE(n,e){const t=Re(n);let r=3;const i=e.query;let o=t.queries.get(i);o?!o.Y_()&&e.Z_()&&(r=2):(o=new PE,r=e.Z_()?0:1);try{switch(r){case 0:o.H_=await t.onListen(i,!0);break;case 1:o.H_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(s){const l=qd(s,`Initialization of query '${Xa(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,o),o.J_.push(e),e.ea(t.onlineState),o.H_&&e.ta(o.H_)&&Yd(t)}async function ME(n,e){const t=Re(n),r=e.query;let i=3;const o=t.queries.get(r);if(o){const s=o.J_.indexOf(e);s>=0&&(o.J_.splice(s,1),o.J_.length===0?i=e.Z_()?0:1:!o.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function kE(n,e){const t=Re(n);let r=!1;for(const i of e){const o=i.query,s=t.queries.get(o);if(s){for(const l of s.J_)l.ta(i)&&(r=!0);s.H_=i}}r&&Yd(t)}function LE(n,e,t){const r=Re(n),i=r.queries.get(e);if(i)for(const o of i.J_)o.onError(t);r.queries.delete(e)}function Yd(n){n.X_.forEach(e=>{e.next()})}var cd,wg;(wg=cd||(cd={})).na="default",wg.Cache="cache";class FE{constructor(e,t,r){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new os(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const r=t!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=os.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==cd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy{constructor(e){this.key=e}}class Dy{constructor(e){this.key=e}}class BE{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Me(),this.mutatedKeys=Me(),this.Va=Yv(e),this.ma=new Za(this.Va)}get fa(){return this.da}ga(e,t){const r=t?t.pa:new _g,i=t?t.ma:this.ma;let o=t?t.mutatedKeys:this.mutatedKeys,s=i,l=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((g,v)=>{const m=i.get(g),_=Vc(this.query,v)?v:null,A=!!m&&this.mutatedKeys.has(m.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let R=!1;m&&_?m.data.isEqual(_.data)?A!==I&&(r.track({type:3,doc:_}),R=!0):this.ya(m,_)||(r.track({type:2,doc:_}),R=!0,(c&&this.Va(_,c)>0||h&&this.Va(_,h)<0)&&(l=!0)):!m&&_?(r.track({type:0,doc:_}),R=!0):m&&!_&&(r.track({type:1,doc:m}),R=!0,(c||h)&&(l=!0)),R&&(_?(s=s.add(_),o=I?o.add(g):o.delete(g)):(s=s.delete(g),o=o.delete(g)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const g=this.query.limitType==="F"?s.last():s.first();s=s.delete(g.key),o=o.delete(g.key),r.track({type:1,doc:g})}return{ma:s,pa:r,ss:l,mutatedKeys:o}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const o=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort((g,v)=>function(_,A){const I=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Se()}};return I(_)-I(A)}(g.type,v.type)||this.Va(g.doc,v.doc)),this.wa(r),i=i!=null&&i;const l=t&&!i?this.Sa():[],c=this.Ra.size===0&&this.current&&!i?1:0,h=c!==this.Aa;return this.Aa=c,s.length!==0||h?{snapshot:new os(this.query,e.ma,o,s,e.mutatedKeys,c===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:l}:{ba:l}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new _g,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Me(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const t=[];return e.forEach(r=>{this.Ra.has(r)||t.push(new Dy(r))}),this.Ra.forEach(r=>{e.has(r)||t.push(new Oy(r))}),t}va(e){this.da=e.ds,this.Ra=Me();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return os.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class VE{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class UE{constructor(e){this.key=e,this.Fa=!1}}class zE{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new qo(l=>qv(l),Bc),this.Oa=new Map,this.Na=new Set,this.La=new wt(Ce.comparator),this.Ba=new Map,this.ka=new zd,this.qa={},this.Qa=new Map,this.Ka=is.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function HE(n,e,t=!0){const r=Ly(n);let i;const o=r.xa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Ca()):i=await Py(r,e,t,!0),i}async function jE(n,e){const t=Ly(n);await Py(t,e,!0,!1)}async function Py(n,e,t,r){const i=await uE(n.localStore,Gr(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t);let l;return r&&(l=await GE(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&Ay(n.remoteStore,i),l}async function GE(n,e,t,r,i){n.Ua=(v,m,_)=>async function(I,R,L,P){let F=R.view.ga(L);F.ss&&(F=await gg(I.localStore,R.query,!1).then(({documents:D})=>R.view.ga(D,F)));const z=P&&P.targetChanges.get(R.targetId),q=P&&P.targetMismatches.get(R.targetId)!=null,Q=R.view.applyChanges(F,I.isPrimaryClient,z,q);return Ag(I,R.targetId,Q.ba),Q.snapshot}(n,v,m,_);const o=await gg(n.localStore,e,!0),s=new BE(e,o.ds),l=s.ga(o.documents),c=Mu.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),h=s.applyChanges(l,n.isPrimaryClient,c);Ag(n,t,h.ba);const g=new VE(e,t,s);return n.xa.set(e,g),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),h.snapshot}async function WE(n,e,t){const r=Re(n),i=r.xa.get(e),o=r.Oa.get(i.targetId);if(o.length>1)return r.Oa.set(i.targetId,o.filter(s=>!Bc(s,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ld(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&Gd(r.remoteStore,i.targetId),fd(r,i.targetId)}).catch(ls)):(fd(r,i.targetId),await ld(r.localStore,i.targetId,!0))}async function $E(n,e){const t=Re(n),r=t.xa.get(e),i=t.Oa.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Gd(t.remoteStore,r.targetId))}async function XE(n,e,t){const r=eA(n);try{const i=await function(s,l){const c=Re(s),h=Gt.now(),g=l.reduce((_,A)=>_.add(A.key),Me());let v,m;return c.persistence.runTransaction("Locally write mutations","readwrite",_=>{let A=yi(),I=Me();return c.hs.getEntries(_,g).next(R=>{A=R,A.forEach((L,P)=>{P.isValidDocument()||(I=I.add(L))})}).next(()=>c.localDocuments.getOverlayedDocuments(_,A)).next(R=>{v=R;const L=[];for(const P of l){const F=lw(P,v.get(P.key).overlayedDocument);F!=null&&L.push(new Yo(P.key,F,Hv(F.value.mapValue),di.exists(!0)))}return c.mutationQueue.addMutationBatch(_,h,L,l)}).next(R=>{m=R;const L=R.applyToLocalDocumentSet(v,I);return c.documentOverlayCache.saveOverlays(_,R.batchId,L)})}).then(()=>({batchId:m.batchId,changes:Zv(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,c){let h=s.qa[s.currentUser.toKey()];h||(h=new wt(Le)),h=h.insert(l,c),s.qa[s.currentUser.toKey()]=h}(r,i.batchId,t),await Lu(r,i.changes),await Wc(r.remoteStore)}catch(i){const o=qd(i,"Failed to persist write");t.reject(o)}}async function Ny(n,e){const t=Re(n);try{const r=await oE(t.localStore,e);e.targetChanges.forEach((i,o)=>{const s=t.Ba.get(o);s&&(Je(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Fa=!0:i.modifiedDocuments.size>0?Je(s.Fa):i.removedDocuments.size>0&&(Je(s.Fa),s.Fa=!1))}),await Lu(t,r,e)}catch(r){await ls(r)}}function Eg(n,e,t){const r=Re(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.xa.forEach((o,s)=>{const l=s.view.ea(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const c=Re(s);c.onlineState=l;let h=!1;c.queries.forEach((g,v)=>{for(const m of v.J_)m.ea(l)&&(h=!0)}),h&&Yd(c)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KE(n,e,t){const r=Re(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Ba.get(e),o=i&&i.key;if(o){let s=new wt(Ce.comparator);s=s.insert(o,xn.newNoDocument(o,Te.min()));const l=Me().add(o),c=new Hc(Te.min(),new Map,new wt(Le),s,l);await Ny(r,c),r.La=r.La.remove(o),r.Ba.delete(e),Qd(r)}else await ld(r.localStore,e,!1).then(()=>fd(r,e,t)).catch(ls)}async function qE(n,e){const t=Re(n),r=e.batch.batchId;try{const i=await iE(t.localStore,e);My(t,r,null),by(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Lu(t,i)}catch(i){await ls(i)}}async function YE(n,e,t){const r=Re(n);try{const i=await function(s,l){const c=Re(s);return c.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let g;return c.mutationQueue.lookupMutationBatch(h,l).next(v=>(Je(v!==null),g=v.keys(),c.mutationQueue.removeMutationBatch(h,v))).next(()=>c.mutationQueue.performConsistencyCheck(h)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(h,g,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,g)).next(()=>c.localDocuments.getDocuments(h,g))})}(r.localStore,e);My(r,e,t),by(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Lu(r,i)}catch(i){await ls(i)}}function by(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function My(n,e,t){const r=Re(n);let i=r.qa[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function fd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Oa.get(e))n.xa.delete(r),t&&n.Ma.Wa(r,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(r=>{n.ka.containsKey(r)||ky(n,r)})}function ky(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(Gd(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),Qd(n))}function Ag(n,e,t){for(const r of t)r instanceof Oy?(n.ka.addReference(r.key,e),QE(n,r)):r instanceof Dy?(fe("SyncEngine","Document no longer in limbo: "+r.key),n.ka.removeReference(r.key,e),n.ka.containsKey(r.key)||ky(n,r.key)):Se()}function QE(n,e){const t=e.key,r=t.path.canonicalString();n.La.get(t)||n.Na.has(r)||(fe("SyncEngine","New document in limbo: "+t),n.Na.add(r),Qd(n))}function Qd(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new Ce(yt.fromString(e)),r=n.Ka.next();n.Ba.set(r,new UE(t)),n.La=n.La.insert(t,r),Ay(n.remoteStore,new Ki(Gr(Ld(t.path)),r,"TargetPurposeLimboResolution",Mc.oe))}}async function Lu(n,e,t){const r=Re(n),i=[],o=[],s=[];r.xa.isEmpty()||(r.xa.forEach((l,c)=>{s.push(r.Ua(c,e,t).then(h=>{var g;if((h||t)&&r.isPrimaryClient){const v=h?!h.fromCache:(g=t==null?void 0:t.targetChanges.get(c.targetId))===null||g===void 0?void 0:g.current;r.sharedClientState.updateQueryState(c.targetId,v?"current":"not-current")}if(h){i.push(h);const v=jd.zi(c.targetId,h);o.push(v)}}))}),await Promise.all(s),r.Ma.R_(i),await async function(c,h){const g=Re(c);try{await g.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>J.forEach(h,m=>J.forEach(m.Wi,_=>g.persistence.referenceDelegate.addReference(v,m.targetId,_)).next(()=>J.forEach(m.Gi,_=>g.persistence.referenceDelegate.removeReference(v,m.targetId,_)))))}catch(v){if(!cs(v))throw v;fe("LocalStore","Failed to update sequence numbers: "+v)}for(const v of h){const m=v.targetId;if(!v.fromCache){const _=g.us.get(m),A=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(A);g.us=g.us.insert(m,I)}}}(r.localStore,o))}async function ZE(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){fe("SyncEngine","User change. New user:",e.toKey());const r=await _y(t.localStore,e);t.currentUser=e,function(o,s){o.Qa.forEach(l=>{l.forEach(c=>{c.reject(new xe(ie.CANCELLED,s))})}),o.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Lu(t,r.Ts)}}function JE(n,e){const t=Re(n),r=t.Ba.get(e);if(r&&r.Fa)return Me().add(r.key);{let i=Me();const o=t.Oa.get(e);if(!o)return i;for(const s of o){const l=t.xa.get(s);i=i.unionWith(l.view.fa)}return i}}function Ly(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ny.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=JE.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KE.bind(null,e),e.Ma.R_=kE.bind(null,e.eventManager),e.Ma.Wa=LE.bind(null,e.eventManager),e}function eA(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=qE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YE.bind(null,e),e}class Oc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return rE(this.persistence,new tE,e.initialUser,this.serializer)}ja(e){return new my(Hd.ei,this.serializer)}za(e){return new cE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oc.provider={build:()=>new Oc};class tA extends Oc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){Je(this.persistence.referenceDelegate instanceof Tc);const r=this.persistence.referenceDelegate.garbageCollector;return new Uw(r,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new my(r=>Tc.ei(r,t),this.serializer)}}class hd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Eg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZE.bind(null,this.syncEngine),await DE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new NE}()}createDatastore(e){const t=jc(e.databaseInfo.databaseId),r=function(o){return new pE(o)}(e.databaseInfo);return function(o,s,l,c){return new yE(o,s,l,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,s,l){return new _E(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Eg(this.syncEngine,t,0),function(){return yg.p()?new yg:new fE}())}createSyncEngine(e,t){return function(i,o,s,l,c,h,g){const v=new zE(i,o,s,l,c,h);return g&&(v.$a=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const o=Re(i);fe("RemoteStore","RemoteStore shutting down."),o.k_.add(5),await ku(o),o.Q_.shutdown(),o.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}hd.provider={build:()=>new hd};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=_n.UNAUTHENTICATED,this.clientId=Vv.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{fe("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(fe("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=qd(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function kh(n,e){n.asyncQueue.verifyOperationInProgress(),fe("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await _y(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function Cg(n,e){n.asyncQueue.verifyOperationInProgress();const t=await iA(n);fe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mg(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mg(e.remoteStore,i)),n._onlineComponents=e}async function iA(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe("FirestoreClient","Using user provided OfflineComponentProvider");try{await kh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===ie.FAILED_PRECONDITION||i.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;es("Error using user provided cache. Falling back to memory cache: "+t),await kh(n,new Oc)}}else fe("FirestoreClient","Using default OfflineComponentProvider"),await kh(n,new tA(void 0));return n._offlineComponents}async function Fy(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe("FirestoreClient","Using user provided OnlineComponentProvider"),await Cg(n,n._uninitializedComponentsProvider._online)):(fe("FirestoreClient","Using default OnlineComponentProvider"),await Cg(n,new hd))),n._onlineComponents}function oA(n){return Fy(n).then(e=>e.syncEngine)}async function aA(n){const e=await Fy(n),t=e.eventManager;return t.onListen=HE.bind(null,e.syncEngine),t.onUnlisten=WE.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=jE.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=$E.bind(null,e.syncEngine),t}function sA(n,e,t={}){const r=new Zi;return n.asyncQueue.enqueueAndForget(async()=>function(o,s,l,c,h){const g=new nA({next:m=>{g.eu(),s.enqueueAndForget(()=>ME(o,v));const _=m.docs.has(l);!_&&m.fromCache?h.reject(new xe(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&c&&c.source==="server"?h.reject(new xe(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(m)},error:m=>h.reject(m)}),v=new FE(Ld(l.path),g,{includeMetadataChanges:!0,ua:!0});return bE(o,v)}(await aA(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ig=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(n,e,t){if(!t)throw new xe(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uA(n,e,t,r){if(e===!0&&r===!0)throw new xe(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Sg(n){if(!Ce.isDocumentKey(n))throw new xe(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tg(n){if(Ce.isDocumentKey(n))throw new xe(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Zd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Se()}function Dc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Zd(n);throw new xe(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new xe(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new xe(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=By((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new xe(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $c{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Rg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new xe(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new xe(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Rg(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new px;switch(r.type){case"firstParty":return new mx(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new xe(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=Ig.get(t);r&&(fe("ComponentProvider","Removing Datastore"),Ig.delete(t),r.terminate())}(this),Promise.resolve()}}function lA(n,e,t,r={}){var i;const o=(n=Dc(n,$c))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&es("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=_n.MOCK_USER;else{l=wv(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const h=r.mockUserToken.sub||r.mockUserToken.user_id;if(!h)throw new xe(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new _n(h)}n._authCredentials=new gx(new Bv(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jd(this.firestore,e,this._query)}}class lr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ji(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new lr(this.firestore,e,this._key)}}class Ji extends Jd{constructor(e,t,r){super(e,t,Ld(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new lr(this.firestore,null,new Ce(e))}withConverter(e){return new Ji(this.firestore,e,this._path)}}function cA(n,e,...t){if(n=pi(n),Vy("collection","path",e),n instanceof $c){const r=yt.fromString(e,...t);return Tg(r),new Ji(n,null,r)}{if(!(n instanceof lr||n instanceof Ji))throw new xe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return Tg(r),new Ji(n.firestore,null,r)}}function Uy(n,e,...t){if(n=pi(n),arguments.length===1&&(e=Vv.newId()),Vy("doc","path",e),n instanceof $c){const r=yt.fromString(e,...t);return Sg(r),new lr(n,null,new Ce(r))}{if(!(n instanceof lr||n instanceof Ji))throw new xe(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(yt.fromString(e,...t));return Sg(r),new lr(n.firestore,n instanceof Ji?n.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new wy(this,"async_queue_retry"),this.fu=()=>{const r=Mh();r&&fe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const t=Mh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Mh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Zi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!cs(e))throw e;fe("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw vi("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const i=Kd.createAndSchedule(this,e,t,r,o=>this.Su(o));return this.du.push(i),i}pu(){this.Au&&Se()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}class e1 extends $c{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Og,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Og(e),this._firestoreClient=void 0,await e}}}function fA(n,e){const t=typeof n=="object"?n:Ov(),r=typeof n=="string"?n:"(default)",i=Sv(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=_v("firestore");o&&lA(i,...o)}return i}function zy(n){if(n._terminated)throw new xe(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hA(n),n._firestoreClient}function hA(n){var e,t,r;const i=n._freezeSettings(),o=function(l,c,h,g){return new bx(l,c,h,g.host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,By(g.experimentalLongPollingOptions),g.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new rA(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this._byteString=e}static fromBase64String(e){try{return new as(hn.fromBase64String(e))}catch(t){throw new xe(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new as(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new xe(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Le(this._lat,e._lat)||Le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=/^__.*__$/;class pA{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Yo(e,this.data,this.fieldMask,t,this.fieldTransforms):new bu(e,this.data,t,this.fieldTransforms)}}function Hy(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Se()}}class o1{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Fu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new o1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Lu(e),i}Bu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return Pc(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Hy(this.Mu)&&dA.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class gA{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||jc(e)}$u(e,t,r,i=!1){return new o1({Mu:e,methodName:t,Ku:r,path:cn.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function vA(n){const e=n._freezeSettings(),t=jc(n._databaseId);return new gA(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yA(n,e,t,r,i,o={}){const s=n.$u(o.merge||o.mergeFields?2:0,e,t,i);$y("Data must be an object, but it was:",s,r);const l=Gy(r,s);let c,h;if(o.merge)c=new Dr(s.fieldMask),h=s.fieldTransforms;else if(o.mergeFields){const g=[];for(const v of o.mergeFields){const m=mA(e,v,t);if(!s.contains(m))throw new xe(ie.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);xA(g,m)||g.push(m)}c=new Dr(g),h=s.fieldTransforms.filter(v=>c.covers(v.field))}else c=null,h=s.fieldTransforms;return new pA(new sr(l),c,h)}class a1 extends n1{_toFieldTransform(e){return new ow(e.path,new Du)}isEqual(e){return e instanceof a1}}function jy(n,e){if(Wy(n=pi(n)))return $y("Unsupported field value:",e,n),Gy(n,e);if(n instanceof n1)return function(r,i){if(!Hy(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let c=jy(l,i.ku(s));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=pi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nw(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Gt.fromDate(r);return{timestampValue:Sc(i.serializer,o)}}if(r instanceof Gt){const o=new Gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Sc(i.serializer,o)}}if(r instanceof r1)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof as)return{bytesValue:fy(i.serializer,r._byteString)};if(r instanceof lr){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.qu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Ud(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof i1)return function(s,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(c=>{if(typeof c!="number")throw l.qu("VectorValues must only contain numeric values.");return Fd(l.serializer,c)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Zd(r)}`)}(n,e)}function Gy(n,e){const t={};return Uv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ko(n,(r,i)=>{const o=jy(i,e.Ou(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Wy(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Gt||n instanceof r1||n instanceof as||n instanceof lr||n instanceof n1||n instanceof i1)}function $y(n,e,t){if(!Wy(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Zd(t);throw r==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+r)}}function mA(n,e,t){if((e=pi(e))instanceof t1)return e._internalPath;if(typeof e=="string")return Xy(n,e);throw Pc("Field path arguments must be of type string or ",n,!1,void 0,t)}const _A=new RegExp("[~\\*/\\[\\]]");function Xy(n,e,t){if(e.search(_A)>=0)throw Pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new t1(...e.split("."))._internalPath}catch{throw Pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Pc(n,e,t,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||s)&&(c+=" (found",o&&(c+=` in field ${r}`),s&&(c+=` in document ${i}`),c+=")"),new xe(ie.INVALID_ARGUMENT,l+n+c)}function xA(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new lr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wA extends Ky{data(){return super.data()}}function qy(n,e){return typeof e=="string"?Xy(n,e):e instanceof t1?e._internalPath:e._delegate._internalPath}class EA{convertValue(e,t="none"){switch(oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(io(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Se()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ko(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;const o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>Tt(s.doubleValue));return new i1(o)}convertGeoPoint(e){return new r1(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Lc(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const t=ro(e);return new Gt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=yt.fromString(e);Je(yy(r));const i=new Ru(r.get(1),r.get(3)),o=new Ce(r.popFirst(5));return i.isEqual(t)||vi(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yy extends Ky{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new IA(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(qy("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class IA extends Yy{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(n){n=Dc(n,lr);const e=Dc(n.firestore,e1);return sA(zy(e),n._key).then(t=>DA(e,n,t))}class TA extends EA{constructor(e){super(),this.firestore=e}convertBytes(e){return new as(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new lr(this.firestore,null,t)}}function RA(n,e){const t=Dc(n.firestore,e1),r=Uy(n),i=AA(n.converter,e);return OA(t,[yA(vA(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,di.exists(!1))]).then(()=>r)}function OA(n,e){return function(r,i){const o=new Zi;return r.asyncQueue.enqueueAndForget(async()=>XE(await oA(r),i,o)),o.promise}(zy(n),e)}function DA(n,e,t){const r=t.docs.get(e._key),i=new TA(n);return new Yy(n,i,e._key,r,new CA(t.hasPendingWrites,t.fromCache),e.converter)}function PA(){return new a1("serverTimestamp")}(function(e,t=!0){(function(i){us=i})(Tv),Cu(new Ja("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new e1(new vx(r.getProvider("auth-internal")),new xx(r.getProvider("app-check-internal")),function(h,g){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(h.options.projectId,g)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Qi($p,"4.7.5",e),Qi($p,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="firebasestorage.googleapis.com",Zy="storageBucket",NA=2*60*1e3,bA=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct extends Xo{constructor(e,t,r=0){super(Lh(e),`Firebase Storage: ${t} (${Lh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ct.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Lh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var At;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(At||(At={}));function Lh(n){return"storage/"+n}function s1(){const n="An unknown error occurred, please check the error payload for server response.";return new Ct(At.UNKNOWN,n)}function MA(n){return new Ct(At.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function kA(n){return new Ct(At.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function LA(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ct(At.UNAUTHENTICATED,n)}function FA(){return new Ct(At.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function BA(n){return new Ct(At.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function VA(){return new Ct(At.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function UA(){return new Ct(At.CANCELED,"User canceled the upload/download.")}function zA(n){return new Ct(At.INVALID_URL,"Invalid URL '"+n+"'.")}function HA(n){return new Ct(At.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function jA(){return new Ct(At.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Zy+"' property when initializing the app?")}function GA(){return new Ct(At.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function WA(){return new Ct(At.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function $A(n){return new Ct(At.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function dd(n){return new Ct(At.INVALID_ARGUMENT,n)}function Jy(){return new Ct(At.APP_DELETED,"The Firebase app was deleted.")}function XA(n){return new Ct(At.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Au(n,e){return new Ct(At.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function uu(n){throw new Ct(At.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=qn.makeFromUrl(e,t)}catch{return new qn(e,"")}if(r.path==="")return r;throw HA(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(z){z.path.charAt(z.path.length-1)==="/"&&(z.path_=z.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+i+s,"i"),c={bucket:1,path:3};function h(z){z.path_=decodeURIComponent(z.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${v}/${g}/b/${i}/o${m}`,"i"),A={bucket:1,path:3},I=t===Qy?"(?:storage.googleapis.com|storage.cloud.google.com)":t,R="([^?#]*)",L=new RegExp(`^https?://${I}/${i}/${R}`,"i"),F=[{regex:l,indices:c,postModify:o},{regex:_,indices:A,postModify:h},{regex:L,indices:{bucket:1,path:2},postModify:h}];for(let z=0;z<F.length;z++){const q=F[z],Q=q.regex.exec(e);if(Q){const D=Q[q.indices.bucket];let T=Q[q.indices.path];T||(T=""),r=new qn(D,T),q.postModify(r);break}}if(r==null)throw zA(e);return r}}class KA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(n,e,t){let r=1,i=null,o=null,s=!1,l=0;function c(){return l===2}let h=!1;function g(...R){h||(h=!0,e.apply(null,R))}function v(R){i=setTimeout(()=>{i=null,n(_,c())},R)}function m(){o&&clearTimeout(o)}function _(R,...L){if(h){m();return}if(R){m(),g.call(null,R,...L);return}if(c()||s){m(),g.call(null,R,...L);return}r<64&&(r*=2);let F;l===1?(l=2,F=0):F=(r+Math.random())*1e3,v(F)}let A=!1;function I(R){A||(A=!0,m(),!h&&(i!==null?(R||(l=2),clearTimeout(i),v(0)):R||(l=1)))}return v(0),o=setTimeout(()=>{s=!0,I(!0)},t),I}function YA(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(n){return n!==void 0}function ZA(n){return typeof n=="object"&&!Array.isArray(n)}function u1(n){return typeof n=="string"||n instanceof String}function Dg(n){return l1()&&n instanceof Blob}function l1(){return typeof Blob<"u"}function Pg(n,e,t,r){if(r<e)throw dd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw dd(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function em(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var jo;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(jo||(jo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,o=e.indexOf(n)!==-1;return t||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(e,t,r,i,o,s,l,c,h,g,v,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=h,this.progressCallback_=g,this.connectionFactory_=v,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,A)=>{this.resolve_=_,this.reject_=A,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new oc(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const c=l.loaded,h=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,h)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===jo.NO_ERROR,c=o.getStatus();if(!l||JA(c,this.additionalRetryCodes_)&&this.retry){const g=o.getErrorCode()===jo.ABORT;r(!1,new oc(!1,null,g));return}const h=this.successCodes_.indexOf(c)!==-1;r(!0,new oc(h,o))})},t=(r,i)=>{const o=this.resolve_,s=this.reject_,l=i.connection;if(i.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());QA(c)?o(c):o()}catch(c){s(c)}else if(l!==null){const c=s1();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(i.canceled){const c=this.appDelete_?Jy():UA();s(c)}else{const c=VA();s(c)}};this.canceled_?t(!1,new oc(!1,null,!0)):this.backoffId_=qA(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class oc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function t3(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function n3(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function r3(n,e){e&&(n["X-Firebase-GMPID"]=e)}function i3(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function o3(n,e,t,r,i,o,s=!0){const l=em(n.urlParams),c=n.url+l,h=Object.assign({},n.headers);return r3(h,e),t3(h,t),n3(h,o),i3(h,r),new e3(c,n.method,h,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function s3(...n){const e=a3();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(l1())return new Blob(n);throw new Ct(At.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function u3(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(n){if(typeof atob>"u")throw $A("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Fh{constructor(e,t){this.data=e,this.contentType=t||null}}function c3(n,e){switch(n){case Hr.RAW:return new Fh(tm(e));case Hr.BASE64:case Hr.BASE64URL:return new Fh(nm(n,e));case Hr.DATA_URL:return new Fh(h3(e),d3(e))}throw s1()}function tm(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=n.charCodeAt(++t);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function f3(n){let e;try{e=decodeURIComponent(n)}catch{throw Au(Hr.DATA_URL,"Malformed data URL.")}return tm(e)}function nm(n,e){switch(n){case Hr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw Au(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Hr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw Au(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=l3(e)}catch(i){throw i.message.includes("polyfill")?i:Au(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class rm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Au(Hr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=p3(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function h3(n){const e=new rm(n);return e.base64?nm(Hr.BASE64,e.rest):f3(e.rest)}function d3(n){return new rm(n).contentType}function p3(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,t){let r=0,i="";Dg(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Dg(this.data_)){const r=this.data_,i=u3(r,e,t);return i===null?null:new Xi(i)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Xi(r,!0)}}static getBlob(...e){if(l1()){const t=e.map(r=>r instanceof Xi?r.data_:r);return new Xi(s3.apply(null,t))}else{const t=e.map(s=>u1(s)?c3(Hr.RAW,s).data:s.data_);let r=0;t.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return t.forEach(s=>{for(let l=0;l<s.length;l++)i[o++]=s[l]}),new Xi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(n){let e;try{e=JSON.parse(n)}catch{return null}return ZA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g3(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function v3(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function om(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y3(n,e){return e}class Sn{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||y3}}let ac=null;function m3(n){return!u1(n)||n.length<2?n:om(n)}function am(){if(ac)return ac;const n=[];n.push(new Sn("bucket")),n.push(new Sn("generation")),n.push(new Sn("metageneration")),n.push(new Sn("name","fullPath",!0));function e(o,s){return m3(s)}const t=new Sn("name");t.xform=e,n.push(t);function r(o,s){return s!==void 0?Number(s):s}const i=new Sn("size");return i.xform=r,n.push(i),n.push(new Sn("timeCreated")),n.push(new Sn("updated")),n.push(new Sn("md5Hash",null,!0)),n.push(new Sn("cacheControl",null,!0)),n.push(new Sn("contentDisposition",null,!0)),n.push(new Sn("contentEncoding",null,!0)),n.push(new Sn("contentLanguage",null,!0)),n.push(new Sn("contentType",null,!0)),n.push(new Sn("metadata","customMetadata",!0)),ac=n,ac}function _3(n,e){function t(){const r=n.bucket,i=n.fullPath,o=new qn(r,i);return e._makeStorageReference(o)}Object.defineProperty(n,"ref",{get:t})}function x3(n,e,t){const r={};r.type="file";const i=t.length;for(let o=0;o<i;o++){const s=t[o];r[s.local]=s.xform(r,e[s.server])}return _3(r,n),r}function sm(n,e,t){const r=im(e);return r===null?null:x3(n,r,t)}function w3(n,e,t,r){const i=im(e);if(i===null||!u1(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(h=>{const g=n.bucket,v=n.fullPath,m="/b/"+s(g)+"/o/"+s(v),_=c1(m,t,r),A=em({alt:"media",token:h});return _+A})[0]}function E3(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(t[o.server]=n[o.local])}return JSON.stringify(t)}class um{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(n){if(!n)throw s1()}function A3(n,e){function t(r,i){const o=sm(n,i,e);return lm(o!==null),o}return t}function C3(n,e){function t(r,i){const o=sm(n,i,e);return lm(o!==null),w3(o,i,n.host,n._protocol)}return t}function cm(n){function e(t,r){let i;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?i=FA():i=LA():t.getStatus()===402?i=kA(n.bucket):t.getStatus()===403?i=BA(n.path):i=r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}return e}function I3(n){const e=cm(n);function t(r,i){let o=e(r,i);return r.getStatus()===404&&(o=MA(n.path)),o.serverResponse=i.serverResponse,o}return t}function S3(n,e,t){const r=e.fullServerUrl(),i=c1(r,n.host,n._protocol),o="GET",s=n.maxOperationRetryTime,l=new um(i,o,C3(n,t),s);return l.errorHandler=I3(e),l}function T3(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function R3(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=T3(null,e)),r}function O3(n,e,t,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let F="";for(let z=0;z<2;z++)F=F+Math.random().toString().slice(2);return F}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const h=R3(e,r,i),g=E3(h,t),v="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+g+`\r
--`+c+`\r
Content-Type: `+h.contentType+`\r
\r
`,m=`\r
--`+c+"--",_=Xi.getBlob(v,r,m);if(_===null)throw GA();const A={name:h.fullPath},I=c1(o,n.host,n._protocol),R="POST",L=n.maxUploadRetryTime,P=new um(I,R,A3(n,t),L);return P.urlParams=A,P.headers=s,P.body=_.uploadData(),P.errorHandler=cm(e),P}class D3{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=jo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=jo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw uu("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uu("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uu("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uu("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uu("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class P3 extends D3{initXhr(){this.xhr_.responseType="text"}}function fm(){return new P3}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,t){this._service=e,t instanceof qn?this._location=t:this._location=qn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new $o(e,t)}get root(){const e=new qn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return om(this._location.path)}get storage(){return this._service}get parent(){const e=g3(this._location.path);if(e===null)return null;const t=new qn(this._location.bucket,e);return new $o(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw XA(e)}}function N3(n,e,t){n._throwIfRoot("uploadBytes");const r=O3(n.storage,n._location,am(),new Xi(e,!0),t);return n.storage.makeRequestWithTokens(r,fm).then(i=>({metadata:i,ref:n}))}function b3(n){n._throwIfRoot("getDownloadURL");const e=S3(n.storage,n._location,am());return n.storage.makeRequestWithTokens(e,fm).then(t=>{if(t===null)throw WA();return t})}function M3(n,e){const t=v3(n._location.path,e),r=new qn(n._location.bucket,t);return new $o(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(n){return/^[A-Za-z]+:\/\//.test(n)}function L3(n,e){return new $o(n,e)}function hm(n,e){if(n instanceof f1){const t=n;if(t._bucket==null)throw jA();const r=new $o(t,t._bucket);return e!=null?hm(r,e):r}else return e!==void 0?M3(n,e):n}function F3(n,e){if(e&&k3(e)){if(n instanceof f1)return L3(n,e);throw dd("To use ref(service, url), the first argument must be a Storage instance.")}else return hm(n,e)}function Ng(n,e){const t=e==null?void 0:e[Zy];return t==null?null:qn.makeFromBucketSpec(t,n)}function B3(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken=typeof i=="string"?i:wv(i,n.app.options.projectId))}class f1{constructor(e,t,r,i,o){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=Qy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NA,this._maxUploadRetryTime=bA,this._requests=new Set,i!=null?this._bucket=qn.makeFromBucketSpec(i,this._host):this._bucket=Ng(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=qn.makeFromBucketSpec(this._url,e):this._bucket=Ng(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new $o(this,e)}_makeRequest(e,t,r,i,o=!0){if(this._deleted)return new KA(Jy());{const s=o3(e,this._appId,r,i,t,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const bg="@firebase/storage",Mg="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="storage";function V3(n,e,t){return n=pi(n),N3(n,e,t)}function U3(n){return n=pi(n),b3(n)}function z3(n,e){return n=pi(n),F3(n,e)}function H3(n=Ov(),e){n=pi(n);const r=Sv(n,dm).getImmediate({identifier:e}),i=_v("storage");return i&&j3(r,...i),r}function j3(n,e,t,r={}){B3(n,e,t,r)}function G3(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new f1(t,r,i,e,Tv)}function W3(){Cu(new Ja(dm,G3,"PUBLIC").setMultipleInstances(!0)),Qi(bg,Mg,""),Qi(bg,Mg,"esm2017")}W3();const $3="_container_1c34l_1",X3="_form_1c34l_15",K3="_nfcButton_1c34l_39",q3="_scanButton_1c34l_39",Y3="_selfieButton_1c34l_39",Q3="_submitButton_1c34l_39",Z3="_scannerContainer_1c34l_65",J3="_scanner_1c34l_65",Ga={container:$3,form:X3,nfcButton:K3,scanButton:q3,selfieButton:Y3,submitButton:Q3,scannerContainer:Z3,scanner:J3};function eC(n,e){var t=Object.setPrototypeOf;t?t(n,e):n.__proto__=e}function tC(n,e){e===void 0&&(e=n.constructor);var t=Error.captureStackTrace;t&&t(n,e)}var nC=function(){var n=function(t,r){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])},n(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rC=function(n){nC(e,n);function e(t,r){var i=this.constructor,o=n.call(this,t,r)||this;return Object.defineProperty(o,"name",{value:i.name,enumerable:!1,configurable:!0}),eC(o,i.prototype),tC(o),o}return e}(Error),iC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zn=function(n){iC(e,n);function e(t){t===void 0&&(t=void 0);var r=n.call(this,t)||this;return r.message=t,r}return e.prototype.getKind=function(){var t=this.constructor;return t.kind},e.kind="Exception",e}(rC),oC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Tr=function(n){oC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArgumentException",e}(zn),aC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Ae=function(n){aC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(zn),sC=function(){function n(e){if(this.binarizer=e,e===null)throw new Ae("Binarizer must be non-null.")}return n.prototype.getWidth=function(){return this.binarizer.getWidth()},n.prototype.getHeight=function(){return this.binarizer.getHeight()},n.prototype.getBlackRow=function(e,t){return this.binarizer.getBlackRow(e,t)},n.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},n.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},n.prototype.crop=function(e,t,r,i){var o=this.binarizer.getLuminanceSource().crop(e,t,r,i);return new n(this.binarizer.createBinarizer(o))},n.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},n.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new n(this.binarizer.createBinarizer(e))},n.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new n(this.binarizer.createBinarizer(e))},n.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},n}(),uC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),en=function(n){uC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(zn),lC=function(){function n(e){this.source=e}return n.prototype.getLuminanceSource=function(){return this.source},n.prototype.getWidth=function(){return this.source.getWidth()},n.prototype.getHeight=function(){return this.source.getHeight()},n}(),lt=function(){function n(){}return n.arraycopy=function(e,t,r,i,o){for(;o--;)r[i++]=e[t++]},n.currentTimeMillis=function(){return Date.now()},n}(),cC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),h1=function(n){cC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(zn),fC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),kg=function(n){fC(e,n);function e(t,r){t===void 0&&(t=void 0),r===void 0&&(r=void 0);var i=n.call(this,r)||this;return i.index=t,i.message=r,i}return e.kind="ArrayIndexOutOfBoundsException",e}(h1),hC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ht=function(){function n(){}return n.fill=function(e,t){for(var r=0,i=e.length;r<i;r++)e[r]=t},n.fillWithin=function(e,t,r,i){n.rangeCheck(e.length,t,r);for(var o=t;o<r;o++)e[o]=i},n.rangeCheck=function(e,t,r){if(t>r)throw new Ae("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new kg(t);if(r>e)throw new kg(r)},n.asList=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},n.create=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Array.from({length:t}).fill(r)})},n.createInt32Array=function(e,t,r){var i=Array.from({length:e});return i.map(function(o){return Int32Array.from({length:t}).fill(r)})},n.equals=function(e,t){if(!e||!t||!e.length||!t.length||e.length!==t.length)return!1;for(var r=0,i=e.length;r<i;r++)if(e[r]!==t[r])return!1;return!0},n.hashCode=function(e){var t,r;if(e===null)return 0;var i=1;try{for(var o=hC(e),s=o.next();!s.done;s=o.next()){var l=s.value;i=31*i+l}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.fillUint8Array=function(e,t){for(var r=0;r!==e.length;r++)e[r]=t},n.copyOf=function(e,t){return e.slice(0,t)},n.copyOfUint8Array=function(e,t){if(e.length<=t){var r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)},n.copyOfRange=function(e,t,r){var i=r-t,o=new Int32Array(i);return lt.arraycopy(e,t,o,0,i),o},n.binarySearch=function(e,t,r){r===void 0&&(r=n.numberComparator);for(var i=0,o=e.length-1;i<=o;){var s=o+i>>1,l=r(t,e[s]);if(l>0)i=s+1;else if(l<0)o=s-1;else return s}return-i-1},n.numberComparator=function(e,t){return e-t},n}(),be=function(){function n(){}return n.numberOfTrailingZeros=function(e){var t;if(e===0)return 32;var r=31;return t=e<<16,t!==0&&(r-=16,e=t),t=e<<8,t!==0&&(r-=8,e=t),t=e<<4,t!==0&&(r-=4,e=t),t=e<<2,t!==0&&(r-=2,e=t),r-(e<<1>>>31)},n.numberOfLeadingZeros=function(e){if(e===0)return 32;var t=1;return e>>>16||(t+=16,e<<=16),e>>>24||(t+=8,e<<=8),e>>>28||(t+=4,e<<=4),e>>>30||(t+=2,e<<=2),t-=e>>>31,t},n.toHexString=function(e){return e.toString(16)},n.toBinaryString=function(e){return String(parseInt(String(e),2))},n.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},n.truncDivision=function(e,t){return Math.trunc(e/t)},n.parseInt=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n.MIN_VALUE_32_BITS=-2147483648,n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),tn=function(){function n(e,t){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,t==null?this.bits=n.makeArray(e):this.bits=t)}return n.prototype.getSize=function(){return this.size},n.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},n.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var t=n.makeArray(e);lt.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}},n.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},n.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},n.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},n.prototype.getNextSet=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=r[i]}var l=i*32+be.numberOfTrailingZeros(o);return l>t?t:l},n.prototype.getNextUnset=function(e){var t=this.size;if(e>=t)return t;var r=this.bits,i=Math.floor(e/32),o=~r[i];o&=~((1<<(e&31))-1);for(var s=r.length;o===0;){if(++i===s)return t;o=~r[i]}var l=i*32+be.numberOfTrailingZeros(o);return l>t?t:l},n.prototype.setBulk=function(e,t){this.bits[Math.floor(e/32)]=t},n.prototype.setRange=function(e,t){if(t<e||e<0||t>this.size)throw new Ae;if(t!==e){t--;for(var r=Math.floor(e/32),i=Math.floor(t/32),o=this.bits,s=r;s<=i;s++){var l=s>r?0:e&31,c=s<i?31:t&31,h=(2<<c)-(1<<l);o[s]|=h}}},n.prototype.clear=function(){for(var e=this.bits.length,t=this.bits,r=0;r<e;r++)t[r]=0},n.prototype.isRange=function(e,t,r){if(t<e||e<0||t>this.size)throw new Ae;if(t===e)return!0;t--;for(var i=Math.floor(e/32),o=Math.floor(t/32),s=this.bits,l=i;l<=o;l++){var c=l>i?0:e&31,h=l<o?31:t&31,g=(2<<h)-(1<<c)&4294967295;if((s[l]&g)!==(r?g:0))return!1}return!0},n.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},n.prototype.appendBits=function(e,t){if(t<0||t>32)throw new Ae("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(var r=t;r>0;r--)this.appendBit((e>>r-1&1)===1)},n.prototype.appendBitArray=function(e){var t=e.size;this.ensureCapacity(this.size+t);for(var r=0;r<t;r++)this.appendBit(e.get(r))},n.prototype.xor=function(e){if(this.size!==e.size)throw new Ae("Sizes don't match");for(var t=this.bits,r=0,i=t.length;r<i;r++)t[r]^=e.bits[r]},n.prototype.toBytes=function(e,t,r,i){for(var o=0;o<i;o++){for(var s=0,l=0;l<8;l++)this.get(e)&&(s|=1<<7-l),e++;t[r+o]=s}},n.prototype.getBitArray=function(){return this.bits},n.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,i=this.bits,o=0;o<r;o++){var s=i[o];s=s>>1&1431655765|(s&1431655765)<<1,s=s>>2&858993459|(s&858993459)<<2,s=s>>4&252645135|(s&252645135)<<4,s=s>>8&16711935|(s&16711935)<<8,s=s>>16&65535|(s&65535)<<16,e[t-o]=s}if(this.size!==r*32){for(var l=r*32-this.size,c=e[0]>>>l,o=1;o<r;o++){var h=e[o];c|=h<<32-l,e[o-1]=c,c=h>>>l}e[r-1]=c}this.bits=e},n.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.size===t.size&&Ht.equals(this.bits,t.bits)},n.prototype.hashCode=function(){return 31*this.size+Ht.hashCode(this.bits)},n.prototype.toString=function(){for(var e="",t=0,r=this.size;t<r;t++)t&7||(e+=" "),e+=this.get(t)?"X":".";return e},n.prototype.clone=function(){return new n(this.size,this.bits.slice())},n.prototype.toArray=function(){for(var e=[],t=0,r=this.size;t<r;t++)e.push(this.get(t));return e},n}(),pd;(function(n){n[n.OTHER=0]="OTHER",n[n.PURE_BARCODE=1]="PURE_BARCODE",n[n.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",n[n.TRY_HARDER=3]="TRY_HARDER",n[n.CHARACTER_SET=4]="CHARACTER_SET",n[n.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",n[n.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",n[n.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",n[n.ASSUME_GS1=8]="ASSUME_GS1",n[n.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",n[n.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",n[n.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS"})(pd||(pd={}));const mt=pd;var dC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ue=function(n){dC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(zn),pC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tt;(function(n){n[n.Cp437=0]="Cp437",n[n.ISO8859_1=1]="ISO8859_1",n[n.ISO8859_2=2]="ISO8859_2",n[n.ISO8859_3=3]="ISO8859_3",n[n.ISO8859_4=4]="ISO8859_4",n[n.ISO8859_5=5]="ISO8859_5",n[n.ISO8859_6=6]="ISO8859_6",n[n.ISO8859_7=7]="ISO8859_7",n[n.ISO8859_8=8]="ISO8859_8",n[n.ISO8859_9=9]="ISO8859_9",n[n.ISO8859_10=10]="ISO8859_10",n[n.ISO8859_11=11]="ISO8859_11",n[n.ISO8859_13=12]="ISO8859_13",n[n.ISO8859_14=13]="ISO8859_14",n[n.ISO8859_15=14]="ISO8859_15",n[n.ISO8859_16=15]="ISO8859_16",n[n.SJIS=16]="SJIS",n[n.Cp1250=17]="Cp1250",n[n.Cp1251=18]="Cp1251",n[n.Cp1252=19]="Cp1252",n[n.Cp1256=20]="Cp1256",n[n.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",n[n.UTF8=22]="UTF8",n[n.ASCII=23]="ASCII",n[n.Big5=24]="Big5",n[n.GB18030=25]="GB18030",n[n.EUC_KR=26]="EUC_KR"})(tt||(tt={}));var Ut=function(){function n(e,t,r){for(var i,o,s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];this.valueIdentifier=e,this.name=r,typeof t=="number"?this.values=Int32Array.from([t]):this.values=t,this.otherEncodingNames=s,n.VALUE_IDENTIFIER_TO_ECI.set(e,this),n.NAME_TO_ECI.set(r,this);for(var c=this.values,h=0,g=c.length;h!==g;h++){var v=c[h];n.VALUES_TO_ECI.set(v,this)}try{for(var m=pC(s),_=m.next();!_.done;_=m.next()){var A=_.value;n.NAME_TO_ECI.set(A,this)}}catch(I){i={error:I}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}}return n.prototype.getValueIdentifier=function(){return this.valueIdentifier},n.prototype.getName=function(){return this.name},n.prototype.getValue=function(){return this.values[0]},n.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new ue("incorect value");var t=n.VALUES_TO_ECI.get(e);if(t===void 0)throw new ue("incorect value");return t},n.getCharacterSetECIByName=function(e){var t=n.NAME_TO_ECI.get(e);if(t===void 0)throw new ue("incorect value");return t},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.getName()===t.getName()},n.VALUE_IDENTIFIER_TO_ECI=new Map,n.VALUES_TO_ECI=new Map,n.NAME_TO_ECI=new Map,n.Cp437=new n(tt.Cp437,Int32Array.from([0,2]),"Cp437"),n.ISO8859_1=new n(tt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),n.ISO8859_2=new n(tt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),n.ISO8859_3=new n(tt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),n.ISO8859_4=new n(tt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),n.ISO8859_5=new n(tt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),n.ISO8859_6=new n(tt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),n.ISO8859_7=new n(tt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),n.ISO8859_8=new n(tt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),n.ISO8859_9=new n(tt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),n.ISO8859_10=new n(tt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),n.ISO8859_11=new n(tt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),n.ISO8859_13=new n(tt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),n.ISO8859_14=new n(tt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),n.ISO8859_15=new n(tt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),n.ISO8859_16=new n(tt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),n.SJIS=new n(tt.SJIS,20,"SJIS","Shift_JIS"),n.Cp1250=new n(tt.Cp1250,21,"Cp1250","windows-1250"),n.Cp1251=new n(tt.Cp1251,22,"Cp1251","windows-1251"),n.Cp1252=new n(tt.Cp1252,23,"Cp1252","windows-1252"),n.Cp1256=new n(tt.Cp1256,24,"Cp1256","windows-1256"),n.UnicodeBigUnmarked=new n(tt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),n.UTF8=new n(tt.UTF8,26,"UTF8","UTF-8"),n.ASCII=new n(tt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),n.Big5=new n(tt.Big5,28,"Big5"),n.GB18030=new n(tt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),n.EUC_KR=new n(tt.EUC_KR,30,"EUC_KR","EUC-KR"),n}(),gC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yc=function(n){gC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(zn),cr=function(){function n(){}return n.decode=function(e,t){var r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)},n.shouldDecodeOnFallback=function(e){return!n.isBrowser()&&e==="ISO-8859-1"},n.encode=function(e,t){var r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},n.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},n.encodingName=function(e){return typeof e=="string"?e:e.getName()},n.encodingCharacterSet=function(e){return e instanceof Ut?e:Ut.getCharacterSetECIByName(e)},n.decodeFallback=function(e,t){var r=this.encodingCharacterSet(t);if(n.isDecodeFallbackSupported(r)){for(var i="",o=0,s=e.length;o<s;o++){var l=e[o].toString(16);l.length<2&&(l="0"+l),i+="%"+l}return decodeURIComponent(i)}if(r.equals(Ut.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new yc("Encoding "+this.encodingName(t)+" not supported by fallback.")},n.isDecodeFallbackSupported=function(e){return e.equals(Ut.UTF8)||e.equals(Ut.ISO8859_1)||e.equals(Ut.ASCII)},n.encodeFallback=function(e){for(var t=btoa(unescape(encodeURIComponent(e))),r=t.split(""),i=[],o=0;o<r.length;o++)i.push(r[o].charCodeAt(0));return new Uint8Array(i)},n}(),ze=function(){function n(){}return n.castAsNonUtf8Char=function(e,t){t===void 0&&(t=null);var r=t?t.getName():this.ISO88591;return cr.decode(new Uint8Array([e]),r)},n.guessEncoding=function(e,t){if(t!=null&&t.get(mt.CHARACTER_SET)!==void 0)return t.get(mt.CHARACTER_SET).toString();for(var r=e.length,i=!0,o=!0,s=!0,l=0,c=0,h=0,g=0,v=0,m=0,_=0,A=0,I=0,R=0,L=0,P=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,F=0;F<r&&(i||o||s);F++){var z=e[F]&255;s&&(l>0?z&128?l--:s=!1:z&128&&(z&64?(l++,z&32?(l++,z&16?(l++,z&8?s=!1:g++):h++):c++):s=!1)),i&&(z>127&&z<160?i=!1:z>159&&(z<192||z===215||z===247)&&L++),o&&(v>0?z<64||z===127||z>252?o=!1:v--:z===128||z===160||z>239?o=!1:z>160&&z<224?(m++,A=0,_++,_>I&&(I=_)):z>127?(v++,_=0,A++,A>R&&(R=A)):(_=0,A=0))}return s&&l>0&&(s=!1),o&&v>0&&(o=!1),s&&(P||c+h+g>0)?n.UTF8:o&&(n.ASSUME_SHIFT_JIS||I>=3||R>=3)?n.SHIFT_JIS:i&&o?I===2&&m===2||L*10>=r?n.SHIFT_JIS:n.ISO88591:i?n.ISO88591:o?n.SHIFT_JIS:s?n.UTF8:n.PLATFORM_DEFAULT_ENCODING},n.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var i=-1;function o(l,c,h,g,v,m){if(l==="%%")return"%";if(t[++i]!==void 0){l=g?parseInt(g.substr(1)):void 0;var _=v?parseInt(v.substr(1)):void 0,A;switch(m){case"s":A=t[i];break;case"c":A=t[i][0];break;case"f":A=parseFloat(t[i]).toFixed(l);break;case"p":A=parseFloat(t[i]).toPrecision(l);break;case"e":A=parseFloat(t[i]).toExponential(l);break;case"x":A=parseInt(t[i]).toString(_||16);break;case"d":A=parseFloat(parseInt(t[i],_||10).toPrecision(l)).toFixed(0);break}A=typeof A=="object"?JSON.stringify(A):(+A).toString(_);for(var I=parseInt(h),R=h&&h[0]+""=="0"?"0":" ";A.length<I;)A=c!==void 0?A+R:R+A;return A}}var s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)},n.getBytes=function(e,t){return cr.encode(e,t)},n.getCharCode=function(e,t){return t===void 0&&(t=0),e.charCodeAt(t)},n.getCharAt=function(e){return String.fromCharCode(e)},n.SHIFT_JIS=Ut.SJIS.getName(),n.GB2312="GB2312",n.ISO88591=Ut.ISO8859_1.getName(),n.EUC_JP="EUC_JP",n.UTF8=Ut.UTF8.getName(),n.PLATFORM_DEFAULT_ENCODING=n.UTF8,n.ASSUME_SHIFT_JIS=!1,n}(),De=function(){function n(e){e===void 0&&(e=""),this.value=e}return n.prototype.enableDecoding=function(e){return this.encoding=e,this},n.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ze.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},n.prototype.appendChars=function(e,t,r){for(var i=t;t<t+r;i++)this.append(e[i]);return this},n.prototype.length=function(){return this.value.length},n.prototype.charAt=function(e){return this.value.charAt(e)},n.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},n.prototype.setCharAt=function(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)},n.prototype.substring=function(e,t){return this.value.substring(e,t)},n.prototype.setLengthToZero=function(){this.value=""},n.prototype.toString=function(){return this.value},n.prototype.insert=function(e,t){this.value=this.value.substring(0,e)+t+this.value.substring(e)},n}(),Kr=function(){function n(e,t,r,i){if(this.width=e,this.height=t,this.rowSize=r,this.bits=i,t==null&&(t=e),this.height=t,e<1||t<1)throw new Ae("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return n.parseFromBooleanArray=function(e){for(var t=e.length,r=e[0].length,i=new n(r,t),o=0;o<t;o++)for(var s=e[o],l=0;l<r;l++)s[l]&&i.set(l,o);return i},n.parseFromString=function(e,t,r){if(e===null)throw new Ae("stringRepresentation cannot be null");for(var i=new Array(e.length),o=0,s=0,l=-1,c=0,h=0;h<e.length;)if(e.charAt(h)===`
`||e.charAt(h)==="\r"){if(o>s){if(l===-1)l=o-s;else if(o-s!==l)throw new Ae("row lengths do not match");s=o,c++}h++}else if(e.substring(h,h+t.length)===t)h+=t.length,i[o]=!0,o++;else if(e.substring(h,h+r.length)===r)h+=r.length,i[o]=!1,o++;else throw new Ae("illegal character encountered: "+e.substring(h));if(o>s){if(l===-1)l=o-s;else if(o-s!==l)throw new Ae("row lengths do not match");c++}for(var g=new n(l,c),v=0;v<o;v++)i[v]&&g.set(Math.floor(v%l),Math.floor(v/l));return g},n.prototype.get=function(e,t){var r=t*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0},n.prototype.set=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295},n.prototype.unset=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)},n.prototype.flip=function(e,t){var r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295},n.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new Ae("input matrix dimensions do not match");for(var t=new tn(Math.floor(this.width/32)+1),r=this.rowSize,i=this.bits,o=0,s=this.height;o<s;o++)for(var l=o*r,c=e.getRow(o,t).getBitArray(),h=0;h<r;h++)i[l+h]^=c[h]},n.prototype.clear=function(){for(var e=this.bits,t=e.length,r=0;r<t;r++)e[r]=0},n.prototype.setRegion=function(e,t,r,i){if(t<0||e<0)throw new Ae("Left and top must be nonnegative");if(i<1||r<1)throw new Ae("Height and width must be at least 1");var o=e+r,s=t+i;if(s>this.height||o>this.width)throw new Ae("The region must fit inside the matrix");for(var l=this.rowSize,c=this.bits,h=t;h<s;h++)for(var g=h*l,v=e;v<o;v++)c[g+Math.floor(v/32)]|=1<<(v&31)&4294967295},n.prototype.getRow=function(e,t){t==null||t.getSize()<this.width?t=new tn(this.width):t.clear();for(var r=this.rowSize,i=this.bits,o=e*r,s=0;s<r;s++)t.setBulk(s*32,i[o+s]);return t},n.prototype.setRow=function(e,t){lt.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},n.prototype.rotate180=function(){for(var e=this.getWidth(),t=this.getHeight(),r=new tn(e),i=new tn(e),o=0,s=Math.floor((t+1)/2);o<s;o++)r=this.getRow(o,r),i=this.getRow(t-1-o,i),r.reverse(),i.reverse(),this.setRow(o,i),this.setRow(t-1-o,r)},n.prototype.getEnclosingRectangle=function(){for(var e=this.width,t=this.height,r=this.rowSize,i=this.bits,o=e,s=t,l=-1,c=-1,h=0;h<t;h++)for(var g=0;g<r;g++){var v=i[h*r+g];if(v!==0){if(h<s&&(s=h),h>c&&(c=h),g*32<o){for(var m=0;!(v<<31-m&4294967295);)m++;g*32+m<o&&(o=g*32+m)}if(g*32+31>l){for(var m=31;!(v>>>m);)m--;g*32+m>l&&(l=g*32+m)}}}return l<o||c<s?null:Int32Array.from([o,s,l-o+1,c-s+1])},n.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,t=this.bits,r=0;r<t.length&&t[r]===0;)r++;if(r===t.length)return null;for(var i=r/e,o=r%e*32,s=t[r],l=0;!(s<<31-l&4294967295);)l++;return o+=l,Int32Array.from([o,i])},n.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,t=this.bits,r=t.length-1;r>=0&&t[r]===0;)r--;if(r<0)return null;for(var i=Math.floor(r/e),o=Math.floor(r%e)*32,s=t[r],l=31;!(s>>>l);)l--;return o+=l,Int32Array.from([o,i])},n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.getRowSize=function(){return this.rowSize},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&Ht.equals(this.bits,t.bits)},n.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+Ht.hashCode(this.bits),e},n.prototype.toString=function(e,t,r){return e===void 0&&(e="X "),t===void 0&&(t="  "),r===void 0&&(r=`
`),this.buildToString(e,t,r)},n.prototype.buildToString=function(e,t,r){for(var i=new De,o=0,s=this.height;o<s;o++){for(var l=0,c=this.width;l<c;l++)i.append(this.get(l,o)?e:t);i.append(r)}return i.toString()},n.prototype.clone=function(){return new n(this.width,this.height,this.rowSize,this.bits.slice())},n}(),vC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Z=function(n){vC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(zn),yC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mC=function(n){yC(e,n);function e(t){var r=n.call(this,t)||this;return r.luminances=e.EMPTY,r.buckets=new Int32Array(e.LUMINANCE_BUCKETS),r}return e.prototype.getBlackRow=function(t,r){var i=this.getLuminanceSource(),o=i.getWidth();r==null||r.getSize()<o?r=new tn(o):r.clear(),this.initArrays(o);for(var s=i.getRow(t,this.luminances),l=this.buckets,c=0;c<o;c++)l[(s[c]&255)>>e.LUMINANCE_SHIFT]++;var h=e.estimateBlackPoint(l);if(o<3)for(var c=0;c<o;c++)(s[c]&255)<h&&r.set(c);else for(var g=s[0]&255,v=s[1]&255,c=1;c<o-1;c++){var m=s[c+1]&255;(v*4-g-m)/2<h&&r.set(c),g=v,v=m}return r},e.prototype.getBlackMatrix=function(){var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight(),o=new Kr(r,i);this.initArrays(r);for(var s=this.buckets,l=1;l<5;l++)for(var c=Math.floor(i*l/5),h=t.getRow(c,this.luminances),g=Math.floor(r*4/5),v=Math.floor(r/5);v<g;v++){var m=h[v]&255;s[m>>e.LUMINANCE_SHIFT]++}for(var _=e.estimateBlackPoint(s),A=t.getMatrix(),l=0;l<i;l++)for(var I=l*r,v=0;v<r;v++){var m=A[I+v]&255;m<_&&o.set(v,l)}return o},e.prototype.createBinarizer=function(t){return new e(t)},e.prototype.initArrays=function(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));for(var r=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)r[i]=0},e.estimateBlackPoint=function(t){for(var r=t.length,i=0,o=0,s=0,l=0;l<r;l++)t[l]>s&&(o=l,s=t[l]),t[l]>i&&(i=t[l]);for(var c=0,h=0,l=0;l<r;l++){var g=l-o,v=t[l]*g*g;v>h&&(c=l,h=v)}if(o>c){var m=o;o=c,c=m}if(c-o<=r/16)throw new Z;for(var _=c-1,A=-1,l=c-1;l>o;l--){var I=l-o,v=I*I*(c-l)*(i-t[l]);v>A&&(_=l,A=v)}return _<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(lC),_C=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xC=function(n){_C(e,n);function e(t){var r=n.call(this,t)||this;return r.matrix=null,r}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var t=this.getLuminanceSource(),r=t.getWidth(),i=t.getHeight();if(r>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var o=t.getMatrix(),s=r>>e.BLOCK_SIZE_POWER;r&e.BLOCK_SIZE_MASK&&s++;var l=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&l++;var c=e.calculateBlackPoints(o,s,l,r,i),h=new Kr(r,i);e.calculateThresholdForBlock(o,s,l,r,i,c,h),this.matrix=h}else this.matrix=n.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(t){return new e(t)},e.calculateThresholdForBlock=function(t,r,i,o,s,l,c){for(var h=s-e.BLOCK_SIZE,g=o-e.BLOCK_SIZE,v=0;v<i;v++){var m=v<<e.BLOCK_SIZE_POWER;m>h&&(m=h);for(var _=e.cap(v,2,i-3),A=0;A<r;A++){var I=A<<e.BLOCK_SIZE_POWER;I>g&&(I=g);for(var R=e.cap(A,2,r-3),L=0,P=-2;P<=2;P++){var F=l[_+P];L+=F[R-2]+F[R-1]+F[R]+F[R+1]+F[R+2]}var z=L/25;e.thresholdBlock(t,I,m,z,o,c)}}},e.cap=function(t,r,i){return t<r?r:t>i?i:t},e.thresholdBlock=function(t,r,i,o,s,l){for(var c=0,h=i*s+r;c<e.BLOCK_SIZE;c++,h+=s)for(var g=0;g<e.BLOCK_SIZE;g++)(t[h+g]&255)<=o&&l.set(r+g,i+c)},e.calculateBlackPoints=function(t,r,i,o,s){for(var l=s-e.BLOCK_SIZE,c=o-e.BLOCK_SIZE,h=new Array(i),g=0;g<i;g++){h[g]=new Int32Array(r);var v=g<<e.BLOCK_SIZE_POWER;v>l&&(v=l);for(var m=0;m<r;m++){var _=m<<e.BLOCK_SIZE_POWER;_>c&&(_=c);for(var A=0,I=255,R=0,L=0,P=v*o+_;L<e.BLOCK_SIZE;L++,P+=o){for(var F=0;F<e.BLOCK_SIZE;F++){var z=t[P+F]&255;A+=z,z<I&&(I=z),z>R&&(R=z)}if(R-I>e.MIN_DYNAMIC_RANGE)for(L++,P+=o;L<e.BLOCK_SIZE;L++,P+=o)for(var F=0;F<e.BLOCK_SIZE;F++)A+=t[P+F]&255}var q=A>>e.BLOCK_SIZE_POWER*2;if(R-I<=e.MIN_DYNAMIC_RANGE&&(q=I/2,g>0&&m>0)){var Q=(h[g-1][m]+2*h[g][m-1]+h[g-1][m-1])/4;I<Q&&(q=Q)}h[g][m]=q}}return h},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(mC),Xc=function(){function n(e,t){this.width=e,this.height=t}return n.prototype.getWidth=function(){return this.width},n.prototype.getHeight=function(){return this.height},n.prototype.isCropSupported=function(){return!1},n.prototype.crop=function(e,t,r,i){throw new yc("This luminance source does not support cropping.")},n.prototype.isRotateSupported=function(){return!1},n.prototype.rotateCounterClockwise=function(){throw new yc("This luminance source does not support rotation by 90 degrees.")},n.prototype.rotateCounterClockwise45=function(){throw new yc("This luminance source does not support rotation by 45 degrees.")},n.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),t=new De,r=0;r<this.height;r++){for(var i=this.getRow(r,e),o=0;o<this.width;o++){var s=i[o]&255,l=void 0;s<64?l="#":s<128?l="+":s<192?l=".":l=" ",t.append(l)}t.append(`
`)}return t.toString()},n}(),wC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),d1=function(n){wC(e,n);function e(t){var r=n.call(this,t.getWidth(),t.getHeight())||this;return r.delegate=t,r}return e.prototype.getRow=function(t,r){for(var i=this.delegate.getRow(t,r),o=this.getWidth(),s=0;s<o;s++)i[s]=255-(i[s]&255);return i},e.prototype.getMatrix=function(){for(var t=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r),o=0;o<r;o++)i[o]=255-(t[o]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(t,r,i,o){return new e(this.delegate.crop(t,r,i,o))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(Xc),EC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),AC=function(n){EC(e,n);function e(t,r){r===void 0&&(r=!1);var i=n.call(this,t.width,t.height)||this;return i.canvas=t,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(t,r),i}return e.makeBufferFromCanvasImageData=function(t,r){r===void 0&&(r=!1);var i=t.getContext("2d").getImageData(0,0,t.width,t.height);return e.toGrayscaleBuffer(i.data,t.width,t.height,r)},e.toGrayscaleBuffer=function(t,r,i,o){o===void 0&&(o=!1);var s=new Uint8ClampedArray(r*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!o)for(var l=0,c=0,h=t.length;l<h;l+=4,c++){var g=void 0,v=t[l+3];if(v===0)g=255;else{var m=t[l],_=t[l+1],A=t[l+2];g=306*m+601*_+117*A+512>>10}s[c]=g}else for(var l=0,c=0,I=t.length;l<I;l+=4,c++){var g=void 0,v=t[l+3];if(v===0)g=255;else{var m=t[l],_=t[l+1],A=t[l+2];g=306*m+601*_+117*A+512>>10}s[c]=255-g}return s},e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ae("Requested row is outside the image: "+t);var i=this.getWidth(),o=t*i;return r===null?r=this.buffer.slice(o,o+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(o,o+i))),r},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return n.prototype.crop.call(this,t,r,i,o),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement},e.prototype.rotate=function(t){var r=this.getTempCanvasElement(),i=r.getContext("2d"),o=t*e.DEGREE_TO_RADIANS,s=this.canvas.width,l=this.canvas.height,c=Math.ceil(Math.abs(Math.cos(o))*s+Math.abs(Math.sin(o))*l),h=Math.ceil(Math.abs(Math.sin(o))*s+Math.abs(Math.cos(o))*l);return r.width=c,r.height=h,i.translate(c/2,h/2),i.rotate(o),i.drawImage(this.canvas,s/-2,l/-2),this.buffer=e.makeBufferFromCanvasImageData(r),this},e.prototype.invert=function(){return new d1(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(Xc),CC=function(){function n(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}return n.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},n}(),Tn=function(n,e,t,r){function i(o){return o instanceof t?o:new t(function(s){s(o)})}return new(t||(t=Promise))(function(o,s){function l(g){try{h(r.next(g))}catch(v){s(v)}}function c(g){try{h(r.throw(g))}catch(v){s(v)}}function h(g){g.done?o(g.value):i(g.value).then(l,c)}h((r=r.apply(n,e||[])).next())})},Rn=function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(h){return function(g){return c([h,g])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(g){h=[6,g],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},IC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hs=function(){function n(e,t,r){t===void 0&&(t=500),this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(n.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),n.prototype.listVideoInputDevices=function(){return Tn(this,void 0,void 0,function(){var e,t,r,i,o,s,l,c,h,g,v,m;return Rn(this,function(_){switch(_.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=_.sent(),t=[];try{for(r=IC(e),i=r.next();!i.done;i=r.next())o=i.value,s=o.kind==="video"?"videoinput":o.kind,s==="videoinput"&&(l=o.deviceId||o.id,c=o.label||"Video device "+(t.length+1),h=o.groupId,g={deviceId:l,label:c,kind:s,groupId:h},t.push(g))}catch(A){v={error:A}}finally{try{i&&!i.done&&(m=r.return)&&m.call(r)}finally{if(v)throw v.error}}return[2,t]}})})},n.prototype.getVideoInputDevices=function(){return Tn(this,void 0,void 0,function(){var e;return Rn(this,function(t){switch(t.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=t.sent(),[2,e.map(function(r){return new CC(r.deviceId,r.label)})]}})})},n.prototype.findDeviceById=function(e){return Tn(this,void 0,void 0,function(){var t;return Rn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return t=r.sent(),t?[2,t.find(function(i){return i.deviceId===e})]:[2,null]}})})},n.prototype.decodeFromInputVideoDevice=function(e,t){return Tn(this,void 0,void 0,function(){return Rn(this,function(r){switch(r.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,t)];case 1:return[2,r.sent()]}})})},n.prototype.decodeOnceFromVideoDevice=function(e,t){return Tn(this,void 0,void 0,function(){var r,i;return Rn(this,function(o){switch(o.label){case 0:return this.reset(),e?r={deviceId:{exact:e}}:r={facingMode:"environment"},i={video:r},[4,this.decodeOnceFromConstraints(i,t)];case 1:return[2,o.sent()]}})})},n.prototype.decodeOnceFromConstraints=function(e,t){return Tn(this,void 0,void 0,function(){var r;return Rn(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=i.sent(),[4,this.decodeOnceFromStream(r,t)];case 2:return[2,i.sent()]}})})},n.prototype.decodeOnceFromStream=function(e,t){return Tn(this,void 0,void 0,function(){var r,i;return Rn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return r=o.sent(),[4,this.decodeOnce(r)];case 2:return i=o.sent(),[2,i]}})})},n.prototype.decodeFromInputVideoDeviceContinuously=function(e,t,r){return Tn(this,void 0,void 0,function(){return Rn(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,t,r)];case 1:return[2,i.sent()]}})})},n.prototype.decodeFromVideoDevice=function(e,t,r){return Tn(this,void 0,void 0,function(){var i,o;return Rn(this,function(s){switch(s.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},o={video:i},[4,this.decodeFromConstraints(o,t,r)];case 1:return[2,s.sent()]}})})},n.prototype.decodeFromConstraints=function(e,t,r){return Tn(this,void 0,void 0,function(){var i;return Rn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=o.sent(),[4,this.decodeFromStream(i,t,r)];case 2:return[2,o.sent()]}})})},n.prototype.decodeFromStream=function(e,t,r){return Tn(this,void 0,void 0,function(){var i;return Rn(this,function(o){switch(o.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,t)];case 1:return i=o.sent(),[4,this.decodeContinuously(i,r)];case 2:return[2,o.sent()]}})})},n.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},n.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},n.prototype.attachStreamToVideo=function(e,t){return Tn(this,void 0,void 0,function(){var r;return Rn(this,function(i){switch(i.label){case 0:return r=this.prepareVideoElement(t),this.addVideoSource(r,e),this.videoElement=r,this.stream=e,[4,this.playVideoOnLoadAsync(r)];case 1:return i.sent(),[2,r]}})})},n.prototype.playVideoOnLoadAsync=function(e){var t=this;return new Promise(function(r,i){return t.playVideoOnLoad(e,function(){return r()})})},n.prototype.playVideoOnLoad=function(e,t){var r=this;this.videoEndedListener=function(){return r.stopStreams()},this.videoCanPlayListener=function(){return r.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)},n.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},n.prototype.tryPlayVideo=function(e){return Tn(this,void 0,void 0,function(){return Rn(this,function(t){switch(t.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,e.play()];case 2:return t.sent(),[3,4];case 3:return t.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},n.prototype.getMediaElement=function(e,t){var r=document.getElementById(e);if(!r)throw new Tr("element with id '"+e+"' not found");if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new Tr("element with id '"+e+"' must be an "+t+" element");return r},n.prototype.decodeFromImage=function(e,t){if(!e&&!t)throw new Tr("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)},n.prototype.decodeFromVideo=function(e,t){if(!e&&!t)throw new Tr("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)},n.prototype.decodeFromVideoContinuously=function(e,t,r){if(e===void 0&&t===void 0)throw new Tr("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)},n.prototype.decodeFromImageElement=function(e){if(!e)throw new Tr("An image element must be provided.");this.reset();var t=this.prepareImageElement(e);this.imageElement=t;var r;return this.isImageLoaded(t)?r=this.decodeOnce(t,!1,!0):r=this._decodeOnLoadImage(t),r},n.prototype.decodeFromVideoElement=function(e){var t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)},n.prototype.decodeFromVideoElementContinuously=function(e,t){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)},n.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Tr("A video element must be provided.");this.reset();var t=this.prepareVideoElement(e);return this.videoElement=t,t},n.prototype.decodeFromImageUrl=function(e){if(!e)throw new Tr("An URL must be provided.");this.reset();var t=this.prepareImageElement();this.imageElement=t;var r=this._decodeOnLoadImage(t);return t.src=e,r},n.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Tr("An URL must be provided.");this.reset();var t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r},n.prototype.decodeFromVideoUrlContinuously=function(e,t){if(!e)throw new Tr("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(r,t);return r.src=e,i},n.prototype._decodeOnLoadImage=function(e){var t=this;return new Promise(function(r,i){t.imageLoadedListener=function(){return t.decodeOnce(e,!1,!0).then(r,i)},e.addEventListener("load",t.imageLoadedListener)})},n.prototype._decodeOnLoadVideo=function(e){return Tn(this,void 0,void 0,function(){return Rn(this,function(t){switch(t.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return t.sent(),[4,this.decodeOnce(e)];case 2:return[2,t.sent()]}})})},n.prototype._decodeOnLoadVideoContinuously=function(e,t){return Tn(this,void 0,void 0,function(){return Rn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),this.decodeContinuously(e,t),[2]}})})},n.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},n.prototype.prepareImageElement=function(e){var t;return typeof e>"u"&&(t=document.createElement("img"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t},n.prototype.prepareVideoElement=function(e){var t;return!e&&typeof document<"u"&&(t=document.createElement("video"),t.width=200,t.height=200),typeof e=="string"&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t},n.prototype.decodeOnce=function(e,t,r){var i=this;t===void 0&&(t=!0),r===void 0&&(r=!0),this._stopAsyncDecode=!1;var o=function(s,l){if(i._stopAsyncDecode){l(new Z("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var c=i.decode(e);s(c)}catch(m){var h=t&&m instanceof Z,g=m instanceof en||m instanceof ue,v=g&&r;if(h||v)return setTimeout(o,i._timeBetweenDecodingAttempts,s,l);l(m)}};return new Promise(function(s,l){return o(s,l)})},n.prototype.decodeContinuously=function(e,t){var r=this;this._stopContinuousDecode=!1;var i=function(){if(r._stopContinuousDecode){r._stopContinuousDecode=void 0;return}try{var o=r.decode(e);t(o,null),setTimeout(i,r.timeBetweenScansMillis)}catch(c){t(null,c);var s=c instanceof en||c instanceof ue,l=c instanceof Z;(s||l)&&setTimeout(i,r._timeBetweenDecodingAttempts)}};i()},n.prototype.decode=function(e){var t=this.createBinaryBitmap(e);return this.decodeBitmap(t)},n.prototype.createBinaryBitmap=function(e){this.getCaptureCanvasContext(e);var t=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),t=!0):this.drawImageOnCanvas(e);var r=this.getCaptureCanvas(e),i=new AC(r,t),o=new xC(i);return new sC(o)},n.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var t=this.getCaptureCanvas(e),r=void 0;try{r=t.getContext("2d",{willReadFrequently:!0})}catch{r=t.getContext("2d")}this.captureCanvasContext=r}return this.captureCanvasContext},n.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas},n.prototype.drawFrameOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.drawImageOnCanvas=function(e,t,r){t===void 0&&(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r===void 0&&(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)},n.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},n.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var t=document.createElement("canvas"),r,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=i+"px",t.width=r,t.height=i,t},n.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},n.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},n.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},n.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},n.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},n.prototype.addVideoSource=function(e,t){try{e.srcObject=t}catch{e.src=URL.createObjectURL(t)}},n.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},n}(),wn=function(){function n(e,t,r,i,o,s){r===void 0&&(r=t==null?0:8*t.length),s===void 0&&(s=lt.currentTimeMillis()),this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=i,this.format=o,this.timestamp=s,this.text=e,this.rawBytes=t,r==null?this.numBits=t==null?0:8*t.length:this.numBits=r,this.resultPoints=i,this.format=o,this.resultMetadata=null,s==null?this.timestamp=lt.currentTimeMillis():this.timestamp=s}return n.prototype.getText=function(){return this.text},n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.getBarcodeFormat=function(){return this.format},n.prototype.getResultMetadata=function(){return this.resultMetadata},n.prototype.putMetadata=function(e,t){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)},n.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},n.prototype.addResultPoints=function(e){var t=this.resultPoints;if(t===null)this.resultPoints=e;else if(e!==null&&e.length>0){var r=new Array(t.length+e.length);lt.arraycopy(t,0,r,0,t.length),lt.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.toString=function(){return this.text},n}(),gd;(function(n){n[n.AZTEC=0]="AZTEC",n[n.CODABAR=1]="CODABAR",n[n.CODE_39=2]="CODE_39",n[n.CODE_93=3]="CODE_93",n[n.CODE_128=4]="CODE_128",n[n.DATA_MATRIX=5]="DATA_MATRIX",n[n.EAN_8=6]="EAN_8",n[n.EAN_13=7]="EAN_13",n[n.ITF=8]="ITF",n[n.MAXICODE=9]="MAXICODE",n[n.PDF_417=10]="PDF_417",n[n.QR_CODE=11]="QR_CODE",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(gd||(gd={}));const _e=gd;var vd;(function(n){n[n.OTHER=0]="OTHER",n[n.ORIENTATION=1]="ORIENTATION",n[n.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",n[n.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",n[n.ISSUE_NUMBER=4]="ISSUE_NUMBER",n[n.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",n[n.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",n[n.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",n[n.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",n[n.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",n[n.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(vd||(vd={}));const fn=vd;var Kc=function(){function n(e,t,r,i,o,s){o===void 0&&(o=-1),s===void 0&&(s=-1),this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=i,this.structuredAppendSequenceNumber=o,this.structuredAppendParity=s,this.numBits=e==null?0:8*e.length}return n.prototype.getRawBytes=function(){return this.rawBytes},n.prototype.getNumBits=function(){return this.numBits},n.prototype.setNumBits=function(e){this.numBits=e},n.prototype.getText=function(){return this.text},n.prototype.getByteSegments=function(){return this.byteSegments},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getErrorsCorrected=function(){return this.errorsCorrected},n.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},n.prototype.getErasures=function(){return this.erasures},n.prototype.setErasures=function(e){this.erasures=e},n.prototype.getOther=function(){return this.other},n.prototype.setOther=function(e){this.other=e},n.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},n.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},n.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},n}(),gu=function(){function n(){}return n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ae;return this.logTable[e]},n.addOrSubtract=function(e,t){return e^t},n}(),eo=function(){function n(e,t){if(t.length===0)throw new Ae;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-i),lt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var t=this.coefficients,r;if(e===1){r=0;for(var i=0,o=t.length;i!==o;i++){var s=t[i];r=gu.addOrSubtract(r,s)}return r}r=t[0];for(var l=t.length,c=this.field,i=1;i<l;i++)r=gu.addOrSubtract(c.multiply(e,r),t[i]);return r},n.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new Ae("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;lt.arraycopy(r,0,o,0,s);for(var l=s;l<r.length;l++)o[l]=gu.addOrSubtract(t[l-s],r[l]);return new n(this.field,o)},n.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new Ae("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),l=this.field,c=0;c<r;c++)for(var h=t[c],g=0;g<o;g++)s[c+g]=gu.addOrSubtract(s[c+g],l.multiply(h,i[g]));return new n(l,s)},n.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var t=this.coefficients.length,r=this.field,i=new Int32Array(t),o=this.coefficients,s=0;s<t;s++)i[s]=r.multiply(o[s],e);return new n(r,i)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ae;if(t===0)return this.field.getZero();for(var r=this.coefficients,i=r.length,o=new Int32Array(i+e),s=this.field,l=0;l<i;l++)o[l]=s.multiply(r[l],t);return new n(s,o)},n.prototype.divide=function(e){if(!this.field.equals(e.field))throw new Ae("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new Ae("Divide by 0");for(var t=this.field,r=t.getZero(),i=this,o=e.getCoefficient(e.getDegree()),s=t.inverse(o);i.getDegree()>=e.getDegree()&&!i.isZero();){var l=i.getDegree()-e.getDegree(),c=t.multiply(i.getCoefficient(i.getDegree()),s),h=e.multiplyByMonomial(l,c),g=t.buildMonomial(l,c);r=r.addOrSubtract(g),i=i.addOrSubtract(h)}return[r,i]},n.prototype.toString=function(){for(var e="",t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),t===0||r!==1){var i=this.field.log(r);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}t!==0&&(t===1?e+="x":(e+="x^",e+=t))}}return e},n}(),SC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pm=function(n){SC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(zn),TC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Un=function(n){TC(e,n);function e(t,r,i){var o=n.call(this)||this;o.primitive=t,o.size=r,o.generatorBase=i;for(var s=new Int32Array(r),l=1,c=0;c<r;c++)s[c]=l,l*=2,l>=r&&(l^=t,l&=r-1);o.expTable=s;for(var h=new Int32Array(r),c=0;c<r-1;c++)h[s[c]]=c;return o.logTable=h,o.zero=new eo(o,Int32Array.from([0])),o.one=new eo(o,Int32Array.from([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ae;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new eo(this,i)},e.prototype.inverse=function(t){if(t===0)throw new pm;return this.expTable[this.size-this.logTable[t]-1]},e.prototype.multiply=function(t,r){return t===0||r===0?0:this.expTable[(this.logTable[t]+this.logTable[r])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+be.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(t){return t===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(gu),RC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sc=function(n){RC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(zn),OC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fu=function(n){OC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(zn),qc=function(){function n(e){this.field=e}return n.prototype.decode=function(e,t){for(var r=this.field,i=new eo(r,e),o=new Int32Array(t),s=!0,l=0;l<t;l++){var c=i.evaluateAt(r.exp(l+r.getGeneratorBase()));o[o.length-1-l]=c,c!==0&&(s=!1)}if(!s)for(var h=new eo(r,o),g=this.runEuclideanAlgorithm(r.buildMonomial(t,1),h,t),v=g[0],m=g[1],_=this.findErrorLocations(v),A=this.findErrorMagnitudes(m,_),l=0;l<_.length;l++){var I=e.length-1-r.log(_[l]);if(I<0)throw new sc("Bad error location");e[I]=Un.addOrSubtract(e[I],A[l])}},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=this.field,s=e,l=t,c=o.getZero(),h=o.getOne();l.getDegree()>=(r/2|0);){var g=s,v=c;if(s=l,c=h,s.isZero())throw new sc("r_{i-1} was zero");l=g;for(var m=o.getZero(),_=s.getCoefficient(s.getDegree()),A=o.inverse(_);l.getDegree()>=s.getDegree()&&!l.isZero();){var I=l.getDegree()-s.getDegree(),R=o.multiply(l.getCoefficient(l.getDegree()),A);m=m.addOrSubtract(o.buildMonomial(I,R)),l=l.addOrSubtract(s.multiplyByMonomial(I,R))}if(h=m.multiply(c).addOrSubtract(v),l.getDegree()>=s.getDegree())throw new Fu("Division algorithm failed to reduce polynomial?")}var L=h.getCoefficient(0);if(L===0)throw new sc("sigmaTilde(0) was zero");var P=o.inverse(L),F=h.multiplyScalar(P),z=l.multiplyScalar(P);return[F,z]},n.prototype.findErrorLocations=function(e){var t=e.getDegree();if(t===1)return Int32Array.from([e.getCoefficient(1)]);for(var r=new Int32Array(t),i=0,o=this.field,s=1;s<o.getSize()&&i<t;s++)e.evaluateAt(s)===0&&(r[i]=o.inverse(s),i++);if(i!==t)throw new sc("Error locator degree does not match number of roots");return r},n.prototype.findErrorMagnitudes=function(e,t){for(var r=t.length,i=new Int32Array(r),o=this.field,s=0;s<r;s++){for(var l=o.inverse(t[s]),c=1,h=0;h<r;h++)if(s!==h){var g=o.multiply(t[h],l),v=g&1?g&-2:g|1;c=o.multiply(c,v)}i[s]=o.multiply(e.evaluateAt(l),o.inverse(c)),o.getGeneratorBase()!==0&&(i[s]=o.multiply(i[s],l))}return i},n}(),sn;(function(n){n[n.UPPER=0]="UPPER",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.DIGIT=3]="DIGIT",n[n.PUNCT=4]="PUNCT",n[n.BINARY=5]="BINARY"})(sn||(sn={}));var Lg=function(){function n(){}return n.prototype.decode=function(e){this.ddata=e;var t=e.getBits(),r=this.extractBits(t),i=this.correctBits(r),o=n.convertBoolArrayToByteArray(i),s=n.getEncodedData(i),l=new Kc(o,s,null,null);return l.setNumBits(i.length),l},n.highLevelDecode=function(e){return this.getEncodedData(e)},n.getEncodedData=function(e){for(var t=e.length,r=sn.UPPER,i=sn.UPPER,o="",s=0;s<t;)if(i===sn.BINARY){if(t-s<5)break;var l=n.readCode(e,s,5);if(s+=5,l===0){if(t-s<11)break;l=n.readCode(e,s,11)+31,s+=11}for(var c=0;c<l;c++){if(t-s<8){s=t;break}var h=n.readCode(e,s,8);o+=ze.castAsNonUtf8Char(h),s+=8}i=r}else{var g=i===sn.DIGIT?4:5;if(t-s<g)break;var h=n.readCode(e,s,g);s+=g;var v=n.getCharacter(i,h);v.startsWith("CTRL_")?(r=i,i=n.getTable(v.charAt(5)),v.charAt(6)==="L"&&(r=i)):(o+=v,i=r)}return o},n.getTable=function(e){switch(e){case"L":return sn.LOWER;case"P":return sn.PUNCT;case"M":return sn.MIXED;case"D":return sn.DIGIT;case"B":return sn.BINARY;case"U":default:return sn.UPPER}},n.getCharacter=function(e,t){switch(e){case sn.UPPER:return n.UPPER_TABLE[t];case sn.LOWER:return n.LOWER_TABLE[t];case sn.MIXED:return n.MIXED_TABLE[t];case sn.PUNCT:return n.PUNCT_TABLE[t];case sn.DIGIT:return n.DIGIT_TABLE[t];default:throw new Fu("Bad table")}},n.prototype.correctBits=function(e){var t,r;this.ddata.getNbLayers()<=2?(r=6,t=Un.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=Un.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=Un.AZTEC_DATA_10):(r=12,t=Un.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),o=e.length/r;if(o<i)throw new ue;for(var s=e.length%r,l=new Int32Array(o),c=0;c<o;c++,s+=r)l[c]=n.readCode(e,s,r);try{var h=new qc(t);h.decode(l,o-i)}catch(R){throw new ue(R)}for(var g=(1<<r)-1,v=0,c=0;c<i;c++){var m=l[c];if(m===0||m===g)throw new ue;(m===1||m===g-1)&&v++}for(var _=new Array(i*r-v),A=0,c=0;c<i;c++){var m=l[c];if(m===1||m===g-1)_.fill(m>1,A,A+r-1),A+=r-1;else for(var I=r-1;I>=0;--I)_[A++]=(m&1<<I)!==0}return _},n.prototype.extractBits=function(e){var t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),i=(t?11:14)+r*4,o=new Int32Array(i),s=new Array(this.totalBitsInLayer(r,t));if(t)for(var l=0;l<o.length;l++)o[l]=l;else for(var c=i+1+2*be.truncDivision(be.truncDivision(i,2)-1,15),h=i/2,g=be.truncDivision(c,2),l=0;l<h;l++){var v=l+be.truncDivision(l,15);o[h-l-1]=g-v-1,o[h+l]=g+v+1}for(var l=0,m=0;l<r;l++){for(var _=(r-l)*4+(t?9:12),A=l*2,I=i-1-A,R=0;R<_;R++)for(var L=R*2,P=0;P<2;P++)s[m+L+P]=e.get(o[A+P],o[A+R]),s[m+2*_+L+P]=e.get(o[A+R],o[I-P]),s[m+4*_+L+P]=e.get(o[I-P],o[I-R]),s[m+6*_+L+P]=e.get(o[I-R],o[A+P]);m+=_*8}return s},n.readCode=function(e,t,r){for(var i=0,o=t;o<t+r;o++)i<<=1,e[o]&&(i|=1);return i},n.readByte=function(e,t){var r=e.length-t;return r>=8?n.readCode(e,t,8):n.readCode(e,t,r)<<8-r},n.convertBoolArrayToByteArray=function(e){for(var t=new Uint8Array((e.length+7)/8),r=0;r<t.length;r++)t[r]=n.readByte(e,8*r);return t},n.prototype.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],n.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],n.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],n.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],n.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],n}(),Xe=function(){function n(){}return n.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},n.distance=function(e,t,r,i){var o=e-r,s=t-i;return Math.sqrt(o*o+s*s)},n.sum=function(e){for(var t=0,r=0,i=e.length;r!==i;r++){var o=e[r];t+=o}return t},n}(),yd=function(){function n(){}return n.floatToIntBits=function(e){return e},n.MAX_VALUE=Number.MAX_SAFE_INTEGER,n}(),ge=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n.prototype.equals=function(e){if(e instanceof n){var t=e;return this.x===t.x&&this.y===t.y}return!1},n.prototype.hashCode=function(){return 31*yd.floatToIntBits(this.x)+yd.floatToIntBits(this.y)},n.prototype.toString=function(){return"("+this.x+","+this.y+")"},n.orderBestPatterns=function(e){var t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),o,s,l;if(r>=t&&r>=i?(s=e[0],o=e[1],l=e[2]):i>=r&&i>=t?(s=e[1],o=e[0],l=e[2]):(s=e[2],o=e[0],l=e[1]),this.crossProductZ(o,s,l)<0){var c=o;o=l,l=c}e[0]=o,e[1]=s,e[2]=l},n.distance=function(e,t){return Xe.distance(e.x,e.y,t.x,t.y)},n.crossProductZ=function(e,t,r){var i=t.x,o=t.y;return(r.x-i)*(e.y-o)-(r.y-o)*(e.x-i)},n}(),p1=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),DC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PC=function(n){DC(e,n);function e(t,r,i,o,s){var l=n.call(this,t,r)||this;return l.compact=i,l.nbDatablocks=o,l.nbLayers=s,l}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(p1),md=function(){function n(e,t,r,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),t==null&&(t=n.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var o=t/2|0;if(this.leftInit=r-o,this.rightInit=r+o,this.upInit=i-o,this.downInit=i+o,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}return n.prototype.detect=function(){for(var e=this.leftInit,t=this.rightInit,r=this.upInit,i=this.downInit,o=!1,s=!0,l=!1,c=!1,h=!1,g=!1,v=!1,m=this.width,_=this.height;s;){s=!1;for(var A=!0;(A||!c)&&t<m;)A=this.containsBlackPoint(r,i,t,!1),A?(t++,s=!0,c=!0):c||t++;if(t>=m){o=!0;break}for(var I=!0;(I||!h)&&i<_;)I=this.containsBlackPoint(e,t,i,!0),I?(i++,s=!0,h=!0):h||i++;if(i>=_){o=!0;break}for(var R=!0;(R||!g)&&e>=0;)R=this.containsBlackPoint(r,i,e,!1),R?(e--,s=!0,g=!0):g||e--;if(e<0){o=!0;break}for(var L=!0;(L||!v)&&r>=0;)L=this.containsBlackPoint(e,t,r,!0),L?(r--,s=!0,v=!0):v||r--;if(r<0){o=!0;break}s&&(l=!0)}if(!o&&l){for(var P=t-e,F=null,z=1;F===null&&z<P;z++)F=this.getBlackPointOnSegment(e,i-z,e+z,i);if(F==null)throw new Z;for(var q=null,z=1;q===null&&z<P;z++)q=this.getBlackPointOnSegment(e,r+z,e+z,r);if(q==null)throw new Z;for(var Q=null,z=1;Q===null&&z<P;z++)Q=this.getBlackPointOnSegment(t,r+z,t-z,r);if(Q==null)throw new Z;for(var D=null,z=1;D===null&&z<P;z++)D=this.getBlackPointOnSegment(t,i-z,t-z,i);if(D==null)throw new Z;return this.centerEdges(D,F,Q,q)}else throw new Z},n.prototype.getBlackPointOnSegment=function(e,t,r,i){for(var o=Xe.round(Xe.distance(e,t,r,i)),s=(r-e)/o,l=(i-t)/o,c=this.image,h=0;h<o;h++){var g=Xe.round(e+h*s),v=Xe.round(t+h*l);if(c.get(g,v))return new ge(g,v)}return null},n.prototype.centerEdges=function(e,t,r,i){var o=e.getX(),s=e.getY(),l=t.getX(),c=t.getY(),h=r.getX(),g=r.getY(),v=i.getX(),m=i.getY(),_=n.CORR;return o<this.width/2?[new ge(v-_,m+_),new ge(l+_,c+_),new ge(h-_,g-_),new ge(o+_,s-_)]:[new ge(v+_,m+_),new ge(l+_,c-_),new ge(h-_,g+_),new ge(o-_,s-_)]},n.prototype.containsBlackPoint=function(e,t,r,i){var o=this.image;if(i){for(var s=e;s<=t;s++)if(o.get(s,r))return!0}else for(var l=e;l<=t;l++)if(o.get(r,l))return!0;return!1},n.INIT_SIZE=10,n.CORR=1,n}(),Fg=function(){function n(){}return n.checkAndNudgePoints=function(e,t){for(var r=e.getWidth(),i=e.getHeight(),o=!0,s=0;s<t.length&&o;s+=2){var l=Math.floor(t[s]),c=Math.floor(t[s+1]);if(l<-1||l>r||c<-1||c>i)throw new Z;o=!1,l===-1?(t[s]=0,o=!0):l===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}o=!0;for(var s=t.length-2;s>=0&&o;s-=2){var l=Math.floor(t[s]),c=Math.floor(t[s+1]);if(l<-1||l>r||c<-1||c>i)throw new Z;o=!1,l===-1?(t[s]=0,o=!0):l===r&&(t[s]=r-1,o=!0),c===-1?(t[s+1]=0,o=!0):c===i&&(t[s+1]=i-1,o=!0)}},n}(),gm=function(){function n(e,t,r,i,o,s,l,c,h){this.a11=e,this.a21=t,this.a31=r,this.a12=i,this.a22=o,this.a32=s,this.a13=l,this.a23=c,this.a33=h}return n.quadrilateralToQuadrilateral=function(e,t,r,i,o,s,l,c,h,g,v,m,_,A,I,R){var L=n.quadrilateralToSquare(e,t,r,i,o,s,l,c),P=n.squareToQuadrilateral(h,g,v,m,_,A,I,R);return P.times(L)},n.prototype.transformPoints=function(e){for(var t=e.length,r=this.a11,i=this.a12,o=this.a13,s=this.a21,l=this.a22,c=this.a23,h=this.a31,g=this.a32,v=this.a33,m=0;m<t;m+=2){var _=e[m],A=e[m+1],I=o*_+c*A+v;e[m]=(r*_+s*A+h)/I,e[m+1]=(i*_+l*A+g)/I}},n.prototype.transformPointsWithValues=function(e,t){for(var r=this.a11,i=this.a12,o=this.a13,s=this.a21,l=this.a22,c=this.a23,h=this.a31,g=this.a32,v=this.a33,m=e.length,_=0;_<m;_++){var A=e[_],I=t[_],R=o*A+c*I+v;e[_]=(r*A+s*I+h)/R,t[_]=(i*A+l*I+g)/R}},n.squareToQuadrilateral=function(e,t,r,i,o,s,l,c){var h=e-r+o-l,g=t-i+s-c;if(h===0&&g===0)return new n(r-e,o-r,e,i-t,s-i,t,0,0,1);var v=r-o,m=l-o,_=i-s,A=c-s,I=v*A-m*_,R=(h*A-m*g)/I,L=(v*g-h*_)/I;return new n(r-e+R*r,l-e+L*l,e,i-t+R*i,c-t+L*c,t,R,L,1)},n.quadrilateralToSquare=function(e,t,r,i,o,s,l,c){return n.squareToQuadrilateral(e,t,r,i,o,s,l,c).buildAdjoint()},n.prototype.buildAdjoint=function(){return new n(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},n.prototype.times=function(e){return new n(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},n}(),NC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),bC=function(n){NC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.sampleGrid=function(t,r,i,o,s,l,c,h,g,v,m,_,A,I,R,L,P,F,z){var q=gm.quadrilateralToQuadrilateral(o,s,l,c,h,g,v,m,_,A,I,R,L,P,F,z);return this.sampleGridWithTransform(t,r,i,q)},e.prototype.sampleGridWithTransform=function(t,r,i,o){if(r<=0||i<=0)throw new Z;for(var s=new Kr(r,i),l=new Float32Array(2*r),c=0;c<i;c++){for(var h=l.length,g=c+.5,v=0;v<h;v+=2)l[v]=v/2+.5,l[v+1]=g;o.transformPoints(l),Fg.checkAndNudgePoints(t,l);try{for(var v=0;v<h;v+=2)t.get(Math.floor(l[v]),Math.floor(l[v+1]))&&s.set(v/2,c)}catch{throw new Z}}return s},e}(Fg),g1=function(){function n(){}return n.setGridSampler=function(e){n.gridSampler=e},n.getInstance=function(){return n.gridSampler},n.gridSampler=new bC,n}(),Bn=function(){function n(e,t){this.x=e,this.y=t}return n.prototype.toResultPoint=function(){return new ge(this.getX(),this.getY())},n.prototype.getX=function(){return this.x},n.prototype.getY=function(){return this.y},n}(),MC=function(){function n(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return n.prototype.detect=function(){return this.detectMirror(!1)},n.prototype.detectMirror=function(e){var t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){var i=r[0];r[0]=r[2],r[2]=i}this.extractParameters(r);var o=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),s=this.getMatrixCornerPoints(r);return new PC(o,s,this.compact,this.nbDataBlocks,this.nbLayers)},n.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new Z;var t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);for(var i=0,o=0;o<4;o++){var s=r[(this.shift+o)%4];this.compact?(i<<=7,i+=s>>1&127):(i<<=10,i+=(s>>2&992)+(s>>1&31))}var l=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)},n.prototype.getRotation=function(e,t){var r=0;e.forEach(function(o,s,l){var c=(o>>t-2<<1)+(o&1);r=(r<<3)+c}),r=((r&1)<<11)+(r>>1);for(var i=0;i<4;i++)if(be.bitCount(r^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new Z},n.prototype.getCorrectedParameterData=function(e,t){var r,i;t?(r=7,i=2):(r=10,i=4);for(var o=r-i,s=new Int32Array(r),l=r-1;l>=0;--l)s[l]=e&15,e>>=4;try{var c=new qc(Un.AZTEC_PARAM);c.decode(s,o)}catch{throw new Z}for(var h=0,l=0;l<i;l++)h=(h<<4)+s[l];return h},n.prototype.getBullsEyeCorners=function(e){var t=e,r=e,i=e,o=e,s=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var l=this.getFirstDifferent(t,s,1,-1),c=this.getFirstDifferent(r,s,1,1),h=this.getFirstDifferent(i,s,-1,1),g=this.getFirstDifferent(o,s,-1,-1);if(this.nbCenterLayers>2){var v=this.distancePoint(g,l)*this.nbCenterLayers/(this.distancePoint(o,t)*(this.nbCenterLayers+2));if(v<.75||v>1.25||!this.isWhiteOrBlackRectangle(l,c,h,g))break}t=l,r=c,i=h,o=g,s=!s}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;var m=new ge(t.getX()+.5,t.getY()-.5),_=new ge(r.getX()+.5,r.getY()+.5),A=new ge(i.getX()-.5,i.getY()+.5),I=new ge(o.getX()-.5,o.getY()-.5);return this.expandSquare([m,_,A,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},n.prototype.getMatrixCenter=function(){var e,t,r,i;try{var o=new md(this.image).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{var s=this.image.getWidth()/2,l=this.image.getHeight()/2;e=this.getFirstDifferent(new Bn(s+7,l-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Bn(s+7,l+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Bn(s-7,l+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Bn(s-7,l-7),!1,-1,-1).toResultPoint()}var c=Xe.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=Xe.round((e.getY()+i.getY()+t.getY()+r.getY())/4);try{var o=new md(this.image,15,c,h).detect();e=o[0],t=o[1],r=o[2],i=o[3]}catch{e=this.getFirstDifferent(new Bn(c+7,h-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new Bn(c+7,h+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new Bn(c-7,h+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new Bn(c-7,h-7),!1,-1,-1).toResultPoint()}return c=Xe.round((e.getX()+i.getX()+t.getX()+r.getX())/4),h=Xe.round((e.getY()+i.getY()+t.getY()+r.getY())/4),new Bn(c,h)},n.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},n.prototype.sampleGrid=function(e,t,r,i,o){var s=g1.getInstance(),l=this.getDimension(),c=l/2-this.nbCenterLayers,h=l/2+this.nbCenterLayers;return s.sampleGrid(e,l,l,c,c,h,c,h,h,c,h,t.getX(),t.getY(),r.getX(),r.getY(),i.getX(),i.getY(),o.getX(),o.getY())},n.prototype.sampleLine=function(e,t,r){for(var i=0,o=this.distanceResultPoint(e,t),s=o/r,l=e.getX(),c=e.getY(),h=s*(t.getX()-e.getX())/o,g=s*(t.getY()-e.getY())/o,v=0;v<r;v++)this.image.get(Xe.round(l+v*h),Xe.round(c+v*g))&&(i|=1<<r-v-1);return i},n.prototype.isWhiteOrBlackRectangle=function(e,t,r,i){var o=3;e=new Bn(e.getX()-o,e.getY()+o),t=new Bn(t.getX()-o,t.getY()-o),r=new Bn(r.getX()+o,r.getY()-o),i=new Bn(i.getX()+o,i.getY()+o);var s=this.getColor(i,e);if(s===0)return!1;var l=this.getColor(e,t);return l!==s||(l=this.getColor(t,r),l!==s)?!1:(l=this.getColor(r,i),l===s)},n.prototype.getColor=function(e,t){for(var r=this.distancePoint(e,t),i=(t.getX()-e.getX())/r,o=(t.getY()-e.getY())/r,s=0,l=e.getX(),c=e.getY(),h=this.image.get(e.getX(),e.getY()),g=Math.ceil(r),v=0;v<g;v++)l+=i,c+=o,this.image.get(Xe.round(l),Xe.round(c))!==h&&s++;var m=s/r;return m>.1&&m<.9?0:m<=.1===h?1:-1},n.prototype.getFirstDifferent=function(e,t,r,i){for(var o=e.getX()+r,s=e.getY()+i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r,s+=i;for(o-=r,s-=i;this.isValid(o,s)&&this.image.get(o,s)===t;)o+=r;for(o-=r;this.isValid(o,s)&&this.image.get(o,s)===t;)s+=i;return s-=i,new Bn(o,s)},n.prototype.expandSquare=function(e,t,r){var i=r/(2*t),o=e[0].getX()-e[2].getX(),s=e[0].getY()-e[2].getY(),l=(e[0].getX()+e[2].getX())/2,c=(e[0].getY()+e[2].getY())/2,h=new ge(l+i*o,c+i*s),g=new ge(l-i*o,c-i*s);o=e[1].getX()-e[3].getX(),s=e[1].getY()-e[3].getY(),l=(e[1].getX()+e[3].getX())/2,c=(e[1].getY()+e[3].getY())/2;var v=new ge(l+i*o,c+i*s),m=new ge(l-i*o,c-i*s),_=[h,v,g,m];return _},n.prototype.isValid=function(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()},n.prototype.isValidPoint=function(e){var t=Xe.round(e.getX()),r=Xe.round(e.getY());return this.isValid(t,r)},n.prototype.distancePoint=function(e,t){return Xe.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.distanceResultPoint=function(e,t){return Xe.distance(e.getX(),e.getY(),t.getX(),t.getY())},n.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(be.truncDivision(this.nbLayers-4,8)+1)+15},n}(),_d=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=null,i=new MC(e.getBlackMatrix()),o=null,s=null;try{var l=i.detectMirror(!1);o=l.getPoints(),this.reportFoundResultPoints(t,o),s=new Lg().decode(l)}catch(v){r=v}if(s==null)try{var l=i.detectMirror(!0);o=l.getPoints(),this.reportFoundResultPoints(t,o),s=new Lg().decode(l)}catch(v){throw r??v}var c=new wn(s.getText(),s.getRawBytes(),s.getNumBits(),o,_e.AZTEC,lt.currentTimeMillis()),h=s.getByteSegments();h!=null&&c.putMetadata(fn.BYTE_SEGMENTS,h);var g=s.getECLevel();return g!=null&&c.putMetadata(fn.ERROR_CORRECTION_LEVEL,g),c},n.prototype.reportFoundResultPoints=function(e,t){if(e!=null){var r=e.get(mt.NEED_RESULT_POINT_CALLBACK);r!=null&&t.forEach(function(i,o,s){r.foundPossibleResultPoint(i)})}},n.prototype.reset=function(){},n}(),kC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){kC(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new _d,t)||this}return e})(hs);var jt=function(){function n(){}return n.prototype.decode=function(e,t){try{return this.doDecode(e,t)}catch{var r=t&&t.get(mt.TRY_HARDER)===!0;if(r&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),o=this.doDecode(i,t),s=o.getResultMetadata(),l=270;s!==null&&s.get(fn.ORIENTATION)===!0&&(l=l+s.get(fn.ORIENTATION)%360),o.putMetadata(fn.ORIENTATION,l);var c=o.getResultPoints();if(c!==null)for(var h=i.getHeight(),g=0;g<c.length;g++)c[g]=new ge(h-c[g].getY()-1,c[g].getX());return o}else throw new Z}},n.prototype.reset=function(){},n.prototype.doDecode=function(e,t){var r=e.getWidth(),i=e.getHeight(),o=new tn(r),s=t&&t.get(mt.TRY_HARDER)===!0,l=Math.max(1,i>>(s?8:5)),c;s?c=i:c=15;for(var h=Math.trunc(i/2),g=0;g<c;g++){var v=Math.trunc((g+1)/2),m=(g&1)===0,_=h+l*(m?v:-v);if(_<0||_>=i)break;try{o=e.getBlackRow(_,o)}catch{continue}for(var A=function(P){if(P===1&&(o.reverse(),t&&t.get(mt.NEED_RESULT_POINT_CALLBACK)===!0)){var F=new Map;t.forEach(function(Q,D){return F.set(D,Q)}),F.delete(mt.NEED_RESULT_POINT_CALLBACK),t=F}try{var z=I.decodeRow(_,o,t);if(P===1){z.putMetadata(fn.ORIENTATION,180);var q=z.getResultPoints();q!==null&&(q[0]=new ge(r-q[0].getX()-1,q[0].getY()),q[1]=new ge(r-q[1].getX()-1,q[1].getY()))}return{value:z}}catch{}},I=this,R=0;R<2;R++){var L=A(R);if(typeof L=="object")return L.value}}throw new Z},n.recordPattern=function(e,t,r){for(var i=r.length,o=0;o<i;o++)r[o]=0;var s=e.getSize();if(t>=s)throw new Z;for(var l=!e.get(t),c=0,h=t;h<s;){if(e.get(h)!==l)r[c]++;else{if(++c===i)break;r[c]=1,l=!l}h++}if(!(c===i||c===i-1&&h===s))throw new Z},n.recordPatternInReverse=function(e,t,r){for(var i=r.length,o=e.get(t);t>0&&i>=0;)e.get(--t)!==o&&(i--,o=!o);if(i>=0)throw new Z;n.recordPattern(e,t+1,r)},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,l=0;l<i;l++)o+=e[l],s+=t[l];if(o<s)return Number.POSITIVE_INFINITY;var c=o/s;r*=c;for(var h=0,g=0;g<i;g++){var v=e[g],m=t[g]*c,_=v>m?v-m:m-v;if(_>r)return Number.POSITIVE_INFINITY;h+=_}return h/o},n}(),LC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bg=function(n){LC(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.findStartPattern=function(t){for(var r=t.getSize(),i=t.getNextSet(0),o=0,s=Int32Array.from([0,0,0,0,0,0]),l=i,c=!1,h=6,g=i;g<r;g++)if(t.get(g)!==c)s[o]++;else{if(o===h-1){for(var v=e.MAX_AVG_VARIANCE,m=-1,_=e.CODE_START_A;_<=e.CODE_START_C;_++){var A=jt.patternMatchVariance(s,e.CODE_PATTERNS[_],e.MAX_INDIVIDUAL_VARIANCE);A<v&&(v=A,m=_)}if(m>=0&&t.isRange(Math.max(0,l-(g-l)/2),l,!1))return Int32Array.from([l,g,m]);l+=s[0]+s[1],s=s.slice(2,s.length),s[o-1]=0,s[o]=0,o--}else o++;s[o]=1,c=!c}throw new Z},e.decodeCode=function(t,r,i){jt.recordPattern(t,i,r);for(var o=e.MAX_AVG_VARIANCE,s=-1,l=0;l<e.CODE_PATTERNS.length;l++){var c=e.CODE_PATTERNS[l],h=this.patternMatchVariance(r,c,e.MAX_INDIVIDUAL_VARIANCE);h<o&&(o=h,s=l)}if(s>=0)return s;throw new Z},e.prototype.decodeRow=function(t,r,i){var o=i&&i.get(mt.ASSUME_GS1)===!0,s=e.findStartPattern(r),l=s[2],c=0,h=new Uint8Array(20);h[c++]=l;var g;switch(l){case e.CODE_START_A:g=e.CODE_CODE_A;break;case e.CODE_START_B:g=e.CODE_CODE_B;break;case e.CODE_START_C:g=e.CODE_CODE_C;break;default:throw new ue}for(var v=!1,m=!1,_="",A=s[0],I=s[1],R=Int32Array.from([0,0,0,0,0,0]),L=0,P=0,F=l,z=0,q=!0,Q=!1,D=!1;!v;){var T=m;switch(m=!1,L=P,P=e.decodeCode(r,R,I),h[c++]=P,P!==e.CODE_STOP&&(q=!0),P!==e.CODE_STOP&&(z++,F+=z*P),A=I,I+=R.reduce(function(We,se){return We+se},0),P){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new ue}switch(g){case e.CODE_CODE_A:if(P<64)D===Q?_+=String.fromCharCode(32+P):_+=String.fromCharCode(32+P+128),D=!1;else if(P<96)D===Q?_+=String.fromCharCode(P-64):_+=String.fromCharCode(P+64),D=!1;else switch(P!==e.CODE_STOP&&(q=!1),P){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!Q&&D?(Q=!0,D=!1):Q&&D?(Q=!1,D=!1):D=!0;break;case e.CODE_SHIFT:m=!0,g=e.CODE_CODE_B;break;case e.CODE_CODE_B:g=e.CODE_CODE_B;break;case e.CODE_CODE_C:g=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_B:if(P<96)D===Q?_+=String.fromCharCode(32+P):_+=String.fromCharCode(32+P+128),D=!1;else switch(P!==e.CODE_STOP&&(q=!1),P){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!Q&&D?(Q=!0,D=!1):Q&&D?(Q=!1,D=!1):D=!0;break;case e.CODE_SHIFT:m=!0,g=e.CODE_CODE_A;break;case e.CODE_CODE_A:g=e.CODE_CODE_A;break;case e.CODE_CODE_C:g=e.CODE_CODE_C;break;case e.CODE_STOP:v=!0;break}break;case e.CODE_CODE_C:if(P<100)P<10&&(_+="0"),_+=P;else switch(P!==e.CODE_STOP&&(q=!1),P){case e.CODE_FNC_1:o&&(_.length===0?_+="]C1":_+="");break;case e.CODE_CODE_A:g=e.CODE_CODE_A;break;case e.CODE_CODE_B:g=e.CODE_CODE_B;break;case e.CODE_STOP:v=!0;break}break}T&&(g=g===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var N=I-A;if(I=r.getNextUnset(I),!r.isRange(I,Math.min(r.getSize(),I+(I-A)/2),!1))throw new Z;if(F-=z*L,F%103!==L)throw new en;var k=_.length;if(k===0)throw new Z;k>0&&q&&(g===e.CODE_CODE_C?_=_.substring(0,k-2):_=_.substring(0,k-1));for(var V=(s[1]+s[0])/2,U=A+N/2,b=h.length,Fe=new Uint8Array(b),ct=0;ct<b;ct++)Fe[ct]=h[ct];var Rt=[new ge(V,t),new ge(U,t)];return new wn(_,Fe,0,Rt,_e.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(jt),FC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Bh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vg=function(n){FC(e,n);function e(t,r){t===void 0&&(t=!1),r===void 0&&(r=!1);var i=n.call(this)||this;return i.usingCheckDigit=t,i.extendedMode=r,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(t,r,i){var o,s,l,c,h=this.counters;h.fill(0),this.decodeRowResult="";var g=e.findAsteriskPattern(r,h),v=r.getNextSet(g[1]),m=r.getSize(),_,A;do{e.recordPattern(r,v,h);var I=e.toNarrowWidePattern(h);if(I<0)throw new Z;_=e.patternToChar(I),this.decodeRowResult+=_,A=v;try{for(var R=(o=void 0,Bh(h)),L=R.next();!L.done;L=R.next()){var P=L.value;v+=P}}catch(b){o={error:b}}finally{try{L&&!L.done&&(s=R.return)&&s.call(R)}finally{if(o)throw o.error}}v=r.getNextSet(v)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var F=0;try{for(var z=Bh(h),q=z.next();!q.done;q=z.next()){var P=q.value;F+=P}}catch(b){l={error:b}}finally{try{q&&!q.done&&(c=z.return)&&c.call(z)}finally{if(l)throw l.error}}var Q=v-A-F;if(v!==m&&Q*2<F)throw new Z;if(this.usingCheckDigit){for(var D=this.decodeRowResult.length-1,T=0,N=0;N<D;N++)T+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(N));if(this.decodeRowResult.charAt(D)!==e.ALPHABET_STRING.charAt(T%43))throw new en;this.decodeRowResult=this.decodeRowResult.substring(0,D)}if(this.decodeRowResult.length===0)throw new Z;var k;this.extendedMode?k=e.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;var V=(g[1]+g[0])/2,U=A+F/2;return new wn(k,null,0,[new ge(V,t),new ge(U,t)],_e.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(t,r){for(var i=t.getSize(),o=t.getNextSet(0),s=0,l=o,c=!1,h=r.length,g=o;g<i;g++)if(t.get(g)!==c)r[s]++;else{if(s===h-1){if(this.toNarrowWidePattern(r)===e.ASTERISK_ENCODING&&t.isRange(Math.max(0,l-Math.floor((g-l)/2)),l,!1))return[l,g];l+=r[0]+r[1],r.copyWithin(0,2,2+s-1),r[s-1]=0,r[s]=0,s--}else s++;r[s]=1,c=!c}throw new Z},e.toNarrowWidePattern=function(t){var r,i,o=t.length,s=0,l;do{var c=2147483647;try{for(var h=(r=void 0,Bh(t)),g=h.next();!g.done;g=h.next()){var v=g.value;v<c&&v>s&&(c=v)}}catch(I){r={error:I}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}s=c,l=0;for(var m=0,_=0,A=0;A<o;A++){var v=t[A];v>s&&(_|=1<<o-1-A,l++,m+=v)}if(l===3){for(var A=0;A<o&&l>0;A++){var v=t[A];if(v>s&&(l--,v*2>=m))return-1}return _}}while(l>3);return-1},e.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);if(t===e.ASTERISK_ENCODING)return"*";throw new Z},e.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s==="+"||s==="$"||s==="%"||s==="/"){var l=t.charAt(o+1),c="\0";switch(s){case"+":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new ue;break;case"$":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new ue;break;case"%":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l==="X"||l==="Y"||l==="Z")c="";else throw new ue;break;case"/":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new ue;break}i+=c,o++}else i+=s}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(jt),BC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ug=function(n){BC(e,n);function e(){var t=n.call(this)||this;return t.decodeRowResult="",t.counters=new Int32Array(6),t}return e.prototype.decodeRow=function(t,r,i){var o,s,l,c,h=this.findAsteriskPattern(r),g=r.getNextSet(h[1]),v=r.getSize(),m=this.counters;m.fill(0),this.decodeRowResult="";var _,A;do{e.recordPattern(r,g,m);var I=this.toPattern(m);if(I<0)throw new Z;_=this.patternToChar(I),this.decodeRowResult+=_,A=g;try{for(var R=(o=void 0,Vh(m)),L=R.next();!L.done;L=R.next()){var P=L.value;g+=P}}catch(N){o={error:N}}finally{try{L&&!L.done&&(s=R.return)&&s.call(R)}finally{if(o)throw o.error}}g=r.getNextSet(g)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var F=0;try{for(var z=Vh(m),q=z.next();!q.done;q=z.next()){var P=q.value;F+=P}}catch(N){l={error:N}}finally{try{q&&!q.done&&(c=z.return)&&c.call(z)}finally{if(l)throw l.error}}if(g===v||!r.get(g))throw new Z;if(this.decodeRowResult.length<2)throw new Z;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var Q=this.decodeExtended(this.decodeRowResult),D=(h[1]+h[0])/2,T=A+F/2;return new wn(Q,null,0,[new ge(D,t),new ge(T,t)],_e.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(t){var r=t.getSize(),i=t.getNextSet(0);this.counters.fill(0);for(var o=this.counters,s=i,l=!1,c=o.length,h=0,g=i;g<r;g++)if(t.get(g)!==l)o[h]++;else{if(h===c-1){if(this.toPattern(o)===e.ASTERISK_ENCODING)return new Int32Array([s,g]);s+=o[0]+o[1],o.copyWithin(0,2,2+h-1),o[h-1]=0,o[h]=0,h--}else h++;o[h]=1,l=!l}throw new Z},e.prototype.toPattern=function(t){var r,i,o=0;try{for(var s=Vh(t),l=s.next();!l.done;l=s.next()){var c=l.value;o+=c}}catch(A){r={error:A}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}for(var h=0,g=t.length,v=0;v<g;v++){var m=Math.round(t[v]*9/o);if(m<1||m>4)return-1;if(v&1)h<<=m;else for(var _=0;_<m;_++)h=h<<1|1}return h},e.prototype.patternToChar=function(t){for(var r=0;r<e.CHARACTER_ENCODINGS.length;r++)if(e.CHARACTER_ENCODINGS[r]===t)return e.ALPHABET_STRING.charAt(r);throw new Z},e.prototype.decodeExtended=function(t){for(var r=t.length,i="",o=0;o<r;o++){var s=t.charAt(o);if(s>="a"&&s<="d"){if(o>=r-1)throw new ue;var l=t.charAt(o+1),c="\0";switch(s){case"d":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)+32);else throw new ue;break;case"a":if(l>="A"&&l<="Z")c=String.fromCharCode(l.charCodeAt(0)-64);else throw new ue;break;case"b":if(l>="A"&&l<="E")c=String.fromCharCode(l.charCodeAt(0)-38);else if(l>="F"&&l<="J")c=String.fromCharCode(l.charCodeAt(0)-11);else if(l>="K"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)+16);else if(l>="P"&&l<="T")c=String.fromCharCode(l.charCodeAt(0)+43);else if(l==="U")c="\0";else if(l==="V")c="@";else if(l==="W")c="`";else if(l>="X"&&l<="Z")c="";else throw new ue;break;case"c":if(l>="A"&&l<="O")c=String.fromCharCode(l.charCodeAt(0)-32);else if(l==="Z")c=":";else throw new ue;break}i+=c,o++}else i+=s}return i},e.prototype.checkChecksums=function(t){var r=t.length;this.checkOneChecksum(t,r-2,20),this.checkOneChecksum(t,r-1,15)},e.prototype.checkOneChecksum=function(t,r,i){for(var o=1,s=0,l=r-1;l>=0;l--)s+=o*e.ALPHABET_STRING.indexOf(t.charAt(l)),++o>i&&(o=1);if(t.charAt(r)!==e.ALPHABET_STRING[s%47])throw new en},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(jt),VC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),UC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zg=function(n){VC(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.narrowLineWidth=-1,t}return e.prototype.decodeRow=function(t,r,i){var o,s,l=this.decodeStart(r),c=this.decodeEnd(r),h=new De;e.decodeMiddle(r,l[1],c[0],h);var g=h.toString(),v=null;i!=null&&(v=i.get(mt.ALLOWED_LENGTHS)),v==null&&(v=e.DEFAULT_ALLOWED_LENGTHS);var m=g.length,_=!1,A=0;try{for(var I=UC(v),R=I.next();!R.done;R=I.next()){var L=R.value;if(m===L){_=!0;break}L>A&&(A=L)}}catch(z){o={error:z}}finally{try{R&&!R.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}if(!_&&m>A&&(_=!0),!_)throw new ue;var P=[new ge(l[1],t),new ge(c[0],t)],F=new wn(g,null,0,P,_e.ITF,new Date().getTime());return F},e.decodeMiddle=function(t,r,i,o){var s=new Int32Array(10),l=new Int32Array(5),c=new Int32Array(5);for(s.fill(0),l.fill(0),c.fill(0);r<i;){jt.recordPattern(t,r,s);for(var h=0;h<5;h++){var g=2*h;l[h]=s[g],c[h]=s[g+1]}var v=e.decodeDigit(l);o.append(v.toString()),v=this.decodeDigit(c),o.append(v.toString()),s.forEach(function(m){r+=m})}},e.prototype.decodeStart=function(t){var r=e.skipWhiteSpace(t),i=e.findGuardPattern(t,r,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(t,i[0]),i},e.prototype.validateQuietZone=function(t,r){var i=this.narrowLineWidth*10;i=i<r?i:r;for(var o=r-1;i>0&&o>=0&&!t.get(o);o--)i--;if(i!==0)throw new Z},e.skipWhiteSpace=function(t){var r=t.getSize(),i=t.getNextSet(0);if(i===r)throw new Z;return i},e.prototype.decodeEnd=function(t){t.reverse();try{var r=e.skipWhiteSpace(t),i=void 0;try{i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[0])}catch(s){s instanceof Z&&(i=e.findGuardPattern(t,r,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,i[0]);var o=i[0];return i[0]=t.getSize()-i[1],i[1]=t.getSize()-o,i}finally{t.reverse()}},e.findGuardPattern=function(t,r,i){var o=i.length,s=new Int32Array(o),l=t.getSize(),c=!1,h=0,g=r;s.fill(0);for(var v=r;v<l;v++)if(t.get(v)!==c)s[h]++;else{if(h===o-1){if(jt.patternMatchVariance(s,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[g,v];g+=s[0]+s[1],lt.arraycopy(s,2,s,0,h-1),s[h-1]=0,s[h]=0,h--}else h++;s[h]=1,c=!c}throw new Z},e.decodeDigit=function(t){for(var r=e.MAX_AVG_VARIANCE,i=-1,o=e.PATTERNS.length,s=0;s<o;s++){var l=e.PATTERNS[s],c=jt.patternMatchVariance(t,l,e.MAX_INDIVIDUAL_VARIANCE);c<r?(r=c,i=s):c===r&&(i=-1)}if(i>=0)return i%10;throw new Z},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(jt),zC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ss=function(n){zC(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.decodeRowStringBuffer="",t}return e.findStartGuardPattern=function(t){for(var r=!1,i,o=0,s=Int32Array.from([0,0,0]);!r;){s=Int32Array.from([0,0,0]),i=e.findGuardPattern(t,o,!1,this.START_END_PATTERN,s);var l=i[0];o=i[1];var c=l-(o-l);c>=0&&(r=t.isRange(c,l,!1))}return i},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(t,r,i,o){return this.findGuardPattern(t,r,i,o,new Int32Array(o.length))},e.findGuardPattern=function(t,r,i,o,s){var l=t.getSize();r=i?t.getNextUnset(r):t.getNextSet(r);for(var c=0,h=r,g=o.length,v=i,m=r;m<l;m++)if(t.get(m)!==v)s[c]++;else{if(c===g-1){if(jt.patternMatchVariance(s,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([h,m]);h+=s[0]+s[1];for(var _=s.slice(2,s.length),A=0;A<c-1;A++)s[A]=_[A];s[c-1]=0,s[c]=0,c--}else c++;s[c]=1,v=!v}throw new Z},e.decodeDigit=function(t,r,i,o){this.recordPattern(t,i,r);for(var s=this.MAX_AVG_VARIANCE,l=-1,c=o.length,h=0;h<c;h++){var g=o[h],v=jt.patternMatchVariance(r,g,e.MAX_INDIVIDUAL_VARIANCE);v<s&&(s=v,l=h)}if(l>=0)return l;throw new Z},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(jt),HC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jC=function(){function n(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),l=n.parseExtensionString(s),c=[new ge((r[0]+r[1])/2,e),new ge(o,e)],h=new wn(s,null,0,c,_e.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),c=t[1],h=0,g=0;g<5&&c<l;g++){var v=ss.decodeDigit(e,s,c,ss.L_AND_G_PATTERNS);r+=String.fromCharCode(48+v%10);try{for(var m=(i=void 0,HC(s)),_=m.next();!_.done;_=m.next()){var A=_.value;c+=A}}catch(R){i={error:R}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}v>=10&&(h|=1<<4-g),g!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new Z;var I=this.determineCheckDigit(h);if(n.extensionChecksum(r.toString())!==I)throw new Z;return c},n.extensionChecksum=function(e){for(var t=e.length,r=0,i=t-2;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;r*=3;for(var i=t-1;i>=0;i-=2)r+=e.charAt(i).charCodeAt(0)-48;return r*=3,r%10},n.prototype.determineCheckDigit=function(e){for(var t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new Z},n.parseExtensionString=function(e){if(e.length!==5)return null;var t=n.parseExtension5String(e);return t==null?null:new Map([[fn.SUGGESTED_PRICE,t]])},n.parseExtension5String=function(e){var t;switch(e.charAt(0)){case"0":t="£";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t="";break}var r=parseInt(e.substring(1)),i=(r/100).toString(),o=r%100,s=o<10?"0"+o:o.toString();return t+i+"."+s},n}(),GC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},WC=function(){function n(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return n.prototype.decodeRow=function(e,t,r){var i=this.decodeRowStringBuffer,o=this.decodeMiddle(t,r,i),s=i.toString(),l=n.parseExtensionString(s),c=[new ge((r[0]+r[1])/2,e),new ge(o,e)],h=new wn(s,null,0,c,_e.UPC_EAN_EXTENSION,new Date().getTime());return l!=null&&h.putAllMetadata(l),h},n.prototype.decodeMiddle=function(e,t,r){var i,o,s=this.decodeMiddleCounters;s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=e.getSize(),c=t[1],h=0,g=0;g<2&&c<l;g++){var v=ss.decodeDigit(e,s,c,ss.L_AND_G_PATTERNS);r+=String.fromCharCode(48+v%10);try{for(var m=(i=void 0,GC(s)),_=m.next();!_.done;_=m.next()){var A=_.value;c+=A}}catch(I){i={error:I}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}v>=10&&(h|=1<<1-g),g!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new Z;if(parseInt(r.toString())%4!==h)throw new Z;return c},n.parseExtensionString=function(e){return e.length!==2?null:new Map([[fn.ISSUE_NUMBER,parseInt(e)]])},n}(),$C=function(){function n(){}return n.decodeRow=function(e,t,r){var i=ss.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var o=new jC;return o.decodeRow(e,t,i)}catch{var s=new WC;return s.decodeRow(e,t,i)}},n.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),n}(),XC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Vt=function(n){XC(e,n);function e(){var t=n.call(this)||this;t.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(l){return Int32Array.from(l)});for(var r=10;r<20;r++){for(var i=e.L_PATTERNS[r-10],o=new Int32Array(i.length),s=0;s<i.length;s++)o[s]=i[i.length-s-1];e.L_AND_G_PATTERNS[r]=o}return t}return e.prototype.decodeRow=function(t,r,i){var o=e.findStartGuardPattern(r),s=i==null?null:i.get(mt.NEED_RESULT_POINT_CALLBACK);if(s!=null){var l=new ge((o[0]+o[1])/2,t);s.foundPossibleResultPoint(l)}var c=this.decodeMiddle(r,o,this.decodeRowStringBuffer),h=c.rowOffset,g=c.resultString;if(s!=null){var v=new ge(h,t);s.foundPossibleResultPoint(v)}var m=e.decodeEnd(r,h);if(s!=null){var _=new ge((m[0]+m[1])/2,t);s.foundPossibleResultPoint(_)}var A=m[1],I=A+(A-m[0]);if(I>=r.getSize()||!r.isRange(A,I,!1))throw new Z;var R=g.toString();if(R.length<8)throw new ue;if(!e.checkChecksum(R))throw new en;var L=(o[1]+o[0])/2,P=(m[1]+m[0])/2,F=this.getBarcodeFormat(),z=[new ge(L,t),new ge(P,t)],q=new wn(R,null,0,z,F,new Date().getTime()),Q=0;try{var D=$C.decodeRow(t,r,m[1]);q.putMetadata(fn.UPC_EAN_EXTENSION,D.getText()),q.putAllMetadata(D.getResultMetadata()),q.addResultPoints(D.getResultPoints()),Q=D.getText().length}catch{}var T=i==null?null:i.get(mt.ALLOWED_EAN_EXTENSIONS);if(T!=null){var N=!1;for(var k in T)if(Q.toString()===k){N=!0;break}if(!N)throw new Z}return F===_e.EAN_13||_e.UPC_A,q},e.checkChecksum=function(t){return e.checkStandardUPCEANChecksum(t)},e.checkStandardUPCEANChecksum=function(t){var r=t.length;if(r===0)return!1;var i=parseInt(t.charAt(r-1),10);return e.getStandardUPCEANChecksum(t.substring(0,r-1))===i},e.getStandardUPCEANChecksum=function(t){for(var r=t.length,i=0,o=r-1;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}i*=3;for(var o=r-2;o>=0;o-=2){var s=t.charAt(o).charCodeAt(0)-48;if(s<0||s>9)throw new ue;i+=s}return(1e3-i)%10},e.decodeEnd=function(t,r){return e.findGuardPattern(t,r,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(ss),KC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xd=function(n){KC(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,l,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var g=t.getSize(),v=r[1],m=0,_=0;_<6&&v<g;_++){var A=Vt.decodeDigit(t,h,v,Vt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+A%10);try{for(var I=(o=void 0,Hg(h)),R=I.next();!R.done;R=I.next()){var L=R.value;v+=L}}catch(q){o={error:q}}finally{try{R&&!R.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}A>=10&&(m|=1<<5-_)}i=e.determineFirstDigit(i,m);var P=Vt.findGuardPattern(t,v,!0,Vt.MIDDLE_PATTERN,new Int32Array(Vt.MIDDLE_PATTERN.length).fill(0));v=P[1];for(var _=0;_<6&&v<g;_++){var A=Vt.decodeDigit(t,h,v,Vt.L_PATTERNS);i+=String.fromCharCode(48+A);try{for(var F=(l=void 0,Hg(h)),z=F.next();!z.done;z=F.next()){var L=z.value;v+=L}}catch(D){l={error:D}}finally{try{z&&!z.done&&(c=F.return)&&c.call(F)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return _e.EAN_13},e.determineFirstDigit=function(t,r){for(var i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return t=String.fromCharCode(48+i)+t,t;throw new Z},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Vt),qC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),jg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gg=function(n){qC(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=Int32Array.from([0,0,0,0]),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,l,c,h=this.decodeMiddleCounters;h[0]=0,h[1]=0,h[2]=0,h[3]=0;for(var g=t.getSize(),v=r[1],m=0;m<4&&v<g;m++){var _=Vt.decodeDigit(t,h,v,Vt.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var A=(o=void 0,jg(h)),I=A.next();!I.done;I=A.next()){var R=I.value;v+=R}}catch(z){o={error:z}}finally{try{I&&!I.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}}var L=Vt.findGuardPattern(t,v,!0,Vt.MIDDLE_PATTERN,new Int32Array(Vt.MIDDLE_PATTERN.length).fill(0));v=L[1];for(var m=0;m<4&&v<g;m++){var _=Vt.decodeDigit(t,h,v,Vt.L_PATTERNS);i+=String.fromCharCode(48+_);try{for(var P=(l=void 0,jg(h)),F=P.next();!F.done;F=P.next()){var R=F.value;v+=R}}catch(Q){l={error:Q}}finally{try{F&&!F.done&&(c=P.return)&&c.call(P)}finally{if(l)throw l.error}}}return{rowOffset:v,resultString:i}},e.prototype.getBarcodeFormat=function(){return _e.EAN_8},e}(Vt),YC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wg=function(n){YC(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.ean13Reader=new xd,t}return e.prototype.getBarcodeFormat=function(){return _e.UPC_A},e.prototype.decode=function(t,r){return this.maybeReturnResult(this.ean13Reader.decode(t))},e.prototype.decodeRow=function(t,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,r,i))},e.prototype.decodeMiddle=function(t,r,i){return this.ean13Reader.decodeMiddle(t,r,i)},e.prototype.maybeReturnResult=function(t){var r=t.getText();if(r.charAt(0)==="0"){var i=new wn(r.substring(1),null,null,t.getResultPoints(),_e.UPC_A);return t.getResultMetadata()!=null&&i.putAllMetadata(t.getResultMetadata()),i}else throw new Z},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Vt),QC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZC=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$g=function(n){QC(e,n);function e(){var t=n.call(this)||this;return t.decodeMiddleCounters=new Int32Array(4),t}return e.prototype.decodeMiddle=function(t,r,i){var o,s,l=this.decodeMiddleCounters.map(function(R){return R});l[0]=0,l[1]=0,l[2]=0,l[3]=0;for(var c=t.getSize(),h=r[1],g=0,v=0;v<6&&h<c;v++){var m=e.decodeDigit(t,l,h,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+m%10);try{for(var _=(o=void 0,ZC(l)),A=_.next();!A.done;A=_.next()){var I=A.value;h+=I}}catch(R){o={error:R}}finally{try{A&&!A.done&&(s=_.return)&&s.call(_)}finally{if(o)throw o.error}}m>=10&&(g|=1<<5-v)}return e.determineNumSysAndCheckDigit(new De(i),g),h},e.prototype.decodeEnd=function(t,r){return e.findGuardPatternWithoutCounters(t,r,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(t){return Vt.checkChecksum(e.convertUPCEtoUPCA(t))},e.determineNumSysAndCheckDigit=function(t,r){for(var i=0;i<=1;i++)for(var o=0;o<10;o++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][o]){t.insert(0,"0"+i),t.append("0"+o);return}throw Z.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return _e.UPC_E},e.convertUPCEtoUPCA=function(t){var r=t.slice(1,7).split("").map(function(s){return s.charCodeAt(0)}),i=new De;i.append(t.charAt(0));var o=r[5];switch(o){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(o),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(o);break}return t.length>=8&&i.append(t.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Vt),JC=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Xg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Uh=function(n){JC(e,n);function e(t){var r=n.call(this)||this,i=t==null?null:t.get(mt.POSSIBLE_FORMATS),o=[];return i!=null&&(i.indexOf(_e.EAN_13)>-1&&o.push(new xd),i.indexOf(_e.UPC_A)>-1&&o.push(new Wg),i.indexOf(_e.EAN_8)>-1&&o.push(new Gg),i.indexOf(_e.UPC_E)>-1&&o.push(new $g)),o.length===0&&(o.push(new xd),o.push(new Wg),o.push(new Gg),o.push(new $g)),r.readers=o,r}return e.prototype.decodeRow=function(t,r,i){var o,s;try{for(var l=Xg(this.readers),c=l.next();!c.done;c=l.next()){var h=c.value;try{var g=h.decodeRow(t,r,i),v=g.getBarcodeFormat()===_e.EAN_13&&g.getText().charAt(0)==="0",m=i==null?null:i.get(mt.POSSIBLE_FORMATS),_=m==null||m.includes(_e.UPC_A);if(v&&_){var A=g.getRawBytes(),I=new wn(g.getText().substring(1),A,A?A.length:null,g.getResultPoints(),_e.UPC_A);return I.putAllMetadata(g.getResultMetadata()),I}return g}catch{}}}catch(R){o={error:R}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}throw new Z},e.prototype.reset=function(){var t,r;try{for(var i=Xg(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;s.reset()}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e}(jt),eI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),tI=function(n){eI(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},t}return e.prototype.decodeRow=function(t,r,i){var o=this.getValidRowData(r);if(!o)throw new Z;var s=this.codaBarDecodeRow(o.row);if(!s)throw new Z;return new wn(s,null,0,[new ge(o.left,t),new ge(o.right,t)],_e.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(t){var r=t.toArray(),i=r.indexOf(!0);if(i===-1)return null;var o=r.lastIndexOf(!0);if(o<=i)return null;r=r.slice(i,o+1);for(var s=[],l=r[0],c=1,h=1;h<r.length;h++)r[h]===l?c++:(l=r[h],s.push(c),c=1);return s.push(c),s.length<23&&(s.length+1)%8!==0?null:{row:s,left:i,right:o}},e.prototype.codaBarDecodeRow=function(t){for(var r=[],i=Math.ceil(t.reduce(function(c,h){return(c+h)/2},0));t.length>0;){var o=t.splice(0,8).splice(0,7),s=o.map(function(c){return c<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[s]===void 0)return null;r.push(this.CODA_BAR_CHAR_SET[s])}var l=r.join("");return this.validCodaBarString(l)?l:null},e.prototype.validCodaBarString=function(t){var r=/^[A-D].{1,}[A-D]$/;return r.test(t)},e}(jt),nI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vo=function(n){nI(e,n);function e(){var t=n.call(this)||this;return t.decodeFinderCounters=new Int32Array(4),t.dataCharacterCounters=new Int32Array(8),t.oddRoundingErrors=new Array(4),t.evenRoundingErrors=new Array(4),t.oddCounts=new Array(t.dataCharacterCounters.length/2),t.evenCounts=new Array(t.dataCharacterCounters.length/2),t}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(t,r){for(var i=0;i<r.length;i++)if(jt.patternMatchVariance(t,r[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new Z},e.count=function(t){return Xe.sum(new Int32Array(t))},e.increment=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]>o&&(o=r[s],i=s);t[i]++},e.decrement=function(t,r){for(var i=0,o=r[0],s=1;s<t.length;s++)r[s]<o&&(o=r[s],i=s);t[i]--},e.isFinderPattern=function(t){var r,i,o=t[0]+t[1],s=o+t[2]+t[3],l=o/s;if(l>=e.MIN_FINDER_PATTERN_RATIO&&l<=e.MAX_FINDER_PATTERN_RATIO){var c=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;try{for(var g=rI(t),v=g.next();!v.done;v=g.next()){var m=v.value;m>h&&(h=m),m<c&&(c=m)}}catch(_){r={error:_}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}return h<10*c}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(jt),Nc=function(){function n(e,t){this.value=e,this.checksumPortion=t}return n.prototype.getValue=function(){return this.value},n.prototype.getChecksumPortion=function(){return this.checksumPortion},n.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion},n.prototype.hashCode=function(){return this.value^this.checksumPortion},n}(),vm=function(){function n(e,t,r,i,o){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ge(r,o)),this.resultPoints.push(new ge(i,o))}return n.prototype.getValue=function(){return this.value},n.prototype.getStartEnd=function(){return this.startEnd},n.prototype.getResultPoints=function(){return this.resultPoints},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.hashCode=function(){return this.value},n}(),iI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ya=function(){function n(){}return n.getRSSvalue=function(e,t,r){var i,o,s=0;try{for(var l=iI(e),c=l.next();!c.done;c=l.next()){var h=c.value;s+=h}}catch(P){i={error:P}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}for(var g=0,v=0,m=e.length,_=0;_<m-1;_++){var A=void 0;for(A=1,v|=1<<_;A<e[_];A++,v&=~(1<<_)){var I=n.combins(s-A-1,m-_-2);if(r&&v===0&&s-A-(m-_-1)>=m-_-1&&(I-=n.combins(s-A-(m-_),m-_-2)),m-_-1>1){for(var R=0,L=s-A-(m-_-2);L>t;L--)R+=n.combins(s-A-L-1,m-_-3);I-=R*(m-1-_)}else s-A>t&&I--;g+=I}s-=A}return g},n.combins=function(e,t){var r,i;e-t>t?(i=t,r=e-t):(i=e-t,r=t);for(var o=1,s=1,l=e;l>r;l--)o*=l,s<=i&&(o/=s,s++);for(;s<=i;)o/=s,s++;return o},n}(),oI=function(){function n(){}return n.buildBitArray=function(e){var t=e.length*2-1;e[e.length-1].getRightChar()==null&&(t-=1);for(var r=12*t,i=new tn(r),o=0,s=e[0],l=s.getRightChar().getValue(),c=11;c>=0;--c)l&1<<c&&i.set(o),o++;for(var c=1;c<e.length;++c){for(var h=e[c],g=h.getLeftChar().getValue(),v=11;v>=0;--v)g&1<<v&&i.set(o),o++;if(h.getRightChar()!==null)for(var m=h.getRightChar().getValue(),v=11;v>=0;--v)m&1<<v&&i.set(o),o++}return i},n}(),Lo=function(){function n(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}return n.prototype.getDecodedInformation=function(){return this.decodedInformation},n.prototype.isFinished=function(){return this.finished},n}(),v1=function(){function n(e){this.newPosition=e}return n.prototype.getNewPosition=function(){return this.newPosition},n}(),aI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Sr=function(n){aI(e,n);function e(t,r){var i=n.call(this,t)||this;return i.value=r,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(v1),sI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fo=function(n){sI(e,n);function e(t,r,i){var o=n.call(this,t)||this;return i?(o.remaining=!0,o.remainingValue=o.remainingValue):(o.remaining=!1,o.remainingValue=0),o.newString=r,o}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(v1),uI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Wa=function(n){uI(e,n);function e(t,r,i){var o=n.call(this,t)||this;if(r<0||r>10||i<0||i>10)throw new ue;return o.firstDigit=r,o.secondDigit=i,o}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(v1),uc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},lI=function(){function n(){}return n.parseFieldsInGeneralPurpose=function(e){var t,r,i,o,s,l,c,h;if(!e)return null;if(e.length<2)throw new Z;var g=e.substring(0,2);try{for(var v=uc(n.TWO_DIGIT_DATA_LENGTH),m=v.next();!m.done;m=v.next()){var _=m.value;if(_[0]===g)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(2,_[2],e):n.processFixedAI(2,_[1],e)}}catch(Q){t={error:Q}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(t)throw t.error}}if(e.length<3)throw new Z;var A=e.substring(0,3);try{for(var I=uc(n.THREE_DIGIT_DATA_LENGTH),R=I.next();!R.done;R=I.next()){var _=R.value;if(_[0]===A)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(3,_[2],e):n.processFixedAI(3,_[1],e)}}catch(Q){i={error:Q}}finally{try{R&&!R.done&&(o=I.return)&&o.call(I)}finally{if(i)throw i.error}}try{for(var L=uc(n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),P=L.next();!P.done;P=L.next()){var _=P.value;if(_[0]===A)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(Q){s={error:Q}}finally{try{P&&!P.done&&(l=L.return)&&l.call(L)}finally{if(s)throw s.error}}if(e.length<4)throw new Z;var F=e.substring(0,4);try{for(var z=uc(n.FOUR_DIGIT_DATA_LENGTH),q=z.next();!q.done;q=z.next()){var _=q.value;if(_[0]===F)return _[1]===n.VARIABLE_LENGTH?n.processVariableAI(4,_[2],e):n.processFixedAI(4,_[1],e)}}catch(Q){c={error:Q}}finally{try{q&&!q.done&&(h=z.return)&&h.call(z)}finally{if(c)throw c.error}}throw new Z},n.processFixedAI=function(e,t,r){if(r.length<e)throw new Z;var i=r.substring(0,e);if(r.length<e+t)throw new Z;var o=r.substring(e,e+t),s=r.substring(e+t),l="("+i+")"+o,c=n.parseFieldsInGeneralPurpose(s);return c==null?l:l+c},n.processVariableAI=function(e,t,r){var i=r.substring(0,e),o;r.length<e+t?o=r.length:o=e+t;var s=r.substring(e,o),l=r.substring(o),c="("+i+")"+s,h=n.parseFieldsInGeneralPurpose(l);return h==null?c:c+h},n.VARIABLE_LENGTH=[],n.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",n.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",n.VARIABLE_LENGTH,20],["22",n.VARIABLE_LENGTH,29],["30",n.VARIABLE_LENGTH,8],["37",n.VARIABLE_LENGTH,8],["90",n.VARIABLE_LENGTH,30],["91",n.VARIABLE_LENGTH,30],["92",n.VARIABLE_LENGTH,30],["93",n.VARIABLE_LENGTH,30],["94",n.VARIABLE_LENGTH,30],["95",n.VARIABLE_LENGTH,30],["96",n.VARIABLE_LENGTH,30],["97",n.VARIABLE_LENGTH,3],["98",n.VARIABLE_LENGTH,30],["99",n.VARIABLE_LENGTH,30]],n.THREE_DIGIT_DATA_LENGTH=[["240",n.VARIABLE_LENGTH,30],["241",n.VARIABLE_LENGTH,30],["242",n.VARIABLE_LENGTH,6],["250",n.VARIABLE_LENGTH,30],["251",n.VARIABLE_LENGTH,30],["253",n.VARIABLE_LENGTH,17],["254",n.VARIABLE_LENGTH,20],["400",n.VARIABLE_LENGTH,30],["401",n.VARIABLE_LENGTH,30],["402",17],["403",n.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",n.VARIABLE_LENGTH,20],["421",n.VARIABLE_LENGTH,15],["422",3],["423",n.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],n.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",n.VARIABLE_LENGTH,15],["391",n.VARIABLE_LENGTH,18],["392",n.VARIABLE_LENGTH,15],["393",n.VARIABLE_LENGTH,18],["703",n.VARIABLE_LENGTH,30]],n.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",n.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",n.VARIABLE_LENGTH,20],["8003",n.VARIABLE_LENGTH,30],["8004",n.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",n.VARIABLE_LENGTH,30],["8008",n.VARIABLE_LENGTH,12],["8018",18],["8020",n.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",n.VARIABLE_LENGTH,70],["8200",n.VARIABLE_LENGTH,70]],n}(),mc=function(){function n(e){this.buffer=new De,this.information=e}return n.prototype.decodeAllCodes=function(e,t){var r=t,i=null;do{var o=this.decodeGeneralPurposeField(r,i),s=lI.parseFieldsInGeneralPurpose(o.getNewString());if(s!=null&&e.append(s),o.isRemaining()?i=""+o.getRemainingValue():i=null,r===o.getNewPosition())break;r=o.getNewPosition()}while(!0);return e.toString()},n.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)},n.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var t=this.extractNumericValueFromBitArray(e,4);return t===0?new Wa(this.information.getSize(),Wa.FNC1,Wa.FNC1):new Wa(this.information.getSize(),t-1,Wa.FNC1)}var r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,o=(r-8)%11;return new Wa(e+7,i,o)},n.prototype.extractNumericValueFromBitArray=function(e,t){return n.extractNumericValueFromBitArray(this.information,e,t)},n.extractNumericValueFromBitArray=function(e,t,r){for(var i=0,o=0;o<r;++o)e.get(t+o)&&(i|=1<<r-o-1);return i},n.prototype.decodeGeneralPurposeField=function(e,t){this.buffer.setLengthToZero(),t!=null&&this.buffer.append(t),this.current.setPosition(e);var r=this.parseBlocks();return r!=null&&r.isRemaining()?new Fo(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new Fo(this.current.getPosition(),this.buffer.toString())},n.prototype.parseBlocks=function(){var e,t;do{var r=this.current.getPosition();this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished());var i=r!==this.current.getPosition();if(!i&&!e)break}while(!e);return t.getDecodedInformation()},n.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var t=void 0;return e.isSecondDigitFNC1()?t=new Fo(this.current.getPosition(),this.buffer.toString()):t=new Fo(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Lo(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var t=new Fo(this.current.getPosition(),this.buffer.toString());return new Lo(!0,t)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lo(!1)},n.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Fo(this.current.getPosition(),this.buffer.toString());return new Lo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lo(!1)},n.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var t=new Fo(this.current.getPosition(),this.buffer.toString());return new Lo(!0,t)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lo(!1)},n.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},n.prototype.decodeIsoIec646=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Sr(e+5,Sr.FNC1);if(t>=5&&t<15)return new Sr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new Sr(e+7,""+(r+1));if(r>=90&&r<116)return new Sr(e+7,""+(r+7));var i=this.extractNumericValueFromBitArray(e,8),o;switch(i){case 232:o="!";break;case 233:o='"';break;case 234:o="%";break;case 235:o="&";break;case 236:o="'";break;case 237:o="(";break;case 238:o=")";break;case 239:o="*";break;case 240:o="+";break;case 241:o=",";break;case 242:o="-";break;case 243:o=".";break;case 244:o="/";break;case 245:o=":";break;case 246:o=";";break;case 247:o="<";break;case 248:o="=";break;case 249:o=">";break;case 250:o="?";break;case 251:o="_";break;case 252:o=" ";break;default:throw new ue}return new Sr(e+8,o)},n.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63},n.prototype.decodeAlphanumeric=function(e){var t=this.extractNumericValueFromBitArray(e,5);if(t===15)return new Sr(e+5,Sr.FNC1);if(t>=5&&t<15)return new Sr(e+5,"0"+(t-5));var r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new Sr(e+6,""+(r+33));var i;switch(r){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new Fu("Decoding invalid alphanumeric value: "+r)}return new Sr(e+6,i)},n.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<5&&t+e<this.information.getSize();++t)if(t===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0},n.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0},n.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0},n}(),ym=function(){function n(e){this.information=e,this.generalDecoder=new mc(e)}return n.prototype.getInformation=function(){return this.information},n.prototype.getGeneralDecoder=function(){return this.generalDecoder},n}(),cI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rr=function(n){cI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedGtin=function(t,r){t.append("(01)");var i=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,r,i)},e.prototype.encodeCompressedGtinWithoutAI=function(t,r,i){for(var o=0;o<4;++o){var s=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*o,10);s/100===0&&t.append("0"),s/10===0&&t.append("0"),t.append(s)}e.appendCheckDigit(t,i)},e.appendCheckDigit=function(t,r){for(var i=0,o=0;o<13;o++){var s=t.charAt(o+r).charCodeAt(0)-48;i+=o&1?s:3*s}i=10-i%10,i===10&&(i=0),t.append(i)},e.GTIN_SIZE=40,e}(ym),fI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hI=function(n){fI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new De;t.append("(01)");var r=t.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return t.append(i),this.encodeCompressedGtinWithoutAI(t,e.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(Rr),dI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),pI=function(n){dI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){var t=new De;return this.getGeneralDecoder().decodeAllCodes(t,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(ym),gI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_c=function(n){gI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.encodeCompressedWeight=function(t,r,i){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(t,o);for(var s=this.checkWeight(o),l=1e5,c=0;c<5;++c)s/l===0&&t.append("0"),l/=10;t.append(s)},e}(Rr),vI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mm=function(n){vI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+_c.GTIN_SIZE+e.WEIGHT_SIZE)throw new Z;var t=new De;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+_c.GTIN_SIZE,e.WEIGHT_SIZE),t.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(_c),yI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mI=function(n){yI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){t.append("(3103)")},e.prototype.checkWeight=function(t){return t},e}(mm),_I=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xI=function(n){_I(e,n);function e(t){return n.call(this,t)||this}return e.prototype.addWeightCode=function(t,r){r<1e4?t.append("(3202)"):t.append("(3203)")},e.prototype.checkWeight=function(t){return t<1e4?t:t-1e4},e}(mm),wI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),EI=function(n){wI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Rr.GTIN_SIZE)throw new Z;var t=new De;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Rr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(392"),t.append(r),t.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Rr.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return t.append(i.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(Rr),AI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),CI=function(n){AI(e,n);function e(t){return n.call(this,t)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+Rr.GTIN_SIZE)throw new Z;var t=new De;this.encodeCompressedGtin(t,e.HEADER_SIZE);var r=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Rr.GTIN_SIZE,e.LAST_DIGIT_SIZE);t.append("(393"),t.append(r),t.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+Rr.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&t.append("0"),i/10===0&&t.append("0"),t.append(i);var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+Rr.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(Rr),II=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ji=function(n){II(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.dateCode=i,o.firstAIdigits=r,o}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new Z;var t=new De;return this.encodeCompressedGtin(t,e.HEADER_SIZE),this.encodeCompressedWeight(t,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(t,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),t.toString()},e.prototype.encodeCompressedDate=function(t,r){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,e.DATE_SIZE);if(i!==38400){t.append("("),t.append(this.dateCode),t.append(")");var o=i%32;i/=32;var s=i%12+1;i/=12;var l=i;l/10===0&&t.append("0"),t.append(l),s/10===0&&t.append("0"),t.append(s),o/10===0&&t.append("0"),t.append(o)}},e.prototype.addWeightCode=function(t,r){t.append("("),t.append(this.firstAIdigits),t.append(r/1e5),t.append(")")},e.prototype.checkWeight=function(t){return t%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(_c);function SI(n){try{if(n.get(1))return new hI(n);if(!n.get(2))return new pI(n);var e=mc.extractNumericValueFromBitArray(n,1,4);switch(e){case 4:return new mI(n);case 5:return new xI(n)}var t=mc.extractNumericValueFromBitArray(n,1,5);switch(t){case 12:return new EI(n);case 13:return new CI(n)}var r=mc.extractNumericValueFromBitArray(n,1,7);switch(r){case 56:return new ji(n,"310","11");case 57:return new ji(n,"320","11");case 58:return new ji(n,"310","13");case 59:return new ji(n,"320","13");case 60:return new ji(n,"310","15");case 61:return new ji(n,"320","15");case 62:return new ji(n,"310","17");case 63:return new ji(n,"320","17")}}catch(i){throw console.log(i),new Fu("unknown decoder: "+n)}}var Kg=function(){function n(e,t,r,i){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=i}return n.prototype.mayBeLast=function(){return this.maybeLast},n.prototype.getLeftChar=function(){return this.leftchar},n.prototype.getRightChar=function(){return this.rightchar},n.prototype.getFinderPattern=function(){return this.finderpattern},n.prototype.mustBeLast=function(){return this.rightchar==null},n.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},n.equals=function(e,t){return e instanceof n?n.equalsOrNull(e.leftchar,t.leftchar)&&n.equalsOrNull(e.rightchar,t.rightchar)&&n.equalsOrNull(e.finderpattern,t.finderpattern):!1},n.equalsOrNull=function(e,t){return e===null?t===null:n.equals(e,t)},n.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},n}(),TI=function(){function n(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}return n.prototype.getPairs=function(){return this.pairs},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.isReversed=function(){return this.wasReversed},n.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},n.prototype.toString=function(){return"{ "+this.pairs+" }"},n.prototype.equals=function(e,t){return e instanceof n?this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed:!1},n.prototype.checkEqualitity=function(e,t){if(!(!e||!t)){var r;return e.forEach(function(i,o){t.forEach(function(s){i.getLeftChar().getValue()===s.getLeftChar().getValue()&&i.getRightChar().getValue()===s.getRightChar().getValue()&&i.getFinderPatter().getValue()===s.getFinderPatter().getValue()&&(r=!0)})}),r}},n}(),RI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gi=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},OI=function(n){RI(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.pairs=new Array(e.MAX_PAIRS),t.rows=new Array,t.startEnd=[2],t}return e.prototype.decodeRow=function(t,r,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(t,r))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(t,r))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(t,r){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,t))}catch(l){if(l instanceof Z){if(!this.pairs.length)throw new Z;i=!0}}if(this.checkChecksum())return this.pairs;var o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){var s=this.checkRowsBoolean(!1);if(s!=null||(s=this.checkRowsBoolean(!0),s!=null))return s}throw new Z},e.prototype.checkRowsBoolean=function(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());var r=null;try{r=this.checkRows(new Array,0)}catch(i){console.log(i)}return t&&(this.rows=this.rows.reverse()),r},e.prototype.checkRows=function(t,r){for(var i,o,s=r;s<this.rows.length;s++){var l=this.rows[s];this.pairs.length=0;try{for(var c=(i=void 0,Gi(t)),h=c.next();!h.done;h=c.next()){var g=h.value;this.pairs.push(g.getPairs())}}catch(m){i={error:m}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}if(this.pairs.push(l.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var v=new Array(t);v.push(l);try{return this.checkRows(v,s+1)}catch(m){console.log(m)}}}throw new Z},e.isValidSequence=function(t){var r,i;try{for(var o=Gi(e.FINDER_PATTERN_SEQUENCES),s=o.next();!s.done;s=o.next()){var l=s.value;if(!(t.length>l.length)){for(var c=!0,h=0;h<t.length;h++)if(t[h].getFinderPattern().getValue()!==l[h]){c=!1;break}if(c)return!0}}}catch(g){r={error:g}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return!1},e.prototype.storeRow=function(t,r){for(var i=0,o=!1,s=!1;i<this.rows.length;){var l=this.rows[i];if(l.getRowNumber()>t){s=l.isEquivalent(this.pairs);break}o=l.isEquivalent(this.pairs),i++}s||o||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new TI(this.pairs,t,r)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(t,r){var i,o,s,l,c,h;try{for(var g=Gi(r),v=g.next();!v.done;v=g.next()){var m=v.value;if(m.getPairs().length!==t.length){var _=!0;try{for(var A=(s=void 0,Gi(m.getPairs())),I=A.next();!I.done;I=A.next()){var R=I.value,L=!1;try{for(var P=(c=void 0,Gi(t)),F=P.next();!F.done;F=P.next()){var z=F.value;if(Kg.equals(R,z)){L=!0;break}}}catch(q){c={error:q}}finally{try{F&&!F.done&&(h=P.return)&&h.call(P)}finally{if(c)throw c.error}}L||(_=!1)}}catch(q){s={error:q}}finally{try{I&&!I.done&&(l=A.return)&&l.call(A)}finally{if(s)throw s.error}}}}}catch(q){i={error:q}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}},e.isPartialRow=function(t,r){var i,o,s,l,c,h;try{for(var g=Gi(r),v=g.next();!v.done;v=g.next()){var m=v.value,_=!0;try{for(var A=(s=void 0,Gi(t)),I=A.next();!I.done;I=A.next()){var R=I.value,L=!1;try{for(var P=(c=void 0,Gi(m.getPairs())),F=P.next();!F.done;F=P.next()){var z=F.value;if(R.equals(z)){L=!0;break}}}catch(q){c={error:q}}finally{try{F&&!F.done&&(h=P.return)&&h.call(P)}finally{if(c)throw c.error}}if(!L){_=!1;break}}}catch(q){s={error:q}}finally{try{I&&!I.done&&(l=A.return)&&l.call(A)}finally{if(s)throw s.error}}if(_)return!0}}catch(q){i={error:q}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(t){var r=oI.buildBitArray(t),i=SI(r),o=i.parseInformation(),s=t[0].getFinderPattern().getResultPoints(),l=t[t.length-1].getFinderPattern().getResultPoints(),c=[s[0],s[1],l[0],l[1]];return new wn(o,null,null,c,_e.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var t=this.pairs.get(0),r=t.getLeftChar(),i=t.getRightChar();if(i===null)return!1;for(var o=i.getChecksumPortion(),s=2,l=1;l<this.pairs.size();++l){var c=this.pairs.get(l);o+=c.getLeftChar().getChecksumPortion(),s++;var h=c.getRightChar();h!=null&&(o+=h.getChecksumPortion(),s++)}o%=211;var g=211*(s-4)+o;return g===r.getValue()},e.getNextSecondBar=function(t,r){var i;return t.get(r)?(i=t.getNextUnset(r),i=t.getNextSet(i)):(i=t.getNextSet(r),i=t.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(t,r,i){var o=r.length%2===0;this.startFromEven&&(o=!o);var s,l=!0,c=-1;do this.findNextPair(t,r,c),s=this.parseFoundFinderPattern(t,i,o),s===null?c=e.getNextSecondBar(t,this.startEnd[0]):l=!1;while(l);var h=this.decodeDataCharacter(t,s,o,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new Z;var g;try{g=this.decodeDataCharacter(t,s,o,!1)}catch(v){g=null,console.log(v)}return new Kg(h,g,s,!0)},e.prototype.isEmptyPair=function(t){return t.length===0},e.prototype.findNextPair=function(t,r,i){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;var s=t.getSize(),l;if(i>=0)l=i;else if(this.isEmptyPair(r))l=0;else{var c=r[r.length-1];l=c.getFinderPattern().getStartEnd()[1]}var h=r.length%2!==0;this.startFromEven&&(h=!h);for(var g=!1;l<s&&(g=!t.get(l),!!g);)l++;for(var v=0,m=l,_=l;_<s;_++)if(t.get(_)!==g)o[v]++;else{if(v===3){if(h&&e.reverseCounters(o),e.isFinderPattern(o)){this.startEnd[0]=m,this.startEnd[1]=_;return}h&&e.reverseCounters(o),m+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,v--}else v++;o[v]=1,g=!g}throw new Z},e.reverseCounters=function(t){for(var r=t.length,i=0;i<r/2;++i){var o=t[i];t[i]=t[r-i-1],t[r-i-1]=o}},e.prototype.parseFoundFinderPattern=function(t,r,i){var o,s,l;if(i){for(var c=this.startEnd[0]-1;c>=0&&!t.get(c);)c--;c++,o=this.startEnd[0]-c,s=c,l=this.startEnd[1]}else s=this.startEnd[0],l=t.getNextUnset(this.startEnd[1]+1),o=l-this.startEnd[1];var h=this.getDecodeFinderCounters();lt.arraycopy(h,0,h,1,h.length-1),h[0]=o;var g;try{g=this.parseFinderValue(h,e.FINDER_PATTERNS)}catch{return null}return new vm(g,[s,l],s,l,r)},e.prototype.decodeDataCharacter=function(t,r,i,o){for(var s=this.getDataCharacterCounters(),l=0;l<s.length;l++)s[l]=0;if(o)e.recordPatternInReverse(t,r.getStartEnd()[0],s);else{e.recordPattern(t,r.getStartEnd()[1],s);for(var c=0,h=s.length-1;c<h;c++,h--){var g=s[c];s[c]=s[h],s[h]=g}}var v=17,m=Xe.sum(new Int32Array(s))/v,_=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(m-_)/_>.3)throw new Z;for(var A=this.getOddCounts(),I=this.getEvenCounts(),R=this.getOddRoundingErrors(),L=this.getEvenRoundingErrors(),c=0;c<s.length;c++){var P=1*s[c]/m,F=P+.5;if(F<1){if(P<.3)throw new Z;F=1}else if(F>8){if(P>8.7)throw new Z;F=8}var z=c/2;c&1?(I[z]=F,L[z]=P-F):(A[z]=F,R[z]=P-F)}this.adjustOddEvenCounts(v);for(var q=4*r.getValue()+(i?0:2)+(o?0:1)-1,Q=0,D=0,c=A.length-1;c>=0;c--){if(e.isNotA1left(r,i,o)){var T=e.WEIGHTS[q][2*c];D+=A[c]*T}Q+=A[c]}for(var N=0,c=I.length-1;c>=0;c--)if(e.isNotA1left(r,i,o)){var T=e.WEIGHTS[q][2*c+1];N+=I[c]*T}var k=D+N;if(Q&1||Q>13||Q<4)throw new Z;var V=(13-Q)/2,U=e.SYMBOL_WIDEST[V],b=9-U,Fe=Ya.getRSSvalue(A,U,!0),ct=Ya.getRSSvalue(I,b,!1),Rt=e.EVEN_TOTAL_SUBSET[V],We=e.GSUM[V],se=Fe*Rt+ct+We;return new Nc(se,k)},e.isNotA1left=function(t,r,i){return!(t.getValue()===0&&r&&i)},e.prototype.adjustOddEvenCounts=function(t){var r=Xe.sum(new Int32Array(this.getOddCounts())),i=Xe.sum(new Int32Array(this.getEvenCounts())),o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);var l=!1,c=!1;i>13?c=!0:i<4&&(l=!0);var h=r+i-t,g=(r&1)===1,v=(i&1)===0;if(h===1)if(g){if(v)throw new Z;s=!0}else{if(!v)throw new Z;c=!0}else if(h===-1)if(g){if(v)throw new Z;o=!0}else{if(!v)throw new Z;l=!0}else if(h===0){if(g){if(!v)throw new Z;r<i?(o=!0,c=!0):(s=!0,l=!0)}else if(v)throw new Z}else throw new Z;if(o){if(s)throw new Z;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(c)throw new Z;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}c&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(Vo),DI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),PI=function(n){DI(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.count=0,o.finderPattern=i,o}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Nc),NI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),zh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qg=function(n){NI(e,n);function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.possibleLeftPairs=[],t.possibleRightPairs=[],t}return e.prototype.decodeRow=function(t,r,i){var o,s,l,c,h=this.decodePair(r,!1,t,i);e.addOrTally(this.possibleLeftPairs,h),r.reverse();var g=this.decodePair(r,!0,t,i);e.addOrTally(this.possibleRightPairs,g),r.reverse();try{for(var v=zh(this.possibleLeftPairs),m=v.next();!m.done;m=v.next()){var _=m.value;if(_.getCount()>1)try{for(var A=(l=void 0,zh(this.possibleRightPairs)),I=A.next();!I.done;I=A.next()){var R=I.value;if(R.getCount()>1&&e.checkChecksum(_,R))return e.constructResult(_,R)}}catch(L){l={error:L}}finally{try{I&&!I.done&&(c=A.return)&&c.call(A)}finally{if(l)throw l.error}}}}catch(L){o={error:L}}finally{try{m&&!m.done&&(s=v.return)&&s.call(v)}finally{if(o)throw o.error}}throw new Z},e.addOrTally=function(t,r){var i,o;if(r!=null){var s=!1;try{for(var l=zh(t),c=l.next();!c.done;c=l.next()){var h=c.value;if(h.getValue()===r.getValue()){h.incrementCount(),s=!0;break}}}catch(g){i={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}s||t.push(r)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(t,r){for(var i=4537077*t.getValue()+r.getValue(),o=new String(i).toString(),s=new De,l=13-o.length;l>0;l--)s.append("0");s.append(o);for(var c=0,l=0;l<13;l++){var h=s.charAt(l).charCodeAt(0)-48;c+=l&1?h:3*h}c=10-c%10,c===10&&(c=0),s.append(c.toString());var g=t.getFinderPattern().getResultPoints(),v=r.getFinderPattern().getResultPoints();return new wn(s.toString(),null,0,[g[0],g[1],v[0],v[1]],_e.RSS_14,new Date().getTime())},e.checkChecksum=function(t,r){var i=(t.getChecksumPortion()+16*r.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+r.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,i===o},e.prototype.decodePair=function(t,r,i,o){try{var s=this.findFinderPattern(t,r),l=this.parseFoundFinderPattern(t,i,r,s),c=o==null?null:o.get(mt.NEED_RESULT_POINT_CALLBACK);if(c!=null){var h=(s[0]+s[1])/2;r&&(h=t.getSize()-1-h),c.foundPossibleResultPoint(new ge(h,i))}var g=this.decodeDataCharacter(t,l,!0),v=this.decodeDataCharacter(t,l,!1);return new PI(1597*g.getValue()+v.getValue(),g.getChecksumPortion()+4*v.getChecksumPortion(),l)}catch{return null}},e.prototype.decodeDataCharacter=function(t,r,i){for(var o=this.getDataCharacterCounters(),s=0;s<o.length;s++)o[s]=0;if(i)jt.recordPatternInReverse(t,r.getStartEnd()[0],o);else{jt.recordPattern(t,r.getStartEnd()[1]+1,o);for(var l=0,c=o.length-1;l<c;l++,c--){var h=o[l];o[l]=o[c],o[c]=h}}for(var g=i?16:15,v=Xe.sum(new Int32Array(o))/g,m=this.getOddCounts(),_=this.getEvenCounts(),A=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors(),l=0;l<o.length;l++){var R=o[l]/v,L=Math.floor(R+.5);L<1?L=1:L>8&&(L=8);var P=Math.floor(l/2);l&1?(_[P]=L,I[P]=R-L):(m[P]=L,A[P]=R-L)}this.adjustOddEvenCounts(i,g);for(var F=0,z=0,l=m.length-1;l>=0;l--)z*=9,z+=m[l],F+=m[l];for(var q=0,Q=0,l=_.length-1;l>=0;l--)q*=9,q+=_[l],Q+=_[l];var D=z+3*q;if(i){if(F&1||F>12||F<4)throw new Z;var T=(12-F)/2,N=e.OUTSIDE_ODD_WIDEST[T],k=9-N,V=Ya.getRSSvalue(m,N,!1),U=Ya.getRSSvalue(_,k,!0),b=e.OUTSIDE_EVEN_TOTAL_SUBSET[T],Fe=e.OUTSIDE_GSUM[T];return new Nc(V*b+U+Fe,D)}else{if(Q&1||Q>10||Q<4)throw new Z;var T=(10-Q)/2,N=e.INSIDE_ODD_WIDEST[T],k=9-N,V=Ya.getRSSvalue(m,N,!0),U=Ya.getRSSvalue(_,k,!1),ct=e.INSIDE_ODD_TOTAL_SUBSET[T],Fe=e.INSIDE_GSUM[T];return new Nc(U*ct+V+Fe,D)}},e.prototype.findFinderPattern=function(t,r){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var o=t.getSize(),s=!1,l=0;l<o&&(s=!t.get(l),r!==s);)l++;for(var c=0,h=l,g=l;g<o;g++)if(t.get(g)!==s)i[c]++;else{if(c===3){if(Vo.isFinderPattern(i))return[h,g];h+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,c--}else c++;i[c]=1,s=!s}throw new Z},e.prototype.parseFoundFinderPattern=function(t,r,i,o){for(var s=t.get(o[0]),l=o[0]-1;l>=0&&s!==t.get(l);)l--;l++;var c=o[0]-l,h=this.getDecodeFinderCounters(),g=new Int32Array(h.length);lt.arraycopy(h,0,g,1,h.length-1),g[0]=c;var v=this.parseFinderValue(g,e.FINDER_PATTERNS),m=l,_=o[1];return i&&(m=t.getSize()-1-m,_=t.getSize()-1-_),new vm(v,[l,o[1]],m,_,r)},e.prototype.adjustOddEvenCounts=function(t,r){var i=Xe.sum(new Int32Array(this.getOddCounts())),o=Xe.sum(new Int32Array(this.getEvenCounts())),s=!1,l=!1,c=!1,h=!1;t?(i>12?l=!0:i<4&&(s=!0),o>12?h=!0:o<4&&(c=!0)):(i>11?l=!0:i<5&&(s=!0),o>10?h=!0:o<4&&(c=!0));var g=i+o-r,v=(i&1)===(t?1:0),m=(o&1)===1;if(g===1)if(v){if(m)throw new Z;l=!0}else{if(!m)throw new Z;h=!0}else if(g===-1)if(v){if(m)throw new Z;s=!0}else{if(!m)throw new Z;c=!0}else if(g===0){if(v){if(!m)throw new Z;i<o?(s=!0,h=!0):(l=!0,c=!0)}else if(m)throw new Z}else throw new Z;if(s){if(l)throw new Z;Vo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&Vo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(h)throw new Z;Vo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}h&&Vo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(Vo),bI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),vu=function(n){bI(e,n);function e(t){var r=n.call(this)||this;r.readers=[];var i=t?t.get(mt.POSSIBLE_FORMATS):null,o=t&&t.get(mt.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,s=t&&t.get(mt.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(_e.EAN_13)||i.includes(_e.UPC_A)||i.includes(_e.EAN_8)||i.includes(_e.UPC_E))&&r.readers.push(new Uh(t)),i.includes(_e.CODE_39)&&r.readers.push(new Vg(o,s)),i.includes(_e.CODE_93)&&r.readers.push(new Ug),i.includes(_e.CODE_128)&&r.readers.push(new Bg),i.includes(_e.ITF)&&r.readers.push(new zg),i.includes(_e.CODABAR)&&r.readers.push(new tI),i.includes(_e.RSS_14)&&r.readers.push(new qg),i.includes(_e.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),r.readers.push(new OI))),r.readers.length===0&&(r.readers.push(new Uh(t)),r.readers.push(new Vg),r.readers.push(new Ug),r.readers.push(new Uh(t)),r.readers.push(new Bg),r.readers.push(new zg),r.readers.push(new qg)),r}return e.prototype.decodeRow=function(t,r,i){for(var o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,r,i)}catch{}throw new Z},e.prototype.reset=function(){this.readers.forEach(function(t){return t.reset()})},e}(jt),MI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){MI(e,n);function e(t,r){return t===void 0&&(t=500),n.call(this,new vu(r),t,r)||this}return e})(hs);var Yg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ze=function(){function n(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}return n.prototype.getECCodewords=function(){return this.ecCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),Ye=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),kI=function(){function n(e,t,r,i,o,s){var l,c;this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=o,this.ecBlocks=s;var h=0,g=s.getECCodewords(),v=s.getECBlocks();try{for(var m=Yg(v),_=m.next();!_.done;_=m.next()){var A=_.value;h+=A.getCount()*(A.getDataCodewords()+g)}}catch(I){l={error:I}}finally{try{_&&!_.done&&(c=m.return)&&c.call(m)}finally{if(l)throw l.error}}this.totalCodewords=h}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},n.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},n.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},n.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getECBlocks=function(){return this.ecBlocks},n.getVersionForDimensions=function(e,t){var r,i;if(e&1||t&1)throw new ue;try{for(var o=Yg(n.VERSIONS),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.symbolSizeRows===e&&l.symbolSizeColumns===t)return l}}catch(c){r={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}throw new ue},n.prototype.toString=function(){return""+this.versionNumber},n.buildVersions=function(){return[new n(1,10,10,8,8,new Ze(5,new Ye(1,3))),new n(2,12,12,10,10,new Ze(7,new Ye(1,5))),new n(3,14,14,12,12,new Ze(10,new Ye(1,8))),new n(4,16,16,14,14,new Ze(12,new Ye(1,12))),new n(5,18,18,16,16,new Ze(14,new Ye(1,18))),new n(6,20,20,18,18,new Ze(18,new Ye(1,22))),new n(7,22,22,20,20,new Ze(20,new Ye(1,30))),new n(8,24,24,22,22,new Ze(24,new Ye(1,36))),new n(9,26,26,24,24,new Ze(28,new Ye(1,44))),new n(10,32,32,14,14,new Ze(36,new Ye(1,62))),new n(11,36,36,16,16,new Ze(42,new Ye(1,86))),new n(12,40,40,18,18,new Ze(48,new Ye(1,114))),new n(13,44,44,20,20,new Ze(56,new Ye(1,144))),new n(14,48,48,22,22,new Ze(68,new Ye(1,174))),new n(15,52,52,24,24,new Ze(42,new Ye(2,102))),new n(16,64,64,14,14,new Ze(56,new Ye(2,140))),new n(17,72,72,16,16,new Ze(36,new Ye(4,92))),new n(18,80,80,18,18,new Ze(48,new Ye(4,114))),new n(19,88,88,20,20,new Ze(56,new Ye(4,144))),new n(20,96,96,22,22,new Ze(68,new Ye(4,174))),new n(21,104,104,24,24,new Ze(56,new Ye(6,136))),new n(22,120,120,18,18,new Ze(68,new Ye(6,175))),new n(23,132,132,20,20,new Ze(62,new Ye(8,163))),new n(24,144,144,22,22,new Ze(62,new Ye(8,156),new Ye(2,155))),new n(25,8,18,6,16,new Ze(7,new Ye(1,5))),new n(26,8,32,6,14,new Ze(11,new Ye(1,10))),new n(27,12,26,10,24,new Ze(14,new Ye(1,16))),new n(28,12,36,10,16,new Ze(18,new Ye(1,22))),new n(29,16,36,14,16,new Ze(24,new Ye(1,32))),new n(30,16,48,14,22,new Ze(28,new Ye(1,49)))]},n.VERSIONS=n.buildVersions(),n}(),LI=function(){function n(e){var t=e.getHeight();if(t<8||t>144||t&1)throw new ue;this.version=n.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Kr(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return n.prototype.getVersion=function(){return this.version},n.readVersion=function(e){var t=e.getHeight(),r=e.getWidth();return kI.getVersionForDimensions(t,r)},n.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),t=0,r=4,i=0,o=this.mappingBitMatrix.getHeight(),s=this.mappingBitMatrix.getWidth(),l=!1,c=!1,h=!1,g=!1;do if(r===o&&i===0&&!l)e[t++]=this.readCorner1(o,s)&255,r-=2,i+=2,l=!0;else if(r===o-2&&i===0&&s&3&&!c)e[t++]=this.readCorner2(o,s)&255,r-=2,i+=2,c=!0;else if(r===o+4&&i===2&&!(s&7)&&!h)e[t++]=this.readCorner3(o,s)&255,r-=2,i+=2,h=!0;else if(r===o-2&&i===0&&(s&7)===4&&!g)e[t++]=this.readCorner4(o,s)&255,r-=2,i+=2,g=!0;else{do r<o&&i>=0&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r-=2,i+=2;while(r>=0&&i<s);r+=1,i+=3;do r>=0&&i<s&&!this.readMappingMatrix.get(i,r)&&(e[t++]=this.readUtah(r,i,o,s)&255),r+=2,i-=2;while(r<o&&i>=0);r+=3,i+=1}while(r<o||i<s);if(t!==this.version.getTotalCodewords())throw new ue;return e},n.prototype.readModule=function(e,t,r,i){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)},n.prototype.readUtah=function(e,t,r,i){var o=0;return this.readModule(e-2,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-2,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e-1,t,r,i)&&(o|=1),o<<=1,this.readModule(e,t-2,r,i)&&(o|=1),o<<=1,this.readModule(e,t-1,r,i)&&(o|=1),o<<=1,this.readModule(e,t,r,i)&&(o|=1),o},n.prototype.readCorner1=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.readCorner2=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner3=function(e,t){var r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r},n.prototype.readCorner4=function(e,t){var r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r},n.prototype.extractDataRegion=function(e){var t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new Ae("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),o=this.version.getDataRegionSizeColumns(),s=t/i|0,l=r/o|0,c=s*i,h=l*o,g=new Kr(h,c),v=0;v<s;++v)for(var m=v*i,_=0;_<l;++_)for(var A=_*o,I=0;I<i;++I)for(var R=v*(i+2)+1+I,L=m+I,P=0;P<o;++P){var F=_*(o+2)+1+P;if(e.get(F,R)){var z=A+P;g.set(z,L)}}return g},n}(),Qg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FI=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t){var r,i,o,s,l=t.getECBlocks(),c=0,h=l.getECBlocks();try{for(var g=Qg(h),v=g.next();!v.done;v=g.next()){var m=v.value;c+=m.getCount()}}catch(Fe){r={error:Fe}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}var _=new Array(c),A=0;try{for(var I=Qg(h),R=I.next();!R.done;R=I.next())for(var m=R.value,L=0;L<m.getCount();L++){var P=m.getDataCodewords(),F=l.getECCodewords()+P;_[A++]=new n(P,new Uint8Array(F))}}catch(Fe){o={error:Fe}}finally{try{R&&!R.done&&(s=I.return)&&s.call(I)}finally{if(o)throw o.error}}for(var z=_[0].codewords.length,q=z-l.getECCodewords(),Q=q-1,D=0,L=0;L<Q;L++)for(var T=0;T<A;T++)_[T].codewords[L]=e[D++];for(var N=t.getVersionNumber()===24,k=N?8:A,T=0;T<k;T++)_[T].codewords[q-1]=e[D++];for(var V=_[0].codewords.length,L=q;L<V;L++)for(var T=0;T<A;T++){var U=N?(T+8)%A:T,b=N&&U>7?L-1:L;_[U].codewords[b]=e[D++]}if(D!==e.length)throw new Ae;return _},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),_m=function(){function n(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return n.prototype.getBitOffset=function(){return this.bitOffset},n.prototype.getByteOffset=function(){return this.byteOffset},n.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new Ae(""+e);var t=0,r=this.bitOffset,i=this.byteOffset,o=this.bytes;if(r>0){var s=8-r,l=e<s?e:s,c=s-l,h=255>>8-l<<c;t=(o[i]&h)>>c,e-=l,r+=l,r===8&&(r=0,i++)}if(e>0){for(;e>=8;)t=t<<8|o[i]&255,i++,e-=8;if(e>0){var c=8-e,h=255>>c<<c;t=t<<e|(o[i]&h)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=i,t},n.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},n}(),Ft;(function(n){n[n.PAD_ENCODE=0]="PAD_ENCODE",n[n.ASCII_ENCODE=1]="ASCII_ENCODE",n[n.C40_ENCODE=2]="C40_ENCODE",n[n.TEXT_ENCODE=3]="TEXT_ENCODE",n[n.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",n[n.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",n[n.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ft||(Ft={}));var BI=function(){function n(){}return n.decode=function(e){var t=new _m(e),r=new De,i=new De,o=new Array,s=Ft.ASCII_ENCODE;do if(s===Ft.ASCII_ENCODE)s=this.decodeAsciiSegment(t,r,i);else{switch(s){case Ft.C40_ENCODE:this.decodeC40Segment(t,r);break;case Ft.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case Ft.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case Ft.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case Ft.BASE256_ENCODE:this.decodeBase256Segment(t,r,o);break;default:throw new ue}s=Ft.ASCII_ENCODE}while(s!==Ft.PAD_ENCODE&&t.available()>0);return i.length()>0&&r.append(i.toString()),new Kc(e,r.toString(),o.length===0?null:o,null)},n.decodeAsciiSegment=function(e,t,r){var i=!1;do{var o=e.readBits(8);if(o===0)throw new ue;if(o<=128)return i&&(o+=128),t.append(String.fromCharCode(o-1)),Ft.ASCII_ENCODE;if(o===129)return Ft.PAD_ENCODE;if(o<=229){var s=o-130;s<10&&t.append("0"),t.append(""+s)}else switch(o){case 230:return Ft.C40_ENCODE;case 231:return Ft.BASE256_ENCODE;case 232:t.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:t.append("[)>05"),r.insert(0,"");break;case 237:t.append("[)>06"),r.insert(0,"");break;case 238:return Ft.ANSIX12_ENCODE;case 239:return Ft.TEXT_ENCODE;case 240:return Ft.EDIFACT_ENCODE;case 241:break;default:if(o!==254||e.available()!==0)throw new ue;break}}while(e.available()>0);return Ft.ASCII_ENCODE},n.decodeC40Segment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(o){case 0:if(c<3)o=c+1;else if(c<this.C40_BASIC_SET_CHARS.length){var h=this.C40_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ue;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.C40_SHIFT2_SET_CHARS.length){var h=this.C40_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new ue}o=0;break;case 3:r?(t.append(String.fromCharCode(c+224)),r=!1):t.append(String.fromCharCode(c+96)),o=0;break;default:throw new ue}}}while(e.available()>0)},n.decodeTextSegment=function(e,t){var r=!1,i=[],o=0;do{if(e.available()===8)return;var s=e.readBits(8);if(s===254)return;this.parseTwoBytes(s,e.readBits(8),i);for(var l=0;l<3;l++){var c=i[l];switch(o){case 0:if(c<3)o=c+1;else if(c<this.TEXT_BASIC_SET_CHARS.length){var h=this.TEXT_BASIC_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else throw new ue;break;case 1:r?(t.append(String.fromCharCode(c+128)),r=!1):t.append(String.fromCharCode(c)),o=0;break;case 2:if(c<this.TEXT_SHIFT2_SET_CHARS.length){var h=this.TEXT_SHIFT2_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h)}else switch(c){case 27:t.append("");break;case 30:r=!0;break;default:throw new ue}o=0;break;case 3:if(c<this.TEXT_SHIFT3_SET_CHARS.length){var h=this.TEXT_SHIFT3_SET_CHARS[c];r?(t.append(String.fromCharCode(h.charCodeAt(0)+128)),r=!1):t.append(h),o=0}else throw new ue;break;default:throw new ue}}}while(e.available()>0)},n.decodeAnsiX12Segment=function(e,t){var r=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),r);for(var o=0;o<3;o++){var s=r[o];switch(s){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(s<14)t.append(String.fromCharCode(s+44));else if(s<40)t.append(String.fromCharCode(s+51));else throw new ue;break}}}while(e.available()>0)},n.parseTwoBytes=function(e,t,r){var i=(e<<8)+t-1,o=Math.floor(i/1600);r[0]=o,i-=o*1600,o=Math.floor(i/40),r[1]=o,r[2]=i-o*40},n.decodeEdifactSegment=function(e,t){do{if(e.available()<=16)return;for(var r=0;r<4;r++){var i=e.readBits(6);if(i===31){var o=8-e.getBitOffset();o!==8&&e.readBits(o);return}i&32||(i|=64),t.append(String.fromCharCode(i))}}while(e.available()>0)},n.decodeBase256Segment=function(e,t,r){var i=1+e.getByteOffset(),o=this.unrandomize255State(e.readBits(8),i++),s;if(o===0?s=e.available()/8|0:o<250?s=o:s=250*(o-249)+this.unrandomize255State(e.readBits(8),i++),s<0)throw new ue;for(var l=new Uint8Array(s),c=0;c<s;c++){if(e.available()<8)throw new ue;l[c]=this.unrandomize255State(e.readBits(8),i++)}r.push(l);try{t.append(cr.decode(l,ze.ISO88591))}catch(h){throw new Fu("Platform does not support required encoding: "+h.message)}},n.unrandomize255State=function(e,t){var r=149*t%255+1,i=e-r;return i>=0?i:i+256},n.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],n.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],n.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],n.TEXT_SHIFT2_SET_CHARS=n.C40_SHIFT2_SET_CHARS,n.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""],n}(),VI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},UI=function(){function n(){this.rsDecoder=new qc(Un.DATA_MATRIX_FIELD_256)}return n.prototype.decode=function(e){var t,r,i=new LI(e),o=i.getVersion(),s=i.readCodewords(),l=FI.getDataBlocks(s,o),c=0;try{for(var h=VI(l),g=h.next();!g.done;g=h.next()){var v=g.value;c+=v.getNumDataCodewords()}}catch(F){t={error:F}}finally{try{g&&!g.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}for(var m=new Uint8Array(c),_=l.length,A=0;A<_;A++){var I=l[A],R=I.getCodewords(),L=I.getNumDataCodewords();this.correctErrors(R,L);for(var P=0;P<L;P++)m[P*_+A]=R[P]}return BI.decode(m)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new en}for(var i=0;i<t;i++)e[i]=r[i]},n}(),zI=function(){function n(e){this.image=e,this.rectangleDetector=new md(this.image)}return n.prototype.detect=function(){var e=this.rectangleDetector.detect(),t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new Z;t=this.shiftToModuleCenter(t);var r=t[0],i=t[1],o=t[2],s=t[3],l=this.transitionsBetween(r,s)+1,c=this.transitionsBetween(o,s)+1;(l&1)===1&&(l+=1),(c&1)===1&&(c+=1),4*l<7*c&&4*c<7*l&&(l=c=Math.max(l,c));var h=n.sampleGrid(this.image,r,i,o,s,l,c);return new p1(h,[r,i,o,s])},n.shiftPoint=function(e,t,r){var i=(t.getX()-e.getX())/(r+1),o=(t.getY()-e.getY())/(r+1);return new ge(e.getX()+i,e.getY()+o)},n.moveAway=function(e,t,r){var i=e.getX(),o=e.getY();return i<t?i-=1:i+=1,o<r?o-=1:o+=1,new ge(i,o)},n.prototype.detectSolid1=function(e){var t=e[0],r=e[1],i=e[3],o=e[2],s=this.transitionsBetween(t,r),l=this.transitionsBetween(r,i),c=this.transitionsBetween(i,o),h=this.transitionsBetween(o,t),g=s,v=[o,t,r,i];return g>l&&(g=l,v[0]=t,v[1]=r,v[2]=i,v[3]=o),g>c&&(g=c,v[0]=r,v[1]=i,v[2]=o,v[3]=t),g>h&&(v[0]=i,v[1]=o,v[2]=t,v[3]=r),v},n.prototype.detectSolid2=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),l=n.shiftPoint(r,i,(s+1)*4),c=n.shiftPoint(i,r,(s+1)*4),h=this.transitionsBetween(l,t),g=this.transitionsBetween(c,o);return h<g?(e[0]=t,e[1]=r,e[2]=i,e[3]=o):(e[0]=r,e[1]=i,e[2]=o,e[3]=t),e},n.prototype.correctTopRight=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o),l=this.transitionsBetween(r,o),c=n.shiftPoint(t,r,(l+1)*4),h=n.shiftPoint(i,r,(s+1)*4);s=this.transitionsBetween(c,o),l=this.transitionsBetween(h,o);var g=new ge(o.getX()+(i.getX()-r.getX())/(s+1),o.getY()+(i.getY()-r.getY())/(s+1)),v=new ge(o.getX()+(t.getX()-r.getX())/(l+1),o.getY()+(t.getY()-r.getY())/(l+1));if(!this.isValid(g))return this.isValid(v)?v:null;if(!this.isValid(v))return g;var m=this.transitionsBetween(c,g)+this.transitionsBetween(h,g),_=this.transitionsBetween(c,v)+this.transitionsBetween(h,v);return m>_?g:v},n.prototype.shiftToModuleCenter=function(e){var t=e[0],r=e[1],i=e[2],o=e[3],s=this.transitionsBetween(t,o)+1,l=this.transitionsBetween(i,o)+1,c=n.shiftPoint(t,r,l*4),h=n.shiftPoint(i,r,s*4);s=this.transitionsBetween(c,o)+1,l=this.transitionsBetween(h,o)+1,(s&1)===1&&(s+=1),(l&1)===1&&(l+=1);var g=(t.getX()+r.getX()+i.getX()+o.getX())/4,v=(t.getY()+r.getY()+i.getY()+o.getY())/4;t=n.moveAway(t,g,v),r=n.moveAway(r,g,v),i=n.moveAway(i,g,v),o=n.moveAway(o,g,v);var m,_;return c=n.shiftPoint(t,r,l*4),c=n.shiftPoint(c,o,s*4),m=n.shiftPoint(r,t,l*4),m=n.shiftPoint(m,i,s*4),h=n.shiftPoint(i,o,l*4),h=n.shiftPoint(h,r,s*4),_=n.shiftPoint(o,i,l*4),_=n.shiftPoint(_,t,s*4),[c,m,h,_]},n.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},n.sampleGrid=function(e,t,r,i,o,s,l){var c=g1.getInstance();return c.sampleGrid(e,s,l,.5,.5,s-.5,.5,s-.5,l-.5,.5,l-.5,t.getX(),t.getY(),o.getX(),o.getY(),i.getX(),i.getY(),r.getX(),r.getY())},n.prototype.transitionsBetween=function(e,t){var r=Math.trunc(e.getX()),i=Math.trunc(e.getY()),o=Math.trunc(t.getX()),s=Math.trunc(t.getY()),l=Math.abs(s-i)>Math.abs(o-r);if(l){var c=r;r=i,i=c,c=o,o=s,s=c}for(var h=Math.abs(o-r),g=Math.abs(s-i),v=-h/2,m=i<s?1:-1,_=r<o?1:-1,A=0,I=this.image.get(l?i:r,l?r:i),R=r,L=i;R!==o;R+=_){var P=this.image.get(l?L:R,l?R:L);if(P!==I&&(A++,I=P),v+=g,v>0){if(L===s)break;L+=m,v-=h}}return A},n}(),wd=function(){function n(){this.decoder=new UI}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r,i;if(t!=null&&t.has(mt.PURE_BARCODE)){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(o),i=n.NO_POINTS}else{var s=new zI(e.getBlackMatrix()).detect();r=this.decoder.decode(s.getBits()),i=s.getPoints()}var l=r.getRawBytes(),c=new wn(r.getText(),l,8*l.length,i,_e.DATA_MATRIX,lt.currentTimeMillis()),h=r.getByteSegments();h!=null&&c.putMetadata(fn.BYTE_SEGMENTS,h);var g=r.getECLevel();return g!=null&&c.putMetadata(fn.ERROR_CORRECTION_LEVEL,g),c},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t==null||r==null)throw new Z;var i=this.moduleSize(t,e),o=t[1],s=r[1],l=t[0],c=r[0],h=(c-l+1)/i,g=(s-o+1)/i;if(h<=0||g<=0)throw new Z;var v=i/2;o+=v,l+=v;for(var m=new Kr(h,g),_=0;_<g;_++)for(var A=o+_*i,I=0;I<h;I++)e.get(l+I*i,A)&&m.set(I,_);return m},n.moduleSize=function(e,t){for(var r=t.getWidth(),i=e[0],o=e[1];i<r&&t.get(i,o);)i++;if(i===r)throw new Z;var s=i-e[0];if(s===0)throw new Z;return s},n.NO_POINTS=[],n}(),HI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){HI(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new wd,t)||this}return e})(hs);var Qa;(function(n){n[n.L=0]="L",n[n.M=1]="M",n[n.Q=2]="Q",n[n.H=3]="H"})(Qa||(Qa={}));var jI=function(){function n(e,t,r){this.value=e,this.stringValue=t,this.bits=r,n.FOR_BITS.set(r,this),n.FOR_VALUE.set(e,this)}return n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.fromString=function(e){switch(e){case"L":return n.L;case"M":return n.M;case"Q":return n.Q;case"H":return n.H;default:throw new Tr(e+"not available")}},n.prototype.toString=function(){return this.stringValue},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.forBits=function(e){if(e<0||e>=n.FOR_BITS.size)throw new Ae;return n.FOR_BITS.get(e)},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.L=new n(Qa.L,"L",1),n.M=new n(Qa.M,"M",0),n.Q=new n(Qa.Q,"Q",3),n.H=new n(Qa.H,"H",2),n}(),GI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},xm=function(){function n(e){this.errorCorrectionLevel=jI.forBits(e>>3&3),this.dataMask=e&7}return n.numBitsDiffering=function(e,t){return be.bitCount(e^t)},n.decodeFormatInformation=function(e,t){var r=n.doDecodeFormatInformation(e,t);return r!==null?r:n.doDecodeFormatInformation(e^n.FORMAT_INFO_MASK_QR,t^n.FORMAT_INFO_MASK_QR)},n.doDecodeFormatInformation=function(e,t){var r,i,o=Number.MAX_SAFE_INTEGER,s=0;try{for(var l=GI(n.FORMAT_INFO_DECODE_LOOKUP),c=l.next();!c.done;c=l.next()){var h=c.value,g=h[0];if(g===e||g===t)return new n(h[1]);var v=n.numBitsDiffering(e,g);v<o&&(s=h[1],o=v),e!==t&&(v=n.numBitsDiffering(t,g),v<o&&(s=h[1],o=v))}}catch(m){r={error:m}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o<=3?new n(s):null},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getDataMask=function(){return this.dataMask},n.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask},n.FORMAT_INFO_MASK_QR=21522,n.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],n}(),WI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$=function(){function n(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.ecCodewordsPerBlock=e,this.ecBlocks=t}return n.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},n.prototype.getNumBlocks=function(){var e,t,r=0,i=this.ecBlocks;try{for(var o=WI(i),s=o.next();!s.done;s=o.next()){var l=s.value;r+=l.getCount()}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r},n.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},n.prototype.getECBlocks=function(){return this.ecBlocks},n}(),O=function(){function n(e,t){this.count=e,this.dataCodewords=t}return n.prototype.getCount=function(){return this.count},n.prototype.getDataCodewords=function(){return this.dataCodewords},n}(),$I=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Go=function(){function n(e,t){for(var r,i,o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];this.versionNumber=e,this.alignmentPatternCenters=t,this.ecBlocks=o;var l=0,c=o[0].getECCodewordsPerBlock(),h=o[0].getECBlocks();try{for(var g=$I(h),v=g.next();!v.done;v=g.next()){var m=v.value;l+=m.getCount()*(m.getDataCodewords()+c)}}catch(_){r={error:_}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}this.totalCodewords=l}return n.prototype.getVersionNumber=function(){return this.versionNumber},n.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},n.prototype.getTotalCodewords=function(){return this.totalCodewords},n.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},n.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},n.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new ue;try{return this.getVersionForNumber((e-17)/4)}catch{throw new ue}},n.getVersionForNumber=function(e){if(e<1||e>40)throw new Ae;return n.VERSIONS[e-1]},n.decodeVersionInformation=function(e){for(var t=Number.MAX_SAFE_INTEGER,r=0,i=0;i<n.VERSION_DECODE_INFO.length;i++){var o=n.VERSION_DECODE_INFO[i];if(o===e)return n.getVersionForNumber(i+7);var s=xm.numBitsDiffering(e,o);s<t&&(r=i+7,t=s)}return t<=3?n.getVersionForNumber(r):null},n.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),t=new Kr(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);for(var r=this.alignmentPatternCenters.length,i=0;i<r;i++)for(var o=this.alignmentPatternCenters[i]-2,s=0;s<r;s++)i===0&&(s===0||s===r-1)||i===r-1&&s===0||t.setRegion(this.alignmentPatternCenters[s]-2,o,5,5);return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t},n.prototype.toString=function(){return""+this.versionNumber},n.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),n.VERSIONS=[new n(1,new Int32Array(0),new $(7,new O(1,19)),new $(10,new O(1,16)),new $(13,new O(1,13)),new $(17,new O(1,9))),new n(2,Int32Array.from([6,18]),new $(10,new O(1,34)),new $(16,new O(1,28)),new $(22,new O(1,22)),new $(28,new O(1,16))),new n(3,Int32Array.from([6,22]),new $(15,new O(1,55)),new $(26,new O(1,44)),new $(18,new O(2,17)),new $(22,new O(2,13))),new n(4,Int32Array.from([6,26]),new $(20,new O(1,80)),new $(18,new O(2,32)),new $(26,new O(2,24)),new $(16,new O(4,9))),new n(5,Int32Array.from([6,30]),new $(26,new O(1,108)),new $(24,new O(2,43)),new $(18,new O(2,15),new O(2,16)),new $(22,new O(2,11),new O(2,12))),new n(6,Int32Array.from([6,34]),new $(18,new O(2,68)),new $(16,new O(4,27)),new $(24,new O(4,19)),new $(28,new O(4,15))),new n(7,Int32Array.from([6,22,38]),new $(20,new O(2,78)),new $(18,new O(4,31)),new $(18,new O(2,14),new O(4,15)),new $(26,new O(4,13),new O(1,14))),new n(8,Int32Array.from([6,24,42]),new $(24,new O(2,97)),new $(22,new O(2,38),new O(2,39)),new $(22,new O(4,18),new O(2,19)),new $(26,new O(4,14),new O(2,15))),new n(9,Int32Array.from([6,26,46]),new $(30,new O(2,116)),new $(22,new O(3,36),new O(2,37)),new $(20,new O(4,16),new O(4,17)),new $(24,new O(4,12),new O(4,13))),new n(10,Int32Array.from([6,28,50]),new $(18,new O(2,68),new O(2,69)),new $(26,new O(4,43),new O(1,44)),new $(24,new O(6,19),new O(2,20)),new $(28,new O(6,15),new O(2,16))),new n(11,Int32Array.from([6,30,54]),new $(20,new O(4,81)),new $(30,new O(1,50),new O(4,51)),new $(28,new O(4,22),new O(4,23)),new $(24,new O(3,12),new O(8,13))),new n(12,Int32Array.from([6,32,58]),new $(24,new O(2,92),new O(2,93)),new $(22,new O(6,36),new O(2,37)),new $(26,new O(4,20),new O(6,21)),new $(28,new O(7,14),new O(4,15))),new n(13,Int32Array.from([6,34,62]),new $(26,new O(4,107)),new $(22,new O(8,37),new O(1,38)),new $(24,new O(8,20),new O(4,21)),new $(22,new O(12,11),new O(4,12))),new n(14,Int32Array.from([6,26,46,66]),new $(30,new O(3,115),new O(1,116)),new $(24,new O(4,40),new O(5,41)),new $(20,new O(11,16),new O(5,17)),new $(24,new O(11,12),new O(5,13))),new n(15,Int32Array.from([6,26,48,70]),new $(22,new O(5,87),new O(1,88)),new $(24,new O(5,41),new O(5,42)),new $(30,new O(5,24),new O(7,25)),new $(24,new O(11,12),new O(7,13))),new n(16,Int32Array.from([6,26,50,74]),new $(24,new O(5,98),new O(1,99)),new $(28,new O(7,45),new O(3,46)),new $(24,new O(15,19),new O(2,20)),new $(30,new O(3,15),new O(13,16))),new n(17,Int32Array.from([6,30,54,78]),new $(28,new O(1,107),new O(5,108)),new $(28,new O(10,46),new O(1,47)),new $(28,new O(1,22),new O(15,23)),new $(28,new O(2,14),new O(17,15))),new n(18,Int32Array.from([6,30,56,82]),new $(30,new O(5,120),new O(1,121)),new $(26,new O(9,43),new O(4,44)),new $(28,new O(17,22),new O(1,23)),new $(28,new O(2,14),new O(19,15))),new n(19,Int32Array.from([6,30,58,86]),new $(28,new O(3,113),new O(4,114)),new $(26,new O(3,44),new O(11,45)),new $(26,new O(17,21),new O(4,22)),new $(26,new O(9,13),new O(16,14))),new n(20,Int32Array.from([6,34,62,90]),new $(28,new O(3,107),new O(5,108)),new $(26,new O(3,41),new O(13,42)),new $(30,new O(15,24),new O(5,25)),new $(28,new O(15,15),new O(10,16))),new n(21,Int32Array.from([6,28,50,72,94]),new $(28,new O(4,116),new O(4,117)),new $(26,new O(17,42)),new $(28,new O(17,22),new O(6,23)),new $(30,new O(19,16),new O(6,17))),new n(22,Int32Array.from([6,26,50,74,98]),new $(28,new O(2,111),new O(7,112)),new $(28,new O(17,46)),new $(30,new O(7,24),new O(16,25)),new $(24,new O(34,13))),new n(23,Int32Array.from([6,30,54,78,102]),new $(30,new O(4,121),new O(5,122)),new $(28,new O(4,47),new O(14,48)),new $(30,new O(11,24),new O(14,25)),new $(30,new O(16,15),new O(14,16))),new n(24,Int32Array.from([6,28,54,80,106]),new $(30,new O(6,117),new O(4,118)),new $(28,new O(6,45),new O(14,46)),new $(30,new O(11,24),new O(16,25)),new $(30,new O(30,16),new O(2,17))),new n(25,Int32Array.from([6,32,58,84,110]),new $(26,new O(8,106),new O(4,107)),new $(28,new O(8,47),new O(13,48)),new $(30,new O(7,24),new O(22,25)),new $(30,new O(22,15),new O(13,16))),new n(26,Int32Array.from([6,30,58,86,114]),new $(28,new O(10,114),new O(2,115)),new $(28,new O(19,46),new O(4,47)),new $(28,new O(28,22),new O(6,23)),new $(30,new O(33,16),new O(4,17))),new n(27,Int32Array.from([6,34,62,90,118]),new $(30,new O(8,122),new O(4,123)),new $(28,new O(22,45),new O(3,46)),new $(30,new O(8,23),new O(26,24)),new $(30,new O(12,15),new O(28,16))),new n(28,Int32Array.from([6,26,50,74,98,122]),new $(30,new O(3,117),new O(10,118)),new $(28,new O(3,45),new O(23,46)),new $(30,new O(4,24),new O(31,25)),new $(30,new O(11,15),new O(31,16))),new n(29,Int32Array.from([6,30,54,78,102,126]),new $(30,new O(7,116),new O(7,117)),new $(28,new O(21,45),new O(7,46)),new $(30,new O(1,23),new O(37,24)),new $(30,new O(19,15),new O(26,16))),new n(30,Int32Array.from([6,26,52,78,104,130]),new $(30,new O(5,115),new O(10,116)),new $(28,new O(19,47),new O(10,48)),new $(30,new O(15,24),new O(25,25)),new $(30,new O(23,15),new O(25,16))),new n(31,Int32Array.from([6,30,56,82,108,134]),new $(30,new O(13,115),new O(3,116)),new $(28,new O(2,46),new O(29,47)),new $(30,new O(42,24),new O(1,25)),new $(30,new O(23,15),new O(28,16))),new n(32,Int32Array.from([6,34,60,86,112,138]),new $(30,new O(17,115)),new $(28,new O(10,46),new O(23,47)),new $(30,new O(10,24),new O(35,25)),new $(30,new O(19,15),new O(35,16))),new n(33,Int32Array.from([6,30,58,86,114,142]),new $(30,new O(17,115),new O(1,116)),new $(28,new O(14,46),new O(21,47)),new $(30,new O(29,24),new O(19,25)),new $(30,new O(11,15),new O(46,16))),new n(34,Int32Array.from([6,34,62,90,118,146]),new $(30,new O(13,115),new O(6,116)),new $(28,new O(14,46),new O(23,47)),new $(30,new O(44,24),new O(7,25)),new $(30,new O(59,16),new O(1,17))),new n(35,Int32Array.from([6,30,54,78,102,126,150]),new $(30,new O(12,121),new O(7,122)),new $(28,new O(12,47),new O(26,48)),new $(30,new O(39,24),new O(14,25)),new $(30,new O(22,15),new O(41,16))),new n(36,Int32Array.from([6,24,50,76,102,128,154]),new $(30,new O(6,121),new O(14,122)),new $(28,new O(6,47),new O(34,48)),new $(30,new O(46,24),new O(10,25)),new $(30,new O(2,15),new O(64,16))),new n(37,Int32Array.from([6,28,54,80,106,132,158]),new $(30,new O(17,122),new O(4,123)),new $(28,new O(29,46),new O(14,47)),new $(30,new O(49,24),new O(10,25)),new $(30,new O(24,15),new O(46,16))),new n(38,Int32Array.from([6,32,58,84,110,136,162]),new $(30,new O(4,122),new O(18,123)),new $(28,new O(13,46),new O(32,47)),new $(30,new O(48,24),new O(14,25)),new $(30,new O(42,15),new O(32,16))),new n(39,Int32Array.from([6,26,54,82,110,138,166]),new $(30,new O(20,117),new O(4,118)),new $(28,new O(40,47),new O(7,48)),new $(30,new O(43,24),new O(22,25)),new $(30,new O(10,15),new O(67,16))),new n(40,Int32Array.from([6,30,58,86,114,142,170]),new $(30,new O(19,118),new O(6,119)),new $(28,new O(18,47),new O(31,48)),new $(30,new O(34,24),new O(34,25)),new $(30,new O(20,15),new O(61,16)))],n}(),Qt;(function(n){n[n.DATA_MASK_000=0]="DATA_MASK_000",n[n.DATA_MASK_001=1]="DATA_MASK_001",n[n.DATA_MASK_010=2]="DATA_MASK_010",n[n.DATA_MASK_011=3]="DATA_MASK_011",n[n.DATA_MASK_100=4]="DATA_MASK_100",n[n.DATA_MASK_101=5]="DATA_MASK_101",n[n.DATA_MASK_110=6]="DATA_MASK_110",n[n.DATA_MASK_111=7]="DATA_MASK_111"})(Qt||(Qt={}));var Zg=function(){function n(e,t){this.value=e,this.isMasked=t}return n.prototype.unmaskBitMatrix=function(e,t){for(var r=0;r<t;r++)for(var i=0;i<t;i++)this.isMasked(r,i)&&e.flip(i,r)},n.values=new Map([[Qt.DATA_MASK_000,new n(Qt.DATA_MASK_000,function(e,t){return(e+t&1)===0})],[Qt.DATA_MASK_001,new n(Qt.DATA_MASK_001,function(e,t){return(e&1)===0})],[Qt.DATA_MASK_010,new n(Qt.DATA_MASK_010,function(e,t){return t%3===0})],[Qt.DATA_MASK_011,new n(Qt.DATA_MASK_011,function(e,t){return(e+t)%3===0})],[Qt.DATA_MASK_100,new n(Qt.DATA_MASK_100,function(e,t){return(Math.floor(e/2)+Math.floor(t/3)&1)===0})],[Qt.DATA_MASK_101,new n(Qt.DATA_MASK_101,function(e,t){return e*t%6===0})],[Qt.DATA_MASK_110,new n(Qt.DATA_MASK_110,function(e,t){return e*t%6<3})],[Qt.DATA_MASK_111,new n(Qt.DATA_MASK_111,function(e,t){return(e+t+e*t%3&1)===0})]]),n}(),XI=function(){function n(e){var t=e.getHeight();if(t<21||(t&3)!==1)throw new ue;this.bitMatrix=e}return n.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,t=0;t<6;t++)e=this.copyBit(t,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var r=5;r>=0;r--)e=this.copyBit(8,r,e);for(var i=this.bitMatrix.getHeight(),o=0,s=i-7,r=i-1;r>=s;r--)o=this.copyBit(8,r,o);for(var t=i-8;t<i;t++)o=this.copyBit(t,8,o);if(this.parsedFormatInfo=xm.decodeFormatInformation(e,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new ue},n.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return Go.getVersionForNumber(t);for(var r=0,i=e-11,o=5;o>=0;o--)for(var s=e-9;s>=i;s--)r=this.copyBit(s,o,r);var l=Go.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;r=0;for(var s=5;s>=0;s--)for(var o=e-9;o>=i;o--)r=this.copyBit(s,o,r);if(l=Go.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new ue},n.prototype.copyBit=function(e,t,r){var i=this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t);return i?r<<1|1:r<<1},n.prototype.readCodewords=function(){var e=this.readFormatInformation(),t=this.readVersion(),r=Zg.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,i);for(var o=t.buildFunctionPattern(),s=!0,l=new Uint8Array(t.getTotalCodewords()),c=0,h=0,g=0,v=i-1;v>0;v-=2){v===6&&v--;for(var m=0;m<i;m++)for(var _=s?i-1-m:m,A=0;A<2;A++)o.get(v-A,_)||(g++,h<<=1,this.bitMatrix.get(v-A,_)&&(h|=1),g===8&&(l[c++]=h,g=0,h=0));s=!s}if(c!==t.getTotalCodewords())throw new ue;return l},n.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Zg.values.get(this.parsedFormatInfo.getDataMask()),t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}},n.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},n.prototype.mirror=function(){for(var e=this.bitMatrix,t=0,r=e.getWidth();t<r;t++)for(var i=t+1,o=e.getHeight();i<o;i++)e.get(t,i)!==e.get(i,t)&&(e.flip(i,t),e.flip(t,i))},n}(),Jg=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KI=function(){function n(e,t){this.numDataCodewords=e,this.codewords=t}return n.getDataBlocks=function(e,t,r){var i,o,s,l;if(e.length!==t.getTotalCodewords())throw new Ae;var c=t.getECBlocksForLevel(r),h=0,g=c.getECBlocks();try{for(var v=Jg(g),m=v.next();!m.done;m=v.next()){var _=m.value;h+=_.getCount()}}catch(b){i={error:b}}finally{try{m&&!m.done&&(o=v.return)&&o.call(v)}finally{if(i)throw i.error}}var A=new Array(h),I=0;try{for(var R=Jg(g),L=R.next();!L.done;L=R.next())for(var _=L.value,P=0;P<_.getCount();P++){var F=_.getDataCodewords(),z=c.getECCodewordsPerBlock()+F;A[I++]=new n(F,new Uint8Array(z))}}catch(b){s={error:b}}finally{try{L&&!L.done&&(l=R.return)&&l.call(R)}finally{if(s)throw s.error}}for(var q=A[0].codewords.length,Q=A.length-1;Q>=0;){var D=A[Q].codewords.length;if(D===q)break;Q--}Q++;for(var T=q-c.getECCodewordsPerBlock(),N=0,P=0;P<T;P++)for(var k=0;k<I;k++)A[k].codewords[P]=e[N++];for(var k=Q;k<I;k++)A[k].codewords[T]=e[N++];for(var V=A[0].codewords.length,P=T;P<V;P++)for(var k=0;k<I;k++){var U=k<Q?P:P+1;A[k].codewords[U]=e[N++]}return A},n.prototype.getNumDataCodewords=function(){return this.numDataCodewords},n.prototype.getCodewords=function(){return this.codewords},n}(),ar;(function(n){n[n.TERMINATOR=0]="TERMINATOR",n[n.NUMERIC=1]="NUMERIC",n[n.ALPHANUMERIC=2]="ALPHANUMERIC",n[n.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",n[n.BYTE=4]="BYTE",n[n.ECI=5]="ECI",n[n.KANJI=6]="KANJI",n[n.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",n[n.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",n[n.HANZI=9]="HANZI"})(ar||(ar={}));var pt=function(){function n(e,t,r,i){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=i,n.FOR_BITS.set(i,this),n.FOR_VALUE.set(e,this)}return n.forBits=function(e){var t=n.FOR_BITS.get(e);if(t===void 0)throw new Ae;return t},n.prototype.getCharacterCountBits=function(e){var t=e.getVersionNumber(),r;return t<=9?r=0:t<=26?r=1:r=2,this.characterCountBitsForVersions[r]},n.prototype.getValue=function(){return this.value},n.prototype.getBits=function(){return this.bits},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;return this.value===t.value},n.prototype.toString=function(){return this.stringValue},n.FOR_BITS=new Map,n.FOR_VALUE=new Map,n.TERMINATOR=new n(ar.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),n.NUMERIC=new n(ar.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),n.ALPHANUMERIC=new n(ar.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),n.STRUCTURED_APPEND=new n(ar.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),n.BYTE=new n(ar.BYTE,"BYTE",Int32Array.from([8,16,16]),4),n.ECI=new n(ar.ECI,"ECI",Int32Array.from([0,0,0]),7),n.KANJI=new n(ar.KANJI,"KANJI",Int32Array.from([8,10,12]),8),n.FNC1_FIRST_POSITION=new n(ar.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),n.FNC1_SECOND_POSITION=new n(ar.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),n.HANZI=new n(ar.HANZI,"HANZI",Int32Array.from([8,10,12]),13),n}(),qI=function(){function n(){}return n.decode=function(e,t,r,i){var o=new _m(e),s=new De,l=new Array,c=-1,h=-1;try{var g=null,v=!1,m=void 0;do{if(o.available()<4)m=pt.TERMINATOR;else{var _=o.readBits(4);m=pt.forBits(_)}switch(m){case pt.TERMINATOR:break;case pt.FNC1_FIRST_POSITION:case pt.FNC1_SECOND_POSITION:v=!0;break;case pt.STRUCTURED_APPEND:if(o.available()<16)throw new ue;c=o.readBits(8),h=o.readBits(8);break;case pt.ECI:var A=n.parseECIValue(o);if(g=Ut.getCharacterSetECIByValue(A),g===null)throw new ue;break;case pt.HANZI:var I=o.readBits(4),R=o.readBits(m.getCharacterCountBits(t));I===n.GB2312_SUBSET&&n.decodeHanziSegment(o,s,R);break;default:var L=o.readBits(m.getCharacterCountBits(t));switch(m){case pt.NUMERIC:n.decodeNumericSegment(o,s,L);break;case pt.ALPHANUMERIC:n.decodeAlphanumericSegment(o,s,L,v);break;case pt.BYTE:n.decodeByteSegment(o,s,L,g,l,i);break;case pt.KANJI:n.decodeKanjiSegment(o,s,L);break;default:throw new ue}break}}while(m!==pt.TERMINATOR)}catch{throw new ue}return new Kc(e,s.toString(),l.length===0?null:l,r===null?null:r.toString(),c,h)},n.decodeHanziSegment=function(e,t,r){if(r*13>e.available())throw new ue;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),l=s/96<<8&4294967295|s%96;l<959?l+=41377:l+=42657,i[o]=l>>8&255,i[o+1]=l&255,o+=2,r--}try{t.append(cr.decode(i,ze.GB2312))}catch(c){throw new ue(c)}},n.decodeKanjiSegment=function(e,t,r){if(r*13>e.available())throw new ue;for(var i=new Uint8Array(2*r),o=0;r>0;){var s=e.readBits(13),l=s/192<<8&4294967295|s%192;l<7936?l+=33088:l+=49472,i[o]=l>>8,i[o+1]=l,o+=2,r--}try{t.append(cr.decode(i,ze.SHIFT_JIS))}catch(c){throw new ue(c)}},n.decodeByteSegment=function(e,t,r,i,o,s){if(8*r>e.available())throw new ue;for(var l=new Uint8Array(r),c=0;c<r;c++)l[c]=e.readBits(8);var h;i===null?h=ze.guessEncoding(l,s):h=i.getName();try{t.append(cr.decode(l,h))}catch(g){throw new ue(g)}o.push(l)},n.toAlphaNumericChar=function(e){if(e>=n.ALPHANUMERIC_CHARS.length)throw new ue;return n.ALPHANUMERIC_CHARS[e]},n.decodeAlphanumericSegment=function(e,t,r,i){for(var o=t.length();r>1;){if(e.available()<11)throw new ue;var s=e.readBits(11);t.append(n.toAlphaNumericChar(Math.floor(s/45))),t.append(n.toAlphaNumericChar(s%45)),r-=2}if(r===1){if(e.available()<6)throw new ue;t.append(n.toAlphaNumericChar(e.readBits(6)))}if(i)for(var l=o;l<t.length();l++)t.charAt(l)==="%"&&(l<t.length()-1&&t.charAt(l+1)==="%"?t.deleteCharAt(l+1):t.setCharAt(l,""))},n.decodeNumericSegment=function(e,t,r){for(;r>=3;){if(e.available()<10)throw new ue;var i=e.readBits(10);if(i>=1e3)throw new ue;t.append(n.toAlphaNumericChar(Math.floor(i/100))),t.append(n.toAlphaNumericChar(Math.floor(i/10)%10)),t.append(n.toAlphaNumericChar(i%10)),r-=3}if(r===2){if(e.available()<7)throw new ue;var o=e.readBits(7);if(o>=100)throw new ue;t.append(n.toAlphaNumericChar(Math.floor(o/10))),t.append(n.toAlphaNumericChar(o%10))}else if(r===1){if(e.available()<4)throw new ue;var s=e.readBits(4);if(s>=10)throw new ue;t.append(n.toAlphaNumericChar(s))}},n.parseECIValue=function(e){var t=e.readBits(8);if(!(t&128))return t&127;if((t&192)===128){var r=e.readBits(8);return(t&63)<<8&4294967295|r}if((t&224)===192){var i=e.readBits(16);return(t&31)<<16&4294967295|i}throw new ue},n.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",n.GB2312_SUBSET=1,n}(),wm=function(){function n(e){this.mirrored=e}return n.prototype.isMirrored=function(){return this.mirrored},n.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var t=e[0];e[0]=e[2],e[2]=t}},n}(),ev=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YI=function(){function n(){this.rsDecoder=new qc(Un.QR_CODE_FIELD_256)}return n.prototype.decodeBooleanArray=function(e,t){return this.decodeBitMatrix(Kr.parseFromBooleanArray(e),t)},n.prototype.decodeBitMatrix=function(e,t){var r=new XI(e),i=null;try{return this.decodeBitMatrixParser(r,t)}catch(s){i=s}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();var o=this.decodeBitMatrixParser(r,t);return o.setOther(new wm(!0)),o}catch(s){throw i!==null?i:s}},n.prototype.decodeBitMatrixParser=function(e,t){var r,i,o,s,l=e.readVersion(),c=e.readFormatInformation().getErrorCorrectionLevel(),h=e.readCodewords(),g=KI.getDataBlocks(h,l,c),v=0;try{for(var m=ev(g),_=m.next();!_.done;_=m.next()){var A=_.value;v+=A.getNumDataCodewords()}}catch(Q){r={error:Q}}finally{try{_&&!_.done&&(i=m.return)&&i.call(m)}finally{if(r)throw r.error}}var I=new Uint8Array(v),R=0;try{for(var L=ev(g),P=L.next();!P.done;P=L.next()){var A=P.value,F=A.getCodewords(),z=A.getNumDataCodewords();this.correctErrors(F,z);for(var q=0;q<z;q++)I[R++]=F[q]}}catch(Q){o={error:Q}}finally{try{P&&!P.done&&(s=L.return)&&s.call(L)}finally{if(o)throw o.error}}return qI.decode(I,l,c,t)},n.prototype.correctErrors=function(e,t){var r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch{throw new en}for(var i=0;i<t;i++)e[i]=r[i]},n}(),QI=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ZI=function(n){QI(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.estimatedModuleSize=i,o}return e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=(this.getX()+r)/2,s=(this.getY()+t)/2,l=(this.estimatedModuleSize+i)/2;return new e(o,s,l)},e}(ge),JI=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e4=function(){function n(e,t,r,i,o,s,l){this.image=e,this.startX=t,this.startY=r,this.width=i,this.height=o,this.moduleSize=s,this.resultPointCallback=l,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return n.prototype.find=function(){for(var e=this.startX,t=this.height,r=this.width,i=e+r,o=this.startY+t/2,s=new Int32Array(3),l=this.image,c=0;c<t;c++){var h=o+(c&1?-Math.floor((c+1)/2):Math.floor((c+1)/2));s[0]=0,s[1]=0,s[2]=0;for(var g=e;g<i&&!l.get(g,h);)g++;for(var v=0;g<i;){if(l.get(g,h))if(v===1)s[1]++;else if(v===2){if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,h,g);if(m!==null)return m}s[0]=s[2],s[1]=1,s[2]=0,v=1}else s[++v]++;else v===1&&v++,s[v]++;g++}if(this.foundPatternCross(s)){var m=this.handlePossibleCenter(s,h,i);if(m!==null)return m}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z},n.centerFromEnd=function(e,t){return t-e[2]-e[1]/2},n.prototype.foundPatternCross=function(e){for(var t=this.moduleSize,r=t/2,i=0;i<3;i++)if(Math.abs(t-e[i])>=r)return!1;return!0},n.prototype.crossCheckVertical=function(e,t,r,i){var o=this.image,s=o.getHeight(),l=this.crossCheckStateCount;l[0]=0,l[1]=0,l[2]=0;for(var c=e;c>=0&&o.get(t,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&!o.get(t,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c)&&l[1]<=r;)l[1]++,c++;if(c===s||l[1]>r)return NaN;for(;c<s&&!o.get(t,c)&&l[2]<=r;)l[2]++,c++;if(l[2]>r)return NaN;var h=l[0]+l[1]+l[2];return 5*Math.abs(h-i)>=2*i?NaN:this.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r){var i,o,s=e[0]+e[1]+e[2],l=n.centerFromEnd(e,r),c=this.crossCheckVertical(t,l,2*e[1],s);if(!isNaN(c)){var h=(e[0]+e[1]+e[2])/3;try{for(var g=JI(this.possibleCenters),v=g.next();!v.done;v=g.next()){var m=v.value;if(m.aboutEquals(h,c,l))return m.combineEstimate(c,l,h)}}catch(A){i={error:A}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}var _=new ZI(l,c,h);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null},n}(),t4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),n4=function(n){t4(e,n);function e(t,r,i,o){var s=n.call(this,t,r)||this;return s.estimatedModuleSize=i,s.count=o,o===void 0&&(s.count=1),s}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(t,r,i){if(Math.abs(r-this.getY())<=t&&Math.abs(i-this.getX())<=t){var o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(t,r,i){var o=this.count+1,s=(this.count*this.getX()+r)/o,l=(this.count*this.getY()+t)/o,c=(this.count*this.estimatedModuleSize+i)/o;return new e(s,l,c,o)},e}(ge),r4=function(){function n(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n}(),lu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i4=function(){function n(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}return n.prototype.getImage=function(){return this.image},n.prototype.getPossibleCenters=function(){return this.possibleCenters},n.prototype.find=function(e){var t=e!=null&&e.get(mt.TRY_HARDER)!==void 0,r=e!=null&&e.get(mt.PURE_BARCODE)!==void 0,i=this.image,o=i.getHeight(),s=i.getWidth(),l=Math.floor(3*o/(4*n.MAX_MODULES));(l<n.MIN_SKIP||t)&&(l=n.MIN_SKIP);for(var c=!1,h=new Int32Array(5),g=l-1;g<o&&!c;g+=l){h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0;for(var v=0,m=0;m<s;m++)if(i.get(m,g))(v&1)===1&&v++,h[v]++;else if(v&1)h[v]++;else if(v===4)if(n.foundPatternCross(h)){var _=this.handlePossibleCenter(h,g,m,r);if(_===!0)if(l=2,this.hasSkipped===!0)c=this.haveMultiplyConfirmedCenters();else{var A=this.findRowSkip();A>h[2]&&(g+=A-h[2]-l,m=s-1)}else{h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;continue}v=0,h[0]=0,h[1]=0,h[2]=0,h[3]=0,h[4]=0}else h[0]=h[2],h[1]=h[3],h[2]=h[4],h[3]=1,h[4]=0,v=3;else h[++v]++;if(n.foundPatternCross(h)){var _=this.handlePossibleCenter(h,g,s,r);_===!0&&(l=h[0],this.hasSkipped&&(c=this.haveMultiplyConfirmedCenters()))}}var I=this.selectBestPatterns();return ge.orderBestPatterns(I),new r4(I)},n.centerFromEnd=function(e,t){return t-e[4]-e[3]-e[2]/2},n.foundPatternCross=function(e){for(var t=0,r=0;r<5;r++){var i=e[r];if(i===0)return!1;t+=i}if(t<7)return!1;var o=t/7,s=o/2;return Math.abs(o-e[0])<s&&Math.abs(o-e[1])<s&&Math.abs(3*o-e[2])<3*s&&Math.abs(o-e[3])<s&&Math.abs(o-e[4])<s},n.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},n.prototype.crossCheckDiagonal=function(e,t,r,i){for(var o=this.getCrossCheckStateCount(),s=0,l=this.image;e>=s&&t>=s&&l.get(t-s,e-s);)o[2]++,s++;if(e<s||t<s)return!1;for(;e>=s&&t>=s&&!l.get(t-s,e-s)&&o[1]<=r;)o[1]++,s++;if(e<s||t<s||o[1]>r)return!1;for(;e>=s&&t>=s&&l.get(t-s,e-s)&&o[0]<=r;)o[0]++,s++;if(o[0]>r)return!1;var c=l.getHeight(),h=l.getWidth();for(s=1;e+s<c&&t+s<h&&l.get(t+s,e+s);)o[2]++,s++;if(e+s>=c||t+s>=h)return!1;for(;e+s<c&&t+s<h&&!l.get(t+s,e+s)&&o[3]<r;)o[3]++,s++;if(e+s>=c||t+s>=h||o[3]>=r)return!1;for(;e+s<c&&t+s<h&&l.get(t+s,e+s)&&o[4]<r;)o[4]++,s++;if(o[4]>=r)return!1;var g=o[0]+o[1]+o[2]+o[3]+o[4];return Math.abs(g-i)<2*i&&n.foundPatternCross(o)},n.prototype.crossCheckVertical=function(e,t,r,i){for(var o=this.image,s=o.getHeight(),l=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(t,c);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(t,c)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&o.get(t,c)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=e+1;c<s&&o.get(t,c);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(t,c)&&l[3]<r;)l[3]++,c++;if(c===s||l[3]>=r)return NaN;for(;c<s&&o.get(t,c)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=2*i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.crossCheckHorizontal=function(e,t,r,i){for(var o=this.image,s=o.getWidth(),l=this.getCrossCheckStateCount(),c=e;c>=0&&o.get(c,t);)l[2]++,c--;if(c<0)return NaN;for(;c>=0&&!o.get(c,t)&&l[1]<=r;)l[1]++,c--;if(c<0||l[1]>r)return NaN;for(;c>=0&&o.get(c,t)&&l[0]<=r;)l[0]++,c--;if(l[0]>r)return NaN;for(c=e+1;c<s&&o.get(c,t);)l[2]++,c++;if(c===s)return NaN;for(;c<s&&!o.get(c,t)&&l[3]<r;)l[3]++,c++;if(c===s||l[3]>=r)return NaN;for(;c<s&&o.get(c,t)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return NaN;var h=l[0]+l[1]+l[2]+l[3]+l[4];return 5*Math.abs(h-i)>=i?NaN:n.foundPatternCross(l)?n.centerFromEnd(l,c):NaN},n.prototype.handlePossibleCenter=function(e,t,r,i){var o=e[0]+e[1]+e[2]+e[3]+e[4],s=n.centerFromEnd(e,r),l=this.crossCheckVertical(t,Math.floor(s),e[2],o);if(!isNaN(l)&&(s=this.crossCheckHorizontal(Math.floor(s),Math.floor(l),e[2],o),!isNaN(s)&&(!i||this.crossCheckDiagonal(Math.floor(l),Math.floor(s),e[2],o)))){for(var c=o/7,h=!1,g=this.possibleCenters,v=0,m=g.length;v<m;v++){var _=g[v];if(_.aboutEquals(c,l,s)){g[v]=_.combineEstimate(l,s,c),h=!0;break}}if(!h){var A=new n4(s,l,c);g.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1},n.prototype.findRowSkip=function(){var e,t,r=this.possibleCenters.length;if(r<=1)return 0;var i=null;try{for(var o=lu(this.possibleCenters),s=o.next();!s.done;s=o.next()){var l=s.value;if(l.getCount()>=n.CENTER_QUORUM)if(i==null)i=l;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-l.getX())-Math.abs(i.getY()-l.getY()))/2)}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return 0},n.prototype.haveMultiplyConfirmedCenters=function(){var e,t,r,i,o=0,s=0,l=this.possibleCenters.length;try{for(var c=lu(this.possibleCenters),h=c.next();!h.done;h=c.next()){var g=h.value;g.getCount()>=n.CENTER_QUORUM&&(o++,s+=g.getEstimatedModuleSize())}}catch(I){e={error:I}}finally{try{h&&!h.done&&(t=c.return)&&t.call(c)}finally{if(e)throw e.error}}if(o<3)return!1;var v=s/l,m=0;try{for(var _=lu(this.possibleCenters),A=_.next();!A.done;A=_.next()){var g=A.value;m+=Math.abs(g.getEstimatedModuleSize()-v)}}catch(I){r={error:I}}finally{try{A&&!A.done&&(i=_.return)&&i.call(_)}finally{if(r)throw r.error}}return m<=.05*s},n.prototype.selectBestPatterns=function(){var e,t,r,i,o=this.possibleCenters.length;if(o<3)throw new Z;var s=this.possibleCenters,l;if(o>3){var c=0,h=0;try{for(var g=lu(this.possibleCenters),v=g.next();!v.done;v=g.next()){var m=v.value,_=m.getEstimatedModuleSize();c+=_,h+=_*_}}catch(q){e={error:q}}finally{try{v&&!v.done&&(t=g.return)&&t.call(g)}finally{if(e)throw e.error}}l=c/o;var A=Math.sqrt(h/o-l*l);s.sort(function(q,Q){var D=Math.abs(Q.getEstimatedModuleSize()-l),T=Math.abs(q.getEstimatedModuleSize()-l);return D<T?-1:D>T?1:0});for(var I=Math.max(.2*l,A),R=0;R<s.length&&s.length>3;R++){var L=s[R];Math.abs(L.getEstimatedModuleSize()-l)>I&&(s.splice(R,1),R--)}}if(s.length>3){var c=0;try{for(var P=lu(s),F=P.next();!F.done;F=P.next()){var z=F.value;c+=z.getEstimatedModuleSize()}}catch(Q){r={error:Q}}finally{try{F&&!F.done&&(i=P.return)&&i.call(P)}finally{if(r)throw r.error}}l=c/s.length,s.sort(function(Q,D){if(D.getCount()===Q.getCount()){var T=Math.abs(D.getEstimatedModuleSize()-l),N=Math.abs(Q.getEstimatedModuleSize()-l);return T<N?1:T>N?-1:0}else return D.getCount()-Q.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]},n.CENTER_QUORUM=2,n.MIN_SKIP=3,n.MAX_MODULES=57,n}(),o4=function(){function n(e){this.image=e}return n.prototype.getImage=function(){return this.image},n.prototype.getResultPointCallback=function(){return this.resultPointCallback},n.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(mt.NEED_RESULT_POINT_CALLBACK);var t=new i4(this.image,this.resultPointCallback),r=t.find(e);return this.processFinderPatternInfo(r)},n.prototype.processFinderPatternInfo=function(e){var t=e.getTopLeft(),r=e.getTopRight(),i=e.getBottomLeft(),o=this.calculateModuleSize(t,r,i);if(o<1)throw new Z("No pattern found in proccess finder.");var s=n.computeDimension(t,r,i,o),l=Go.getProvisionalVersionForDimension(s),c=l.getDimensionForVersion()-7,h=null;if(l.getAlignmentPatternCenters().length>0)for(var g=r.getX()-t.getX()+i.getX(),v=r.getY()-t.getY()+i.getY(),m=1-3/c,_=Math.floor(t.getX()+m*(g-t.getX())),A=Math.floor(t.getY()+m*(v-t.getY())),I=4;I<=16;I<<=1)try{h=this.findAlignmentInRegion(o,_,A,I);break}catch(F){if(!(F instanceof Z))throw F}var R=n.createTransform(t,r,i,h,s),L=n.sampleGrid(this.image,R,s),P;return h===null?P=[i,t,r]:P=[i,t,r,h],new p1(L,P)},n.createTransform=function(e,t,r,i,o){var s=o-3.5,l,c,h,g;return i!==null?(l=i.getX(),c=i.getY(),h=s-3,g=h):(l=t.getX()-e.getX()+r.getX(),c=t.getY()-e.getY()+r.getY(),h=s,g=s),gm.quadrilateralToQuadrilateral(3.5,3.5,s,3.5,h,g,3.5,s,e.getX(),e.getY(),t.getX(),t.getY(),l,c,r.getX(),r.getY())},n.sampleGrid=function(e,t,r){var i=g1.getInstance();return i.sampleGridWithTransform(e,r,r,t)},n.computeDimension=function(e,t,r,i){var o=Xe.round(ge.distance(e,t)/i),s=Xe.round(ge.distance(e,r)/i),l=Math.floor((o+s)/2)+7;switch(l&3){case 0:l++;break;case 2:l--;break;case 3:throw new Z("Dimensions could be not found.")}return l},n.prototype.calculateModuleSize=function(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2},n.prototype.calculateModuleSizeOneWay=function(e,t){var r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?i/7:isNaN(i)?r/7:(r+i)/14},n.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,t,r,i){var o=this.sizeOfBlackWhiteBlackRun(e,t,r,i),s=1,l=e-(r-e);l<0?(s=e/(e-l),l=0):l>=this.image.getWidth()&&(s=(this.image.getWidth()-1-e)/(l-e),l=this.image.getWidth()-1);var c=Math.floor(t-(i-t)*s);return s=1,c<0?(s=t/(t-c),c=0):c>=this.image.getHeight()&&(s=(this.image.getHeight()-1-t)/(c-t),c=this.image.getHeight()-1),l=Math.floor(e+(l-e)*s),o+=this.sizeOfBlackWhiteBlackRun(e,t,l,c),o-1},n.prototype.sizeOfBlackWhiteBlackRun=function(e,t,r,i){var o=Math.abs(i-t)>Math.abs(r-e);if(o){var s=e;e=t,t=s,s=r,r=i,i=s}for(var l=Math.abs(r-e),c=Math.abs(i-t),h=-l/2,g=e<r?1:-1,v=t<i?1:-1,m=0,_=r+g,A=e,I=t;A!==_;A+=g){var R=o?I:A,L=o?A:I;if(m===1===this.image.get(R,L)){if(m===2)return Xe.distance(A,I,e,t);m++}if(h+=c,h>0){if(I===i)break;I+=v,h-=l}}return m===2?Xe.distance(r+g,i,e,t):NaN},n.prototype.findAlignmentInRegion=function(e,t,r,i){var o=Math.floor(i*e),s=Math.max(0,t-o),l=Math.min(this.image.getWidth()-1,t+o);if(l-s<e*3)throw new Z("Alignment top exceeds estimated module size.");var c=Math.max(0,r-o),h=Math.min(this.image.getHeight()-1,r+o);if(h-c<e*3)throw new Z("Alignment bottom exceeds estimated module size.");var g=new e4(this.image,s,c,l-s,h-c,e,this.resultPointCallback);return g.find()},n}(),Ed=function(){function n(){this.decoder=new YI}return n.prototype.getDecoder=function(){return this.decoder},n.prototype.decode=function(e,t){var r,i;if(t!=null&&t.get(mt.PURE_BARCODE)!==void 0){var o=n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(o,t),i=n.NO_POINTS}else{var s=new o4(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(s.getBits(),t),i=s.getPoints()}r.getOther()instanceof wm&&r.getOther().applyMirroredCorrection(i);var l=new wn(r.getText(),r.getRawBytes(),void 0,i,_e.QR_CODE,void 0),c=r.getByteSegments();c!==null&&l.putMetadata(fn.BYTE_SEGMENTS,c);var h=r.getECLevel();return h!==null&&l.putMetadata(fn.ERROR_CORRECTION_LEVEL,h),r.hasStructuredAppend()&&(l.putMetadata(fn.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(fn.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l},n.prototype.reset=function(){},n.extractPureBits=function(e){var t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(t===null||r===null)throw new Z;var i=this.moduleSize(t,e),o=t[1],s=r[1],l=t[0],c=r[0];if(l>=c||o>=s)throw new Z;if(s-o!==c-l&&(c=l+(s-o),c>=e.getWidth()))throw new Z;var h=Math.round((c-l+1)/i),g=Math.round((s-o+1)/i);if(h<=0||g<=0)throw new Z;if(g!==h)throw new Z;var v=Math.floor(i/2);o+=v,l+=v;var m=l+Math.floor((h-1)*i)-c;if(m>0){if(m>v)throw new Z;l-=m}var _=o+Math.floor((g-1)*i)-s;if(_>0){if(_>v)throw new Z;o-=_}for(var A=new Kr(h,g),I=0;I<g;I++)for(var R=o+Math.floor(I*i),L=0;L<h;L++)e.get(l+Math.floor(L*i),R)&&A.set(L,I);return A},n.moduleSize=function(e,t){for(var r=t.getHeight(),i=t.getWidth(),o=e[0],s=e[1],l=!0,c=0;o<i&&s<r;){if(l!==t.get(o,s)){if(++c===5)break;l=!l}o++,s++}if(o===i||s===r)throw new Z;return(o-e[0])/7},n.NO_POINTS=new Array,n}(),a4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Ge=function(){function n(){}return n.prototype.PDF417Common=function(){},n.getBitCountSum=function(e){return Xe.sum(e)},n.toIntArray=function(e){var t,r;if(e==null||!e.length)return n.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),o=0;try{for(var s=a4(e),l=s.next();!l.done;l=s.next()){var c=l.value;i[o++]=c}}catch(h){t={error:h}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return i},n.getCodeword=function(e){var t=Ht.binarySearch(n.SYMBOL_TABLE,e&262143);return t<0?-1:(n.CODEWORD_TABLE[t]-1)%n.NUMBER_OF_CODEWORDS},n.NUMBER_OF_CODEWORDS=929,n.MAX_CODEWORDS_IN_BARCODE=n.NUMBER_OF_CODEWORDS-1,n.MIN_ROWS_IN_BARCODE=3,n.MAX_ROWS_IN_BARCODE=90,n.MODULES_IN_CODEWORD=17,n.MODULES_IN_STOP_PATTERN=18,n.BARS_IN_MODULE=8,n.EMPTY_INT_ARRAY=new Int32Array([]),n.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),n.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),n}(),s4=function(){function n(e,t){this.bits=e,this.points=t}return n.prototype.getBits=function(){return this.bits},n.prototype.getPoints=function(){return this.points},n}(),u4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l4=function(){function n(){}return n.detectMultiple=function(e,t,r){var i=e.getBlackMatrix(),o=n.detect(r,i);return o.length||(i=i.clone(),i.rotate180(),o=n.detect(r,i)),new s4(i,o)},n.detect=function(e,t){for(var r,i,o=new Array,s=0,l=0,c=!1;s<t.getHeight();){var h=n.findVertices(t,s,l);if(h[0]==null&&h[3]==null){if(!c)break;c=!1,l=0;try{for(var g=(r=void 0,u4(o)),v=g.next();!v.done;v=g.next()){var m=v.value;m[1]!=null&&(s=Math.trunc(Math.max(s,m[1].getY()))),m[3]!=null&&(s=Math.max(s,Math.trunc(m[3].getY())))}}catch(_){r={error:_}}finally{try{v&&!v.done&&(i=g.return)&&i.call(g)}finally{if(r)throw r.error}}s+=n.ROW_STEP;continue}if(c=!0,o.push(h),!e)break;h[2]!=null?(l=Math.trunc(h[2].getX()),s=Math.trunc(h[2].getY())):(l=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY()))}return o},n.findVertices=function(e,t,r){var i=e.getHeight(),o=e.getWidth(),s=new Array(8);return n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.START_PATTERN),n.INDEXES_START_PATTERN),s[4]!=null&&(r=Math.trunc(s[4].getX()),t=Math.trunc(s[4].getY())),n.copyToResult(s,n.findRowsWithPattern(e,i,o,t,r,n.STOP_PATTERN),n.INDEXES_STOP_PATTERN),s},n.copyToResult=function(e,t,r){for(var i=0;i<r.length;i++)e[r[i]]=t[i]},n.findRowsWithPattern=function(e,t,r,i,o,s){for(var l=new Array(4),c=!1,h=new Int32Array(s.length);i<t;i+=n.ROW_STEP){var g=n.findGuardPattern(e,o,i,r,!1,s,h);if(g!=null){for(;i>0;){var v=n.findGuardPattern(e,o,--i,r,!1,s,h);if(v!=null)g=v;else{i++;break}}l[0]=new ge(g[0],i),l[1]=new ge(g[1],i),c=!0;break}}var m=i+1;if(c){for(var _=0,v=Int32Array.from([Math.trunc(l[0].getX()),Math.trunc(l[1].getX())]);m<t;m++){var g=n.findGuardPattern(e,v[0],m,r,!1,s,h);if(g!=null&&Math.abs(v[0]-g[0])<n.MAX_PATTERN_DRIFT&&Math.abs(v[1]-g[1])<n.MAX_PATTERN_DRIFT)v=g,_=0;else{if(_>n.SKIPPED_ROW_COUNT_MAX)break;_++}}m-=_+1,l[2]=new ge(v[0],m),l[3]=new ge(v[1],m)}return m-i<n.BARCODE_MIN_HEIGHT&&Ht.fill(l,null),l},n.findGuardPattern=function(e,t,r,i,o,s,l){Ht.fillWithin(l,0,l.length,0);for(var c=t,h=0;e.get(c,r)&&c>0&&h++<n.MAX_PIXEL_DRIFT;)c--;for(var g=c,v=0,m=s.length,_=o;g<i;g++){var A=e.get(g,r);if(A!==_)l[v]++;else{if(v===m-1){if(n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE)return new Int32Array([c,g]);c+=l[0]+l[1],lt.arraycopy(l,2,l,0,v-1),l[v-1]=0,l[v]=0,v--}else v++;l[v]=1,_=!_}}return v===m-1&&n.patternMatchVariance(l,s,n.MAX_INDIVIDUAL_VARIANCE)<n.MAX_AVG_VARIANCE?new Int32Array([c,g-1]):null},n.patternMatchVariance=function(e,t,r){for(var i=e.length,o=0,s=0,l=0;l<i;l++)o+=e[l],s+=t[l];if(o<s)return 1/0;var c=o/s;r*=c;for(var h=0,g=0;g<i;g++){var v=e[g],m=t[g]*c,_=v>m?v-m:m-v;if(_>r)return 1/0;h+=_}return h/o},n.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),n.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),n.MAX_AVG_VARIANCE=.42,n.MAX_INDIVIDUAL_VARIANCE=.8,n.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),n.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),n.MAX_PIXEL_DRIFT=3,n.MAX_PATTERN_DRIFT=5,n.SKIPPED_ROW_COUNT_MAX=25,n.ROW_STEP=5,n.BARCODE_MIN_HEIGHT=10,n}(),c4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zo=function(){function n(e,t){if(t.length===0)throw new Ae;this.field=e;var r=t.length;if(r>1&&t[0]===0){for(var i=1;i<r&&t[i]===0;)i++;i===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-i),lt.arraycopy(t,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}return n.prototype.getCoefficients=function(){return this.coefficients},n.prototype.getDegree=function(){return this.coefficients.length-1},n.prototype.isZero=function(){return this.coefficients[0]===0},n.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},n.prototype.evaluateAt=function(e){var t,r;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var o=c4(this.coefficients),s=o.next();!s.done;s=o.next()){var l=s.value;i=this.field.add(i,l)}}catch(v){t={error:v}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}for(var c=this.coefficients[0],h=this.coefficients.length,g=1;g<h;g++)c=this.field.add(this.field.multiply(e,c),this.coefficients[g]);return c},n.prototype.add=function(e){if(!this.field.equals(e.field))throw new Ae("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var t=this.coefficients,r=e.coefficients;if(t.length>r.length){var i=t;t=r,r=i}var o=new Int32Array(r.length),s=r.length-t.length;lt.arraycopy(r,0,o,0,s);for(var l=s;l<r.length;l++)o[l]=this.field.add(t[l-s],r[l]);return new n(this.field,o)},n.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new Ae("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},n.prototype.multiply=function(e){return e instanceof n?this.multiplyOther(e):this.multiplyScalar(e)},n.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new Ae("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new n(this.field,new Int32Array([0]));for(var t=this.coefficients,r=t.length,i=e.coefficients,o=i.length,s=new Int32Array(r+o-1),l=0;l<r;l++)for(var c=t[l],h=0;h<o;h++)s[l+h]=this.field.add(s[l+h],this.field.multiply(c,i[h]));return new n(this.field,s)},n.prototype.negative=function(){for(var e=this.coefficients.length,t=new Int32Array(e),r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new n(this.field,t)},n.prototype.multiplyScalar=function(e){if(e===0)return new n(this.field,new Int32Array([0]));if(e===1)return this;for(var t=this.coefficients.length,r=new Int32Array(t),i=0;i<t;i++)r[i]=this.field.multiply(this.coefficients[i],e);return new n(this.field,r)},n.prototype.multiplyByMonomial=function(e,t){if(e<0)throw new Ae;if(t===0)return new n(this.field,new Int32Array([0]));for(var r=this.coefficients.length,i=new Int32Array(r+e),o=0;o<r;o++)i[o]=this.field.multiply(this.coefficients[o],t);return new n(this.field,i)},n.prototype.toString=function(){for(var e=new De,t=this.getDegree();t>=0;t--){var r=this.getCoefficient(t);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(t===0||r!==1)&&e.append(r),t!==0&&(t===1?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()},n}(),f4=function(){function n(){}return n.prototype.add=function(e,t){return(e+t)%this.modulus},n.prototype.subtract=function(e,t){return(this.modulus+e-t)%this.modulus},n.prototype.exp=function(e){return this.expTable[e]},n.prototype.log=function(e){if(e===0)throw new Ae;return this.logTable[e]},n.prototype.inverse=function(e){if(e===0)throw new pm;return this.expTable[this.modulus-this.logTable[e]-1]},n.prototype.multiply=function(e,t){return e===0||t===0?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]},n.prototype.getSize=function(){return this.modulus},n.prototype.equals=function(e){return e===this},n}(),h4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),d4=function(n){h4(e,n);function e(t,r){var i=n.call(this)||this;i.modulus=t,i.expTable=new Int32Array(t),i.logTable=new Int32Array(t);for(var o=1,s=0;s<t;s++)i.expTable[s]=o,o=o*r%t;for(var s=0;s<t-1;s++)i.logTable[i.expTable[s]]=s;return i.zero=new zo(i,new Int32Array([0])),i.one=new zo(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(t,r){if(t<0)throw new Ae;if(r===0)return this.zero;var i=new Int32Array(t+1);return i[0]=r,new zo(this,i)},e.PDF417_GF=new e(Ge.NUMBER_OF_CODEWORDS,3),e}(f4),p4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},g4=function(){function n(){this.field=d4.PDF417_GF}return n.prototype.decode=function(e,t,r){for(var i,o,s=new zo(this.field,e),l=new Int32Array(t),c=!1,h=t;h>0;h--){var g=s.evaluateAt(this.field.exp(h));l[t-h]=g,g!==0&&(c=!0)}if(!c)return 0;var v=this.field.getOne();if(r!=null)try{for(var m=p4(r),_=m.next();!_.done;_=m.next()){var A=_.value,I=this.field.exp(e.length-1-A),R=new zo(this.field,new Int32Array([this.field.subtract(0,I),1]));v=v.multiply(R)}}catch(T){i={error:T}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}for(var L=new zo(this.field,l),P=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),L,t),F=P[0],z=P[1],q=this.findErrorLocations(F),Q=this.findErrorMagnitudes(z,F,q),h=0;h<q.length;h++){var D=e.length-1-this.field.log(q[h]);if(D<0)throw en.getChecksumInstance();e[D]=this.field.subtract(e[D],Q[h])}return q.length},n.prototype.runEuclideanAlgorithm=function(e,t,r){if(e.getDegree()<t.getDegree()){var i=e;e=t,t=i}for(var o=e,s=t,l=this.field.getZero(),c=this.field.getOne();s.getDegree()>=Math.round(r/2);){var h=o,g=l;if(o=s,l=c,o.isZero())throw en.getChecksumInstance();s=h;for(var v=this.field.getZero(),m=o.getCoefficient(o.getDegree()),_=this.field.inverse(m);s.getDegree()>=o.getDegree()&&!s.isZero();){var A=s.getDegree()-o.getDegree(),I=this.field.multiply(s.getCoefficient(s.getDegree()),_);v=v.add(this.field.buildMonomial(A,I)),s=s.subtract(o.multiplyByMonomial(A,I))}c=v.multiply(l).subtract(g).negative()}var R=c.getCoefficient(0);if(R===0)throw en.getChecksumInstance();var L=this.field.inverse(R),P=c.multiply(L),F=s.multiply(L);return[P,F]},n.prototype.findErrorLocations=function(e){for(var t=e.getDegree(),r=new Int32Array(t),i=0,o=1;o<this.field.getSize()&&i<t;o++)e.evaluateAt(o)===0&&(r[i]=this.field.inverse(o),i++);if(i!==t)throw en.getChecksumInstance();return r},n.prototype.findErrorMagnitudes=function(e,t,r){for(var i=t.getDegree(),o=new Int32Array(i),s=1;s<=i;s++)o[i-s]=this.field.multiply(s,t.getCoefficient(s));for(var l=new zo(this.field,o),c=r.length,h=new Int32Array(c),s=0;s<c;s++){var g=this.field.inverse(r[s]),v=this.field.subtract(0,e.evaluateAt(g)),m=this.field.inverse(l.evaluateAt(g));h[s]=this.field.multiply(v,m)}return h},n}(),Ad=function(){function n(e,t,r,i,o){e instanceof n?this.constructor_2(e):this.constructor_1(e,t,r,i,o)}return n.prototype.constructor_1=function(e,t,r,i,o){var s=t==null||r==null,l=i==null||o==null;if(s&&l)throw new Z;s?(t=new ge(0,i.getY()),r=new ge(0,o.getY())):l&&(i=new ge(e.getWidth()-1,t.getY()),o=new ge(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=i,this.bottomRight=o,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(i.getX(),o.getX())),this.minY=Math.trunc(Math.min(t.getY(),i.getY())),this.maxY=Math.trunc(Math.max(r.getY(),o.getY()))},n.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},n.merge=function(e,t){return e==null?t:t==null?e:new n(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)},n.prototype.addMissingRows=function(e,t,r){var i=this.topLeft,o=this.bottomLeft,s=this.topRight,l=this.bottomRight;if(e>0){var c=r?this.topLeft:this.topRight,h=Math.trunc(c.getY()-e);h<0&&(h=0);var g=new ge(c.getX(),h);r?i=g:s=g}if(t>0){var v=r?this.bottomLeft:this.bottomRight,m=Math.trunc(v.getY()+t);m>=this.image.getHeight()&&(m=this.image.getHeight()-1);var _=new ge(v.getX(),m);r?o=_:l=_}return new n(this.image,i,o,s,l)},n.prototype.getMinX=function(){return this.minX},n.prototype.getMaxX=function(){return this.maxX},n.prototype.getMinY=function(){return this.minY},n.prototype.getMaxY=function(){return this.maxY},n.prototype.getTopLeft=function(){return this.topLeft},n.prototype.getTopRight=function(){return this.topRight},n.prototype.getBottomLeft=function(){return this.bottomLeft},n.prototype.getBottomRight=function(){return this.bottomRight},n}(),v4=function(){function n(e,t,r,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}return n.prototype.getColumnCount=function(){return this.columnCount},n.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},n.prototype.getRowCount=function(){return this.rowCount},n.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},n.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},n}(),y1=function(){function n(){this.buffer=""}return n.form=function(e,t){var r=-1;function i(s,l,c,h,g,v){if(s==="%%")return"%";if(t[++r]!==void 0){s=h?parseInt(h.substr(1)):void 0;var m=g?parseInt(g.substr(1)):void 0,_;switch(v){case"s":_=t[r];break;case"c":_=t[r][0];break;case"f":_=parseFloat(t[r]).toFixed(s);break;case"p":_=parseFloat(t[r]).toPrecision(s);break;case"e":_=parseFloat(t[r]).toExponential(s);break;case"x":_=parseInt(t[r]).toString(m||16);break;case"d":_=parseFloat(parseInt(t[r],m||10).toPrecision(s)).toFixed(0);break}_=typeof _=="object"?JSON.stringify(_):(+_).toString(m);for(var A=parseInt(c),I=c&&c[0]+""=="0"?"0":" ";_.length<A;)_=l!==void 0?_+I:I+_;return _}}var o=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(o,i)},n.prototype.format=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.buffer+=n.form(e,t)},n.prototype.toString=function(){return this.buffer},n}(),y4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Em=function(){function n(e){this.boundingBox=new Ad(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return n.prototype.getCodewordNearby=function(e){var t=this.getCodeword(e);if(t!=null)return t;for(var r=1;r<n.MAX_NEARBY_DISTANCE;r++){var i=this.imageRowToCodewordIndex(e)-r;if(i>=0&&(t=this.codewords[i],t!=null)||(i=this.imageRowToCodewordIndex(e)+r,i<this.codewords.length&&(t=this.codewords[i],t!=null)))return t}return null},n.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},n.prototype.setCodeword=function(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t},n.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.getCodewords=function(){return this.codewords},n.prototype.toString=function(){var e,t,r=new y1,i=0;try{for(var o=y4(this.codewords),s=o.next();!s.done;s=o.next()){var l=s.value;if(l==null){r.format("%3d:    |   %n",i++);continue}r.format("%3d: %3d|%3d%n",i++,l.getRowNumber(),l.getValue())}}catch(c){e={error:c}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return r.toString()},n.MAX_NEARBY_DISTANCE=5,n}(),m4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_4=function(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r=t.call(n),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(s)throw s.error}}return o},yu=function(){function n(){this.values=new Map}return n.prototype.setValue=function(e){e=Math.trunc(e);var t=this.values.get(e);t==null&&(t=0),t++,this.values.set(e,t)},n.prototype.getValue=function(){var e,t,r=-1,i=new Array,o=function(v,m){var _={getKey:function(){return v},getValue:function(){return m}};_.getValue()>r?(r=_.getValue(),i=[],i.push(_.getKey())):_.getValue()===r&&i.push(_.getKey())};try{for(var s=m4(this.values.entries()),l=s.next();!l.done;l=s.next()){var c=_4(l.value,2),h=c[0],g=c[1];o(h,g)}}catch(v){e={error:v}}finally{try{l&&!l.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}return Ge.toIntArray(i)},n.prototype.getConfidence=function(e){return this.values.get(e)},n}(),x4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Hh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tv=function(n){x4(e,n);function e(t,r){var i=n.call(this,t)||this;return i._isLeft=r,i}return e.prototype.setRowNumbers=function(){var t,r;try{for(var i=Hh(this.getCodewords()),o=i.next();!o.done;o=i.next()){var s=o.value;s!=null&&s.setRowNumberAsRowIndicatorColumn()}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(t){var r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,t);for(var i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),s=this._isLeft?i.getBottomLeft():i.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.imageRowToCodewordIndex(Math.trunc(s.getY())),h=-1,g=1,v=0,m=l;m<c;m++)if(r[m]!=null){var _=r[m],A=_.getRowNumber()-h;if(A===0)v++;else if(A===1)g=Math.max(g,v),v=1,h=_.getRowNumber();else if(A<0||_.getRowNumber()>=t.getRowCount()||A>m)r[m]=null;else{var I=void 0;g>2?I=(g-2)*A:I=A;for(var R=I>=m,L=1;L<=I&&!R;L++)R=r[m-L]!=null;R?r[m]=null:(h=_.getRowNumber(),v=1)}}},e.prototype.getRowHeights=function(){var t,r,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var o=new Int32Array(i.getRowCount());try{for(var s=Hh(this.getCodewords()),l=s.next();!l.done;l=s.next()){var c=l.value;if(c!=null){var h=c.getRowNumber();if(h>=o.length)continue;o[h]++}}}catch(g){t={error:g}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return o},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(t){for(var r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),o=this._isLeft?r.getBottomLeft():r.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),l=this.imageRowToCodewordIndex(Math.trunc(o.getY())),c=this.getCodewords(),h=-1,g=s;g<l;g++)if(c[g]!=null){var v=c[g];v.setRowNumberAsRowIndicatorColumn();var m=v.getRowNumber()-h;m===0||(m===1?h=v.getRowNumber():v.getRowNumber()>=t.getRowCount()?c[g]=null:h=v.getRowNumber())}},e.prototype.getBarcodeMetadata=function(){var t,r,i=this.getCodewords(),o=new yu,s=new yu,l=new yu,c=new yu;try{for(var h=Hh(i),g=h.next();!g.done;g=h.next()){var v=g.value;if(v!=null){v.setRowNumberAsRowIndicatorColumn();var m=v.getValue()%30,_=v.getRowNumber();switch(this._isLeft||(_+=2),_%3){case 0:s.setValue(m*3+1);break;case 1:c.setValue(m/3),l.setValue(m%3);break;case 2:o.setValue(m+1);break}}}}catch(I){t={error:I}}finally{try{g&&!g.done&&(r=h.return)&&r.call(h)}finally{if(t)throw t.error}}if(o.getValue().length===0||s.getValue().length===0||l.getValue().length===0||c.getValue().length===0||o.getValue()[0]<1||s.getValue()[0]+l.getValue()[0]<Ge.MIN_ROWS_IN_BARCODE||s.getValue()[0]+l.getValue()[0]>Ge.MAX_ROWS_IN_BARCODE)return null;var A=new v4(o.getValue()[0],s.getValue()[0],l.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(i,A),A},e.prototype.removeIncorrectCodewords=function(t,r){for(var i=0;i<t.length;i++){var o=t[i];if(t[i]!=null){var s=o.getValue()%30,l=o.getRowNumber();if(l>r.getRowCount()){t[i]=null;continue}switch(this._isLeft||(l+=2),l%3){case 0:s*3+1!==r.getRowCountUpperPart()&&(t[i]=null);break;case 1:(Math.trunc(s/3)!==r.getErrorCorrectionLevel()||s%3!==r.getRowCountLowerPart())&&(t[i]=null);break;case 2:s+1!==r.getColumnCount()&&(t[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+n.prototype.toString.call(this)},e}(Em),w4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},E4=function(){function n(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return n.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Ge.MAX_CODEWORDS_IN_BARCODE,t;do t=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<t);return this.detectionResultColumns},n.prototype.adjustIndicatorColumnRowNumbers=function(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},n.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var t=1;t<this.barcodeColumnCount+1;t++)for(var r=this.detectionResultColumns[t].getCodewords(),i=0;i<r.length;i++)r[i]!=null&&(r[i].hasValidRowNumber()||this.adjustRowNumbers(t,i,r));return e},n.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},n.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<e.length;r++)if(e[r]!=null&&t[r]!=null&&e[r].getRowNumber()===t[r].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var o=this.detectionResultColumns[i].getCodewords()[r];o!=null&&(o.setRowNumber(e[r].getRowNumber()),o.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[r]=null))}}},n.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=this.barcodeColumnCount+1;s>0&&o<this.ADJUST_ROW_NUMBER_SKIP;s--){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(o=n.adjustRowNumberIfValid(i,o,l),l.hasValidRowNumber()||e++)}return e},n.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,t=this.detectionResultColumns[0].getCodewords(),r=0;r<t.length;r++)if(t[r]!=null)for(var i=t[r].getRowNumber(),o=0,s=1;s<this.barcodeColumnCount+1&&o<this.ADJUST_ROW_NUMBER_SKIP;s++){var l=this.detectionResultColumns[s].getCodewords()[r];l!=null&&(o=n.adjustRowNumberIfValid(i,o,l),l.hasValidRowNumber()||e++)}return e},n.adjustRowNumberIfValid=function(e,t,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t},n.prototype.adjustRowNumbers=function(e,t,r){var i,o;if(this.detectionResultColumns[e-1]!=null){var s=r[t],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());var h=new Array(14);h[2]=l[t],h[3]=c[t],t>0&&(h[0]=r[t-1],h[4]=l[t-1],h[5]=c[t-1]),t>1&&(h[8]=r[t-2],h[10]=l[t-2],h[11]=c[t-2]),t<r.length-1&&(h[1]=r[t+1],h[6]=l[t+1],h[7]=c[t+1]),t<r.length-2&&(h[9]=r[t+2],h[12]=l[t+2],h[13]=c[t+2]);try{for(var g=w4(h),v=g.next();!v.done;v=g.next()){var m=v.value;if(n.adjustRowNumber(s,m))return}}catch(_){i={error:_}}finally{try{v&&!v.done&&(o=g.return)&&o.call(g)}finally{if(i)throw i.error}}}},n.adjustRowNumber=function(e,t){return t==null?!1:t.hasValidRowNumber()&&t.getBucket()===e.getBucket()?(e.setRowNumber(t.getRowNumber()),!0):!1},n.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},n.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},n.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},n.prototype.setBoundingBox=function(e){this.boundingBox=e},n.prototype.getBoundingBox=function(){return this.boundingBox},n.prototype.setDetectionResultColumn=function(e,t){this.detectionResultColumns[e]=t},n.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},n.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var t=new y1,r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){t.format("    |   ");continue}var o=this.detectionResultColumns[i].getCodewords()[r];if(o==null){t.format("    |   ");continue}t.format(" %3d|%3d",o.getRowNumber(),o.getValue())}t.format("%n")}return t.toString()},n}(),A4=function(){function n(e,t,r,i){this.rowNumber=n.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(i)}return n.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},n.prototype.isValidRowNumber=function(e){return e!==n.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},n.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},n.prototype.getWidth=function(){return this.endX-this.startX},n.prototype.getStartX=function(){return this.startX},n.prototype.getEndX=function(){return this.endX},n.prototype.getBucket=function(){return this.bucket},n.prototype.getValue=function(){return this.value},n.prototype.getRowNumber=function(){return this.rowNumber},n.prototype.setRowNumber=function(e){this.rowNumber=e},n.prototype.toString=function(){return this.rowNumber+"|"+this.value},n.BARCODE_ROW_UNKNOWN=-1,n}(),C4=function(){function n(){}return n.initialize=function(){for(var e=0;e<Ge.SYMBOL_TABLE.length;e++)for(var t=Ge.SYMBOL_TABLE[e],r=t&1,i=0;i<Ge.BARS_IN_MODULE;i++){for(var o=0;(t&1)===r;)o+=1,t>>=1;r=t&1,n.RATIOS_TABLE[e]||(n.RATIOS_TABLE[e]=new Array(Ge.BARS_IN_MODULE)),n.RATIOS_TABLE[e][Ge.BARS_IN_MODULE-i-1]=Math.fround(o/Ge.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},n.getDecodedValue=function(e){var t=n.getDecodedCodewordValue(n.sampleBitCounts(e));return t!==-1?t:n.getClosestDecodedValue(e)},n.sampleBitCounts=function(e){for(var t=Xe.sum(e),r=new Int32Array(Ge.BARS_IN_MODULE),i=0,o=0,s=0;s<Ge.MODULES_IN_CODEWORD;s++){var l=t/(2*Ge.MODULES_IN_CODEWORD)+s*t/Ge.MODULES_IN_CODEWORD;o+e[i]<=l&&(o+=e[i],i++),r[i]++}return r},n.getDecodedCodewordValue=function(e){var t=n.getBitValue(e);return Ge.getCodeword(t)===-1?-1:t},n.getBitValue=function(e){for(var t=0,r=0;r<e.length;r++)for(var i=0;i<e[r];i++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)},n.getClosestDecodedValue=function(e){var t=Xe.sum(e),r=new Array(Ge.BARS_IN_MODULE);if(t>1)for(var i=0;i<r.length;i++)r[i]=Math.fround(e[i]/t);var o=yd.MAX_VALUE,s=-1;this.bSymbolTableReady||n.initialize();for(var l=0;l<n.RATIOS_TABLE.length;l++){for(var c=0,h=n.RATIOS_TABLE[l],g=0;g<Ge.BARS_IN_MODULE;g++){var v=Math.fround(h[g]-r[g]);if(c+=Math.fround(v*v),c>=o)break}c<o&&(o=c,s=Ge.SYMBOL_TABLE[l])}return s},n.bSymbolTableReady=!1,n.RATIOS_TABLE=new Array(Ge.SYMBOL_TABLE.length).map(function(e){return new Array(Ge.BARS_IN_MODULE)}),n}(),I4=function(){function n(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return n.prototype.getSegmentIndex=function(){return this.segmentIndex},n.prototype.setSegmentIndex=function(e){this.segmentIndex=e},n.prototype.getFileId=function(){return this.fileId},n.prototype.setFileId=function(e){this.fileId=e},n.prototype.getOptionalData=function(){return this.optionalData},n.prototype.setOptionalData=function(e){this.optionalData=e},n.prototype.isLastSegment=function(){return this.lastSegment},n.prototype.setLastSegment=function(e){this.lastSegment=e},n.prototype.getSegmentCount=function(){return this.segmentCount},n.prototype.setSegmentCount=function(e){this.segmentCount=e},n.prototype.getSender=function(){return this.sender||null},n.prototype.setSender=function(e){this.sender=e},n.prototype.getAddressee=function(){return this.addressee||null},n.prototype.setAddressee=function(e){this.addressee=e},n.prototype.getFileName=function(){return this.fileName},n.prototype.setFileName=function(e){this.fileName=e},n.prototype.getFileSize=function(){return this.fileSize},n.prototype.setFileSize=function(e){this.fileSize=e},n.prototype.getChecksum=function(){return this.checksum},n.prototype.setChecksum=function(e){this.checksum=e},n.prototype.getTimestamp=function(){return this.timestamp},n.prototype.setTimestamp=function(e){this.timestamp=e},n}(),nv=function(){function n(){}return n.parseLong=function(e,t){return t===void 0&&(t=void 0),parseInt(e,t)},n}(),S4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),T4=function(n){S4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="NullPointerException",e}(zn),R4=function(){function n(){}return n.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},n.prototype.writeBytesOffset=function(e,t,r){if(e==null)throw new T4;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new h1;if(r===0)return;for(var i=0;i<r;i++)this.write(e[t+i])},n.prototype.flush=function(){},n.prototype.close=function(){},n}(),O4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),D4=function(n){O4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e}(zn),P4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),N4=function(n){P4(e,n);function e(t){t===void 0&&(t=32);var r=n.call(this)||this;if(r.count=0,t<0)throw new Ae("Negative initial size: "+t);return r.buf=new Uint8Array(t),r}return e.prototype.ensureCapacity=function(t){t-this.buf.length>0&&this.grow(t)},e.prototype.grow=function(t){var r=this.buf.length,i=r<<1;if(i-t<0&&(i=t),i<0){if(t<0)throw new D4;i=be.MAX_VALUE}this.buf=Ht.copyOfUint8Array(this.buf,i)},e.prototype.write=function(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1},e.prototype.writeBytesOffset=function(t,r,i){if(r<0||r>t.length||i<0||r+i-t.length>0)throw new h1;this.ensureCapacity(this.count+i),lt.arraycopy(t,r,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(t){t.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return Ht.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(t){return new String(this.buf).toString()},e.prototype.toString_number=function(t){return new String(this.buf).toString()},e.prototype.close=function(){},e}(R4),rt;(function(n){n[n.ALPHA=0]="ALPHA",n[n.LOWER=1]="LOWER",n[n.MIXED=2]="MIXED",n[n.PUNCT=3]="PUNCT",n[n.ALPHA_SHIFT=4]="ALPHA_SHIFT",n[n.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(rt||(rt={}));function Am(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var lc;function $i(n){if(typeof lc>"u"&&(lc=Am()),lc===null)throw new Error("BigInt is not supported!");return lc(n)}function b4(){var n=[];n[0]=$i(1);var e=$i(900);n[1]=e;for(var t=2;t<16;t++)n[t]=n[t-1]*e;return n}var M4=function(){function n(){}return n.decode=function(e,t){var r=new De(""),i=Ut.ISO8859_1;r.enableDecoding(i);for(var o=1,s=e[o++],l=new I4;o<e[0];){switch(s){case n.TEXT_COMPACTION_MODE_LATCH:o=n.textCompaction(e,o,r);break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:o=n.byteCompaction(s,e,i,o,r);break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[o++]);break;case n.NUMERIC_COMPACTION_MODE_LATCH:o=n.numericCompaction(e,o,r);break;case n.ECI_CHARSET:Ut.getCharacterSetECIByValue(e[o++]);break;case n.ECI_GENERAL_PURPOSE:o+=2;break;case n.ECI_USER_DEFINED:o++;break;case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:o=n.decodeMacroBlock(e,o,l);break;case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:throw new ue;default:o--,o=n.textCompaction(e,o,r);break}if(o<e.length)s=e[o++];else throw ue.getFormatInstance()}if(r.length()===0)throw ue.getFormatInstance();var c=new Kc(null,r.toString(),null,t);return c.setOther(l),c},n.decodeMacroBlock=function(e,t,r){if(t+n.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw ue.getFormatInstance();for(var i=new Int32Array(n.NUMBER_OF_SEQUENCE_CODEWORDS),o=0;o<n.NUMBER_OF_SEQUENCE_CODEWORDS;o++,t++)i[o]=e[t];r.setSegmentIndex(be.parseInt(n.decodeBase900toBase10(i,n.NUMBER_OF_SEQUENCE_CODEWORDS)));var s=new De;t=n.textCompaction(e,t,s),r.setFileId(s.toString());var l=-1;for(e[t]===n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(l=t+1);t<e[0];)switch(e[t]){case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(t++,e[t]){case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var c=new De;t=n.textCompaction(e,t+1,c),r.setFileName(c.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var h=new De;t=n.textCompaction(e,t+1,h),r.setSender(h.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var g=new De;t=n.textCompaction(e,t+1,g),r.setAddressee(g.toString());break;case n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var v=new De;t=n.numericCompaction(e,t+1,v),r.setSegmentCount(be.parseInt(v.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var m=new De;t=n.numericCompaction(e,t+1,m),r.setTimestamp(nv.parseLong(m.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var _=new De;t=n.numericCompaction(e,t+1,_),r.setChecksum(be.parseInt(_.toString()));break;case n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var A=new De;t=n.numericCompaction(e,t+1,A),r.setFileSize(nv.parseLong(A.toString()));break;default:throw ue.getFormatInstance()}break;case n.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw ue.getFormatInstance()}if(l!==-1){var I=t-l;r.isLastSegment()&&I--,r.setOptionalData(Ht.copyOfRange(e,l,l+I))}return t},n.textCompaction=function(e,t,r){for(var i=new Int32Array((e[0]-t)*2),o=new Int32Array((e[0]-t)*2),s=0,l=!1;t<e[0]&&!l;){var c=e[t++];if(c<n.TEXT_COMPACTION_MODE_LATCH)i[s]=c/30,i[s+1]=c%30,s+=2;else switch(c){case n.TEXT_COMPACTION_MODE_LATCH:i[s++]=n.TEXT_COMPACTION_MODE_LATCH;break;case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,l=!0;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[s]=n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,c=e[t++],o[s]=c,s++;break}}return n.decodeTextCompaction(i,o,s,r),t},n.decodeTextCompaction=function(e,t,r,i){for(var o=rt.ALPHA,s=rt.ALPHA,l=0;l<r;){var c=e[l],h="";switch(o){case rt.ALPHA:if(c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case n.LL:o=rt.LOWER;break;case n.ML:o=rt.MIXED;break;case n.PS:s=o,o=rt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=rt.ALPHA;break}break;case rt.LOWER:if(c<26)h=String.fromCharCode(97+c);else switch(c){case 26:h=" ";break;case n.AS:s=o,o=rt.ALPHA_SHIFT;break;case n.ML:o=rt.MIXED;break;case n.PS:s=o,o=rt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=rt.ALPHA;break}break;case rt.MIXED:if(c<n.PL)h=n.MIXED_CHARS[c];else switch(c){case n.PL:o=rt.PUNCT;break;case 26:h=" ";break;case n.LL:o=rt.LOWER;break;case n.AL:o=rt.ALPHA;break;case n.PS:s=o,o=rt.PUNCT_SHIFT;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=rt.ALPHA;break}break;case rt.PUNCT:if(c<n.PAL)h=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=rt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=rt.ALPHA;break}break;case rt.ALPHA_SHIFT:if(o=s,c<26)h=String.fromCharCode(65+c);else switch(c){case 26:h=" ";break;case n.TEXT_COMPACTION_MODE_LATCH:o=rt.ALPHA;break}break;case rt.PUNCT_SHIFT:if(o=s,c<n.PAL)h=n.PUNCT_CHARS[c];else switch(c){case n.PAL:o=rt.ALPHA;break;case n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(t[l]);break;case n.TEXT_COMPACTION_MODE_LATCH:o=rt.ALPHA;break}break}h!==""&&i.append(h),l++}},n.byteCompaction=function(e,t,r,i,o){var s=new N4,l=0,c=0,h=!1;switch(e){case n.BYTE_COMPACTION_MODE_LATCH:for(var g=new Int32Array(6),v=t[i++];i<t[0]&&!h;)switch(g[l++]=v,c=900*c+v,v=t[i++],v){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break;default:if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number($i(c)>>$i(8*(5-m))));c=0,l=0}break}i===t[0]&&v<n.TEXT_COMPACTION_MODE_LATCH&&(g[l++]=v);for(var _=0;_<l;_++)s.write(g[_]);break;case n.BYTE_COMPACTION_MODE_LATCH_6:for(;i<t[0]&&!h;){var A=t[i++];if(A<n.TEXT_COMPACTION_MODE_LATCH)l++,c=900*c+A;else switch(A){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.NUMERIC_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:i--,h=!0;break}if(l%5===0&&l>0){for(var m=0;m<6;++m)s.write(Number($i(c)>>$i(8*(5-m))));c=0,l=0}}break}return o.append(cr.decode(s.toByteArray(),r)),i},n.numericCompaction=function(e,t,r){for(var i=0,o=!1,s=new Int32Array(n.MAX_NUMERIC_CODEWORDS);t<e[0]&&!o;){var l=e[t++];if(t===e[0]&&(o=!0),l<n.TEXT_COMPACTION_MODE_LATCH)s[i]=l,i++;else switch(l){case n.TEXT_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH:case n.BYTE_COMPACTION_MODE_LATCH_6:case n.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case n.MACRO_PDF417_TERMINATOR:t--,o=!0;break}(i%n.MAX_NUMERIC_CODEWORDS===0||l===n.NUMERIC_COMPACTION_MODE_LATCH||o)&&i>0&&(r.append(n.decodeBase900toBase10(s,i)),i=0)}return t},n.decodeBase900toBase10=function(e,t){for(var r=$i(0),i=0;i<t;i++)r+=n.EXP900[t-i-1]*$i(e[i]);var o=r.toString();if(o.charAt(0)!=="1")throw new ue;return o.substring(1)},n.TEXT_COMPACTION_MODE_LATCH=900,n.BYTE_COMPACTION_MODE_LATCH=901,n.NUMERIC_COMPACTION_MODE_LATCH=902,n.BYTE_COMPACTION_MODE_LATCH_6=924,n.ECI_USER_DEFINED=925,n.ECI_GENERAL_PURPOSE=926,n.ECI_CHARSET=927,n.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,n.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,n.MACRO_PDF417_TERMINATOR=922,n.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,n.MAX_NUMERIC_CODEWORDS=15,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,n.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,n.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,n.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,n.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,n.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,n.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,n.PL=25,n.LL=27,n.AS=27,n.ML=28,n.AL=28,n.PS=29,n.PAL=29,n.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,n.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",n.EXP900=Am()?b4():[],n.NUMBER_OF_SEQUENCE_CODEWORDS=2,n}(),cu=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k4=function(){function n(){}return n.decode=function(e,t,r,i,o,s,l){for(var c=new Ad(e,t,r,i,o),h=null,g=null,v,m=!0;;m=!1){if(t!=null&&(h=n.getRowIndicatorColumn(e,c,t,!0,s,l)),i!=null&&(g=n.getRowIndicatorColumn(e,c,i,!1,s,l)),v=n.merge(h,g),v==null)throw Z.getNotFoundInstance();var _=v.getBoundingBox();if(m&&_!=null&&(_.getMinY()<c.getMinY()||_.getMaxY()>c.getMaxY()))c=_;else break}v.setBoundingBox(c);var A=v.getBarcodeColumnCount()+1;v.setDetectionResultColumn(0,h),v.setDetectionResultColumn(A,g);for(var I=h!=null,R=1;R<=A;R++){var L=I?R:A-R;if(v.getDetectionResultColumn(L)===void 0){var P=void 0;L===0||L===A?P=new tv(c,L===0):P=new Em(c),v.setDetectionResultColumn(L,P);for(var F=-1,z=F,q=c.getMinY();q<=c.getMaxY();q++){if(F=n.getStartColumn(v,L,q,I),F<0||F>c.getMaxX()){if(z===-1)continue;F=z}var Q=n.detectCodeword(e,c.getMinX(),c.getMaxX(),I,F,q,s,l);Q!=null&&(P.setCodeword(q,Q),z=F,s=Math.min(s,Q.getWidth()),l=Math.max(l,Q.getWidth()))}}}return n.createDecoderResult(v)},n.merge=function(e,t){if(e==null&&t==null)return null;var r=n.getBarcodeMetadata(e,t);if(r==null)return null;var i=Ad.merge(n.adjustBoundingBox(e),n.adjustBoundingBox(t));return new E4(r,i)},n.adjustBoundingBox=function(e){var t,r;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var o=n.getMax(i),s=0;try{for(var l=cu(i),c=l.next();!c.done;c=l.next()){var h=c.value;if(s+=o-h,h>0)break}}catch(_){t={error:_}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}for(var g=e.getCodewords(),v=0;s>0&&g[v]==null;v++)s--;for(var m=0,v=i.length-1;v>=0&&(m+=o-i[v],!(i[v]>0));v--);for(var v=g.length-1;m>0&&g[v]==null;v--)m--;return e.getBoundingBox().addMissingRows(s,m,e.isLeft())},n.getMax=function(e){var t,r,i=-1;try{for(var o=cu(e),s=o.next();!s.done;s=o.next()){var l=s.value;i=Math.max(i,l)}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i},n.getBarcodeMetadata=function(e,t){var r;if(e==null||(r=e.getBarcodeMetadata())==null)return t==null?null:t.getBarcodeMetadata();var i;return t==null||(i=t.getBarcodeMetadata())==null?r:r.getColumnCount()!==i.getColumnCount()&&r.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&r.getRowCount()!==i.getRowCount()?null:r},n.getRowIndicatorColumn=function(e,t,r,i,o,s){for(var l=new tv(t,i),c=0;c<2;c++)for(var h=c===0?1:-1,g=Math.trunc(Math.trunc(r.getX())),v=Math.trunc(Math.trunc(r.getY()));v<=t.getMaxY()&&v>=t.getMinY();v+=h){var m=n.detectCodeword(e,0,e.getWidth(),i,g,v,o,s);m!=null&&(l.setCodeword(v,m),i?g=m.getStartX():g=m.getEndX())}return l},n.adjustCodewordCount=function(e,t){var r=t[0][1],i=r.getValue(),o=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-n.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(o<1||o>Ge.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();r.setValue(o)}else i[0]!==o&&r.setValue(o)},n.createDecoderResult=function(e){var t=n.createBarcodeMatrix(e);n.adjustCodewordCount(e,t);for(var r=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),o=[],s=new Array,l=0;l<e.getBarcodeRowCount();l++)for(var c=0;c<e.getBarcodeColumnCount();c++){var h=t[l][c+1].getValue(),g=l*e.getBarcodeColumnCount()+c;h.length===0?r.push(g):h.length===1?i[g]=h[0]:(s.push(g),o.push(h))}for(var v=new Array(o.length),m=0;m<v.length;m++)v[m]=o[m];return n.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Ge.toIntArray(r),Ge.toIntArray(s),v)},n.createDecoderResultFromAmbiguousValues=function(e,t,r,i,o){for(var s=new Int32Array(i.length),l=100;l-- >0;){for(var c=0;c<s.length;c++)t[i[c]]=o[c][s[c]];try{return n.decodeCodewords(t,e,r)}catch(g){var h=g instanceof en;if(!h)throw g}if(s.length===0)throw en.getChecksumInstance();for(var c=0;c<s.length;c++)if(s[c]<o[c].length-1){s[c]++;break}else if(s[c]=0,c===s.length-1)throw en.getChecksumInstance()}throw en.getChecksumInstance()},n.createBarcodeMatrix=function(e){for(var t,r,i,o,s=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),l=0;l<s.length;l++)for(var c=0;c<s[l].length;c++)s[l][c]=new yu;var h=0;try{for(var g=cu(e.getDetectionResultColumns()),v=g.next();!v.done;v=g.next()){var m=v.value;if(m!=null)try{for(var _=(i=void 0,cu(m.getCodewords())),A=_.next();!A.done;A=_.next()){var I=A.value;if(I!=null){var R=I.getRowNumber();if(R>=0){if(R>=s.length)continue;s[R][h].setValue(I.getValue())}}}}catch(L){i={error:L}}finally{try{A&&!A.done&&(o=_.return)&&o.call(_)}finally{if(i)throw i.error}}h++}}catch(L){t={error:L}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(t)throw t.error}}return s},n.isValidBarcodeColumn=function(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1},n.getStartColumn=function(e,t,r,i){var o,s,l=i?1:-1,c=null;if(n.isValidBarcodeColumn(e,t-l)&&(c=e.getDetectionResultColumn(t-l).getCodeword(r)),c!=null)return i?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(t).getCodewordNearby(r),c!=null)return i?c.getStartX():c.getEndX();if(n.isValidBarcodeColumn(e,t-l)&&(c=e.getDetectionResultColumn(t-l).getCodewordNearby(r)),c!=null)return i?c.getEndX():c.getStartX();for(var h=0;n.isValidBarcodeColumn(e,t-l);){t-=l;try{for(var g=(o=void 0,cu(e.getDetectionResultColumn(t).getCodewords())),v=g.next();!v.done;v=g.next()){var m=v.value;if(m!=null)return(i?m.getEndX():m.getStartX())+l*h*(m.getEndX()-m.getStartX())}}catch(_){o={error:_}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}h++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},n.detectCodeword=function(e,t,r,i,o,s,l,c){o=n.adjustCodewordStartColumn(e,t,r,i,o,s);var h=n.getModuleBitCount(e,t,r,i,o,s);if(h==null)return null;var g,v=Xe.sum(h);if(i)g=o+v;else{for(var m=0;m<h.length/2;m++){var _=h[m];h[m]=h[h.length-1-m],h[h.length-1-m]=_}g=o,o=g-v}if(!n.checkCodewordSkew(v,l,c))return null;var A=C4.getDecodedValue(h),I=Ge.getCodeword(A);return I===-1?null:new A4(o,g,n.getCodewordBucketNumber(A),I)},n.getModuleBitCount=function(e,t,r,i,o,s){for(var l=o,c=new Int32Array(8),h=0,g=i?1:-1,v=i;(i?l<r:l>=t)&&h<c.length;)e.get(l,s)===v?(c[h]++,l+=g):(h++,v=!v);return h===c.length||l===(i?r:t)&&h===c.length-1?c:null},n.getNumberOfECCodeWords=function(e){return 2<<e},n.adjustCodewordStartColumn=function(e,t,r,i,o,s){for(var l=o,c=i?-1:1,h=0;h<2;h++){for(;(i?l>=t:l<r)&&i===e.get(l,s);){if(Math.abs(o-l)>n.CODEWORD_SKEW_SIZE)return o;l+=c}c=-c,i=!i}return l},n.checkCodewordSkew=function(e,t,r){return t-n.CODEWORD_SKEW_SIZE<=e&&e<=r+n.CODEWORD_SKEW_SIZE},n.decodeCodewords=function(e,t,r){if(e.length===0)throw ue.getFormatInstance();var i=1<<t+1,o=n.correctErrors(e,r,i);n.verifyCodewordCount(e,i);var s=M4.decode(e,""+t);return s.setErrorsCorrected(o),s.setErasures(r.length),s},n.correctErrors=function(e,t,r){if(t!=null&&t.length>r/2+n.MAX_ERRORS||r<0||r>n.MAX_EC_CODEWORDS)throw en.getChecksumInstance();return n.errorCorrection.decode(e,r,t)},n.verifyCodewordCount=function(e,t){if(e.length<4)throw ue.getFormatInstance();var r=e[0];if(r>e.length)throw ue.getFormatInstance();if(r===0)if(t<e.length)e[0]=e.length-t;else throw ue.getFormatInstance()},n.getBitCountForCodeword=function(e){for(var t=new Int32Array(8),r=0,i=t.length-1;!((e&1)!==r&&(r=e&1,i--,i<0));)t[i]++,e>>=1;return t},n.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},n.getCodewordBucketNumber_number=function(e){return n.getCodewordBucketNumber(n.getBitCountForCodeword(e))},n.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},n.toString=function(e){for(var t=new y1,r=0;r<e.length;r++){t.format("Row %2d: ",r);for(var i=0;i<e[r].length;i++){var o=e[r][i];o.getValue().length===0?t.format("        ",null):t.format("%4d(%2d)",o.getValue()[0],o.getConfidence(o.getValue()[0]))}t.format("%n")}return t.toString()},n.CODEWORD_SKEW_SIZE=2,n.MAX_ERRORS=3,n.MAX_EC_CODEWORDS=512,n.errorCorrection=new g4,n}(),L4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Cd=function(){function n(){}return n.prototype.decode=function(e,t){t===void 0&&(t=null);var r=n.decode(e,t,!1);if(r==null||r.length===0||r[0]==null)throw Z.getNotFoundInstance();return r[0]},n.prototype.decodeMultiple=function(e,t){t===void 0&&(t=null);try{return n.decode(e,t,!0)}catch(r){throw r instanceof ue||r instanceof en?Z.getNotFoundInstance():r}},n.decode=function(e,t,r){var i,o,s=new Array,l=l4.detectMultiple(e,t,r);try{for(var c=L4(l.getPoints()),h=c.next();!h.done;h=c.next()){var g=h.value,v=k4.decode(l.getBits(),g[4],g[5],g[6],g[7],n.getMinCodewordWidth(g),n.getMaxCodewordWidth(g)),m=new wn(v.getText(),v.getRawBytes(),void 0,g,_e.PDF_417);m.putMetadata(fn.ERROR_CORRECTION_LEVEL,v.getECLevel());var _=v.getOther();_!=null&&m.putMetadata(fn.PDF417_EXTRA_METADATA,_),s.push(m)}}catch(A){i={error:A}}finally{try{h&&!h.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return s.map(function(A){return A})},n.getMaxWidth=function(e,t){return e==null||t==null?0:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMinWidth=function(e,t){return e==null||t==null?be.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))},n.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(n.getMaxWidth(e[0],e[4]),n.getMaxWidth(e[6],e[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.max(n.getMaxWidth(e[1],e[5]),n.getMaxWidth(e[7],e[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))},n.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(n.getMinWidth(e[0],e[4]),n.getMinWidth(e[6],e[2])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN),Math.min(n.getMinWidth(e[1],e[5]),n.getMinWidth(e[7],e[3])*Ge.MODULES_IN_CODEWORD/Ge.MODULES_IN_STOP_PATTERN)))},n.prototype.reset=function(){},n}(),F4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),rv=function(n){F4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="ReaderException",e}(zn),iv=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},B4=function(){function n(){}return n.prototype.decode=function(e,t){return this.setHints(t),this.decodeInternal(e)},n.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},n.prototype.setHints=function(e){this.hints=e;var t=e!=null&&e.get(mt.TRY_HARDER)!==void 0,r=e==null?null:e.get(mt.POSSIBLE_FORMATS),i=new Array;if(r!=null){var o=r.some(function(s){return s===_e.UPC_A||s===_e.UPC_E||s===_e.EAN_13||s===_e.EAN_8||s===_e.CODABAR||s===_e.CODE_39||s===_e.CODE_93||s===_e.CODE_128||s===_e.ITF||s===_e.RSS_14||s===_e.RSS_EXPANDED});o&&!t&&i.push(new vu(e)),r.includes(_e.QR_CODE)&&i.push(new Ed),r.includes(_e.DATA_MATRIX)&&i.push(new wd),r.includes(_e.AZTEC)&&i.push(new _d),r.includes(_e.PDF_417)&&i.push(new Cd),o&&t&&i.push(new vu(e))}i.length===0&&(t||i.push(new vu(e)),i.push(new Ed),i.push(new wd),i.push(new _d),i.push(new Cd),t&&i.push(new vu(e))),this.readers=i},n.prototype.reset=function(){var e,t;if(this.readers!==null)try{for(var r=iv(this.readers),i=r.next();!i.done;i=r.next()){var o=i.value;o.reset()}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}},n.prototype.decodeInternal=function(e){var t,r;if(this.readers===null)throw new rv("No readers where selected, nothing can be read.");try{for(var i=iv(this.readers),o=i.next();!o.done;o=i.next()){var s=o.value;try{return s.decode(e,this.hints)}catch(l){if(l instanceof rv)continue}}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}throw new Z("No MultiFormat Readers were able to detect the code.")},n}(),V4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),U4=function(n){V4(e,n);function e(t,r){t===void 0&&(t=null),r===void 0&&(r=500);var i=this,o=new B4;return o.setHints(t),i=n.call(this,o,r)||this,i}return e.prototype.decodeBitmap=function(t){return this.reader.decodeWithState(t)},e}(hs),z4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){z4(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Cd,t)||this}return e})(hs);var H4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){H4(e,n);function e(t){return t===void 0&&(t=500),n.call(this,new Ed,t)||this}return e})(hs);var Id;(function(n){n[n.ERROR_CORRECTION=0]="ERROR_CORRECTION",n[n.CHARACTER_SET=1]="CHARACTER_SET",n[n.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",n[n.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",n[n.MIN_SIZE=4]="MIN_SIZE",n[n.MAX_SIZE=5]="MAX_SIZE",n[n.MARGIN=6]="MARGIN",n[n.PDF417_COMPACT=7]="PDF417_COMPACT",n[n.PDF417_COMPACTION=8]="PDF417_COMPACTION",n[n.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",n[n.AZTEC_LAYERS=10]="AZTEC_LAYERS",n[n.QR_VERSION=11]="QR_VERSION",n[n.GS1_FORMAT=12]="GS1_FORMAT",n[n.FORCE_C40=13]="FORCE_C40"})(Id||(Id={}));const cc=Id;var Cm=function(){function n(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new eo(e,Int32Array.from([1])))}return n.prototype.buildGenerator=function(e){var t=this.cachedGenerators;if(e>=t.length)for(var r=t[t.length-1],i=this.field,o=t.length;o<=e;o++){var s=r.multiply(new eo(i,Int32Array.from([1,i.exp(o-1+i.getGeneratorBase())])));t.push(s),r=s}return t[e]},n.prototype.encode=function(e,t){if(t===0)throw new Ae("No error correction bytes");var r=e.length-t;if(r<=0)throw new Ae("No data bytes provided");var i=this.buildGenerator(t),o=new Int32Array(r);lt.arraycopy(e,0,o,0,r);var s=new eo(this.field,o);s=s.multiplyByMonomial(t,1);for(var l=s.divide(i)[1],c=l.getCoefficients(),h=t-c.length,g=0;g<h;g++)e[r+g]=0;lt.arraycopy(c,0,e,r+h,c.length)},n}(),mu=function(){function n(){}return n.applyMaskPenaltyRule1=function(e){return n.applyMaskPenaltyRule1Internal(e,!0)+n.applyMaskPenaltyRule1Internal(e,!1)},n.applyMaskPenaltyRule2=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o-1;s++)for(var l=r[s],c=0;c<i-1;c++){var h=l[c];h===l[c+1]&&h===r[s+1][c]&&h===r[s+1][c+1]&&t++}return n.N2*t},n.applyMaskPenaltyRule3=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var l=0;l<i;l++){var c=r[s];l+6<i&&c[l]===1&&c[l+1]===0&&c[l+2]===1&&c[l+3]===1&&c[l+4]===1&&c[l+5]===0&&c[l+6]===1&&(n.isWhiteHorizontal(c,l-4,l)||n.isWhiteHorizontal(c,l+7,l+11))&&t++,s+6<o&&r[s][l]===1&&r[s+1][l]===0&&r[s+2][l]===1&&r[s+3][l]===1&&r[s+4][l]===1&&r[s+5][l]===0&&r[s+6][l]===1&&(n.isWhiteVertical(r,l,s-4,s)||n.isWhiteVertical(r,l,s+7,s+11))&&t++}return t*n.N3},n.isWhiteHorizontal=function(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(var i=t;i<r;i++)if(e[i]===1)return!1;return!0},n.isWhiteVertical=function(e,t,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(var o=r;o<i;o++)if(e[o][t]===1)return!1;return!0},n.applyMaskPenaltyRule4=function(e){for(var t=0,r=e.getArray(),i=e.getWidth(),o=e.getHeight(),s=0;s<o;s++)for(var l=r[s],c=0;c<i;c++)l[c]===1&&t++;var h=e.getHeight()*e.getWidth(),g=Math.floor(Math.abs(t*2-h)*10/h);return g*n.N4},n.getDataMaskBit=function(e,t,r){var i,o;switch(e){case 0:i=r+t&1;break;case 1:i=r&1;break;case 2:i=t%3;break;case 3:i=(r+t)%3;break;case 4:i=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:o=r*t,i=(o&1)+o%3;break;case 6:o=r*t,i=(o&1)+o%3&1;break;case 7:o=r*t,i=o%3+(r+t&1)&1;break;default:throw new Ae("Invalid mask pattern: "+e)}return i===0},n.applyMaskPenaltyRule1Internal=function(e,t){for(var r=0,i=t?e.getHeight():e.getWidth(),o=t?e.getWidth():e.getHeight(),s=e.getArray(),l=0;l<i;l++){for(var c=0,h=-1,g=0;g<o;g++){var v=t?s[l][g]:s[g][l];v===h?c++:(c>=5&&(r+=n.N1+(c-5)),c=1,h=v)}c>=5&&(r+=n.N1+(c-5))}return r},n.N1=3,n.N2=3,n.N3=40,n.N4=10,n}(),j4=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G4=function(){function n(e,t){this.width=e,this.height=t;for(var r=new Array(t),i=0;i!==t;i++)r[i]=new Uint8Array(e);this.bytes=r}return n.prototype.getHeight=function(){return this.height},n.prototype.getWidth=function(){return this.width},n.prototype.get=function(e,t){return this.bytes[t][e]},n.prototype.getArray=function(){return this.bytes},n.prototype.setNumber=function(e,t,r){this.bytes[t][e]=r},n.prototype.setBoolean=function(e,t,r){this.bytes[t][e]=r?1:0},n.prototype.clear=function(e){var t,r;try{for(var i=j4(this.bytes),o=i.next();!o.done;o=i.next()){var s=o.value;Ht.fill(s,e)}}catch(l){t={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}},n.prototype.equals=function(e){if(!(e instanceof n))return!1;var t=e;if(this.width!==t.width||this.height!==t.height)return!1;for(var r=0,i=this.height;r<i;++r)for(var o=this.bytes[r],s=t.bytes[r],l=0,c=this.width;l<c;++l)if(o[l]!==s[l])return!1;return!0},n.prototype.toString=function(){for(var e=new De,t=0,r=this.height;t<r;++t){for(var i=this.bytes[t],o=0,s=this.width;o<s;++o)switch(i[o]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},n}(),Sd=function(){function n(){this.maskPattern=-1}return n.prototype.getMode=function(){return this.mode},n.prototype.getECLevel=function(){return this.ecLevel},n.prototype.getVersion=function(){return this.version},n.prototype.getMaskPattern=function(){return this.maskPattern},n.prototype.getMatrix=function(){return this.matrix},n.prototype.toString=function(){var e=new De;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},n.prototype.setMode=function(e){this.mode=e},n.prototype.setECLevel=function(e){this.ecLevel=e},n.prototype.setVersion=function(e){this.version=e},n.prototype.setMaskPattern=function(e){this.maskPattern=e},n.prototype.setMatrix=function(e){this.matrix=e},n.isValidMaskPattern=function(e){return e>=0&&e<n.NUM_MASK_PATTERNS},n.NUM_MASK_PATTERNS=8,n}(),W4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dt=function(n){W4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.kind="WriterException",e}(zn),ov=function(){function n(){}return n.clearMatrix=function(e){e.clear(255)},n.buildMatrix=function(e,t,r,i,o){n.clearMatrix(o),n.embedBasicPatterns(r,o),n.embedTypeInfo(t,i,o),n.maybeEmbedVersionInfo(r,o),n.embedDataBits(e,i,o)},n.embedBasicPatterns=function(e,t){n.embedPositionDetectionPatternsAndSeparators(t),n.embedDarkDotAtLeftBottomCorner(t),n.maybeEmbedPositionAdjustmentPatterns(e,t),n.embedTimingPatterns(t)},n.embedTypeInfo=function(e,t,r){var i=new tn;n.makeTypeInfoBits(e,t,i);for(var o=0,s=i.getSize();o<s;++o){var l=i.get(i.getSize()-1-o),c=n.TYPE_INFO_COORDINATES[o],h=c[0],g=c[1];if(r.setBoolean(h,g,l),o<8){var v=r.getWidth()-o-1,m=8;r.setBoolean(v,m,l)}else{var v=8,m=r.getHeight()-7+(o-8);r.setBoolean(v,m,l)}}},n.maybeEmbedVersionInfo=function(e,t){if(!(e.getVersionNumber()<7)){var r=new tn;n.makeVersionInfoBits(e,r);for(var i=6*3-1,o=0;o<6;++o)for(var s=0;s<3;++s){var l=r.get(i);i--,t.setBoolean(o,t.getHeight()-11+s,l),t.setBoolean(t.getHeight()-11+s,o,l)}}},n.embedDataBits=function(e,t,r){for(var i=0,o=-1,s=r.getWidth()-1,l=r.getHeight()-1;s>0;){for(s===6&&(s-=1);l>=0&&l<r.getHeight();){for(var c=0;c<2;++c){var h=s-c;if(n.isEmpty(r.get(h,l))){var g=void 0;i<e.getSize()?(g=e.get(i),++i):g=!1,t!==255&&mu.getDataMaskBit(t,h,l)&&(g=!g),r.setBoolean(h,l,g)}}l+=o}o=-o,l+=o,s-=2}if(i!==e.getSize())throw new dt("Not all bits consumed: "+i+"/"+e.getSize())},n.findMSBSet=function(e){return 32-be.numberOfLeadingZeros(e)},n.calculateBCHCode=function(e,t){if(t===0)throw new Ae("0 polynomial");var r=n.findMSBSet(t);for(e<<=r-1;n.findMSBSet(e)>=r;)e^=t<<n.findMSBSet(e)-r;return e},n.makeTypeInfoBits=function(e,t,r){if(!Sd.isValidMaskPattern(t))throw new dt("Invalid mask pattern");var i=e.getBits()<<3|t;r.appendBits(i,5);var o=n.calculateBCHCode(i,n.TYPE_INFO_POLY);r.appendBits(o,10);var s=new tn;if(s.appendBits(n.TYPE_INFO_MASK_PATTERN,15),r.xor(s),r.getSize()!==15)throw new dt("should not happen but we got: "+r.getSize())},n.makeVersionInfoBits=function(e,t){t.appendBits(e.getVersionNumber(),6);var r=n.calculateBCHCode(e.getVersionNumber(),n.VERSION_INFO_POLY);if(t.appendBits(r,12),t.getSize()!==18)throw new dt("should not happen but we got: "+t.getSize())},n.isEmpty=function(e){return e===255},n.embedTimingPatterns=function(e){for(var t=8;t<e.getWidth()-8;++t){var r=(t+1)%2;n.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),n.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}},n.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new dt;e.setNumber(8,e.getHeight()-8,1)},n.embedHorizontalSeparationPattern=function(e,t,r){for(var i=0;i<8;++i){if(!n.isEmpty(r.get(e+i,t)))throw new dt;r.setNumber(e+i,t,0)}},n.embedVerticalSeparationPattern=function(e,t,r){for(var i=0;i<7;++i){if(!n.isEmpty(r.get(e,t+i)))throw new dt;r.setNumber(e,t+i,0)}},n.embedPositionAdjustmentPattern=function(e,t,r){for(var i=0;i<5;++i)for(var o=n.POSITION_ADJUSTMENT_PATTERN[i],s=0;s<5;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPattern=function(e,t,r){for(var i=0;i<7;++i)for(var o=n.POSITION_DETECTION_PATTERN[i],s=0;s<7;++s)r.setNumber(e+s,t+i,o[s])},n.embedPositionDetectionPatternsAndSeparators=function(e){var t=n.POSITION_DETECTION_PATTERN[0].length;n.embedPositionDetectionPattern(0,0,e),n.embedPositionDetectionPattern(e.getWidth()-t,0,e),n.embedPositionDetectionPattern(0,e.getWidth()-t,e);var r=8;n.embedHorizontalSeparationPattern(0,r-1,e),n.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),n.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);var i=7;n.embedVerticalSeparationPattern(i,0,e),n.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),n.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},n.maybeEmbedPositionAdjustmentPatterns=function(e,t){if(!(e.getVersionNumber()<2))for(var r=e.getVersionNumber()-1,i=n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r],o=0,s=i.length;o!==s;o++){var l=i[o];if(l>=0)for(var c=0;c!==s;c++){var h=i[c];h>=0&&n.isEmpty(t.get(h,l))&&n.embedPositionAdjustmentPattern(h-2,l-2,t)}}},n.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),n.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),n.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),n.VERSION_INFO_POLY=7973,n.TYPE_INFO_POLY=1335,n.TYPE_INFO_MASK_PATTERN=21522,n}(),$4=function(){function n(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}return n.prototype.getDataBytes=function(){return this.dataBytes},n.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},n}(),av=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.calculateMaskPenalty=function(e){return mu.applyMaskPenaltyRule1(e)+mu.applyMaskPenaltyRule2(e)+mu.applyMaskPenaltyRule3(e)+mu.applyMaskPenaltyRule4(e)},n.encode=function(e,t,r){r===void 0&&(r=null);var i=n.DEFAULT_BYTE_MODE_ENCODING,o=r!==null&&r.get(cc.CHARACTER_SET)!==void 0;o&&(i=r.get(cc.CHARACTER_SET).toString());var s=this.chooseMode(e,i),l=new tn;if(s===pt.BYTE&&(o||n.DEFAULT_BYTE_MODE_ENCODING!==i)){var c=Ut.getCharacterSetECIByName(i);c!==void 0&&this.appendECI(c,l)}this.appendModeInfo(s,l);var h=new tn;this.appendBytes(e,s,h,i);var g;if(r!==null&&r.get(cc.QR_VERSION)!==void 0){var v=Number.parseInt(r.get(cc.QR_VERSION).toString(),10);g=Go.getVersionForNumber(v);var m=this.calculateBitsNeeded(s,l,h,g);if(!this.willFit(m,g,t))throw new dt("Data too big for requested version")}else g=this.recommendVersion(t,s,l,h);var _=new tn;_.appendBitArray(l);var A=s===pt.BYTE?h.getSizeInBytes():e.length;this.appendLengthInfo(A,g,s,_),_.appendBitArray(h);var I=g.getECBlocksForLevel(t),R=g.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(R,_);var L=this.interleaveWithECBytes(_,g.getTotalCodewords(),R,I.getNumBlocks()),P=new Sd;P.setECLevel(t),P.setMode(s),P.setVersion(g);var F=g.getDimensionForVersion(),z=new G4(F,F),q=this.chooseMaskPattern(L,t,g,z);return P.setMaskPattern(q),ov.buildMatrix(L,t,g,q,z),P.setMatrix(z),P},n.recommendVersion=function(e,t,r,i){var o=this.calculateBitsNeeded(t,r,i,Go.getVersionForNumber(1)),s=this.chooseVersion(o,e),l=this.calculateBitsNeeded(t,r,i,s);return this.chooseVersion(l,e)},n.calculateBitsNeeded=function(e,t,r,i){return t.getSize()+e.getCharacterCountBits(i)+r.getSize()},n.getAlphanumericCode=function(e){return e<n.ALPHANUMERIC_TABLE.length?n.ALPHANUMERIC_TABLE[e]:-1},n.chooseMode=function(e,t){if(t===void 0&&(t=null),Ut.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return pt.KANJI;for(var r=!1,i=!1,o=0,s=e.length;o<s;++o){var l=e.charAt(o);if(n.isDigit(l))r=!0;else if(this.getAlphanumericCode(l.charCodeAt(0))!==-1)i=!0;else return pt.BYTE}return i?pt.ALPHANUMERIC:r?pt.NUMERIC:pt.BYTE},n.isOnlyDoubleByteKanji=function(e){var t;try{t=cr.encode(e,Ut.SJIS)}catch{return!1}var r=t.length;if(r%2!==0)return!1;for(var i=0;i<r;i+=2){var o=t[i]&255;if((o<129||o>159)&&(o<224||o>235))return!1}return!0},n.chooseMaskPattern=function(e,t,r,i){for(var o=Number.MAX_SAFE_INTEGER,s=-1,l=0;l<Sd.NUM_MASK_PATTERNS;l++){ov.buildMatrix(e,t,r,l,i);var c=this.calculateMaskPenalty(i);c<o&&(o=c,s=l)}return s},n.chooseVersion=function(e,t){for(var r=1;r<=40;r++){var i=Go.getVersionForNumber(r);if(n.willFit(e,i,t))return i}throw new dt("Data too big")},n.willFit=function(e,t,r){var i=t.getTotalCodewords(),o=t.getECBlocksForLevel(r),s=o.getTotalECCodewords(),l=i-s,c=(e+7)/8;return l>=c},n.terminateBits=function(e,t){var r=e*8;if(t.getSize()>r)throw new dt("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(var i=0;i<4&&t.getSize()<r;++i)t.appendBit(!1);var o=t.getSize()&7;if(o>0)for(var i=o;i<8;i++)t.appendBit(!1);for(var s=e-t.getSizeInBytes(),i=0;i<s;++i)t.appendBits(i&1?17:236,8);if(t.getSize()!==r)throw new dt("Bits size does not equal capacity")},n.getNumDataBytesAndNumECBytesForBlockID=function(e,t,r,i,o,s){if(i>=r)throw new dt("Block ID too large");var l=e%r,c=r-l,h=Math.floor(e/r),g=h+1,v=Math.floor(t/r),m=v+1,_=h-v,A=g-m;if(_!==A)throw new dt("EC bytes mismatch");if(r!==c+l)throw new dt("RS blocks mismatch");if(e!==(v+_)*c+(m+A)*l)throw new dt("Total bytes mismatch");i<c?(o[0]=v,s[0]=_):(o[0]=m,s[0]=A)},n.interleaveWithECBytes=function(e,t,r,i){var o,s,l,c;if(e.getSizeInBytes()!==r)throw new dt("Number of bits and data bytes does not match");for(var h=0,g=0,v=0,m=new Array,_=0;_<i;++_){var A=new Int32Array(1),I=new Int32Array(1);n.getNumDataBytesAndNumECBytesForBlockID(t,r,i,_,A,I);var R=A[0],L=new Uint8Array(R);e.toBytes(8*h,L,0,R);var P=n.generateECBytes(L,I[0]);m.push(new $4(L,P)),g=Math.max(g,R),v=Math.max(v,P.length),h+=A[0]}if(r!==h)throw new dt("Data bytes does not match offset");for(var F=new tn,_=0;_<g;++_)try{for(var z=(o=void 0,av(m)),q=z.next();!q.done;q=z.next()){var Q=q.value,L=Q.getDataBytes();_<L.length&&F.appendBits(L[_],8)}}catch(k){o={error:k}}finally{try{q&&!q.done&&(s=z.return)&&s.call(z)}finally{if(o)throw o.error}}for(var _=0;_<v;++_)try{for(var D=(l=void 0,av(m)),T=D.next();!T.done;T=D.next()){var Q=T.value,P=Q.getErrorCorrectionBytes();_<P.length&&F.appendBits(P[_],8)}}catch(k){l={error:k}}finally{try{T&&!T.done&&(c=D.return)&&c.call(D)}finally{if(l)throw l.error}}if(t!==F.getSizeInBytes())throw new dt("Interleaving error: "+t+" and "+F.getSizeInBytes()+" differ.");return F},n.generateECBytes=function(e,t){for(var r=e.length,i=new Int32Array(r+t),o=0;o<r;o++)i[o]=e[o]&255;new Cm(Un.QR_CODE_FIELD_256).encode(i,t);for(var s=new Uint8Array(t),o=0;o<t;o++)s[o]=i[r+o];return s},n.appendModeInfo=function(e,t){t.appendBits(e.getBits(),4)},n.appendLengthInfo=function(e,t,r,i){var o=r.getCharacterCountBits(t);if(e>=1<<o)throw new dt(e+" is bigger than "+((1<<o)-1));i.appendBits(e,o)},n.appendBytes=function(e,t,r,i){switch(t){case pt.NUMERIC:n.appendNumericBytes(e,r);break;case pt.ALPHANUMERIC:n.appendAlphanumericBytes(e,r);break;case pt.BYTE:n.append8BitBytes(e,r,i);break;case pt.KANJI:n.appendKanjiBytes(e,r);break;default:throw new dt("Invalid mode: "+t)}},n.getDigit=function(e){return e.charCodeAt(0)-48},n.isDigit=function(e){var t=n.getDigit(e);return t>=0&&t<=9},n.appendNumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getDigit(e.charAt(i));if(i+2<r){var s=n.getDigit(e.charAt(i+1)),l=n.getDigit(e.charAt(i+2));t.appendBits(o*100+s*10+l,10),i+=3}else if(i+1<r){var s=n.getDigit(e.charAt(i+1));t.appendBits(o*10+s,7),i+=2}else t.appendBits(o,4),i++}},n.appendAlphanumericBytes=function(e,t){for(var r=e.length,i=0;i<r;){var o=n.getAlphanumericCode(e.charCodeAt(i));if(o===-1)throw new dt;if(i+1<r){var s=n.getAlphanumericCode(e.charCodeAt(i+1));if(s===-1)throw new dt;t.appendBits(o*45+s,11),i+=2}else t.appendBits(o,6),i++}},n.append8BitBytes=function(e,t,r){var i;try{i=cr.encode(e,r)}catch(c){throw new dt(c)}for(var o=0,s=i.length;o!==s;o++){var l=i[o];t.appendBits(l,8)}},n.appendKanjiBytes=function(e,t){var r;try{r=cr.encode(e,Ut.SJIS)}catch(v){throw new dt(v)}for(var i=r.length,o=0;o<i;o+=2){var s=r[o]&255,l=r[o+1]&255,c=s<<8&4294967295|l,h=-1;if(c>=33088&&c<=40956?h=c-33088:c>=57408&&c<=60351&&(h=c-49472),h===-1)throw new dt("Invalid byte sequence");var g=(h>>8)*192+(h&255);t.appendBits(g,13)}},n.appendECI=function(e,t){t.appendBits(pt.ECI.getBits(),4),t.appendBits(e.getValue(),8)},n.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),n.DEFAULT_BYTE_MODE_ENCODING=Ut.UTF8.getName(),n})();var X4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){X4(e,n);function e(t,r,i,o,s,l,c,h){var g=n.call(this,l,c)||this;if(g.yuvData=t,g.dataWidth=r,g.dataHeight=i,g.left=o,g.top=s,o+l>r||s+c>i)throw new Ae("Crop rectangle does not fit within image data.");return h&&g.reverseHorizontal(l,c),g}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ae("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return lt.arraycopy(this.yuvData,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.yuvData;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return lt.arraycopy(this.yuvData,s,o,0,i),o;for(var l=0;l<r;l++){var c=l*t;lt.arraycopy(this.yuvData,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+r,i,o,!1)},e.prototype.renderThumbnail=function(){for(var t=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(t*r),o=this.yuvData,s=this.top*this.dataWidth+this.left,l=0;l<r;l++){for(var c=l*t,h=0;h<t;h++){var g=o[s+h*e.THUMBNAIL_SCALE_FACTOR]&255;i[c+h]=4278190080|g*65793}s+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(t,r){for(var i=this.yuvData,o=0,s=this.top*this.dataWidth+this.left;o<r;o++,s+=this.dataWidth)for(var l=s+t/2,c=s,h=s+t-1;c<l;c++,h--){var g=i[c];i[c]=i[h],i[h]=g}},e.prototype.invert=function(){return new d1(this)},e.THUMBNAIL_SCALE_FACTOR=2,e})(Xc);var K4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();(function(n){K4(e,n);function e(t,r,i,o,s,l,c){var h=n.call(this,r,i)||this;if(h.dataWidth=o,h.dataHeight=s,h.left=l,h.top=c,t.BYTES_PER_ELEMENT===4){for(var g=r*i,v=new Uint8ClampedArray(g),m=0;m<g;m++){var _=t[m],A=_>>16&255,I=_>>7&510,R=_&255;v[m]=(A+I+R)/4&255}h.luminances=v}else h.luminances=t;if(o===void 0&&(h.dataWidth=r),s===void 0&&(h.dataHeight=i),l===void 0&&(h.left=0),c===void 0&&(h.top=0),h.left+r>h.dataWidth||h.top+i>h.dataHeight)throw new Ae("Crop rectangle does not fit within image data.");return h}return e.prototype.getRow=function(t,r){if(t<0||t>=this.getHeight())throw new Ae("Requested row is outside the image: "+t);var i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));var o=(t+this.top)*this.dataWidth+this.left;return lt.arraycopy(this.luminances,o,r,0,i),r},e.prototype.getMatrix=function(){var t=this.getWidth(),r=this.getHeight();if(t===this.dataWidth&&r===this.dataHeight)return this.luminances;var i=t*r,o=new Uint8ClampedArray(i),s=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return lt.arraycopy(this.luminances,s,o,0,i),o;for(var l=0;l<r;l++){var c=l*t;lt.arraycopy(this.luminances,s,o,c,t),s+=this.dataWidth}return o},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(t,r,i,o){return new e(this.luminances,i,o,this.dataWidth,this.dataHeight,this.left+t,this.top+r)},e.prototype.invert=function(){return new d1(this)},e})(Xc);var q4=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Y4=function(n){q4(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.forName=function(t){return this.getCharacterSetECIByName(t)},e}(Ut),Q4=function(){function n(){}return n.ISO_8859_1=Ut.ISO8859_1,n}(),Td,Z4=301,J4=function(n,e){for(var t=1,r=0;r<255;r++)e[r]=t,n[t]=r,t*=2,t>=256&&(t^=Z4);return{LOG:n,ALOG:e}};Td=J4([],[]),Td.LOG;Td.ALOG;var sv;(function(n){n[n.FORCE_NONE=0]="FORCE_NONE",n[n.FORCE_SQUARE=1]="FORCE_SQUARE",n[n.FORCE_RECTANGLE=2]="FORCE_RECTANGLE"})(sv||(sv={}));var uv=129,Im=230,eS=231,tS=235,nS=236,rS=237,iS=238,oS=239,aS=240,jh=254,sS=254,lv="[)>05",cv="[)>06",fv="",nt=0,un=1,On=2,Bt=3,Zt=4,mn=5,uS=function(){function n(){}return n.prototype.getEncodingMode=function(){return nt},n.prototype.encode=function(e){var t=Or.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(t>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var r=e.getCurrentChar(),i=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case mn:e.writeCodeword(eS),e.signalEncoderChange(mn);return;case un:e.writeCodeword(Im),e.signalEncoderChange(un);return;case Bt:e.writeCodeword(iS),e.signalEncoderChange(Bt);break;case On:e.writeCodeword(oS),e.signalEncoderChange(On);break;case Zt:e.writeCodeword(aS),e.signalEncoderChange(Zt);break;default:throw new Error("Illegal mode: "+i)}else Or.isExtendedASCII(r)?(e.writeCodeword(tS),e.writeCodeword(r-128+1),e.pos++):(e.writeCodeword(r+1),e.pos++)}},n.prototype.encodeASCIIDigits=function(e,t){if(Or.isDigit(e)&&Or.isDigit(t)){var r=(e-48)*10+(t-48);return r+130}throw new Error("not digits: "+e+t)},n}(),lS=function(){function n(){}return n.prototype.getEncodingMode=function(){return mn},n.prototype.encode=function(e){var t=new De;for(t.append(0);e.hasMoreCharacters();){var r=e.getCurrentChar();t.append(r),e.pos++;var i=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(nt);break}}var o=t.length()-1,s=1,l=e.getCodewordCount()+o+s;e.updateSymbolInfo(l);var c=e.getSymbolInfo().getDataCapacity()-l>0;if(e.hasMoreCharacters()||c)if(o<=249)t.setCharAt(0,ze.getCharAt(o));else if(o<=1555)t.setCharAt(0,ze.getCharAt(Math.floor(o/250)+249)),t.insert(1,ze.getCharAt(o%250));else throw new Error("Message length not in valid ranges: "+o);for(var h=0,r=t.length();h<r;h++)e.writeCodeword(this.randomize255State(t.charAt(h).charCodeAt(0),e.getCodewordCount()+1))},n.prototype.randomize255State=function(e,t){var r=149*t%255+1,i=e+r;return i<=255?i:i-256},n}(),m1=function(){function n(){}return n.prototype.getEncodingMode=function(){return un},n.prototype.encodeMaximal=function(e){for(var t=new De,r=0,i=e.pos,o=0;e.hasMoreCharacters();){var s=e.getCurrentChar();e.pos++,r=this.encodeChar(s,t),t.length()%3===0&&(i=e.pos,o=t.length())}if(o!==t.length()){var l=Math.floor(t.length()/3*2),c=Math.floor(e.getCodewordCount()+l+1);e.updateSymbolInfo(c);var h=e.getSymbolInfo().getDataCapacity()-c,g=Math.floor(t.length()%3);(g===2&&h!==2||g===1&&(r>3||h!==1))&&(e.pos=i)}t.length()>0&&e.writeCodeword(Im),this.handleEOD(e,t)},n.prototype.encode=function(e){for(var t=new De;e.hasMoreCharacters();){var r=e.getCurrentChar();e.pos++;var i=this.encodeChar(r,t),o=Math.floor(t.length()/3)*2,s=e.getCodewordCount()+o;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s;if(!e.hasMoreCharacters()){var c=new De;for(t.length()%3===2&&l!==2&&(i=this.backtrackOneCharacter(e,t,c,i));t.length()%3===1&&(i>3||l!==1);)i=this.backtrackOneCharacter(e,t,c,i);break}var h=t.length();if(h%3===0){var g=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(g!==this.getEncodingMode()){e.signalEncoderChange(nt);break}}}this.handleEOD(e,t)},n.prototype.backtrackOneCharacter=function(e,t,r,i){var o=t.length(),s=t.toString().substring(0,o-i);t.setLengthToZero(),t.append(s),e.pos--;var l=e.getCurrentChar();return i=this.encodeChar(l,r),e.resetSymbolInfo(),i},n.prototype.writeNextTriplet=function(e,t){e.writeCodewords(this.encodeToCodewords(t.toString()));var r=t.toString().substring(3);t.setLengthToZero(),t.append(r)},n.prototype.handleEOD=function(e,t){var r=Math.floor(t.length()/3*2),i=t.length()%3,o=e.getCodewordCount()+r;e.updateSymbolInfo(o);var s=e.getSymbolInfo().getDataCapacity()-o;if(i===2){for(t.append("\0");t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(jh)}else if(s===1&&i===1){for(;t.length()>=3;)this.writeNextTriplet(e,t);e.hasMoreCharacters()&&e.writeCodeword(jh),e.pos--}else if(i===0){for(;t.length()>=3;)this.writeNextTriplet(e,t);(s>0||e.hasMoreCharacters())&&e.writeCodeword(jh)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(nt)},n.prototype.encodeChar=function(e,t){if(e===32)return t.append(3),1;if(e>=48&&e<=57)return t.append(e-48+4),1;if(e>=65&&e<=90)return t.append(e-65+14),1;if(e<32)return t.append(0),t.append(e),2;if(e<=47)return t.append(1),t.append(e-33),2;if(e<=64)return t.append(1),t.append(e-58+15),2;if(e<=95)return t.append(1),t.append(e-91+22),2;if(e<=127)return t.append(2),t.append(e-96),2;t.append("1");var r=2;return r+=this.encodeChar(e-128,t),r},n.prototype.encodeToCodewords=function(e){var t=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,r=t/256,i=t%256,o=new De;return o.append(r),o.append(i),o.toString()},n}(),cS=function(){function n(){}return n.prototype.getEncodingMode=function(){return Zt},n.prototype.encode=function(e){for(var t=new De;e.hasMoreCharacters();){var r=e.getCurrentChar();this.encodeChar(r,t),e.pos++;var i=t.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(t.toString()));var o=t.toString().substring(4);t.setLengthToZero(),t.append(o);var s=Or.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){e.signalEncoderChange(nt);break}}}t.append(ze.getCharAt(31)),this.handleEOD(e,t)},n.prototype.handleEOD=function(e,t){try{var r=t.length();if(r===0)return;if(r===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),o=e.getRemainingCharacters();if(o>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),o<=i&&i<=2)return}if(r>4)throw new Error("Count must not exceed 4");var s=r-1,l=this.encodeToCodewords(t.toString()),c=!e.hasMoreCharacters(),h=c&&s<=2;if(s<=2){e.updateSymbolInfo(e.getCodewordCount()+s);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(h=!1,e.updateSymbolInfo(e.getCodewordCount()+l.length))}h?(e.resetSymbolInfo(),e.pos-=s):e.writeCodewords(l)}finally{e.signalEncoderChange(nt)}},n.prototype.encodeChar=function(e,t){e>=32&&e<=63?t.append(e):e>=64&&e<=94?t.append(ze.getCharAt(e-64)):Or.illegalCharacter(ze.getCharAt(e))},n.prototype.encodeToCodewords=function(e){var t=e.length;if(t===0)throw new Error("StringBuilder must not be empty");var r=e.charAt(0).charCodeAt(0),i=t>=2?e.charAt(1).charCodeAt(0):0,o=t>=3?e.charAt(2).charCodeAt(0):0,s=t>=4?e.charAt(3).charCodeAt(0):0,l=(r<<18)+(i<<12)+(o<<6)+s,c=l>>16&255,h=l>>8&255,g=l&255,v=new De;return v.append(c),t>=2&&v.append(h),t>=3&&v.append(g),v.toString()},n}(),fS=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Qe=function(){function n(e,t,r,i,o,s,l,c){l===void 0&&(l=0),c===void 0&&(c=0),this.rectangular=e,this.dataCapacity=t,this.errorCodewords=r,this.matrixWidth=i,this.matrixHeight=o,this.dataRegions=s,this.rsBlockData=l,this.rsBlockError=c}return n.lookup=function(e,t,r,i,o){var s,l;t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!0);try{for(var c=hS(pS),h=c.next();!h.done;h=c.next()){var g=h.value;if(!(t===1&&g.rectangular)&&!(t===2&&!g.rectangular)&&!(r!=null&&(g.getSymbolWidth()<r.getWidth()||g.getSymbolHeight()<r.getHeight()))&&!(i!=null&&(g.getSymbolWidth()>i.getWidth()||g.getSymbolHeight()>i.getHeight()))&&e<=g.dataCapacity)return g}}catch(v){s={error:v}}finally{try{h&&!h.done&&(l=c.return)&&l.call(c)}finally{if(s)throw s.error}}if(o)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},n.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},n.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},n.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},n.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},n.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},n.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},n.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},n.prototype.getDataCapacity=function(){return this.dataCapacity},n.prototype.getErrorCodewords=function(){return this.errorCodewords},n.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},n.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},n}(),dS=function(n){fS(e,n);function e(){return n.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(t){return t<=8?156:155},e}(Qe),pS=[new Qe(!1,3,5,8,8,1),new Qe(!1,5,7,10,10,1),new Qe(!0,5,7,16,6,1),new Qe(!1,8,10,12,12,1),new Qe(!0,10,11,14,6,2),new Qe(!1,12,12,14,14,1),new Qe(!0,16,14,24,10,1),new Qe(!1,18,14,16,16,1),new Qe(!1,22,18,18,18,1),new Qe(!0,22,18,16,10,2),new Qe(!1,30,20,20,20,1),new Qe(!0,32,24,16,14,2),new Qe(!1,36,24,22,22,1),new Qe(!1,44,28,24,24,1),new Qe(!0,49,28,22,14,2),new Qe(!1,62,36,14,14,4),new Qe(!1,86,42,16,16,4),new Qe(!1,114,48,18,18,4),new Qe(!1,144,56,20,20,4),new Qe(!1,174,68,22,22,4),new Qe(!1,204,84,24,24,4,102,42),new Qe(!1,280,112,14,14,16,140,56),new Qe(!1,368,144,16,16,16,92,36),new Qe(!1,456,192,18,18,16,114,48),new Qe(!1,576,224,20,20,16,144,56),new Qe(!1,696,272,22,22,16,174,68),new Qe(!1,816,336,24,24,16,136,56),new Qe(!1,1050,408,18,18,36,175,68),new Qe(!1,1304,496,20,20,36,163,62),new dS],gS=function(){function n(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var t=e.split("").map(function(l){return l.charCodeAt(0)}),r=new De,i=0,o=t.length;i<o;i++){var s=String.fromCharCode(t[i]&255);if(s==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");r.append(s)}this.msg=r.toString(),this.shape=0,this.codewords=new De,this.newEncoding=-1}return n.prototype.setSymbolShape=function(e){this.shape=e},n.prototype.setSizeConstraints=function(e,t){this.minSize=e,this.maxSize=t},n.prototype.getMessage=function(){return this.msg},n.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},n.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},n.prototype.getCodewords=function(){return this.codewords},n.prototype.writeCodewords=function(e){this.codewords.append(e)},n.prototype.writeCodeword=function(e){this.codewords.append(e)},n.prototype.getCodewordCount=function(){return this.codewords.length()},n.prototype.getNewEncoding=function(){return this.newEncoding},n.prototype.signalEncoderChange=function(e){this.newEncoding=e},n.prototype.resetEncoderSignal=function(){this.newEncoding=-1},n.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},n.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},n.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},n.prototype.getSymbolInfo=function(){return this.symbolInfo},n.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Qe.lookup(e,this.shape,this.minSize,this.maxSize,!0))},n.prototype.resetSymbolInfo=function(){this.symbolInfo=null},n}(),vS=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),yS=function(n){vS(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Bt},e.prototype.encode=function(t){for(var r=new De;t.hasMoreCharacters();){var i=t.getCurrentChar();t.pos++,this.encodeChar(i,r);var o=r.length();if(o%3===0){this.writeNextTriplet(t,r);var s=Or.lookAheadTest(t.getMessage(),t.pos,this.getEncodingMode());if(s!==this.getEncodingMode()){t.signalEncoderChange(nt);break}}}this.handleEOD(t,r)},e.prototype.encodeChar=function(t,r){switch(t){case 13:r.append(0);break;case 42:r.append(1);break;case 62:r.append(2);break;case 32:r.append(3);break;default:t>=48&&t<=57?r.append(t-48+4):t>=65&&t<=90?r.append(t-65+14):Or.illegalCharacter(ze.getCharAt(t));break}return 1},e.prototype.handleEOD=function(t,r){t.updateSymbolInfo();var i=t.getSymbolInfo().getDataCapacity()-t.getCodewordCount(),o=r.length();t.pos-=o,(t.getRemainingCharacters()>1||i>1||t.getRemainingCharacters()!==i)&&t.writeCodeword(sS),t.getNewEncoding()<0&&t.signalEncoderChange(nt)},e}(m1),mS=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_S=function(n){mS(e,n);function e(){return n!==null&&n.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return On},e.prototype.encodeChar=function(t,r){if(t===32)return r.append(3),1;if(t>=48&&t<=57)return r.append(t-48+4),1;if(t>=97&&t<=122)return r.append(t-97+14),1;if(t<32)return r.append(0),r.append(t),2;if(t<=47)return r.append(1),r.append(t-33),2;if(t<=64)return r.append(1),r.append(t-58+15),2;if(t>=91&&t<=95)return r.append(1),r.append(t-91+22),2;if(t===96)return r.append(2),r.append(0),2;if(t<=90)return r.append(2),r.append(t-65+1),2;if(t<=127)return r.append(2),r.append(t-123+27),2;r.append("1");var i=2;return i+=this.encodeChar(t-128,r),i},e}(m1),Or=function(){function n(){}return n.randomize253State=function(e){var t=149*e%253+1,r=uv+t;return r<=254?r:r-254},n.encodeHighLevel=function(e,t,r,i,o){t===void 0&&(t=0),r===void 0&&(r=null),i===void 0&&(i=null),o===void 0&&(o=!1);var s=new m1,l=[new uS,s,new _S,new yS,new cS,new lS],c=new gS(e);c.setSymbolShape(t),c.setSizeConstraints(r,i),e.startsWith(lv)&&e.endsWith(fv)?(c.writeCodeword(nS),c.setSkipAtEnd(2),c.pos+=lv.length):e.startsWith(cv)&&e.endsWith(fv)&&(c.writeCodeword(rS),c.setSkipAtEnd(2),c.pos+=cv.length);var h=nt;for(o&&(s.encodeMaximal(c),h=c.getNewEncoding(),c.resetEncoderSignal());c.hasMoreCharacters();)l[h].encode(c),c.getNewEncoding()>=0&&(h=c.getNewEncoding(),c.resetEncoderSignal());var g=c.getCodewordCount();c.updateSymbolInfo();var v=c.getSymbolInfo().getDataCapacity();g<v&&h!==nt&&h!==mn&&h!==Zt&&c.writeCodeword("þ");var m=c.getCodewords();for(m.length()<v&&m.append(uv);m.length()<v;)m.append(this.randomize253State(m.length()+1));return c.getCodewords().toString()},n.lookAheadTest=function(e,t,r){var i=this.lookAheadTestIntern(e,t,r);if(r===Bt&&i===Bt){for(var o=Math.min(t+3,e.length),s=t;s<o;s++)if(!this.isNativeX12(e.charCodeAt(s)))return nt}else if(r===Zt&&i===Zt){for(var o=Math.min(t+4,e.length),s=t;s<o;s++)if(!this.isNativeEDIFACT(e.charCodeAt(s)))return nt}return i},n.lookAheadTestIntern=function(e,t,r){if(t>=e.length)return r;var i;r===nt?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[r]=0);for(var o=0,s=new Uint8Array(6),l=[];;){if(t+o===e.length){Ht.fill(s,0),Ht.fill(l,0);var c=this.findMinimums(i,l,be.MAX_VALUE,s),h=this.getMinimumCount(s);if(l[nt]===c)return nt;if(h===1){if(s[mn]>0)return mn;if(s[Zt]>0)return Zt;if(s[On]>0)return On;if(s[Bt]>0)return Bt}return un}var g=e.charCodeAt(t+o);if(o++,this.isDigit(g)?i[nt]+=.5:this.isExtendedASCII(g)?(i[nt]=Math.ceil(i[nt]),i[nt]+=2):(i[nt]=Math.ceil(i[nt]),i[nt]++),this.isNativeC40(g)?i[un]+=2/3:this.isExtendedASCII(g)?i[un]+=8/3:i[un]+=4/3,this.isNativeText(g)?i[On]+=2/3:this.isExtendedASCII(g)?i[On]+=8/3:i[On]+=4/3,this.isNativeX12(g)?i[Bt]+=2/3:this.isExtendedASCII(g)?i[Bt]+=13/3:i[Bt]+=10/3,this.isNativeEDIFACT(g)?i[Zt]+=3/4:this.isExtendedASCII(g)?i[Zt]+=17/4:i[Zt]+=13/4,this.isSpecialB256(g)?i[mn]+=4:i[mn]++,o>=4){if(Ht.fill(s,0),Ht.fill(l,0),this.findMinimums(i,l,be.MAX_VALUE,s),l[nt]<this.min(l[mn],l[un],l[On],l[Bt],l[Zt]))return nt;if(l[mn]<l[nt]||l[mn]+1<this.min(l[un],l[On],l[Bt],l[Zt]))return mn;if(l[Zt]+1<this.min(l[mn],l[un],l[On],l[Bt],l[nt]))return Zt;if(l[On]+1<this.min(l[mn],l[un],l[Zt],l[Bt],l[nt]))return On;if(l[Bt]+1<this.min(l[mn],l[un],l[Zt],l[On],l[nt]))return Bt;if(l[un]+1<this.min(l[nt],l[mn],l[Zt],l[On])){if(l[un]<l[Bt])return un;if(l[un]===l[Bt]){for(var v=t+o+1;v<e.length;){var m=e.charCodeAt(v);if(this.isX12TermSep(m))return Bt;if(!this.isNativeX12(m))break;v++}return un}}}}},n.min=function(e,t,r,i,o){var s=Math.min(e,Math.min(t,Math.min(r,i)));return o===void 0?s:Math.min(s,o)},n.findMinimums=function(e,t,r,i){for(var o=0;o<6;o++){var s=t[o]=Math.ceil(e[o]);r>s&&(r=s,Ht.fill(i,0)),r===s&&(i[o]=i[o]+1)}return r},n.getMinimumCount=function(e){for(var t=0,r=0;r<6;r++)t+=e[r];return t||0},n.isDigit=function(e){return e>=48&&e<=57},n.isExtendedASCII=function(e){return e>=128&&e<=255},n.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},n.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},n.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},n.isX12TermSep=function(e){return e===13||e===42||e===62},n.isNativeEDIFACT=function(e){return e>=32&&e<=94},n.isSpecialB256=function(e){return!1},n.determineConsecutiveDigitCount=function(e,t){t===void 0&&(t=0);for(var r=e.length,i=t;i<r&&this.isDigit(e.charCodeAt(i));)i++;return i-t},n.illegalCharacter=function(e){var t=be.toHexString(e.charCodeAt(0));throw t="0000".substring(0,4-t.length)+t,new Error("Illegal character: "+e+" (0x"+t+")")},n}(),Gh=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hv=function(){function n(e){this.charset=e,this.name=e.name}return n.prototype.canEncode=function(e){try{return cr.encode(e,this.charset)!=null}catch{return!1}},n}(),xS=function(){function n(e,t,r){var i,o,s,l,c,h;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(N){return new hv(Y4.forName(N))}),this.encoders=[];var g=[];g.push(new hv(Q4.ISO_8859_1));for(var v=t!=null&&t.name.startsWith("UTF"),m=0;m<e.length;m++){var _=!1;try{for(var A=(i=void 0,Gh(g)),I=A.next();!I.done;I=A.next()){var R=I.value,L=e.charAt(m),P=L.charCodeAt(0);if(P===r||R.canEncode(L)){_=!0;break}}}catch(N){i={error:N}}finally{try{I&&!I.done&&(o=A.return)&&o.call(A)}finally{if(i)throw i.error}}if(!_)try{for(var F=(s=void 0,Gh(this.ENCODERS)),z=F.next();!z.done;z=F.next()){var R=z.value;if(R.canEncode(e.charAt(m))){g.push(R),_=!0;break}}}catch(N){s={error:N}}finally{try{z&&!z.done&&(l=F.return)&&l.call(F)}finally{if(s)throw s.error}}_||(v=!0)}if(g.length===1&&!v)this.encoders=[g[0]];else{this.encoders=[];var q=0;try{for(var Q=Gh(g),D=Q.next();!D.done;D=Q.next()){var R=D.value;this.encoders[q++]=R}}catch(N){c={error:N}}finally{try{D&&!D.done&&(h=Q.return)&&h.call(Q)}finally{if(c)throw c.error}}}var T=-1;if(t!=null){for(var m=0;m<this.encoders.length;m++)if(this.encoders[m]!=null&&t.name===this.encoders[m].name){T=m;break}}this.priorityEncoderIndex=T}return n.prototype.length=function(){return this.encoders.length},n.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},n.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},n.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},n.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},n.prototype.canEncode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return!0},n.prototype.encode=function(e,t){if(!(t<this.length()))throw new Error("index must be less than length");return cr.encode(ze.getCharAt(e),this.encoders[t].name)},n}(),wS=3,ES=function(){function n(e,t,r){this.fnc1=r;var i=new xS(e,t,r);if(i.length()===1)for(var o=0;o<this.bytes.length;o++){var s=e.charAt(o).charCodeAt(0);this.bytes[o]=s===r?1e3:s}else this.bytes=this.encodeMinimally(e,i,r)}return n.prototype.getFNC1Character=function(){return this.fnc1},n.prototype.length=function(){return this.bytes.length},n.prototype.haveNCharacters=function(e,t){if(e+t-1>=this.bytes.length)return!1;for(var r=0;r<t;r++)if(this.isECI(e+r))return!1;return!0},n.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},n.prototype.subSequence=function(e,t){if(e<0||e>t||t>this.length())throw new Error(""+e);for(var r=new De,i=e;i<t;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");r.append(this.charAt(i))}return r.toString()},n.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},n.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},n.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},n.prototype.addEdge=function(e,t,r){(e[t][r.encoderIndex]==null||e[t][r.encoderIndex].cachedTotalSize>r.cachedTotalSize)&&(e[t][r.encoderIndex]=r)},n.prototype.addEdges=function(e,t,r,i,o,s){var l=e.charAt(i).charCodeAt(0),c=0,h=t.length();t.getPriorityEncoderIndex()>=0&&(l===s||t.canEncode(l,t.getPriorityEncoderIndex()))&&(c=t.getPriorityEncoderIndex(),h=c+1);for(var g=c;g<h;g++)(l===s||t.canEncode(l,g))&&this.addEdge(r,i+1,new dv(l,t,g,o,s))},n.prototype.encodeMinimally=function(e,t,r){var i=e.length,o=new dv[i+1][t.length()];this.addEdges(e,t,o,0,null,r);for(var s=1;s<=i;s++){for(var l=0;l<t.length();l++)o[s][l]!=null&&s<i&&this.addEdges(e,t,o,s,o[s][l],r);for(var l=0;l<t.length();l++)o[s-1][l]=null}for(var c=-1,h=be.MAX_VALUE,l=0;l<t.length();l++)if(o[i][l]!=null){var g=o[i][l];g.cachedTotalSize<h&&(h=g.cachedTotalSize,c=l)}if(c<0)throw new Error('Failed to encode "'+e+'"');for(var v=[],m=o[i][c];m!=null;){if(m.isFNC1())v.unshift(1e3);else for(var _=t.encode(m.c,m.encoderIndex),s=_.length-1;s>=0;s--)v.unshift(_[s]&255);var A=m.previous===null?0:m.previous.encoderIndex;A!==m.encoderIndex&&v.unshift(256+t.getECIValue(m.encoderIndex)),m=m.previous}for(var I=[],s=0;s<I.length;s++)I[s]=v[s];return I},n}(),dv=function(){function n(e,t,r,i,o){this.c=e,this.encoderSet=t,this.encoderIndex=r,this.previous=i,this.fnc1=o,this.c=e===o?1e3:e;var s=this.isFNC1()?1:t.encode(e,r).length,l=i===null?0:i.encoderIndex;l!==r&&(s+=wS),i!=null&&(s+=i.cachedTotalSize),this.cachedTotalSize=s}return n.prototype.isFNC1=function(){return this.c===1e3},n}(),AS=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();var pv;(function(n){n[n.ASCII=0]="ASCII",n[n.C40=1]="C40",n[n.TEXT=2]="TEXT",n[n.X12=3]="X12",n[n.EDF=4]="EDF",n[n.B256=5]="B256"})(pv||(pv={}));(function(n){AS(e,n);function e(t,r,i,o,s){var l=n.call(this,t,r,i)||this;return l.shape=o,l.macroId=s,l}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e})(ES);var CS=function(){function n(){}return n.prototype.isCompact=function(){return this.compact},n.prototype.setCompact=function(e){this.compact=e},n.prototype.getSize=function(){return this.size},n.prototype.setSize=function(e){this.size=e},n.prototype.getLayers=function(){return this.layers},n.prototype.setLayers=function(e){this.layers=e},n.prototype.getCodeWords=function(){return this.codeWords},n.prototype.setCodeWords=function(e){this.codeWords=e},n.prototype.getMatrix=function(){return this.matrix},n.prototype.setMatrix=function(e){this.matrix=e},n}(),gv=function(){function n(){}return n.singletonList=function(e){return[e]},n.min=function(e,t){return e.sort(t)[0]},n}(),IS=function(){function n(e){this.previous=e}return n.prototype.getPrevious=function(){return this.previous},n}(),SS=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),_1=function(n){SS(e,n);function e(t,r,i){var o=n.call(this,t)||this;return o.value=r,o.bitCount=i,o}return e.prototype.appendTo=function(t,r){t.appendBits(this.value,this.bitCount)},e.prototype.add=function(t,r){return new e(this,t,r)},e.prototype.addBinaryShift=function(t,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,t,r)},e.prototype.toString=function(){var t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+be.toBinaryString(t|1<<this.bitCount).substring(1)+">"},e}(IS),TS=function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},n(e,t)};return function(e,t){n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),RS=function(n){TS(e,n);function e(t,r,i){var o=n.call(this,t,0,0)||this;return o.binaryShiftStart=r,o.binaryShiftByteCount=i,o}return e.prototype.appendTo=function(t,r){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):i===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(r[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(t,r){return new e(this,t,r)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(_1);function OS(n,e,t){return new RS(n,e,t)}function fu(n,e,t){return new _1(n,e,t)}var DS=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],to=0,bc=1,ur=2,Sm=3,jr=4,PS=new _1(null,0,0),Wh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])],NS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function bS(n){var e,t;try{for(var r=NS(n),i=r.next();!i.done;i=r.next()){var o=i.value;Ht.fill(o,-1)}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n[to][jr]=0,n[bc][jr]=0,n[bc][to]=28,n[Sm][jr]=0,n[ur][jr]=0,n[ur][to]=15,n}var Tm=bS(Ht.createInt32Array(6,6)),MS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},kS=function(){function n(e,t,r,i){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=i}return n.prototype.getMode=function(){return this.mode},n.prototype.getToken=function(){return this.token},n.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},n.prototype.getBitCount=function(){return this.bitCount},n.prototype.latchAndAppend=function(e,t){var r=this.bitCount,i=this.token;if(e!==this.mode){var o=Wh[this.mode][e];i=fu(i,o&65535,o>>16),r+=o>>16}var s=e===ur?4:5;return i=fu(i,t,s),new n(i,e,0,r+s)},n.prototype.shiftAndAppend=function(e,t){var r=this.token,i=this.mode===ur?4:5;return r=fu(r,Tm[this.mode][e],i),r=fu(r,t,5),new n(r,this.mode,0,this.bitCount+i+5)},n.prototype.addBinaryShiftChar=function(e){var t=this.token,r=this.mode,i=this.bitCount;if(this.mode===jr||this.mode===ur){var o=Wh[r][to];t=fu(t,o&65535,o>>16),i+=o>>16,r=to}var s=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,l=new n(t,r,this.binaryShiftByteCount+1,i+s);return l.binaryShiftByteCount===2078&&(l=l.endBinaryShift(e+1)),l},n.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var t=this.token;return t=OS(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new n(t,this.mode,0,this.bitCount)},n.prototype.isBetterThanOrEqualTo=function(e){var t=this.bitCount+(Wh[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=n.calculateBinaryShiftCost(e)-n.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount},n.prototype.toBitArray=function(e){for(var t,r,i=[],o=this.endBinaryShift(e.length).token;o!==null;o=o.getPrevious())i.unshift(o);var s=new tn;try{for(var l=MS(i),c=l.next();!c.done;c=l.next()){var h=c.value;h.appendTo(s,e)}}catch(g){t={error:g}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n.prototype.toString=function(){return ze.format("%s bits=%d bytes=%d",DS[this.mode],this.bitCount,this.binaryShiftByteCount)},n.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},n.INITIAL_STATE=new n(PS,to,0,0),n}();function LS(n){var e=ze.getCharCode(" "),t=ze.getCharCode("."),r=ze.getCharCode(",");n[to][e]=1;for(var i=ze.getCharCode("Z"),o=ze.getCharCode("A"),s=o;s<=i;s++)n[to][s]=s-o+2;n[bc][e]=1;for(var l=ze.getCharCode("z"),c=ze.getCharCode("a"),s=c;s<=l;s++)n[bc][s]=s-c+2;n[ur][e]=1;for(var h=ze.getCharCode("9"),g=ze.getCharCode("0"),s=g;s<=h;s++)n[ur][s]=s-g+2;n[ur][r]=12,n[ur][t]=13;for(var v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""],m=0;m<v.length;m++)n[Sm][ze.getCharCode(v[m])]=m;for(var _=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],m=0;m<_.length;m++)ze.getCharCode(_[m])>0&&(n[jr][ze.getCharCode(_[m])]=m);return n}var $h=LS(Ht.createInt32Array(5,256)),fc=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},FS=function(){function n(e){this.text=e}return n.prototype.encode=function(){for(var e=ze.getCharCode(" "),t=ze.getCharCode(`
`),r=gv.singletonList(kS.INITIAL_STATE),i=0;i<this.text.length;i++){var o=void 0,s=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case ze.getCharCode("\r"):o=s===t?2:0;break;case ze.getCharCode("."):o=s===e?3:0;break;case ze.getCharCode(","):o=s===e?4:0;break;case ze.getCharCode(":"):o=s===e?5:0;break;default:o=0}o>0?(r=n.updateStateListForPair(r,i,o),i++):r=this.updateStateListForChar(r,i)}var l=gv.min(r,function(c,h){return c.getBitCount()-h.getBitCount()});return l.toBitArray(this.text)},n.prototype.updateStateListForChar=function(e,t){var r,i,o=[];try{for(var s=fc(e),l=s.next();!l.done;l=s.next()){var c=l.value;this.updateStateForChar(c,t,o)}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return n.simplifyStates(o)},n.prototype.updateStateForChar=function(e,t,r){for(var i=this.text[t]&255,o=$h[e.getMode()][i]>0,s=null,l=0;l<=jr;l++){var c=$h[l][i];if(c>0){if(s==null&&(s=e.endBinaryShift(t)),!o||l===e.getMode()||l===ur){var h=s.latchAndAppend(l,c);r.push(h)}if(!o&&Tm[e.getMode()][l]>=0){var g=s.shiftAndAppend(l,c);r.push(g)}}}if(e.getBinaryShiftByteCount()>0||$h[e.getMode()][i]===0){var v=e.addBinaryShiftChar(t);r.push(v)}},n.updateStateListForPair=function(e,t,r){var i,o,s=[];try{for(var l=fc(e),c=l.next();!c.done;c=l.next()){var h=c.value;this.updateStateForPair(h,t,r,s)}}catch(g){i={error:g}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return this.simplifyStates(s)},n.updateStateForPair=function(e,t,r,i){var o=e.endBinaryShift(t);if(i.push(o.latchAndAppend(jr,r)),e.getMode()!==jr&&i.push(o.shiftAndAppend(jr,r)),r===3||r===4){var s=o.latchAndAppend(ur,16-r).latchAndAppend(ur,1);i.push(s)}if(e.getBinaryShiftByteCount()>0){var l=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);i.push(l)}},n.simplifyStates=function(e){var t,r,i,o,s=[];try{for(var l=fc(e),c=l.next();!c.done;c=l.next()){var h=c.value,g=!0,v=function(R){if(R.isBetterThanOrEqualTo(h))return g=!1,"break";h.isBetterThanOrEqualTo(R)&&(s=s.filter(function(L){return L!==R}))};try{for(var m=(i=void 0,fc(s)),_=m.next();!_.done;_=m.next()){var A=_.value,I=v(A);if(I==="break")break}}catch(R){i={error:R}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}g&&s.push(h)}}catch(R){t={error:R}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return s},n}(),BS=function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};(function(){function n(){}return n.encodeBytes=function(e){return n.encode(e,n.DEFAULT_EC_PERCENT,n.DEFAULT_AZTEC_LAYERS)},n.encode=function(e,t,r){var i=new FS(e).encode(),o=be.truncDivision(i.getSize()*t,100)+11,s=i.getSize()+o,l,c,h,g,v;if(r!==n.DEFAULT_AZTEC_LAYERS){if(l=r<0,c=Math.abs(r),c>(l?n.MAX_NB_BITS_COMPACT:n.MAX_NB_BITS))throw new Ae(ze.format("Illegal value %s for layers",r));h=n.totalBitsInLayer(c,l),g=n.WORD_SIZE[c];var m=h-h%g;if(v=n.stuffBits(i,g),v.getSize()+o>m)throw new Ae("Data to large for user specified layer");if(l&&v.getSize()>g*64)throw new Ae("Data to large for user specified layer")}else{g=0,v=null;for(var _=0;;_++){if(_>n.MAX_NB_BITS)throw new Ae("Data too large for an Aztec code");if(l=_<=3,c=l?_+1:_,h=n.totalBitsInLayer(c,l),!(s>h)){(v==null||g!==n.WORD_SIZE[c])&&(g=n.WORD_SIZE[c],v=n.stuffBits(i,g));var m=h-h%g;if(!(l&&v.getSize()>g*64)&&v.getSize()+o<=m)break}}}var A=n.generateCheckWords(v,h,g),I=v.getSize()/g,R=n.generateModeMessage(l,c,I),L=(l?11:14)+c*4,P=new Int32Array(L),F;if(l){F=L;for(var _=0;_<P.length;_++)P[_]=_}else{F=L+1+2*be.truncDivision(be.truncDivision(L,2)-1,15);for(var z=be.truncDivision(L,2),q=be.truncDivision(F,2),_=0;_<z;_++){var Q=_+be.truncDivision(_,15);P[z-_-1]=q-Q-1,P[z+_]=q+Q+1}}for(var D=new Kr(F),_=0,T=0;_<c;_++){for(var N=(c-_)*4+(l?9:12),k=0;k<N;k++)for(var V=k*2,U=0;U<2;U++)A.get(T+V+U)&&D.set(P[_*2+U],P[_*2+k]),A.get(T+N*2+V+U)&&D.set(P[_*2+k],P[L-1-_*2-U]),A.get(T+N*4+V+U)&&D.set(P[L-1-_*2-U],P[L-1-_*2-k]),A.get(T+N*6+V+U)&&D.set(P[L-1-_*2-k],P[_*2+U]);T+=N*8}if(n.drawModeMessage(D,l,F,R),l)n.drawBullsEye(D,be.truncDivision(F,2),5);else{n.drawBullsEye(D,be.truncDivision(F,2),7);for(var _=0,k=0;_<be.truncDivision(L,2)-1;_+=15,k+=16)for(var U=be.truncDivision(F,2)&1;U<F;U+=2)D.set(be.truncDivision(F,2)-k,U),D.set(be.truncDivision(F,2)+k,U),D.set(U,be.truncDivision(F,2)-k),D.set(U,be.truncDivision(F,2)+k)}var b=new CS;return b.setCompact(l),b.setSize(F),b.setLayers(c),b.setCodeWords(I),b.setMatrix(D),b},n.drawBullsEye=function(e,t,r){for(var i=0;i<r;i+=2)for(var o=t-i;o<=t+i;o++)e.set(o,t-i),e.set(o,t+i),e.set(t-i,o),e.set(t+i,o);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)},n.generateModeMessage=function(e,t,r){var i=new tn;return e?(i.appendBits(t-1,2),i.appendBits(r-1,6),i=n.generateCheckWords(i,28,4)):(i.appendBits(t-1,5),i.appendBits(r-1,11),i=n.generateCheckWords(i,40,4)),i},n.drawModeMessage=function(e,t,r,i){var o=be.truncDivision(r,2);if(t)for(var s=0;s<7;s++){var l=o-3+s;i.get(s)&&e.set(l,o-5),i.get(s+7)&&e.set(o+5,l),i.get(20-s)&&e.set(l,o+5),i.get(27-s)&&e.set(o-5,l)}else for(var s=0;s<10;s++){var l=o-5+s+be.truncDivision(s,5);i.get(s)&&e.set(l,o-7),i.get(s+10)&&e.set(o+7,l),i.get(29-s)&&e.set(l,o+7),i.get(39-s)&&e.set(o-7,l)}},n.generateCheckWords=function(e,t,r){var i,o,s=e.getSize()/r,l=new Cm(n.getGF(r)),c=be.truncDivision(t,r),h=n.bitsToWords(e,r,c);l.encode(h,c-s);var g=t%r,v=new tn;v.appendBits(0,g);try{for(var m=BS(Array.from(h)),_=m.next();!_.done;_=m.next()){var A=_.value;v.appendBits(A,r)}}catch(I){i={error:I}}finally{try{_&&!_.done&&(o=m.return)&&o.call(m)}finally{if(i)throw i.error}}return v},n.bitsToWords=function(e,t,r){var i=new Int32Array(r),o,s;for(o=0,s=e.getSize()/t;o<s;o++){for(var l=0,c=0;c<t;c++)l|=e.get(o*t+c)?1<<t-c-1:0;i[o]=l}return i},n.getGF=function(e){switch(e){case 4:return Un.AZTEC_PARAM;case 6:return Un.AZTEC_DATA_6;case 8:return Un.AZTEC_DATA_8;case 10:return Un.AZTEC_DATA_10;case 12:return Un.AZTEC_DATA_12;default:throw new Ae("Unsupported word size "+e)}},n.stuffBits=function(e,t){for(var r=new tn,i=e.getSize(),o=(1<<t)-2,s=0;s<i;s+=t){for(var l=0,c=0;c<t;c++)(s+c>=i||e.get(s+c))&&(l|=1<<t-1-c);(l&o)===o?(r.appendBits(l&o,t),s--):l&o?r.appendBits(l,t):(r.appendBits(l|1,t),s--)}return r},n.totalBitsInLayer=function(e,t){return((t?88:112)+16*e)*e},n.DEFAULT_EC_PERCENT=33,n.DEFAULT_AZTEC_LAYERS=0,n.MAX_NB_BITS=32,n.MAX_NB_BITS_COMPACT=4,n.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),n})();const VS={apiKey:"AIzaSyC8tDVbDIrKuylsyF3rbDSSPlzsEHXqZIs",authDomain:"online-attendance-21f95.firebaseapp.com",databaseURL:"https://online-attendance-21f95-default-rtdb.firebaseio.com",projectId:"online-attendance-21f95",storageBucket:"online-attendance-21f95.appspot.com",messagingSenderId:"756223518392",appId:"1:756223518392:web:5e8d28c78f7eefb8be764d"},Rm=Rv(VS),vv=fA(Rm),US=H3(Rm),zS=()=>{const[n,e]=Wi.useState({studentName:"",email:"",course:"",campus:"",studentId:""}),[t,r]=Wi.useState(null),[i,o]=Wi.useState(!1),[s,l]=Wi.useState(!1),c=Wi.useRef(null),h=Wi.useRef(null),g=Wi.useRef(null),v=async()=>{try{o(!0);const P=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}}});g.current=P,h.current.srcObject=P,await h.current.play();const F=new U4,z=async()=>{if(i){try{const q=await F.decodeOnceFromVideoElement(h.current);if(q){e(Q=>({...Q,studentId:q.text})),m();return}}catch{}requestAnimationFrame(z)}};requestAnimationFrame(z)}catch(P){console.error("Scanner Error:",P),alert("Failed to start barcode scanner"),o(!1)}},m=()=>{g.current&&(g.current.getTracks().forEach(P=>P.stop()),g.current=null),o(!1)},_=P=>{const F=P.target.files[0];r(F)},A=async()=>{if(!t)return null;const P=n.email.replace(/[@.]/g,"_"),F=z3(US,`users/${P}/profile/${t.name}`),z=await V3(F,t);return await U3(z.ref)},I=async()=>{if(!("NDEFReader"in window)){alert("NFC not supported on this device");return}try{l(!0);const P=new NDEFReader;return await P.scan(),new Promise((F,z)=>{P.addEventListener("reading",async({serialNumber:q})=>{try{if(!await R(q)){z(new Error("Unauthorized NFC tag"));return}const D=await A(),T={...n,nfcSerialNumber:q,selfieUrl:D,createdAt:PA()},N=await RA(cA(vv,"RegisteredStudent"),T);await new NDEFWriter().write({records:[{recordType:"text",data:N.id}]}),F(N.id)}catch(Q){z(Q)}})})}catch(P){throw P}},R=async P=>{try{const F=Uy(vv,"Toregistered",P);return(await SA(F)).exists()}catch(F){return console.error("NFC Authorization Check Error:",F),!1}},L=async P=>{if(P.preventDefault(),!!window.confirm("Approach NFC tag to complete registration"))try{const F=await I();alert(`Registration successful! Document ID: ${F}`),e({studentName:"",email:"",course:"",campus:"",studentId:""}),r(null)}catch(F){console.error("Registration Error:",F),alert("Registration failed: "+F.message)}finally{l(!1)}};return ot.jsxs("div",{className:Ga.container,children:[ot.jsx("h1",{children:"Student Registration"}),ot.jsxs("form",{onSubmit:L,className:Ga.form,children:[ot.jsx("input",{type:"text",placeholder:"Student Name",value:n.studentName,onChange:P=>e({...n,studentName:P.target.value}),required:!0}),ot.jsx("input",{type:"email",placeholder:"Email",value:n.email,onChange:P=>e({...n,email:P.target.value}),required:!0}),ot.jsx("input",{type:"text",placeholder:"Course",value:n.course,onChange:P=>e({...n,course:P.target.value}),required:!0}),ot.jsxs("select",{value:n.campus,onChange:P=>e({...n,campus:P.target.value}),required:!0,children:[ot.jsx("option",{value:"",children:"Select Campus"}),ot.jsx("option",{value:"Main",children:"Main Campus"}),ot.jsx("option",{value:"North",children:"North Campus"}),ot.jsx("option",{value:"Online",children:"Online Campus"})]}),i?ot.jsxs("div",{className:Ga.scannerContainer,children:[ot.jsx("video",{ref:h,className:Ga.scanner}),ot.jsx("button",{type:"button",onClick:m,children:"Cancel Scan"})]}):ot.jsx("button",{type:"button",onClick:v,children:"Scan Student ID Barcode"}),n.studentId&&ot.jsxs("p",{children:["Student ID: ",n.studentId]}),t?ot.jsxs("p",{children:["Selfie Captured: ",t.name]}):ot.jsxs(ot.Fragment,{children:[ot.jsx("input",{type:"file",ref:c,onChange:_,accept:"image/*",capture:"user",style:{display:"none"}}),ot.jsx("button",{type:"button",onClick:()=>c.current.click(),className:Ga.selfieButton,children:"Take Selfie"})]}),ot.jsx("button",{type:"submit",className:Ga.submitButton,disabled:!n.studentId||!t||s,children:s?"Saving...":"Complete Registration with NFC"})]})]})};function HS(){return ot.jsx(ot.Fragment,{children:ot.jsx(zS,{})})}U2.createRoot(document.getElementById("root")).render(ot.jsx(Wi.StrictMode,{children:ot.jsx(HS,{})}));
