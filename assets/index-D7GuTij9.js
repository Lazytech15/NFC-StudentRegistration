(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var $c={exports:{}},Go={},qc={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _p;function k_(){if(_p)return Re;_p=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),N=Symbol.iterator;function M(x){return x===null||typeof x!="object"?null:(x=N&&x[N]||x["@@iterator"],typeof x=="function"?x:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,G={};function z(x,$,ae){this.props=x,this.context=$,this.refs=G,this.updater=ae||B}z.prototype.isReactComponent={},z.prototype.setState=function(x,$){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,$,"setState")},z.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function _e(){}_e.prototype=z.prototype;function ye(x,$,ae){this.props=x,this.context=$,this.refs=G,this.updater=ae||B}var de=ye.prototype=new _e;de.constructor=ye,Q(de,z.prototype),de.isPureReactComponent=!0;var fe=Array.isArray,oe=Object.prototype.hasOwnProperty,le={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function w(x,$,ae){var Ie,Se={},ke=null,Le=null;if($!=null)for(Ie in $.ref!==void 0&&(Le=$.ref),$.key!==void 0&&(ke=""+$.key),$)oe.call($,Ie)&&!P.hasOwnProperty(Ie)&&(Se[Ie]=$[Ie]);var Me=arguments.length-2;if(Me===1)Se.children=ae;else if(1<Me){for(var ze=Array(Me),yt=0;yt<Me;yt++)ze[yt]=arguments[yt+2];Se.children=ze}if(x&&x.defaultProps)for(Ie in Me=x.defaultProps,Me)Se[Ie]===void 0&&(Se[Ie]=Me[Ie]);return{$$typeof:i,type:x,key:ke,ref:Le,props:Se,_owner:le.current}}function R(x,$){return{$$typeof:i,type:x.type,key:$,ref:x.ref,props:x.props,_owner:x._owner}}function C(x){return typeof x=="object"&&x!==null&&x.$$typeof===i}function D(x){var $={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ae){return $[ae]})}var V=/\/+/g;function S(x,$){return typeof x=="object"&&x!==null&&x.key!=null?D(""+x.key):$.toString(36)}function Ge(x,$,ae,Ie,Se){var ke=typeof x;(ke==="undefined"||ke==="boolean")&&(x=null);var Le=!1;if(x===null)Le=!0;else switch(ke){case"string":case"number":Le=!0;break;case"object":switch(x.$$typeof){case i:case e:Le=!0}}if(Le)return Le=x,Se=Se(Le),x=Ie===""?"."+S(Le,0):Ie,fe(Se)?(ae="",x!=null&&(ae=x.replace(V,"$&/")+"/"),Ge(Se,$,ae,"",function(yt){return yt})):Se!=null&&(C(Se)&&(Se=R(Se,ae+(!Se.key||Le&&Le.key===Se.key?"":(""+Se.key).replace(V,"$&/")+"/")+x)),$.push(Se)),1;if(Le=0,Ie=Ie===""?".":Ie+":",fe(x))for(var Me=0;Me<x.length;Me++){ke=x[Me];var ze=Ie+S(ke,Me);Le+=Ge(ke,$,ae,ze,Se)}else if(ze=M(x),typeof ze=="function")for(x=ze.call(x),Me=0;!(ke=x.next()).done;)ke=ke.value,ze=Ie+S(ke,Me++),Le+=Ge(ke,$,ae,ze,Se);else if(ke==="object")throw $=String(x),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Le}function gt(x,$,ae){if(x==null)return x;var Ie=[],Se=0;return Ge(x,Ie,"","",function(ke){return $.call(ae,ke,Se++)}),Ie}function Dt(x){if(x._status===-1){var $=x._result;$=$(),$.then(function(ae){(x._status===0||x._status===-1)&&(x._status=1,x._result=ae)},function(ae){(x._status===0||x._status===-1)&&(x._status=2,x._result=ae)}),x._status===-1&&(x._status=0,x._result=$)}if(x._status===1)return x._result.default;throw x._result}var be={current:null},J={transition:null},ce={ReactCurrentDispatcher:be,ReactCurrentBatchConfig:J,ReactCurrentOwner:le};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:gt,forEach:function(x,$,ae){gt(x,function(){$.apply(this,arguments)},ae)},count:function(x){var $=0;return gt(x,function(){$++}),$},toArray:function(x){return gt(x,function($){return $})||[]},only:function(x){if(!C(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Re.Component=z,Re.Fragment=n,Re.Profiler=a,Re.PureComponent=ye,Re.StrictMode=s,Re.Suspense=y,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ce,Re.act=ee,Re.cloneElement=function(x,$,ae){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var Ie=Q({},x.props),Se=x.key,ke=x.ref,Le=x._owner;if($!=null){if($.ref!==void 0&&(ke=$.ref,Le=le.current),$.key!==void 0&&(Se=""+$.key),x.type&&x.type.defaultProps)var Me=x.type.defaultProps;for(ze in $)oe.call($,ze)&&!P.hasOwnProperty(ze)&&(Ie[ze]=$[ze]===void 0&&Me!==void 0?Me[ze]:$[ze])}var ze=arguments.length-2;if(ze===1)Ie.children=ae;else if(1<ze){Me=Array(ze);for(var yt=0;yt<ze;yt++)Me[yt]=arguments[yt+2];Ie.children=Me}return{$$typeof:i,type:x.type,key:Se,ref:ke,props:Ie,_owner:Le}},Re.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:c,_context:x},x.Consumer=x},Re.createElement=w,Re.createFactory=function(x){var $=w.bind(null,x);return $.type=x,$},Re.createRef=function(){return{current:null}},Re.forwardRef=function(x){return{$$typeof:m,render:x}},Re.isValidElement=C,Re.lazy=function(x){return{$$typeof:I,_payload:{_status:-1,_result:x},_init:Dt}},Re.memo=function(x,$){return{$$typeof:v,type:x,compare:$===void 0?null:$}},Re.startTransition=function(x){var $=J.transition;J.transition={};try{x()}finally{J.transition=$}},Re.unstable_act=ee,Re.useCallback=function(x,$){return be.current.useCallback(x,$)},Re.useContext=function(x){return be.current.useContext(x)},Re.useDebugValue=function(){},Re.useDeferredValue=function(x){return be.current.useDeferredValue(x)},Re.useEffect=function(x,$){return be.current.useEffect(x,$)},Re.useId=function(){return be.current.useId()},Re.useImperativeHandle=function(x,$,ae){return be.current.useImperativeHandle(x,$,ae)},Re.useInsertionEffect=function(x,$){return be.current.useInsertionEffect(x,$)},Re.useLayoutEffect=function(x,$){return be.current.useLayoutEffect(x,$)},Re.useMemo=function(x,$){return be.current.useMemo(x,$)},Re.useReducer=function(x,$,ae){return be.current.useReducer(x,$,ae)},Re.useRef=function(x){return be.current.useRef(x)},Re.useState=function(x){return be.current.useState(x)},Re.useSyncExternalStore=function(x,$,ae){return be.current.useSyncExternalStore(x,$,ae)},Re.useTransition=function(){return be.current.useTransition()},Re.version="18.3.1",Re}var vp;function Rh(){return vp||(vp=1,qc.exports=k_()),qc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function N_(){if(Ep)return Go;Ep=1;var i=Rh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,y,v){var I,N={},M=null,B=null;v!==void 0&&(M=""+v),y.key!==void 0&&(M=""+y.key),y.ref!==void 0&&(B=y.ref);for(I in y)s.call(y,I)&&!c.hasOwnProperty(I)&&(N[I]=y[I]);if(m&&m.defaultProps)for(I in y=m.defaultProps,y)N[I]===void 0&&(N[I]=y[I]);return{$$typeof:e,type:m,key:M,ref:B,props:N,_owner:a.current}}return Go.Fragment=n,Go.jsx=d,Go.jsxs=d,Go}var wp;function D_(){return wp||(wp=1,$c.exports=N_()),$c.exports}var ue=D_(),an=Rh(),xl={},Hc={exports:{}},Yt={},Wc={exports:{}},Kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function V_(){return Tp||(Tp=1,function(i){function e(J,ce){var ee=J.length;J.push(ce);e:for(;0<ee;){var x=ee-1>>>1,$=J[x];if(0<a($,ce))J[x]=ce,J[ee]=$,ee=x;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ce=J[0],ee=J.pop();if(ee!==ce){J[0]=ee;e:for(var x=0,$=J.length,ae=$>>>1;x<ae;){var Ie=2*(x+1)-1,Se=J[Ie],ke=Ie+1,Le=J[ke];if(0>a(Se,ee))ke<$&&0>a(Le,Se)?(J[x]=Le,J[ke]=ee,x=ke):(J[x]=Se,J[Ie]=ee,x=Ie);else if(ke<$&&0>a(Le,ee))J[x]=Le,J[ke]=ee,x=ke;else break e}}return ce}function a(J,ce){var ee=J.sortIndex-ce.sortIndex;return ee!==0?ee:J.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var y=[],v=[],I=1,N=null,M=3,B=!1,Q=!1,G=!1,z=typeof setTimeout=="function"?setTimeout:null,_e=typeof clearTimeout=="function"?clearTimeout:null,ye=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function de(J){for(var ce=n(v);ce!==null;){if(ce.callback===null)s(v);else if(ce.startTime<=J)s(v),ce.sortIndex=ce.expirationTime,e(y,ce);else break;ce=n(v)}}function fe(J){if(G=!1,de(J),!Q)if(n(y)!==null)Q=!0,Dt(oe);else{var ce=n(v);ce!==null&&be(fe,ce.startTime-J)}}function oe(J,ce){Q=!1,G&&(G=!1,_e(w),w=-1),B=!0;var ee=M;try{for(de(ce),N=n(y);N!==null&&(!(N.expirationTime>ce)||J&&!D());){var x=N.callback;if(typeof x=="function"){N.callback=null,M=N.priorityLevel;var $=x(N.expirationTime<=ce);ce=i.unstable_now(),typeof $=="function"?N.callback=$:N===n(y)&&s(y),de(ce)}else s(y);N=n(y)}if(N!==null)var ae=!0;else{var Ie=n(v);Ie!==null&&be(fe,Ie.startTime-ce),ae=!1}return ae}finally{N=null,M=ee,B=!1}}var le=!1,P=null,w=-1,R=5,C=-1;function D(){return!(i.unstable_now()-C<R)}function V(){if(P!==null){var J=i.unstable_now();C=J;var ce=!0;try{ce=P(!0,J)}finally{ce?S():(le=!1,P=null)}}else le=!1}var S;if(typeof ye=="function")S=function(){ye(V)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,gt=Ge.port2;Ge.port1.onmessage=V,S=function(){gt.postMessage(null)}}else S=function(){z(V,0)};function Dt(J){P=J,le||(le=!0,S())}function be(J,ce){w=z(function(){J(i.unstable_now())},ce)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){Q||B||(Q=!0,Dt(oe))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return M},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(J){switch(M){case 1:case 2:case 3:var ce=3;break;default:ce=M}var ee=M;M=ce;try{return J()}finally{M=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ce){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=M;M=J;try{return ce()}finally{M=ee}},i.unstable_scheduleCallback=function(J,ce,ee){var x=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?x+ee:x):ee=x,J){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,J={id:I++,callback:ce,priorityLevel:J,startTime:ee,expirationTime:$,sortIndex:-1},ee>x?(J.sortIndex=ee,e(v,J),n(y)===null&&J===n(v)&&(G?(_e(w),w=-1):G=!0,be(fe,ee-x))):(J.sortIndex=$,e(y,J),Q||B||(Q=!0,Dt(oe))),J},i.unstable_shouldYield=D,i.unstable_wrapCallback=function(J){var ce=M;return function(){var ee=M;M=ce;try{return J.apply(this,arguments)}finally{M=ee}}}}(Kc)),Kc}var Ip;function x_(){return Ip||(Ip=1,Wc.exports=V_()),Wc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp;function O_(){if(Sp)return Yt;Sp=1;var i=Rh(),e=x_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,v=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},N={};function M(t){return y.call(N,t)?!0:y.call(I,t)?!1:v.test(t)?N[t]=!0:(I[t]=!0,!1)}function B(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Q(t,r,o,u){if(r===null||typeof r>"u"||B(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function G(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){z[t]=new G(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];z[r]=new G(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){z[t]=new G(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){z[t]=new G(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){z[t]=new G(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){z[t]=new G(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){z[t]=new G(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){z[t]=new G(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){z[t]=new G(t,5,!1,t.toLowerCase(),null,!1,!1)});var _e=/[\-:]([a-z])/g;function ye(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(_e,ye);z[r]=new G(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(_e,ye);z[r]=new G(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(_e,ye);z[r]=new G(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){z[t]=new G(t,1,!1,t.toLowerCase(),null,!1,!1)}),z.xlinkHref=new G("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){z[t]=new G(t,1,!1,t.toLowerCase(),null,!0,!0)});function de(t,r,o,u){var h=z.hasOwnProperty(r)?z[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(Q(r,o,h,u)&&(o=null),u||h===null?M(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var fe=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),le=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),R=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),D=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),be=Symbol.for("react.offscreen"),J=Symbol.iterator;function ce(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,x;function $(t){if(x===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);x=r&&r[1]||""}return`
`+x+t}var ae=!1;function Ie(t,r){if(!t||ae)return"";ae=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,T=p.length-1;1<=_&&0<=T&&h[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(h[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||h[_]!==p[T]){var A=`
`+h[_].replace(" at new "," at ");return t.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",t.displayName)),A}while(1<=_&&0<=T);break}}}finally{ae=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?$(t):""}function Se(t){switch(t.tag){case 5:return $(t.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return t=Ie(t.type,!1),t;case 11:return t=Ie(t.type.render,!1),t;case 1:return t=Ie(t.type,!0),t;default:return""}}function ke(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case le:return"Portal";case R:return"Profiler";case w:return"StrictMode";case S:return"Suspense";case Ge:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case D:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case V:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gt:return r=t.displayName||null,r!==null?r:ke(t.type)||"Memo";case Dt:r=t._payload,t=t._init;try{return ke(t(r))}catch{}}return null}function Le(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ke(r);case 8:return r===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Me(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ze(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(t){var r=ze(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function er(t){t._valueTracker||(t._valueTracker=yt(t))}function Hi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=ze(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function oi(t,r){var o=r.checked;return ee({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Wi(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Me(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function eo(t,r){r=r.checked,r!=null&&de(t,"checked",r,!1)}function to(t,r){eo(t,r);var o=Me(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Ki(t,r.type,o):r.hasOwnProperty("defaultValue")&&Ki(t,r.type,Me(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function _a(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Ki(t,r,o){(r!=="number"||Ir(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var tr=Array.isArray;function nr(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Me(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function no(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(tr(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Me(o)}}function Gi(t,r){var o=Me(r.value),u=Me(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function ro(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?lt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var rr,io=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(rr=rr||document.createElement("div"),rr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=rr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Sr(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var ai={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},li=["Webkit","ms","Moz","O"];Object.keys(ai).forEach(function(t){li.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),ai[r]=ai[t]})});function so(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||ai.hasOwnProperty(t)&&ai[t]?(""+r).trim():r+"px"}function oo(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=so(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var ao=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function lo(t,r){if(r){if(ao[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function uo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function Xi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yi=null,un=null,Un=null;function Ji(t){if(t=Oo(t)){if(typeof Yi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Qa(r),Yi(t.stateNode,t.type,r))}}function bn(t){un?Un?Un.push(t):Un=[t]:un=t}function co(){if(un){var t=un,r=Un;if(Un=un=null,Ji(t),r)for(t=0;t<r.length;t++)Ji(r[t])}}function ci(t,r){return t(r)}function ho(){}var ir=!1;function fo(t,r,o){if(ir)return t(r,o);ir=!0;try{return ci(t,r,o)}finally{ir=!1,(un!==null||Un!==null)&&(ho(),co())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var u=Qa(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Zi=!1;if(m)try{var Tn={};Object.defineProperty(Tn,"passive",{get:function(){Zi=!0}}),window.addEventListener("test",Tn,Tn),window.removeEventListener("test",Tn,Tn)}catch{Zi=!1}function hi(t,r,o,u,h,p,_,T,A){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(H){this.onError(H)}}var di=!1,es=null,In=!1,po=null,yu={onError:function(t){di=!0,es=t}};function ts(t,r,o,u,h,p,_,T,A){di=!1,es=null,hi.apply(yu,arguments)}function va(t,r,o,u,h,p,_,T,A){if(ts.apply(this,arguments),di){if(di){var U=es;di=!1,es=null}else throw Error(n(198));In||(In=!0,po=U)}}function Sn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function fi(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function Rn(t){if(Sn(t)!==t)throw Error(n(188))}function Ea(t){var r=t.alternate;if(!r){if(r=Sn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return Rn(h),t;if(p===u)return Rn(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,T=h.child;T;){if(T===o){_=!0,o=h,u=p;break}if(T===u){_=!0,u=h,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=h;break}if(T===u){_=!0,u=p,o=h;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function mo(t){return t=Ea(t),t!==null?ns(t):null}function ns(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=ns(t);if(r!==null)return r;t=t.sibling}return null}var rs=e.unstable_scheduleCallback,go=e.unstable_cancelCallback,wa=e.unstable_shouldYield,_u=e.unstable_requestPaint,je=e.unstable_now,Ta=e.unstable_getCurrentPriorityLevel,pi=e.unstable_ImmediatePriority,Rr=e.unstable_UserBlockingPriority,cn=e.unstable_NormalPriority,yo=e.unstable_LowPriority,Ia=e.unstable_IdlePriority,mi=null,Zt=null;function Sa(t){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(mi,t,void 0,(t.current.flags&128)===128)}catch{}}var bt=Math.clz32?Math.clz32:Aa,_o=Math.log,Ra=Math.LN2;function Aa(t){return t>>>=0,t===0?32:31-(_o(t)/Ra|0)|0}var is=64,ss=4194304;function Ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var T=_&~h;T!==0?u=Ar(T):(p&=_,p!==0&&(u=Ar(p)))}else _=o&~h,_!==0?u=Ar(_):p!==0&&(u=Ar(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&h)&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if(u&4&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-bt(r),h=1<<o,u|=t[o],r&=~h;return u}function vu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-bt(p),T=1<<_,A=h[_];A===-1?(!(T&o)||T&u)&&(h[_]=vu(T,r)):A<=r&&(t.expiredLanes|=T),p&=~T}}function en(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yi(){var t=is;return is<<=1,!(is&4194240)&&(is=64),t}function Cr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Pr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-bt(r),t[r]=o}function Be(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-bt(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function kr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-bt(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Ce=0;function Nr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ca,os,Pa,ka,Na,vo=!1,Bn=[],It=null,An=null,Cn=null,Dr=new Map,hn=new Map,zn=[],Eu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Da(t,r){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":An=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":Dr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":hn.delete(r.pointerId)}}function qt(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=Oo(r),r!==null&&os(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function wu(t,r,o,u,h){switch(r){case"focusin":return It=qt(It,t,r,o,u,h),!0;case"dragenter":return An=qt(An,t,r,o,u,h),!0;case"mouseover":return Cn=qt(Cn,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Dr.set(p,qt(Dr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,hn.set(p,qt(hn.get(p)||null,t,r,o,u,h)),!0}return!1}function Va(t){var r=Ti(t.target);if(r!==null){var o=Sn(r);if(o!==null){if(r=o.tag,r===13){if(r=fi(o),r!==null){t.blockedOn=r,Na(t.priority,function(){Pa(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function or(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=as(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);ui=u,o.target.dispatchEvent(u),ui=null}else return r=Oo(o),r!==null&&os(r),t.blockedOn=o,!1;r.shift()}return!0}function _i(t,r,o){or(t)&&o.delete(r)}function xa(){vo=!1,It!==null&&or(It)&&(It=null),An!==null&&or(An)&&(An=null),Cn!==null&&or(Cn)&&(Cn=null),Dr.forEach(_i),hn.forEach(_i)}function Pn(t,r){t.blockedOn===r&&(t.blockedOn=null,vo||(vo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,xa)))}function kn(t){function r(h){return Pn(h,t)}if(0<Bn.length){Pn(Bn[0],t);for(var o=1;o<Bn.length;o++){var u=Bn[o];u.blockedOn===t&&(u.blockedOn=null)}}for(It!==null&&Pn(It,t),An!==null&&Pn(An,t),Cn!==null&&Pn(Cn,t),Dr.forEach(r),hn.forEach(r),o=0;o<zn.length;o++)u=zn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<zn.length&&(o=zn[0],o.blockedOn===null);)Va(o),o.blockedOn===null&&zn.shift()}var ar=fe.ReactCurrentBatchConfig,Vr=!0;function We(t,r,o,u){var h=Ce,p=ar.transition;ar.transition=null;try{Ce=1,Eo(t,r,o,u)}finally{Ce=h,ar.transition=p}}function Tu(t,r,o,u){var h=Ce,p=ar.transition;ar.transition=null;try{Ce=4,Eo(t,r,o,u)}finally{Ce=h,ar.transition=p}}function Eo(t,r,o,u){if(Vr){var h=as(t,r,o,u);if(h===null)xu(t,r,u,vi,o),Da(t,u);else if(wu(h,t,r,o,u))u.stopPropagation();else if(Da(t,u),r&4&&-1<Eu.indexOf(t)){for(;h!==null;){var p=Oo(h);if(p!==null&&Ca(p),p=as(t,r,o,u),p===null&&xu(t,r,u,vi,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else xu(t,r,u,null,o)}}var vi=null;function as(t,r,o,u){if(vi=null,t=Xi(u),t=Ti(t),t!==null)if(r=Sn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=fi(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return vi=t,null}function wo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ta()){case pi:return 1;case Rr:return 4;case cn:case yo:return 16;case Ia:return 536870912;default:return 16}default:return 16}}var tn=null,ls=null,Ht=null;function To(){if(Ht)return Ht;var t,r=ls,o=r.length,u,h="value"in tn?tn.value:tn.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return Ht=h.slice(t,1<u?1-u:void 0)}function us(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function jn(){return!0}function Io(){return!1}function St(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?jn:Io,this.isPropagationStopped=Io,this}return ee(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=jn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=jn)},persist:function(){},isPersistent:jn}),r}var Nn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=St(Nn),$n=ee({},Nn,{view:0,detail:0}),Iu=St($n),hs,lr,xr,Ei=ee({},$n,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xr&&(xr&&t.type==="mousemove"?(hs=t.screenX-xr.screenX,lr=t.screenY-xr.screenY):lr=hs=0,xr=t),hs)},movementY:function(t){return"movementY"in t?t.movementY:lr}}),ds=St(Ei),So=ee({},Ei,{dataTransfer:0}),Oa=St(So),fs=ee({},$n,{relatedTarget:0}),ps=St(fs),La=ee({},Nn,{animationName:0,elapsedTime:0,pseudoElement:0}),ur=St(La),Ma=ee({},Nn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fa=St(Ma),Ua=ee({},Nn,{data:0}),Ro=St(Ua),ms={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ba={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ba(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=ba[t])?!!r[t]:!1}function qn(){return Ba}var l=ee({},$n,{key:function(t){if(t.key){var r=ms[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=us(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Bt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qn,charCode:function(t){return t.type==="keypress"?us(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?us(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=St(l),g=ee({},Ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),E=St(g),O=ee({},$n,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qn}),b=St(O),Y=ee({},Nn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ue=St(Y),ct=ee({},Ei,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Ne=St(ct),_t=[9,13,27,32],st=m&&"CompositionEvent"in window,dn=null;m&&"documentMode"in document&&(dn=document.documentMode);var nn=m&&"TextEvent"in window&&!dn,wi=m&&(!st||dn&&8<dn&&11>=dn),gs=" ",hd=!1;function dd(t,r){switch(t){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function fd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ys=!1;function Ay(t,r){switch(t){case"compositionend":return fd(r);case"keypress":return r.which!==32?null:(hd=!0,gs);case"textInput":return t=r.data,t===gs&&hd?null:t;default:return null}}function Cy(t,r){if(ys)return t==="compositionend"||!st&&dd(t,r)?(t=To(),Ht=ls=tn=null,ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return wi&&r.locale!=="ko"?null:r.data;default:return null}}var Py={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Py[t.type]:r==="textarea"}function md(t,r,o,u){bn(u),r=Ha(r,"onChange"),0<r.length&&(o=new cs("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Ao=null,Co=null;function ky(t){xd(t,0)}function za(t){var r=Ts(t);if(Hi(r))return t}function Ny(t,r){if(t==="change")return r}var gd=!1;if(m){var Su;if(m){var Ru="oninput"in document;if(!Ru){var yd=document.createElement("div");yd.setAttribute("oninput","return;"),Ru=typeof yd.oninput=="function"}Su=Ru}else Su=!1;gd=Su&&(!document.documentMode||9<document.documentMode)}function _d(){Ao&&(Ao.detachEvent("onpropertychange",vd),Co=Ao=null)}function vd(t){if(t.propertyName==="value"&&za(Co)){var r=[];md(r,Co,t,Xi(t)),fo(ky,r)}}function Dy(t,r,o){t==="focusin"?(_d(),Ao=r,Co=o,Ao.attachEvent("onpropertychange",vd)):t==="focusout"&&_d()}function Vy(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return za(Co)}function xy(t,r){if(t==="click")return za(r)}function Oy(t,r){if(t==="input"||t==="change")return za(r)}function Ly(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var Dn=typeof Object.is=="function"?Object.is:Ly;function Po(t,r){if(Dn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!Dn(t[h],r[h]))return!1}return!0}function Ed(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wd(t,r){var o=Ed(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Ed(o)}}function Td(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Td(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Id(){for(var t=window,r=Ir();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Ir(t.document)}return r}function Au(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function My(t){var r=Id(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&Td(o.ownerDocument.documentElement,o)){if(u!==null&&Au(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=wd(o,p);var _=wd(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Fy=m&&"documentMode"in document&&11>=document.documentMode,_s=null,Cu=null,ko=null,Pu=!1;function Sd(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Pu||_s==null||_s!==Ir(u)||(u=_s,"selectionStart"in u&&Au(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ko&&Po(ko,u)||(ko=u,u=Ha(Cu,"onSelect"),0<u.length&&(r=new cs("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=_s)))}function ja(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var vs={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},ku={},Rd={};m&&(Rd=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function $a(t){if(ku[t])return ku[t];if(!vs[t])return t;var r=vs[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Rd)return ku[t]=r[o];return t}var Ad=$a("animationend"),Cd=$a("animationiteration"),Pd=$a("animationstart"),kd=$a("transitionend"),Nd=new Map,Dd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Or(t,r){Nd.set(t,r),c(r,[t])}for(var Nu=0;Nu<Dd.length;Nu++){var Du=Dd[Nu],Uy=Du.toLowerCase(),by=Du[0].toUpperCase()+Du.slice(1);Or(Uy,"on"+by)}Or(Ad,"onAnimationEnd"),Or(Cd,"onAnimationIteration"),Or(Pd,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(kd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),By=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function Vd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,va(u,r,void 0,t),t.currentTarget=null}function xd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],A=T.instance,U=T.currentTarget;if(T=T.listener,A!==p&&h.isPropagationStopped())break e;Vd(h,T,U),p=A}else for(_=0;_<u.length;_++){if(T=u[_],A=T.instance,U=T.currentTarget,T=T.listener,A!==p&&h.isPropagationStopped())break e;Vd(h,T,U),p=A}}}if(In)throw t=po,In=!1,po=null,t}function qe(t,r){var o=r[bu];o===void 0&&(o=r[bu]=new Set);var u=t+"__bubble";o.has(u)||(Od(r,t,2,!1),o.add(u))}function Vu(t,r,o){var u=0;r&&(u|=4),Od(o,t,u,r)}var qa="_reactListening"+Math.random().toString(36).slice(2);function Do(t){if(!t[qa]){t[qa]=!0,s.forEach(function(o){o!=="selectionchange"&&(By.has(o)||Vu(o,!1,t),Vu(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[qa]||(r[qa]=!0,Vu("selectionchange",!1,r))}}function Od(t,r,o,u){switch(wo(r)){case 1:var h=We;break;case 4:h=Tu;break;default:h=Eo}o=h.bind(null,r,o,t),h=void 0,!Zi||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function xu(t,r,o,u,h){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var A=_.tag;if((A===3||A===4)&&(A=_.stateNode.containerInfo,A===h||A.nodeType===8&&A.parentNode===h))return;_=_.return}for(;T!==null;){if(_=Ti(T),_===null)return;if(A=_.tag,A===5||A===6){u=p=_;continue e}T=T.parentNode}}u=u.return}fo(function(){var U=p,H=Xi(o),W=[];e:{var q=Nd.get(t);if(q!==void 0){var Z=cs,re=t;switch(t){case"keypress":if(us(o)===0)break e;case"keydown":case"keyup":Z=f;break;case"focusin":re="focus",Z=ps;break;case"focusout":re="blur",Z=ps;break;case"beforeblur":case"afterblur":Z=ps;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=ds;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Oa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=b;break;case Ad:case Cd:case Pd:Z=ur;break;case kd:Z=Ue;break;case"scroll":Z=Iu;break;case"wheel":Z=Ne;break;case"copy":case"cut":case"paste":Z=Fa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=E}var ie=(r&4)!==0,rt=!ie&&t==="scroll",L=ie?q!==null?q+"Capture":null:q;ie=[];for(var k=U,F;k!==null;){F=k;var X=F.stateNode;if(F.tag===5&&X!==null&&(F=X,L!==null&&(X=nt(k,L),X!=null&&ie.push(Vo(k,X,F)))),rt)break;k=k.return}0<ie.length&&(q=new Z(q,re,null,o,H),W.push({event:q,listeners:ie}))}}if(!(r&7)){e:{if(q=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",q&&o!==ui&&(re=o.relatedTarget||o.fromElement)&&(Ti(re)||re[cr]))break e;if((Z||q)&&(q=H.window===H?H:(q=H.ownerDocument)?q.defaultView||q.parentWindow:window,Z?(re=o.relatedTarget||o.toElement,Z=U,re=re?Ti(re):null,re!==null&&(rt=Sn(re),re!==rt||re.tag!==5&&re.tag!==6)&&(re=null)):(Z=null,re=U),Z!==re)){if(ie=ds,X="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ie=E,X="onPointerLeave",L="onPointerEnter",k="pointer"),rt=Z==null?q:Ts(Z),F=re==null?q:Ts(re),q=new ie(X,k+"leave",Z,o,H),q.target=rt,q.relatedTarget=F,X=null,Ti(H)===U&&(ie=new ie(L,k+"enter",re,o,H),ie.target=F,ie.relatedTarget=rt,X=ie),rt=X,Z&&re)t:{for(ie=Z,L=re,k=0,F=ie;F;F=Es(F))k++;for(F=0,X=L;X;X=Es(X))F++;for(;0<k-F;)ie=Es(ie),k--;for(;0<F-k;)L=Es(L),F--;for(;k--;){if(ie===L||L!==null&&ie===L.alternate)break t;ie=Es(ie),L=Es(L)}ie=null}else ie=null;Z!==null&&Ld(W,q,Z,ie,!1),re!==null&&rt!==null&&Ld(W,rt,re,ie,!0)}}e:{if(q=U?Ts(U):window,Z=q.nodeName&&q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&q.type==="file")var se=Ny;else if(pd(q))if(gd)se=Oy;else{se=Vy;var pe=Dy}else(Z=q.nodeName)&&Z.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(se=xy);if(se&&(se=se(t,U))){md(W,se,o,H);break e}pe&&pe(t,q,U),t==="focusout"&&(pe=q._wrapperState)&&pe.controlled&&q.type==="number"&&Ki(q,"number",q.value)}switch(pe=U?Ts(U):window,t){case"focusin":(pd(pe)||pe.contentEditable==="true")&&(_s=pe,Cu=U,ko=null);break;case"focusout":ko=Cu=_s=null;break;case"mousedown":Pu=!0;break;case"contextmenu":case"mouseup":case"dragend":Pu=!1,Sd(W,o,H);break;case"selectionchange":if(Fy)break;case"keydown":case"keyup":Sd(W,o,H)}var me;if(st)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else ys?dd(t,o)&&(ve="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(ve="onCompositionStart");ve&&(wi&&o.locale!=="ko"&&(ys||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&ys&&(me=To()):(tn=H,ls="value"in tn?tn.value:tn.textContent,ys=!0)),pe=Ha(U,ve),0<pe.length&&(ve=new Ro(ve,t,null,o,H),W.push({event:ve,listeners:pe}),me?ve.data=me:(me=fd(o),me!==null&&(ve.data=me)))),(me=nn?Ay(t,o):Cy(t,o))&&(U=Ha(U,"onBeforeInput"),0<U.length&&(H=new Ro("onBeforeInput","beforeinput",null,o,H),W.push({event:H,listeners:U}),H.data=me))}xd(W,r)})}function Vo(t,r,o){return{instance:t,listener:r,currentTarget:o}}function Ha(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=nt(t,o),p!=null&&u.unshift(Vo(t,p,h)),p=nt(t,r),p!=null&&u.push(Vo(t,p,h))),t=t.return}return u}function Es(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ld(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,A=T.alternate,U=T.stateNode;if(A!==null&&A===u)break;T.tag===5&&U!==null&&(T=U,h?(A=nt(o,p),A!=null&&_.unshift(Vo(o,A,T))):h||(A=nt(o,p),A!=null&&_.push(Vo(o,A,T)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var zy=/\r\n?/g,jy=/\u0000|\uFFFD/g;function Md(t){return(typeof t=="string"?t:""+t).replace(zy,`
`).replace(jy,"")}function Wa(t,r,o){if(r=Md(r),Md(t)!==r&&o)throw Error(n(425))}function Ka(){}var Ou=null,Lu=null;function Mu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Fu=typeof setTimeout=="function"?setTimeout:void 0,$y=typeof clearTimeout=="function"?clearTimeout:void 0,Fd=typeof Promise=="function"?Promise:void 0,qy=typeof queueMicrotask=="function"?queueMicrotask:typeof Fd<"u"?function(t){return Fd.resolve(null).then(t).catch(Hy)}:Fu;function Hy(t){setTimeout(function(){throw t})}function Uu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),kn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);kn(r)}function Lr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Ud(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var ws=Math.random().toString(36).slice(2),Hn="__reactFiber$"+ws,xo="__reactProps$"+ws,cr="__reactContainer$"+ws,bu="__reactEvents$"+ws,Wy="__reactListeners$"+ws,Ky="__reactHandles$"+ws;function Ti(t){var r=t[Hn];if(r)return r;for(var o=t.parentNode;o;){if(r=o[cr]||o[Hn]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Ud(t);t!==null;){if(o=t[Hn])return o;t=Ud(t)}return r}t=o,o=t.parentNode}return null}function Oo(t){return t=t[Hn]||t[cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ts(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Qa(t){return t[xo]||null}var Bu=[],Is=-1;function Mr(t){return{current:t}}function He(t){0>Is||(t.current=Bu[Is],Bu[Is]=null,Is--)}function $e(t,r){Is++,Bu[Is]=t.current,t.current=r}var Fr={},Vt=Mr(Fr),Wt=Mr(!1),Ii=Fr;function Ss(t,r){var o=t.type.contextTypes;if(!o)return Fr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Kt(t){return t=t.childContextTypes,t!=null}function Ga(){He(Wt),He(Vt)}function bd(t,r,o){if(Vt.current!==Fr)throw Error(n(168));$e(Vt,r),$e(Wt,o)}function Bd(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Le(t)||"Unknown",h));return ee({},o,u)}function Xa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fr,Ii=Vt.current,$e(Vt,t),$e(Wt,Wt.current),!0}function zd(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Bd(t,r,Ii),u.__reactInternalMemoizedMergedChildContext=t,He(Wt),He(Vt),$e(Vt,t)):He(Wt),$e(Wt,o)}var hr=null,Ya=!1,zu=!1;function jd(t){hr===null?hr=[t]:hr.push(t)}function Qy(t){Ya=!0,jd(t)}function Ur(){if(!zu&&hr!==null){zu=!0;var t=0,r=Ce;try{var o=hr;for(Ce=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}hr=null,Ya=!1}catch(h){throw hr!==null&&(hr=hr.slice(t+1)),rs(pi,Ur),h}finally{Ce=r,zu=!1}}return null}var Rs=[],As=0,Ja=null,Za=0,fn=[],pn=0,Si=null,dr=1,fr="";function Ri(t,r){Rs[As++]=Za,Rs[As++]=Ja,Ja=t,Za=r}function $d(t,r,o){fn[pn++]=dr,fn[pn++]=fr,fn[pn++]=Si,Si=t;var u=dr;t=fr;var h=32-bt(u)-1;u&=~(1<<h),o+=1;var p=32-bt(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,dr=1<<32-bt(r)+h|o<<h|u,fr=p+t}else dr=1<<p|o<<h|u,fr=t}function ju(t){t.return!==null&&(Ri(t,1),$d(t,1,0))}function $u(t){for(;t===Ja;)Ja=Rs[--As],Rs[As]=null,Za=Rs[--As],Rs[As]=null;for(;t===Si;)Si=fn[--pn],fn[pn]=null,fr=fn[--pn],fn[pn]=null,dr=fn[--pn],fn[pn]=null}var rn=null,sn=null,Ke=!1,Vn=null;function qd(t,r){var o=_n(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function Hd(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,rn=t,sn=Lr(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,rn=t,sn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Si!==null?{id:dr,overflow:fr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=_n(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,rn=t,sn=null,!0):!1;default:return!1}}function qu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Hu(t){if(Ke){var r=sn;if(r){var o=r;if(!Hd(t,r)){if(qu(t))throw Error(n(418));r=Lr(o.nextSibling);var u=rn;r&&Hd(t,r)?qd(u,o):(t.flags=t.flags&-4097|2,Ke=!1,rn=t)}}else{if(qu(t))throw Error(n(418));t.flags=t.flags&-4097|2,Ke=!1,rn=t}}}function Wd(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rn=t}function el(t){if(t!==rn)return!1;if(!Ke)return Wd(t),Ke=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Mu(t.type,t.memoizedProps)),r&&(r=sn)){if(qu(t))throw Kd(),Error(n(418));for(;r;)qd(t,r),r=Lr(r.nextSibling)}if(Wd(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){sn=Lr(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}sn=null}}else sn=rn?Lr(t.stateNode.nextSibling):null;return!0}function Kd(){for(var t=sn;t;)t=Lr(t.nextSibling)}function Cs(){sn=rn=null,Ke=!1}function Wu(t){Vn===null?Vn=[t]:Vn.push(t)}var Gy=fe.ReactCurrentBatchConfig;function Lo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=h.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function tl(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Qd(t){var r=t._init;return r(t._payload)}function Gd(t){function r(L,k){if(t){var F=L.deletions;F===null?(L.deletions=[k],L.flags|=16):F.push(k)}}function o(L,k){if(!t)return null;for(;k!==null;)r(L,k),k=k.sibling;return null}function u(L,k){for(L=new Map;k!==null;)k.key!==null?L.set(k.key,k):L.set(k.index,k),k=k.sibling;return L}function h(L,k){return L=Wr(L,k),L.index=0,L.sibling=null,L}function p(L,k,F){return L.index=F,t?(F=L.alternate,F!==null?(F=F.index,F<k?(L.flags|=2,k):F):(L.flags|=2,k)):(L.flags|=1048576,k)}function _(L){return t&&L.alternate===null&&(L.flags|=2),L}function T(L,k,F,X){return k===null||k.tag!==6?(k=Fc(F,L.mode,X),k.return=L,k):(k=h(k,F),k.return=L,k)}function A(L,k,F,X){var se=F.type;return se===P?H(L,k,F.props.children,X,F.key):k!==null&&(k.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Dt&&Qd(se)===k.type)?(X=h(k,F.props),X.ref=Lo(L,k,F),X.return=L,X):(X=Rl(F.type,F.key,F.props,null,L.mode,X),X.ref=Lo(L,k,F),X.return=L,X)}function U(L,k,F,X){return k===null||k.tag!==4||k.stateNode.containerInfo!==F.containerInfo||k.stateNode.implementation!==F.implementation?(k=Uc(F,L.mode,X),k.return=L,k):(k=h(k,F.children||[]),k.return=L,k)}function H(L,k,F,X,se){return k===null||k.tag!==7?(k=xi(F,L.mode,X,se),k.return=L,k):(k=h(k,F),k.return=L,k)}function W(L,k,F){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Fc(""+k,L.mode,F),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case oe:return F=Rl(k.type,k.key,k.props,null,L.mode,F),F.ref=Lo(L,null,k),F.return=L,F;case le:return k=Uc(k,L.mode,F),k.return=L,k;case Dt:var X=k._init;return W(L,X(k._payload),F)}if(tr(k)||ce(k))return k=xi(k,L.mode,F,null),k.return=L,k;tl(L,k)}return null}function q(L,k,F,X){var se=k!==null?k.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return se!==null?null:T(L,k,""+F,X);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case oe:return F.key===se?A(L,k,F,X):null;case le:return F.key===se?U(L,k,F,X):null;case Dt:return se=F._init,q(L,k,se(F._payload),X)}if(tr(F)||ce(F))return se!==null?null:H(L,k,F,X,null);tl(L,F)}return null}function Z(L,k,F,X,se){if(typeof X=="string"&&X!==""||typeof X=="number")return L=L.get(F)||null,T(k,L,""+X,se);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case oe:return L=L.get(X.key===null?F:X.key)||null,A(k,L,X,se);case le:return L=L.get(X.key===null?F:X.key)||null,U(k,L,X,se);case Dt:var pe=X._init;return Z(L,k,F,pe(X._payload),se)}if(tr(X)||ce(X))return L=L.get(F)||null,H(k,L,X,se,null);tl(k,X)}return null}function re(L,k,F,X){for(var se=null,pe=null,me=k,ve=k=0,wt=null;me!==null&&ve<F.length;ve++){me.index>ve?(wt=me,me=null):wt=me.sibling;var Oe=q(L,me,F[ve],X);if(Oe===null){me===null&&(me=wt);break}t&&me&&Oe.alternate===null&&r(L,me),k=p(Oe,k,ve),pe===null?se=Oe:pe.sibling=Oe,pe=Oe,me=wt}if(ve===F.length)return o(L,me),Ke&&Ri(L,ve),se;if(me===null){for(;ve<F.length;ve++)me=W(L,F[ve],X),me!==null&&(k=p(me,k,ve),pe===null?se=me:pe.sibling=me,pe=me);return Ke&&Ri(L,ve),se}for(me=u(L,me);ve<F.length;ve++)wt=Z(me,L,ve,F[ve],X),wt!==null&&(t&&wt.alternate!==null&&me.delete(wt.key===null?ve:wt.key),k=p(wt,k,ve),pe===null?se=wt:pe.sibling=wt,pe=wt);return t&&me.forEach(function(Kr){return r(L,Kr)}),Ke&&Ri(L,ve),se}function ie(L,k,F,X){var se=ce(F);if(typeof se!="function")throw Error(n(150));if(F=se.call(F),F==null)throw Error(n(151));for(var pe=se=null,me=k,ve=k=0,wt=null,Oe=F.next();me!==null&&!Oe.done;ve++,Oe=F.next()){me.index>ve?(wt=me,me=null):wt=me.sibling;var Kr=q(L,me,Oe.value,X);if(Kr===null){me===null&&(me=wt);break}t&&me&&Kr.alternate===null&&r(L,me),k=p(Kr,k,ve),pe===null?se=Kr:pe.sibling=Kr,pe=Kr,me=wt}if(Oe.done)return o(L,me),Ke&&Ri(L,ve),se;if(me===null){for(;!Oe.done;ve++,Oe=F.next())Oe=W(L,Oe.value,X),Oe!==null&&(k=p(Oe,k,ve),pe===null?se=Oe:pe.sibling=Oe,pe=Oe);return Ke&&Ri(L,ve),se}for(me=u(L,me);!Oe.done;ve++,Oe=F.next())Oe=Z(me,L,ve,Oe.value,X),Oe!==null&&(t&&Oe.alternate!==null&&me.delete(Oe.key===null?ve:Oe.key),k=p(Oe,k,ve),pe===null?se=Oe:pe.sibling=Oe,pe=Oe);return t&&me.forEach(function(P_){return r(L,P_)}),Ke&&Ri(L,ve),se}function rt(L,k,F,X){if(typeof F=="object"&&F!==null&&F.type===P&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case oe:e:{for(var se=F.key,pe=k;pe!==null;){if(pe.key===se){if(se=F.type,se===P){if(pe.tag===7){o(L,pe.sibling),k=h(pe,F.props.children),k.return=L,L=k;break e}}else if(pe.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Dt&&Qd(se)===pe.type){o(L,pe.sibling),k=h(pe,F.props),k.ref=Lo(L,pe,F),k.return=L,L=k;break e}o(L,pe);break}else r(L,pe);pe=pe.sibling}F.type===P?(k=xi(F.props.children,L.mode,X,F.key),k.return=L,L=k):(X=Rl(F.type,F.key,F.props,null,L.mode,X),X.ref=Lo(L,k,F),X.return=L,L=X)}return _(L);case le:e:{for(pe=F.key;k!==null;){if(k.key===pe)if(k.tag===4&&k.stateNode.containerInfo===F.containerInfo&&k.stateNode.implementation===F.implementation){o(L,k.sibling),k=h(k,F.children||[]),k.return=L,L=k;break e}else{o(L,k);break}else r(L,k);k=k.sibling}k=Uc(F,L.mode,X),k.return=L,L=k}return _(L);case Dt:return pe=F._init,rt(L,k,pe(F._payload),X)}if(tr(F))return re(L,k,F,X);if(ce(F))return ie(L,k,F,X);tl(L,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,k!==null&&k.tag===6?(o(L,k.sibling),k=h(k,F),k.return=L,L=k):(o(L,k),k=Fc(F,L.mode,X),k.return=L,L=k),_(L)):o(L,k)}return rt}var Ps=Gd(!0),Xd=Gd(!1),nl=Mr(null),rl=null,ks=null,Ku=null;function Qu(){Ku=ks=rl=null}function Gu(t){var r=nl.current;He(nl),t._currentValue=r}function Xu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function Ns(t,r){rl=t,Ku=ks=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Qt=!0),t.firstContext=null)}function mn(t){var r=t._currentValue;if(Ku!==t)if(t={context:t,memoizedValue:r,next:null},ks===null){if(rl===null)throw Error(n(308));ks=t,rl.dependencies={lanes:0,firstContext:t}}else ks=ks.next=t;return r}var Ai=null;function Yu(t){Ai===null?Ai=[t]:Ai.push(t)}function Yd(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,Yu(r)):(o.next=h.next,h.next=o),r.interleaved=o,pr(t,u)}function pr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var br=!1;function Ju(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function mr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function Br(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,xe&2){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,pr(t,o)}return h=u.interleaved,h===null?(r.next=r,Yu(u)):(r.next=h.next,h.next=r),u.interleaved=r,pr(t,o)}function il(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,kr(t,o)}}function Zd(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function sl(t,r,o,u){var h=t.updateQueue;br=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var A=T,U=A.next;A.next=null,_===null?p=U:_.next=U,_=A;var H=t.alternate;H!==null&&(H=H.updateQueue,T=H.lastBaseUpdate,T!==_&&(T===null?H.firstBaseUpdate=U:T.next=U,H.lastBaseUpdate=A))}if(p!==null){var W=h.baseState;_=0,H=U=A=null,T=p;do{var q=T.lane,Z=T.eventTime;if((u&q)===q){H!==null&&(H=H.next={eventTime:Z,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var re=t,ie=T;switch(q=r,Z=o,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){W=re.call(Z,W,q);break e}W=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,q=typeof re=="function"?re.call(Z,W,q):re,q==null)break e;W=ee({},W,q);break e;case 2:br=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,q=h.effects,q===null?h.effects=[T]:q.push(T))}else Z={eventTime:Z,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},H===null?(U=H=Z,A=W):H=H.next=Z,_|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(H===null&&(A=W),h.baseState=A,h.firstBaseUpdate=U,h.lastBaseUpdate=H,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);ki|=_,t.lanes=_,t.memoizedState=W}}function ef(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Mo={},Wn=Mr(Mo),Fo=Mr(Mo),Uo=Mr(Mo);function Ci(t){if(t===Mo)throw Error(n(174));return t}function Zu(t,r){switch($e(Uo,r),$e(Fo,t),$e(Wn,Mo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ut(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ut(r,t)}He(Wn),$e(Wn,r)}function Ds(){He(Wn),He(Fo),He(Uo)}function tf(t){Ci(Uo.current);var r=Ci(Wn.current),o=ut(r,t.type);r!==o&&($e(Fo,t),$e(Wn,o))}function ec(t){Fo.current===t&&(He(Wn),He(Fo))}var Xe=Mr(0);function ol(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var tc=[];function nc(){for(var t=0;t<tc.length;t++)tc[t]._workInProgressVersionPrimary=null;tc.length=0}var al=fe.ReactCurrentDispatcher,rc=fe.ReactCurrentBatchConfig,Pi=0,Ye=null,ht=null,vt=null,ll=!1,bo=!1,Bo=0,Xy=0;function xt(){throw Error(n(321))}function ic(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!Dn(t[o],r[o]))return!1;return!0}function sc(t,r,o,u,h,p){if(Pi=p,Ye=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,al.current=t===null||t.memoizedState===null?e_:t_,t=o(u,h),bo){p=0;do{if(bo=!1,Bo=0,25<=p)throw Error(n(301));p+=1,vt=ht=null,r.updateQueue=null,al.current=n_,t=o(u,h)}while(bo)}if(al.current=hl,r=ht!==null&&ht.next!==null,Pi=0,vt=ht=Ye=null,ll=!1,r)throw Error(n(300));return t}function oc(){var t=Bo!==0;return Bo=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ye.memoizedState=vt=t:vt=vt.next=t,vt}function gn(){if(ht===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var r=vt===null?Ye.memoizedState:vt.next;if(r!==null)vt=r,ht=t;else{if(t===null)throw Error(n(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},vt===null?Ye.memoizedState=vt=t:vt=vt.next=t}return vt}function zo(t,r){return typeof r=="function"?r(t):r}function ac(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ht,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=_=null,A=null,U=p;do{var H=U.lane;if((Pi&H)===H)A!==null&&(A=A.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var W={lane:H,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};A===null?(T=A=W,_=u):A=A.next=W,Ye.lanes|=H,ki|=H}U=U.next}while(U!==null&&U!==p);A===null?_=u:A.next=T,Dn(u,r.memoizedState)||(Qt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=A,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Ye.lanes|=p,ki|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function lc(t){var r=gn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);Dn(p,r.memoizedState)||(Qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function nf(){}function rf(t,r){var o=Ye,u=gn(),h=r(),p=!Dn(u.memoizedState,h);if(p&&(u.memoizedState=h,Qt=!0),u=u.queue,uc(af.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||vt!==null&&vt.memoizedState.tag&1){if(o.flags|=2048,jo(9,of.bind(null,o,u,h,r),void 0,null),Et===null)throw Error(n(349));Pi&30||sf(o,r,h)}return h}function sf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ye.updateQueue,r===null?(r={lastEffect:null,stores:null},Ye.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function of(t,r,o,u){r.value=o,r.getSnapshot=u,lf(r)&&uf(t)}function af(t,r,o){return o(function(){lf(r)&&uf(t)})}function lf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!Dn(t,o)}catch{return!0}}function uf(t){var r=pr(t,1);r!==null&&Mn(r,t,1,-1)}function cf(t){var r=Kn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},r.queue=t,t=t.dispatch=Zy.bind(null,Ye,t),[r.memoizedState,t]}function jo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Ye.updateQueue,r===null?(r={lastEffect:null,stores:null},Ye.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function hf(){return gn().memoizedState}function ul(t,r,o,u){var h=Kn();Ye.flags|=t,h.memoizedState=jo(1|r,o,void 0,u===void 0?null:u)}function cl(t,r,o,u){var h=gn();u=u===void 0?null:u;var p=void 0;if(ht!==null){var _=ht.memoizedState;if(p=_.destroy,u!==null&&ic(u,_.deps)){h.memoizedState=jo(r,o,p,u);return}}Ye.flags|=t,h.memoizedState=jo(1|r,o,p,u)}function df(t,r){return ul(8390656,8,t,r)}function uc(t,r){return cl(2048,8,t,r)}function ff(t,r){return cl(4,2,t,r)}function pf(t,r){return cl(4,4,t,r)}function mf(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function gf(t,r,o){return o=o!=null?o.concat([t]):null,cl(4,4,mf.bind(null,r,t),o)}function cc(){}function yf(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&ic(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function _f(t,r){var o=gn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&ic(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function vf(t,r,o){return Pi&21?(Dn(o,r)||(o=yi(),Ye.lanes|=o,ki|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=o)}function Yy(t,r){var o=Ce;Ce=o!==0&&4>o?o:4,t(!0);var u=rc.transition;rc.transition={};try{t(!1),r()}finally{Ce=o,rc.transition=u}}function Ef(){return gn().memoizedState}function Jy(t,r,o){var u=qr(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},wf(t))Tf(r,o);else if(o=Yd(t,r,o,u),o!==null){var h=jt();Mn(o,t,u,h),If(o,r,u)}}function Zy(t,r,o){var u=qr(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(wf(t))Tf(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(h.hasEagerState=!0,h.eagerState=T,Dn(T,_)){var A=r.interleaved;A===null?(h.next=h,Yu(r)):(h.next=A.next,A.next=h),r.interleaved=h;return}}catch{}finally{}o=Yd(t,r,h,u),o!==null&&(h=jt(),Mn(o,t,u,h),If(o,r,u))}}function wf(t){var r=t.alternate;return t===Ye||r!==null&&r===Ye}function Tf(t,r){bo=ll=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function If(t,r,o){if(o&4194240){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,kr(t,o)}}var hl={readContext:mn,useCallback:xt,useContext:xt,useEffect:xt,useImperativeHandle:xt,useInsertionEffect:xt,useLayoutEffect:xt,useMemo:xt,useReducer:xt,useRef:xt,useState:xt,useDebugValue:xt,useDeferredValue:xt,useTransition:xt,useMutableSource:xt,useSyncExternalStore:xt,useId:xt,unstable_isNewReconciler:!1},e_={readContext:mn,useCallback:function(t,r){return Kn().memoizedState=[t,r===void 0?null:r],t},useContext:mn,useEffect:df,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,ul(4194308,4,mf.bind(null,r,t),o)},useLayoutEffect:function(t,r){return ul(4194308,4,t,r)},useInsertionEffect:function(t,r){return ul(4,2,t,r)},useMemo:function(t,r){var o=Kn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Kn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Jy.bind(null,Ye,t),[u.memoizedState,t]},useRef:function(t){var r=Kn();return t={current:t},r.memoizedState=t},useState:cf,useDebugValue:cc,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=cf(!1),r=t[0];return t=Yy.bind(null,t[1]),Kn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Ye,h=Kn();if(Ke){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Et===null)throw Error(n(349));Pi&30||sf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,df(af.bind(null,u,p,t),[t]),u.flags|=2048,jo(9,of.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Kn(),r=Et.identifierPrefix;if(Ke){var o=fr,u=dr;o=(u&~(1<<32-bt(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=Bo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Xy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},t_={readContext:mn,useCallback:yf,useContext:mn,useEffect:uc,useImperativeHandle:gf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:_f,useReducer:ac,useRef:hf,useState:function(){return ac(zo)},useDebugValue:cc,useDeferredValue:function(t){var r=gn();return vf(r,ht.memoizedState,t)},useTransition:function(){var t=ac(zo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:nf,useSyncExternalStore:rf,useId:Ef,unstable_isNewReconciler:!1},n_={readContext:mn,useCallback:yf,useContext:mn,useEffect:uc,useImperativeHandle:gf,useInsertionEffect:ff,useLayoutEffect:pf,useMemo:_f,useReducer:lc,useRef:hf,useState:function(){return lc(zo)},useDebugValue:cc,useDeferredValue:function(t){var r=gn();return ht===null?r.memoizedState=t:vf(r,ht.memoizedState,t)},useTransition:function(){var t=lc(zo)[0],r=gn().memoizedState;return[t,r]},useMutableSource:nf,useSyncExternalStore:rf,useId:Ef,unstable_isNewReconciler:!1};function xn(t,r){if(t&&t.defaultProps){r=ee({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function hc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ee({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var dl={isMounted:function(t){return(t=t._reactInternals)?Sn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=jt(),h=qr(t),p=mr(u,h);p.payload=r,o!=null&&(p.callback=o),r=Br(t,p,h),r!==null&&(Mn(r,t,h,u),il(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=jt(),h=qr(t),p=mr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=Br(t,p,h),r!==null&&(Mn(r,t,h,u),il(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=jt(),u=qr(t),h=mr(o,u);h.tag=2,r!=null&&(h.callback=r),r=Br(t,h,u),r!==null&&(Mn(r,t,u,o),il(r,t,u))}};function Sf(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!Po(o,u)||!Po(h,p):!0}function Rf(t,r,o){var u=!1,h=Fr,p=r.contextType;return typeof p=="object"&&p!==null?p=mn(p):(h=Kt(r)?Ii:Vt.current,u=r.contextTypes,p=(u=u!=null)?Ss(t,h):Fr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=dl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function Af(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&dl.enqueueReplaceState(r,r.state,null)}function dc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Ju(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=mn(p):(p=Kt(r)?Ii:Vt.current,h.context=Ss(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(hc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&dl.enqueueReplaceState(h,h.state,null),sl(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Vs(t,r){try{var o="",u=r;do o+=Se(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function fc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function pc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var r_=typeof WeakMap=="function"?WeakMap:Map;function Cf(t,r,o){o=mr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){vl||(vl=!0,kc=u),pc(t,r)},o}function Pf(t,r,o){o=mr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){pc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){pc(t,r),typeof u!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function kf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new r_;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=y_.bind(null,t,r,o),r.then(t,t))}function Nf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Df(t,r,o,u,h){return t.mode&1?(t.flags|=65536,t.lanes=h,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=mr(-1,1),r.tag=2,Br(o,r,1))),o.lanes|=1),t)}var i_=fe.ReactCurrentOwner,Qt=!1;function zt(t,r,o,u){r.child=t===null?Xd(r,null,o,u):Ps(r,t.child,o,u)}function Vf(t,r,o,u,h){o=o.render;var p=r.ref;return Ns(r,h),u=sc(t,r,o,u,p,h),o=oc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,gr(t,r,h)):(Ke&&o&&ju(r),r.flags|=1,zt(t,r,u,h),r.child)}function xf(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Mc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Of(t,r,p,u,h)):(t=Rl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&h)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Po,o(_,u)&&t.ref===r.ref)return gr(t,r,h)}return r.flags|=1,t=Wr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Of(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Po(p,u)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)t.flags&131072&&(Qt=!0);else return r.lanes=t.lanes,gr(t,r,h)}return mc(t,r,o,u,h)}function Lf(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Os,on),on|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,$e(Os,on),on|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,$e(Os,on),on|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,$e(Os,on),on|=u;return zt(t,r,h,o),r.child}function Mf(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function mc(t,r,o,u,h){var p=Kt(o)?Ii:Vt.current;return p=Ss(r,p),Ns(r,h),o=sc(t,r,o,u,p,h),u=oc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,gr(t,r,h)):(Ke&&u&&ju(r),r.flags|=1,zt(t,r,o,h),r.child)}function Ff(t,r,o,u,h){if(Kt(o)){var p=!0;Xa(r)}else p=!1;if(Ns(r,h),r.stateNode===null)pl(t,r),Rf(r,o,u),dc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var A=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=mn(U):(U=Kt(o)?Ii:Vt.current,U=Ss(r,U));var H=o.getDerivedStateFromProps,W=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function";W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||A!==U)&&Af(r,_,u,U),br=!1;var q=r.memoizedState;_.state=q,sl(r,u,_,h),A=r.memoizedState,T!==u||q!==A||Wt.current||br?(typeof H=="function"&&(hc(r,o,H,u),A=r.memoizedState),(T=br||Sf(r,o,T,u,q,A,U))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=A),_.props=u,_.state=A,_.context=U,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Jd(t,r),T=r.memoizedProps,U=r.type===r.elementType?T:xn(r.type,T),_.props=U,W=r.pendingProps,q=_.context,A=o.contextType,typeof A=="object"&&A!==null?A=mn(A):(A=Kt(o)?Ii:Vt.current,A=Ss(r,A));var Z=o.getDerivedStateFromProps;(H=typeof Z=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==W||q!==A)&&Af(r,_,u,A),br=!1,q=r.memoizedState,_.state=q,sl(r,u,_,h);var re=r.memoizedState;T!==W||q!==re||Wt.current||br?(typeof Z=="function"&&(hc(r,o,Z,u),re=r.memoizedState),(U=br||Sf(r,o,U,u,q,re,A)||!1)?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,re,A),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,re,A)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=re),_.props=u,_.state=re,_.context=A,u=U):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return gc(t,r,o,u,p,h)}function gc(t,r,o,u,h,p){Mf(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&zd(r,o,!1),gr(t,r,p);u=r.stateNode,i_.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Ps(r,t.child,null,p),r.child=Ps(r,null,T,p)):zt(t,r,T,p),r.memoizedState=u.state,h&&zd(r,o,!0),r.child}function Uf(t){var r=t.stateNode;r.pendingContext?bd(t,r.pendingContext,r.pendingContext!==r.context):r.context&&bd(t,r.context,!1),Zu(t,r.containerInfo)}function bf(t,r,o,u,h){return Cs(),Wu(h),r.flags|=256,zt(t,r,o,u),r.child}var yc={dehydrated:null,treeContext:null,retryLane:0};function _c(t){return{baseLanes:t,cachePool:null,transitions:null}}function Bf(t,r,o){var u=r.pendingProps,h=Xe.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),$e(Xe,h&1),t===null)return Hu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Al(_,u,0,null),t=xi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=_c(o),r.memoizedState=yc,t):vc(r,_));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return s_(t,r,_,u,T,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,T=h.sibling;var A={mode:"hidden",children:u.children};return!(_&1)&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=A,r.deletions=null):(u=Wr(h,A),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Wr(T,p):(p=xi(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?_c(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=yc,u}return p=t.child,t=p.sibling,u=Wr(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function vc(t,r){return r=Al({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function fl(t,r,o,u){return u!==null&&Wu(u),Ps(r,t.child,null,o),t=vc(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function s_(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=fc(Error(n(422))),fl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Al({mode:"visible",children:u.children},h,0,null),p=xi(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&Ps(r,t.child,null,_),r.child.memoizedState=_c(_),r.memoizedState=yc,p);if(!(r.mode&1))return fl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=fc(p,u,void 0),fl(t,r,_,u)}if(T=(_&t.childLanes)!==0,Qt||T){if(u=Et,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|_)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,pr(t,h),Mn(u,t,h,-1))}return Lc(),u=fc(Error(n(421))),fl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=__.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,sn=Lr(h.nextSibling),rn=r,Ke=!0,Vn=null,t!==null&&(fn[pn++]=dr,fn[pn++]=fr,fn[pn++]=Si,dr=t.id,fr=t.overflow,Si=r),r=vc(r,u.children),r.flags|=4096,r)}function zf(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Xu(t.return,r,o)}function Ec(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function jf(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(zt(t,r,u.children,o),u=Xe.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zf(t,o,r);else if(t.tag===19)zf(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if($e(Xe,u),!(r.mode&1))r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&ol(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),Ec(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&ol(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}Ec(r,!0,o,null,p);break;case"together":Ec(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function pl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function gr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),ki|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Wr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Wr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function o_(t,r,o){switch(r.tag){case 3:Uf(r),Cs();break;case 5:tf(r);break;case 1:Kt(r.type)&&Xa(r);break;case 4:Zu(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;$e(nl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?($e(Xe,Xe.current&1),r.flags|=128,null):o&r.child.childLanes?Bf(t,r,o):($e(Xe,Xe.current&1),t=gr(t,r,o),t!==null?t.sibling:null);$e(Xe,Xe.current&1);break;case 19:if(u=(o&r.childLanes)!==0,t.flags&128){if(u)return jf(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$e(Xe,Xe.current),u)break;return null;case 22:case 23:return r.lanes=0,Lf(t,r,o)}return gr(t,r,o)}var $f,wc,qf,Hf;$f=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},wc=function(){},qf=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Ci(Wn.current);var p=null;switch(o){case"input":h=oi(t,h),u=oi(t,u),p=[];break;case"select":h=ee({},h,{value:void 0}),u=ee({},u,{value:void 0}),p=[];break;case"textarea":h=no(t,h),u=no(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Ka)}lo(o,u);var _;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var T=h[U];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var A=u[U];if(T=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&A!==T&&(A!=null||T!=null))if(U==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||A&&A.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in A)A.hasOwnProperty(_)&&T[_]!==A[_]&&(o||(o={}),o[_]=A[_])}else o||(p||(p=[]),p.push(U,o)),o=A;else U==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,T=T?T.__html:void 0,A!=null&&T!==A&&(p=p||[]).push(U,A)):U==="children"?typeof A!="string"&&typeof A!="number"||(p=p||[]).push(U,""+A):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(A!=null&&U==="onScroll"&&qe("scroll",t),p||T===A||(p=[])):(p=p||[]).push(U,A))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},Hf=function(t,r,o,u){o!==u&&(r.flags|=4)};function $o(t,r){if(!Ke)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function Ot(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function a_(t,r,o){var u=r.pendingProps;switch($u(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(r),null;case 1:return Kt(r.type)&&Ga(),Ot(r),null;case 3:return u=r.stateNode,Ds(),He(Wt),He(Vt),nc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(el(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Vn!==null&&(Vc(Vn),Vn=null))),wc(t,r),Ot(r),null;case 5:ec(r);var h=Ci(Uo.current);if(o=r.type,t!==null&&r.stateNode!=null)qf(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return Ot(r),null}if(t=Ci(Wn.current),el(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[Hn]=r,u[xo]=p,t=(r.mode&1)!==0,o){case"dialog":qe("cancel",u),qe("close",u);break;case"iframe":case"object":case"embed":qe("load",u);break;case"video":case"audio":for(h=0;h<No.length;h++)qe(No[h],u);break;case"source":qe("error",u);break;case"img":case"image":case"link":qe("error",u),qe("load",u);break;case"details":qe("toggle",u);break;case"input":Wi(u,p),qe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},qe("invalid",u);break;case"textarea":Qi(u,p),qe("invalid",u)}lo(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Wa(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Wa(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&qe("scroll",u)}switch(o){case"input":er(u),_a(u,p,!0);break;case"textarea":er(u),ro(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Ka)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[Hn]=r,t[xo]=u,$f(t,r,!1,!1),r.stateNode=t;e:{switch(_=uo(o,u),o){case"dialog":qe("cancel",t),qe("close",t),h=u;break;case"iframe":case"object":case"embed":qe("load",t),h=u;break;case"video":case"audio":for(h=0;h<No.length;h++)qe(No[h],t);h=u;break;case"source":qe("error",t),h=u;break;case"img":case"image":case"link":qe("error",t),qe("load",t),h=u;break;case"details":qe("toggle",t),h=u;break;case"input":Wi(t,u),h=oi(t,u),qe("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ee({},u,{value:void 0}),qe("invalid",t);break;case"textarea":Qi(t,u),h=no(t,u),qe("invalid",t);break;default:h=u}lo(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var A=T[p];p==="style"?oo(t,A):p==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&io(t,A)):p==="children"?typeof A=="string"?(o!=="textarea"||A!=="")&&Sr(t,A):typeof A=="number"&&Sr(t,""+A):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?A!=null&&p==="onScroll"&&qe("scroll",t):A!=null&&de(t,p,A,_))}switch(o){case"input":er(t),_a(t,u,!1);break;case"textarea":er(t),ro(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Me(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?nr(t,!!u.multiple,p,!1):u.defaultValue!=null&&nr(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Ka)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ot(r),null;case 6:if(t&&r.stateNode!=null)Hf(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ci(Uo.current),Ci(Wn.current),el(r)){if(u=r.stateNode,o=r.memoizedProps,u[Hn]=r,(p=u.nodeValue!==o)&&(t=rn,t!==null))switch(t.tag){case 3:Wa(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wa(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[Hn]=r,r.stateNode=u}return Ot(r),null;case 13:if(He(Xe),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ke&&sn!==null&&r.mode&1&&!(r.flags&128))Kd(),Cs(),r.flags|=98560,p=!1;else if(p=el(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[Hn]=r}else Cs(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;Ot(r),p=!1}else Vn!==null&&(Vc(Vn),Vn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Xe.current&1?dt===0&&(dt=3):Lc())),r.updateQueue!==null&&(r.flags|=4),Ot(r),null);case 4:return Ds(),wc(t,r),t===null&&Do(r.stateNode.containerInfo),Ot(r),null;case 10:return Gu(r.type._context),Ot(r),null;case 17:return Kt(r.type)&&Ga(),Ot(r),null;case 19:if(He(Xe),p=r.memoizedState,p===null)return Ot(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)$o(p,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(_=ol(t),_!==null){for(r.flags|=128,$o(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return $e(Xe,Xe.current&1|2),r.child}t=t.sibling}p.tail!==null&&je()>Ls&&(r.flags|=128,u=!0,$o(p,!1),r.lanes=4194304)}else{if(!u)if(t=ol(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),$o(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Ke)return Ot(r),null}else 2*je()-p.renderingStartTime>Ls&&o!==1073741824&&(r.flags|=128,u=!0,$o(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=je(),r.sibling=null,o=Xe.current,$e(Xe,u?o&1|2:o&1),r):(Ot(r),null);case 22:case 23:return Oc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?on&1073741824&&(Ot(r),r.subtreeFlags&6&&(r.flags|=8192)):Ot(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function l_(t,r){switch($u(r),r.tag){case 1:return Kt(r.type)&&Ga(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ds(),He(Wt),He(Vt),nc(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return ec(r),null;case 13:if(He(Xe),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Cs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return He(Xe),null;case 4:return Ds(),null;case 10:return Gu(r.type._context),null;case 22:case 23:return Oc(),null;case 24:return null;default:return null}}var ml=!1,Lt=!1,u_=typeof WeakSet=="function"?WeakSet:Set,ne=null;function xs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Ze(t,r,u)}else o.current=null}function Tc(t,r,o){try{o()}catch(u){Ze(t,r,u)}}var Wf=!1;function c_(t,r){if(Ou=Vr,t=Id(),Au(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,T=-1,A=-1,U=0,H=0,W=t,q=null;t:for(;;){for(var Z;W!==o||h!==0&&W.nodeType!==3||(T=_+h),W!==p||u!==0&&W.nodeType!==3||(A=_+u),W.nodeType===3&&(_+=W.nodeValue.length),(Z=W.firstChild)!==null;)q=W,W=Z;for(;;){if(W===t)break t;if(q===o&&++U===h&&(T=_),q===p&&++H===u&&(A=_),(Z=W.nextSibling)!==null)break;W=q,q=W.parentNode}W=Z}o=T===-1||A===-1?null:{start:T,end:A}}else o=null}o=o||{start:0,end:0}}else o=null;for(Lu={focusedElem:t,selectionRange:o},Vr=!1,ne=r;ne!==null;)if(r=ne,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ne=t;else for(;ne!==null;){r=ne;try{var re=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,rt=re.memoizedState,L=r.stateNode,k=L.getSnapshotBeforeUpdate(r.elementType===r.type?ie:xn(r.type,ie),rt);L.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var F=r.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(X){Ze(r,r.return,X)}if(t=r.sibling,t!==null){t.return=r.return,ne=t;break}ne=r.return}return re=Wf,Wf=!1,re}function qo(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&Tc(r,o,p)}h=h.next}while(h!==u)}}function gl(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Ic(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function Kf(t){var r=t.alternate;r!==null&&(t.alternate=null,Kf(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[Hn],delete r[xo],delete r[bu],delete r[Wy],delete r[Ky])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qf(t){return t.tag===5||t.tag===3||t.tag===4}function Gf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Ka));else if(u!==4&&(t=t.child,t!==null))for(Sc(t,r,o),t=t.sibling;t!==null;)Sc(t,r,o),t=t.sibling}function Rc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Rc(t,r,o),t=t.sibling;t!==null;)Rc(t,r,o),t=t.sibling}var Rt=null,On=!1;function zr(t,r,o){for(o=o.child;o!==null;)Xf(t,r,o),o=o.sibling}function Xf(t,r,o){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(mi,o)}catch{}switch(o.tag){case 5:Lt||xs(o,r);case 6:var u=Rt,h=On;Rt=null,zr(t,r,o),Rt=u,On=h,Rt!==null&&(On?(t=Rt,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):Rt.removeChild(o.stateNode));break;case 18:Rt!==null&&(On?(t=Rt,o=o.stateNode,t.nodeType===8?Uu(t.parentNode,o):t.nodeType===1&&Uu(t,o),kn(t)):Uu(Rt,o.stateNode));break;case 4:u=Rt,h=On,Rt=o.stateNode.containerInfo,On=!0,zr(t,r,o),Rt=u,On=h;break;case 0:case 11:case 14:case 15:if(!Lt&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&Tc(o,r,_),h=h.next}while(h!==u)}zr(t,r,o);break;case 1:if(!Lt&&(xs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){Ze(o,r,T)}zr(t,r,o);break;case 21:zr(t,r,o);break;case 22:o.mode&1?(Lt=(u=Lt)||o.memoizedState!==null,zr(t,r,o),Lt=u):zr(t,r,o);break;default:zr(t,r,o)}}function Yf(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new u_),r.forEach(function(u){var h=v_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function Ln(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:Rt=T.stateNode,On=!1;break e;case 3:Rt=T.stateNode.containerInfo,On=!0;break e;case 4:Rt=T.stateNode.containerInfo,On=!0;break e}T=T.return}if(Rt===null)throw Error(n(160));Xf(p,_,h),Rt=null,On=!1;var A=h.alternate;A!==null&&(A.return=null),h.return=null}catch(U){Ze(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Jf(r,t),r=r.sibling}function Jf(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(r,t),Qn(t),u&4){try{qo(3,t,t.return),gl(3,t)}catch(ie){Ze(t,t.return,ie)}try{qo(5,t,t.return)}catch(ie){Ze(t,t.return,ie)}}break;case 1:Ln(r,t),Qn(t),u&512&&o!==null&&xs(o,o.return);break;case 5:if(Ln(r,t),Qn(t),u&512&&o!==null&&xs(o,o.return),t.flags&32){var h=t.stateNode;try{Sr(h,"")}catch(ie){Ze(t,t.return,ie)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,T=t.type,A=t.updateQueue;if(t.updateQueue=null,A!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&eo(h,p),uo(T,_);var U=uo(T,p);for(_=0;_<A.length;_+=2){var H=A[_],W=A[_+1];H==="style"?oo(h,W):H==="dangerouslySetInnerHTML"?io(h,W):H==="children"?Sr(h,W):de(h,H,W,U)}switch(T){case"input":to(h,p);break;case"textarea":Gi(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?nr(h,!!p.multiple,Z,!1):q!==!!p.multiple&&(p.defaultValue!=null?nr(h,!!p.multiple,p.defaultValue,!0):nr(h,!!p.multiple,p.multiple?[]:"",!1))}h[xo]=p}catch(ie){Ze(t,t.return,ie)}}break;case 6:if(Ln(r,t),Qn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ie){Ze(t,t.return,ie)}}break;case 3:if(Ln(r,t),Qn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{kn(r.containerInfo)}catch(ie){Ze(t,t.return,ie)}break;case 4:Ln(r,t),Qn(t);break;case 13:Ln(r,t),Qn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Pc=je())),u&4&&Yf(t);break;case 22:if(H=o!==null&&o.memoizedState!==null,t.mode&1?(Lt=(U=Lt)||H,Ln(r,t),Lt=U):Ln(r,t),Qn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!H&&t.mode&1)for(ne=t,H=t.child;H!==null;){for(W=ne=H;ne!==null;){switch(q=ne,Z=q.child,q.tag){case 0:case 11:case 14:case 15:qo(4,q,q.return);break;case 1:xs(q,q.return);var re=q.stateNode;if(typeof re.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,re.props=r.memoizedProps,re.state=r.memoizedState,re.componentWillUnmount()}catch(ie){Ze(u,o,ie)}}break;case 5:xs(q,q.return);break;case 22:if(q.memoizedState!==null){tp(W);continue}}Z!==null?(Z.return=q,ne=Z):tp(W)}H=H.sibling}e:for(H=null,W=t;;){if(W.tag===5){if(H===null){H=W;try{h=W.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=W.stateNode,A=W.memoizedProps.style,_=A!=null&&A.hasOwnProperty("display")?A.display:null,T.style.display=so("display",_))}catch(ie){Ze(t,t.return,ie)}}}else if(W.tag===6){if(H===null)try{W.stateNode.nodeValue=U?"":W.memoizedProps}catch(ie){Ze(t,t.return,ie)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===t)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===t)break e;for(;W.sibling===null;){if(W.return===null||W.return===t)break e;H===W&&(H=null),W=W.return}H===W&&(H=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:Ln(r,t),Qn(t),u&4&&Yf(t);break;case 21:break;default:Ln(r,t),Qn(t)}}function Qn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Qf(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Sr(h,""),u.flags&=-33);var p=Gf(t);Rc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,T=Gf(t);Sc(t,T,_);break;default:throw Error(n(161))}}catch(A){Ze(t,t.return,A)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function h_(t,r,o){ne=t,Zf(t)}function Zf(t,r,o){for(var u=(t.mode&1)!==0;ne!==null;){var h=ne,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||ml;if(!_){var T=h.alternate,A=T!==null&&T.memoizedState!==null||Lt;T=ml;var U=Lt;if(ml=_,(Lt=A)&&!U)for(ne=h;ne!==null;)_=ne,A=_.child,_.tag===22&&_.memoizedState!==null?np(h):A!==null?(A.return=_,ne=A):np(h);for(;p!==null;)ne=p,Zf(p),p=p.sibling;ne=h,ml=T,Lt=U}ep(t)}else h.subtreeFlags&8772&&p!==null?(p.return=h,ne=p):ep(t)}}function ep(t){for(;ne!==null;){var r=ne;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Lt||gl(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Lt)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:xn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&ef(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}ef(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var A=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&o.focus();break;case"img":A.src&&(o.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var H=U.memoizedState;if(H!==null){var W=H.dehydrated;W!==null&&kn(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Lt||r.flags&512&&Ic(r)}catch(q){Ze(r,r.return,q)}}if(r===t){ne=null;break}if(o=r.sibling,o!==null){o.return=r.return,ne=o;break}ne=r.return}}function tp(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ne=o;break}ne=r.return}}function np(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{gl(4,r)}catch(A){Ze(r,o,A)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(A){Ze(r,h,A)}}var p=r.return;try{Ic(r)}catch(A){Ze(r,p,A)}break;case 5:var _=r.return;try{Ic(r)}catch(A){Ze(r,_,A)}}}catch(A){Ze(r,r.return,A)}if(r===t){ne=null;break}var T=r.sibling;if(T!==null){T.return=r.return,ne=T;break}ne=r.return}}var d_=Math.ceil,yl=fe.ReactCurrentDispatcher,Ac=fe.ReactCurrentOwner,yn=fe.ReactCurrentBatchConfig,xe=0,Et=null,ot=null,At=0,on=0,Os=Mr(0),dt=0,Ho=null,ki=0,_l=0,Cc=0,Wo=null,Gt=null,Pc=0,Ls=1/0,yr=null,vl=!1,kc=null,jr=null,El=!1,$r=null,wl=0,Ko=0,Nc=null,Tl=-1,Il=0;function jt(){return xe&6?je():Tl!==-1?Tl:Tl=je()}function qr(t){return t.mode&1?xe&2&&At!==0?At&-At:Gy.transition!==null?(Il===0&&(Il=yi()),Il):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:wo(t.type)),t):1}function Mn(t,r,o,u){if(50<Ko)throw Ko=0,Nc=null,Error(n(185));Pr(t,o,u),(!(xe&2)||t!==Et)&&(t===Et&&(!(xe&2)&&(_l|=o),dt===4&&Hr(t,At)),Xt(t,u),o===1&&xe===0&&!(r.mode&1)&&(Ls=je()+500,Ya&&Ur()))}function Xt(t,r){var o=t.callbackNode;sr(t,r);var u=gi(t,t===Et?At:0);if(u===0)o!==null&&go(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&go(o),r===1)t.tag===0?Qy(ip.bind(null,t)):jd(ip.bind(null,t)),qy(function(){!(xe&6)&&Ur()}),o=null;else{switch(Nr(u)){case 1:o=pi;break;case 4:o=Rr;break;case 16:o=cn;break;case 536870912:o=Ia;break;default:o=cn}o=dp(o,rp.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function rp(t,r){if(Tl=-1,Il=0,xe&6)throw Error(n(327));var o=t.callbackNode;if(Ms()&&t.callbackNode!==o)return null;var u=gi(t,t===Et?At:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=Sl(t,u);else{r=u;var h=xe;xe|=2;var p=op();(Et!==t||At!==r)&&(yr=null,Ls=je()+500,Di(t,r));do try{m_();break}catch(T){sp(t,T)}while(!0);Qu(),yl.current=p,xe=h,ot!==null?r=0:(Et=null,At=0,r=dt)}if(r!==0){if(r===2&&(h=en(t),h!==0&&(u=h,r=Dc(t,h))),r===1)throw o=Ho,Di(t,0),Hr(t,u),Xt(t,je()),o;if(r===6)Hr(t,u);else{if(h=t.current.alternate,!(u&30)&&!f_(h)&&(r=Sl(t,u),r===2&&(p=en(t),p!==0&&(u=p,r=Dc(t,p))),r===1))throw o=Ho,Di(t,0),Hr(t,u),Xt(t,je()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Vi(t,Gt,yr);break;case 3:if(Hr(t,u),(u&130023424)===u&&(r=Pc+500-je(),10<r)){if(gi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){jt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Fu(Vi.bind(null,t,Gt,yr),r);break}Vi(t,Gt,yr);break;case 4:if(Hr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-bt(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*d_(u/1960))-u,10<u){t.timeoutHandle=Fu(Vi.bind(null,t,Gt,yr),u);break}Vi(t,Gt,yr);break;case 5:Vi(t,Gt,yr);break;default:throw Error(n(329))}}}return Xt(t,je()),t.callbackNode===o?rp.bind(null,t):null}function Dc(t,r){var o=Wo;return t.current.memoizedState.isDehydrated&&(Di(t,r).flags|=256),t=Sl(t,r),t!==2&&(r=Gt,Gt=o,r!==null&&Vc(r)),t}function Vc(t){Gt===null?Gt=t:Gt.push.apply(Gt,t)}function f_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!Dn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Hr(t,r){for(r&=~Cc,r&=~_l,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-bt(r),u=1<<o;t[o]=-1,r&=~u}}function ip(t){if(xe&6)throw Error(n(327));Ms();var r=gi(t,0);if(!(r&1))return Xt(t,je()),null;var o=Sl(t,r);if(t.tag!==0&&o===2){var u=en(t);u!==0&&(r=u,o=Dc(t,u))}if(o===1)throw o=Ho,Di(t,0),Hr(t,r),Xt(t,je()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Vi(t,Gt,yr),Xt(t,je()),null}function xc(t,r){var o=xe;xe|=1;try{return t(r)}finally{xe=o,xe===0&&(Ls=je()+500,Ya&&Ur())}}function Ni(t){$r!==null&&$r.tag===0&&!(xe&6)&&Ms();var r=xe;xe|=1;var o=yn.transition,u=Ce;try{if(yn.transition=null,Ce=1,t)return t()}finally{Ce=u,yn.transition=o,xe=r,!(xe&6)&&Ur()}}function Oc(){on=Os.current,He(Os)}function Di(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,$y(o)),ot!==null)for(o=ot.return;o!==null;){var u=o;switch($u(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ga();break;case 3:Ds(),He(Wt),He(Vt),nc();break;case 5:ec(u);break;case 4:Ds();break;case 13:He(Xe);break;case 19:He(Xe);break;case 10:Gu(u.type._context);break;case 22:case 23:Oc()}o=o.return}if(Et=t,ot=t=Wr(t.current,null),At=on=r,dt=0,Ho=null,Cc=_l=ki=0,Gt=Wo=null,Ai!==null){for(r=0;r<Ai.length;r++)if(o=Ai[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}Ai=null}return t}function sp(t,r){do{var o=ot;try{if(Qu(),al.current=hl,ll){for(var u=Ye.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}ll=!1}if(Pi=0,vt=ht=Ye=null,bo=!1,Bo=0,Ac.current=null,o===null||o.return===null){dt=1,Ho=r,ot=null;break}e:{var p=t,_=o.return,T=o,A=r;if(r=At,T.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var U=A,H=T,W=H.tag;if(!(H.mode&1)&&(W===0||W===11||W===15)){var q=H.alternate;q?(H.updateQueue=q.updateQueue,H.memoizedState=q.memoizedState,H.lanes=q.lanes):(H.updateQueue=null,H.memoizedState=null)}var Z=Nf(_);if(Z!==null){Z.flags&=-257,Df(Z,_,T,p,r),Z.mode&1&&kf(p,U,r),r=Z,A=U;var re=r.updateQueue;if(re===null){var ie=new Set;ie.add(A),r.updateQueue=ie}else re.add(A);break e}else{if(!(r&1)){kf(p,U,r),Lc();break e}A=Error(n(426))}}else if(Ke&&T.mode&1){var rt=Nf(_);if(rt!==null){!(rt.flags&65536)&&(rt.flags|=256),Df(rt,_,T,p,r),Wu(Vs(A,T));break e}}p=A=Vs(A,T),dt!==4&&(dt=2),Wo===null?Wo=[p]:Wo.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var L=Cf(p,A,r);Zd(p,L);break e;case 1:T=A;var k=p.type,F=p.stateNode;if(!(p.flags&128)&&(typeof k.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(jr===null||!jr.has(F)))){p.flags|=65536,r&=-r,p.lanes|=r;var X=Pf(p,T,r);Zd(p,X);break e}}p=p.return}while(p!==null)}lp(o)}catch(se){r=se,ot===o&&o!==null&&(ot=o=o.return);continue}break}while(!0)}function op(){var t=yl.current;return yl.current=hl,t===null?hl:t}function Lc(){(dt===0||dt===3||dt===2)&&(dt=4),Et===null||!(ki&268435455)&&!(_l&268435455)||Hr(Et,At)}function Sl(t,r){var o=xe;xe|=2;var u=op();(Et!==t||At!==r)&&(yr=null,Di(t,r));do try{p_();break}catch(h){sp(t,h)}while(!0);if(Qu(),xe=o,yl.current=u,ot!==null)throw Error(n(261));return Et=null,At=0,dt}function p_(){for(;ot!==null;)ap(ot)}function m_(){for(;ot!==null&&!wa();)ap(ot)}function ap(t){var r=hp(t.alternate,t,on);t.memoizedProps=t.pendingProps,r===null?lp(t):ot=r,Ac.current=null}function lp(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=l_(o,r),o!==null){o.flags&=32767,ot=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ot=null;return}}else if(o=a_(o,r,on),o!==null){ot=o;return}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);dt===0&&(dt=5)}function Vi(t,r,o){var u=Ce,h=yn.transition;try{yn.transition=null,Ce=1,g_(t,r,o,u)}finally{yn.transition=h,Ce=u}return null}function g_(t,r,o,u){do Ms();while($r!==null);if(xe&6)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(Be(t,p),t===Et&&(ot=Et=null,At=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||El||(El=!0,dp(cn,function(){return Ms(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=yn.transition,yn.transition=null;var _=Ce;Ce=1;var T=xe;xe|=4,Ac.current=null,c_(t,o),Jf(o,t),My(Lu),Vr=!!Ou,Lu=Ou=null,t.current=o,h_(o),_u(),xe=T,Ce=_,yn.transition=p}else t.current=o;if(El&&(El=!1,$r=t,wl=h),p=t.pendingLanes,p===0&&(jr=null),Sa(o.stateNode),Xt(t,je()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(vl)throw vl=!1,t=kc,kc=null,t;return wl&1&&t.tag!==0&&Ms(),p=t.pendingLanes,p&1?t===Nc?Ko++:(Ko=0,Nc=t):Ko=0,Ur(),null}function Ms(){if($r!==null){var t=Nr(wl),r=yn.transition,o=Ce;try{if(yn.transition=null,Ce=16>t?16:t,$r===null)var u=!1;else{if(t=$r,$r=null,wl=0,xe&6)throw Error(n(331));var h=xe;for(xe|=4,ne=t.current;ne!==null;){var p=ne,_=p.child;if(ne.flags&16){var T=p.deletions;if(T!==null){for(var A=0;A<T.length;A++){var U=T[A];for(ne=U;ne!==null;){var H=ne;switch(H.tag){case 0:case 11:case 15:qo(8,H,p)}var W=H.child;if(W!==null)W.return=H,ne=W;else for(;ne!==null;){H=ne;var q=H.sibling,Z=H.return;if(Kf(H),H===U){ne=null;break}if(q!==null){q.return=Z,ne=q;break}ne=Z}}}var re=p.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var rt=ie.sibling;ie.sibling=null,ie=rt}while(ie!==null)}}ne=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,ne=_;else e:for(;ne!==null;){if(p=ne,p.flags&2048)switch(p.tag){case 0:case 11:case 15:qo(9,p,p.return)}var L=p.sibling;if(L!==null){L.return=p.return,ne=L;break e}ne=p.return}}var k=t.current;for(ne=k;ne!==null;){_=ne;var F=_.child;if(_.subtreeFlags&2064&&F!==null)F.return=_,ne=F;else e:for(_=k;ne!==null;){if(T=ne,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:gl(9,T)}}catch(se){Ze(T,T.return,se)}if(T===_){ne=null;break e}var X=T.sibling;if(X!==null){X.return=T.return,ne=X;break e}ne=T.return}}if(xe=h,Ur(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(mi,t)}catch{}u=!0}return u}finally{Ce=o,yn.transition=r}}return!1}function up(t,r,o){r=Vs(o,r),r=Cf(t,r,1),t=Br(t,r,1),r=jt(),t!==null&&(Pr(t,1,r),Xt(t,r))}function Ze(t,r,o){if(t.tag===3)up(t,t,o);else for(;r!==null;){if(r.tag===3){up(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(jr===null||!jr.has(u))){t=Vs(o,t),t=Pf(r,t,1),r=Br(r,t,1),t=jt(),r!==null&&(Pr(r,1,t),Xt(r,t));break}}r=r.return}}function y_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=jt(),t.pingedLanes|=t.suspendedLanes&o,Et===t&&(At&o)===o&&(dt===4||dt===3&&(At&130023424)===At&&500>je()-Pc?Di(t,0):Cc|=o),Xt(t,r)}function cp(t,r){r===0&&(t.mode&1?(r=ss,ss<<=1,!(ss&130023424)&&(ss=4194304)):r=1);var o=jt();t=pr(t,r),t!==null&&(Pr(t,r,o),Xt(t,o))}function __(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),cp(t,o)}function v_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),cp(t,o)}var hp;hp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Wt.current)Qt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Qt=!1,o_(t,r,o);Qt=!!(t.flags&131072)}else Qt=!1,Ke&&r.flags&1048576&&$d(r,Za,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;pl(t,r),t=r.pendingProps;var h=Ss(r,Vt.current);Ns(r,o),h=sc(null,r,u,t,h,o);var p=oc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Kt(u)?(p=!0,Xa(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Ju(r),h.updater=dl,r.stateNode=h,h._reactInternals=r,dc(r,u,t,o),r=gc(null,r,u,!0,p,o)):(r.tag=0,Ke&&p&&ju(r),zt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(pl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=w_(u),t=xn(u,t),h){case 0:r=mc(null,r,u,t,o);break e;case 1:r=Ff(null,r,u,t,o);break e;case 11:r=Vf(null,r,u,t,o);break e;case 14:r=xf(null,r,u,xn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),mc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),Ff(t,r,u,h,o);case 3:e:{if(Uf(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Jd(t,r),sl(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Vs(Error(n(423)),r),r=bf(t,r,u,o,h);break e}else if(u!==h){h=Vs(Error(n(424)),r),r=bf(t,r,u,o,h);break e}else for(sn=Lr(r.stateNode.containerInfo.firstChild),rn=r,Ke=!0,Vn=null,o=Xd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Cs(),u===h){r=gr(t,r,o);break e}zt(t,r,u,o)}r=r.child}return r;case 5:return tf(r),t===null&&Hu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,Mu(u,h)?_=null:p!==null&&Mu(u,p)&&(r.flags|=32),Mf(t,r),zt(t,r,_,o),r.child;case 6:return t===null&&Hu(r),null;case 13:return Bf(t,r,o);case 4:return Zu(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Ps(r,null,u,o):zt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),Vf(t,r,u,h,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,$e(nl,u._currentValue),u._currentValue=_,p!==null)if(Dn(p.value,_)){if(p.children===h.children&&!Wt.current){r=gr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var A=T.firstContext;A!==null;){if(A.context===u){if(p.tag===1){A=mr(-1,o&-o),A.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var H=U.pending;H===null?A.next=A:(A.next=H.next,H.next=A),U.pending=A}}p.lanes|=o,A=p.alternate,A!==null&&(A.lanes|=o),Xu(p.return,o,r),T.lanes|=o;break}A=A.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),Xu(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}zt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,Ns(r,o),h=mn(h),u=u(h),r.flags|=1,zt(t,r,u,o),r.child;case 14:return u=r.type,h=xn(u,r.pendingProps),h=xn(u.type,h),xf(t,r,u,h,o);case 15:return Of(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:xn(u,h),pl(t,r),r.tag=1,Kt(u)?(t=!0,Xa(r)):t=!1,Ns(r,o),Rf(r,u,h),dc(r,u,h,o),gc(null,r,u,!0,t,o);case 19:return jf(t,r,o);case 22:return Lf(t,r,o)}throw Error(n(156,r.tag))};function dp(t,r){return rs(t,r)}function E_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _n(t,r,o,u){return new E_(t,r,o,u)}function Mc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function w_(t){if(typeof t=="function")return Mc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V)return 11;if(t===gt)return 14}return 2}function Wr(t,r){var o=t.alternate;return o===null?(o=_n(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Rl(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")Mc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case P:return xi(o.children,h,p,r);case w:_=8,h|=8;break;case R:return t=_n(12,o,r,h|2),t.elementType=R,t.lanes=p,t;case S:return t=_n(13,o,r,h),t.elementType=S,t.lanes=p,t;case Ge:return t=_n(19,o,r,h),t.elementType=Ge,t.lanes=p,t;case be:return Al(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:_=10;break e;case D:_=9;break e;case V:_=11;break e;case gt:_=14;break e;case Dt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=_n(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function xi(t,r,o,u){return t=_n(7,t,u,r),t.lanes=o,t}function Al(t,r,o,u){return t=_n(22,t,u,r),t.elementType=be,t.lanes=o,t.stateNode={isHidden:!1},t}function Fc(t,r,o){return t=_n(6,t,null,r),t.lanes=o,t}function Uc(t,r,o){return r=_n(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function T_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cr(0),this.expirationTimes=Cr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function bc(t,r,o,u,h,p,_,T,A){return t=new T_(t,r,o,T,A),r===1?(r=1,p===!0&&(r|=8)):r=0,p=_n(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ju(p),t}function I_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function fp(t){if(!t)return Fr;t=t._reactInternals;e:{if(Sn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Kt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Kt(o))return Bd(t,o,r)}return r}function pp(t,r,o,u,h,p,_,T,A){return t=bc(o,u,!0,t,h,p,_,T,A),t.context=fp(null),o=t.current,u=jt(),h=qr(o),p=mr(u,h),p.callback=r??null,Br(o,p,h),t.current.lanes=h,Pr(t,h,u),Xt(t,u),t}function Cl(t,r,o,u){var h=r.current,p=jt(),_=qr(h);return o=fp(o),r.context===null?r.context=o:r.pendingContext=o,r=mr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=Br(h,r,_),t!==null&&(Mn(t,h,_,p),il(t,h,_)),_}function Pl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function mp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function Bc(t,r){mp(t,r),(t=t.alternate)&&mp(t,r)}function S_(){return null}var gp=typeof reportError=="function"?reportError:function(t){console.error(t)};function zc(t){this._internalRoot=t}kl.prototype.render=zc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Cl(t,r,null,null)},kl.prototype.unmount=zc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ni(function(){Cl(null,t,null,null)}),r[cr]=null}};function kl(t){this._internalRoot=t}kl.prototype.unstable_scheduleHydration=function(t){if(t){var r=ka();t={blockedOn:null,target:t,priority:r};for(var o=0;o<zn.length&&r!==0&&r<zn[o].priority;o++);zn.splice(o,0,t),o===0&&Va(t)}};function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Nl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yp(){}function R_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=Pl(_);p.call(U)}}var _=pp(r,u,t,0,null,!1,!1,"",yp);return t._reactRootContainer=_,t[cr]=_.current,Do(t.nodeType===8?t.parentNode:t),Ni(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var U=Pl(A);T.call(U)}}var A=bc(t,0,!1,null,null,!1,!1,"",yp);return t._reactRootContainer=A,t[cr]=A.current,Do(t.nodeType===8?t.parentNode:t),Ni(function(){Cl(r,A,o,u)}),A}function Dl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var T=h;h=function(){var A=Pl(_);T.call(A)}}Cl(r,_,t,h)}else _=R_(o,r,t,h,u);return Pl(_)}Ca=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ar(r.pendingLanes);o!==0&&(kr(r,o|1),Xt(r,je()),!(xe&6)&&(Ls=je()+500,Ur()))}break;case 13:Ni(function(){var u=pr(t,1);if(u!==null){var h=jt();Mn(u,t,1,h)}}),Bc(t,1)}},os=function(t){if(t.tag===13){var r=pr(t,134217728);if(r!==null){var o=jt();Mn(r,t,134217728,o)}Bc(t,134217728)}},Pa=function(t){if(t.tag===13){var r=qr(t),o=pr(t,r);if(o!==null){var u=jt();Mn(o,t,r,u)}Bc(t,r)}},ka=function(){return Ce},Na=function(t,r){var o=Ce;try{return Ce=t,r()}finally{Ce=o}},Yi=function(t,r,o){switch(r){case"input":if(to(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Qa(u);if(!h)throw Error(n(90));Hi(u),to(u,h)}}}break;case"textarea":Gi(t,o);break;case"select":r=o.value,r!=null&&nr(t,!!o.multiple,r,!1)}},ci=xc,ho=Ni;var A_={usingClientEntryPoint:!1,Events:[Oo,Ts,Qa,bn,co,xc]},Qo={findFiberByHostInstance:Ti,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},C_={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:fe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mo(t),t===null?null:t.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||S_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vl.isDisabled&&Vl.supportsFiber)try{mi=Vl.inject(C_),Zt=Vl}catch{}}return Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=A_,Yt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(r))throw Error(n(200));return I_(t,r,null,o)},Yt.createRoot=function(t,r){if(!jc(t))throw Error(n(299));var o=!1,u="",h=gp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=bc(t,1,!1,null,null,o,!1,u,h),t[cr]=r.current,Do(t.nodeType===8?t.parentNode:t),new zc(r)},Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=mo(r),t=t===null?null:t.stateNode,t},Yt.flushSync=function(t){return Ni(t)},Yt.hydrate=function(t,r,o){if(!Nl(r))throw Error(n(200));return Dl(null,t,r,!0,o)},Yt.hydrateRoot=function(t,r,o){if(!jc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=gp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=pp(r,null,t,1,o??null,h,!1,p,_),t[cr]=r.current,Do(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new kl(r)},Yt.render=function(t,r,o){if(!Nl(r))throw Error(n(200));return Dl(null,t,r,!1,o)},Yt.unmountComponentAtNode=function(t){if(!Nl(t))throw Error(n(40));return t._reactRootContainer?(Ni(function(){Dl(null,null,t,!1,function(){t._reactRootContainer=null,t[cr]=null})}),!0):!1},Yt.unstable_batchedUpdates=xc,Yt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!Nl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Dl(t,r,o,!1,u)},Yt.version="18.3.1-next-f1338f8080-20240426",Yt}var Rp;function L_(){if(Rp)return Hc.exports;Rp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Hc.exports=O_(),Hc.exports}var Ap;function M_(){if(Ap)return xl;Ap=1;var i=L_();return xl.createRoot=i.createRoot,xl.hydrateRoot=i.hydrateRoot,xl}var F_=M_(),Cp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},U_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],d=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},km={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],d=a+1<i.length,m=d?i[a+1]:0,y=a+2<i.length,v=y?i[a+2]:0,I=c>>2,N=(c&3)<<4|m>>4;let M=(m&15)<<2|v>>6,B=v&63;y||(B=64,d||(M=64)),s.push(n[I],n[N],n[M],n[B])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Pm(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):U_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const v=a<i.length?n[i.charAt(a)]:64;++a;const N=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||v==null||N==null)throw new b_;const M=c<<2|m>>4;if(s.push(M),v!==64){const B=m<<4&240|v>>2;if(s.push(B),N!==64){const Q=v<<6&192|N;s.push(Q)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class b_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const B_=function(i){const e=Pm(i);return km.encodeByteArray(e,!0)},Wl=function(i){return B_(i).replace(/\./g,"")},z_=function(i){try{return km.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=()=>j_().__FIREBASE_DEFAULTS__,q_=()=>{if(typeof process>"u"||typeof Cp>"u")return;const i=Cp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},H_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&z_(i[1]);return e&&JSON.parse(e)},Ah=()=>{try{return $_()||q_()||H_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},W_=i=>{var e,n;return(n=(e=Ah())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},Nm=i=>{const e=W_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Dm=()=>{var i;return(i=Ah())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Wl(JSON.stringify(n)),Wl(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G_(){var i;const e=(i=Ah())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function X_(){return!G_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Y_(){try{return typeof indexedDB=="object"}catch{return!1}}function J_(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z_="FirebaseError";class Bi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=Z_,Object.setPrototypeOf(this,Bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xm.prototype.create)}}class xm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?ev(c,s):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new Bi(a,m,s)}}function ev(i,e){return i.replace(tv,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const tv=/\{\$([^}]+)}/g;function ih(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],d=e[a];if(Pp(c)&&Pp(d)){if(!ih(c,d))return!1}else if(c!==d)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Pp(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(i){return i&&i._delegate?i._delegate:i}class js{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new K_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(iv(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:rv(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function rv(i){return i===Oi?void 0:i}function iv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new nv(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Ve||(Ve={}));const ov={debug:Ve.DEBUG,verbose:Ve.VERBOSE,info:Ve.INFO,warn:Ve.WARN,error:Ve.ERROR,silent:Ve.SILENT},av=Ve.INFO,lv={[Ve.DEBUG]:"log",[Ve.VERBOSE]:"log",[Ve.INFO]:"info",[Ve.WARN]:"warn",[Ve.ERROR]:"error"},uv=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=lv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Om{constructor(e){this.name=e,this._logLevel=av,this._logHandler=uv,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ve))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ov[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ve.DEBUG,...e),this._logHandler(this,Ve.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ve.VERBOSE,...e),this._logHandler(this,Ve.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ve.INFO,...e),this._logHandler(this,Ve.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ve.WARN,...e),this._logHandler(this,Ve.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ve.ERROR,...e),this._logHandler(this,Ve.ERROR,...e)}}const cv=(i,e)=>e.some(n=>i instanceof n);let kp,Np;function hv(){return kp||(kp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dv(){return Np||(Np=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lm=new WeakMap,sh=new WeakMap,Mm=new WeakMap,Qc=new WeakMap,Ch=new WeakMap;function fv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(Xr(i.result)),a()},d=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Lm.set(n,i)}).catch(()=>{}),Ch.set(e,i),e}function pv(i){if(sh.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});sh.set(i,e)}let oh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return sh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Mm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function mv(i){oh=i(oh)}function gv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Gc(this),e,...n);return Mm.set(s,e.sort?e.sort():[e]),Xr(s)}:dv().includes(i)?function(...e){return i.apply(Gc(this),e),Xr(Lm.get(this))}:function(...e){return Xr(i.apply(Gc(this),e))}}function yv(i){return typeof i=="function"?gv(i):(i instanceof IDBTransaction&&pv(i),cv(i,hv())?new Proxy(i,oh):i)}function Xr(i){if(i instanceof IDBRequest)return fv(i);if(Qc.has(i))return Qc.get(i);const e=yv(i);return e!==i&&(Qc.set(i,e),Ch.set(e,i)),e}const Gc=i=>Ch.get(i);function _v(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const d=indexedDB.open(i,e),m=Xr(d);return s&&d.addEventListener("upgradeneeded",y=>{s(Xr(d.result),y.oldVersion,y.newVersion,Xr(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",v=>a(v.oldVersion,v.newVersion,v))}).catch(()=>{}),m}const vv=["get","getKey","getAll","getAllKeys","count"],Ev=["put","add","delete","clear"],Xc=new Map;function Dp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Xc.get(e))return Xc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=Ev.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||vv.includes(n)))return;const c=async function(d,...m){const y=this.transaction(d,a?"readwrite":"readonly");let v=y.store;return s&&(v=v.index(m.shift())),(await Promise.all([v[n](...m),a&&y.done]))[0]};return Xc.set(e,c),c}mv(i=>({...i,get:(e,n,s)=>Dp(e,n)||i.get(e,n,s),has:(e,n)=>!!Dp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Tv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Tv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ah="@firebase/app",Vp="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er=new Om("@firebase/app"),Iv="@firebase/app-compat",Sv="@firebase/analytics-compat",Rv="@firebase/analytics",Av="@firebase/app-check-compat",Cv="@firebase/app-check",Pv="@firebase/auth",kv="@firebase/auth-compat",Nv="@firebase/database",Dv="@firebase/data-connect",Vv="@firebase/database-compat",xv="@firebase/functions",Ov="@firebase/functions-compat",Lv="@firebase/installations",Mv="@firebase/installations-compat",Fv="@firebase/messaging",Uv="@firebase/messaging-compat",bv="@firebase/performance",Bv="@firebase/performance-compat",zv="@firebase/remote-config",jv="@firebase/remote-config-compat",$v="@firebase/storage",qv="@firebase/storage-compat",Hv="@firebase/firestore",Wv="@firebase/vertexai",Kv="@firebase/firestore-compat",Qv="firebase",Gv="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="[DEFAULT]",Xv={[ah]:"fire-core",[Iv]:"fire-core-compat",[Rv]:"fire-analytics",[Sv]:"fire-analytics-compat",[Cv]:"fire-app-check",[Av]:"fire-app-check-compat",[Pv]:"fire-auth",[kv]:"fire-auth-compat",[Nv]:"fire-rtdb",[Dv]:"fire-data-connect",[Vv]:"fire-rtdb-compat",[xv]:"fire-fn",[Ov]:"fire-fn-compat",[Lv]:"fire-iid",[Mv]:"fire-iid-compat",[Fv]:"fire-fcm",[Uv]:"fire-fcm-compat",[bv]:"fire-perf",[Bv]:"fire-perf-compat",[zv]:"fire-rc",[jv]:"fire-rc-compat",[$v]:"fire-gcs",[qv]:"fire-gcs-compat",[Hv]:"fire-fst",[Kv]:"fire-fst-compat",[Wv]:"fire-vertex","fire-js":"fire-js",[Qv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kl=new Map,Yv=new Map,uh=new Map;function xp(i,e){try{i.container.addComponent(e)}catch(n){Er.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function sa(i){const e=i.name;if(uh.has(e))return Er.debug(`There were multiple attempts to register component ${e}.`),!1;uh.set(e,i);for(const n of Kl.values())xp(n,i);for(const n of Yv.values())xp(n,i);return!0}function Fm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new xm("app","Firebase",Jv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new js("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=Gv;function Ph(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:lh,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw Yr.create("bad-app-name",{appName:String(a)});if(n||(n=Dm()),!n)throw Yr.create("no-options");const c=Kl.get(a);if(c){if(ih(n,c.options)&&ih(s,c.config))return c;throw Yr.create("duplicate-app",{appName:a})}const d=new sv(a);for(const y of uh.values())d.addComponent(y);const m=new Zv(n,s,d);return Kl.set(a,m),m}function bm(i=lh){const e=Kl.get(i);if(!e&&i===lh&&Dm())return Ph();if(!e)throw Yr.create("no-app",{appName:i});return e}function Jr(i,e,n){var s;let a=(s=Xv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Er.warn(m.join(" "));return}sa(new js(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0="firebase-heartbeat-database",t0=1,oa="firebase-heartbeat-store";let Yc=null;function Bm(){return Yc||(Yc=_v(e0,t0,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(oa)}catch(n){console.warn(n)}}}}).catch(i=>{throw Yr.create("idb-open",{originalErrorMessage:i.message})})),Yc}async function n0(i){try{const n=(await Bm()).transaction(oa),s=await n.objectStore(oa).get(zm(i));return await n.done,s}catch(e){if(e instanceof Bi)Er.warn(e.message);else{const n=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Er.warn(n.message)}}}async function Op(i,e){try{const s=(await Bm()).transaction(oa,"readwrite");await s.objectStore(oa).put(e,zm(i)),await s.done}catch(n){if(n instanceof Bi)Er.warn(n.message);else{const s=Yr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Er.warn(s.message)}}}function zm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=1024,i0=30*24*60*60*1e3;class s0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Lp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=i0}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Er.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lp(),{heartbeatsToSend:s,unsentEntries:a}=o0(this._heartbeatsCache.heartbeats),c=Wl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Er.warn(n),""}}}function Lp(){return new Date().toISOString().substring(0,10)}function o0(i,e=r0){const n=[];let s=i.slice();for(const a of i){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),Mp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),Mp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class a0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Y_()?J_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await n0(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Op(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Mp(i){return Wl(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(i){sa(new js("platform-logger",e=>new wv(e),"PRIVATE")),sa(new js("heartbeat",e=>new s0(e),"PRIVATE")),Jr(ah,Vp,i),Jr(ah,Vp,"esm2017"),Jr("fire-js","")}l0("");var u0="firebase",c0="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jr(u0,c0,"app");var Fp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mi,jm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,w){function R(){}R.prototype=w.prototype,P.D=w.prototype,P.prototype=new R,P.prototype.constructor=P,P.C=function(C,D,V){for(var S=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)S[Ge-2]=arguments[Ge];return w.prototype[D].apply(C,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,w,R){R||(R=0);var C=Array(16);if(typeof w=="string")for(var D=0;16>D;++D)C[D]=w.charCodeAt(R++)|w.charCodeAt(R++)<<8|w.charCodeAt(R++)<<16|w.charCodeAt(R++)<<24;else for(D=0;16>D;++D)C[D]=w[R++]|w[R++]<<8|w[R++]<<16|w[R++]<<24;w=P.g[0],R=P.g[1],D=P.g[2];var V=P.g[3],S=w+(V^R&(D^V))+C[0]+3614090360&4294967295;w=R+(S<<7&4294967295|S>>>25),S=V+(D^w&(R^D))+C[1]+3905402710&4294967295,V=w+(S<<12&4294967295|S>>>20),S=D+(R^V&(w^R))+C[2]+606105819&4294967295,D=V+(S<<17&4294967295|S>>>15),S=R+(w^D&(V^w))+C[3]+3250441966&4294967295,R=D+(S<<22&4294967295|S>>>10),S=w+(V^R&(D^V))+C[4]+4118548399&4294967295,w=R+(S<<7&4294967295|S>>>25),S=V+(D^w&(R^D))+C[5]+1200080426&4294967295,V=w+(S<<12&4294967295|S>>>20),S=D+(R^V&(w^R))+C[6]+2821735955&4294967295,D=V+(S<<17&4294967295|S>>>15),S=R+(w^D&(V^w))+C[7]+4249261313&4294967295,R=D+(S<<22&4294967295|S>>>10),S=w+(V^R&(D^V))+C[8]+1770035416&4294967295,w=R+(S<<7&4294967295|S>>>25),S=V+(D^w&(R^D))+C[9]+2336552879&4294967295,V=w+(S<<12&4294967295|S>>>20),S=D+(R^V&(w^R))+C[10]+4294925233&4294967295,D=V+(S<<17&4294967295|S>>>15),S=R+(w^D&(V^w))+C[11]+2304563134&4294967295,R=D+(S<<22&4294967295|S>>>10),S=w+(V^R&(D^V))+C[12]+1804603682&4294967295,w=R+(S<<7&4294967295|S>>>25),S=V+(D^w&(R^D))+C[13]+4254626195&4294967295,V=w+(S<<12&4294967295|S>>>20),S=D+(R^V&(w^R))+C[14]+2792965006&4294967295,D=V+(S<<17&4294967295|S>>>15),S=R+(w^D&(V^w))+C[15]+1236535329&4294967295,R=D+(S<<22&4294967295|S>>>10),S=w+(D^V&(R^D))+C[1]+4129170786&4294967295,w=R+(S<<5&4294967295|S>>>27),S=V+(R^D&(w^R))+C[6]+3225465664&4294967295,V=w+(S<<9&4294967295|S>>>23),S=D+(w^R&(V^w))+C[11]+643717713&4294967295,D=V+(S<<14&4294967295|S>>>18),S=R+(V^w&(D^V))+C[0]+3921069994&4294967295,R=D+(S<<20&4294967295|S>>>12),S=w+(D^V&(R^D))+C[5]+3593408605&4294967295,w=R+(S<<5&4294967295|S>>>27),S=V+(R^D&(w^R))+C[10]+38016083&4294967295,V=w+(S<<9&4294967295|S>>>23),S=D+(w^R&(V^w))+C[15]+3634488961&4294967295,D=V+(S<<14&4294967295|S>>>18),S=R+(V^w&(D^V))+C[4]+3889429448&4294967295,R=D+(S<<20&4294967295|S>>>12),S=w+(D^V&(R^D))+C[9]+568446438&4294967295,w=R+(S<<5&4294967295|S>>>27),S=V+(R^D&(w^R))+C[14]+3275163606&4294967295,V=w+(S<<9&4294967295|S>>>23),S=D+(w^R&(V^w))+C[3]+4107603335&4294967295,D=V+(S<<14&4294967295|S>>>18),S=R+(V^w&(D^V))+C[8]+1163531501&4294967295,R=D+(S<<20&4294967295|S>>>12),S=w+(D^V&(R^D))+C[13]+2850285829&4294967295,w=R+(S<<5&4294967295|S>>>27),S=V+(R^D&(w^R))+C[2]+4243563512&4294967295,V=w+(S<<9&4294967295|S>>>23),S=D+(w^R&(V^w))+C[7]+1735328473&4294967295,D=V+(S<<14&4294967295|S>>>18),S=R+(V^w&(D^V))+C[12]+2368359562&4294967295,R=D+(S<<20&4294967295|S>>>12),S=w+(R^D^V)+C[5]+4294588738&4294967295,w=R+(S<<4&4294967295|S>>>28),S=V+(w^R^D)+C[8]+2272392833&4294967295,V=w+(S<<11&4294967295|S>>>21),S=D+(V^w^R)+C[11]+1839030562&4294967295,D=V+(S<<16&4294967295|S>>>16),S=R+(D^V^w)+C[14]+4259657740&4294967295,R=D+(S<<23&4294967295|S>>>9),S=w+(R^D^V)+C[1]+2763975236&4294967295,w=R+(S<<4&4294967295|S>>>28),S=V+(w^R^D)+C[4]+1272893353&4294967295,V=w+(S<<11&4294967295|S>>>21),S=D+(V^w^R)+C[7]+4139469664&4294967295,D=V+(S<<16&4294967295|S>>>16),S=R+(D^V^w)+C[10]+3200236656&4294967295,R=D+(S<<23&4294967295|S>>>9),S=w+(R^D^V)+C[13]+681279174&4294967295,w=R+(S<<4&4294967295|S>>>28),S=V+(w^R^D)+C[0]+3936430074&4294967295,V=w+(S<<11&4294967295|S>>>21),S=D+(V^w^R)+C[3]+3572445317&4294967295,D=V+(S<<16&4294967295|S>>>16),S=R+(D^V^w)+C[6]+76029189&4294967295,R=D+(S<<23&4294967295|S>>>9),S=w+(R^D^V)+C[9]+3654602809&4294967295,w=R+(S<<4&4294967295|S>>>28),S=V+(w^R^D)+C[12]+3873151461&4294967295,V=w+(S<<11&4294967295|S>>>21),S=D+(V^w^R)+C[15]+530742520&4294967295,D=V+(S<<16&4294967295|S>>>16),S=R+(D^V^w)+C[2]+3299628645&4294967295,R=D+(S<<23&4294967295|S>>>9),S=w+(D^(R|~V))+C[0]+4096336452&4294967295,w=R+(S<<6&4294967295|S>>>26),S=V+(R^(w|~D))+C[7]+1126891415&4294967295,V=w+(S<<10&4294967295|S>>>22),S=D+(w^(V|~R))+C[14]+2878612391&4294967295,D=V+(S<<15&4294967295|S>>>17),S=R+(V^(D|~w))+C[5]+4237533241&4294967295,R=D+(S<<21&4294967295|S>>>11),S=w+(D^(R|~V))+C[12]+1700485571&4294967295,w=R+(S<<6&4294967295|S>>>26),S=V+(R^(w|~D))+C[3]+2399980690&4294967295,V=w+(S<<10&4294967295|S>>>22),S=D+(w^(V|~R))+C[10]+4293915773&4294967295,D=V+(S<<15&4294967295|S>>>17),S=R+(V^(D|~w))+C[1]+2240044497&4294967295,R=D+(S<<21&4294967295|S>>>11),S=w+(D^(R|~V))+C[8]+1873313359&4294967295,w=R+(S<<6&4294967295|S>>>26),S=V+(R^(w|~D))+C[15]+4264355552&4294967295,V=w+(S<<10&4294967295|S>>>22),S=D+(w^(V|~R))+C[6]+2734768916&4294967295,D=V+(S<<15&4294967295|S>>>17),S=R+(V^(D|~w))+C[13]+1309151649&4294967295,R=D+(S<<21&4294967295|S>>>11),S=w+(D^(R|~V))+C[4]+4149444226&4294967295,w=R+(S<<6&4294967295|S>>>26),S=V+(R^(w|~D))+C[11]+3174756917&4294967295,V=w+(S<<10&4294967295|S>>>22),S=D+(w^(V|~R))+C[2]+718787259&4294967295,D=V+(S<<15&4294967295|S>>>17),S=R+(V^(D|~w))+C[9]+3951481745&4294967295,P.g[0]=P.g[0]+w&4294967295,P.g[1]=P.g[1]+(D+(S<<21&4294967295|S>>>11))&4294967295,P.g[2]=P.g[2]+D&4294967295,P.g[3]=P.g[3]+V&4294967295}s.prototype.u=function(P,w){w===void 0&&(w=P.length);for(var R=w-this.blockSize,C=this.B,D=this.h,V=0;V<w;){if(D==0)for(;V<=R;)a(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<w;)if(C[D++]=P.charCodeAt(V++),D==this.blockSize){a(this,C),D=0;break}}else for(;V<w;)if(C[D++]=P[V++],D==this.blockSize){a(this,C),D=0;break}}this.h=D,this.o+=w},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var w=1;w<P.length-8;++w)P[w]=0;var R=8*this.o;for(w=P.length-8;w<P.length;++w)P[w]=R&255,R/=256;for(this.u(P),P=Array(16),w=R=0;4>w;++w)for(var C=0;32>C;C+=8)P[R++]=this.g[w]>>>C&255;return P};function c(P,w){var R=m;return Object.prototype.hasOwnProperty.call(R,P)?R[P]:R[P]=w(P)}function d(P,w){this.h=w;for(var R=[],C=!0,D=P.length-1;0<=D;D--){var V=P[D]|0;C&&V==w||(R[D]=V,C=!1)}this.g=R}var m={};function y(P){return-128<=P&&128>P?c(P,function(w){return new d([w|0],0>w?-1:0)}):new d([P|0],0>P?-1:0)}function v(P){if(isNaN(P)||!isFinite(P))return N;if(0>P)return z(v(-P));for(var w=[],R=1,C=0;P>=R;C++)w[C]=P/R|0,R*=4294967296;return new d(w,0)}function I(P,w){if(P.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(P.charAt(0)=="-")return z(I(P.substring(1),w));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var R=v(Math.pow(w,8)),C=N,D=0;D<P.length;D+=8){var V=Math.min(8,P.length-D),S=parseInt(P.substring(D,D+V),w);8>V?(V=v(Math.pow(w,V)),C=C.j(V).add(v(S))):(C=C.j(R),C=C.add(v(S)))}return C}var N=y(0),M=y(1),B=y(16777216);i=d.prototype,i.m=function(){if(G(this))return-z(this).m();for(var P=0,w=1,R=0;R<this.g.length;R++){var C=this.i(R);P+=(0<=C?C:4294967296+C)*w,w*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(Q(this))return"0";if(G(this))return"-"+z(this).toString(P);for(var w=v(Math.pow(P,6)),R=this,C="";;){var D=fe(R,w).g;R=_e(R,D.j(w));var V=((0<R.g.length?R.g[0]:R.h)>>>0).toString(P);if(R=D,Q(R))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function Q(P){if(P.h!=0)return!1;for(var w=0;w<P.g.length;w++)if(P.g[w]!=0)return!1;return!0}function G(P){return P.h==-1}i.l=function(P){return P=_e(this,P),G(P)?-1:Q(P)?0:1};function z(P){for(var w=P.g.length,R=[],C=0;C<w;C++)R[C]=~P.g[C];return new d(R,~P.h).add(M)}i.abs=function(){return G(this)?z(this):this},i.add=function(P){for(var w=Math.max(this.g.length,P.g.length),R=[],C=0,D=0;D<=w;D++){var V=C+(this.i(D)&65535)+(P.i(D)&65535),S=(V>>>16)+(this.i(D)>>>16)+(P.i(D)>>>16);C=S>>>16,V&=65535,S&=65535,R[D]=S<<16|V}return new d(R,R[R.length-1]&-2147483648?-1:0)};function _e(P,w){return P.add(z(w))}i.j=function(P){if(Q(this)||Q(P))return N;if(G(this))return G(P)?z(this).j(z(P)):z(z(this).j(P));if(G(P))return z(this.j(z(P)));if(0>this.l(B)&&0>P.l(B))return v(this.m()*P.m());for(var w=this.g.length+P.g.length,R=[],C=0;C<2*w;C++)R[C]=0;for(C=0;C<this.g.length;C++)for(var D=0;D<P.g.length;D++){var V=this.i(C)>>>16,S=this.i(C)&65535,Ge=P.i(D)>>>16,gt=P.i(D)&65535;R[2*C+2*D]+=S*gt,ye(R,2*C+2*D),R[2*C+2*D+1]+=V*gt,ye(R,2*C+2*D+1),R[2*C+2*D+1]+=S*Ge,ye(R,2*C+2*D+1),R[2*C+2*D+2]+=V*Ge,ye(R,2*C+2*D+2)}for(C=0;C<w;C++)R[C]=R[2*C+1]<<16|R[2*C];for(C=w;C<2*w;C++)R[C]=0;return new d(R,0)};function ye(P,w){for(;(P[w]&65535)!=P[w];)P[w+1]+=P[w]>>>16,P[w]&=65535,w++}function de(P,w){this.g=P,this.h=w}function fe(P,w){if(Q(w))throw Error("division by zero");if(Q(P))return new de(N,N);if(G(P))return w=fe(z(P),w),new de(z(w.g),z(w.h));if(G(w))return w=fe(P,z(w)),new de(z(w.g),w.h);if(30<P.g.length){if(G(P)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var R=M,C=w;0>=C.l(P);)R=oe(R),C=oe(C);var D=le(R,1),V=le(C,1);for(C=le(C,2),R=le(R,2);!Q(C);){var S=V.add(C);0>=S.l(P)&&(D=D.add(R),V=S),C=le(C,1),R=le(R,1)}return w=_e(P,D.j(w)),new de(D,w)}for(D=N;0<=P.l(w);){for(R=Math.max(1,Math.floor(P.m()/w.m())),C=Math.ceil(Math.log(R)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=v(R),S=V.j(w);G(S)||0<S.l(P);)R-=C,V=v(R),S=V.j(w);Q(V)&&(V=M),D=D.add(V),P=_e(P,S)}return new de(D,P)}i.A=function(P){return fe(this,P).h},i.and=function(P){for(var w=Math.max(this.g.length,P.g.length),R=[],C=0;C<w;C++)R[C]=this.i(C)&P.i(C);return new d(R,this.h&P.h)},i.or=function(P){for(var w=Math.max(this.g.length,P.g.length),R=[],C=0;C<w;C++)R[C]=this.i(C)|P.i(C);return new d(R,this.h|P.h)},i.xor=function(P){for(var w=Math.max(this.g.length,P.g.length),R=[],C=0;C<w;C++)R[C]=this.i(C)^P.i(C);return new d(R,this.h^P.h)};function oe(P){for(var w=P.g.length+1,R=[],C=0;C<w;C++)R[C]=P.i(C)<<1|P.i(C-1)>>>31;return new d(R,P.h)}function le(P,w){var R=w>>5;w%=32;for(var C=P.g.length-R,D=[],V=0;V<C;V++)D[V]=0<w?P.i(V+R)>>>w|P.i(V+R+1)<<32-w:P.i(V+R);return new d(D,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,jm=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=v,d.fromString=I,Mi=d}).apply(typeof Fp<"u"?Fp:typeof self<"u"?self:typeof window<"u"?window:{});var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $m,Yo,qm,zl,ch,Hm,Wm,Km;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ol=="object"&&Ol];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,f){if(f)e:{var g=s;l=l.split(".");for(var E=0;E<l.length-1;E++){var O=l[E];if(!(O in g))break e;g=g[O]}l=l[l.length-1],E=g[l],f=f(E),f!=E&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function c(l,f){l instanceof String&&(l+="");var g=0,E=!1,O={next:function(){if(!E&&g<l.length){var b=g++;return{value:f(b,l[b]),done:!1}}return E=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}a("Array.prototype.values",function(l){return l||function(){return c(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function v(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function I(l,f,g){return l.call.apply(l.bind,arguments)}function N(l,f,g){if(!l)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,E),l.apply(f,O)}}return function(){return l.apply(f,arguments)}}function M(l,f,g){return M=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:N,M.apply(null,arguments)}function B(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),l.apply(this,E)}}function Q(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(E,O,b){for(var Y=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)Y[Ue-2]=arguments[Ue];return f.prototype[O].apply(E,Y)}}function G(l){const f=l.length;if(0<f){const g=Array(f);for(let E=0;E<f;E++)g[E]=l[E];return g}return[]}function z(l,f){for(let g=1;g<arguments.length;g++){const E=arguments[g];if(y(E)){const O=l.length||0,b=E.length||0;l.length=O+b;for(let Y=0;Y<b;Y++)l[O+Y]=E[Y]}else l.push(E)}}class _e{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ye(l){return/^[\s\xa0]*$/.test(l)}function de(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function fe(l){return fe[" "](l),l}fe[" "]=function(){};var oe=de().indexOf("Gecko")!=-1&&!(de().toLowerCase().indexOf("webkit")!=-1&&de().indexOf("Edge")==-1)&&!(de().indexOf("Trident")!=-1||de().indexOf("MSIE")!=-1)&&de().indexOf("Edge")==-1;function le(l,f,g){for(const E in l)f.call(g,l[E],E,l)}function P(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function w(l){const f={};for(const g in l)f[g]=l[g];return f}const R="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let g,E;for(let O=1;O<arguments.length;O++){E=arguments[O];for(g in E)l[g]=E[g];for(let b=0;b<R.length;b++)g=R[b],Object.prototype.hasOwnProperty.call(E,g)&&(l[g]=E[g])}}function D(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function V(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ce;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ge{constructor(){this.h=this.g=null}add(f,g){const E=gt.get();E.set(f,g),this.h?this.h.next=E:this.g=E,this.h=E}}var gt=new _e(()=>new Dt,l=>l.reset());class Dt{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let be,J=!1,ce=new Ge,ee=()=>{const l=m.Promise.resolve(void 0);be=()=>{l.then(x)}};var x=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){V(g)}var f=gt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}J=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Ie=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,f),m.removeEventListener("test",g,f)}catch{}return l}();function Se(l,f){if(ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,E=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(oe){e:{try{fe(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:ke[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Se.aa.h.call(this)}}Q(Se,ae);var ke={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Le="closure_listenable_"+(1e6*Math.random()|0),Me=0;function ze(l,f,g,E,O){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!E,this.ha=O,this.key=++Me,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function er(l){this.src=l,this.g={},this.h=0}er.prototype.add=function(l,f,g,E,O){var b=l.toString();l=this.g[b],l||(l=this.g[b]=[],this.h++);var Y=Ir(l,f,E,O);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new ze(f,this.src,b,!!E,O),f.fa=g,l.push(f)),f};function Hi(l,f){var g=f.type;if(g in l.g){var E=l.g[g],O=Array.prototype.indexOf.call(E,f,void 0),b;(b=0<=O)&&Array.prototype.splice.call(E,O,1),b&&(yt(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Ir(l,f,g,E){for(var O=0;O<l.length;++O){var b=l[O];if(!b.da&&b.listener==f&&b.capture==!!g&&b.ha==E)return O}return-1}var oi="closure_lm_"+(1e6*Math.random()|0),Wi={};function eo(l,f,g,E,O){if(Array.isArray(f)){for(var b=0;b<f.length;b++)eo(l,f[b],g,E,O);return null}return g=ro(g),l&&l[Le]?l.K(f,g,v(E)?!!E.capture:!!E,O):to(l,f,g,!1,E,O)}function to(l,f,g,E,O,b){if(!f)throw Error("Invalid event type");var Y=v(O)?!!O.capture:!!O,Ue=Qi(l);if(Ue||(l[oi]=Ue=new er(l)),g=Ue.add(f,g,E,Y,b),g.proxy)return g;if(E=_a(),g.proxy=E,E.src=l,E.listener=g,l.addEventListener)Ie||(O=Y),O===void 0&&(O=!1),l.addEventListener(f.toString(),E,O);else if(l.attachEvent)l.attachEvent(nr(f.toString()),E);else if(l.addListener&&l.removeListener)l.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function _a(){function l(g){return f.call(l.src,l.listener,g)}const f=no;return l}function Ki(l,f,g,E,O){if(Array.isArray(f))for(var b=0;b<f.length;b++)Ki(l,f[b],g,E,O);else E=v(E)?!!E.capture:!!E,g=ro(g),l&&l[Le]?(l=l.i,f=String(f).toString(),f in l.g&&(b=l.g[f],g=Ir(b,g,E,O),-1<g&&(yt(b[g]),Array.prototype.splice.call(b,g,1),b.length==0&&(delete l.g[f],l.h--)))):l&&(l=Qi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Ir(f,g,E,O)),(g=-1<l?f[l]:null)&&tr(g))}function tr(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Le])Hi(f.i,l);else{var g=l.type,E=l.proxy;f.removeEventListener?f.removeEventListener(g,E,l.capture):f.detachEvent?f.detachEvent(nr(g),E):f.addListener&&f.removeListener&&f.removeListener(E),(g=Qi(f))?(Hi(g,l),g.h==0&&(g.src=null,f[oi]=null)):yt(l)}}}function nr(l){return l in Wi?Wi[l]:Wi[l]="on"+l}function no(l,f){if(l.da)l=!0;else{f=new Se(f,this);var g=l.listener,E=l.ha||l.src;l.fa&&tr(l),l=g.call(E,f)}return l}function Qi(l){return l=l[oi],l instanceof er?l:null}var Gi="__closure_events_fn_"+(1e9*Math.random()>>>0);function ro(l){return typeof l=="function"?l:(l[Gi]||(l[Gi]=function(f){return l.handleEvent(f)}),l[Gi])}function lt(){$.call(this),this.i=new er(this),this.M=this,this.F=null}Q(lt,$),lt.prototype[Le]=!0,lt.prototype.removeEventListener=function(l,f,g,E){Ki(this,l,f,g,E)};function ut(l,f){var g,E=l.F;if(E)for(g=[];E;E=E.F)g.push(E);if(l=l.M,E=f.type||f,typeof f=="string")f=new ae(f,l);else if(f instanceof ae)f.target=f.target||l;else{var O=f;f=new ae(E,l),C(f,O)}if(O=!0,g)for(var b=g.length-1;0<=b;b--){var Y=f.g=g[b];O=rr(Y,E,!0,f)&&O}if(Y=f.g=l,O=rr(Y,E,!0,f)&&O,O=rr(Y,E,!1,f)&&O,g)for(b=0;b<g.length;b++)Y=f.g=g[b],O=rr(Y,E,!1,f)&&O}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],E=0;E<g.length;E++)yt(g[E]);delete l.g[f],l.h--}}this.F=null},lt.prototype.K=function(l,f,g,E){return this.i.add(String(l),f,!1,g,E)},lt.prototype.L=function(l,f,g,E){return this.i.add(String(l),f,!0,g,E)};function rr(l,f,g,E){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,b=0;b<f.length;++b){var Y=f[b];if(Y&&!Y.da&&Y.capture==g){var Ue=Y.listener,ct=Y.ha||Y.src;Y.fa&&Hi(l.i,Y),O=Ue.call(ct,E)!==!1&&O}}return O&&!E.defaultPrevented}function io(l,f,g){if(typeof l=="function")g&&(l=M(l,g));else if(l&&typeof l.handleEvent=="function")l=M(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Sr(l){l.g=io(()=>{l.g=null,l.i&&(l.i=!1,Sr(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class ai extends ${constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Sr(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function li(l){$.call(this),this.h=l,this.g={}}Q(li,$);var so=[];function oo(l){le(l.g,function(f,g){this.g.hasOwnProperty(g)&&tr(f)},l),l.g={}}li.prototype.N=function(){li.aa.N.call(this),oo(this)},li.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ao=m.JSON.stringify,lo=m.JSON.parse,uo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function ui(){}ui.prototype.h=null;function Xi(l){return l.h||(l.h=l.i())}function Yi(){}var un={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Un(){ae.call(this,"d")}Q(Un,ae);function Ji(){ae.call(this,"c")}Q(Ji,ae);var bn={},co=null;function ci(){return co=co||new lt}bn.La="serverreachability";function ho(l){ae.call(this,bn.La,l)}Q(ho,ae);function ir(l){const f=ci();ut(f,new ho(f))}bn.STAT_EVENT="statevent";function fo(l,f){ae.call(this,bn.STAT_EVENT,l),this.stat=f}Q(fo,ae);function nt(l){const f=ci();ut(f,new fo(f,l))}bn.Ma="timingevent";function Zi(l,f){ae.call(this,bn.Ma,l),this.size=f}Q(Zi,ae);function Tn(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function hi(){this.g=!0}hi.prototype.xa=function(){this.g=!1};function di(l,f,g,E,O,b){l.info(function(){if(l.g)if(b)for(var Y="",Ue=b.split("&"),ct=0;ct<Ue.length;ct++){var Ne=Ue[ct].split("=");if(1<Ne.length){var _t=Ne[0];Ne=Ne[1];var st=_t.split("_");Y=2<=st.length&&st[1]=="type"?Y+(_t+"="+Ne+"&"):Y+(_t+"=redacted&")}}else Y=null;else Y=b;return"XMLHTTP REQ ("+E+") [attempt "+O+"]: "+f+`
`+g+`
`+Y})}function es(l,f,g,E,O,b,Y){l.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+O+"]: "+f+`
`+g+`
`+b+" "+Y})}function In(l,f,g,E){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+yu(l,g)+(E?" "+E:"")})}function po(l,f){l.info(function(){return"TIMEOUT: "+f})}hi.prototype.info=function(){};function yu(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var E=g[l];if(!(2>E.length)){var O=E[1];if(Array.isArray(O)&&!(1>O.length)){var b=O[0];if(b!="noop"&&b!="stop"&&b!="close")for(var Y=1;Y<O.length;Y++)O[Y]=""}}}}return ao(g)}catch{return f}}var ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},va={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Sn;function fi(){}Q(fi,ui),fi.prototype.g=function(){return new XMLHttpRequest},fi.prototype.i=function(){return{}},Sn=new fi;function Rn(l,f,g,E){this.j=l,this.i=f,this.l=g,this.R=E||1,this.U=new li(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ea}function Ea(){this.i=null,this.g="",this.h=!1}var mo={},ns={};function rs(l,f,g){l.L=1,l.v=kr(en(f)),l.m=g,l.P=!0,go(l,null)}function go(l,f){l.F=Date.now(),je(l),l.A=en(l.v);var g=l.A,E=l.R;Array.isArray(E)||(E=[String(E)]),Dr(g.i,"t",E),l.C=0,g=l.j.J,l.h=new Ea,l.g=Ua(l.j,g?f:null,!l.m),0<l.O&&(l.M=new ai(M(l.Y,l,l.g),l.O)),f=l.U,g=l.g,E=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(so[0]=O.toString()),O=so);for(var b=0;b<O.length;b++){var Y=eo(g,O[b],E||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),ir(),di(l.i,l.u,l.A,l.l,l.R,l.m)}Rn.prototype.ca=function(l){l=l.target;const f=this.M;f&&Ht(l)==3?f.j():this.Y(l)},Rn.prototype.Y=function(l){try{if(l==this.g)e:{const st=Ht(this.g);var f=this.g.Ba();const dn=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||To(this.g)))){this.J||st!=4||f==7||(f==8||0>=dn?ir(3):ir(2)),pi(this);var g=this.g.Z();this.X=g;t:if(wa(this)){var E=To(this.g);l="";var O=E.length,b=Ht(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){cn(this),Rr(this);var Y="";break t}this.h.i=new m.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,l+=this.h.i.decode(E[f],{stream:!(b&&f==O-1)});E.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,es(this.i,this.u,this.A,this.l,this.R,st,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ue,ct=this.g;if((Ue=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ye(Ue)){var Ne=Ue;break t}}Ne=null}if(g=Ne)In(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yo(this,g);else{this.o=!1,this.s=3,nt(12),cn(this),Rr(this);break e}}if(this.P){g=!0;let nn;for(;!this.J&&this.C<Y.length;)if(nn=_u(this,Y),nn==ns){st==4&&(this.s=4,nt(14),g=!1),In(this.i,this.l,null,"[Incomplete Response]");break}else if(nn==mo){this.s=4,nt(15),In(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else In(this.i,this.l,nn,null),yo(this,nn);if(wa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||Y.length!=0||this.h.h||(this.s=1,nt(16),g=!1),this.o=this.o&&g,!g)In(this.i,this.l,Y,"[Invalid Chunked Response]"),cn(this),Rr(this);else if(0<Y.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),So(_t),_t.M=!0,nt(11))}}else In(this.i,this.l,Y,null),yo(this,Y);st==4&&cn(this),this.o&&!this.J&&(st==4?ps(this.j,this):(this.o=!1,je(this)))}else us(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),cn(this),Rr(this)}}}catch{}finally{}};function wa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function _u(l,f){var g=l.C,E=f.indexOf(`
`,g);return E==-1?ns:(g=Number(f.substring(g,E)),isNaN(g)?mo:(E+=1,E+g>f.length?ns:(f=f.slice(E,E+g),l.C=E+g,f)))}Rn.prototype.cancel=function(){this.J=!0,cn(this)};function je(l){l.S=Date.now()+l.I,Ta(l,l.I)}function Ta(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Tn(M(l.ba,l),f)}function pi(l){l.B&&(m.clearTimeout(l.B),l.B=null)}Rn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(po(this.i,this.A),this.L!=2&&(ir(),nt(17)),cn(this),this.s=2,Rr(this)):Ta(this,this.S-l)};function Rr(l){l.j.G==0||l.J||ps(l.j,l)}function cn(l){pi(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,oo(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function yo(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||bt(g.h,l))){if(!l.K&&bt(g.h,l)&&g.G==3){try{var E=g.Da.g.parse(f)}catch{E=null}if(Array.isArray(E)&&E.length==3){var O=E;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)fs(g),Nn(g);else break e;ds(g),nt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=Tn(M(g.Za,g),6e3));if(1>=Sa(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ur(g,11)}else if((l.K||g.g==l)&&fs(g),!ye(f))for(O=g.Da.g.parse(f),f=0;f<O.length;f++){let Ne=O[f];if(g.T=Ne[0],Ne=Ne[1],g.G==2)if(Ne[0]=="c"){g.K=Ne[1],g.ia=Ne[2];const _t=Ne[3];_t!=null&&(g.la=_t,g.j.info("VER="+g.la));const st=Ne[4];st!=null&&(g.Aa=st,g.j.info("SVER="+g.Aa));const dn=Ne[5];dn!=null&&typeof dn=="number"&&0<dn&&(E=1.5*dn,g.L=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const nn=l.g;if(nn){const wi=nn.g?nn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var b=E.h;b.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(_o(b,b.h),b.h=null))}if(E.D){const gs=nn.g?nn.g.getResponseHeader("X-HTTP-Session-Id"):null;gs&&(E.ya=gs,Be(E.I,E.D,gs))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),E=g;var Y=l;if(E.qa=Fa(E,E.J?E.ia:null,E.W),Y.K){Ra(E.h,Y);var Ue=Y,ct=E.L;ct&&(Ue.I=ct),Ue.B&&(pi(Ue),je(Ue)),E.g=Y}else Ei(E);0<g.i.length&&$n(g)}else Ne[0]!="stop"&&Ne[0]!="close"||ur(g,7);else g.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?ur(g,7):St(g):Ne[0]!="noop"&&g.l&&g.l.ta(Ne),g.v=0)}}ir(4)}catch{}}var Ia=class{constructor(l,f){this.g=l,this.map=f}};function mi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Sa(l){return l.h?1:l.g?l.g.size:0}function bt(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function _o(l,f){l.g?l.g.add(f):l.h=f}function Ra(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}mi.prototype.cancel=function(){if(this.i=Aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Aa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return G(l.i)}function is(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var f=[],g=l.length,E=0;E<g;E++)f.push(l[E]);return f}f=[],g=0;for(E in l)f[g++]=l[E];return f}function ss(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const E in l)f[g++]=E;return f}}}function Ar(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=ss(l),E=is(l),O=E.length,b=0;b<O;b++)f.call(void 0,E[b],g&&g[b],l)}var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vu(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var E=l[g].indexOf("="),O=null;if(0<=E){var b=l[g].substring(0,E);O=l[g].substring(E+1)}else b=l[g];f(b,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function sr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof sr){this.h=l.h,yi(this,l.j),this.o=l.o,this.g=l.g,Cr(this,l.s),this.l=l.l;var f=l.i,g=new Bn;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Pr(this,g),this.m=l.m}else l&&(f=String(l).match(gi))?(this.h=!1,yi(this,f[1]||"",!0),this.o=Ce(f[2]||""),this.g=Ce(f[3]||"",!0),Cr(this,f[4]),this.l=Ce(f[5]||"",!0),Pr(this,f[6]||"",!0),this.m=Ce(f[7]||"")):(this.h=!1,this.i=new Bn(null,this.h))}sr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(Nr(f,os,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(Nr(f,os,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(Nr(g,g.charAt(0)=="/"?ka:Pa,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",Nr(g,vo)),l.join("")};function en(l){return new sr(l)}function yi(l,f,g){l.j=g?Ce(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Cr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Pr(l,f,g){f instanceof Bn?(l.i=f,zn(l.i,l.h)):(g||(f=Nr(f,Na)),l.i=new Bn(f,l.h))}function Be(l,f,g){l.i.set(f,g)}function kr(l){return Be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Ce(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Nr(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Ca),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ca(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var os=/[#\/\?@]/g,Pa=/[#\?:]/g,ka=/[#\?]/g,Na=/[#\?@]/g,vo=/#/g;function Bn(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&vu(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}i=Bn.prototype,i.add=function(l,f){It(this),this.i=null,l=hn(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function An(l,f){It(l),f=hn(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function Cn(l,f){return It(l),f=hn(l,f),l.g.has(f)}i.forEach=function(l,f){It(this),this.g.forEach(function(g,E){g.forEach(function(O){l.call(f,O,E,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let E=0;E<f.length;E++){const O=l[E];for(let b=0;b<O.length;b++)g.push(f[E])}return g},i.V=function(l){It(this);let f=[];if(typeof l=="string")Cn(this,l)&&(f=f.concat(this.g.get(hn(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},i.set=function(l,f){return It(this),this.i=null,l=hn(this,l),Cn(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Dr(l,f,g){An(l,f),0<g.length&&(l.i=null,l.g.set(hn(l,f),G(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var E=f[g];const b=encodeURIComponent(String(E)),Y=this.V(E);for(E=0;E<Y.length;E++){var O=b;Y[E]!==""&&(O+="="+encodeURIComponent(String(Y[E]))),l.push(O)}}return this.i=l.join("&")};function hn(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function zn(l,f){f&&!l.j&&(It(l),l.i=null,l.g.forEach(function(g,E){var O=E.toLowerCase();E!=O&&(An(this,E),Dr(this,O,g))},l)),l.j=f}function Eu(l,f){const g=new hi;if(m.Image){const E=new Image;E.onload=B(qt,g,"TestLoadImage: loaded",!0,f,E),E.onerror=B(qt,g,"TestLoadImage: error",!1,f,E),E.onabort=B(qt,g,"TestLoadImage: abort",!1,f,E),E.ontimeout=B(qt,g,"TestLoadImage: timeout",!1,f,E),m.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=l}else f(!1)}function Da(l,f){const g=new hi,E=new AbortController,O=setTimeout(()=>{E.abort(),qt(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:E.signal}).then(b=>{clearTimeout(O),b.ok?qt(g,"TestPingServer: ok",!0,f):qt(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),qt(g,"TestPingServer: error",!1,f)})}function qt(l,f,g,E,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),E(g)}catch{}}function wu(){this.g=new uo}function Va(l,f,g){const E=g||"";try{Ar(l,function(O,b){let Y=O;v(O)&&(Y=ao(O)),f.push(E+b+"="+encodeURIComponent(Y))})}catch(O){throw f.push(E+"type="+encodeURIComponent("_badmap")),O}}function or(l){this.l=l.Ub||null,this.j=l.eb||!1}Q(or,ui),or.prototype.g=function(){return new _i(this.l,this.j)},or.prototype.i=function(l){return function(){return l}}({});function _i(l,f){lt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}Q(_i,lt),i=_i.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,kn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Pn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,kn(this)),this.g&&(this.readyState=3,kn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xa(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function xa(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Pn(this):kn(this),this.readyState==3&&xa(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Pn(this))},i.Qa=function(l){this.g&&(this.response=l,Pn(this))},i.ga=function(){this.g&&Pn(this)};function Pn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,kn(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function kn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_i.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function ar(l){let f="";return le(l,function(g,E){f+=E,f+=":",f+=g,f+=`\r
`}),f}function Vr(l,f,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=ar(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Be(l,f,g))}function We(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}Q(We,lt);var Tu=/^https?$/i,Eo=["POST","PUT"];i=We.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Sn.g(),this.v=this.o?Xi(this.o):Xi(Sn),this.g.onreadystatechange=M(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(b){vi(this,b);return}if(l=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var O in E)g.set(O,E[O]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const b of E.keys())g.set(b,E.get(b));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(b=>b.toLowerCase()=="content-type"),O=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(Eo,f,void 0))||E||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,Y]of g)this.g.setRequestHeader(b,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ls(this),this.u=!0,this.g.send(l),this.u=!1}catch(b){vi(this,b)}};function vi(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,as(l),tn(l)}function as(l){l.A||(l.A=!0,ut(l,"complete"),ut(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ut(this,"complete"),ut(this,"abort"),tn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),We.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?wo(this):this.bb())},i.bb=function(){wo(this)};function wo(l){if(l.h&&typeof d<"u"&&(!l.v[1]||Ht(l)!=4||l.Z()!=2)){if(l.u&&Ht(l)==4)io(l.Ea,0,l);else if(ut(l,"readystatechange"),Ht(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var E;if(E=Y===0){var O=String(l.D).match(gi)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),E=!Tu.test(O?O.toLowerCase():"")}g=E}if(g)ut(l,"complete"),ut(l,"success");else{l.m=6;try{var b=2<Ht(l)?l.g.statusText:""}catch{b=""}l.l=b+" ["+l.Z()+"]",as(l)}}finally{tn(l)}}}}function tn(l,f){if(l.g){ls(l);const g=l.g,E=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||ut(l,"ready");try{g.onreadystatechange=E}catch{}}}function ls(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Ht(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Ht(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),lo(f)}};function To(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function us(l){const f={};l=(l.g&&2<=Ht(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<l.length;E++){if(ye(l[E]))continue;var g=D(l[E]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const b=f[O]||[];f[O]=b,b.push(g)}P(f,function(E){return E.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function jn(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function Io(l){this.Aa=0,this.i=[],this.j=new hi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=jn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=jn("baseRetryDelayMs",5e3,l),this.cb=jn("retryDelaySeedMs",1e4,l),this.Wa=jn("forwardChannelMaxRetries",2,l),this.wa=jn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new mi(l&&l.concurrentRequestLimit),this.Da=new wu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Io.prototype,i.la=8,i.G=1,i.connect=function(l,f,g,E){nt(0),this.W=l,this.H=f||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.I=Fa(this,null,this.W),$n(this)};function St(l){if(cs(l),l.G==3){var f=l.U++,g=en(l.I);if(Be(g,"SID",l.K),Be(g,"RID",f),Be(g,"TYPE","terminate"),lr(l,g),f=new Rn(l,l.j,f),f.L=2,f.v=kr(en(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=f.v,g=!0),g||(f.g=Ua(f.j,null),f.g.ea(f.v)),f.F=Date.now(),je(f)}Ma(l)}function Nn(l){l.g&&(So(l),l.g.cancel(),l.g=null)}function cs(l){Nn(l),l.u&&(m.clearTimeout(l.u),l.u=null),fs(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function $n(l){if(!Zt(l.h)&&!l.s){l.s=!0;var f=l.Ga;be||ee(),J||(be(),J=!0),ce.add(f,l),l.B=0}}function Iu(l,f){return Sa(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Tn(M(l.Ga,l,f),La(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new Rn(this,this.j,l);let b=this.o;if(this.S&&(b?(b=w(b),C(b,this.S)):b=this.S),this.m!==null||this.O||(O.H=b,b=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(f+=E,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=xr(this,O,f),g=en(this.I),Be(g,"RID",l),Be(g,"CVER",22),this.D&&Be(g,"X-HTTP-Session-Id",this.D),lr(this,g),b&&(this.O?f="headers="+encodeURIComponent(String(ar(b)))+"&"+f:this.m&&Vr(g,this.m,b)),_o(this.h,O),this.Ua&&Be(g,"TYPE","init"),this.P?(Be(g,"$req",f),Be(g,"SID","null"),O.T=!0,rs(O,g,null)):rs(O,g,f),this.G=2}}else this.G==3&&(l?hs(this,l):this.i.length==0||Zt(this.h)||hs(this))};function hs(l,f){var g;f?g=f.l:g=l.U++;const E=en(l.I);Be(E,"SID",l.K),Be(E,"RID",g),Be(E,"AID",l.T),lr(l,E),l.m&&l.o&&Vr(E,l.m,l.o),g=new Rn(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=xr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),_o(l.h,g),rs(g,E,f)}function lr(l,f){l.H&&le(l.H,function(g,E){Be(f,E,g)}),l.l&&Ar({},function(g,E){Be(f,E,g)})}function xr(l,f,g){g=Math.min(l.i.length,g);var E=l.l?M(l.l.Na,l.l,l):null;e:{var O=l.i;let b=-1;for(;;){const Y=["count="+g];b==-1?0<g?(b=O[0].g,Y.push("ofs="+b)):b=0:Y.push("ofs="+b);let Ue=!0;for(let ct=0;ct<g;ct++){let Ne=O[ct].g;const _t=O[ct].map;if(Ne-=b,0>Ne)b=Math.max(0,O[ct].g-100),Ue=!1;else try{Va(_t,Y,"req"+Ne+"_")}catch{E&&E(_t)}}if(Ue){E=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,E}function Ei(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;be||ee(),J||(be(),J=!0),ce.add(f,l),l.v=0}}function ds(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Tn(M(l.Fa,l),La(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,Oa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Tn(M(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Nn(this),Oa(this))};function So(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function Oa(l){l.g=new Rn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=en(l.qa);Be(f,"RID","rpc"),Be(f,"SID",l.K),Be(f,"AID",l.T),Be(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&Be(f,"TO",l.ja),Be(f,"TYPE","xmlhttp"),lr(l,f),l.m&&l.o&&Vr(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=kr(en(f)),g.m=null,g.P=!0,go(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Nn(this),ds(this),nt(19))};function fs(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function ps(l,f){var g=null;if(l.g==f){fs(l),So(l),l.g=null;var E=2}else if(bt(l.h,f))g=f.D,Ra(l.h,f),E=1;else return;if(l.G!=0){if(f.o)if(E==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var O=l.B;E=ci(),ut(E,new Zi(E,g)),$n(l)}else Ei(l);else if(O=f.s,O==3||O==0&&0<f.X||!(E==1&&Iu(l,f)||E==2&&ds(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),O){case 1:ur(l,5);break;case 4:ur(l,10);break;case 3:ur(l,6);break;default:ur(l,2)}}}function La(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function ur(l,f){if(l.j.info("Error code "+f),f==2){var g=M(l.fb,l),E=l.Xa;const O=!E;E=new sr(E||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||yi(E,"https"),kr(E),O?Eu(E.toString(),g):Da(E.toString(),g)}else nt(2);l.G=0,l.l&&l.l.sa(f),Ma(l),cs(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function Ma(l){if(l.G=0,l.ka=[],l.l){const f=Aa(l.h);(f.length!=0||l.i.length!=0)&&(z(l.ka,f),z(l.ka,l.i),l.h.i.length=0,G(l.i),l.i.length=0),l.l.ra()}}function Fa(l,f,g){var E=g instanceof sr?en(g):new sr(g);if(E.g!="")f&&(E.g=f+"."+E.g),Cr(E,E.s);else{var O=m.location;E=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var b=new sr(null);E&&yi(b,E),f&&(b.g=f),O&&Cr(b,O),g&&(b.l=g),E=b}return g=l.D,f=l.ya,g&&f&&Be(E,g,f),Be(E,"VER",l.la),lr(l,E),E}function Ua(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new We(new or({eb:g})):new We(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function Ro(){}i=Ro.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ms(){}ms.prototype.g=function(l,f){return new Bt(l,f)};function Bt(l,f){lt.call(this),this.g=new Io(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ye(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ye(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new qn(this)}Q(Bt,lt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){St(this.g)},Bt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=ao(l),l=g);f.i.push(new Ia(f.Ya++,l)),f.G==3&&$n(f)},Bt.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,Bt.aa.N.call(this)};function ba(l){Un.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}Q(ba,Un);function Ba(){Ji.call(this),this.status=1}Q(Ba,Ji);function qn(l){this.g=l}Q(qn,Ro),qn.prototype.ua=function(){ut(this.g,"a")},qn.prototype.ta=function(l){ut(this.g,new ba(l))},qn.prototype.sa=function(l){ut(this.g,new Ba)},qn.prototype.ra=function(){ut(this.g,"b")},ms.prototype.createWebChannel=ms.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,Km=function(){return new ms},Wm=function(){return ci()},Hm=bn,ch={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ts.NO_ERROR=0,ts.TIMEOUT=8,ts.HTTP_ERROR=6,zl=ts,va.COMPLETE="complete",qm=va,Yi.EventType=un,un.OPEN="a",un.CLOSE="b",un.ERROR="c",un.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Yo=Yi,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,$m=We}).apply(typeof Ol<"u"?Ol:typeof self<"u"?self:typeof window<"u"?window:{});const Up="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ft.UNAUTHENTICATED=new Ft(null),Ft.GOOGLE_CREDENTIALS=new Ft("google-credentials-uid"),Ft.FIRST_PARTY=new Ft("first-party-uid"),Ft.MOCK_USER=new Ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xs="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new Om("@firebase/firestore");function Fs(){return Ui.logLevel}function te(i,...e){if(Ui.logLevel<=Ve.DEBUG){const n=e.map(kh);Ui.debug(`Firestore (${Xs}): ${i}`,...n)}}function wr(i,...e){if(Ui.logLevel<=Ve.ERROR){const n=e.map(kh);Ui.error(`Firestore (${Xs}): ${i}`,...n)}}function $s(i,...e){if(Ui.logLevel<=Ve.WARN){const n=e.map(kh);Ui.warn(`Firestore (${Xs}): ${i}`,...n)}}function kh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(i="Unexpected state"){const e=`FIRESTORE (${Xs}) INTERNAL ASSERTION FAILED: `+i;throw wr(e),new Error(e)}function Fe(i,e){i||Ee()}function Te(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class he extends Bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ft.UNAUTHENTICATED))}shutdown(){}}class d0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class f0{constructor(e){this.t=e,this.currentUser=Ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Fe(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Zr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Zr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Zr)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Fe(typeof s.accessToken=="string"),new Qm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Fe(e===null||typeof e=="string"),new Ft(e)}}class p0{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Ft.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class m0{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new p0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class g0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class y0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Fe(this.o===void 0);const s=c=>{c.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,te("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Fe(typeof n.token=="string"),this.R=n.token,new g0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _0(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=_0(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function Pe(i,e){return i<e?-1:i>e?1:0}function qs(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new he(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new he(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{static fromTimestamp(e){return new we(e)}static min(){return new we(new pt(0,0))}static max(){return new we(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,n,s){n===void 0?n=0:n>e.length&&Ee(),s===void 0?s=e.length-n:s>e.length-n&&Ee(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return aa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof aa?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=e.get(a),d=n.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Qe extends aa{construct(e,n,s){return new Qe(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new he(K.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Qe(n)}static emptyPath(){return new Qe([])}}const v0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class kt extends aa{construct(e,n,s){return new kt(e,n,s)}static isValidIdentifier(e){return v0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new kt(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new he(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new he(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new he(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(d=!d,a++):m!=="."||d?(s+=m,a++):(c(),a++)}if(c(),d)throw new he(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new kt(n)}static emptyPath(){return new kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.path=e}static fromPath(e){return new ge(Qe.fromString(e))}static fromName(e){return new ge(Qe.fromString(e).popFirst(5))}static empty(){return new ge(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ge(new Qe(e.slice()))}}function E0(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=we.fromTimestamp(s===1e9?new pt(n+1,0):new pt(n,s));return new ti(a,ge.empty(),e)}function w0(i){return new ti(i.readTime,i.key,-1)}class ti{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ti(we.min(),ge.empty(),-1)}static max(){return new ti(we.max(),ge.empty(),-1)}}function T0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=ge.comparator(i.documentKey,e.documentKey),n!==0?n:Pe(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class S0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ys(i){if(i.code!==K.FAILED_PRECONDITION||i.message!==I0)throw i;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,s)=>{n(e)})}static reject(e){return new j((n,s)=>{s(e)})}static waitFor(e){return new j((n,s)=>{let a=0,c=0,d=!1;e.forEach(m=>{++a,m.next(()=>{++c,d&&c===a&&n()},y=>s(y))}),d=!0,c===a&&n()})}static or(e){let n=j.resolve(!1);for(const s of e)n=n.next(a=>a?j.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new j((s,a)=>{const c=e.length,d=new Array(c);let m=0;for(let y=0;y<c;y++){const v=y;n(e[v]).next(I=>{d[v]=I,++m,m===c&&s(d)},I=>a(I))}})}static doWhile(e,n){return new j((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function R0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Js(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}iu.oe=-1;function su(i){return i==null}function Ql(i){return i===0&&1/i==-1/0}function A0(i){return typeof i=="number"&&Number.isInteger(i)&&!Ql(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=bp(e)),e=P0(i.get(n),e);return bp(e)}function P0(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function bp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function zi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Xm(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Pt.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Pt.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ll(this.root,e,this.comparator,!0)}}class Ll{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pt{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??Pt.RED,this.left=a??Pt.EMPTY,this.right=c??Pt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new Pt(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Pt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Pt.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ee();const e=this.left.check();if(e!==this.right.check())throw Ee();return e+(this.isRed()?0:1)}}Pt.EMPTY=null,Pt.RED=!0,Pt.BLACK=!1;Pt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee()}get value(){throw Ee()}get color(){throw Ee()}get left(){throw Ee()}get right(){throw Ee()}copy(e,n,s,a,c){return this}insert(e,n,s){return new Pt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new zp(this.data.getIterator())}getIteratorFrom(e){return new zp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class zp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.fields=e,e.sort(kt.comparator)}static empty(){return new Fn([])}unionWith(e){let n=new mt(kt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Fn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return qs(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Ym("Invalid base64 string: "+c):c}}(e);return new Nt(n)}static fromUint8Array(e){const n=function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c}(e);return new Nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nt.EMPTY_BYTE_STRING=new Nt("");const k0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ni(i){if(Fe(!!i),typeof i=="string"){let e=0;const n=k0.exec(i);if(Fe(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(i.seconds),nanos:it(i.nanos)}}function it(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ri(i){return typeof i=="string"?Nt.fromBase64String(i):Nt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ou(i){const e=i.mapValue.fields.__previous_value__;return Nh(e)?ou(e):e}function la(i){const e=ni(i.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N0{constructor(e,n,s,a,c,d,m,y,v){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=v}}class ua{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ii(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Nh(i)?4:V0(i)?9007199254740991:D0(i)?10:11:Ee()}function Jn(i,e){if(i===e)return!0;const n=ii(i);if(n!==ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return la(i).isEqual(la(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=ni(a.timestampValue),m=ni(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return ri(a.bytesValue).isEqual(ri(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return it(a.geoPointValue.latitude)===it(c.geoPointValue.latitude)&&it(a.geoPointValue.longitude)===it(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return it(a.integerValue)===it(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=it(a.doubleValue),m=it(c.doubleValue);return d===m?Ql(d)===Ql(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return qs(i.arrayValue.values||[],e.arrayValue.values||[],Jn);case 10:case 11:return function(a,c){const d=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Bp(d)!==Bp(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!Jn(d[y],m[y])))return!1;return!0}(i,e);default:return Ee()}}function ca(i,e){return(i.values||[]).find(n=>Jn(n,e))!==void 0}function Hs(i,e){if(i===e)return 0;const n=ii(i),s=ii(e);if(n!==s)return Pe(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Pe(i.booleanValue,e.booleanValue);case 2:return function(c,d){const m=it(c.integerValue||c.doubleValue),y=it(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(i,e);case 3:return jp(i.timestampValue,e.timestampValue);case 4:return jp(la(i),la(e));case 5:return Pe(i.stringValue,e.stringValue);case 6:return function(c,d){const m=ri(c),y=ri(d);return m.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),y=d.split("/");for(let v=0;v<m.length&&v<y.length;v++){const I=Pe(m[v],y[v]);if(I!==0)return I}return Pe(m.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Pe(it(c.latitude),it(d.latitude));return m!==0?m:Pe(it(c.longitude),it(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return $p(i.arrayValue,e.arrayValue);case 10:return function(c,d){var m,y,v,I;const N=c.fields||{},M=d.fields||{},B=(m=N.value)===null||m===void 0?void 0:m.arrayValue,Q=(y=M.value)===null||y===void 0?void 0:y.arrayValue,G=Pe(((v=B==null?void 0:B.values)===null||v===void 0?void 0:v.length)||0,((I=Q==null?void 0:Q.values)===null||I===void 0?void 0:I.length)||0);return G!==0?G:$p(B,Q)}(i.mapValue,e.mapValue);case 11:return function(c,d){if(c===Ml.mapValue&&d===Ml.mapValue)return 0;if(c===Ml.mapValue)return 1;if(d===Ml.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),v=d.fields||{},I=Object.keys(v);y.sort(),I.sort();for(let N=0;N<y.length&&N<I.length;++N){const M=Pe(y[N],I[N]);if(M!==0)return M;const B=Hs(m[y[N]],v[I[N]]);if(B!==0)return B}return Pe(y.length,I.length)}(i.mapValue,e.mapValue);default:throw Ee()}}function jp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Pe(i,e);const n=ni(i),s=ni(e),a=Pe(n.seconds,s.seconds);return a!==0?a:Pe(n.nanos,s.nanos)}function $p(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=Hs(n[a],s[a]);if(c)return c}return Pe(n.length,s.length)}function Ws(i){return hh(i)}function hh(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ni(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ri(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return ge.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=hh(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of s)c?c=!1:a+=",",a+=`${d}:${hh(n.fields[d])}`;return a+"}"}(i.mapValue):Ee()}function jl(i){switch(ii(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ou(i);return e?16+jl(e):16;case 5:return 2*i.stringValue.length;case 6:return ri(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+jl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return zi(s.fields,(c,d)=>{a+=c.length+jl(d)}),a}(i.mapValue);default:throw Ee()}}function dh(i){return!!i&&"integerValue"in i}function Dh(i){return!!i&&"arrayValue"in i}function qp(i){return!!i&&"nullValue"in i}function Hp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function $l(i){return!!i&&"mapValue"in i}function D0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ea(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return zi(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=ea(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ea(i.arrayValue.values[n]);return e}return Object.assign({},i)}function V0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.value=e}static empty(){return new En({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!$l(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ea(n)}setAll(e){let n=kt.emptyPath(),s={},a=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}d?s[m.lastSegment()]=ea(d):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());$l(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];$l(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){zi(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new En(ea(this.value))}}function Jm(i){const e=[];return zi(i.fields,(n,s)=>{const a=new kt([n]);if($l(s)){const c=Jm(s.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)}),new Fn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,n,s,a,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Ut(e,0,we.min(),we.min(),we.min(),En.empty(),0)}static newFoundDocument(e,n,s,a){return new Ut(e,1,n,we.min(),s,a,0)}static newNoDocument(e,n){return new Ut(e,2,n,we.min(),we.min(),En.empty(),0)}static newUnknownDocument(e,n){return new Ut(e,3,n,we.min(),we.min(),En.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(we.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=En.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=En.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=we.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n){this.position=e,this.inclusive=n}}function Wp(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],d=i.position[a];if(c.field.isKeyField()?s=ge.comparator(ge.fromName(d.referenceValue),n.key):s=Hs(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function Kp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Jn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n="asc"){this.field=e,this.dir=n}}function x0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{}class ft extends Zm{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new L0(e,n,s):n==="array-contains"?new U0(e,s):n==="in"?new b0(e,s):n==="not-in"?new B0(e,s):n==="array-contains-any"?new z0(e,s):new ft(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new M0(e,s):new F0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Hs(n,this.value)):n!==null&&ii(this.value)===ii(n)&&this.matchesComparison(Hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Zn extends Zm{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Zn(e,n)}matches(e){return eg(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eg(i){return i.op==="and"}function tg(i){return O0(i)&&eg(i)}function O0(i){for(const e of i.filters)if(e instanceof Zn)return!1;return!0}function fh(i){if(i instanceof ft)return i.field.canonicalString()+i.op.toString()+Ws(i.value);if(tg(i))return i.filters.map(e=>fh(e)).join(",");{const e=i.filters.map(n=>fh(n)).join(",");return`${i.op}(${e})`}}function ng(i,e){return i instanceof ft?function(s,a){return a instanceof ft&&s.op===a.op&&s.field.isEqual(a.field)&&Jn(s.value,a.value)}(i,e):i instanceof Zn?function(s,a){return a instanceof Zn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,d,m)=>c&&ng(d,a.filters[m]),!0):!1}(i,e):void Ee()}function rg(i){return i instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Ws(n.value)}`}(i):i instanceof Zn?function(n){return n.op.toString()+" {"+n.getFilters().map(rg).join(" ,")+"}"}(i):"Filter"}class L0 extends ft{constructor(e,n,s){super(e,n,s),this.key=ge.fromName(s.referenceValue)}matches(e){const n=ge.comparator(e.key,this.key);return this.matchesComparison(n)}}class M0 extends ft{constructor(e,n){super(e,"in",n),this.keys=ig("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class F0 extends ft{constructor(e,n){super(e,"not-in",n),this.keys=ig("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ig(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>ge.fromName(s.referenceValue))}class U0 extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Dh(n)&&ca(n.arrayValue,this.value)}}class b0 extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ca(this.value.arrayValue,n)}}class B0 extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ca(this.value.arrayValue,n)}}class z0 extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Dh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ca(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0{constructor(e,n=null,s=[],a=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=d,this.endAt=m,this.ue=null}}function Qp(i,e=null,n=[],s=[],a=null,c=null,d=null){return new j0(i,e,n,s,a,c,d)}function Vh(i){const e=Te(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>fh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),su(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Ws(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Ws(s)).join(",")),e.ue=n}return e.ue}function xh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!x0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!ng(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Kp(i.startAt,e.startAt)&&Kp(i.endAt,e.endAt)}function ph(i){return ge.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(e,n=null,s=[],a=[],c=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $0(i,e,n,s,a,c,d,m){return new au(i,e,n,s,a,c,d,m)}function Oh(i){return new au(i)}function Gp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function q0(i){return i.collectionGroup!==null}function ta(i){const e=Te(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new mt(kt.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(v=>{v.isInequality()&&(m=m.add(v.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Xl(c,s))}),n.has(kt.keyField().canonicalString())||e.ce.push(new Xl(kt.keyField(),s))}return e.ce}function Xn(i){const e=Te(i);return e.le||(e.le=H0(e,ta(i))),e.le}function H0(i,e){if(i.limitType==="F")return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Xl(a.field,c)});const n=i.endAt?new Gl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Gl(i.startAt.position,i.startAt.inclusive):null;return Qp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function mh(i,e,n){return new au(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function lu(i,e){return xh(Xn(i),Xn(e))&&i.limitType===e.limitType}function sg(i){return`${Vh(Xn(i))}|lt:${i.limitType}`}function Us(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>rg(a)).join(", ")}]`),su(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Ws(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Ws(a)).join(",")),`Target(${s})`}(Xn(i))}; limitType=${i.limitType})`}function uu(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):ge.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of ta(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(d,m,y){const v=Wp(d,m,y);return d.inclusive?v<=0:v<0}(s.startAt,ta(s),a)||s.endAt&&!function(d,m,y){const v=Wp(d,m,y);return d.inclusive?v>=0:v>0}(s.endAt,ta(s),a))}(i,e)}function W0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function og(i){return(e,n)=>{let s=!1;for(const a of ta(i)){const c=K0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function K0(i,e,n){const s=i.field.isKeyField()?ge.comparator(e.key,n.key):function(c,d,m){const y=d.data.field(c),v=m.data.field(c);return y!==null&&v!==null?Hs(y,v):Ee()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Xm(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0=new Je(ge.comparator);function Tr(){return Q0}const ag=new Je(ge.comparator);function Jo(...i){let e=ag;for(const n of i)e=e.insert(n.key,n);return e}function lg(i){let e=ag;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Li(){return na()}function ug(){return na()}function na(){return new ji(i=>i.toString(),(i,e)=>i.isEqual(e))}const G0=new Je(ge.comparator),X0=new mt(ge.comparator);function Ae(...i){let e=X0;for(const n of i)e=e.add(n);return e}const Y0=new mt(Pe);function J0(){return Y0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function cg(i){return{integerValue:""+i}}function Z0(i,e){return A0(e)?cg(e):Lh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu{constructor(){this._=void 0}}function eE(i,e,n){return i instanceof ha?function(a,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Nh(c)&&(c=ou(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(n,e):i instanceof da?dg(i,e):i instanceof fa?fg(i,e):function(a,c){const d=hg(a,c),m=Xp(d)+Xp(a.Pe);return dh(d)&&dh(a.Pe)?cg(m):Lh(a.serializer,m)}(i,e)}function tE(i,e,n){return i instanceof da?dg(i,e):i instanceof fa?fg(i,e):n}function hg(i,e){return i instanceof Yl?function(s){return dh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class ha extends cu{}class da extends cu{constructor(e){super(),this.elements=e}}function dg(i,e){const n=pg(e);for(const s of i.elements)n.some(a=>Jn(a,s))||n.push(s);return{arrayValue:{values:n}}}class fa extends cu{constructor(e){super(),this.elements=e}}function fg(i,e){let n=pg(e);for(const s of i.elements)n=n.filter(a=>!Jn(a,s));return{arrayValue:{values:n}}}class Yl extends cu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Xp(i){return it(i.integerValue||i.doubleValue)}function pg(i){return Dh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{constructor(e,n){this.field=e,this.transform=n}}function rE(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof da&&a instanceof da||s instanceof fa&&a instanceof fa?qs(s.elements,a.elements,Jn):s instanceof Yl&&a instanceof Yl?Jn(s.Pe,a.Pe):s instanceof ha&&a instanceof ha}(i.transform,e.transform)}class iE{constructor(e,n){this.version=e,this.transformResults=n}}class _r{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ql(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hu{}function mg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new yg(i.key,_r.none()):new pa(i.key,i.data,_r.none());{const n=i.data,s=En.empty();let a=new mt(kt.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),a=a.add(c)}return new $i(i.key,s,new Fn(a.toArray()),_r.none())}}function sE(i,e,n){i instanceof pa?function(a,c,d){const m=a.value.clone(),y=Jp(a.fieldTransforms,c,d.transformResults);m.setAll(y),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,n):i instanceof $i?function(a,c,d){if(!ql(a.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Jp(a.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(gg(a)),y.setAll(m),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(i,e,n):function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function ra(i,e,n,s){return i instanceof pa?function(c,d,m,y){if(!ql(c.precondition,d))return m;const v=c.value.clone(),I=Zp(c.fieldTransforms,y,d);return v.setAll(I),d.convertToFoundDocument(d.version,v).setHasLocalMutations(),null}(i,e,n,s):i instanceof $i?function(c,d,m,y){if(!ql(c.precondition,d))return m;const v=Zp(c.fieldTransforms,y,d),I=d.data;return I.setAll(gg(c)),I.setAll(v),d.convertToFoundDocument(d.version,I).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(N=>N.field))}(i,e,n,s):function(c,d,m){return ql(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,n)}function oE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=hg(s.transform,a||null);c!=null&&(n===null&&(n=En.empty()),n.set(s.field,c))}return n||null}function Yp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&qs(s,a,(c,d)=>rE(c,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class pa extends hu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class $i extends hu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function gg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Jp(i,e,n){const s=new Map;Fe(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],d=c.transform,m=e.data.field(c.field);s.set(c.field,tE(d,m,n[a]))}return s}function Zp(i,e,n){const s=new Map;for(const a of i){const c=a.transform,d=n.data.field(a.field);s.set(a.field,eE(c,d,e))}return s}class yg extends hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class aE extends hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&sE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=ra(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=ra(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ug();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(a.key)?null:m;const y=mg(d,m);y!==null&&s.set(a.key,y),d.isValidDocument()||d.convertToNoDocument(we.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&qs(this.mutations,e.mutations,(n,s)=>Yp(n,s))&&qs(this.baseMutations,e.baseMutations,(n,s)=>Yp(n,s))}}class Mh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Fe(e.mutations.length===s.length);let a=function(){return G0}();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,s[d].version);return new Mh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,De;function hE(i){switch(i){default:return Ee();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0}}function _g(i){if(i===void 0)return wr("GRPC error has no .code"),K.UNKNOWN;switch(i){case at.OK:return K.OK;case at.CANCELLED:return K.CANCELLED;case at.UNKNOWN:return K.UNKNOWN;case at.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case at.INTERNAL:return K.INTERNAL;case at.UNAVAILABLE:return K.UNAVAILABLE;case at.UNAUTHENTICATED:return K.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case at.NOT_FOUND:return K.NOT_FOUND;case at.ALREADY_EXISTS:return K.ALREADY_EXISTS;case at.PERMISSION_DENIED:return K.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case at.ABORTED:return K.ABORTED;case at.OUT_OF_RANGE:return K.OUT_OF_RANGE;case at.UNIMPLEMENTED:return K.UNIMPLEMENTED;case at.DATA_LOSS:return K.DATA_LOSS;default:return Ee()}}(De=at||(at={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=new Mi([4294967295,4294967295],0);function em(i){const e=dE().encode(i),n=new jm;return n.update(e),new Uint8Array(n.digest())}function tm(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Mi([n,s],0),new Mi([a,c],0)]}class Fh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Zo(`Invalid padding: ${n}`);if(s<0)throw new Zo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Zo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Zo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Mi.fromNumber(this.Te)}Ee(e,n,s){let a=e.add(n.multiply(Mi.fromNumber(s)));return a.compare(fE)===1&&(a=new Mi([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=em(e),[s,a]=tm(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(s,a,c);if(!this.de(d))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Fh(c,a,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.Te===0)return;const n=em(e),[s,a]=tm(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(s,a,c);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Zo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new du(we.min(),a,new Je(Pe),Tr(),Ae())}}class ma{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new ma(s,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class vg{constructor(e,n){this.targetId=e,this.me=n}}class Eg{constructor(e,n,s=Nt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class nm{constructor(){this.fe=0,this.ge=rm(),this.pe=Nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),s=Ae();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:Ee()}}),new ma(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=rm()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class pE{constructor(e){this.Le=e,this.Be=new Map,this.ke=Tr(),this.qe=Fl(),this.Qe=Fl(),this.Ke=new Je(Pe)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:Ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const c=a.target;if(ph(c))if(s===0){const d=new ge(c.path);this.We(n,d,Ut.newNoDocument(d,we.min()))}else Fe(s===1);else{const d=this.Ze(n);if(d!==s){const m=this.Xe(e),y=m?this.et(m,e,d):1;if(y!==0){this.He(n);const v=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,v)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let d,m;try{d=ri(s).toUint8Array()}catch(y){if(y instanceof Ym)return $s("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Fh(d,a,c)}catch(y){return $s(y instanceof Zo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const d=this.Le.nt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),a++)}),a}it(e){const n=new Map;this.Be.forEach((c,d)=>{const m=this.Ye(d);if(m){if(c.current&&ph(m.target)){const y=new ge(m.target.path);this.st(y).has(d)||this.ot(d,y)||this.We(d,y,Ut.newNoDocument(y,e))}c.be&&(n.set(d,c.ve()),c.Ce())}});let s=Ae();this.Qe.forEach((c,d)=>{let m=!0;d.forEachWhile(y=>{const v=this.Ye(y);return!v||v.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(e));const a=new du(e,n,this.Ke,this.ke,s);return this.ke=Tr(),this.qe=Fl(),this.Qe=Fl(),this.Ke=new Je(Pe),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new nm,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new mt(Pe),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(Pe),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new nm),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Fl(){return new Je(ge.comparator)}function rm(){return new Je(ge.comparator)}const mE={asc:"ASCENDING",desc:"DESCENDING"},gE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yE={and:"AND",or:"OR"};class _E{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gh(i,e){return i.useProto3Json||su(e)?e:{value:e}}function Jl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function vE(i,e){return Jl(i,e.toTimestamp())}function Yn(i){return Fe(!!i),we.fromTimestamp(function(n){const s=ni(n);return new pt(s.seconds,s.nanos)}(i))}function Uh(i,e){return yh(i,e).canonicalString()}function yh(i,e){const n=function(a){return new Qe(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Tg(i){const e=Qe.fromString(i);return Fe(Cg(e)),e}function _h(i,e){return Uh(i.databaseId,e.path)}function Jc(i,e){const n=Tg(e);if(n.get(1)!==i.databaseId.projectId)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new he(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new ge(Sg(n))}function Ig(i,e){return Uh(i.databaseId,e)}function EE(i){const e=Tg(i);return e.length===4?Qe.emptyPath():Sg(e)}function vh(i){return new Qe(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Sg(i){return Fe(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function im(i,e,n){return{name:_h(i,e),fields:n.value.mapValue.fields}}function wE(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(v,I){return v.useProto3Json?(Fe(I===void 0||typeof I=="string"),Nt.fromBase64String(I||"")):(Fe(I===void 0||I instanceof Buffer||I instanceof Uint8Array),Nt.fromUint8Array(I||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(v){const I=v.code===void 0?K.UNKNOWN:_g(v.code);return new he(I,v.message||"")}(d);n=new Eg(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Jc(i,s.document.name),c=Yn(s.document.updateTime),d=s.document.createTime?Yn(s.document.createTime):we.min(),m=new En({mapValue:{fields:s.document.fields}}),y=Ut.newFoundDocument(a,c,d,m),v=s.targetIds||[],I=s.removedTargetIds||[];n=new Hl(v,I,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Jc(i,s.document),c=s.readTime?Yn(s.readTime):we.min(),d=Ut.newNoDocument(a,c),m=s.removedTargetIds||[];n=new Hl([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Jc(i,s.document),c=s.removedTargetIds||[];n=new Hl([],c,a,null)}else{if(!("filter"in e))return Ee();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,d=new cE(a,c),m=s.targetId;n=new vg(m,d)}}return n}function TE(i,e){let n;if(e instanceof pa)n={update:im(i,e.key,e.value)};else if(e instanceof yg)n={delete:_h(i,e.key)};else if(e instanceof $i)n={update:im(i,e.key,e.data),updateMask:DE(e.fieldMask)};else{if(!(e instanceof aE))return Ee();n={verify:_h(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof ha)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof da)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof fa)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Yl)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw Ee()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:vE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:Ee()}(i,e.precondition)),n}function IE(i,e){return i&&i.length>0?(Fe(e!==void 0),i.map(n=>function(a,c){let d=a.updateTime?Yn(a.updateTime):Yn(c);return d.isEqual(we.min())&&(d=Yn(c)),new iE(d,a.transformResults||[])}(n,e))):[]}function SE(i,e){return{documents:[Ig(i,e.path)]}}function RE(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=Ig(i,a);const c=function(v){if(v.length!==0)return Ag(Zn.create(v,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const d=function(v){if(v.length!==0)return v.map(I=>function(M){return{field:bs(M.field),direction:PE(M.dir)}}(I))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=gh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ct:n,parent:a}}function AE(i){let e=EE(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Fe(s===1);const I=n.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];n.where&&(c=function(N){const M=Rg(N);return M instanceof Zn&&tg(M)?M.getFilters():[M]}(n.where));let d=[];n.orderBy&&(d=function(N){return N.map(M=>function(Q){return new Xl(Bs(Q.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Q.direction))}(M))}(n.orderBy));let m=null;n.limit&&(m=function(N){let M;return M=typeof N=="object"?N.value:N,su(M)?null:M}(n.limit));let y=null;n.startAt&&(y=function(N){const M=!!N.before,B=N.values||[];return new Gl(B,M)}(n.startAt));let v=null;return n.endAt&&(v=function(N){const M=!N.before,B=N.values||[];return new Gl(B,M)}(n.endAt)),$0(e,a,d,c,m,"F",y,v)}function CE(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Rg(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Bs(n.unaryFilter.field);return ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=Bs(n.unaryFilter.field);return ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=Bs(n.unaryFilter.field);return ft.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Bs(n.unaryFilter.field);return ft.create(d,"!=",{nullValue:"NULL_VALUE"});default:return Ee()}}(i):i.fieldFilter!==void 0?function(n){return ft.create(Bs(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Zn.create(n.compositeFilter.filters.map(s=>Rg(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return Ee()}}(n.compositeFilter.op))}(i):Ee()}function PE(i){return mE[i]}function kE(i){return gE[i]}function NE(i){return yE[i]}function bs(i){return{fieldPath:i.canonicalString()}}function Bs(i){return kt.fromServerFormat(i.fieldPath)}function Ag(i){return i instanceof ft?function(n){if(n.op==="=="){if(Hp(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NAN"}};if(qp(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Hp(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NAN"}};if(qp(n.value))return{unaryFilter:{field:bs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bs(n.field),op:kE(n.op),value:n.value}}}(i):i instanceof Zn?function(n){const s=n.getFilters().map(a=>Ag(a));return s.length===1?s[0]:{compositeFilter:{op:NE(n.op),filters:s}}}(i):Ee()}function DE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Cg(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,n,s,a,c=we.min(),d=we.min(),m=Nt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e){this.ht=e}}function xE(i){const e=AE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?mh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{constructor(){this.ln=new LE}addToCollectionParentIndex(e,n){return this.ln.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(ti.min())}updateCollectionGroup(e,n,s){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class LE{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new mt(Qe.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new mt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(41943040,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ks(0)}static Qn(){return new Ks(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om([i,e],[n,s]){const a=Pe(i,n);return a===0?Pe(e,s):a}class ME{constructor(e){this.Gn=e,this.buffer=new mt(om),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();om(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FE{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Js(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ys(n)}await this.Yn(3e5)})}}class UE{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return j.resolve(iu.oe);const s=new ME(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(sm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sm):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,c,d,m,y,v;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),a=this.params.maximumSequenceNumbersToCollect):a=N,d=Date.now(),this.nthSequenceNumber(e,a))).next(N=>(s=N,m=Date.now(),this.removeTargets(e,s,n))).next(N=>(c=N,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(N=>(v=Date.now(),Fs()<=Ve.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-I}ms
	Determined least recently used ${a} in `+(m-d)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${N} documents in `+(v-y)+`ms
Total Duration: ${v-I}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:N})))}}function bE(i,e){return new UE(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.changes=new ji(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?j.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&ra(s.mutation,a,Fn.empty(),pt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ae()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ae()){const a=Li();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let d=Jo();return c.forEach((m,y)=>{d=d.insert(m,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Li();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ae()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,a){let c=Tr();const d=na(),m=function(){return na()}();return n.forEach((y,v)=>{const I=s.get(v.key);a.has(v.key)&&(I===void 0||I.mutation instanceof $i)?c=c.insert(v.key,v):I!==void 0?(d.set(v.key,I.mutation.getFieldMask()),ra(I.mutation,v,I.mutation.getFieldMask(),pt.now())):d.set(v.key,Fn.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((v,I)=>d.set(v,I)),n.forEach((v,I)=>{var N;return m.set(v,new zE(I,(N=d.get(v))!==null&&N!==void 0?N:null))}),m))}recalculateAndSaveOverlays(e,n){const s=na();let a=new Je((d,m)=>d-m),c=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(y=>{const v=n.get(y);if(v===null)return;let I=s.get(y)||Fn.empty();I=m.applyToLocalView(v,I),s.set(y,I);const N=(a.get(m.batchId)||Ae()).add(y);a=a.insert(m.batchId,N)})}).next(()=>{const d=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),v=y.key,I=y.value,N=ug();I.forEach(M=>{if(!c.has(M)){const B=mg(n.get(M),s.get(M));B!==null&&N.set(M,B),c=c.add(M)}}),d.push(this.documentOverlayCache.saveOverlays(e,v,N))}return j.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(d){return ge.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):q0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):j.resolve(Li());let m=-1,y=c;return d.next(v=>j.forEach(v,(I,N)=>(m<N.largestBatchId&&(m=N.largestBatchId),c.get(I)?j.resolve():this.remoteDocumentCache.getEntry(e,I).next(M=>{y=y.insert(I,M)}))).next(()=>this.populateOverlays(e,v,c)).next(()=>this.computeViews(e,y,v,Ae())).next(I=>({batchId:m,changes:lg(I)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ge(n)).next(s=>{let a=Jo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let d=Jo();return this.indexManager.getCollectionParents(e,c).next(m=>j.forEach(m,y=>{const v=function(N,M){return new au(M,null,N.explicitOrderBy.slice(),N.filters.slice(),N.limit,N.limitType,N.startAt,N.endAt)}(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,v,s,a).next(I=>{I.forEach((N,M)=>{d=d.insert(N,M)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(d=>{c.forEach((y,v)=>{const I=v.getKey();d.get(I)===null&&(d=d.insert(I,Ut.newInvalidDocument(I)))});let m=Jo();return d.forEach((y,v)=>{const I=c.get(y);I!==void 0&&ra(I.mutation,v,Fn.empty(),pt.now()),uu(n,v)&&(m=m.insert(y,v))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return j.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Yn(a.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:xE(a.bundledQuery),readTime:Yn(a.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(){this.overlays=new Je(ge.comparator),this.Er=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Li();return j.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.Tt(e,n,c)}),j.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Er.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(s)),j.resolve()}getOverlaysForCollection(e,n,s){const a=Li(),c=n.length+1,d=new ge(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,v=y.getKey();if(!n.isPrefixOf(v.path))break;v.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return j.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Je((v,I)=>v-I);const d=this.overlays.getIterator();for(;d.hasNext();){const v=d.getNext().value;if(v.getKey().getCollectionGroup()===n&&v.largestBatchId>s){let I=c.get(v.largestBatchId);I===null&&(I=Li(),c=c.insert(v.largestBatchId,I)),I.set(v.getKey(),v)}}const m=Li(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((v,I)=>m.set(v,I)),!(m.size()>=a)););return j.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const d=this.Er.get(a.largestBatchId).delete(s.key);this.Er.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new uE(n,s));let c=this.Er.get(n);c===void 0&&(c=Ae(),this.Er.set(n,c)),this.Er.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(){this.sessionToken=Nt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this.dr=new mt(Tt.Ar),this.Rr=new mt(Tt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const s=new Tt(e,n);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new Tt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new ge(new Qe([])),s=new Tt(n,e),a=new Tt(n,e+1),c=[];return this.Rr.forEachInRange([s,a],d=>{this.gr(d),c.push(d.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new ge(new Qe([])),s=new Tt(n,e),a=new Tt(n,e+1);let c=Ae();return this.Rr.forEachInRange([s,a],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new Tt(e,0),s=this.dr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return ge.comparator(e.key,n.key)||Pe(e.br,n.br)}static Vr(e,n){return Pe(e.br,n.br)||ge.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new mt(Tt.Ar)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new lE(c,n,s,a);this.mutationQueue.push(d);for(const m of a)this.vr=this.vr.add(new Tt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return j.resolve(d)}lookupMutationBatch(e,n){return j.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),c=a<0?0:a;return j.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Tt(n,0),a=new Tt(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],d=>{const m=this.Cr(d.br);c.push(m)}),j.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new mt(Pe);return n.forEach(a=>{const c=new Tt(a,0),d=new Tt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,d],m=>{s=s.add(m.br)})}),j.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;ge.isDocumentKey(c)||(c=c.child(""));const d=new Tt(new ge(c),0);let m=new mt(Pe);return this.vr.forEachWhile(y=>{const v=y.key.path;return!!s.isPrefixOf(v)&&(v.length===a&&(m=m.add(y.br)),!0)},d),j.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Fe(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return j.forEach(n.mutations,a=>{const c=new Tt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,n){const s=new Tt(n,0),a=this.vr.firstAfterOrEqual(s);return j.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e){this.Nr=e,this.docs=function(){return new Je(ge.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,d=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return j.resolve(s?s.document.mutableCopy():Ut.newInvalidDocument(n))}getEntries(e,n){let s=Tr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Ut.newInvalidDocument(a))}),j.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=Tr();const d=n.path,m=new ge(d.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:v,value:{document:I}}=y.getNext();if(!d.isPrefixOf(v.path))break;v.path.length>d.length+1||T0(w0(I),s)<=0||(a.has(I.key)||uu(n,I))&&(c=c.insert(I.key,I.mutableCopy()))}return j.resolve(c)}getAllFromCollectionGroup(e,n,s,a){Ee()}Lr(e,n){return j.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new QE(this)}getSize(e){return j.resolve(this.size)}}class QE extends BE{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),j.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e){this.persistence=e,this.Br=new ji(n=>Vh(n),xh),this.lastRemoteSnapshotVersion=we.min(),this.highestTargetId=0,this.kr=0,this.qr=new bh,this.targetCount=0,this.Qr=Ks.qn()}forEachTarget(e,n){return this.Br.forEach((s,a)=>n(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),j.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ks(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Un(n),j.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Br.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Br.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),j.waitFor(c).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const s=this.Br.get(n)||null;return j.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),j.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),j.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return j.resolve(s)}containsKey(e,n){return j.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.Kr={},this.overlays={},this.$r=new iu(0),this.Ur=!1,this.Ur=!0,this.Wr=new HE,this.referenceDelegate=e(this),this.Gr=new GE(this),this.indexManager=new OE,this.remoteDocumentCache=function(a){return new KE(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new VE(n),this.jr=new $E(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new WE(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){te("MemoryPersistence","Starting transaction:",e);const a=new XE(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,n){return j.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class XE extends S0{constructor(e){super(),this.currentSequenceNumber=e}}class Bh{constructor(e){this.persistence=e,this.Zr=new bh,this.Xr=null}static ei(e){return new Bh(e)}get ti(){if(this.Xr)return this.Xr;throw Ee()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),j.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),j.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ti,s=>{const a=ge.fromPath(s);return this.ni(e,a).next(c=>{c||n.removeEntry(a,we.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return j.or([()=>j.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Zl{constructor(e,n){this.persistence=e,this.ri=new ji(s=>C0(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=bE(this,n)}static ei(e,n){return new Zl(e,n)}Hr(){}Jr(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return j.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?j.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Lr(e,d=>this.ir(e,d,n).next(m=>{m||(s++,c.removeEntry(d,we.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),j.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=jl(e.data.value)),n}ir(e,n,s){return j.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return j.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Ae(),a=Ae();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new zh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return X_()?8:R0(Q_())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Xi(e,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.es(e,n,a,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new YE;return this.ts(e,n,d).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,d,m.size)})}).next(()=>c.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Fs()<=Ve.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Us(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),j.resolve()):(Fs()<=Ve.DEBUG&&te("QueryEngine","Query:",Us(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Fs()<=Ve.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Us(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xn(n))):j.resolve())}Xi(e,n){if(Gp(n))return j.resolve(null);let s=Xn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=mh(n,null,"F"),s=Xn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=Ae(...c);return this.Zi.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const v=this.rs(n,m);return this.ss(n,v,d,y.readTime)?this.Xi(e,mh(n,null,"F")):this.os(e,v,n,y)}))})))}es(e,n,s,a){return Gp(n)||a.isEqual(we.min())?j.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const d=this.rs(n,c);return this.ss(n,d,s,a)?j.resolve(null):(Fs()<=Ve.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Us(n)),this.os(e,d,n,E0(a,-1)).next(m=>m))})}rs(e,n){let s=new mt(og(e));return n.forEach((a,c)=>{uu(e,c)&&(s=s.add(c))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,n,s){return Fs()<=Ve.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Us(n)),this.Zi.getDocumentsMatchingQuery(e,n,ti.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Je(Pe),this.cs=new ji(c=>Vh(c),xh),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jE(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function ew(i,e,n,s){return new ZE(i,e,n,s)}async function kg(i,e){const n=Te(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let y=Ae();for(const v of a){d.push(v.batchId);for(const I of v.mutations)y=y.add(I.key)}for(const v of c){m.push(v.batchId);for(const I of v.mutations)y=y.add(I.key)}return n.localDocuments.getDocuments(s,y).next(v=>({Ts:v,removedBatchIds:d,addedBatchIds:m}))})})}function tw(i,e){const n=Te(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,y,v,I){const N=v.batch,M=N.keys();let B=j.resolve();return M.forEach(Q=>{B=B.next(()=>I.getEntry(y,Q)).next(G=>{const z=v.docVersions.get(Q);Fe(z!==null),G.version.compareTo(z)<0&&(N.applyToRemoteDocument(G,v),G.isValidDocument()&&(G.setReadTime(v.commitVersion),I.addEntry(G)))})}),B.next(()=>m.mutationQueue.removeMutationBatch(y,N))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Ae();for(let v=0;v<m.mutationResults.length;++v)m.mutationResults[v].transformResults.length>0&&(y=y.add(m.batch.mutations[v].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Ng(i){const e=Te(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function nw(i,e){const n=Te(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((I,N)=>{const M=a.get(N);if(!M)return;m.push(n.Gr.removeMatchingKeys(c,I.removedDocuments,N).next(()=>n.Gr.addMatchingKeys(c,I.addedDocuments,N)));let B=M.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(N)!==null?B=B.withResumeToken(Nt.EMPTY_BYTE_STRING,we.min()).withLastLimboFreeSnapshotVersion(we.min()):I.resumeToken.approximateByteSize()>0&&(B=B.withResumeToken(I.resumeToken,s)),a=a.insert(N,B),function(G,z,_e){return G.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8?!0:_e.addedDocuments.size+_e.modifiedDocuments.size+_e.removedDocuments.size>0}(M,B,I)&&m.push(n.Gr.updateTargetData(c,B))});let y=Tr(),v=Ae();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,I))}),m.push(rw(c,d,e.documentUpdates).next(I=>{y=I.Is,v=I.Es})),!s.isEqual(we.min())){const I=n.Gr.getLastRemoteSnapshotVersion(c).next(N=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(I)}return j.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,y,v)).next(()=>y)}).then(c=>(n.us=a,c))}function rw(i,e,n){let s=Ae(),a=Ae();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let d=Tr();return n.forEach((m,y)=>{const v=c.get(m);y.isFoundDocument()!==v.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(we.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!v.isValidDocument()||y.version.compareTo(v.version)>0||y.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):te("LocalStore","Ignoring outdated watch update for ",m,". Current version:",v.version," Watch version:",y.version)}),{Is:d,Es:a}})}function iw(i,e){const n=Te(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function sw(i,e){const n=Te(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(c=>c?(a=c,j.resolve(a)):n.Gr.allocateTargetId(s).next(d=>(a=new Gr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function Eh(i,e,n){const s=Te(i),a=s.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,a))}catch(d){if(!Js(d))throw d;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function am(i,e,n){const s=Te(i);let a=we.min(),c=Ae();return s.persistence.runTransaction("Execute query","readwrite",d=>function(y,v,I){const N=Te(y),M=N.cs.get(I);return M!==void 0?j.resolve(N.us.get(M)):N.Gr.getTargetData(v,I)}(s,d,Xn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(d,m.targetId).next(y=>{c=y})}).next(()=>s._s.getDocumentsMatchingQuery(d,e,n?a:we.min(),n?c:Ae())).next(m=>(ow(s,W0(e),m),{documents:m,ds:c})))}function ow(i,e,n){let s=i.ls.get(e)||we.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.ls.set(e,s)}class lm{constructor(){this.activeTargetIds=J0()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class aw{constructor(){this._o=new lm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new lm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ul=null;function Zc(){return Ul===null?Ul=function(){return 268435456+Math.round(2147483648*Math.random())}():Ul++,"0x"+Ul.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class hw extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(n,s,a,c,d){const m=Zc(),y=this.No(n,s.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${m}:`,y,a);const v={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(v,c,d),this.Bo(n,y,v,a).then(I=>(te("RestConnection",`Received RPC '${n}' ${m}: `,I),I),I=>{throw $s("RestConnection",`RPC '${n}' ${m} failed with error: `,I,"url: ",y,"request:",a),I})}ko(n,s,a,c,d,m){return this.Oo(n,s,a,c,d)}Lo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,d)=>n[d]=c),a&&a.headers.forEach((c,d)=>n[d]=c)}No(n,s){const a=uw[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,s,a){const c=Zc();return new Promise((d,m)=>{const y=new $m;y.setWithCredentials(!0),y.listenOnce(qm.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case zl.NO_ERROR:const I=y.getResponseJson();te(Mt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case zl.TIMEOUT:te(Mt,`RPC '${e}' ${c} timed out`),m(new he(K.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:const N=y.getStatus();if(te(Mt,`RPC '${e}' ${c} failed with status:`,N,"response text:",y.getResponseText()),N>0){let M=y.getResponseJson();Array.isArray(M)&&(M=M[0]);const B=M==null?void 0:M.error;if(B&&B.status&&B.message){const Q=function(z){const _e=z.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(_e)>=0?_e:K.UNKNOWN}(B.status);m(new he(Q,B.message))}else m(new he(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new he(K.UNAVAILABLE,"Connection failed."));break;default:Ee()}}finally{te(Mt,`RPC '${e}' ${c} completed.`)}});const v=JSON.stringify(a);te(Mt,`RPC '${e}' ${c} sending request:`,a),y.send(n,"POST",v,s,15)})}qo(e,n,s){const a=Zc(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Km(),m=Wm(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(y.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Lo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const I=c.join("");te(Mt,`Creating RPC '${e}' stream ${a}: ${I}`,y);const N=d.createWebChannel(I,y);let M=!1,B=!1;const Q=new cw({Eo:z=>{B?te(Mt,`Not sending because RPC '${e}' stream ${a} is closed:`,z):(M||(te(Mt,`Opening RPC '${e}' stream ${a} transport.`),N.open(),M=!0),te(Mt,`RPC '${e}' stream ${a} sending:`,z),N.send(z))},Ao:()=>N.close()}),G=(z,_e,ye)=>{z.listen(_e,de=>{try{ye(de)}catch(fe){setTimeout(()=>{throw fe},0)}})};return G(N,Yo.EventType.OPEN,()=>{B||(te(Mt,`RPC '${e}' stream ${a} transport opened.`),Q.So())}),G(N,Yo.EventType.CLOSE,()=>{B||(B=!0,te(Mt,`RPC '${e}' stream ${a} transport closed`),Q.Do())}),G(N,Yo.EventType.ERROR,z=>{B||(B=!0,$s(Mt,`RPC '${e}' stream ${a} transport errored:`,z),Q.Do(new he(K.UNAVAILABLE,"The operation could not be completed")))}),G(N,Yo.EventType.MESSAGE,z=>{var _e;if(!B){const ye=z.data[0];Fe(!!ye);const de=ye,fe=(de==null?void 0:de.error)||((_e=de[0])===null||_e===void 0?void 0:_e.error);if(fe){te(Mt,`RPC '${e}' stream ${a} received error:`,fe);const oe=fe.status;let le=function(R){const C=at[R];if(C!==void 0)return _g(C)}(oe),P=fe.message;le===void 0&&(le=K.INTERNAL,P="Unknown error status: "+oe+" with message "+fe.message),B=!0,Q.Do(new he(le,P)),N.close()}else te(Mt,`RPC '${e}' stream ${a} received:`,ye),Q.vo(ye)}}),G(m,Hm.STAT_EVENT,z=>{z.stat===ch.PROXY?te(Mt,`RPC '${e}' stream ${a} detected buffering proxy`):z.stat===ch.NOPROXY&&te(Mt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{Q.bo()},0),Q}}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(i){return new _E(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e,n,s,a,c,d,m,y){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Dg(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(wr(n.toString()),wr("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new he(K.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.E_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dw extends Vg{constructor(e,n,s,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,d),this.serializer=c}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=wE(this.serializer,e),s=function(c){if(!("targetChange"in c))return we.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?we.min():d.readTime?Yn(d.readTime):we.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=vh(this.serializer),n.addTarget=function(c,d){let m;const y=d.target;if(m=ph(y)?{documents:SE(c,y)}:{query:RE(c,y).ct},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=wg(c,d.resumeToken);const v=gh(c,d.expectedCount);v!==null&&(m.expectedCount=v)}else if(d.snapshotVersion.compareTo(we.min())>0){m.readTime=Jl(c,d.snapshotVersion.toTimestamp());const v=gh(c,d.expectedCount);v!==null&&(m.expectedCount=v)}return m}(this.serializer,e);const s=CE(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=vh(this.serializer),n.removeTarget=e,this.c_(n)}}class fw extends Vg{constructor(e,n,s,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,d),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,Fe(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=IE(e.writeResults,e.commitTime),s=Yn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=vh(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>TE(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pw extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Oo(e,yh(n,s),a,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new he(K.UNKNOWN,c.toString())})}ko(e,n,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ko(e,yh(n,s),a,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new he(K.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class mw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(wr(n),this.C_=!1):te("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(d=>{s.enqueueAndForget(async()=>{qi(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(y){const v=Te(y);v.k_.add(4),await ga(v),v.K_.set("Unknown"),v.k_.delete(4),await pu(v)}(this))})}),this.K_=new mw(s,a)}}async function pu(i){if(qi(i))for(const e of i.q_)await e(!0)}async function ga(i){for(const e of i.q_)await e(!1)}function xg(i,e){const n=Te(i);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Hh(n)?qh(n):Zs(n).s_()&&$h(n,e))}function jh(i,e){const n=Te(i),s=Zs(n);n.B_.delete(e),s.s_()&&Og(n,e),n.B_.size===0&&(s.s_()?s.a_():qi(n)&&n.K_.set("Unknown"))}function $h(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(we.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Zs(i).V_(e)}function Og(i,e){i.U_.xe(e),Zs(i).m_(e)}function qh(i){i.U_=new pE({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Zs(i).start(),i.K_.F_()}function Hh(i){return qi(i)&&!Zs(i).i_()&&i.B_.size>0}function qi(i){return Te(i).k_.size===0}function Lg(i){i.U_=void 0}async function yw(i){i.K_.set("Online")}async function _w(i){i.B_.forEach((e,n)=>{$h(i,e)})}async function vw(i,e){Lg(i),Hh(i)?(i.K_.O_(e),qh(i)):i.K_.set("Unknown")}async function Ew(i,e,n){if(i.K_.set("Online"),e instanceof Eg&&e.state===2&&e.cause)try{await async function(a,c){const d=c.cause;for(const m of c.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,d),a.B_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await eu(i,s)}else if(e instanceof Hl?i.U_.$e(e):e instanceof vg?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(we.min()))try{const s=await Ng(i.localStore);n.compareTo(s)>=0&&await function(c,d){const m=c.U_.it(d);return m.targetChanges.forEach((y,v)=>{if(y.resumeToken.approximateByteSize()>0){const I=c.B_.get(v);I&&c.B_.set(v,I.withResumeToken(y.resumeToken,d))}}),m.targetMismatches.forEach((y,v)=>{const I=c.B_.get(y);if(!I)return;c.B_.set(y,I.withResumeToken(Nt.EMPTY_BYTE_STRING,I.snapshotVersion)),Og(c,y);const N=new Gr(I.target,y,v,I.sequenceNumber);$h(c,N)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){te("RemoteStore","Failed to raise snapshot:",s),await eu(i,s)}}async function eu(i,e,n){if(!Js(e))throw e;i.k_.add(1),await ga(i),i.K_.set("Offline"),n||(n=()=>Ng(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await pu(i)})}function Mg(i,e){return e().catch(n=>eu(i,n,e))}async function mu(i){const e=Te(i),n=si(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;ww(e);)try{const a=await iw(e.localStore,s);if(a===null){e.L_.length===0&&n.a_();break}s=a.batchId,Tw(e,a)}catch(a){await eu(e,a)}Fg(e)&&Ug(e)}function ww(i){return qi(i)&&i.L_.length<10}function Tw(i,e){i.L_.push(e);const n=si(i);n.s_()&&n.f_&&n.g_(e.mutations)}function Fg(i){return qi(i)&&!si(i).i_()&&i.L_.length>0}function Ug(i){si(i).start()}async function Iw(i){si(i).w_()}async function Sw(i){const e=si(i);for(const n of i.L_)e.g_(n.mutations)}async function Rw(i,e,n){const s=i.L_.shift(),a=Mh.from(s,e,n);await Mg(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await mu(i)}async function Aw(i,e){e&&si(i).f_&&await async function(s,a){if(function(d){return hE(d)&&d!==K.ABORTED}(a.code)){const c=s.L_.shift();si(s).__(),await Mg(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await mu(s)}}(i,e),Fg(i)&&Ug(i)}async function cm(i,e){const n=Te(i);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const s=qi(n);n.k_.add(3),await ga(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await pu(n)}async function Cw(i,e){const n=Te(i);e?(n.k_.delete(2),await pu(n)):e||(n.k_.add(2),await ga(n),n.K_.set("Unknown"))}function Zs(i){return i.W_||(i.W_=function(n,s,a){const c=Te(n);return c.b_(),new dw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:yw.bind(null,i),mo:_w.bind(null,i),po:vw.bind(null,i),R_:Ew.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),Hh(i)?qh(i):i.K_.set("Unknown")):(await i.W_.stop(),Lg(i))})),i.W_}function si(i){return i.G_||(i.G_=function(n,s,a){const c=Te(n);return c.b_(),new fw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:Iw.bind(null,i),po:Aw.bind(null,i),p_:Sw.bind(null,i),y_:Rw.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await mu(i)):(await i.G_.stop(),i.L_.length>0&&(te("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const d=Date.now()+s,m=new Wh(e,n,d,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new he(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kh(i,e){if(wr("AsyncQueue",`${e}: ${i}`),Js(i))return new he(K.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{static emptySet(e){return new zs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||ge.comparator(n.key,s.key):(n,s)=>ge.comparator(n.key,s.key),this.keyedMap=Jo(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(){this.z_=new Je(ge.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):Ee():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Qs{constructor(e,n,s,a,c,d,m,y,v){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=v}static fromInitialDocuments(e,n,s,a,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Qs(e,n,zs.emptySet(n),d,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pw{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class kw{constructor(){this.queries=dm(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=Te(n),c=a.queries;a.queries=dm(),c.forEach((d,m)=>{for(const y of m.J_)y.onError(s)})})(this,new he(K.ABORTED,"Firestore shutting down"))}}function dm(){return new ji(i=>sg(i),lu)}async function Nw(i,e){const n=Te(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new Pw,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(a,!0);break;case 1:c.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const m=Kh(d,`Initialization of query '${Us(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Qh(n)}async function Dw(i,e){const n=Te(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const d=c.J_.indexOf(e);d>=0&&(c.J_.splice(d,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function Vw(i,e){const n=Te(i);let s=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const m of d.J_)m.ta(a)&&(s=!0);d.H_=a}}s&&Qh(n)}function xw(i,e,n){const s=Te(i),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(n);s.queries.delete(e)}function Qh(i){i.X_.forEach(e=>{e.next()})}var wh,fm;(fm=wh||(wh={})).na="default",fm.Cache="cache";class Ow{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Qs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this.key=e}}class Bg{constructor(e){this.key=e}}class Lw{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ae(),this.mutatedKeys=Ae(),this.Va=og(e),this.ma=new zs(this.Va)}get fa(){return this.da}ga(e,n){const s=n?n.pa:new hm,a=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,v=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((I,N)=>{const M=a.get(I),B=uu(this.query,N)?N:null,Q=!!M&&this.mutatedKeys.has(M.key),G=!!B&&(B.hasLocalMutations||this.mutatedKeys.has(B.key)&&B.hasCommittedMutations);let z=!1;M&&B?M.data.isEqual(B.data)?Q!==G&&(s.track({type:3,doc:B}),z=!0):this.ya(M,B)||(s.track({type:2,doc:B}),z=!0,(y&&this.Va(B,y)>0||v&&this.Va(B,v)<0)&&(m=!0)):!M&&B?(s.track({type:0,doc:B}),z=!0):M&&!B&&(s.track({type:1,doc:M}),z=!0,(y||v)&&(m=!0)),z&&(B?(d=d.add(B),c=G?c.add(I):c.delete(I)):(d=d.delete(I),c=c.delete(I)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const I=this.query.limitType==="F"?d.last():d.first();d=d.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{ma:d,pa:s,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const d=e.pa.j_();d.sort((I,N)=>function(B,Q){const G=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee()}};return G(B)-G(Q)}(I.type,N.type)||this.Va(I.doc,N.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],y=this.Ra.size===0&&this.current&&!a?1:0,v=y!==this.Aa;return this.Aa=y,d.length!==0||v?{snapshot:new Qs(this.query,e.ma,c,d,e.mutatedKeys,y===0,v,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new hm,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ae(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new Bg(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new bg(s))}),n}va(e){this.da=e.ds,this.Ra=Ae();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Qs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class Mw{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Fw{constructor(e){this.key=e,this.Fa=!1}}class Uw{constructor(e,n,s,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new ji(m=>sg(m),lu),this.Oa=new Map,this.Na=new Set,this.La=new Je(ge.comparator),this.Ba=new Map,this.ka=new bh,this.qa={},this.Qa=new Map,this.Ka=Ks.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function bw(i,e,n=!0){const s=Wg(i);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await zg(s,e,n,!0),a}async function Bw(i,e){const n=Wg(i);await zg(n,e,!0,!1)}async function zg(i,e,n,s){const a=await sw(i.localStore,Xn(e)),c=a.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await zw(i,e,c,d==="current",a.resumeToken)),i.isPrimaryClient&&n&&xg(i.remoteStore,a),m}async function zw(i,e,n,s,a){i.Ua=(N,M,B)=>async function(G,z,_e,ye){let de=z.view.ga(_e);de.ss&&(de=await am(G.localStore,z.query,!1).then(({documents:P})=>z.view.ga(P,de)));const fe=ye&&ye.targetChanges.get(z.targetId),oe=ye&&ye.targetMismatches.get(z.targetId)!=null,le=z.view.applyChanges(de,G.isPrimaryClient,fe,oe);return mm(G,z.targetId,le.ba),le.snapshot}(i,N,M,B);const c=await am(i.localStore,e,!0),d=new Lw(e,c.ds),m=d.ga(c.documents),y=ma.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),v=d.applyChanges(m,i.isPrimaryClient,y);mm(i,n,v.ba);const I=new Mw(e,n,d);return i.xa.set(e,I),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),v.snapshot}async function jw(i,e,n){const s=Te(i),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(d=>!lu(d,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await Eh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&jh(s.remoteStore,a.targetId),Th(s,a.targetId)}).catch(Ys)):(Th(s,a.targetId),await Eh(s.localStore,a.targetId,!0))}async function $w(i,e){const n=Te(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),jh(n.remoteStore,s.targetId))}async function qw(i,e,n){const s=Yw(i);try{const a=await function(d,m){const y=Te(d),v=pt.now(),I=m.reduce((B,Q)=>B.add(Q.key),Ae());let N,M;return y.persistence.runTransaction("Locally write mutations","readwrite",B=>{let Q=Tr(),G=Ae();return y.hs.getEntries(B,I).next(z=>{Q=z,Q.forEach((_e,ye)=>{ye.isValidDocument()||(G=G.add(_e))})}).next(()=>y.localDocuments.getOverlayedDocuments(B,Q)).next(z=>{N=z;const _e=[];for(const ye of m){const de=oE(ye,N.get(ye.key).overlayedDocument);de!=null&&_e.push(new $i(ye.key,de,Jm(de.value.mapValue),_r.exists(!0)))}return y.mutationQueue.addMutationBatch(B,v,_e,m)}).next(z=>{M=z;const _e=z.applyToLocalDocumentSet(N,G);return y.documentOverlayCache.saveOverlays(B,z.batchId,_e)})}).then(()=>({batchId:M.batchId,changes:lg(N)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,m,y){let v=d.qa[d.currentUser.toKey()];v||(v=new Je(Pe)),v=v.insert(m,y),d.qa[d.currentUser.toKey()]=v}(s,a.batchId,n),await ya(s,a.changes),await mu(s.remoteStore)}catch(a){const c=Kh(a,"Failed to persist write");n.reject(c)}}async function jg(i,e){const n=Te(i);try{const s=await nw(n.localStore,e);e.targetChanges.forEach((a,c)=>{const d=n.Ba.get(c);d&&(Fe(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.Fa=!0:a.modifiedDocuments.size>0?Fe(d.Fa):a.removedDocuments.size>0&&(Fe(d.Fa),d.Fa=!1))}),await ya(n,s,e)}catch(s){await Ys(s)}}function pm(i,e,n){const s=Te(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((c,d)=>{const m=d.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(d,m){const y=Te(d);y.onlineState=m;let v=!1;y.queries.forEach((I,N)=>{for(const M of N.J_)M.ea(m)&&(v=!0)}),v&&Qh(y)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Hw(i,e,n){const s=Te(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Ba.get(e),c=a&&a.key;if(c){let d=new Je(ge.comparator);d=d.insert(c,Ut.newNoDocument(c,we.min()));const m=Ae().add(c),y=new du(we.min(),new Map,new Je(Pe),d,m);await jg(s,y),s.La=s.La.remove(c),s.Ba.delete(e),Gh(s)}else await Eh(s.localStore,e,!1).then(()=>Th(s,e,n)).catch(Ys)}async function Ww(i,e){const n=Te(i),s=e.batch.batchId;try{const a=await tw(n.localStore,e);qg(n,s,null),$g(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ya(n,a)}catch(a){await Ys(a)}}async function Kw(i,e,n){const s=Te(i);try{const a=await function(d,m){const y=Te(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let I;return y.mutationQueue.lookupMutationBatch(v,m).next(N=>(Fe(N!==null),I=N.keys(),y.mutationQueue.removeMutationBatch(v,N))).next(()=>y.mutationQueue.performConsistencyCheck(v)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(v,I,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,I)).next(()=>y.localDocuments.getDocuments(v,I))})}(s.localStore,e);qg(s,e,n),$g(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ya(s,a)}catch(a){await Ys(a)}}function $g(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function qg(i,e,n){const s=Te(i);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function Th(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||Hg(i,s)})}function Hg(i,e){i.Na.delete(e.path.canonicalString());const n=i.La.get(e);n!==null&&(jh(i.remoteStore,n),i.La=i.La.remove(e),i.Ba.delete(n),Gh(i))}function mm(i,e,n){for(const s of n)s instanceof bg?(i.ka.addReference(s.key,e),Qw(i,s)):s instanceof Bg?(te("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||Hg(i,s.key)):Ee()}function Qw(i,e){const n=e.key,s=n.path.canonicalString();i.La.get(n)||i.Na.has(s)||(te("SyncEngine","New document in limbo: "+n),i.Na.add(s),Gh(i))}function Gh(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new ge(Qe.fromString(e)),s=i.Ka.next();i.Ba.set(s,new Fw(n)),i.La=i.La.insert(n,s),xg(i.remoteStore,new Gr(Xn(Oh(n.path)),s,"TargetPurposeLimboResolution",iu.oe))}}async function ya(i,e,n){const s=Te(i),a=[],c=[],d=[];s.xa.isEmpty()||(s.xa.forEach((m,y)=>{d.push(s.Ua(y,e,n).then(v=>{var I;if((v||n)&&s.isPrimaryClient){const N=v?!v.fromCache:(I=n==null?void 0:n.targetChanges.get(y.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(y.targetId,N?"current":"not-current")}if(v){a.push(v);const N=zh.zi(y.targetId,v);c.push(N)}}))}),await Promise.all(d),s.Ma.R_(a),await async function(y,v){const I=Te(y);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>j.forEach(v,M=>j.forEach(M.Wi,B=>I.persistence.referenceDelegate.addReference(N,M.targetId,B)).next(()=>j.forEach(M.Gi,B=>I.persistence.referenceDelegate.removeReference(N,M.targetId,B)))))}catch(N){if(!Js(N))throw N;te("LocalStore","Failed to update sequence numbers: "+N)}for(const N of v){const M=N.targetId;if(!N.fromCache){const B=I.us.get(M),Q=B.snapshotVersion,G=B.withLastLimboFreeSnapshotVersion(Q);I.us=I.us.insert(M,G)}}}(s.localStore,c))}async function Gw(i,e){const n=Te(i);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const s=await kg(n.localStore,e);n.currentUser=e,function(c,d){c.Qa.forEach(m=>{m.forEach(y=>{y.reject(new he(K.CANCELLED,d))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ya(n,s.Ts)}}function Xw(i,e){const n=Te(i),s=n.Ba.get(e);if(s&&s.Fa)return Ae().add(s.key);{let a=Ae();const c=n.Oa.get(e);if(!c)return a;for(const d of c){const m=n.xa.get(d);a=a.unionWith(m.view.fa)}return a}}function Wg(i){const e=Te(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=jg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Xw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Hw.bind(null,e),e.Ma.R_=Vw.bind(null,e.eventManager),e.Ma.Wa=xw.bind(null,e.eventManager),e}function Yw(i){const e=Te(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ww.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Kw.bind(null,e),e}class tu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=fu(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return ew(this.persistence,new JE,e.initialUser,this.serializer)}ja(e){return new Pg(Bh.ei,this.serializer)}za(e){return new aw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tu.provider={build:()=>new tu};class Jw extends tu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Fe(this.persistence.referenceDelegate instanceof Zl);const s=this.persistence.referenceDelegate.garbageCollector;return new FE(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new Pg(s=>Zl.ei(s,n),this.serializer)}}class Ih{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>pm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gw.bind(null,this.syncEngine),await Cw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kw}()}createDatastore(e){const n=fu(e.databaseInfo.databaseId),s=function(c){return new hw(c)}(e.databaseInfo);return function(c,d,m,y){return new pw(c,d,m,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,d,m){return new gw(s,a,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>pm(this.syncEngine,n,0),function(){return um.p()?new um:new lw}())}createSyncEngine(e,n){return function(a,c,d,m,y,v,I){const N=new Uw(a,c,d,m,y,v);return I&&(N.$a=!0),N}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=Te(a);te("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await ga(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ih.provider={build:()=>new Ih};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):wr("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Ft.UNAUTHENTICATED,this.clientId=Gm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{te("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(te("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Kh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function th(i,e){i.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await kg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function gm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await t1(i);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>cm(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>cm(e.remoteStore,a)),i._onlineComponents=e}async function t1(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await th(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===K.FAILED_PRECONDITION||a.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;$s("Error using user provided cache. Falling back to memory cache: "+n),await th(i,new tu)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await th(i,new Jw(void 0));return i._offlineComponents}async function Kg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await gm(i,i._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await gm(i,new Ih))),i._onlineComponents}function n1(i){return Kg(i).then(e=>e.syncEngine)}async function r1(i){const e=await Kg(i),n=e.eventManager;return n.onListen=bw.bind(null,e.syncEngine),n.onUnlisten=jw.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Bw.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$w.bind(null,e.syncEngine),n}function i1(i,e,n={}){const s=new Zr;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,m,y,v){const I=new Zw({next:M=>{I.eu(),d.enqueueAndForget(()=>Dw(c,N));const B=M.docs.has(m);!B&&M.fromCache?v.reject(new he(K.UNAVAILABLE,"Failed to get document because the client is offline.")):B&&M.fromCache&&y&&y.source==="server"?v.reject(new he(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(M)},error:M=>v.reject(M)}),N=new Ow(Oh(m.path),I,{includeMetadataChanges:!0,ua:!0});return Nw(c,N)}(await r1(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(i,e,n){if(!n)throw new he(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function s1(i,e,n,s){if(e===!0&&s===!0)throw new he(K.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function _m(i){if(!ge.isDocumentKey(i))throw new he(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function vm(i){if(ge.isDocumentKey(i))throw new he(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Xh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":Ee()}function nu(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new he(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xh(i);throw new he(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new he(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new he(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}s1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Qg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new he(K.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Em({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new he(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new he(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Em(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new h0;switch(s.type){case"firstParty":return new m0(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new he(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=ym.get(n);s&&(te("ComponentProvider","Removing Datastore"),ym.delete(n),s.terminate())}(this),Promise.resolve()}}function o1(i,e,n,s={}){var a;const c=(i=nu(i,gu))._getSettings(),d=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&$s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=Ft.MOCK_USER;else{m=Vm(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const v=s.mockUserToken.sub||s.mockUserToken.user_id;if(!v)throw new he(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Ft(v)}i._authCredentials=new d0(new Qm(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Yh(this.firestore,e,this._query)}}class wn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ei(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wn(this.firestore,e,this._key)}}class ei extends Yh{constructor(e,n,s){super(e,n,Oh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wn(this.firestore,null,new ge(e))}withConverter(e){return new ei(this.firestore,e,this._path)}}function a1(i,e,...n){if(i=vr(i),Gg("collection","path",e),i instanceof gu){const s=Qe.fromString(e,...n);return vm(s),new ei(i,null,s)}{if(!(i instanceof wn||i instanceof ei))throw new he(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return vm(s),new ei(i.firestore,null,s)}}function Jh(i,e,...n){if(i=vr(i),arguments.length===1&&(e=Gm.newId()),Gg("doc","path",e),i instanceof gu){const s=Qe.fromString(e,...n);return _m(s),new wn(i,null,new ge(s))}{if(!(i instanceof wn||i instanceof ei))throw new he(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Qe.fromString(e,...n));return _m(s),new wn(i.firestore,i instanceof ei?i.converter:null,new ge(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Dg(this,"async_queue_retry"),this.fu=()=>{const s=eh();s&&te("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=eh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=eh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Zr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Js(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw wr("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=Wh.createAndSchedule(this,e,n,s,c=>this.Su(c));return this.du.push(a),a}pu(){this.Au&&Ee()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Zh extends gu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new wm,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new wm(e),this._firestoreClient=void 0,await e}}}function Xg(i,e){const n=typeof i=="object"?i:bm(),s=typeof i=="string"?i:"(default)",a=Fm(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=Nm("firestore");c&&o1(a,...c)}return a}function Yg(i){if(i._terminated)throw new he(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||l1(i),i._firestoreClient}function l1(i){var e,n,s;const a=i._freezeSettings(),c=function(m,y,v,I){return new N0(m,y,v,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,Qg(I.experimentalLongPollingOptions),I.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new e1(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gs(Nt.fromBase64String(e))}catch(n){throw new he(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gs(Nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new he(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new he(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new he(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rd{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=/^__.*__$/;class c1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new $i(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}function Jg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee()}}class id{constructor(e,n,s,a,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new id(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Lu(e),a}Bu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return ru(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Jg(this.Mu)&&u1.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class h1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||fu(e)}$u(e,n,s,a=!1){return new id({Mu:e,methodName:n,Ku:s,path:kt.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function d1(i){const e=i._freezeSettings(),n=fu(i._databaseId);return new h1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function f1(i,e,n,s,a,c={}){const d=i.$u(c.merge||c.mergeFields?2:0,e,n,a);ny("Data must be an object, but it was:",d,s);const m=ey(s,d);let y,v;if(c.merge)y=new Fn(d.fieldMask),v=d.fieldTransforms;else if(c.mergeFields){const I=[];for(const N of c.mergeFields){const M=p1(e,N,n);if(!d.contains(M))throw new he(K.INVALID_ARGUMENT,`Field '${M}' is specified in your field mask but missing from your input data.`);g1(I,M)||I.push(M)}y=new Fn(I),v=d.fieldTransforms.filter(N=>y.covers(N.field))}else y=null,v=d.fieldTransforms;return new c1(new En(m),y,v)}class sd extends td{_toFieldTransform(e){return new nE(e.path,new ha)}isEqual(e){return e instanceof sd}}function Zg(i,e){if(ty(i=vr(i)))return ny("Unsupported field value:",e,i),ey(i,e);if(i instanceof td)return function(s,a){if(!Jg(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let d=0;for(const m of s){let y=Zg(m,a.ku(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=vr(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return Z0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=pt.fromDate(s);return{timestampValue:Jl(a.serializer,c)}}if(s instanceof pt){const c=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Jl(a.serializer,c)}}if(s instanceof nd)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Gs)return{bytesValue:wg(a.serializer,s._byteString)};if(s instanceof wn){const c=a.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw a.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Uh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof rd)return function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.qu("VectorValues must only contain numeric values.");return Lh(m.serializer,y)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${Xh(s)}`)}(i,e)}function ey(i,e){const n={};return Xm(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(i,(s,a)=>{const c=Zg(a,e.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function ty(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pt||i instanceof nd||i instanceof Gs||i instanceof wn||i instanceof td||i instanceof rd)}function ny(i,e,n){if(!ty(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Xh(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function p1(i,e,n){if((e=vr(e))instanceof ed)return e._internalPath;if(typeof e=="string")return ry(i,e);throw ru("Field path arguments must be of type string or ",i,!1,void 0,n)}const m1=new RegExp("[~\\*/\\[\\]]");function ry(i,e,n){if(e.search(m1)>=0)throw ru(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new ed(...e.split("."))._internalPath}catch{throw ru(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function ru(i,e,n,s,a){const c=s&&!s.isEmpty(),d=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${s}`),d&&(y+=` in document ${a}`),y+=")"),new he(K.INVALID_ARGUMENT,m+i+y)}function g1(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new y1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(sy("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class y1 extends iy{data(){return super.data()}}function sy(i,e){return typeof e=="string"?ry(i,e):e instanceof ed?e._internalPath:e._delegate._internalPath}class _1{convertValue(e,n="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ri(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return zi(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(d=>it(d.doubleValue));return new rd(c)}convertGeoPoint(e){return new nd(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=ou(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(la(e));default:return null}}convertTimestamp(e){const n=ni(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Qe.fromString(e);Fe(Cg(s));const a=new ua(s.get(1),s.get(3)),c=new ge(s.popFirst(5));return a.isEqual(n)||wr(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oy extends iy{constructor(e,n,s,a,c,d){super(e,n,s,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new w1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(sy("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class w1 extends oy{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ay(i){i=nu(i,wn);const e=nu(i.firestore,Zh);return i1(Yg(e),i._key).then(n=>R1(e,i,n))}class T1 extends _1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new wn(this.firestore,null,n)}}function I1(i,e){const n=nu(i.firestore,Zh),s=Jh(i),a=v1(i.converter,e);return S1(n,[f1(d1(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,_r.exists(!1))]).then(()=>s)}function S1(i,e){return function(s,a){const c=new Zr;return s.asyncQueue.enqueueAndForget(async()=>qw(await n1(s),a,c)),c.promise}(Yg(i),e)}function R1(i,e,n){const s=n.docs.get(e._key),a=new T1(i);return new oy(i,a,e._key,s,new E1(n.hasPendingWrites,n.fromCache),e.converter)}function A1(){return new sd("serverTimestamp")}(function(e,n=!0){(function(a){Xs=a})(Um),sa(new js("firestore",(s,{instanceIdentifier:a,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new Zh(new f0(s.getProvider("auth-internal")),new y0(s.getProvider("app-check-internal")),function(v,I){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new he(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(v.options.projectId,I)}(d,a),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Jr(Up,"4.7.5",e),Jr(Up,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="firebasestorage.googleapis.com",uy="storageBucket",C1=2*60*1e3,P1=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends Bi{constructor(e,n,s=0){super(nh(e),`Firebase Storage: ${n} (${nh(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function nh(i){return"storage/"+i}function od(){const i="An unknown error occurred, please check the error payload for server response.";return new tt(et.UNKNOWN,i)}function k1(i){return new tt(et.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function N1(i){return new tt(et.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function D1(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt(et.UNAUTHENTICATED,i)}function V1(){return new tt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function x1(i){return new tt(et.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function O1(){return new tt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function L1(){return new tt(et.CANCELED,"User canceled the upload/download.")}function M1(i){return new tt(et.INVALID_URL,"Invalid URL '"+i+"'.")}function F1(i){return new tt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function U1(){return new tt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+uy+"' property when initializing the app?")}function b1(){return new tt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function B1(){return new tt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function z1(i){return new tt(et.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Sh(i){return new tt(et.INVALID_ARGUMENT,i)}function cy(){return new tt(et.APP_DELETED,"The Firebase app was deleted.")}function j1(i){return new tt(et.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ia(i,e){return new tt(et.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Xo(i){throw new tt(et.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(s.path==="")return s;throw F1(e)}static makeFromUrl(e,n){let s=null;const a="([A-Za-z0-9.\\-_]+)";function c(fe){fe.path.charAt(fe.path.length-1)==="/"&&(fe.path_=fe.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+a+d,"i"),y={bucket:1,path:3};function v(fe){fe.path_=decodeURIComponent(fe.path)}const I="v[A-Za-z0-9_]+",N=n.replace(/[.]/g,"\\."),M="(/([^?#]*).*)?$",B=new RegExp(`^https?://${N}/${I}/b/${a}/o${M}`,"i"),Q={bucket:1,path:3},G=n===ly?"(?:storage.googleapis.com|storage.cloud.google.com)":n,z="([^?#]*)",_e=new RegExp(`^https?://${G}/${a}/${z}`,"i"),de=[{regex:m,indices:y,postModify:c},{regex:B,indices:Q,postModify:v},{regex:_e,indices:{bucket:1,path:2},postModify:v}];for(let fe=0;fe<de.length;fe++){const oe=de[fe],le=oe.regex.exec(e);if(le){const P=le[oe.indices.bucket];let w=le[oe.indices.path];w||(w=""),s=new ln(P,w),oe.postModify(s);break}}if(s==null)throw M1(e);return s}}class $1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q1(i,e,n){let s=1,a=null,c=null,d=!1,m=0;function y(){return m===2}let v=!1;function I(...z){v||(v=!0,e.apply(null,z))}function N(z){a=setTimeout(()=>{a=null,i(B,y())},z)}function M(){c&&clearTimeout(c)}function B(z,..._e){if(v){M();return}if(z){M(),I.call(null,z,..._e);return}if(y()||d){M(),I.call(null,z,..._e);return}s<64&&(s*=2);let de;m===1?(m=2,de=0):de=(s+Math.random())*1e3,N(de)}let Q=!1;function G(z){Q||(Q=!0,M(),!v&&(a!==null?(z||(m=2),clearTimeout(a),N(0)):z||(m=1)))}return N(0),c=setTimeout(()=>{d=!0,G(!0)},n),G}function H1(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(i){return i!==void 0}function K1(i){return typeof i=="object"&&!Array.isArray(i)}function ad(i){return typeof i=="string"||i instanceof String}function Tm(i){return ld()&&i instanceof Blob}function ld(){return typeof Blob<"u"}function Im(i,e,n,s){if(s<e)throw Sh(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Sh(`Invalid value for '${i}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(i,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${i}`}function hy(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const a=e(s)+"="+e(i[s]);n=n+a+"&"}return n=n.slice(0,-1),n}var Fi;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Fi||(Fi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(i,e){const n=i>=500&&i<600,a=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||a||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,s,a,c,d,m,y,v,I,N,M=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=a,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=v,this.progressCallback_=I,this.connectionFactory_=N,this.retry=M,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((B,Q)=>{this.resolve_=B,this.reject_=Q,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new bl(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const y=m.loaded,v=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,v)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Fi.NO_ERROR,y=c.getStatus();if(!m||Q1(y,this.additionalRetryCodes_)&&this.retry){const I=c.getErrorCode()===Fi.ABORT;s(!1,new bl(!1,null,I));return}const v=this.successCodes_.indexOf(y)!==-1;s(!0,new bl(v,c))})},n=(s,a)=>{const c=this.resolve_,d=this.reject_,m=a.connection;if(a.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());W1(y)?c(y):c()}catch(y){d(y)}else if(m!==null){const y=od();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(a.canceled){const y=this.appDelete_?cy():L1();d(y)}else{const y=O1();d(y)}};this.canceled_?n(!1,new bl(!1,null,!0)):this.backoffId_=q1(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&H1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class bl{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function X1(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function Y1(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function J1(i,e){e&&(i["X-Firebase-GMPID"]=e)}function Z1(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function eT(i,e,n,s,a,c,d=!0){const m=hy(i.urlParams),y=i.url+m,v=Object.assign({},i.headers);return J1(v,e),X1(v,n),Y1(v,c),Z1(v,s),new G1(y,i.method,v,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,a,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tT(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function nT(...i){const e=tT();if(e!==void 0){const n=new e;for(let s=0;s<i.length;s++)n.append(i[s]);return n.getBlob()}else{if(ld())return new Blob(i);throw new tt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function rT(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iT(i){if(typeof atob>"u")throw z1("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rh{constructor(e,n){this.data=e,this.contentType=n||null}}function sT(i,e){switch(i){case Gn.RAW:return new rh(dy(e));case Gn.BASE64:case Gn.BASE64URL:return new rh(fy(i,e));case Gn.DATA_URL:return new rh(aT(e),lT(e))}throw od()}function dy(i){const e=[];for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<i.length-1&&(i.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=i.charCodeAt(++n);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function oT(i){let e;try{e=decodeURIComponent(i)}catch{throw ia(Gn.DATA_URL,"Malformed data URL.")}return dy(e)}function fy(i,e){switch(i){case Gn.BASE64:{const a=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(a||c)throw ia(i,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Gn.BASE64URL:{const a=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(a||c)throw ia(i,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=iT(e)}catch(a){throw a.message.includes("polyfill")?a:ia(i,"Invalid character found")}const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}class py{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ia(Gn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=uT(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function aT(i){const e=new py(i);return e.base64?fy(Gn.BASE64,e.rest):oT(e.rest)}function lT(i){return new py(i).contentType}function uT(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){let s=0,a="";Tm(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,n){if(Tm(this.data_)){const s=this.data_,a=rT(s,e,n);return a===null?null:new Qr(a)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Qr(s,!0)}}static getBlob(...e){if(ld()){const n=e.map(s=>s instanceof Qr?s.data_:s);return new Qr(nT.apply(null,n))}else{const n=e.map(d=>ad(d)?sT(Gn.RAW,d).data:d.data_);let s=0;n.forEach(d=>{s+=d.byteLength});const a=new Uint8Array(s);let c=0;return n.forEach(d=>{for(let m=0;m<d.length;m++)a[c++]=d[m]}),new Qr(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(i){let e;try{e=JSON.parse(i)}catch{return null}return K1(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function hT(i,e){const n=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?n:i+"/"+n}function gy(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(i,e){return e}class $t{constructor(e,n,s,a){this.server=e,this.local=n||e,this.writable=!!s,this.xform=a||dT}}let Bl=null;function fT(i){return!ad(i)||i.length<2?i:gy(i)}function yy(){if(Bl)return Bl;const i=[];i.push(new $t("bucket")),i.push(new $t("generation")),i.push(new $t("metageneration")),i.push(new $t("name","fullPath",!0));function e(c,d){return fT(d)}const n=new $t("name");n.xform=e,i.push(n);function s(c,d){return d!==void 0?Number(d):d}const a=new $t("size");return a.xform=s,i.push(a),i.push(new $t("timeCreated")),i.push(new $t("updated")),i.push(new $t("md5Hash",null,!0)),i.push(new $t("cacheControl",null,!0)),i.push(new $t("contentDisposition",null,!0)),i.push(new $t("contentEncoding",null,!0)),i.push(new $t("contentLanguage",null,!0)),i.push(new $t("contentType",null,!0)),i.push(new $t("metadata","customMetadata",!0)),Bl=i,Bl}function pT(i,e){function n(){const s=i.bucket,a=i.fullPath,c=new ln(s,a);return e._makeStorageReference(c)}Object.defineProperty(i,"ref",{get:n})}function mT(i,e,n){const s={};s.type="file";const a=n.length;for(let c=0;c<a;c++){const d=n[c];s[d.local]=d.xform(s,e[d.server])}return pT(s,i),s}function _y(i,e,n){const s=my(e);return s===null?null:mT(i,s,n)}function gT(i,e,n,s){const a=my(e);if(a===null||!ad(a.downloadTokens))return null;const c=a.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(v=>{const I=i.bucket,N=i.fullPath,M="/b/"+d(I)+"/o/"+d(N),B=ud(M,n,s),Q=hy({alt:"media",token:v});return B+Q})[0]}function yT(i,e){const n={},s=e.length;for(let a=0;a<s;a++){const c=e[a];c.writable&&(n[c.server]=i[c.local])}return JSON.stringify(n)}class vy{constructor(e,n,s,a){this.url=e,this.method=n,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ey(i){if(!i)throw od()}function _T(i,e){function n(s,a){const c=_y(i,a,e);return Ey(c!==null),c}return n}function vT(i,e){function n(s,a){const c=_y(i,a,e);return Ey(c!==null),gT(c,a,i.host,i._protocol)}return n}function wy(i){function e(n,s){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=V1():a=D1():n.getStatus()===402?a=N1(i.bucket):n.getStatus()===403?a=x1(i.path):a=s,a.status=n.getStatus(),a.serverResponse=s.serverResponse,a}return e}function ET(i){const e=wy(i);function n(s,a){let c=e(s,a);return s.getStatus()===404&&(c=k1(i.path)),c.serverResponse=a.serverResponse,c}return n}function wT(i,e,n){const s=e.fullServerUrl(),a=ud(s,i.host,i._protocol),c="GET",d=i.maxOperationRetryTime,m=new vy(a,c,vT(i,n),d);return m.errorHandler=ET(e),m}function TT(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function IT(i,e,n){const s=Object.assign({},n);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=TT(null,e)),s}function ST(i,e,n,s,a){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let de="";for(let fe=0;fe<2;fe++)de=de+Math.random().toString().slice(2);return de}const y=m();d["Content-Type"]="multipart/related; boundary="+y;const v=IT(e,s,a),I=yT(v,n),N="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+I+`\r
--`+y+`\r
Content-Type: `+v.contentType+`\r
\r
`,M=`\r
--`+y+"--",B=Qr.getBlob(N,s,M);if(B===null)throw b1();const Q={name:v.fullPath},G=ud(c,i.host,i._protocol),z="POST",_e=i.maxUploadRetryTime,ye=new vy(G,z,_T(i,n),_e);return ye.urlParams=Q,ye.headers=d,ye.body=B.uploadData(),ye.errorHandler=wy(e),ye}class RT{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Fi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Fi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Fi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,a){if(this.sent_)throw Xo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class AT extends RT{initXhr(){this.xhr_.responseType="text"}}function Ty(){return new AT}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new bi(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gy(this._location.path)}get storage(){return this._service}get parent(){const e=cT(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new bi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw j1(e)}}function CT(i,e,n){i._throwIfRoot("uploadBytes");const s=ST(i.storage,i._location,yy(),new Qr(e,!0),n);return i.storage.makeRequestWithTokens(s,Ty).then(a=>({metadata:a,ref:i}))}function PT(i){i._throwIfRoot("getDownloadURL");const e=wT(i.storage,i._location,yy());return i.storage.makeRequestWithTokens(e,Ty).then(n=>{if(n===null)throw B1();return n})}function kT(i,e){const n=hT(i._location.path,e),s=new ln(i._location.bucket,n);return new bi(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(i){return/^[A-Za-z]+:\/\//.test(i)}function DT(i,e){return new bi(i,e)}function Iy(i,e){if(i instanceof cd){const n=i;if(n._bucket==null)throw U1();const s=new bi(n,n._bucket);return e!=null?Iy(s,e):s}else return e!==void 0?kT(i,e):i}function VT(i,e){if(e&&NT(e)){if(i instanceof cd)return DT(i,e);throw Sh("To use ref(service, url), the first argument must be a Storage instance.")}else return Iy(i,e)}function Sm(i,e){const n=e==null?void 0:e[uy];return n==null?null:ln.makeFromBucketSpec(n,i)}function xT(i,e,n,s={}){i.host=`${e}:${n}`,i._protocol="http";const{mockUserToken:a}=s;a&&(i._overrideAuthToken=typeof a=="string"?a:Vm(a,i.app.options.projectId))}class cd{constructor(e,n,s,a,c){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=a,this._firebaseVersion=c,this._bucket=null,this._host=ly,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=C1,this._maxUploadRetryTime=P1,this._requests=new Set,a!=null?this._bucket=ln.makeFromBucketSpec(a,this._host):this._bucket=Sm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=Sm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Im("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Im("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new bi(this,e)}_makeRequest(e,n,s,a,c=!0){if(this._deleted)return new $1(cy());{const d=eT(e,this._appId,s,a,n,this._firebaseVersion,c);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,a).getPromise()}}const Rm="@firebase/storage",Am="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy="storage";function OT(i,e,n){return i=vr(i),CT(i,e,n)}function LT(i){return i=vr(i),PT(i)}function MT(i,e){return i=vr(i),VT(i,e)}function FT(i=bm(),e){i=vr(i);const s=Fm(i,Sy).getImmediate({identifier:e}),a=Nm("storage");return a&&UT(s,...a),s}function UT(i,e,n,s={}){xT(i,e,n,s)}function bT(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),a=i.getProvider("app-check-internal");return new cd(n,s,a,e,Um)}function BT(){sa(new js(Sy,bT,"PUBLIC").setMultipleInstances(!0)),Jr(Rm,Am,""),Jr(Rm,Am,"esm2017")}BT();const zT="_container_bwnkz_3",jT="_form_bwnkz_17",$T="_nfcButton_bwnkz_41",qT="_scanButton_bwnkz_41",HT="_selfieButton_bwnkz_41",WT="_submitButton_bwnkz_41",KT="_scannerContainer_bwnkz_67",QT="_scanner_bwnkz_67",GT="_modalOverlay_bwnkz_97",XT="_modalContent_bwnkz_125",YT="_status_bwnkz_149",JT="_statusWarning_bwnkz_167",ZT="_statusInfo_bwnkz_181",eI="_statusSuccess_bwnkz_195",tI="_statusError_bwnkz_209",nI="_pulse_bwnkz_1",vn={container:zT,form:jT,nfcButton:$T,scanButton:qT,selfieButton:HT,submitButton:WT,scannerContainer:KT,scanner:QT,modalOverlay:GT,modalContent:XT,status:YT,statusWarning:JT,statusInfo:ZT,statusSuccess:eI,statusError:tI,"animate-pulse":"_animate-pulse_bwnkz_247",pulse:nI},rI={apiKey:"AIzaSyC8tDVbDIrKuylsyF3rbDSSPlzsEHXqZIs",authDomain:"online-attendance-21f95.firebaseapp.com",databaseURL:"https://online-attendance-21f95-default-rtdb.firebaseio.com",projectId:"online-attendance-21f95",storageBucket:"online-attendance-21f95.appspot.com",messagingSenderId:"756223518392",appId:"1:756223518392:web:5e8d28c78f7eefb8be764d"},Ry=Ph(rI),Cm=Xg(Ry),iI=FT(Ry),sI=({message:i,type:e,isProcessing:n})=>{if(!i)return null;const s=()=>{switch(e){case"warning":return vn.statusWarning;case"error":return vn.statusError;case"success":return vn.statusSuccess;default:return vn.statusInfo}};return ue.jsx("div",{className:vn.modalOverlay,children:ue.jsx("div",{className:vn.modalContent,children:ue.jsx("div",{className:`${vn.status} ${s()} ${n?vn["animate-pulse"]:""}`,children:i})})})},oI=()=>{const[i,e]=an.useState({studentName:"",email:"",course:"",campus:"",studentId:""}),[n,s]=an.useState(null),[a,c]=an.useState(!1),[d,m]=an.useState(""),[y,v]=an.useState(null),[I,N]=an.useState("info"),M=an.useRef(null),B=(oe,le="info")=>{m(oe),N(le)};an.useEffect(()=>()=>{y&&y.abort()},[y]);const Q=oe=>{const le=oe.target.files[0];s(le)},G=async()=>{if(!n)return null;m("Uploading selfie...");const oe=i.email.replace(/[@.]/g,"_"),le=MT(iI,`users/${oe}/profile/${n.name}`),P=await OT(le,n);return await LT(P.ref)},z=async()=>{if(!("NDEFReader"in window))throw new Error("NFC not supported on this device");try{c(!0),m("Waiting for NFC tag...");const oe=new NDEFReader;return v(oe),await oe.scan(),new Promise((le,P)=>{const w=async({serialNumber:R})=>{try{if(m("Checking NFC authorization..."),!await ye(R)){P(new Error("Unauthorized NFC tag"));return}m("Uploading data...");const D=await G(),V={...i,nfcSerialNumber:R,selfieUrl:D,createdAt:A1()};m("Saving to database...");const S=await I1(a1(Cm,"RegisteredStudent"),V);m("Writing to NFC tag...");try{await oe.write({records:[{recordType:"text",data:new TextEncoder().encode(S.id)}]}),m("Verifying NFC write..."),await _e(S.id,oe)}catch(Ge){console.error("NFC Write Error:",Ge),m("Attempting alternative write method...");try{await navigator.nfc.push({type:"NDEF",records:[{type:"text/plain",payload:S.id}]})}catch(gt){console.error("Fallback NFC Write Error:",gt),m("NFC write failed, but registration saved")}}oe.addEventListener("reading",w,{once:!0}),le(S.id)}catch(C){oe.removeEventListener("reading",w),P(C)}};oe.addEventListener("reading",w,{once:!0})})}catch(oe){throw B(oe.message,"error"),oe}},_e=async(oe,le)=>new Promise((P,w)=>{const R=setTimeout(()=>{w(new Error("Verification timeout"))},5e3);le.addEventListener("reading",({message:C})=>{clearTimeout(R),C.records.some(V=>V.recordType==="text"&&new TextDecoder().decode(V.data)===oe)?P():w(new Error("NFC write verification failed"))},{once:!0})}),ye=async oe=>{try{const le=Jh(Cm,"Toregistered",oe);return(await ay(le)).exists()}catch(le){return console.error("NFC Authorization Check Error:",le),!1}},de=()=>{e({studentName:"",email:"",course:"",campus:"",studentId:""}),s(null),m(""),M.current&&(M.current.value="")},fe=async oe=>{if(oe.preventDefault(),!("NDEFReader"in window)){B("NFC is not supported on this device","warning");return}if(window.confirm("Approach NFC tag to complete registration"))try{const le=await z();B("Registration completed successfully!","success"),setTimeout(()=>{B(""),de()},3e3)}catch(le){console.error("Registration Error:",le),B(`Registration failed: ${le.message}`,"error")}finally{c(!1),y&&(y.abort(),v(null))}};return ue.jsxs("div",{className:vn.container,children:[ue.jsx("h1",{children:"Student Registration"}),(!("NDEFReader"in window)||d)&&ue.jsx(sI,{message:"NDEFReader"in window?d:"NFC is not supported on this device",type:"NDEFReader"in window?I:"warning",isProcessing:a}),ue.jsxs("form",{onSubmit:fe,className:vn.form,children:[ue.jsx("input",{type:"text",placeholder:"Student Name",value:i.studentName,onChange:oe=>e({...i,studentName:oe.target.value}),required:!0,disabled:a}),ue.jsx("input",{type:"email",placeholder:"Email",value:i.email,onChange:oe=>e({...i,email:oe.target.value}),required:!0,disabled:a}),ue.jsx("input",{type:"text",placeholder:"Course",value:i.course,onChange:oe=>e({...i,course:oe.target.value}),required:!0,disabled:a}),ue.jsxs("select",{value:i.campus,onChange:oe=>e({...i,campus:oe.target.value}),required:!0,disabled:a,children:[ue.jsx("option",{value:"",children:"Select Campus"}),ue.jsx("option",{value:"Main",children:"Main Campus"}),ue.jsx("option",{value:"North",children:"North Campus"}),ue.jsx("option",{value:"Online",children:"Online Campus"})]}),ue.jsx("input",{type:"text",placeholder:"Student ID",value:i.studentId,onChange:oe=>e({...i,studentId:oe.target.value}),required:!0,disabled:a}),n?ue.jsxs("p",{children:["Selfie Captured: ",n.name]}):ue.jsxs(ue.Fragment,{children:[ue.jsx("input",{type:"file",ref:M,onChange:Q,accept:"image/*",capture:"user",style:{display:"none"},disabled:a}),ue.jsx("button",{type:"button",onClick:()=>M.current.click(),className:vn.selfieButton,disabled:a,children:"Take Selfie"})]}),ue.jsx("button",{type:"submit",className:`${vn.submitButton} ${a?"animate-pulse":""}`,disabled:!i.studentId||!n||a||!("NDEFReader"in window),children:a?"Processing...":"Complete Registration with NFC"})]})]})},aI="_container_75pyf_1",lI="_status_75pyf_33",uI="_reading_75pyf_51",cI="_pulse_75pyf_1",hI="_error_75pyf_59",dI="_studentInfo_75pyf_77",fI="_infoGrid_75pyf_107",pI="_infoRow_75pyf_117",mI="_selfie_75pyf_149",gI="_controls_75pyf_171",yI="_button_75pyf_185",_I="_readButton_75pyf_213",vI="_resetButton_75pyf_231",Ct={container:aI,status:lI,reading:uI,pulse:cI,error:hI,studentInfo:dI,infoGrid:fI,infoRow:pI,selfie:mI,controls:gI,button:yI,readButton:_I,resetButton:vI},EI={apiKey:"AIzaSyC8tDVbDIrKuylsyF3rbDSSPlzsEHXqZIs",authDomain:"online-attendance-21f95.firebaseapp.com",databaseURL:"https://online-attendance-21f95-default-rtdb.firebaseio.com",projectId:"online-attendance-21f95",storageBucket:"online-attendance-21f95.appspot.com",messagingSenderId:"756223518392",appId:"1:756223518392:web:5e8d28c78f7eefb8be764d"},wI=Ph(EI),TI=Xg(wI),II=()=>{const[i,e]=an.useState(null),[n,s]=an.useState(""),[a,c]=an.useState(!1),[d,m]=an.useState(null),y=async()=>{if(!("NDEFReader"in window)){m("NFC is not supported on this device");return}try{c(!0),s("Waiting for NFC card..."),m(null);const I=new NDEFReader;await I.scan(),I.addEventListener("reading",async({message:N})=>{try{const M=N.records.find(z=>z.recordType==="text");if(!M)throw new Error("Invalid NFC card: No student data found");const B=new TextDecoder().decode(M.data);s("Retrieving student data...");const Q=Jh(TI,"RegisteredStudent",B),G=await ay(Q);if(G.exists()){const z=G.data();e(z),s("Student data retrieved successfully")}else throw new Error("No student record found for this card")}catch(M){m(M.message),e(null)}finally{c(!1),I.stop()}})}catch(I){m(I.message),c(!1)}},v=()=>{e(null),s(""),m(null),c(!1)};return ue.jsxs("div",{className:Ct.container,children:[ue.jsx("h1",{children:"Student NFC Reader"}),n&&ue.jsx("div",{className:`${Ct.status} ${a?Ct.reading:""}`,children:n}),d&&ue.jsx("div",{className:Ct.error,children:d}),i&&ue.jsxs("div",{className:Ct.studentInfo,children:[ue.jsx("h2",{children:"Student Information"}),ue.jsxs("div",{className:Ct.infoGrid,children:[ue.jsxs("div",{className:Ct.infoRow,children:[ue.jsx("span",{children:"Name:"}),ue.jsx("span",{children:i.studentName})]}),ue.jsxs("div",{className:Ct.infoRow,children:[ue.jsx("span",{children:"Student ID:"}),ue.jsx("span",{children:i.studentId})]}),ue.jsxs("div",{className:Ct.infoRow,children:[ue.jsx("span",{children:"Email:"}),ue.jsx("span",{children:i.email})]}),ue.jsxs("div",{className:Ct.infoRow,children:[ue.jsx("span",{children:"Course:"}),ue.jsx("span",{children:i.course})]}),ue.jsxs("div",{className:Ct.infoRow,children:[ue.jsx("span",{children:"Campus:"}),ue.jsx("span",{children:i.campus})]}),i.selfieUrl&&ue.jsx("div",{className:Ct.selfie,children:ue.jsx("img",{src:i.selfieUrl,alt:"Student"})})]})]}),ue.jsxs("div",{className:Ct.controls,children:[ue.jsx("button",{onClick:y,disabled:a||!("NDEFReader"in window),className:`${Ct.button} ${Ct.readButton}`,children:a?"Reading...":"Scan NFC Card"}),i&&ue.jsx("button",{onClick:v,className:`${Ct.button} ${Ct.resetButton}`,children:"Clear & Scan New Card"})]})]})};function SI(){return ue.jsxs(ue.Fragment,{children:[ue.jsx(oI,{}),ue.jsx(II,{})]})}F_.createRoot(document.getElementById("root")).render(ue.jsx(an.StrictMode,{children:ue.jsx(SI,{})}));
