(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(a){if(a.ep)return;a.ep=!0;const c=n(a);fetch(a.href,c)}})();var jc={exports:{}},Ko={},$c={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mp;function R_(){if(mp)return Se;mp=1;var i=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),d=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.iterator;function F(x){return x===null||typeof x!="object"?null:(x=D&&x[D]||x["@@iterator"],typeof x=="function"?x:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},G=Object.assign,X={};function B(x,$,ae){this.props=x,this.context=$,this.refs=X,this.updater=ae||z}B.prototype.isReactComponent={},B.prototype.setState=function(x,$){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,$,"setState")},B.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function ye(){}ye.prototype=B.prototype;function ge(x,$,ae){this.props=x,this.context=$,this.refs=X,this.updater=ae||z}var he=ge.prototype=new ye;he.constructor=ge,G(he,B.prototype),he.isPureReactComponent=!0;var de=Array.isArray,oe=Object.prototype.hasOwnProperty,le={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function w(x,$,ae){var Te,Ie={},Pe=null,Oe=null;if($!=null)for(Te in $.ref!==void 0&&(Oe=$.ref),$.key!==void 0&&(Pe=""+$.key),$)oe.call($,Te)&&!P.hasOwnProperty(Te)&&(Ie[Te]=$[Te]);var Le=arguments.length-2;if(Le===1)Ie.children=ae;else if(1<Le){for(var Be=Array(Le),yt=0;yt<Le;yt++)Be[yt]=arguments[yt+2];Ie.children=Be}if(x&&x.defaultProps)for(Te in Le=x.defaultProps,Le)Ie[Te]===void 0&&(Ie[Te]=Le[Te]);return{$$typeof:i,type:x,key:Pe,ref:Oe,props:Ie,_owner:le.current}}function A(x,$){return{$$typeof:i,type:x.type,key:$,ref:x.ref,props:x.props,_owner:x._owner}}function C(x){return typeof x=="object"&&x!==null&&x.$$typeof===i}function N(x){var $={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ae){return $[ae]})}var V=/\/+/g;function S(x,$){return typeof x=="object"&&x!==null&&x.key!=null?N(""+x.key):$.toString(36)}function Ge(x,$,ae,Te,Ie){var Pe=typeof x;(Pe==="undefined"||Pe==="boolean")&&(x=null);var Oe=!1;if(x===null)Oe=!0;else switch(Pe){case"string":case"number":Oe=!0;break;case"object":switch(x.$$typeof){case i:case e:Oe=!0}}if(Oe)return Oe=x,Ie=Ie(Oe),x=Te===""?"."+S(Oe,0):Te,de(Ie)?(ae="",x!=null&&(ae=x.replace(V,"$&/")+"/"),Ge(Ie,$,ae,"",function(yt){return yt})):Ie!=null&&(C(Ie)&&(Ie=A(Ie,ae+(!Ie.key||Oe&&Oe.key===Ie.key?"":(""+Ie.key).replace(V,"$&/")+"/")+x)),$.push(Ie)),1;if(Oe=0,Te=Te===""?".":Te+":",de(x))for(var Le=0;Le<x.length;Le++){Pe=x[Le];var Be=Te+S(Pe,Le);Oe+=Ge(Pe,$,ae,Be,Ie)}else if(Be=F(x),typeof Be=="function")for(x=Be.call(x),Le=0;!(Pe=x.next()).done;)Pe=Pe.value,Be=Te+S(Pe,Le++),Oe+=Ge(Pe,$,ae,Be,Ie);else if(Pe==="object")throw $=String(x),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return Oe}function gt(x,$,ae){if(x==null)return x;var Te=[],Ie=0;return Ge(x,Te,"","",function(Pe){return $.call(ae,Pe,Ie++)}),Te}function Nt(x){if(x._status===-1){var $=x._result;$=$(),$.then(function(ae){(x._status===0||x._status===-1)&&(x._status=1,x._result=ae)},function(ae){(x._status===0||x._status===-1)&&(x._status=2,x._result=ae)}),x._status===-1&&(x._status=0,x._result=$)}if(x._status===1)return x._result.default;throw x._result}var Ue={current:null},J={transition:null},ue={ReactCurrentDispatcher:Ue,ReactCurrentBatchConfig:J,ReactCurrentOwner:le};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Se.Children={map:gt,forEach:function(x,$,ae){gt(x,function(){$.apply(this,arguments)},ae)},count:function(x){var $=0;return gt(x,function(){$++}),$},toArray:function(x){return gt(x,function($){return $})||[]},only:function(x){if(!C(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},Se.Component=B,Se.Fragment=n,Se.Profiler=a,Se.PureComponent=ge,Se.StrictMode=s,Se.Suspense=y,Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ue,Se.act=ee,Se.cloneElement=function(x,$,ae){if(x==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+x+".");var Te=G({},x.props),Ie=x.key,Pe=x.ref,Oe=x._owner;if($!=null){if($.ref!==void 0&&(Pe=$.ref,Oe=le.current),$.key!==void 0&&(Ie=""+$.key),x.type&&x.type.defaultProps)var Le=x.type.defaultProps;for(Be in $)oe.call($,Be)&&!P.hasOwnProperty(Be)&&(Te[Be]=$[Be]===void 0&&Le!==void 0?Le[Be]:$[Be])}var Be=arguments.length-2;if(Be===1)Te.children=ae;else if(1<Be){Le=Array(Be);for(var yt=0;yt<Be;yt++)Le[yt]=arguments[yt+2];Te.children=Le}return{$$typeof:i,type:x.type,key:Ie,ref:Pe,props:Te,_owner:Oe}},Se.createContext=function(x){return x={$$typeof:d,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},x.Provider={$$typeof:c,_context:x},x.Consumer=x},Se.createElement=w,Se.createFactory=function(x){var $=w.bind(null,x);return $.type=x,$},Se.createRef=function(){return{current:null}},Se.forwardRef=function(x){return{$$typeof:m,render:x}},Se.isValidElement=C,Se.lazy=function(x){return{$$typeof:I,_payload:{_status:-1,_result:x},_init:Nt}},Se.memo=function(x,$){return{$$typeof:E,type:x,compare:$===void 0?null:$}},Se.startTransition=function(x){var $=J.transition;J.transition={};try{x()}finally{J.transition=$}},Se.unstable_act=ee,Se.useCallback=function(x,$){return Ue.current.useCallback(x,$)},Se.useContext=function(x){return Ue.current.useContext(x)},Se.useDebugValue=function(){},Se.useDeferredValue=function(x){return Ue.current.useDeferredValue(x)},Se.useEffect=function(x,$){return Ue.current.useEffect(x,$)},Se.useId=function(){return Ue.current.useId()},Se.useImperativeHandle=function(x,$,ae){return Ue.current.useImperativeHandle(x,$,ae)},Se.useInsertionEffect=function(x,$){return Ue.current.useInsertionEffect(x,$)},Se.useLayoutEffect=function(x,$){return Ue.current.useLayoutEffect(x,$)},Se.useMemo=function(x,$){return Ue.current.useMemo(x,$)},Se.useReducer=function(x,$,ae){return Ue.current.useReducer(x,$,ae)},Se.useRef=function(x){return Ue.current.useRef(x)},Se.useState=function(x){return Ue.current.useState(x)},Se.useSyncExternalStore=function(x,$,ae){return Ue.current.useSyncExternalStore(x,$,ae)},Se.useTransition=function(){return Ue.current.useTransition()},Se.version="18.3.1",Se}var gp;function Sh(){return gp||(gp=1,$c.exports=R_()),$c.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yp;function C_(){if(yp)return Ko;yp=1;var i=Sh(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function d(m,y,E){var I,D={},F=null,z=null;E!==void 0&&(F=""+E),y.key!==void 0&&(F=""+y.key),y.ref!==void 0&&(z=y.ref);for(I in y)s.call(y,I)&&!c.hasOwnProperty(I)&&(D[I]=y[I]);if(m&&m.defaultProps)for(I in y=m.defaultProps,y)D[I]===void 0&&(D[I]=y[I]);return{$$typeof:e,type:m,key:F,ref:z,props:D,_owner:a.current}}return Ko.Fragment=n,Ko.jsx=d,Ko.jsxs=d,Ko}var _p;function P_(){return _p||(_p=1,jc.exports=C_()),jc.exports}var ze=P_(),gr=Sh(),Vl={},qc={exports:{}},Xt={},Hc={exports:{}},Wc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function k_(){return vp||(vp=1,function(i){function e(J,ue){var ee=J.length;J.push(ue);e:for(;0<ee;){var x=ee-1>>>1,$=J[x];if(0<a($,ue))J[x]=ue,J[ee]=$,ee=x;else break e}}function n(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var ue=J[0],ee=J.pop();if(ee!==ue){J[0]=ee;e:for(var x=0,$=J.length,ae=$>>>1;x<ae;){var Te=2*(x+1)-1,Ie=J[Te],Pe=Te+1,Oe=J[Pe];if(0>a(Ie,ee))Pe<$&&0>a(Oe,Ie)?(J[x]=Oe,J[Pe]=ee,x=Pe):(J[x]=Ie,J[Te]=ee,x=Te);else if(Pe<$&&0>a(Oe,ee))J[x]=Oe,J[Pe]=ee,x=Pe;else break e}}return ue}function a(J,ue){var ee=J.sortIndex-ue.sortIndex;return ee!==0?ee:J.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,m=d.now();i.unstable_now=function(){return d.now()-m}}var y=[],E=[],I=1,D=null,F=3,z=!1,G=!1,X=!1,B=typeof setTimeout=="function"?setTimeout:null,ye=typeof clearTimeout=="function"?clearTimeout:null,ge=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function he(J){for(var ue=n(E);ue!==null;){if(ue.callback===null)s(E);else if(ue.startTime<=J)s(E),ue.sortIndex=ue.expirationTime,e(y,ue);else break;ue=n(E)}}function de(J){if(X=!1,he(J),!G)if(n(y)!==null)G=!0,Nt(oe);else{var ue=n(E);ue!==null&&Ue(de,ue.startTime-J)}}function oe(J,ue){G=!1,X&&(X=!1,ye(w),w=-1),z=!0;var ee=F;try{for(he(ue),D=n(y);D!==null&&(!(D.expirationTime>ue)||J&&!N());){var x=D.callback;if(typeof x=="function"){D.callback=null,F=D.priorityLevel;var $=x(D.expirationTime<=ue);ue=i.unstable_now(),typeof $=="function"?D.callback=$:D===n(y)&&s(y),he(ue)}else s(y);D=n(y)}if(D!==null)var ae=!0;else{var Te=n(E);Te!==null&&Ue(de,Te.startTime-ue),ae=!1}return ae}finally{D=null,F=ee,z=!1}}var le=!1,P=null,w=-1,A=5,C=-1;function N(){return!(i.unstable_now()-C<A)}function V(){if(P!==null){var J=i.unstable_now();C=J;var ue=!0;try{ue=P(!0,J)}finally{ue?S():(le=!1,P=null)}}else le=!1}var S;if(typeof ge=="function")S=function(){ge(V)};else if(typeof MessageChannel<"u"){var Ge=new MessageChannel,gt=Ge.port2;Ge.port1.onmessage=V,S=function(){gt.postMessage(null)}}else S=function(){B(V,0)};function Nt(J){P=J,le||(le=!0,S())}function Ue(J,ue){w=B(function(){J(i.unstable_now())},ue)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){G||z||(G=!0,Nt(oe))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return F},i.unstable_getFirstCallbackNode=function(){return n(y)},i.unstable_next=function(J){switch(F){case 1:case 2:case 3:var ue=3;break;default:ue=F}var ee=F;F=ue;try{return J()}finally{F=ee}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,ue){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var ee=F;F=J;try{return ue()}finally{F=ee}},i.unstable_scheduleCallback=function(J,ue,ee){var x=i.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?x+ee:x):ee=x,J){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=ee+$,J={id:I++,callback:ue,priorityLevel:J,startTime:ee,expirationTime:$,sortIndex:-1},ee>x?(J.sortIndex=ee,e(E,J),n(y)===null&&J===n(E)&&(X?(ye(w),w=-1):X=!0,Ue(de,ee-x))):(J.sortIndex=$,e(y,J),G||z||(G=!0,Nt(oe))),J},i.unstable_shouldYield=N,i.unstable_wrapCallback=function(J){var ue=F;return function(){var ee=F;F=ue;try{return J.apply(this,arguments)}finally{F=ee}}}}(Wc)),Wc}var Ep;function N_(){return Ep||(Ep=1,Hc.exports=k_()),Hc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function D_(){if(wp)return Xt;wp=1;var i=Sh(),e=N_();function n(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,o=1;o<arguments.length;o++)r+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function c(t,r){d(t,r),d(t+"Capture",r)}function d(t,r){for(a[t]=r,t=0;t<r.length;t++)s.add(r[t])}var m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),y=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I={},D={};function F(t){return y.call(D,t)?!0:y.call(I,t)?!1:E.test(t)?D[t]=!0:(I[t]=!0,!1)}function z(t,r,o,u){if(o!==null&&o.type===0)return!1;switch(typeof r){case"function":case"symbol":return!0;case"boolean":return u?!1:o!==null?!o.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function G(t,r,o,u){if(r===null||typeof r>"u"||z(t,r,o,u))return!0;if(u)return!1;if(o!==null)switch(o.type){case 3:return!r;case 4:return r===!1;case 5:return isNaN(r);case 6:return isNaN(r)||1>r}return!1}function X(t,r,o,u,h,p,_){this.acceptsBooleans=r===2||r===3||r===4,this.attributeName=u,this.attributeNamespace=h,this.mustUseProperty=o,this.propertyName=t,this.type=r,this.sanitizeURL=p,this.removeEmptyString=_}var B={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){B[t]=new X(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var r=t[0];B[r]=new X(r,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){B[t]=new X(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){B[t]=new X(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){B[t]=new X(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){B[t]=new X(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){B[t]=new X(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){B[t]=new X(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){B[t]=new X(t,5,!1,t.toLowerCase(),null,!1,!1)});var ye=/[\-:]([a-z])/g;function ge(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var r=t.replace(ye,ge);B[r]=new X(r,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var r=t.replace(ye,ge);B[r]=new X(r,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var r=t.replace(ye,ge);B[r]=new X(r,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){B[t]=new X(t,1,!1,t.toLowerCase(),null,!1,!1)}),B.xlinkHref=new X("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){B[t]=new X(t,1,!1,t.toLowerCase(),null,!0,!0)});function he(t,r,o,u){var h=B.hasOwnProperty(r)?B[r]:null;(h!==null?h.type!==0:u||!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(G(r,o,h,u)&&(o=null),u||h===null?F(r)&&(o===null?t.removeAttribute(r):t.setAttribute(r,""+o)):h.mustUseProperty?t[h.propertyName]=o===null?h.type===3?!1:"":o:(r=h.attributeName,u=h.attributeNamespace,o===null?t.removeAttribute(r):(h=h.type,o=h===3||h===4&&o===!0?"":""+o,u?t.setAttributeNS(u,r,o):t.setAttribute(r,o))))}var de=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oe=Symbol.for("react.element"),le=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),Ge=Symbol.for("react.suspense_list"),gt=Symbol.for("react.memo"),Nt=Symbol.for("react.lazy"),Ue=Symbol.for("react.offscreen"),J=Symbol.iterator;function ue(t){return t===null||typeof t!="object"?null:(t=J&&t[J]||t["@@iterator"],typeof t=="function"?t:null)}var ee=Object.assign,x;function $(t){if(x===void 0)try{throw Error()}catch(o){var r=o.stack.trim().match(/\n( *(at )?)/);x=r&&r[1]||""}return`
`+x+t}var ae=!1;function Te(t,r){if(!t||ae)return"";ae=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(U){var u=U}Reflect.construct(t,[],r)}else{try{r.call()}catch(U){u=U}t.call(r.prototype)}else{try{throw Error()}catch(U){u=U}t()}}catch(U){if(U&&u&&typeof U.stack=="string"){for(var h=U.stack.split(`
`),p=u.stack.split(`
`),_=h.length-1,T=p.length-1;1<=_&&0<=T&&h[_]!==p[T];)T--;for(;1<=_&&0<=T;_--,T--)if(h[_]!==p[T]){if(_!==1||T!==1)do if(_--,T--,0>T||h[_]!==p[T]){var R=`
`+h[_].replace(" at new "," at ");return t.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",t.displayName)),R}while(1<=_&&0<=T);break}}}finally{ae=!1,Error.prepareStackTrace=o}return(t=t?t.displayName||t.name:"")?$(t):""}function Ie(t){switch(t.tag){case 5:return $(t.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return t=Te(t.type,!1),t;case 11:return t=Te(t.type.render,!1),t;case 1:return t=Te(t.type,!0),t;default:return""}}function Pe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case P:return"Fragment";case le:return"Portal";case A:return"Profiler";case w:return"StrictMode";case S:return"Suspense";case Ge:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case N:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case V:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case gt:return r=t.displayName||null,r!==null?r:Pe(t.type)||"Memo";case Nt:r=t._payload,t=t._init;try{return Pe(t(r))}catch{}}return null}function Oe(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pe(r);case 8:return r===w?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Le(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Be(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function yt(t){var r=Be(t)?"checked":"value",o=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),u=""+t[r];if(!t.hasOwnProperty(r)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,p=o.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return h.call(this)},set:function(_){u=""+_,p.call(this,_)}}),Object.defineProperty(t,r,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Jn(t){t._valueTracker||(t._valueTracker=yt(t))}function qi(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var o=r.getValue(),u="";return t&&(u=Be(t)?t.checked?"true":"false":t.value),t=u,t!==o?(r.setValue(t),!0):!1}function Tr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function si(t,r){var o=r.checked;return ee({},r,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??t._wrapperState.initialChecked})}function Hi(t,r){var o=r.defaultValue==null?"":r.defaultValue,u=r.checked!=null?r.checked:r.defaultChecked;o=Le(r.value!=null?r.value:o),t._wrapperState={initialChecked:u,initialValue:o,controlled:r.type==="checkbox"||r.type==="radio"?r.checked!=null:r.value!=null}}function Zs(t,r){r=r.checked,r!=null&&he(t,"checked",r,!1)}function eo(t,r){Zs(t,r);var o=Le(r.value),u=r.type;if(o!=null)u==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+o):t.value!==""+o&&(t.value=""+o);else if(u==="submit"||u==="reset"){t.removeAttribute("value");return}r.hasOwnProperty("value")?Wi(t,r.type,o):r.hasOwnProperty("defaultValue")&&Wi(t,r.type,Le(r.defaultValue)),r.checked==null&&r.defaultChecked!=null&&(t.defaultChecked=!!r.defaultChecked)}function ya(t,r,o){if(r.hasOwnProperty("value")||r.hasOwnProperty("defaultValue")){var u=r.type;if(!(u!=="submit"&&u!=="reset"||r.value!==void 0&&r.value!==null))return;r=""+t._wrapperState.initialValue,o||r===t.value||(t.value=r),t.defaultValue=r}o=t.name,o!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,o!==""&&(t.name=o)}function Wi(t,r,o){(r!=="number"||Tr(t.ownerDocument)!==t)&&(o==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+o&&(t.defaultValue=""+o))}var Zn=Array.isArray;function er(t,r,o,u){if(t=t.options,r){r={};for(var h=0;h<o.length;h++)r["$"+o[h]]=!0;for(o=0;o<t.length;o++)h=r.hasOwnProperty("$"+t[o].value),t[o].selected!==h&&(t[o].selected=h),h&&u&&(t[o].defaultSelected=!0)}else{for(o=""+Le(o),r=null,h=0;h<t.length;h++){if(t[h].value===o){t[h].selected=!0,u&&(t[h].defaultSelected=!0);return}r!==null||t[h].disabled||(r=t[h])}r!==null&&(r.selected=!0)}}function to(t,r){if(r.dangerouslySetInnerHTML!=null)throw Error(n(91));return ee({},r,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Qi(t,r){var o=r.value;if(o==null){if(o=r.children,r=r.defaultValue,o!=null){if(r!=null)throw Error(n(92));if(Zn(o)){if(1<o.length)throw Error(n(93));o=o[0]}r=o}r==null&&(r=""),o=r}t._wrapperState={initialValue:Le(o)}}function Ki(t,r){var o=Le(r.value),u=Le(r.defaultValue);o!=null&&(o=""+o,o!==t.value&&(t.value=o),r.defaultValue==null&&t.defaultValue!==o&&(t.defaultValue=o)),u!=null&&(t.defaultValue=""+u)}function no(t){var r=t.textContent;r===t._wrapperState.initialValue&&r!==""&&r!==null&&(t.value=r)}function lt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ut(t,r){return t==null||t==="http://www.w3.org/1999/xhtml"?lt(r):t==="http://www.w3.org/2000/svg"&&r==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tr,ro=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(r,o,u,h){MSApp.execUnsafeLocalFunction(function(){return t(r,o,u,h)})}:t}(function(t,r){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=r;else{for(tr=tr||document.createElement("div"),tr.innerHTML="<svg>"+r.valueOf().toString()+"</svg>",r=tr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;r.firstChild;)t.appendChild(r.firstChild)}});function Ir(t,r){if(r){var o=t.firstChild;if(o&&o===t.lastChild&&o.nodeType===3){o.nodeValue=r;return}}t.textContent=r}var oi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ai=["Webkit","ms","Moz","O"];Object.keys(oi).forEach(function(t){ai.forEach(function(r){r=r+t.charAt(0).toUpperCase()+t.substring(1),oi[r]=oi[t]})});function io(t,r,o){return r==null||typeof r=="boolean"||r===""?"":o||typeof r!="number"||r===0||oi.hasOwnProperty(t)&&oi[t]?(""+r).trim():r+"px"}function so(t,r){t=t.style;for(var o in r)if(r.hasOwnProperty(o)){var u=o.indexOf("--")===0,h=io(o,r[o],u);o==="float"&&(o="cssFloat"),u?t.setProperty(o,h):t[o]=h}}var oo=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ao(t,r){if(r){if(oo[t]&&(r.children!=null||r.dangerouslySetInnerHTML!=null))throw Error(n(137,t));if(r.dangerouslySetInnerHTML!=null){if(r.children!=null)throw Error(n(60));if(typeof r.dangerouslySetInnerHTML!="object"||!("__html"in r.dangerouslySetInnerHTML))throw Error(n(61))}if(r.style!=null&&typeof r.style!="object")throw Error(n(62))}}function lo(t,r){if(t.indexOf("-")===-1)return typeof r.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function Gi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xi=null,an=null,Mn=null;function Yi(t){if(t=xo(t)){if(typeof Xi!="function")throw Error(n(280));var r=t.stateNode;r&&(r=Qa(r),Xi(t.stateNode,t.type,r))}}function Fn(t){an?Mn?Mn.push(t):Mn=[t]:an=t}function uo(){if(an){var t=an,r=Mn;if(Mn=an=null,Yi(t),r)for(t=0;t<r.length;t++)Yi(r[t])}}function ui(t,r){return t(r)}function co(){}var nr=!1;function ho(t,r,o){if(nr)return t(r,o);nr=!0;try{return ui(t,r,o)}finally{nr=!1,(an!==null||Mn!==null)&&(co(),uo())}}function nt(t,r){var o=t.stateNode;if(o===null)return null;var u=Qa(o);if(u===null)return null;o=u[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(o&&typeof o!="function")throw Error(n(231,r,typeof o));return o}var Ji=!1;if(m)try{var En={};Object.defineProperty(En,"passive",{get:function(){Ji=!0}}),window.addEventListener("test",En,En),window.removeEventListener("test",En,En)}catch{Ji=!1}function ci(t,r,o,u,h,p,_,T,R){var U=Array.prototype.slice.call(arguments,3);try{r.apply(o,U)}catch(H){this.onError(H)}}var hi=!1,Zi=null,wn=!1,fo=null,gu={onError:function(t){hi=!0,Zi=t}};function es(t,r,o,u,h,p,_,T,R){hi=!1,Zi=null,ci.apply(gu,arguments)}function _a(t,r,o,u,h,p,_,T,R){if(es.apply(this,arguments),hi){if(hi){var U=Zi;hi=!1,Zi=null}else throw Error(n(198));wn||(wn=!0,fo=U)}}function Tn(t){var r=t,o=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,r.flags&4098&&(o=r.return),t=r.return;while(t)}return r.tag===3?o:null}function di(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function In(t){if(Tn(t)!==t)throw Error(n(188))}function va(t){var r=t.alternate;if(!r){if(r=Tn(t),r===null)throw Error(n(188));return r!==t?null:t}for(var o=t,u=r;;){var h=o.return;if(h===null)break;var p=h.alternate;if(p===null){if(u=h.return,u!==null){o=u;continue}break}if(h.child===p.child){for(p=h.child;p;){if(p===o)return In(h),t;if(p===u)return In(h),r;p=p.sibling}throw Error(n(188))}if(o.return!==u.return)o=h,u=p;else{for(var _=!1,T=h.child;T;){if(T===o){_=!0,o=h,u=p;break}if(T===u){_=!0,u=h,o=p;break}T=T.sibling}if(!_){for(T=p.child;T;){if(T===o){_=!0,o=p,u=h;break}if(T===u){_=!0,u=p,o=h;break}T=T.sibling}if(!_)throw Error(n(189))}}if(o.alternate!==u)throw Error(n(190))}if(o.tag!==3)throw Error(n(188));return o.stateNode.current===o?t:r}function po(t){return t=va(t),t!==null?ts(t):null}function ts(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=ts(t);if(r!==null)return r;t=t.sibling}return null}var ns=e.unstable_scheduleCallback,mo=e.unstable_cancelCallback,Ea=e.unstable_shouldYield,yu=e.unstable_requestPaint,je=e.unstable_now,wa=e.unstable_getCurrentPriorityLevel,fi=e.unstable_ImmediatePriority,Sr=e.unstable_UserBlockingPriority,ln=e.unstable_NormalPriority,go=e.unstable_LowPriority,Ta=e.unstable_IdlePriority,pi=null,Jt=null;function Ia(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(pi,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Aa,yo=Math.log,Sa=Math.LN2;function Aa(t){return t>>>=0,t===0?32:31-(yo(t)/Sa|0)|0}var rs=64,is=4194304;function Ar(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function mi(t,r){var o=t.pendingLanes;if(o===0)return 0;var u=0,h=t.suspendedLanes,p=t.pingedLanes,_=o&268435455;if(_!==0){var T=_&~h;T!==0?u=Ar(T):(p&=_,p!==0&&(u=Ar(p)))}else _=o&~h,_!==0?u=Ar(_):p!==0&&(u=Ar(p));if(u===0)return 0;if(r!==0&&r!==u&&!(r&h)&&(h=u&-u,p=r&-r,h>=p||h===16&&(p&4194240)!==0))return r;if(u&4&&(u|=o&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=u;0<r;)o=31-Ut(r),h=1<<o,u|=t[o],r&=~h;return u}function _u(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(t,r){for(var o=t.suspendedLanes,u=t.pingedLanes,h=t.expirationTimes,p=t.pendingLanes;0<p;){var _=31-Ut(p),T=1<<_,R=h[_];R===-1?(!(T&o)||T&u)&&(h[_]=_u(T,r)):R<=r&&(t.expiredLanes|=T),p&=~T}}function Zt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gi(){var t=rs;return rs<<=1,!(rs&4194240)&&(rs=64),t}function Rr(t){for(var r=[],o=0;31>o;o++)r.push(t);return r}function Cr(t,r,o){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-Ut(r),t[r]=o}function be(t,r){var o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var u=t.eventTimes;for(t=t.expirationTimes;0<o;){var h=31-Ut(o),p=1<<h;r[h]=0,u[h]=-1,t[h]=-1,o&=~p}}function Pr(t,r){var o=t.entangledLanes|=r;for(t=t.entanglements;o;){var u=31-Ut(o),h=1<<u;h&r|t[u]&r&&(t[u]|=r),o&=~h}}var Re=0;function kr(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ra,ss,Ca,Pa,ka,_o=!1,Un=[],It=null,Sn=null,An=null,Nr=new Map,un=new Map,bn=[],vu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Na(t,r){switch(t){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Sn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":Nr.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":un.delete(r.pointerId)}}function $t(t,r,o,u,h,p){return t===null||t.nativeEvent!==p?(t={blockedOn:r,domEventName:o,eventSystemFlags:u,nativeEvent:p,targetContainers:[h]},r!==null&&(r=xo(r),r!==null&&ss(r)),t):(t.eventSystemFlags|=u,r=t.targetContainers,h!==null&&r.indexOf(h)===-1&&r.push(h),t)}function Eu(t,r,o,u,h){switch(r){case"focusin":return It=$t(It,t,r,o,u,h),!0;case"dragenter":return Sn=$t(Sn,t,r,o,u,h),!0;case"mouseover":return An=$t(An,t,r,o,u,h),!0;case"pointerover":var p=h.pointerId;return Nr.set(p,$t(Nr.get(p)||null,t,r,o,u,h)),!0;case"gotpointercapture":return p=h.pointerId,un.set(p,$t(un.get(p)||null,t,r,o,u,h)),!0}return!1}function Da(t){var r=wi(t.target);if(r!==null){var o=Tn(r);if(o!==null){if(r=o.tag,r===13){if(r=di(o),r!==null){t.blockedOn=r,ka(t.priority,function(){Ca(o)});return}}else if(r===3&&o.stateNode.current.memoizedState.isDehydrated){t.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ir(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var o=os(t.domEventName,t.eventSystemFlags,r[0],t.nativeEvent);if(o===null){o=t.nativeEvent;var u=new o.constructor(o.type,o);li=u,o.target.dispatchEvent(u),li=null}else return r=xo(o),r!==null&&ss(r),t.blockedOn=o,!1;r.shift()}return!0}function yi(t,r,o){ir(t)&&o.delete(r)}function Va(){_o=!1,It!==null&&ir(It)&&(It=null),Sn!==null&&ir(Sn)&&(Sn=null),An!==null&&ir(An)&&(An=null),Nr.forEach(yi),un.forEach(yi)}function Rn(t,r){t.blockedOn===r&&(t.blockedOn=null,_o||(_o=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Va)))}function Cn(t){function r(h){return Rn(h,t)}if(0<Un.length){Rn(Un[0],t);for(var o=1;o<Un.length;o++){var u=Un[o];u.blockedOn===t&&(u.blockedOn=null)}}for(It!==null&&Rn(It,t),Sn!==null&&Rn(Sn,t),An!==null&&Rn(An,t),Nr.forEach(r),un.forEach(r),o=0;o<bn.length;o++)u=bn[o],u.blockedOn===t&&(u.blockedOn=null);for(;0<bn.length&&(o=bn[0],o.blockedOn===null);)Da(o),o.blockedOn===null&&bn.shift()}var sr=de.ReactCurrentBatchConfig,Dr=!0;function We(t,r,o,u){var h=Re,p=sr.transition;sr.transition=null;try{Re=1,vo(t,r,o,u)}finally{Re=h,sr.transition=p}}function wu(t,r,o,u){var h=Re,p=sr.transition;sr.transition=null;try{Re=4,vo(t,r,o,u)}finally{Re=h,sr.transition=p}}function vo(t,r,o,u){if(Dr){var h=os(t,r,o,u);if(h===null)Vu(t,r,u,_i,o),Na(t,u);else if(Eu(h,t,r,o,u))u.stopPropagation();else if(Na(t,u),r&4&&-1<vu.indexOf(t)){for(;h!==null;){var p=xo(h);if(p!==null&&Ra(p),p=os(t,r,o,u),p===null&&Vu(t,r,u,_i,o),p===h)break;h=p}h!==null&&u.stopPropagation()}else Vu(t,r,u,null,o)}}var _i=null;function os(t,r,o,u){if(_i=null,t=Gi(u),t=wi(t),t!==null)if(r=Tn(t),r===null)t=null;else if(o=r.tag,o===13){if(t=di(r),t!==null)return t;t=null}else if(o===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null);return _i=t,null}function Eo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(wa()){case fi:return 1;case Sr:return 4;case ln:case go:return 16;case Ta:return 536870912;default:return 16}default:return 16}}var en=null,as=null,qt=null;function wo(){if(qt)return qt;var t,r=as,o=r.length,u,h="value"in en?en.value:en.textContent,p=h.length;for(t=0;t<o&&r[t]===h[t];t++);var _=o-t;for(u=1;u<=_&&r[o-u]===h[p-u];u++);return qt=h.slice(t,1<u?1-u:void 0)}function ls(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function zn(){return!0}function To(){return!1}function St(t){function r(o,u,h,p,_){this._reactName=o,this._targetInst=h,this.type=u,this.nativeEvent=p,this.target=_,this.currentTarget=null;for(var T in t)t.hasOwnProperty(T)&&(o=t[T],this[T]=o?o(p):p[T]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zn:To,this.isPropagationStopped=To,this}return ee(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),r}var Pn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},us=St(Pn),Bn=ee({},Pn,{view:0,detail:0}),Tu=St(Bn),cs,or,Vr,vi=ee({},Bn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vr&&(Vr&&t.type==="mousemove"?(cs=t.screenX-Vr.screenX,or=t.screenY-Vr.screenY):or=cs=0,Vr=t),cs)},movementY:function(t){return"movementY"in t?t.movementY:or}}),hs=St(vi),Io=ee({},vi,{dataTransfer:0}),xa=St(Io),ds=ee({},Bn,{relatedTarget:0}),fs=St(ds),Oa=ee({},Pn,{animationName:0,elapsedTime:0,pseudoElement:0}),ar=St(Oa),La=ee({},Pn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ma=St(La),Fa=ee({},Pn,{data:0}),So=St(Fa),ps={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ua={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ba(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Ua[t])?!!r[t]:!1}function jn(){return ba}var l=ee({},Bn,{key:function(t){if(t.key){var r=ps[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ls(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?bt[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jn,charCode:function(t){return t.type==="keypress"?ls(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ls(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),f=St(l),g=ee({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v=St(g),O=ee({},Bn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jn}),b=St(O),Y=ee({},Pn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fe=St(Y),ct=ee({},vi,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),ke=St(ct),_t=[9,13,27,32],st=m&&"CompositionEvent"in window,cn=null;m&&"documentMode"in document&&(cn=document.documentMode);var tn=m&&"TextEvent"in window&&!cn,Ei=m&&(!st||cn&&8<cn&&11>=cn),ms=" ",ld=!1;function ud(t,r){switch(t){case"keyup":return _t.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cd(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var gs=!1;function Iy(t,r){switch(t){case"compositionend":return cd(r);case"keypress":return r.which!==32?null:(ld=!0,ms);case"textInput":return t=r.data,t===ms&&ld?null:t;default:return null}}function Sy(t,r){if(gs)return t==="compositionend"||!st&&ud(t,r)?(t=wo(),qt=as=en=null,gs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ei&&r.locale!=="ko"?null:r.data;default:return null}}var Ay={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hd(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Ay[t.type]:r==="textarea"}function dd(t,r,o,u){Fn(u),r=qa(r,"onChange"),0<r.length&&(o=new us("onChange","change",null,o,u),t.push({event:o,listeners:r}))}var Ao=null,Ro=null;function Ry(t){Nd(t,0)}function za(t){var r=ws(t);if(qi(r))return t}function Cy(t,r){if(t==="change")return r}var fd=!1;if(m){var Iu;if(m){var Su="oninput"in document;if(!Su){var pd=document.createElement("div");pd.setAttribute("oninput","return;"),Su=typeof pd.oninput=="function"}Iu=Su}else Iu=!1;fd=Iu&&(!document.documentMode||9<document.documentMode)}function md(){Ao&&(Ao.detachEvent("onpropertychange",gd),Ro=Ao=null)}function gd(t){if(t.propertyName==="value"&&za(Ro)){var r=[];dd(r,Ro,t,Gi(t)),ho(Ry,r)}}function Py(t,r,o){t==="focusin"?(md(),Ao=r,Ro=o,Ao.attachEvent("onpropertychange",gd)):t==="focusout"&&md()}function ky(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return za(Ro)}function Ny(t,r){if(t==="click")return za(r)}function Dy(t,r){if(t==="input"||t==="change")return za(r)}function Vy(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var kn=typeof Object.is=="function"?Object.is:Vy;function Co(t,r){if(kn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var o=Object.keys(t),u=Object.keys(r);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var h=o[u];if(!y.call(r,h)||!kn(t[h],r[h]))return!1}return!0}function yd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _d(t,r){var o=yd(t);t=0;for(var u;o;){if(o.nodeType===3){if(u=t+o.textContent.length,t<=r&&u>=r)return{node:o,offset:r-t};t=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=yd(o)}}function vd(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?vd(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Ed(){for(var t=window,r=Tr();r instanceof t.HTMLIFrameElement;){try{var o=typeof r.contentWindow.location.href=="string"}catch{o=!1}if(o)t=r.contentWindow;else break;r=Tr(t.document)}return r}function Au(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}function xy(t){var r=Ed(),o=t.focusedElem,u=t.selectionRange;if(r!==o&&o&&o.ownerDocument&&vd(o.ownerDocument.documentElement,o)){if(u!==null&&Au(o)){if(r=u.start,t=u.end,t===void 0&&(t=r),"selectionStart"in o)o.selectionStart=r,o.selectionEnd=Math.min(t,o.value.length);else if(t=(r=o.ownerDocument||document)&&r.defaultView||window,t.getSelection){t=t.getSelection();var h=o.textContent.length,p=Math.min(u.start,h);u=u.end===void 0?p:Math.min(u.end,h),!t.extend&&p>u&&(h=u,u=p,p=h),h=_d(o,p);var _=_d(o,u);h&&_&&(t.rangeCount!==1||t.anchorNode!==h.node||t.anchorOffset!==h.offset||t.focusNode!==_.node||t.focusOffset!==_.offset)&&(r=r.createRange(),r.setStart(h.node,h.offset),t.removeAllRanges(),p>u?(t.addRange(r),t.extend(_.node,_.offset)):(r.setEnd(_.node,_.offset),t.addRange(r)))}}for(r=[],t=o;t=t.parentNode;)t.nodeType===1&&r.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<r.length;o++)t=r[o],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Oy=m&&"documentMode"in document&&11>=document.documentMode,ys=null,Ru=null,Po=null,Cu=!1;function wd(t,r,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Cu||ys==null||ys!==Tr(u)||(u=ys,"selectionStart"in u&&Au(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Po&&Co(Po,u)||(Po=u,u=qa(Ru,"onSelect"),0<u.length&&(r=new us("onSelect","select",null,r,o),t.push({event:r,listeners:u}),r.target=ys)))}function Ba(t,r){var o={};return o[t.toLowerCase()]=r.toLowerCase(),o["Webkit"+t]="webkit"+r,o["Moz"+t]="moz"+r,o}var _s={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionend:Ba("Transition","TransitionEnd")},Pu={},Td={};m&&(Td=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function ja(t){if(Pu[t])return Pu[t];if(!_s[t])return t;var r=_s[t],o;for(o in r)if(r.hasOwnProperty(o)&&o in Td)return Pu[t]=r[o];return t}var Id=ja("animationend"),Sd=ja("animationiteration"),Ad=ja("animationstart"),Rd=ja("transitionend"),Cd=new Map,Pd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xr(t,r){Cd.set(t,r),c(r,[t])}for(var ku=0;ku<Pd.length;ku++){var Nu=Pd[ku],Ly=Nu.toLowerCase(),My=Nu[0].toUpperCase()+Nu.slice(1);xr(Ly,"on"+My)}xr(Id,"onAnimationEnd"),xr(Sd,"onAnimationIteration"),xr(Ad,"onAnimationStart"),xr("dblclick","onDoubleClick"),xr("focusin","onFocus"),xr("focusout","onBlur"),xr(Rd,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fy=new Set("cancel close invalid load scroll toggle".split(" ").concat(ko));function kd(t,r,o){var u=t.type||"unknown-event";t.currentTarget=o,_a(u,r,void 0,t),t.currentTarget=null}function Nd(t,r){r=(r&4)!==0;for(var o=0;o<t.length;o++){var u=t[o],h=u.event;u=u.listeners;e:{var p=void 0;if(r)for(var _=u.length-1;0<=_;_--){var T=u[_],R=T.instance,U=T.currentTarget;if(T=T.listener,R!==p&&h.isPropagationStopped())break e;kd(h,T,U),p=R}else for(_=0;_<u.length;_++){if(T=u[_],R=T.instance,U=T.currentTarget,T=T.listener,R!==p&&h.isPropagationStopped())break e;kd(h,T,U),p=R}}}if(wn)throw t=fo,wn=!1,fo=null,t}function qe(t,r){var o=r[Uu];o===void 0&&(o=r[Uu]=new Set);var u=t+"__bubble";o.has(u)||(Dd(r,t,2,!1),o.add(u))}function Du(t,r,o){var u=0;r&&(u|=4),Dd(o,t,u,r)}var $a="_reactListening"+Math.random().toString(36).slice(2);function No(t){if(!t[$a]){t[$a]=!0,s.forEach(function(o){o!=="selectionchange"&&(Fy.has(o)||Du(o,!1,t),Du(o,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[$a]||(r[$a]=!0,Du("selectionchange",!1,r))}}function Dd(t,r,o,u){switch(Eo(r)){case 1:var h=We;break;case 4:h=wu;break;default:h=vo}o=h.bind(null,r,o,t),h=void 0,!Ji||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(h=!0),u?h!==void 0?t.addEventListener(r,o,{capture:!0,passive:h}):t.addEventListener(r,o,!0):h!==void 0?t.addEventListener(r,o,{passive:h}):t.addEventListener(r,o,!1)}function Vu(t,r,o,u,h){var p=u;if(!(r&1)&&!(r&2)&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var T=u.stateNode.containerInfo;if(T===h||T.nodeType===8&&T.parentNode===h)break;if(_===4)for(_=u.return;_!==null;){var R=_.tag;if((R===3||R===4)&&(R=_.stateNode.containerInfo,R===h||R.nodeType===8&&R.parentNode===h))return;_=_.return}for(;T!==null;){if(_=wi(T),_===null)return;if(R=_.tag,R===5||R===6){u=p=_;continue e}T=T.parentNode}}u=u.return}ho(function(){var U=p,H=Gi(o),W=[];e:{var q=Cd.get(t);if(q!==void 0){var Z=us,re=t;switch(t){case"keypress":if(ls(o)===0)break e;case"keydown":case"keyup":Z=f;break;case"focusin":re="focus",Z=fs;break;case"focusout":re="blur",Z=fs;break;case"beforeblur":case"afterblur":Z=fs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=xa;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=b;break;case Id:case Sd:case Ad:Z=ar;break;case Rd:Z=Fe;break;case"scroll":Z=Tu;break;case"wheel":Z=ke;break;case"copy":case"cut":case"paste":Z=Ma;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=v}var ie=(r&4)!==0,rt=!ie&&t==="scroll",L=ie?q!==null?q+"Capture":null:q;ie=[];for(var k=U,M;k!==null;){M=k;var K=M.stateNode;if(M.tag===5&&K!==null&&(M=K,L!==null&&(K=nt(k,L),K!=null&&ie.push(Do(k,K,M)))),rt)break;k=k.return}0<ie.length&&(q=new Z(q,re,null,o,H),W.push({event:q,listeners:ie}))}}if(!(r&7)){e:{if(q=t==="mouseover"||t==="pointerover",Z=t==="mouseout"||t==="pointerout",q&&o!==li&&(re=o.relatedTarget||o.fromElement)&&(wi(re)||re[lr]))break e;if((Z||q)&&(q=H.window===H?H:(q=H.ownerDocument)?q.defaultView||q.parentWindow:window,Z?(re=o.relatedTarget||o.toElement,Z=U,re=re?wi(re):null,re!==null&&(rt=Tn(re),re!==rt||re.tag!==5&&re.tag!==6)&&(re=null)):(Z=null,re=U),Z!==re)){if(ie=hs,K="onMouseLeave",L="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(ie=v,K="onPointerLeave",L="onPointerEnter",k="pointer"),rt=Z==null?q:ws(Z),M=re==null?q:ws(re),q=new ie(K,k+"leave",Z,o,H),q.target=rt,q.relatedTarget=M,K=null,wi(H)===U&&(ie=new ie(L,k+"enter",re,o,H),ie.target=M,ie.relatedTarget=rt,K=ie),rt=K,Z&&re)t:{for(ie=Z,L=re,k=0,M=ie;M;M=vs(M))k++;for(M=0,K=L;K;K=vs(K))M++;for(;0<k-M;)ie=vs(ie),k--;for(;0<M-k;)L=vs(L),M--;for(;k--;){if(ie===L||L!==null&&ie===L.alternate)break t;ie=vs(ie),L=vs(L)}ie=null}else ie=null;Z!==null&&Vd(W,q,Z,ie,!1),re!==null&&rt!==null&&Vd(W,rt,re,ie,!0)}}e:{if(q=U?ws(U):window,Z=q.nodeName&&q.nodeName.toLowerCase(),Z==="select"||Z==="input"&&q.type==="file")var se=Cy;else if(hd(q))if(fd)se=Dy;else{se=ky;var fe=Py}else(Z=q.nodeName)&&Z.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(se=Ny);if(se&&(se=se(t,U))){dd(W,se,o,H);break e}fe&&fe(t,q,U),t==="focusout"&&(fe=q._wrapperState)&&fe.controlled&&q.type==="number"&&Wi(q,"number",q.value)}switch(fe=U?ws(U):window,t){case"focusin":(hd(fe)||fe.contentEditable==="true")&&(ys=fe,Ru=U,Po=null);break;case"focusout":Po=Ru=ys=null;break;case"mousedown":Cu=!0;break;case"contextmenu":case"mouseup":case"dragend":Cu=!1,wd(W,o,H);break;case"selectionchange":if(Oy)break;case"keydown":case"keyup":wd(W,o,H)}var pe;if(st)e:{switch(t){case"compositionstart":var _e="onCompositionStart";break e;case"compositionend":_e="onCompositionEnd";break e;case"compositionupdate":_e="onCompositionUpdate";break e}_e=void 0}else gs?ud(t,o)&&(_e="onCompositionEnd"):t==="keydown"&&o.keyCode===229&&(_e="onCompositionStart");_e&&(Ei&&o.locale!=="ko"&&(gs||_e!=="onCompositionStart"?_e==="onCompositionEnd"&&gs&&(pe=wo()):(en=H,as="value"in en?en.value:en.textContent,gs=!0)),fe=qa(U,_e),0<fe.length&&(_e=new So(_e,t,null,o,H),W.push({event:_e,listeners:fe}),pe?_e.data=pe:(pe=cd(o),pe!==null&&(_e.data=pe)))),(pe=tn?Iy(t,o):Sy(t,o))&&(U=qa(U,"onBeforeInput"),0<U.length&&(H=new So("onBeforeInput","beforeinput",null,o,H),W.push({event:H,listeners:U}),H.data=pe))}Nd(W,r)})}function Do(t,r,o){return{instance:t,listener:r,currentTarget:o}}function qa(t,r){for(var o=r+"Capture",u=[];t!==null;){var h=t,p=h.stateNode;h.tag===5&&p!==null&&(h=p,p=nt(t,o),p!=null&&u.unshift(Do(t,p,h)),p=nt(t,r),p!=null&&u.push(Do(t,p,h))),t=t.return}return u}function vs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Vd(t,r,o,u,h){for(var p=r._reactName,_=[];o!==null&&o!==u;){var T=o,R=T.alternate,U=T.stateNode;if(R!==null&&R===u)break;T.tag===5&&U!==null&&(T=U,h?(R=nt(o,p),R!=null&&_.unshift(Do(o,R,T))):h||(R=nt(o,p),R!=null&&_.push(Do(o,R,T)))),o=o.return}_.length!==0&&t.push({event:r,listeners:_})}var Uy=/\r\n?/g,by=/\u0000|\uFFFD/g;function xd(t){return(typeof t=="string"?t:""+t).replace(Uy,`
`).replace(by,"")}function Ha(t,r,o){if(r=xd(r),xd(t)!==r&&o)throw Error(n(425))}function Wa(){}var xu=null,Ou=null;function Lu(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Mu=typeof setTimeout=="function"?setTimeout:void 0,zy=typeof clearTimeout=="function"?clearTimeout:void 0,Od=typeof Promise=="function"?Promise:void 0,By=typeof queueMicrotask=="function"?queueMicrotask:typeof Od<"u"?function(t){return Od.resolve(null).then(t).catch(jy)}:Mu;function jy(t){setTimeout(function(){throw t})}function Fu(t,r){var o=r,u=0;do{var h=o.nextSibling;if(t.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(u===0){t.removeChild(h),Cn(r);return}u--}else o!=="$"&&o!=="$?"&&o!=="$!"||u++;o=h}while(o);Cn(r)}function Or(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?")break;if(r==="/$")return null}}return t}function Ld(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="$"||o==="$!"||o==="$?"){if(r===0)return t;r--}else o==="/$"&&r++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),$n="__reactFiber$"+Es,Vo="__reactProps$"+Es,lr="__reactContainer$"+Es,Uu="__reactEvents$"+Es,$y="__reactListeners$"+Es,qy="__reactHandles$"+Es;function wi(t){var r=t[$n];if(r)return r;for(var o=t.parentNode;o;){if(r=o[lr]||o[$n]){if(o=r.alternate,r.child!==null||o!==null&&o.child!==null)for(t=Ld(t);t!==null;){if(o=t[$n])return o;t=Ld(t)}return r}t=o,o=t.parentNode}return null}function xo(t){return t=t[$n]||t[lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(n(33))}function Qa(t){return t[Vo]||null}var bu=[],Ts=-1;function Lr(t){return{current:t}}function He(t){0>Ts||(t.current=bu[Ts],bu[Ts]=null,Ts--)}function $e(t,r){Ts++,bu[Ts]=t.current,t.current=r}var Mr={},Dt=Lr(Mr),Ht=Lr(!1),Ti=Mr;function Is(t,r){var o=t.type.contextTypes;if(!o)return Mr;var u=t.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===r)return u.__reactInternalMemoizedMaskedChildContext;var h={},p;for(p in o)h[p]=r[p];return u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=h),h}function Wt(t){return t=t.childContextTypes,t!=null}function Ka(){He(Ht),He(Dt)}function Md(t,r,o){if(Dt.current!==Mr)throw Error(n(168));$e(Dt,r),$e(Ht,o)}function Fd(t,r,o){var u=t.stateNode;if(r=r.childContextTypes,typeof u.getChildContext!="function")return o;u=u.getChildContext();for(var h in u)if(!(h in r))throw Error(n(108,Oe(t)||"Unknown",h));return ee({},o,u)}function Ga(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mr,Ti=Dt.current,$e(Dt,t),$e(Ht,Ht.current),!0}function Ud(t,r,o){var u=t.stateNode;if(!u)throw Error(n(169));o?(t=Fd(t,r,Ti),u.__reactInternalMemoizedMergedChildContext=t,He(Ht),He(Dt),$e(Dt,t)):He(Ht),$e(Ht,o)}var ur=null,Xa=!1,zu=!1;function bd(t){ur===null?ur=[t]:ur.push(t)}function Hy(t){Xa=!0,bd(t)}function Fr(){if(!zu&&ur!==null){zu=!0;var t=0,r=Re;try{var o=ur;for(Re=1;t<o.length;t++){var u=o[t];do u=u(!0);while(u!==null)}ur=null,Xa=!1}catch(h){throw ur!==null&&(ur=ur.slice(t+1)),ns(fi,Fr),h}finally{Re=r,zu=!1}}return null}var Ss=[],As=0,Ya=null,Ja=0,hn=[],dn=0,Ii=null,cr=1,hr="";function Si(t,r){Ss[As++]=Ja,Ss[As++]=Ya,Ya=t,Ja=r}function zd(t,r,o){hn[dn++]=cr,hn[dn++]=hr,hn[dn++]=Ii,Ii=t;var u=cr;t=hr;var h=32-Ut(u)-1;u&=~(1<<h),o+=1;var p=32-Ut(r)+h;if(30<p){var _=h-h%5;p=(u&(1<<_)-1).toString(32),u>>=_,h-=_,cr=1<<32-Ut(r)+h|o<<h|u,hr=p+t}else cr=1<<p|o<<h|u,hr=t}function Bu(t){t.return!==null&&(Si(t,1),zd(t,1,0))}function ju(t){for(;t===Ya;)Ya=Ss[--As],Ss[As]=null,Ja=Ss[--As],Ss[As]=null;for(;t===Ii;)Ii=hn[--dn],hn[dn]=null,hr=hn[--dn],hn[dn]=null,cr=hn[--dn],hn[dn]=null}var nn=null,rn=null,Qe=!1,Nn=null;function Bd(t,r){var o=gn(5,null,null,0);o.elementType="DELETED",o.stateNode=r,o.return=t,r=t.deletions,r===null?(t.deletions=[o],t.flags|=16):r.push(o)}function jd(t,r){switch(t.tag){case 5:var o=t.type;return r=r.nodeType!==1||o.toLowerCase()!==r.nodeName.toLowerCase()?null:r,r!==null?(t.stateNode=r,nn=t,rn=Or(r.firstChild),!0):!1;case 6:return r=t.pendingProps===""||r.nodeType!==3?null:r,r!==null?(t.stateNode=r,nn=t,rn=null,!0):!1;case 13:return r=r.nodeType!==8?null:r,r!==null?(o=Ii!==null?{id:cr,overflow:hr}:null,t.memoizedState={dehydrated:r,treeContext:o,retryLane:1073741824},o=gn(18,null,null,0),o.stateNode=r,o.return=t,t.child=o,nn=t,rn=null,!0):!1;default:return!1}}function $u(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qu(t){if(Qe){var r=rn;if(r){var o=r;if(!jd(t,r)){if($u(t))throw Error(n(418));r=Or(o.nextSibling);var u=nn;r&&jd(t,r)?Bd(u,o):(t.flags=t.flags&-4097|2,Qe=!1,nn=t)}}else{if($u(t))throw Error(n(418));t.flags=t.flags&-4097|2,Qe=!1,nn=t}}}function $d(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nn=t}function Za(t){if(t!==nn)return!1;if(!Qe)return $d(t),Qe=!0,!1;var r;if((r=t.tag!==3)&&!(r=t.tag!==5)&&(r=t.type,r=r!=="head"&&r!=="body"&&!Lu(t.type,t.memoizedProps)),r&&(r=rn)){if($u(t))throw qd(),Error(n(418));for(;r;)Bd(t,r),r=Or(r.nextSibling)}if($d(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(n(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8){var o=t.data;if(o==="/$"){if(r===0){rn=Or(t.nextSibling);break e}r--}else o!=="$"&&o!=="$!"&&o!=="$?"||r++}t=t.nextSibling}rn=null}}else rn=nn?Or(t.stateNode.nextSibling):null;return!0}function qd(){for(var t=rn;t;)t=Or(t.nextSibling)}function Rs(){rn=nn=null,Qe=!1}function Hu(t){Nn===null?Nn=[t]:Nn.push(t)}var Wy=de.ReactCurrentBatchConfig;function Oo(t,r,o){if(t=o.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(n(309));var u=o.stateNode}if(!u)throw Error(n(147,t));var h=u,p=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===p?r.ref:(r=function(_){var T=h.refs;_===null?delete T[p]:T[p]=_},r._stringRef=p,r)}if(typeof t!="string")throw Error(n(284));if(!o._owner)throw Error(n(290,t))}return t}function el(t,r){throw t=Object.prototype.toString.call(r),Error(n(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function Hd(t){var r=t._init;return r(t._payload)}function Wd(t){function r(L,k){if(t){var M=L.deletions;M===null?(L.deletions=[k],L.flags|=16):M.push(k)}}function o(L,k){if(!t)return null;for(;k!==null;)r(L,k),k=k.sibling;return null}function u(L,k){for(L=new Map;k!==null;)k.key!==null?L.set(k.key,k):L.set(k.index,k),k=k.sibling;return L}function h(L,k){return L=Hr(L,k),L.index=0,L.sibling=null,L}function p(L,k,M){return L.index=M,t?(M=L.alternate,M!==null?(M=M.index,M<k?(L.flags|=2,k):M):(L.flags|=2,k)):(L.flags|=1048576,k)}function _(L){return t&&L.alternate===null&&(L.flags|=2),L}function T(L,k,M,K){return k===null||k.tag!==6?(k=Mc(M,L.mode,K),k.return=L,k):(k=h(k,M),k.return=L,k)}function R(L,k,M,K){var se=M.type;return se===P?H(L,k,M.props.children,K,M.key):k!==null&&(k.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Nt&&Hd(se)===k.type)?(K=h(k,M.props),K.ref=Oo(L,k,M),K.return=L,K):(K=Sl(M.type,M.key,M.props,null,L.mode,K),K.ref=Oo(L,k,M),K.return=L,K)}function U(L,k,M,K){return k===null||k.tag!==4||k.stateNode.containerInfo!==M.containerInfo||k.stateNode.implementation!==M.implementation?(k=Fc(M,L.mode,K),k.return=L,k):(k=h(k,M.children||[]),k.return=L,k)}function H(L,k,M,K,se){return k===null||k.tag!==7?(k=Vi(M,L.mode,K,se),k.return=L,k):(k=h(k,M),k.return=L,k)}function W(L,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Mc(""+k,L.mode,M),k.return=L,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case oe:return M=Sl(k.type,k.key,k.props,null,L.mode,M),M.ref=Oo(L,null,k),M.return=L,M;case le:return k=Fc(k,L.mode,M),k.return=L,k;case Nt:var K=k._init;return W(L,K(k._payload),M)}if(Zn(k)||ue(k))return k=Vi(k,L.mode,M,null),k.return=L,k;el(L,k)}return null}function q(L,k,M,K){var se=k!==null?k.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return se!==null?null:T(L,k,""+M,K);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:return M.key===se?R(L,k,M,K):null;case le:return M.key===se?U(L,k,M,K):null;case Nt:return se=M._init,q(L,k,se(M._payload),K)}if(Zn(M)||ue(M))return se!==null?null:H(L,k,M,K,null);el(L,M)}return null}function Z(L,k,M,K,se){if(typeof K=="string"&&K!==""||typeof K=="number")return L=L.get(M)||null,T(k,L,""+K,se);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case oe:return L=L.get(K.key===null?M:K.key)||null,R(k,L,K,se);case le:return L=L.get(K.key===null?M:K.key)||null,U(k,L,K,se);case Nt:var fe=K._init;return Z(L,k,M,fe(K._payload),se)}if(Zn(K)||ue(K))return L=L.get(M)||null,H(k,L,K,se,null);el(k,K)}return null}function re(L,k,M,K){for(var se=null,fe=null,pe=k,_e=k=0,wt=null;pe!==null&&_e<M.length;_e++){pe.index>_e?(wt=pe,pe=null):wt=pe.sibling;var xe=q(L,pe,M[_e],K);if(xe===null){pe===null&&(pe=wt);break}t&&pe&&xe.alternate===null&&r(L,pe),k=p(xe,k,_e),fe===null?se=xe:fe.sibling=xe,fe=xe,pe=wt}if(_e===M.length)return o(L,pe),Qe&&Si(L,_e),se;if(pe===null){for(;_e<M.length;_e++)pe=W(L,M[_e],K),pe!==null&&(k=p(pe,k,_e),fe===null?se=pe:fe.sibling=pe,fe=pe);return Qe&&Si(L,_e),se}for(pe=u(L,pe);_e<M.length;_e++)wt=Z(pe,L,_e,M[_e],K),wt!==null&&(t&&wt.alternate!==null&&pe.delete(wt.key===null?_e:wt.key),k=p(wt,k,_e),fe===null?se=wt:fe.sibling=wt,fe=wt);return t&&pe.forEach(function(Wr){return r(L,Wr)}),Qe&&Si(L,_e),se}function ie(L,k,M,K){var se=ue(M);if(typeof se!="function")throw Error(n(150));if(M=se.call(M),M==null)throw Error(n(151));for(var fe=se=null,pe=k,_e=k=0,wt=null,xe=M.next();pe!==null&&!xe.done;_e++,xe=M.next()){pe.index>_e?(wt=pe,pe=null):wt=pe.sibling;var Wr=q(L,pe,xe.value,K);if(Wr===null){pe===null&&(pe=wt);break}t&&pe&&Wr.alternate===null&&r(L,pe),k=p(Wr,k,_e),fe===null?se=Wr:fe.sibling=Wr,fe=Wr,pe=wt}if(xe.done)return o(L,pe),Qe&&Si(L,_e),se;if(pe===null){for(;!xe.done;_e++,xe=M.next())xe=W(L,xe.value,K),xe!==null&&(k=p(xe,k,_e),fe===null?se=xe:fe.sibling=xe,fe=xe);return Qe&&Si(L,_e),se}for(pe=u(L,pe);!xe.done;_e++,xe=M.next())xe=Z(pe,L,_e,xe.value,K),xe!==null&&(t&&xe.alternate!==null&&pe.delete(xe.key===null?_e:xe.key),k=p(xe,k,_e),fe===null?se=xe:fe.sibling=xe,fe=xe);return t&&pe.forEach(function(A_){return r(L,A_)}),Qe&&Si(L,_e),se}function rt(L,k,M,K){if(typeof M=="object"&&M!==null&&M.type===P&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case oe:e:{for(var se=M.key,fe=k;fe!==null;){if(fe.key===se){if(se=M.type,se===P){if(fe.tag===7){o(L,fe.sibling),k=h(fe,M.props.children),k.return=L,L=k;break e}}else if(fe.elementType===se||typeof se=="object"&&se!==null&&se.$$typeof===Nt&&Hd(se)===fe.type){o(L,fe.sibling),k=h(fe,M.props),k.ref=Oo(L,fe,M),k.return=L,L=k;break e}o(L,fe);break}else r(L,fe);fe=fe.sibling}M.type===P?(k=Vi(M.props.children,L.mode,K,M.key),k.return=L,L=k):(K=Sl(M.type,M.key,M.props,null,L.mode,K),K.ref=Oo(L,k,M),K.return=L,L=K)}return _(L);case le:e:{for(fe=M.key;k!==null;){if(k.key===fe)if(k.tag===4&&k.stateNode.containerInfo===M.containerInfo&&k.stateNode.implementation===M.implementation){o(L,k.sibling),k=h(k,M.children||[]),k.return=L,L=k;break e}else{o(L,k);break}else r(L,k);k=k.sibling}k=Fc(M,L.mode,K),k.return=L,L=k}return _(L);case Nt:return fe=M._init,rt(L,k,fe(M._payload),K)}if(Zn(M))return re(L,k,M,K);if(ue(M))return ie(L,k,M,K);el(L,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,k!==null&&k.tag===6?(o(L,k.sibling),k=h(k,M),k.return=L,L=k):(o(L,k),k=Mc(M,L.mode,K),k.return=L,L=k),_(L)):o(L,k)}return rt}var Cs=Wd(!0),Qd=Wd(!1),tl=Lr(null),nl=null,Ps=null,Wu=null;function Qu(){Wu=Ps=nl=null}function Ku(t){var r=tl.current;He(tl),t._currentValue=r}function Gu(t,r,o){for(;t!==null;){var u=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),t===o)break;t=t.return}}function ks(t,r){nl=t,Wu=Ps=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&r&&(Qt=!0),t.firstContext=null)}function fn(t){var r=t._currentValue;if(Wu!==t)if(t={context:t,memoizedValue:r,next:null},Ps===null){if(nl===null)throw Error(n(308));Ps=t,nl.dependencies={lanes:0,firstContext:t}}else Ps=Ps.next=t;return r}var Ai=null;function Xu(t){Ai===null?Ai=[t]:Ai.push(t)}function Kd(t,r,o,u){var h=r.interleaved;return h===null?(o.next=o,Xu(r)):(o.next=h.next,h.next=o),r.interleaved=o,dr(t,u)}function dr(t,r){t.lanes|=r;var o=t.alternate;for(o!==null&&(o.lanes|=r),o=t,t=t.return;t!==null;)t.childLanes|=r,o=t.alternate,o!==null&&(o.childLanes|=r),o=t,t=t.return;return o.tag===3?o.stateNode:null}var Ur=!1;function Yu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fr(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function br(t,r,o){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,Ve&2){var h=u.pending;return h===null?r.next=r:(r.next=h.next,h.next=r),u.pending=r,dr(t,o)}return h=u.interleaved,h===null?(r.next=r,Xu(u)):(r.next=h.next,h.next=r),u.interleaved=r,dr(t,o)}function rl(t,r,o){if(r=r.updateQueue,r!==null&&(r=r.shared,(o&4194240)!==0)){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Pr(t,o)}}function Xd(t,r){var o=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var h=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var _={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};p===null?h=p=_:p=p.next=_,o=o.next}while(o!==null);p===null?h=p=r:p=p.next=r}else h=p=r;o={baseState:u.baseState,firstBaseUpdate:h,lastBaseUpdate:p,shared:u.shared,effects:u.effects},t.updateQueue=o;return}t=o.lastBaseUpdate,t===null?o.firstBaseUpdate=r:t.next=r,o.lastBaseUpdate=r}function il(t,r,o,u){var h=t.updateQueue;Ur=!1;var p=h.firstBaseUpdate,_=h.lastBaseUpdate,T=h.shared.pending;if(T!==null){h.shared.pending=null;var R=T,U=R.next;R.next=null,_===null?p=U:_.next=U,_=R;var H=t.alternate;H!==null&&(H=H.updateQueue,T=H.lastBaseUpdate,T!==_&&(T===null?H.firstBaseUpdate=U:T.next=U,H.lastBaseUpdate=R))}if(p!==null){var W=h.baseState;_=0,H=U=R=null,T=p;do{var q=T.lane,Z=T.eventTime;if((u&q)===q){H!==null&&(H=H.next={eventTime:Z,lane:0,tag:T.tag,payload:T.payload,callback:T.callback,next:null});e:{var re=t,ie=T;switch(q=r,Z=o,ie.tag){case 1:if(re=ie.payload,typeof re=="function"){W=re.call(Z,W,q);break e}W=re;break e;case 3:re.flags=re.flags&-65537|128;case 0:if(re=ie.payload,q=typeof re=="function"?re.call(Z,W,q):re,q==null)break e;W=ee({},W,q);break e;case 2:Ur=!0}}T.callback!==null&&T.lane!==0&&(t.flags|=64,q=h.effects,q===null?h.effects=[T]:q.push(T))}else Z={eventTime:Z,lane:q,tag:T.tag,payload:T.payload,callback:T.callback,next:null},H===null?(U=H=Z,R=W):H=H.next=Z,_|=q;if(T=T.next,T===null){if(T=h.shared.pending,T===null)break;q=T,T=q.next,q.next=null,h.lastBaseUpdate=q,h.shared.pending=null}}while(!0);if(H===null&&(R=W),h.baseState=R,h.firstBaseUpdate=U,h.lastBaseUpdate=H,r=h.shared.interleaved,r!==null){h=r;do _|=h.lane,h=h.next;while(h!==r)}else p===null&&(h.shared.lanes=0);Pi|=_,t.lanes=_,t.memoizedState=W}}function Yd(t,r,o){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var u=t[r],h=u.callback;if(h!==null){if(u.callback=null,u=o,typeof h!="function")throw Error(n(191,h));h.call(u)}}}var Lo={},qn=Lr(Lo),Mo=Lr(Lo),Fo=Lr(Lo);function Ri(t){if(t===Lo)throw Error(n(174));return t}function Ju(t,r){switch($e(Fo,r),$e(Mo,t),$e(qn,Lo),t=r.nodeType,t){case 9:case 11:r=(r=r.documentElement)?r.namespaceURI:ut(null,"");break;default:t=t===8?r.parentNode:r,r=t.namespaceURI||null,t=t.tagName,r=ut(r,t)}He(qn),$e(qn,r)}function Ns(){He(qn),He(Mo),He(Fo)}function Jd(t){Ri(Fo.current);var r=Ri(qn.current),o=ut(r,t.type);r!==o&&($e(Mo,t),$e(qn,o))}function Zu(t){Mo.current===t&&(He(qn),He(Mo))}var Xe=Lr(0);function sl(t){for(var r=t;r!==null;){if(r.tag===13){var o=r.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if(r.flags&128)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var ec=[];function tc(){for(var t=0;t<ec.length;t++)ec[t]._workInProgressVersionPrimary=null;ec.length=0}var ol=de.ReactCurrentDispatcher,nc=de.ReactCurrentBatchConfig,Ci=0,Ye=null,ht=null,vt=null,al=!1,Uo=!1,bo=0,Qy=0;function Vt(){throw Error(n(321))}function rc(t,r){if(r===null)return!1;for(var o=0;o<r.length&&o<t.length;o++)if(!kn(t[o],r[o]))return!1;return!0}function ic(t,r,o,u,h,p){if(Ci=p,Ye=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,ol.current=t===null||t.memoizedState===null?Yy:Jy,t=o(u,h),Uo){p=0;do{if(Uo=!1,bo=0,25<=p)throw Error(n(301));p+=1,vt=ht=null,r.updateQueue=null,ol.current=Zy,t=o(u,h)}while(Uo)}if(ol.current=cl,r=ht!==null&&ht.next!==null,Ci=0,vt=ht=Ye=null,al=!1,r)throw Error(n(300));return t}function sc(){var t=bo!==0;return bo=0,t}function Hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ye.memoizedState=vt=t:vt=vt.next=t,vt}function pn(){if(ht===null){var t=Ye.alternate;t=t!==null?t.memoizedState:null}else t=ht.next;var r=vt===null?Ye.memoizedState:vt.next;if(r!==null)vt=r,ht=t;else{if(t===null)throw Error(n(310));ht=t,t={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},vt===null?Ye.memoizedState=vt=t:vt=vt.next=t}return vt}function zo(t,r){return typeof r=="function"?r(t):r}function oc(t){var r=pn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=ht,h=u.baseQueue,p=o.pending;if(p!==null){if(h!==null){var _=h.next;h.next=p.next,p.next=_}u.baseQueue=h=p,o.pending=null}if(h!==null){p=h.next,u=u.baseState;var T=_=null,R=null,U=p;do{var H=U.lane;if((Ci&H)===H)R!==null&&(R=R.next={lane:0,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null}),u=U.hasEagerState?U.eagerState:t(u,U.action);else{var W={lane:H,action:U.action,hasEagerState:U.hasEagerState,eagerState:U.eagerState,next:null};R===null?(T=R=W,_=u):R=R.next=W,Ye.lanes|=H,Pi|=H}U=U.next}while(U!==null&&U!==p);R===null?_=u:R.next=T,kn(u,r.memoizedState)||(Qt=!0),r.memoizedState=u,r.baseState=_,r.baseQueue=R,o.lastRenderedState=u}if(t=o.interleaved,t!==null){h=t;do p=h.lane,Ye.lanes|=p,Pi|=p,h=h.next;while(h!==t)}else h===null&&(o.lanes=0);return[r.memoizedState,o.dispatch]}function ac(t){var r=pn(),o=r.queue;if(o===null)throw Error(n(311));o.lastRenderedReducer=t;var u=o.dispatch,h=o.pending,p=r.memoizedState;if(h!==null){o.pending=null;var _=h=h.next;do p=t(p,_.action),_=_.next;while(_!==h);kn(p,r.memoizedState)||(Qt=!0),r.memoizedState=p,r.baseQueue===null&&(r.baseState=p),o.lastRenderedState=p}return[p,u]}function Zd(){}function ef(t,r){var o=Ye,u=pn(),h=r(),p=!kn(u.memoizedState,h);if(p&&(u.memoizedState=h,Qt=!0),u=u.queue,lc(rf.bind(null,o,u,t),[t]),u.getSnapshot!==r||p||vt!==null&&vt.memoizedState.tag&1){if(o.flags|=2048,Bo(9,nf.bind(null,o,u,h,r),void 0,null),Et===null)throw Error(n(349));Ci&30||tf(o,r,h)}return h}function tf(t,r,o){t.flags|=16384,t={getSnapshot:r,value:o},r=Ye.updateQueue,r===null?(r={lastEffect:null,stores:null},Ye.updateQueue=r,r.stores=[t]):(o=r.stores,o===null?r.stores=[t]:o.push(t))}function nf(t,r,o,u){r.value=o,r.getSnapshot=u,sf(r)&&of(t)}function rf(t,r,o){return o(function(){sf(r)&&of(t)})}function sf(t){var r=t.getSnapshot;t=t.value;try{var o=r();return!kn(t,o)}catch{return!0}}function of(t){var r=dr(t,1);r!==null&&On(r,t,1,-1)}function af(t){var r=Hn();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zo,lastRenderedState:t},r.queue=t,t=t.dispatch=Xy.bind(null,Ye,t),[r.memoizedState,t]}function Bo(t,r,o,u){return t={tag:t,create:r,destroy:o,deps:u,next:null},r=Ye.updateQueue,r===null?(r={lastEffect:null,stores:null},Ye.updateQueue=r,r.lastEffect=t.next=t):(o=r.lastEffect,o===null?r.lastEffect=t.next=t:(u=o.next,o.next=t,t.next=u,r.lastEffect=t)),t}function lf(){return pn().memoizedState}function ll(t,r,o,u){var h=Hn();Ye.flags|=t,h.memoizedState=Bo(1|r,o,void 0,u===void 0?null:u)}function ul(t,r,o,u){var h=pn();u=u===void 0?null:u;var p=void 0;if(ht!==null){var _=ht.memoizedState;if(p=_.destroy,u!==null&&rc(u,_.deps)){h.memoizedState=Bo(r,o,p,u);return}}Ye.flags|=t,h.memoizedState=Bo(1|r,o,p,u)}function uf(t,r){return ll(8390656,8,t,r)}function lc(t,r){return ul(2048,8,t,r)}function cf(t,r){return ul(4,2,t,r)}function hf(t,r){return ul(4,4,t,r)}function df(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function ff(t,r,o){return o=o!=null?o.concat([t]):null,ul(4,4,df.bind(null,r,t),o)}function uc(){}function pf(t,r){var o=pn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&rc(r,u[1])?u[0]:(o.memoizedState=[t,r],t)}function mf(t,r){var o=pn();r=r===void 0?null:r;var u=o.memoizedState;return u!==null&&r!==null&&rc(r,u[1])?u[0]:(t=t(),o.memoizedState=[t,r],t)}function gf(t,r,o){return Ci&21?(kn(o,r)||(o=gi(),Ye.lanes|=o,Pi|=o,t.baseState=!0),r):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=o)}function Ky(t,r){var o=Re;Re=o!==0&&4>o?o:4,t(!0);var u=nc.transition;nc.transition={};try{t(!1),r()}finally{Re=o,nc.transition=u}}function yf(){return pn().memoizedState}function Gy(t,r,o){var u=$r(t);if(o={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null},_f(t))vf(r,o);else if(o=Kd(t,r,o,u),o!==null){var h=Bt();On(o,t,u,h),Ef(o,r,u)}}function Xy(t,r,o){var u=$r(t),h={lane:u,action:o,hasEagerState:!1,eagerState:null,next:null};if(_f(t))vf(r,h);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=r.lastRenderedReducer,p!==null))try{var _=r.lastRenderedState,T=p(_,o);if(h.hasEagerState=!0,h.eagerState=T,kn(T,_)){var R=r.interleaved;R===null?(h.next=h,Xu(r)):(h.next=R.next,R.next=h),r.interleaved=h;return}}catch{}finally{}o=Kd(t,r,h,u),o!==null&&(h=Bt(),On(o,t,u,h),Ef(o,r,u))}}function _f(t){var r=t.alternate;return t===Ye||r!==null&&r===Ye}function vf(t,r){Uo=al=!0;var o=t.pending;o===null?r.next=r:(r.next=o.next,o.next=r),t.pending=r}function Ef(t,r,o){if(o&4194240){var u=r.lanes;u&=t.pendingLanes,o|=u,r.lanes=o,Pr(t,o)}}var cl={readContext:fn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},Yy={readContext:fn,useCallback:function(t,r){return Hn().memoizedState=[t,r===void 0?null:r],t},useContext:fn,useEffect:uf,useImperativeHandle:function(t,r,o){return o=o!=null?o.concat([t]):null,ll(4194308,4,df.bind(null,r,t),o)},useLayoutEffect:function(t,r){return ll(4194308,4,t,r)},useInsertionEffect:function(t,r){return ll(4,2,t,r)},useMemo:function(t,r){var o=Hn();return r=r===void 0?null:r,t=t(),o.memoizedState=[t,r],t},useReducer:function(t,r,o){var u=Hn();return r=o!==void 0?o(r):r,u.memoizedState=u.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},u.queue=t,t=t.dispatch=Gy.bind(null,Ye,t),[u.memoizedState,t]},useRef:function(t){var r=Hn();return t={current:t},r.memoizedState=t},useState:af,useDebugValue:uc,useDeferredValue:function(t){return Hn().memoizedState=t},useTransition:function(){var t=af(!1),r=t[0];return t=Ky.bind(null,t[1]),Hn().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,o){var u=Ye,h=Hn();if(Qe){if(o===void 0)throw Error(n(407));o=o()}else{if(o=r(),Et===null)throw Error(n(349));Ci&30||tf(u,r,o)}h.memoizedState=o;var p={value:o,getSnapshot:r};return h.queue=p,uf(rf.bind(null,u,p,t),[t]),u.flags|=2048,Bo(9,nf.bind(null,u,p,o,r),void 0,null),o},useId:function(){var t=Hn(),r=Et.identifierPrefix;if(Qe){var o=hr,u=cr;o=(u&~(1<<32-Ut(u)-1)).toString(32)+o,r=":"+r+"R"+o,o=bo++,0<o&&(r+="H"+o.toString(32)),r+=":"}else o=Qy++,r=":"+r+"r"+o.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Jy={readContext:fn,useCallback:pf,useContext:fn,useEffect:lc,useImperativeHandle:ff,useInsertionEffect:cf,useLayoutEffect:hf,useMemo:mf,useReducer:oc,useRef:lf,useState:function(){return oc(zo)},useDebugValue:uc,useDeferredValue:function(t){var r=pn();return gf(r,ht.memoizedState,t)},useTransition:function(){var t=oc(zo)[0],r=pn().memoizedState;return[t,r]},useMutableSource:Zd,useSyncExternalStore:ef,useId:yf,unstable_isNewReconciler:!1},Zy={readContext:fn,useCallback:pf,useContext:fn,useEffect:lc,useImperativeHandle:ff,useInsertionEffect:cf,useLayoutEffect:hf,useMemo:mf,useReducer:ac,useRef:lf,useState:function(){return ac(zo)},useDebugValue:uc,useDeferredValue:function(t){var r=pn();return ht===null?r.memoizedState=t:gf(r,ht.memoizedState,t)},useTransition:function(){var t=ac(zo)[0],r=pn().memoizedState;return[t,r]},useMutableSource:Zd,useSyncExternalStore:ef,useId:yf,unstable_isNewReconciler:!1};function Dn(t,r){if(t&&t.defaultProps){r=ee({},r),t=t.defaultProps;for(var o in t)r[o]===void 0&&(r[o]=t[o]);return r}return r}function cc(t,r,o,u){r=t.memoizedState,o=o(u,r),o=o==null?r:ee({},r,o),t.memoizedState=o,t.lanes===0&&(t.updateQueue.baseState=o)}var hl={isMounted:function(t){return(t=t._reactInternals)?Tn(t)===t:!1},enqueueSetState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=$r(t),p=fr(u,h);p.payload=r,o!=null&&(p.callback=o),r=br(t,p,h),r!==null&&(On(r,t,h,u),rl(r,t,h))},enqueueReplaceState:function(t,r,o){t=t._reactInternals;var u=Bt(),h=$r(t),p=fr(u,h);p.tag=1,p.payload=r,o!=null&&(p.callback=o),r=br(t,p,h),r!==null&&(On(r,t,h,u),rl(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var o=Bt(),u=$r(t),h=fr(o,u);h.tag=2,r!=null&&(h.callback=r),r=br(t,h,u),r!==null&&(On(r,t,u,o),rl(r,t,u))}};function wf(t,r,o,u,h,p,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,_):r.prototype&&r.prototype.isPureReactComponent?!Co(o,u)||!Co(h,p):!0}function Tf(t,r,o){var u=!1,h=Mr,p=r.contextType;return typeof p=="object"&&p!==null?p=fn(p):(h=Wt(r)?Ti:Dt.current,u=r.contextTypes,p=(u=u!=null)?Is(t,h):Mr),r=new r(o,p),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=hl,t.stateNode=r,r._reactInternals=t,u&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=h,t.__reactInternalMemoizedMaskedChildContext=p),r}function If(t,r,o,u){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(o,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(o,u),r.state!==t&&hl.enqueueReplaceState(r,r.state,null)}function hc(t,r,o,u){var h=t.stateNode;h.props=o,h.state=t.memoizedState,h.refs={},Yu(t);var p=r.contextType;typeof p=="object"&&p!==null?h.context=fn(p):(p=Wt(r)?Ti:Dt.current,h.context=Is(t,p)),h.state=t.memoizedState,p=r.getDerivedStateFromProps,typeof p=="function"&&(cc(t,r,p,o),h.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(r=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),r!==h.state&&hl.enqueueReplaceState(h,h.state,null),il(t,o,h,u),h.state=t.memoizedState),typeof h.componentDidMount=="function"&&(t.flags|=4194308)}function Ds(t,r){try{var o="",u=r;do o+=Ie(u),u=u.return;while(u);var h=o}catch(p){h=`
Error generating stack: `+p.message+`
`+p.stack}return{value:t,source:r,stack:h,digest:null}}function dc(t,r,o){return{value:t,source:null,stack:o??null,digest:r??null}}function fc(t,r){try{console.error(r.value)}catch(o){setTimeout(function(){throw o})}}var e_=typeof WeakMap=="function"?WeakMap:Map;function Sf(t,r,o){o=fr(-1,o),o.tag=3,o.payload={element:null};var u=r.value;return o.callback=function(){_l||(_l=!0,Pc=u),fc(t,r)},o}function Af(t,r,o){o=fr(-1,o),o.tag=3;var u=t.type.getDerivedStateFromError;if(typeof u=="function"){var h=r.value;o.payload=function(){return u(h)},o.callback=function(){fc(t,r)}}var p=t.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(o.callback=function(){fc(t,r),typeof u!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var _=r.stack;this.componentDidCatch(r.value,{componentStack:_!==null?_:""})}),o}function Rf(t,r,o){var u=t.pingCache;if(u===null){u=t.pingCache=new e_;var h=new Set;u.set(r,h)}else h=u.get(r),h===void 0&&(h=new Set,u.set(r,h));h.has(o)||(h.add(o),t=p_.bind(null,t,r,o),r.then(t,t))}function Cf(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Pf(t,r,o,u,h){return t.mode&1?(t.flags|=65536,t.lanes=h,t):(t===r?t.flags|=65536:(t.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(r=fr(-1,1),r.tag=2,br(o,r,1))),o.lanes|=1),t)}var t_=de.ReactCurrentOwner,Qt=!1;function zt(t,r,o,u){r.child=t===null?Qd(r,null,o,u):Cs(r,t.child,o,u)}function kf(t,r,o,u,h){o=o.render;var p=r.ref;return ks(r,h),u=ic(t,r,o,u,p,h),o=sc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,pr(t,r,h)):(Qe&&o&&Bu(r),r.flags|=1,zt(t,r,u,h),r.child)}function Nf(t,r,o,u,h){if(t===null){var p=o.type;return typeof p=="function"&&!Lc(p)&&p.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(r.tag=15,r.type=p,Df(t,r,p,u,h)):(t=Sl(o.type,null,u,r,r.mode,h),t.ref=r.ref,t.return=r,r.child=t)}if(p=t.child,!(t.lanes&h)){var _=p.memoizedProps;if(o=o.compare,o=o!==null?o:Co,o(_,u)&&t.ref===r.ref)return pr(t,r,h)}return r.flags|=1,t=Hr(p,u),t.ref=r.ref,t.return=r,r.child=t}function Df(t,r,o,u,h){if(t!==null){var p=t.memoizedProps;if(Co(p,u)&&t.ref===r.ref)if(Qt=!1,r.pendingProps=u=p,(t.lanes&h)!==0)t.flags&131072&&(Qt=!0);else return r.lanes=t.lanes,pr(t,r,h)}return pc(t,r,o,u,h)}function Vf(t,r,o){var u=r.pendingProps,h=u.children,p=t!==null?t.memoizedState:null;if(u.mode==="hidden")if(!(r.mode&1))r.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(xs,sn),sn|=o;else{if(!(o&1073741824))return t=p!==null?p.baseLanes|o:o,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,$e(xs,sn),sn|=t,null;r.memoizedState={baseLanes:0,cachePool:null,transitions:null},u=p!==null?p.baseLanes:o,$e(xs,sn),sn|=u}else p!==null?(u=p.baseLanes|o,r.memoizedState=null):u=o,$e(xs,sn),sn|=u;return zt(t,r,h,o),r.child}function xf(t,r){var o=r.ref;(t===null&&o!==null||t!==null&&t.ref!==o)&&(r.flags|=512,r.flags|=2097152)}function pc(t,r,o,u,h){var p=Wt(o)?Ti:Dt.current;return p=Is(r,p),ks(r,h),o=ic(t,r,o,u,p,h),u=sc(),t!==null&&!Qt?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~h,pr(t,r,h)):(Qe&&u&&Bu(r),r.flags|=1,zt(t,r,o,h),r.child)}function Of(t,r,o,u,h){if(Wt(o)){var p=!0;Ga(r)}else p=!1;if(ks(r,h),r.stateNode===null)fl(t,r),Tf(r,o,u),hc(r,o,u,h),u=!0;else if(t===null){var _=r.stateNode,T=r.memoizedProps;_.props=T;var R=_.context,U=o.contextType;typeof U=="object"&&U!==null?U=fn(U):(U=Wt(o)?Ti:Dt.current,U=Is(r,U));var H=o.getDerivedStateFromProps,W=typeof H=="function"||typeof _.getSnapshotBeforeUpdate=="function";W||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==u||R!==U)&&If(r,_,u,U),Ur=!1;var q=r.memoizedState;_.state=q,il(r,u,_,h),R=r.memoizedState,T!==u||q!==R||Ht.current||Ur?(typeof H=="function"&&(cc(r,o,H,u),R=r.memoizedState),(T=Ur||wf(r,o,T,u,q,R,U))?(W||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(r.flags|=4194308)):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=R),_.props=u,_.state=R,_.context=U,u=T):(typeof _.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{_=r.stateNode,Gd(t,r),T=r.memoizedProps,U=r.type===r.elementType?T:Dn(r.type,T),_.props=U,W=r.pendingProps,q=_.context,R=o.contextType,typeof R=="object"&&R!==null?R=fn(R):(R=Wt(o)?Ti:Dt.current,R=Is(r,R));var Z=o.getDerivedStateFromProps;(H=typeof Z=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(T!==W||q!==R)&&If(r,_,u,R),Ur=!1,q=r.memoizedState,_.state=q,il(r,u,_,h);var re=r.memoizedState;T!==W||q!==re||Ht.current||Ur?(typeof Z=="function"&&(cc(r,o,Z,u),re=r.memoizedState),(U=Ur||wf(r,o,U,u,q,re,R)||!1)?(H||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,re,R),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,re,R)),typeof _.componentDidUpdate=="function"&&(r.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=re),_.props=u,_.state=re,_.context=R,u=U):(typeof _.componentDidUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&q===t.memoizedState||(r.flags|=1024),u=!1)}return mc(t,r,o,u,p,h)}function mc(t,r,o,u,h,p){xf(t,r);var _=(r.flags&128)!==0;if(!u&&!_)return h&&Ud(r,o,!1),pr(t,r,p);u=r.stateNode,t_.current=r;var T=_&&typeof o.getDerivedStateFromError!="function"?null:u.render();return r.flags|=1,t!==null&&_?(r.child=Cs(r,t.child,null,p),r.child=Cs(r,null,T,p)):zt(t,r,T,p),r.memoizedState=u.state,h&&Ud(r,o,!0),r.child}function Lf(t){var r=t.stateNode;r.pendingContext?Md(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Md(t,r.context,!1),Ju(t,r.containerInfo)}function Mf(t,r,o,u,h){return Rs(),Hu(h),r.flags|=256,zt(t,r,o,u),r.child}var gc={dehydrated:null,treeContext:null,retryLane:0};function yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ff(t,r,o){var u=r.pendingProps,h=Xe.current,p=!1,_=(r.flags&128)!==0,T;if((T=_)||(T=t!==null&&t.memoizedState===null?!1:(h&2)!==0),T?(p=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(h|=1),$e(Xe,h&1),t===null)return qu(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(r.mode&1?t.data==="$!"?r.lanes=8:r.lanes=1073741824:r.lanes=1,null):(_=u.children,t=u.fallback,p?(u=r.mode,p=r.child,_={mode:"hidden",children:_},!(u&1)&&p!==null?(p.childLanes=0,p.pendingProps=_):p=Al(_,u,0,null),t=Vi(t,u,o,null),p.return=r,t.return=r,p.sibling=t,r.child=p,r.child.memoizedState=yc(o),r.memoizedState=gc,t):_c(r,_));if(h=t.memoizedState,h!==null&&(T=h.dehydrated,T!==null))return n_(t,r,_,u,T,h,o);if(p){p=u.fallback,_=r.mode,h=t.child,T=h.sibling;var R={mode:"hidden",children:u.children};return!(_&1)&&r.child!==h?(u=r.child,u.childLanes=0,u.pendingProps=R,r.deletions=null):(u=Hr(h,R),u.subtreeFlags=h.subtreeFlags&14680064),T!==null?p=Hr(T,p):(p=Vi(p,_,o,null),p.flags|=2),p.return=r,u.return=r,u.sibling=p,r.child=u,u=p,p=r.child,_=t.child.memoizedState,_=_===null?yc(o):{baseLanes:_.baseLanes|o,cachePool:null,transitions:_.transitions},p.memoizedState=_,p.childLanes=t.childLanes&~o,r.memoizedState=gc,u}return p=t.child,t=p.sibling,u=Hr(p,{mode:"visible",children:u.children}),!(r.mode&1)&&(u.lanes=o),u.return=r,u.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=u,r.memoizedState=null,u}function _c(t,r){return r=Al({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function dl(t,r,o,u){return u!==null&&Hu(u),Cs(r,t.child,null,o),t=_c(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function n_(t,r,o,u,h,p,_){if(o)return r.flags&256?(r.flags&=-257,u=dc(Error(n(422))),dl(t,r,_,u)):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(p=u.fallback,h=r.mode,u=Al({mode:"visible",children:u.children},h,0,null),p=Vi(p,h,_,null),p.flags|=2,u.return=r,p.return=r,u.sibling=p,r.child=u,r.mode&1&&Cs(r,t.child,null,_),r.child.memoizedState=yc(_),r.memoizedState=gc,p);if(!(r.mode&1))return dl(t,r,_,null);if(h.data==="$!"){if(u=h.nextSibling&&h.nextSibling.dataset,u)var T=u.dgst;return u=T,p=Error(n(419)),u=dc(p,u,void 0),dl(t,r,_,u)}if(T=(_&t.childLanes)!==0,Qt||T){if(u=Et,u!==null){switch(_&-_){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(u.suspendedLanes|_)?0:h,h!==0&&h!==p.retryLane&&(p.retryLane=h,dr(t,h),On(u,t,h,-1))}return Oc(),u=dc(Error(n(421))),dl(t,r,_,u)}return h.data==="$?"?(r.flags|=128,r.child=t.child,r=m_.bind(null,t),h._reactRetry=r,null):(t=p.treeContext,rn=Or(h.nextSibling),nn=r,Qe=!0,Nn=null,t!==null&&(hn[dn++]=cr,hn[dn++]=hr,hn[dn++]=Ii,cr=t.id,hr=t.overflow,Ii=r),r=_c(r,u.children),r.flags|=4096,r)}function Uf(t,r,o){t.lanes|=r;var u=t.alternate;u!==null&&(u.lanes|=r),Gu(t.return,r,o)}function vc(t,r,o,u,h){var p=t.memoizedState;p===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:h}:(p.isBackwards=r,p.rendering=null,p.renderingStartTime=0,p.last=u,p.tail=o,p.tailMode=h)}function bf(t,r,o){var u=r.pendingProps,h=u.revealOrder,p=u.tail;if(zt(t,r,u.children,o),u=Xe.current,u&2)u=u&1|2,r.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Uf(t,o,r);else if(t.tag===19)Uf(t,o,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}u&=1}if($e(Xe,u),!(r.mode&1))r.memoizedState=null;else switch(h){case"forwards":for(o=r.child,h=null;o!==null;)t=o.alternate,t!==null&&sl(t)===null&&(h=o),o=o.sibling;o=h,o===null?(h=r.child,r.child=null):(h=o.sibling,o.sibling=null),vc(r,!1,h,o,p);break;case"backwards":for(o=null,h=r.child,r.child=null;h!==null;){if(t=h.alternate,t!==null&&sl(t)===null){r.child=h;break}t=h.sibling,h.sibling=o,o=h,h=t}vc(r,!0,o,null,p);break;case"together":vc(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function fl(t,r){!(r.mode&1)&&t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2)}function pr(t,r,o){if(t!==null&&(r.dependencies=t.dependencies),Pi|=r.lanes,!(o&r.childLanes))return null;if(t!==null&&r.child!==t.child)throw Error(n(153));if(r.child!==null){for(t=r.child,o=Hr(t,t.pendingProps),r.child=o,o.return=r;t.sibling!==null;)t=t.sibling,o=o.sibling=Hr(t,t.pendingProps),o.return=r;o.sibling=null}return r.child}function r_(t,r,o){switch(r.tag){case 3:Lf(r),Rs();break;case 5:Jd(r);break;case 1:Wt(r.type)&&Ga(r);break;case 4:Ju(r,r.stateNode.containerInfo);break;case 10:var u=r.type._context,h=r.memoizedProps.value;$e(tl,u._currentValue),u._currentValue=h;break;case 13:if(u=r.memoizedState,u!==null)return u.dehydrated!==null?($e(Xe,Xe.current&1),r.flags|=128,null):o&r.child.childLanes?Ff(t,r,o):($e(Xe,Xe.current&1),t=pr(t,r,o),t!==null?t.sibling:null);$e(Xe,Xe.current&1);break;case 19:if(u=(o&r.childLanes)!==0,t.flags&128){if(u)return bf(t,r,o);r.flags|=128}if(h=r.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),$e(Xe,Xe.current),u)break;return null;case 22:case 23:return r.lanes=0,Vf(t,r,o)}return pr(t,r,o)}var zf,Ec,Bf,jf;zf=function(t,r){for(var o=r.child;o!==null;){if(o.tag===5||o.tag===6)t.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},Ec=function(){},Bf=function(t,r,o,u){var h=t.memoizedProps;if(h!==u){t=r.stateNode,Ri(qn.current);var p=null;switch(o){case"input":h=si(t,h),u=si(t,u),p=[];break;case"select":h=ee({},h,{value:void 0}),u=ee({},u,{value:void 0}),p=[];break;case"textarea":h=to(t,h),u=to(t,u),p=[];break;default:typeof h.onClick!="function"&&typeof u.onClick=="function"&&(t.onclick=Wa)}ao(o,u);var _;o=null;for(U in h)if(!u.hasOwnProperty(U)&&h.hasOwnProperty(U)&&h[U]!=null)if(U==="style"){var T=h[U];for(_ in T)T.hasOwnProperty(_)&&(o||(o={}),o[_]="")}else U!=="dangerouslySetInnerHTML"&&U!=="children"&&U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(a.hasOwnProperty(U)?p||(p=[]):(p=p||[]).push(U,null));for(U in u){var R=u[U];if(T=h!=null?h[U]:void 0,u.hasOwnProperty(U)&&R!==T&&(R!=null||T!=null))if(U==="style")if(T){for(_ in T)!T.hasOwnProperty(_)||R&&R.hasOwnProperty(_)||(o||(o={}),o[_]="");for(_ in R)R.hasOwnProperty(_)&&T[_]!==R[_]&&(o||(o={}),o[_]=R[_])}else o||(p||(p=[]),p.push(U,o)),o=R;else U==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,T=T?T.__html:void 0,R!=null&&T!==R&&(p=p||[]).push(U,R)):U==="children"?typeof R!="string"&&typeof R!="number"||(p=p||[]).push(U,""+R):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&(a.hasOwnProperty(U)?(R!=null&&U==="onScroll"&&qe("scroll",t),p||T===R||(p=[])):(p=p||[]).push(U,R))}o&&(p=p||[]).push("style",o);var U=p;(r.updateQueue=U)&&(r.flags|=4)}},jf=function(t,r,o,u){o!==u&&(r.flags|=4)};function jo(t,r){if(!Qe)switch(t.tailMode){case"hidden":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t.tail=null:o.sibling=null;break;case"collapsed":o=t.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function xt(t){var r=t.alternate!==null&&t.alternate.child===t.child,o=0,u=0;if(r)for(var h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags&14680064,u|=h.flags&14680064,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)o|=h.lanes|h.childLanes,u|=h.subtreeFlags,u|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=u,t.childLanes=o,r}function i_(t,r,o){var u=r.pendingProps;switch(ju(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(r),null;case 1:return Wt(r.type)&&Ka(),xt(r),null;case 3:return u=r.stateNode,Ns(),He(Ht),He(Dt),tc(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(t===null||t.child===null)&&(Za(r)?r.flags|=4:t===null||t.memoizedState.isDehydrated&&!(r.flags&256)||(r.flags|=1024,Nn!==null&&(Dc(Nn),Nn=null))),Ec(t,r),xt(r),null;case 5:Zu(r);var h=Ri(Fo.current);if(o=r.type,t!==null&&r.stateNode!=null)Bf(t,r,o,u,h),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!u){if(r.stateNode===null)throw Error(n(166));return xt(r),null}if(t=Ri(qn.current),Za(r)){u=r.stateNode,o=r.type;var p=r.memoizedProps;switch(u[$n]=r,u[Vo]=p,t=(r.mode&1)!==0,o){case"dialog":qe("cancel",u),qe("close",u);break;case"iframe":case"object":case"embed":qe("load",u);break;case"video":case"audio":for(h=0;h<ko.length;h++)qe(ko[h],u);break;case"source":qe("error",u);break;case"img":case"image":case"link":qe("error",u),qe("load",u);break;case"details":qe("toggle",u);break;case"input":Hi(u,p),qe("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!p.multiple},qe("invalid",u);break;case"textarea":Qi(u,p),qe("invalid",u)}ao(o,p),h=null;for(var _ in p)if(p.hasOwnProperty(_)){var T=p[_];_==="children"?typeof T=="string"?u.textContent!==T&&(p.suppressHydrationWarning!==!0&&Ha(u.textContent,T,t),h=["children",T]):typeof T=="number"&&u.textContent!==""+T&&(p.suppressHydrationWarning!==!0&&Ha(u.textContent,T,t),h=["children",""+T]):a.hasOwnProperty(_)&&T!=null&&_==="onScroll"&&qe("scroll",u)}switch(o){case"input":Jn(u),ya(u,p,!0);break;case"textarea":Jn(u),no(u);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(u.onclick=Wa)}u=h,r.updateQueue=u,u!==null&&(r.flags|=4)}else{_=h.nodeType===9?h:h.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lt(o)),t==="http://www.w3.org/1999/xhtml"?o==="script"?(t=_.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof u.is=="string"?t=_.createElement(o,{is:u.is}):(t=_.createElement(o),o==="select"&&(_=t,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):t=_.createElementNS(t,o),t[$n]=r,t[Vo]=u,zf(t,r,!1,!1),r.stateNode=t;e:{switch(_=lo(o,u),o){case"dialog":qe("cancel",t),qe("close",t),h=u;break;case"iframe":case"object":case"embed":qe("load",t),h=u;break;case"video":case"audio":for(h=0;h<ko.length;h++)qe(ko[h],t);h=u;break;case"source":qe("error",t),h=u;break;case"img":case"image":case"link":qe("error",t),qe("load",t),h=u;break;case"details":qe("toggle",t),h=u;break;case"input":Hi(t,u),h=si(t,u),qe("invalid",t);break;case"option":h=u;break;case"select":t._wrapperState={wasMultiple:!!u.multiple},h=ee({},u,{value:void 0}),qe("invalid",t);break;case"textarea":Qi(t,u),h=to(t,u),qe("invalid",t);break;default:h=u}ao(o,h),T=h;for(p in T)if(T.hasOwnProperty(p)){var R=T[p];p==="style"?so(t,R):p==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&ro(t,R)):p==="children"?typeof R=="string"?(o!=="textarea"||R!=="")&&Ir(t,R):typeof R=="number"&&Ir(t,""+R):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(a.hasOwnProperty(p)?R!=null&&p==="onScroll"&&qe("scroll",t):R!=null&&he(t,p,R,_))}switch(o){case"input":Jn(t),ya(t,u,!1);break;case"textarea":Jn(t),no(t);break;case"option":u.value!=null&&t.setAttribute("value",""+Le(u.value));break;case"select":t.multiple=!!u.multiple,p=u.value,p!=null?er(t,!!u.multiple,p,!1):u.defaultValue!=null&&er(t,!!u.multiple,u.defaultValue,!0);break;default:typeof h.onClick=="function"&&(t.onclick=Wa)}switch(o){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}}u&&(r.flags|=4)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return xt(r),null;case 6:if(t&&r.stateNode!=null)jf(t,r,t.memoizedProps,u);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(o=Ri(Fo.current),Ri(qn.current),Za(r)){if(u=r.stateNode,o=r.memoizedProps,u[$n]=r,(p=u.nodeValue!==o)&&(t=nn,t!==null))switch(t.tag){case 3:Ha(u.nodeValue,o,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(u.nodeValue,o,(t.mode&1)!==0)}p&&(r.flags|=4)}else u=(o.nodeType===9?o:o.ownerDocument).createTextNode(u),u[$n]=r,r.stateNode=u}return xt(r),null;case 13:if(He(Xe),u=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&rn!==null&&r.mode&1&&!(r.flags&128))qd(),Rs(),r.flags|=98560,p=!1;else if(p=Za(r),u!==null&&u.dehydrated!==null){if(t===null){if(!p)throw Error(n(318));if(p=r.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(n(317));p[$n]=r}else Rs(),!(r.flags&128)&&(r.memoizedState=null),r.flags|=4;xt(r),p=!1}else Nn!==null&&(Dc(Nn),Nn=null),p=!0;if(!p)return r.flags&65536?r:null}return r.flags&128?(r.lanes=o,r):(u=u!==null,u!==(t!==null&&t.memoizedState!==null)&&u&&(r.child.flags|=8192,r.mode&1&&(t===null||Xe.current&1?dt===0&&(dt=3):Oc())),r.updateQueue!==null&&(r.flags|=4),xt(r),null);case 4:return Ns(),Ec(t,r),t===null&&No(r.stateNode.containerInfo),xt(r),null;case 10:return Ku(r.type._context),xt(r),null;case 17:return Wt(r.type)&&Ka(),xt(r),null;case 19:if(He(Xe),p=r.memoizedState,p===null)return xt(r),null;if(u=(r.flags&128)!==0,_=p.rendering,_===null)if(u)jo(p,!1);else{if(dt!==0||t!==null&&t.flags&128)for(t=r.child;t!==null;){if(_=sl(t),_!==null){for(r.flags|=128,jo(p,!1),u=_.updateQueue,u!==null&&(r.updateQueue=u,r.flags|=4),r.subtreeFlags=0,u=o,o=r.child;o!==null;)p=o,t=u,p.flags&=14680066,_=p.alternate,_===null?(p.childLanes=0,p.lanes=t,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=_.childLanes,p.lanes=_.lanes,p.child=_.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=_.memoizedProps,p.memoizedState=_.memoizedState,p.updateQueue=_.updateQueue,p.type=_.type,t=_.dependencies,p.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),o=o.sibling;return $e(Xe,Xe.current&1|2),r.child}t=t.sibling}p.tail!==null&&je()>Os&&(r.flags|=128,u=!0,jo(p,!1),r.lanes=4194304)}else{if(!u)if(t=sl(_),t!==null){if(r.flags|=128,u=!0,o=t.updateQueue,o!==null&&(r.updateQueue=o,r.flags|=4),jo(p,!0),p.tail===null&&p.tailMode==="hidden"&&!_.alternate&&!Qe)return xt(r),null}else 2*je()-p.renderingStartTime>Os&&o!==1073741824&&(r.flags|=128,u=!0,jo(p,!1),r.lanes=4194304);p.isBackwards?(_.sibling=r.child,r.child=_):(o=p.last,o!==null?o.sibling=_:r.child=_,p.last=_)}return p.tail!==null?(r=p.tail,p.rendering=r,p.tail=r.sibling,p.renderingStartTime=je(),r.sibling=null,o=Xe.current,$e(Xe,u?o&1|2:o&1),r):(xt(r),null);case 22:case 23:return xc(),u=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==u&&(r.flags|=8192),u&&r.mode&1?sn&1073741824&&(xt(r),r.subtreeFlags&6&&(r.flags|=8192)):xt(r),null;case 24:return null;case 25:return null}throw Error(n(156,r.tag))}function s_(t,r){switch(ju(r),r.tag){case 1:return Wt(r.type)&&Ka(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Ns(),He(Ht),He(Dt),tc(),t=r.flags,t&65536&&!(t&128)?(r.flags=t&-65537|128,r):null;case 5:return Zu(r),null;case 13:if(He(Xe),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Rs()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return He(Xe),null;case 4:return Ns(),null;case 10:return Ku(r.type._context),null;case 22:case 23:return xc(),null;case 24:return null;default:return null}}var pl=!1,Ot=!1,o_=typeof WeakSet=="function"?WeakSet:Set,ne=null;function Vs(t,r){var o=t.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(u){Ze(t,r,u)}else o.current=null}function wc(t,r,o){try{o()}catch(u){Ze(t,r,u)}}var $f=!1;function a_(t,r){if(xu=Dr,t=Ed(),Au(t)){if("selectionStart"in t)var o={start:t.selectionStart,end:t.selectionEnd};else e:{o=(o=t.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var h=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var _=0,T=-1,R=-1,U=0,H=0,W=t,q=null;t:for(;;){for(var Z;W!==o||h!==0&&W.nodeType!==3||(T=_+h),W!==p||u!==0&&W.nodeType!==3||(R=_+u),W.nodeType===3&&(_+=W.nodeValue.length),(Z=W.firstChild)!==null;)q=W,W=Z;for(;;){if(W===t)break t;if(q===o&&++U===h&&(T=_),q===p&&++H===u&&(R=_),(Z=W.nextSibling)!==null)break;W=q,q=W.parentNode}W=Z}o=T===-1||R===-1?null:{start:T,end:R}}else o=null}o=o||{start:0,end:0}}else o=null;for(Ou={focusedElem:t,selectionRange:o},Dr=!1,ne=r;ne!==null;)if(r=ne,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,ne=t;else for(;ne!==null;){r=ne;try{var re=r.alternate;if(r.flags&1024)switch(r.tag){case 0:case 11:case 15:break;case 1:if(re!==null){var ie=re.memoizedProps,rt=re.memoizedState,L=r.stateNode,k=L.getSnapshotBeforeUpdate(r.elementType===r.type?ie:Dn(r.type,ie),rt);L.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var M=r.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(K){Ze(r,r.return,K)}if(t=r.sibling,t!==null){t.return=r.return,ne=t;break}ne=r.return}return re=$f,$f=!1,re}function $o(t,r,o){var u=r.updateQueue;if(u=u!==null?u.lastEffect:null,u!==null){var h=u=u.next;do{if((h.tag&t)===t){var p=h.destroy;h.destroy=void 0,p!==void 0&&wc(r,o,p)}h=h.next}while(h!==u)}}function ml(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&t)===t){var u=o.create;o.destroy=u()}o=o.next}while(o!==r)}}function Tc(t){var r=t.ref;if(r!==null){var o=t.stateNode;switch(t.tag){case 5:t=o;break;default:t=o}typeof r=="function"?r(t):r.current=t}}function qf(t){var r=t.alternate;r!==null&&(t.alternate=null,qf(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&(delete r[$n],delete r[Vo],delete r[Uu],delete r[$y],delete r[qy])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Hf(t){return t.tag===5||t.tag===3||t.tag===4}function Wf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Hf(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ic(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.nodeType===8?o.parentNode.insertBefore(t,r):o.insertBefore(t,r):(o.nodeType===8?(r=o.parentNode,r.insertBefore(t,o)):(r=o,r.appendChild(t)),o=o._reactRootContainer,o!=null||r.onclick!==null||(r.onclick=Wa));else if(u!==4&&(t=t.child,t!==null))for(Ic(t,r,o),t=t.sibling;t!==null;)Ic(t,r,o),t=t.sibling}function Sc(t,r,o){var u=t.tag;if(u===5||u===6)t=t.stateNode,r?o.insertBefore(t,r):o.appendChild(t);else if(u!==4&&(t=t.child,t!==null))for(Sc(t,r,o),t=t.sibling;t!==null;)Sc(t,r,o),t=t.sibling}var At=null,Vn=!1;function zr(t,r,o){for(o=o.child;o!==null;)Qf(t,r,o),o=o.sibling}function Qf(t,r,o){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(pi,o)}catch{}switch(o.tag){case 5:Ot||Vs(o,r);case 6:var u=At,h=Vn;At=null,zr(t,r,o),At=u,Vn=h,At!==null&&(Vn?(t=At,o=o.stateNode,t.nodeType===8?t.parentNode.removeChild(o):t.removeChild(o)):At.removeChild(o.stateNode));break;case 18:At!==null&&(Vn?(t=At,o=o.stateNode,t.nodeType===8?Fu(t.parentNode,o):t.nodeType===1&&Fu(t,o),Cn(t)):Fu(At,o.stateNode));break;case 4:u=At,h=Vn,At=o.stateNode.containerInfo,Vn=!0,zr(t,r,o),At=u,Vn=h;break;case 0:case 11:case 14:case 15:if(!Ot&&(u=o.updateQueue,u!==null&&(u=u.lastEffect,u!==null))){h=u=u.next;do{var p=h,_=p.destroy;p=p.tag,_!==void 0&&(p&2||p&4)&&wc(o,r,_),h=h.next}while(h!==u)}zr(t,r,o);break;case 1:if(!Ot&&(Vs(o,r),u=o.stateNode,typeof u.componentWillUnmount=="function"))try{u.props=o.memoizedProps,u.state=o.memoizedState,u.componentWillUnmount()}catch(T){Ze(o,r,T)}zr(t,r,o);break;case 21:zr(t,r,o);break;case 22:o.mode&1?(Ot=(u=Ot)||o.memoizedState!==null,zr(t,r,o),Ot=u):zr(t,r,o);break;default:zr(t,r,o)}}function Kf(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var o=t.stateNode;o===null&&(o=t.stateNode=new o_),r.forEach(function(u){var h=g_.bind(null,t,u);o.has(u)||(o.add(u),u.then(h,h))})}}function xn(t,r){var o=r.deletions;if(o!==null)for(var u=0;u<o.length;u++){var h=o[u];try{var p=t,_=r,T=_;e:for(;T!==null;){switch(T.tag){case 5:At=T.stateNode,Vn=!1;break e;case 3:At=T.stateNode.containerInfo,Vn=!0;break e;case 4:At=T.stateNode.containerInfo,Vn=!0;break e}T=T.return}if(At===null)throw Error(n(160));Qf(p,_,h),At=null,Vn=!1;var R=h.alternate;R!==null&&(R.return=null),h.return=null}catch(U){Ze(h,r,U)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Gf(r,t),r=r.sibling}function Gf(t,r){var o=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(r,t),Wn(t),u&4){try{$o(3,t,t.return),ml(3,t)}catch(ie){Ze(t,t.return,ie)}try{$o(5,t,t.return)}catch(ie){Ze(t,t.return,ie)}}break;case 1:xn(r,t),Wn(t),u&512&&o!==null&&Vs(o,o.return);break;case 5:if(xn(r,t),Wn(t),u&512&&o!==null&&Vs(o,o.return),t.flags&32){var h=t.stateNode;try{Ir(h,"")}catch(ie){Ze(t,t.return,ie)}}if(u&4&&(h=t.stateNode,h!=null)){var p=t.memoizedProps,_=o!==null?o.memoizedProps:p,T=t.type,R=t.updateQueue;if(t.updateQueue=null,R!==null)try{T==="input"&&p.type==="radio"&&p.name!=null&&Zs(h,p),lo(T,_);var U=lo(T,p);for(_=0;_<R.length;_+=2){var H=R[_],W=R[_+1];H==="style"?so(h,W):H==="dangerouslySetInnerHTML"?ro(h,W):H==="children"?Ir(h,W):he(h,H,W,U)}switch(T){case"input":eo(h,p);break;case"textarea":Ki(h,p);break;case"select":var q=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!p.multiple;var Z=p.value;Z!=null?er(h,!!p.multiple,Z,!1):q!==!!p.multiple&&(p.defaultValue!=null?er(h,!!p.multiple,p.defaultValue,!0):er(h,!!p.multiple,p.multiple?[]:"",!1))}h[Vo]=p}catch(ie){Ze(t,t.return,ie)}}break;case 6:if(xn(r,t),Wn(t),u&4){if(t.stateNode===null)throw Error(n(162));h=t.stateNode,p=t.memoizedProps;try{h.nodeValue=p}catch(ie){Ze(t,t.return,ie)}}break;case 3:if(xn(r,t),Wn(t),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Cn(r.containerInfo)}catch(ie){Ze(t,t.return,ie)}break;case 4:xn(r,t),Wn(t);break;case 13:xn(r,t),Wn(t),h=t.child,h.flags&8192&&(p=h.memoizedState!==null,h.stateNode.isHidden=p,!p||h.alternate!==null&&h.alternate.memoizedState!==null||(Cc=je())),u&4&&Kf(t);break;case 22:if(H=o!==null&&o.memoizedState!==null,t.mode&1?(Ot=(U=Ot)||H,xn(r,t),Ot=U):xn(r,t),Wn(t),u&8192){if(U=t.memoizedState!==null,(t.stateNode.isHidden=U)&&!H&&t.mode&1)for(ne=t,H=t.child;H!==null;){for(W=ne=H;ne!==null;){switch(q=ne,Z=q.child,q.tag){case 0:case 11:case 14:case 15:$o(4,q,q.return);break;case 1:Vs(q,q.return);var re=q.stateNode;if(typeof re.componentWillUnmount=="function"){u=q,o=q.return;try{r=u,re.props=r.memoizedProps,re.state=r.memoizedState,re.componentWillUnmount()}catch(ie){Ze(u,o,ie)}}break;case 5:Vs(q,q.return);break;case 22:if(q.memoizedState!==null){Jf(W);continue}}Z!==null?(Z.return=q,ne=Z):Jf(W)}H=H.sibling}e:for(H=null,W=t;;){if(W.tag===5){if(H===null){H=W;try{h=W.stateNode,U?(p=h.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(T=W.stateNode,R=W.memoizedProps.style,_=R!=null&&R.hasOwnProperty("display")?R.display:null,T.style.display=io("display",_))}catch(ie){Ze(t,t.return,ie)}}}else if(W.tag===6){if(H===null)try{W.stateNode.nodeValue=U?"":W.memoizedProps}catch(ie){Ze(t,t.return,ie)}}else if((W.tag!==22&&W.tag!==23||W.memoizedState===null||W===t)&&W.child!==null){W.child.return=W,W=W.child;continue}if(W===t)break e;for(;W.sibling===null;){if(W.return===null||W.return===t)break e;H===W&&(H=null),W=W.return}H===W&&(H=null),W.sibling.return=W.return,W=W.sibling}}break;case 19:xn(r,t),Wn(t),u&4&&Kf(t);break;case 21:break;default:xn(r,t),Wn(t)}}function Wn(t){var r=t.flags;if(r&2){try{e:{for(var o=t.return;o!==null;){if(Hf(o)){var u=o;break e}o=o.return}throw Error(n(160))}switch(u.tag){case 5:var h=u.stateNode;u.flags&32&&(Ir(h,""),u.flags&=-33);var p=Wf(t);Sc(t,p,h);break;case 3:case 4:var _=u.stateNode.containerInfo,T=Wf(t);Ic(t,T,_);break;default:throw Error(n(161))}}catch(R){Ze(t,t.return,R)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function l_(t,r,o){ne=t,Xf(t)}function Xf(t,r,o){for(var u=(t.mode&1)!==0;ne!==null;){var h=ne,p=h.child;if(h.tag===22&&u){var _=h.memoizedState!==null||pl;if(!_){var T=h.alternate,R=T!==null&&T.memoizedState!==null||Ot;T=pl;var U=Ot;if(pl=_,(Ot=R)&&!U)for(ne=h;ne!==null;)_=ne,R=_.child,_.tag===22&&_.memoizedState!==null?Zf(h):R!==null?(R.return=_,ne=R):Zf(h);for(;p!==null;)ne=p,Xf(p),p=p.sibling;ne=h,pl=T,Ot=U}Yf(t)}else h.subtreeFlags&8772&&p!==null?(p.return=h,ne=p):Yf(t)}}function Yf(t){for(;ne!==null;){var r=ne;if(r.flags&8772){var o=r.alternate;try{if(r.flags&8772)switch(r.tag){case 0:case 11:case 15:Ot||ml(5,r);break;case 1:var u=r.stateNode;if(r.flags&4&&!Ot)if(o===null)u.componentDidMount();else{var h=r.elementType===r.type?o.memoizedProps:Dn(r.type,o.memoizedProps);u.componentDidUpdate(h,o.memoizedState,u.__reactInternalSnapshotBeforeUpdate)}var p=r.updateQueue;p!==null&&Yd(r,p,u);break;case 3:var _=r.updateQueue;if(_!==null){if(o=null,r.child!==null)switch(r.child.tag){case 5:o=r.child.stateNode;break;case 1:o=r.child.stateNode}Yd(r,_,o)}break;case 5:var T=r.stateNode;if(o===null&&r.flags&4){o=T;var R=r.memoizedProps;switch(r.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&o.focus();break;case"img":R.src&&(o.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(r.memoizedState===null){var U=r.alternate;if(U!==null){var H=U.memoizedState;if(H!==null){var W=H.dehydrated;W!==null&&Cn(W)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Ot||r.flags&512&&Tc(r)}catch(q){Ze(r,r.return,q)}}if(r===t){ne=null;break}if(o=r.sibling,o!==null){o.return=r.return,ne=o;break}ne=r.return}}function Jf(t){for(;ne!==null;){var r=ne;if(r===t){ne=null;break}var o=r.sibling;if(o!==null){o.return=r.return,ne=o;break}ne=r.return}}function Zf(t){for(;ne!==null;){var r=ne;try{switch(r.tag){case 0:case 11:case 15:var o=r.return;try{ml(4,r)}catch(R){Ze(r,o,R)}break;case 1:var u=r.stateNode;if(typeof u.componentDidMount=="function"){var h=r.return;try{u.componentDidMount()}catch(R){Ze(r,h,R)}}var p=r.return;try{Tc(r)}catch(R){Ze(r,p,R)}break;case 5:var _=r.return;try{Tc(r)}catch(R){Ze(r,_,R)}}}catch(R){Ze(r,r.return,R)}if(r===t){ne=null;break}var T=r.sibling;if(T!==null){T.return=r.return,ne=T;break}ne=r.return}}var u_=Math.ceil,gl=de.ReactCurrentDispatcher,Ac=de.ReactCurrentOwner,mn=de.ReactCurrentBatchConfig,Ve=0,Et=null,ot=null,Rt=0,sn=0,xs=Lr(0),dt=0,qo=null,Pi=0,yl=0,Rc=0,Ho=null,Kt=null,Cc=0,Os=1/0,mr=null,_l=!1,Pc=null,Br=null,vl=!1,jr=null,El=0,Wo=0,kc=null,wl=-1,Tl=0;function Bt(){return Ve&6?je():wl!==-1?wl:wl=je()}function $r(t){return t.mode&1?Ve&2&&Rt!==0?Rt&-Rt:Wy.transition!==null?(Tl===0&&(Tl=gi()),Tl):(t=Re,t!==0||(t=window.event,t=t===void 0?16:Eo(t.type)),t):1}function On(t,r,o,u){if(50<Wo)throw Wo=0,kc=null,Error(n(185));Cr(t,o,u),(!(Ve&2)||t!==Et)&&(t===Et&&(!(Ve&2)&&(yl|=o),dt===4&&qr(t,Rt)),Gt(t,u),o===1&&Ve===0&&!(r.mode&1)&&(Os=je()+500,Xa&&Fr()))}function Gt(t,r){var o=t.callbackNode;rr(t,r);var u=mi(t,t===Et?Rt:0);if(u===0)o!==null&&mo(o),t.callbackNode=null,t.callbackPriority=0;else if(r=u&-u,t.callbackPriority!==r){if(o!=null&&mo(o),r===1)t.tag===0?Hy(tp.bind(null,t)):bd(tp.bind(null,t)),By(function(){!(Ve&6)&&Fr()}),o=null;else{switch(kr(u)){case 1:o=fi;break;case 4:o=Sr;break;case 16:o=ln;break;case 536870912:o=Ta;break;default:o=ln}o=up(o,ep.bind(null,t))}t.callbackPriority=r,t.callbackNode=o}}function ep(t,r){if(wl=-1,Tl=0,Ve&6)throw Error(n(327));var o=t.callbackNode;if(Ls()&&t.callbackNode!==o)return null;var u=mi(t,t===Et?Rt:0);if(u===0)return null;if(u&30||u&t.expiredLanes||r)r=Il(t,u);else{r=u;var h=Ve;Ve|=2;var p=rp();(Et!==t||Rt!==r)&&(mr=null,Os=je()+500,Ni(t,r));do try{d_();break}catch(T){np(t,T)}while(!0);Qu(),gl.current=p,Ve=h,ot!==null?r=0:(Et=null,Rt=0,r=dt)}if(r!==0){if(r===2&&(h=Zt(t),h!==0&&(u=h,r=Nc(t,h))),r===1)throw o=qo,Ni(t,0),qr(t,u),Gt(t,je()),o;if(r===6)qr(t,u);else{if(h=t.current.alternate,!(u&30)&&!c_(h)&&(r=Il(t,u),r===2&&(p=Zt(t),p!==0&&(u=p,r=Nc(t,p))),r===1))throw o=qo,Ni(t,0),qr(t,u),Gt(t,je()),o;switch(t.finishedWork=h,t.finishedLanes=u,r){case 0:case 1:throw Error(n(345));case 2:Di(t,Kt,mr);break;case 3:if(qr(t,u),(u&130023424)===u&&(r=Cc+500-je(),10<r)){if(mi(t,0)!==0)break;if(h=t.suspendedLanes,(h&u)!==u){Bt(),t.pingedLanes|=t.suspendedLanes&h;break}t.timeoutHandle=Mu(Di.bind(null,t,Kt,mr),r);break}Di(t,Kt,mr);break;case 4:if(qr(t,u),(u&4194240)===u)break;for(r=t.eventTimes,h=-1;0<u;){var _=31-Ut(u);p=1<<_,_=r[_],_>h&&(h=_),u&=~p}if(u=h,u=je()-u,u=(120>u?120:480>u?480:1080>u?1080:1920>u?1920:3e3>u?3e3:4320>u?4320:1960*u_(u/1960))-u,10<u){t.timeoutHandle=Mu(Di.bind(null,t,Kt,mr),u);break}Di(t,Kt,mr);break;case 5:Di(t,Kt,mr);break;default:throw Error(n(329))}}}return Gt(t,je()),t.callbackNode===o?ep.bind(null,t):null}function Nc(t,r){var o=Ho;return t.current.memoizedState.isDehydrated&&(Ni(t,r).flags|=256),t=Il(t,r),t!==2&&(r=Kt,Kt=o,r!==null&&Dc(r)),t}function Dc(t){Kt===null?Kt=t:Kt.push.apply(Kt,t)}function c_(t){for(var r=t;;){if(r.flags&16384){var o=r.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var u=0;u<o.length;u++){var h=o[u],p=h.getSnapshot;h=h.value;try{if(!kn(p(),h))return!1}catch{return!1}}}if(o=r.child,r.subtreeFlags&16384&&o!==null)o.return=r,r=o;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function qr(t,r){for(r&=~Rc,r&=~yl,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var o=31-Ut(r),u=1<<o;t[o]=-1,r&=~u}}function tp(t){if(Ve&6)throw Error(n(327));Ls();var r=mi(t,0);if(!(r&1))return Gt(t,je()),null;var o=Il(t,r);if(t.tag!==0&&o===2){var u=Zt(t);u!==0&&(r=u,o=Nc(t,u))}if(o===1)throw o=qo,Ni(t,0),qr(t,r),Gt(t,je()),o;if(o===6)throw Error(n(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,Di(t,Kt,mr),Gt(t,je()),null}function Vc(t,r){var o=Ve;Ve|=1;try{return t(r)}finally{Ve=o,Ve===0&&(Os=je()+500,Xa&&Fr())}}function ki(t){jr!==null&&jr.tag===0&&!(Ve&6)&&Ls();var r=Ve;Ve|=1;var o=mn.transition,u=Re;try{if(mn.transition=null,Re=1,t)return t()}finally{Re=u,mn.transition=o,Ve=r,!(Ve&6)&&Fr()}}function xc(){sn=xs.current,He(xs)}function Ni(t,r){t.finishedWork=null,t.finishedLanes=0;var o=t.timeoutHandle;if(o!==-1&&(t.timeoutHandle=-1,zy(o)),ot!==null)for(o=ot.return;o!==null;){var u=o;switch(ju(u),u.tag){case 1:u=u.type.childContextTypes,u!=null&&Ka();break;case 3:Ns(),He(Ht),He(Dt),tc();break;case 5:Zu(u);break;case 4:Ns();break;case 13:He(Xe);break;case 19:He(Xe);break;case 10:Ku(u.type._context);break;case 22:case 23:xc()}o=o.return}if(Et=t,ot=t=Hr(t.current,null),Rt=sn=r,dt=0,qo=null,Rc=yl=Pi=0,Kt=Ho=null,Ai!==null){for(r=0;r<Ai.length;r++)if(o=Ai[r],u=o.interleaved,u!==null){o.interleaved=null;var h=u.next,p=o.pending;if(p!==null){var _=p.next;p.next=h,u.next=_}o.pending=u}Ai=null}return t}function np(t,r){do{var o=ot;try{if(Qu(),ol.current=cl,al){for(var u=Ye.memoizedState;u!==null;){var h=u.queue;h!==null&&(h.pending=null),u=u.next}al=!1}if(Ci=0,vt=ht=Ye=null,Uo=!1,bo=0,Ac.current=null,o===null||o.return===null){dt=1,qo=r,ot=null;break}e:{var p=t,_=o.return,T=o,R=r;if(r=Rt,T.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var U=R,H=T,W=H.tag;if(!(H.mode&1)&&(W===0||W===11||W===15)){var q=H.alternate;q?(H.updateQueue=q.updateQueue,H.memoizedState=q.memoizedState,H.lanes=q.lanes):(H.updateQueue=null,H.memoizedState=null)}var Z=Cf(_);if(Z!==null){Z.flags&=-257,Pf(Z,_,T,p,r),Z.mode&1&&Rf(p,U,r),r=Z,R=U;var re=r.updateQueue;if(re===null){var ie=new Set;ie.add(R),r.updateQueue=ie}else re.add(R);break e}else{if(!(r&1)){Rf(p,U,r),Oc();break e}R=Error(n(426))}}else if(Qe&&T.mode&1){var rt=Cf(_);if(rt!==null){!(rt.flags&65536)&&(rt.flags|=256),Pf(rt,_,T,p,r),Hu(Ds(R,T));break e}}p=R=Ds(R,T),dt!==4&&(dt=2),Ho===null?Ho=[p]:Ho.push(p),p=_;do{switch(p.tag){case 3:p.flags|=65536,r&=-r,p.lanes|=r;var L=Sf(p,R,r);Xd(p,L);break e;case 1:T=R;var k=p.type,M=p.stateNode;if(!(p.flags&128)&&(typeof k.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Br===null||!Br.has(M)))){p.flags|=65536,r&=-r,p.lanes|=r;var K=Af(p,T,r);Xd(p,K);break e}}p=p.return}while(p!==null)}sp(o)}catch(se){r=se,ot===o&&o!==null&&(ot=o=o.return);continue}break}while(!0)}function rp(){var t=gl.current;return gl.current=cl,t===null?cl:t}function Oc(){(dt===0||dt===3||dt===2)&&(dt=4),Et===null||!(Pi&268435455)&&!(yl&268435455)||qr(Et,Rt)}function Il(t,r){var o=Ve;Ve|=2;var u=rp();(Et!==t||Rt!==r)&&(mr=null,Ni(t,r));do try{h_();break}catch(h){np(t,h)}while(!0);if(Qu(),Ve=o,gl.current=u,ot!==null)throw Error(n(261));return Et=null,Rt=0,dt}function h_(){for(;ot!==null;)ip(ot)}function d_(){for(;ot!==null&&!Ea();)ip(ot)}function ip(t){var r=lp(t.alternate,t,sn);t.memoizedProps=t.pendingProps,r===null?sp(t):ot=r,Ac.current=null}function sp(t){var r=t;do{var o=r.alternate;if(t=r.return,r.flags&32768){if(o=s_(o,r),o!==null){o.flags&=32767,ot=o;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dt=6,ot=null;return}}else if(o=i_(o,r,sn),o!==null){ot=o;return}if(r=r.sibling,r!==null){ot=r;return}ot=r=t}while(r!==null);dt===0&&(dt=5)}function Di(t,r,o){var u=Re,h=mn.transition;try{mn.transition=null,Re=1,f_(t,r,o,u)}finally{mn.transition=h,Re=u}return null}function f_(t,r,o,u){do Ls();while(jr!==null);if(Ve&6)throw Error(n(327));o=t.finishedWork;var h=t.finishedLanes;if(o===null)return null;if(t.finishedWork=null,t.finishedLanes=0,o===t.current)throw Error(n(177));t.callbackNode=null,t.callbackPriority=0;var p=o.lanes|o.childLanes;if(be(t,p),t===Et&&(ot=Et=null,Rt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||vl||(vl=!0,up(ln,function(){return Ls(),null})),p=(o.flags&15990)!==0,o.subtreeFlags&15990||p){p=mn.transition,mn.transition=null;var _=Re;Re=1;var T=Ve;Ve|=4,Ac.current=null,a_(t,o),Gf(o,t),xy(Ou),Dr=!!xu,Ou=xu=null,t.current=o,l_(o),yu(),Ve=T,Re=_,mn.transition=p}else t.current=o;if(vl&&(vl=!1,jr=t,El=h),p=t.pendingLanes,p===0&&(Br=null),Ia(o.stateNode),Gt(t,je()),r!==null)for(u=t.onRecoverableError,o=0;o<r.length;o++)h=r[o],u(h.value,{componentStack:h.stack,digest:h.digest});if(_l)throw _l=!1,t=Pc,Pc=null,t;return El&1&&t.tag!==0&&Ls(),p=t.pendingLanes,p&1?t===kc?Wo++:(Wo=0,kc=t):Wo=0,Fr(),null}function Ls(){if(jr!==null){var t=kr(El),r=mn.transition,o=Re;try{if(mn.transition=null,Re=16>t?16:t,jr===null)var u=!1;else{if(t=jr,jr=null,El=0,Ve&6)throw Error(n(331));var h=Ve;for(Ve|=4,ne=t.current;ne!==null;){var p=ne,_=p.child;if(ne.flags&16){var T=p.deletions;if(T!==null){for(var R=0;R<T.length;R++){var U=T[R];for(ne=U;ne!==null;){var H=ne;switch(H.tag){case 0:case 11:case 15:$o(8,H,p)}var W=H.child;if(W!==null)W.return=H,ne=W;else for(;ne!==null;){H=ne;var q=H.sibling,Z=H.return;if(qf(H),H===U){ne=null;break}if(q!==null){q.return=Z,ne=q;break}ne=Z}}}var re=p.alternate;if(re!==null){var ie=re.child;if(ie!==null){re.child=null;do{var rt=ie.sibling;ie.sibling=null,ie=rt}while(ie!==null)}}ne=p}}if(p.subtreeFlags&2064&&_!==null)_.return=p,ne=_;else e:for(;ne!==null;){if(p=ne,p.flags&2048)switch(p.tag){case 0:case 11:case 15:$o(9,p,p.return)}var L=p.sibling;if(L!==null){L.return=p.return,ne=L;break e}ne=p.return}}var k=t.current;for(ne=k;ne!==null;){_=ne;var M=_.child;if(_.subtreeFlags&2064&&M!==null)M.return=_,ne=M;else e:for(_=k;ne!==null;){if(T=ne,T.flags&2048)try{switch(T.tag){case 0:case 11:case 15:ml(9,T)}}catch(se){Ze(T,T.return,se)}if(T===_){ne=null;break e}var K=T.sibling;if(K!==null){K.return=T.return,ne=K;break e}ne=T.return}}if(Ve=h,Fr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(pi,t)}catch{}u=!0}return u}finally{Re=o,mn.transition=r}}return!1}function op(t,r,o){r=Ds(o,r),r=Sf(t,r,1),t=br(t,r,1),r=Bt(),t!==null&&(Cr(t,1,r),Gt(t,r))}function Ze(t,r,o){if(t.tag===3)op(t,t,o);else for(;r!==null;){if(r.tag===3){op(r,t,o);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Br===null||!Br.has(u))){t=Ds(o,t),t=Af(r,t,1),r=br(r,t,1),t=Bt(),r!==null&&(Cr(r,1,t),Gt(r,t));break}}r=r.return}}function p_(t,r,o){var u=t.pingCache;u!==null&&u.delete(r),r=Bt(),t.pingedLanes|=t.suspendedLanes&o,Et===t&&(Rt&o)===o&&(dt===4||dt===3&&(Rt&130023424)===Rt&&500>je()-Cc?Ni(t,0):Rc|=o),Gt(t,r)}function ap(t,r){r===0&&(t.mode&1?(r=is,is<<=1,!(is&130023424)&&(is=4194304)):r=1);var o=Bt();t=dr(t,r),t!==null&&(Cr(t,r,o),Gt(t,o))}function m_(t){var r=t.memoizedState,o=0;r!==null&&(o=r.retryLane),ap(t,o)}function g_(t,r){var o=0;switch(t.tag){case 13:var u=t.stateNode,h=t.memoizedState;h!==null&&(o=h.retryLane);break;case 19:u=t.stateNode;break;default:throw Error(n(314))}u!==null&&u.delete(r),ap(t,o)}var lp;lp=function(t,r,o){if(t!==null)if(t.memoizedProps!==r.pendingProps||Ht.current)Qt=!0;else{if(!(t.lanes&o)&&!(r.flags&128))return Qt=!1,r_(t,r,o);Qt=!!(t.flags&131072)}else Qt=!1,Qe&&r.flags&1048576&&zd(r,Ja,r.index);switch(r.lanes=0,r.tag){case 2:var u=r.type;fl(t,r),t=r.pendingProps;var h=Is(r,Dt.current);ks(r,o),h=ic(null,r,u,t,h,o);var p=sc();return r.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Wt(u)?(p=!0,Ga(r)):p=!1,r.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,Yu(r),h.updater=hl,r.stateNode=h,h._reactInternals=r,hc(r,u,t,o),r=mc(null,r,u,!0,p,o)):(r.tag=0,Qe&&p&&Bu(r),zt(null,r,h,o),r=r.child),r;case 16:u=r.elementType;e:{switch(fl(t,r),t=r.pendingProps,h=u._init,u=h(u._payload),r.type=u,h=r.tag=__(u),t=Dn(u,t),h){case 0:r=pc(null,r,u,t,o);break e;case 1:r=Of(null,r,u,t,o);break e;case 11:r=kf(null,r,u,t,o);break e;case 14:r=Nf(null,r,u,Dn(u.type,t),o);break e}throw Error(n(306,u,""))}return r;case 0:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),pc(t,r,u,h,o);case 1:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),Of(t,r,u,h,o);case 3:e:{if(Lf(r),t===null)throw Error(n(387));u=r.pendingProps,p=r.memoizedState,h=p.element,Gd(t,r),il(r,u,null,o);var _=r.memoizedState;if(u=_.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:_.cache,pendingSuspenseBoundaries:_.pendingSuspenseBoundaries,transitions:_.transitions},r.updateQueue.baseState=p,r.memoizedState=p,r.flags&256){h=Ds(Error(n(423)),r),r=Mf(t,r,u,o,h);break e}else if(u!==h){h=Ds(Error(n(424)),r),r=Mf(t,r,u,o,h);break e}else for(rn=Or(r.stateNode.containerInfo.firstChild),nn=r,Qe=!0,Nn=null,o=Qd(r,null,u,o),r.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Rs(),u===h){r=pr(t,r,o);break e}zt(t,r,u,o)}r=r.child}return r;case 5:return Jd(r),t===null&&qu(r),u=r.type,h=r.pendingProps,p=t!==null?t.memoizedProps:null,_=h.children,Lu(u,h)?_=null:p!==null&&Lu(u,p)&&(r.flags|=32),xf(t,r),zt(t,r,_,o),r.child;case 6:return t===null&&qu(r),null;case 13:return Ff(t,r,o);case 4:return Ju(r,r.stateNode.containerInfo),u=r.pendingProps,t===null?r.child=Cs(r,null,u,o):zt(t,r,u,o),r.child;case 11:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),kf(t,r,u,h,o);case 7:return zt(t,r,r.pendingProps,o),r.child;case 8:return zt(t,r,r.pendingProps.children,o),r.child;case 12:return zt(t,r,r.pendingProps.children,o),r.child;case 10:e:{if(u=r.type._context,h=r.pendingProps,p=r.memoizedProps,_=h.value,$e(tl,u._currentValue),u._currentValue=_,p!==null)if(kn(p.value,_)){if(p.children===h.children&&!Ht.current){r=pr(t,r,o);break e}}else for(p=r.child,p!==null&&(p.return=r);p!==null;){var T=p.dependencies;if(T!==null){_=p.child;for(var R=T.firstContext;R!==null;){if(R.context===u){if(p.tag===1){R=fr(-1,o&-o),R.tag=2;var U=p.updateQueue;if(U!==null){U=U.shared;var H=U.pending;H===null?R.next=R:(R.next=H.next,H.next=R),U.pending=R}}p.lanes|=o,R=p.alternate,R!==null&&(R.lanes|=o),Gu(p.return,o,r),T.lanes|=o;break}R=R.next}}else if(p.tag===10)_=p.type===r.type?null:p.child;else if(p.tag===18){if(_=p.return,_===null)throw Error(n(341));_.lanes|=o,T=_.alternate,T!==null&&(T.lanes|=o),Gu(_,o,r),_=p.sibling}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===r){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}zt(t,r,h.children,o),r=r.child}return r;case 9:return h=r.type,u=r.pendingProps.children,ks(r,o),h=fn(h),u=u(h),r.flags|=1,zt(t,r,u,o),r.child;case 14:return u=r.type,h=Dn(u,r.pendingProps),h=Dn(u.type,h),Nf(t,r,u,h,o);case 15:return Df(t,r,r.type,r.pendingProps,o);case 17:return u=r.type,h=r.pendingProps,h=r.elementType===u?h:Dn(u,h),fl(t,r),r.tag=1,Wt(u)?(t=!0,Ga(r)):t=!1,ks(r,o),Tf(r,u,h),hc(r,u,h,o),mc(null,r,u,!0,t,o);case 19:return bf(t,r,o);case 22:return Vf(t,r,o)}throw Error(n(156,r.tag))};function up(t,r){return ns(t,r)}function y_(t,r,o,u){this.tag=t,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(t,r,o,u){return new y_(t,r,o,u)}function Lc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function __(t){if(typeof t=="function")return Lc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===V)return 11;if(t===gt)return 14}return 2}function Hr(t,r){var o=t.alternate;return o===null?(o=gn(t.tag,r,t.key,t.mode),o.elementType=t.elementType,o.type=t.type,o.stateNode=t.stateNode,o.alternate=t,t.alternate=o):(o.pendingProps=r,o.type=t.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=t.flags&14680064,o.childLanes=t.childLanes,o.lanes=t.lanes,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,r=t.dependencies,o.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},o.sibling=t.sibling,o.index=t.index,o.ref=t.ref,o}function Sl(t,r,o,u,h,p){var _=2;if(u=t,typeof t=="function")Lc(t)&&(_=1);else if(typeof t=="string")_=5;else e:switch(t){case P:return Vi(o.children,h,p,r);case w:_=8,h|=8;break;case A:return t=gn(12,o,r,h|2),t.elementType=A,t.lanes=p,t;case S:return t=gn(13,o,r,h),t.elementType=S,t.lanes=p,t;case Ge:return t=gn(19,o,r,h),t.elementType=Ge,t.lanes=p,t;case Ue:return Al(o,h,p,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C:_=10;break e;case N:_=9;break e;case V:_=11;break e;case gt:_=14;break e;case Nt:_=16,u=null;break e}throw Error(n(130,t==null?t:typeof t,""))}return r=gn(_,o,r,h),r.elementType=t,r.type=u,r.lanes=p,r}function Vi(t,r,o,u){return t=gn(7,t,u,r),t.lanes=o,t}function Al(t,r,o,u){return t=gn(22,t,u,r),t.elementType=Ue,t.lanes=o,t.stateNode={isHidden:!1},t}function Mc(t,r,o){return t=gn(6,t,null,r),t.lanes=o,t}function Fc(t,r,o){return r=gn(4,t.children!==null?t.children:[],t.key,r),r.lanes=o,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function v_(t,r,o,u,h){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rr(0),this.expirationTimes=Rr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rr(0),this.identifierPrefix=u,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Uc(t,r,o,u,h,p,_,T,R){return t=new v_(t,r,o,T,R),r===1?(r=1,p===!0&&(r|=8)):r=0,p=gn(3,null,null,r),t.current=p,p.stateNode=t,p.memoizedState={element:u,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Yu(p),t}function E_(t,r,o){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:le,key:u==null?null:""+u,children:t,containerInfo:r,implementation:o}}function cp(t){if(!t)return Mr;t=t._reactInternals;e:{if(Tn(t)!==t||t.tag!==1)throw Error(n(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Wt(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(n(171))}if(t.tag===1){var o=t.type;if(Wt(o))return Fd(t,o,r)}return r}function hp(t,r,o,u,h,p,_,T,R){return t=Uc(o,u,!0,t,h,p,_,T,R),t.context=cp(null),o=t.current,u=Bt(),h=$r(o),p=fr(u,h),p.callback=r??null,br(o,p,h),t.current.lanes=h,Cr(t,h,u),Gt(t,u),t}function Rl(t,r,o,u){var h=r.current,p=Bt(),_=$r(h);return o=cp(o),r.context===null?r.context=o:r.pendingContext=o,r=fr(p,_),r.payload={element:t},u=u===void 0?null:u,u!==null&&(r.callback=u),t=br(h,r,_),t!==null&&(On(t,h,_,p),rl(t,h,_)),_}function Cl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dp(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var o=t.retryLane;t.retryLane=o!==0&&o<r?o:r}}function bc(t,r){dp(t,r),(t=t.alternate)&&dp(t,r)}function w_(){return null}var fp=typeof reportError=="function"?reportError:function(t){console.error(t)};function zc(t){this._internalRoot=t}Pl.prototype.render=zc.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(n(409));Rl(t,r,null,null)},Pl.prototype.unmount=zc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;ki(function(){Rl(null,t,null,null)}),r[lr]=null}};function Pl(t){this._internalRoot=t}Pl.prototype.unstable_scheduleHydration=function(t){if(t){var r=Pa();t={blockedOn:null,target:t,priority:r};for(var o=0;o<bn.length&&r!==0&&r<bn[o].priority;o++);bn.splice(o,0,t),o===0&&Da(t)}};function Bc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function kl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function pp(){}function T_(t,r,o,u,h){if(h){if(typeof u=="function"){var p=u;u=function(){var U=Cl(_);p.call(U)}}var _=hp(r,u,t,0,null,!1,!1,"",pp);return t._reactRootContainer=_,t[lr]=_.current,No(t.nodeType===8?t.parentNode:t),ki(),_}for(;h=t.lastChild;)t.removeChild(h);if(typeof u=="function"){var T=u;u=function(){var U=Cl(R);T.call(U)}}var R=Uc(t,0,!1,null,null,!1,!1,"",pp);return t._reactRootContainer=R,t[lr]=R.current,No(t.nodeType===8?t.parentNode:t),ki(function(){Rl(r,R,o,u)}),R}function Nl(t,r,o,u,h){var p=o._reactRootContainer;if(p){var _=p;if(typeof h=="function"){var T=h;h=function(){var R=Cl(_);T.call(R)}}Rl(r,_,t,h)}else _=T_(o,r,t,h,u);return Cl(_)}Ra=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var o=Ar(r.pendingLanes);o!==0&&(Pr(r,o|1),Gt(r,je()),!(Ve&6)&&(Os=je()+500,Fr()))}break;case 13:ki(function(){var u=dr(t,1);if(u!==null){var h=Bt();On(u,t,1,h)}}),bc(t,1)}},ss=function(t){if(t.tag===13){var r=dr(t,134217728);if(r!==null){var o=Bt();On(r,t,134217728,o)}bc(t,134217728)}},Ca=function(t){if(t.tag===13){var r=$r(t),o=dr(t,r);if(o!==null){var u=Bt();On(o,t,r,u)}bc(t,r)}},Pa=function(){return Re},ka=function(t,r){var o=Re;try{return Re=t,r()}finally{Re=o}},Xi=function(t,r,o){switch(r){case"input":if(eo(t,o),r=o.name,o.type==="radio"&&r!=null){for(o=t;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),r=0;r<o.length;r++){var u=o[r];if(u!==t&&u.form===t.form){var h=Qa(u);if(!h)throw Error(n(90));qi(u),eo(u,h)}}}break;case"textarea":Ki(t,o);break;case"select":r=o.value,r!=null&&er(t,!!o.multiple,r,!1)}},ui=Vc,co=ki;var I_={usingClientEntryPoint:!1,Events:[xo,ws,Qa,Fn,uo,Vc]},Qo={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S_={bundleType:Qo.bundleType,version:Qo.version,rendererPackageName:Qo.rendererPackageName,rendererConfig:Qo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:de.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=po(t),t===null?null:t.stateNode},findFiberByHostInstance:Qo.findFiberByHostInstance||w_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{pi=Dl.inject(S_),Jt=Dl}catch{}}return Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=I_,Xt.createPortal=function(t,r){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bc(r))throw Error(n(200));return E_(t,r,null,o)},Xt.createRoot=function(t,r){if(!Bc(t))throw Error(n(299));var o=!1,u="",h=fp;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(h=r.onRecoverableError)),r=Uc(t,1,!1,null,null,o,!1,u,h),t[lr]=r.current,No(t.nodeType===8?t.parentNode:t),new zc(r)},Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(n(188)):(t=Object.keys(t).join(","),Error(n(268,t)));return t=po(r),t=t===null?null:t.stateNode,t},Xt.flushSync=function(t){return ki(t)},Xt.hydrate=function(t,r,o){if(!kl(r))throw Error(n(200));return Nl(null,t,r,!0,o)},Xt.hydrateRoot=function(t,r,o){if(!Bc(t))throw Error(n(405));var u=o!=null&&o.hydratedSources||null,h=!1,p="",_=fp;if(o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(p=o.identifierPrefix),o.onRecoverableError!==void 0&&(_=o.onRecoverableError)),r=hp(r,null,t,1,o??null,h,!1,p,_),t[lr]=r.current,No(t),u)for(t=0;t<u.length;t++)o=u[t],h=o._getVersion,h=h(o._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[o,h]:r.mutableSourceEagerHydrationData.push(o,h);return new Pl(r)},Xt.render=function(t,r,o){if(!kl(r))throw Error(n(200));return Nl(null,t,r,!1,o)},Xt.unmountComponentAtNode=function(t){if(!kl(t))throw Error(n(40));return t._reactRootContainer?(ki(function(){Nl(null,null,t,!1,function(){t._reactRootContainer=null,t[lr]=null})}),!0):!1},Xt.unstable_batchedUpdates=Vc,Xt.unstable_renderSubtreeIntoContainer=function(t,r,o,u){if(!kl(o))throw Error(n(200));if(t==null||t._reactInternals===void 0)throw Error(n(38));return Nl(t,r,o,!1,u)},Xt.version="18.3.1-next-f1338f8080-20240426",Xt}var Tp;function V_(){if(Tp)return qc.exports;Tp=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),qc.exports=D_(),qc.exports}var Ip;function x_(){if(Ip)return Vl;Ip=1;var i=V_();return Vl.createRoot=i.createRoot,Vl.hydrateRoot=i.hydrateRoot,Vl}var O_=x_(),Sp={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let a=i.charCodeAt(s);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},L_=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const a=i[n++];if(a<128)e[s++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[n++];e[s++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[n++],d=i[n++],m=i[n++],y=((a&7)<<18|(c&63)<<12|(d&63)<<6|m&63)-65536;e[s++]=String.fromCharCode(55296+(y>>10)),e[s++]=String.fromCharCode(56320+(y&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((a&15)<<12|(c&63)<<6|d&63)}}return e.join("")},Rm={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let a=0;a<i.length;a+=3){const c=i[a],d=a+1<i.length,m=d?i[a+1]:0,y=a+2<i.length,E=y?i[a+2]:0,I=c>>2,D=(c&3)<<4|m>>4;let F=(m&15)<<2|E>>6,z=E&63;y||(z=64,d||(F=64)),s.push(n[I],n[D],n[F],n[z])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Am(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):L_(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let a=0;a<i.length;){const c=n[i.charAt(a++)],m=a<i.length?n[i.charAt(a)]:0;++a;const E=a<i.length?n[i.charAt(a)]:64;++a;const D=a<i.length?n[i.charAt(a)]:64;if(++a,c==null||m==null||E==null||D==null)throw new M_;const F=c<<2|m>>4;if(s.push(F),E!==64){const z=m<<4&240|E>>2;if(s.push(z),D!==64){const G=E<<6&192|D;s.push(G)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class M_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const F_=function(i){const e=Am(i);return Rm.encodeByteArray(e,!0)},Hl=function(i){return F_(i).replace(/\./g,"")},U_=function(i){try{return Rm.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=()=>b_().__FIREBASE_DEFAULTS__,B_=()=>{if(typeof process>"u"||typeof Sp>"u")return;const i=Sp.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},j_=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&U_(i[1]);return e&&JSON.parse(e)},Ah=()=>{try{return z_()||B_()||j_()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},$_=i=>{var e,n;return(n=(e=Ah())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},Cm=i=>{const e=$_(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Pm=()=>{var i;return(i=Ah())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Hl(JSON.stringify(n)),Hl(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W_(){var i;const e=(i=Ah())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Q_(){return!W_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K_(){try{return typeof indexedDB=="object"}catch{return!1}}function G_(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(s);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X_="FirebaseError";class bi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=X_,Object.setPrototypeOf(this,bi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nm.prototype.create)}}class Nm{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},a=`${this.service}/${e}`,c=this.errors[e],d=c?Y_(c,s):"Error",m=`${this.serviceName}: ${d} (${a}).`;return new bi(a,m,s)}}function Y_(i,e){return i.replace(J_,(n,s)=>{const a=e[s];return a!=null?String(a):`<${s}?>`})}const J_=/\{\$([^}]+)}/g;function rh(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const a of n){if(!s.includes(a))return!1;const c=i[a],d=e[a];if(Ap(c)&&Ap(d)){if(!rh(c,d))return!1}else if(c!==d)return!1}for(const a of s)if(!n.includes(a))return!1;return!0}function Ap(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(i){return i&&i._delegate?i._delegate:i}class Bs{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new q_;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&s.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tv(e))try{this.getOrInitializeService({instanceIdentifier:xi})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:a});s.resolve(c)}catch{}}}}clearInstance(e=xi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xi){return this.instances.has(e)}getOptions(e=xi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(c);s===m&&d.resolve(a)}return a}onInit(e,n){var s;const a=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(a))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(a,c);const d=this.instances.get(a);return d&&e(d,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const a of s)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:ev(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=xi){return this.component?this.component.multipleInstances?e:xi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ev(i){return i===xi?void 0:i}function tv(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Z_(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(De||(De={}));const rv={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},iv=De.INFO,sv={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},ov=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),a=sv[e];if(a)console[a](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dm{constructor(e){this.name=e,this._logLevel=iv,this._logHandler=ov,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rv[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}}const av=(i,e)=>e.some(n=>i instanceof n);let Rp,Cp;function lv(){return Rp||(Rp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uv(){return Cp||(Cp=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vm=new WeakMap,ih=new WeakMap,xm=new WeakMap,Qc=new WeakMap,Rh=new WeakMap;function cv(i){const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(Gr(i.result)),a()},d=()=>{s(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Vm.set(n,i)}).catch(()=>{}),Rh.set(e,i),e}function hv(i){if(ih.has(i))return;const e=new Promise((n,s)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),a()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});ih.set(i,e)}let sh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return ih.get(i);if(e==="objectStoreNames")return i.objectStoreNames||xm.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function dv(i){sh=i(sh)}function fv(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(Kc(this),e,...n);return xm.set(s,e.sort?e.sort():[e]),Gr(s)}:uv().includes(i)?function(...e){return i.apply(Kc(this),e),Gr(Vm.get(this))}:function(...e){return Gr(i.apply(Kc(this),e))}}function pv(i){return typeof i=="function"?fv(i):(i instanceof IDBTransaction&&hv(i),av(i,lv())?new Proxy(i,sh):i)}function Gr(i){if(i instanceof IDBRequest)return cv(i);if(Qc.has(i))return Qc.get(i);const e=pv(i);return e!==i&&(Qc.set(i,e),Rh.set(e,i)),e}const Kc=i=>Rh.get(i);function mv(i,e,{blocked:n,upgrade:s,blocking:a,terminated:c}={}){const d=indexedDB.open(i,e),m=Gr(d);return s&&d.addEventListener("upgradeneeded",y=>{s(Gr(d.result),y.oldVersion,y.newVersion,Gr(d.transaction),y)}),n&&d.addEventListener("blocked",y=>n(y.oldVersion,y.newVersion,y)),m.then(y=>{c&&y.addEventListener("close",()=>c()),a&&y.addEventListener("versionchange",E=>a(E.oldVersion,E.newVersion,E))}).catch(()=>{}),m}const gv=["get","getKey","getAll","getAllKeys","count"],yv=["put","add","delete","clear"],Gc=new Map;function Pp(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Gc.get(e))return Gc.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,a=yv.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(a||gv.includes(n)))return;const c=async function(d,...m){const y=this.transaction(d,a?"readwrite":"readonly");let E=y.store;return s&&(E=E.index(m.shift())),(await Promise.all([E[n](...m),a&&y.done]))[0]};return Gc.set(e,c),c}dv(i=>({...i,get:(e,n,s)=>Pp(e,n)||i.get(e,n,s),has:(e,n)=>!!Pp(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vv(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function vv(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oh="@firebase/app",kp="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr=new Dm("@firebase/app"),Ev="@firebase/app-compat",wv="@firebase/analytics-compat",Tv="@firebase/analytics",Iv="@firebase/app-check-compat",Sv="@firebase/app-check",Av="@firebase/auth",Rv="@firebase/auth-compat",Cv="@firebase/database",Pv="@firebase/data-connect",kv="@firebase/database-compat",Nv="@firebase/functions",Dv="@firebase/functions-compat",Vv="@firebase/installations",xv="@firebase/installations-compat",Ov="@firebase/messaging",Lv="@firebase/messaging-compat",Mv="@firebase/performance",Fv="@firebase/performance-compat",Uv="@firebase/remote-config",bv="@firebase/remote-config-compat",zv="@firebase/storage",Bv="@firebase/storage-compat",jv="@firebase/firestore",$v="@firebase/vertexai",qv="@firebase/firestore-compat",Hv="firebase",Wv="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="[DEFAULT]",Qv={[oh]:"fire-core",[Ev]:"fire-core-compat",[Tv]:"fire-analytics",[wv]:"fire-analytics-compat",[Sv]:"fire-app-check",[Iv]:"fire-app-check-compat",[Av]:"fire-auth",[Rv]:"fire-auth-compat",[Cv]:"fire-rtdb",[Pv]:"fire-data-connect",[kv]:"fire-rtdb-compat",[Nv]:"fire-fn",[Dv]:"fire-fn-compat",[Vv]:"fire-iid",[xv]:"fire-iid-compat",[Ov]:"fire-fcm",[Lv]:"fire-fcm-compat",[Mv]:"fire-perf",[Fv]:"fire-perf-compat",[Uv]:"fire-rc",[bv]:"fire-rc-compat",[zv]:"fire-gcs",[Bv]:"fire-gcs-compat",[jv]:"fire-fst",[qv]:"fire-fst-compat",[$v]:"fire-vertex","fire-js":"fire-js",[Hv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl=new Map,Kv=new Map,lh=new Map;function Np(i,e){try{i.container.addComponent(e)}catch(n){vr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function ia(i){const e=i.name;if(lh.has(e))return vr.debug(`There were multiple attempts to register component ${e}.`),!1;lh.set(e,i);for(const n of Wl.values())Np(n,i);for(const n of Kv.values())Np(n,i);return!0}function Om(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Xr=new Nm("app","Firebase",Gv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Bs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Xr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lm=Wv;function Mm(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:ah,automaticDataCollectionEnabled:!1},e),a=s.name;if(typeof a!="string"||!a)throw Xr.create("bad-app-name",{appName:String(a)});if(n||(n=Pm()),!n)throw Xr.create("no-options");const c=Wl.get(a);if(c){if(rh(n,c.options)&&rh(s,c.config))return c;throw Xr.create("duplicate-app",{appName:a})}const d=new nv(a);for(const y of lh.values())d.addComponent(y);const m=new Xv(n,s,d);return Wl.set(a,m),m}function Fm(i=ah){const e=Wl.get(i);if(!e&&i===ah&&Pm())return Mm();if(!e)throw Xr.create("no-app",{appName:i});return e}function Yr(i,e,n){var s;let a=(s=Qv[i])!==null&&s!==void 0?s:i;n&&(a+=`-${n}`);const c=a.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const m=[`Unable to register library "${a}" with version "${e}":`];c&&m.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&d&&m.push("and"),d&&m.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vr.warn(m.join(" "));return}ia(new Bs(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="firebase-heartbeat-database",Jv=1,sa="firebase-heartbeat-store";let Xc=null;function Um(){return Xc||(Xc=mv(Yv,Jv,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(sa)}catch(n){console.warn(n)}}}}).catch(i=>{throw Xr.create("idb-open",{originalErrorMessage:i.message})})),Xc}async function Zv(i){try{const n=(await Um()).transaction(sa),s=await n.objectStore(sa).get(bm(i));return await n.done,s}catch(e){if(e instanceof bi)vr.warn(e.message);else{const n=Xr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vr.warn(n.message)}}}async function Dp(i,e){try{const s=(await Um()).transaction(sa,"readwrite");await s.objectStore(sa).put(e,bm(i)),await s.done}catch(n){if(n instanceof bi)vr.warn(n.message);else{const s=Xr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});vr.warn(s.message)}}}function bm(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e0=1024,t0=30*24*60*60*1e3;class n0{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new i0(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=Vp();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c)?void 0:(this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(d=>{const m=new Date(d.date).valueOf();return Date.now()-m<=t0}),this._storage.overwrite(this._heartbeatsCache))}catch(s){vr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Vp(),{heartbeatsToSend:s,unsentEntries:a}=r0(this._heartbeatsCache.heartbeats),c=Hl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return vr.warn(n),""}}}function Vp(){return new Date().toISOString().substring(0,10)}function r0(i,e=e0){const n=[];let s=i.slice();for(const a of i){const c=n.find(d=>d.agent===a.agent);if(c){if(c.dates.push(a.date),xp(n)>e){c.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),xp(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class i0{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return K_()?G_().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Zv(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Dp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return Dp(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function xp(i){return Hl(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(i){ia(new Bs("platform-logger",e=>new _v(e),"PRIVATE")),ia(new Bs("heartbeat",e=>new n0(e),"PRIVATE")),Yr(oh,kp,i),Yr(oh,kp,"esm2017"),Yr("fire-js","")}s0("");var o0="firebase",a0="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yr(o0,a0,"app");var Op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Li,zm;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,w){function A(){}A.prototype=w.prototype,P.D=w.prototype,P.prototype=new A,P.prototype.constructor=P,P.C=function(C,N,V){for(var S=Array(arguments.length-2),Ge=2;Ge<arguments.length;Ge++)S[Ge-2]=arguments[Ge];return w.prototype[N].apply(C,S)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(s,n),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(P,w,A){A||(A=0);var C=Array(16);if(typeof w=="string")for(var N=0;16>N;++N)C[N]=w.charCodeAt(A++)|w.charCodeAt(A++)<<8|w.charCodeAt(A++)<<16|w.charCodeAt(A++)<<24;else for(N=0;16>N;++N)C[N]=w[A++]|w[A++]<<8|w[A++]<<16|w[A++]<<24;w=P.g[0],A=P.g[1],N=P.g[2];var V=P.g[3],S=w+(V^A&(N^V))+C[0]+3614090360&4294967295;w=A+(S<<7&4294967295|S>>>25),S=V+(N^w&(A^N))+C[1]+3905402710&4294967295,V=w+(S<<12&4294967295|S>>>20),S=N+(A^V&(w^A))+C[2]+606105819&4294967295,N=V+(S<<17&4294967295|S>>>15),S=A+(w^N&(V^w))+C[3]+3250441966&4294967295,A=N+(S<<22&4294967295|S>>>10),S=w+(V^A&(N^V))+C[4]+4118548399&4294967295,w=A+(S<<7&4294967295|S>>>25),S=V+(N^w&(A^N))+C[5]+1200080426&4294967295,V=w+(S<<12&4294967295|S>>>20),S=N+(A^V&(w^A))+C[6]+2821735955&4294967295,N=V+(S<<17&4294967295|S>>>15),S=A+(w^N&(V^w))+C[7]+4249261313&4294967295,A=N+(S<<22&4294967295|S>>>10),S=w+(V^A&(N^V))+C[8]+1770035416&4294967295,w=A+(S<<7&4294967295|S>>>25),S=V+(N^w&(A^N))+C[9]+2336552879&4294967295,V=w+(S<<12&4294967295|S>>>20),S=N+(A^V&(w^A))+C[10]+4294925233&4294967295,N=V+(S<<17&4294967295|S>>>15),S=A+(w^N&(V^w))+C[11]+2304563134&4294967295,A=N+(S<<22&4294967295|S>>>10),S=w+(V^A&(N^V))+C[12]+1804603682&4294967295,w=A+(S<<7&4294967295|S>>>25),S=V+(N^w&(A^N))+C[13]+4254626195&4294967295,V=w+(S<<12&4294967295|S>>>20),S=N+(A^V&(w^A))+C[14]+2792965006&4294967295,N=V+(S<<17&4294967295|S>>>15),S=A+(w^N&(V^w))+C[15]+1236535329&4294967295,A=N+(S<<22&4294967295|S>>>10),S=w+(N^V&(A^N))+C[1]+4129170786&4294967295,w=A+(S<<5&4294967295|S>>>27),S=V+(A^N&(w^A))+C[6]+3225465664&4294967295,V=w+(S<<9&4294967295|S>>>23),S=N+(w^A&(V^w))+C[11]+643717713&4294967295,N=V+(S<<14&4294967295|S>>>18),S=A+(V^w&(N^V))+C[0]+3921069994&4294967295,A=N+(S<<20&4294967295|S>>>12),S=w+(N^V&(A^N))+C[5]+3593408605&4294967295,w=A+(S<<5&4294967295|S>>>27),S=V+(A^N&(w^A))+C[10]+38016083&4294967295,V=w+(S<<9&4294967295|S>>>23),S=N+(w^A&(V^w))+C[15]+3634488961&4294967295,N=V+(S<<14&4294967295|S>>>18),S=A+(V^w&(N^V))+C[4]+3889429448&4294967295,A=N+(S<<20&4294967295|S>>>12),S=w+(N^V&(A^N))+C[9]+568446438&4294967295,w=A+(S<<5&4294967295|S>>>27),S=V+(A^N&(w^A))+C[14]+3275163606&4294967295,V=w+(S<<9&4294967295|S>>>23),S=N+(w^A&(V^w))+C[3]+4107603335&4294967295,N=V+(S<<14&4294967295|S>>>18),S=A+(V^w&(N^V))+C[8]+1163531501&4294967295,A=N+(S<<20&4294967295|S>>>12),S=w+(N^V&(A^N))+C[13]+2850285829&4294967295,w=A+(S<<5&4294967295|S>>>27),S=V+(A^N&(w^A))+C[2]+4243563512&4294967295,V=w+(S<<9&4294967295|S>>>23),S=N+(w^A&(V^w))+C[7]+1735328473&4294967295,N=V+(S<<14&4294967295|S>>>18),S=A+(V^w&(N^V))+C[12]+2368359562&4294967295,A=N+(S<<20&4294967295|S>>>12),S=w+(A^N^V)+C[5]+4294588738&4294967295,w=A+(S<<4&4294967295|S>>>28),S=V+(w^A^N)+C[8]+2272392833&4294967295,V=w+(S<<11&4294967295|S>>>21),S=N+(V^w^A)+C[11]+1839030562&4294967295,N=V+(S<<16&4294967295|S>>>16),S=A+(N^V^w)+C[14]+4259657740&4294967295,A=N+(S<<23&4294967295|S>>>9),S=w+(A^N^V)+C[1]+2763975236&4294967295,w=A+(S<<4&4294967295|S>>>28),S=V+(w^A^N)+C[4]+1272893353&4294967295,V=w+(S<<11&4294967295|S>>>21),S=N+(V^w^A)+C[7]+4139469664&4294967295,N=V+(S<<16&4294967295|S>>>16),S=A+(N^V^w)+C[10]+3200236656&4294967295,A=N+(S<<23&4294967295|S>>>9),S=w+(A^N^V)+C[13]+681279174&4294967295,w=A+(S<<4&4294967295|S>>>28),S=V+(w^A^N)+C[0]+3936430074&4294967295,V=w+(S<<11&4294967295|S>>>21),S=N+(V^w^A)+C[3]+3572445317&4294967295,N=V+(S<<16&4294967295|S>>>16),S=A+(N^V^w)+C[6]+76029189&4294967295,A=N+(S<<23&4294967295|S>>>9),S=w+(A^N^V)+C[9]+3654602809&4294967295,w=A+(S<<4&4294967295|S>>>28),S=V+(w^A^N)+C[12]+3873151461&4294967295,V=w+(S<<11&4294967295|S>>>21),S=N+(V^w^A)+C[15]+530742520&4294967295,N=V+(S<<16&4294967295|S>>>16),S=A+(N^V^w)+C[2]+3299628645&4294967295,A=N+(S<<23&4294967295|S>>>9),S=w+(N^(A|~V))+C[0]+4096336452&4294967295,w=A+(S<<6&4294967295|S>>>26),S=V+(A^(w|~N))+C[7]+1126891415&4294967295,V=w+(S<<10&4294967295|S>>>22),S=N+(w^(V|~A))+C[14]+2878612391&4294967295,N=V+(S<<15&4294967295|S>>>17),S=A+(V^(N|~w))+C[5]+4237533241&4294967295,A=N+(S<<21&4294967295|S>>>11),S=w+(N^(A|~V))+C[12]+1700485571&4294967295,w=A+(S<<6&4294967295|S>>>26),S=V+(A^(w|~N))+C[3]+2399980690&4294967295,V=w+(S<<10&4294967295|S>>>22),S=N+(w^(V|~A))+C[10]+4293915773&4294967295,N=V+(S<<15&4294967295|S>>>17),S=A+(V^(N|~w))+C[1]+2240044497&4294967295,A=N+(S<<21&4294967295|S>>>11),S=w+(N^(A|~V))+C[8]+1873313359&4294967295,w=A+(S<<6&4294967295|S>>>26),S=V+(A^(w|~N))+C[15]+4264355552&4294967295,V=w+(S<<10&4294967295|S>>>22),S=N+(w^(V|~A))+C[6]+2734768916&4294967295,N=V+(S<<15&4294967295|S>>>17),S=A+(V^(N|~w))+C[13]+1309151649&4294967295,A=N+(S<<21&4294967295|S>>>11),S=w+(N^(A|~V))+C[4]+4149444226&4294967295,w=A+(S<<6&4294967295|S>>>26),S=V+(A^(w|~N))+C[11]+3174756917&4294967295,V=w+(S<<10&4294967295|S>>>22),S=N+(w^(V|~A))+C[2]+718787259&4294967295,N=V+(S<<15&4294967295|S>>>17),S=A+(V^(N|~w))+C[9]+3951481745&4294967295,P.g[0]=P.g[0]+w&4294967295,P.g[1]=P.g[1]+(N+(S<<21&4294967295|S>>>11))&4294967295,P.g[2]=P.g[2]+N&4294967295,P.g[3]=P.g[3]+V&4294967295}s.prototype.u=function(P,w){w===void 0&&(w=P.length);for(var A=w-this.blockSize,C=this.B,N=this.h,V=0;V<w;){if(N==0)for(;V<=A;)a(this,P,V),V+=this.blockSize;if(typeof P=="string"){for(;V<w;)if(C[N++]=P.charCodeAt(V++),N==this.blockSize){a(this,C),N=0;break}}else for(;V<w;)if(C[N++]=P[V++],N==this.blockSize){a(this,C),N=0;break}}this.h=N,this.o+=w},s.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var w=1;w<P.length-8;++w)P[w]=0;var A=8*this.o;for(w=P.length-8;w<P.length;++w)P[w]=A&255,A/=256;for(this.u(P),P=Array(16),w=A=0;4>w;++w)for(var C=0;32>C;C+=8)P[A++]=this.g[w]>>>C&255;return P};function c(P,w){var A=m;return Object.prototype.hasOwnProperty.call(A,P)?A[P]:A[P]=w(P)}function d(P,w){this.h=w;for(var A=[],C=!0,N=P.length-1;0<=N;N--){var V=P[N]|0;C&&V==w||(A[N]=V,C=!1)}this.g=A}var m={};function y(P){return-128<=P&&128>P?c(P,function(w){return new d([w|0],0>w?-1:0)}):new d([P|0],0>P?-1:0)}function E(P){if(isNaN(P)||!isFinite(P))return D;if(0>P)return B(E(-P));for(var w=[],A=1,C=0;P>=A;C++)w[C]=P/A|0,A*=4294967296;return new d(w,0)}function I(P,w){if(P.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(P.charAt(0)=="-")return B(I(P.substring(1),w));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=E(Math.pow(w,8)),C=D,N=0;N<P.length;N+=8){var V=Math.min(8,P.length-N),S=parseInt(P.substring(N,N+V),w);8>V?(V=E(Math.pow(w,V)),C=C.j(V).add(E(S))):(C=C.j(A),C=C.add(E(S)))}return C}var D=y(0),F=y(1),z=y(16777216);i=d.prototype,i.m=function(){if(X(this))return-B(this).m();for(var P=0,w=1,A=0;A<this.g.length;A++){var C=this.i(A);P+=(0<=C?C:4294967296+C)*w,w*=4294967296}return P},i.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(G(this))return"0";if(X(this))return"-"+B(this).toString(P);for(var w=E(Math.pow(P,6)),A=this,C="";;){var N=de(A,w).g;A=ye(A,N.j(w));var V=((0<A.g.length?A.g[0]:A.h)>>>0).toString(P);if(A=N,G(A))return V+C;for(;6>V.length;)V="0"+V;C=V+C}},i.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function G(P){if(P.h!=0)return!1;for(var w=0;w<P.g.length;w++)if(P.g[w]!=0)return!1;return!0}function X(P){return P.h==-1}i.l=function(P){return P=ye(this,P),X(P)?-1:G(P)?0:1};function B(P){for(var w=P.g.length,A=[],C=0;C<w;C++)A[C]=~P.g[C];return new d(A,~P.h).add(F)}i.abs=function(){return X(this)?B(this):this},i.add=function(P){for(var w=Math.max(this.g.length,P.g.length),A=[],C=0,N=0;N<=w;N++){var V=C+(this.i(N)&65535)+(P.i(N)&65535),S=(V>>>16)+(this.i(N)>>>16)+(P.i(N)>>>16);C=S>>>16,V&=65535,S&=65535,A[N]=S<<16|V}return new d(A,A[A.length-1]&-2147483648?-1:0)};function ye(P,w){return P.add(B(w))}i.j=function(P){if(G(this)||G(P))return D;if(X(this))return X(P)?B(this).j(B(P)):B(B(this).j(P));if(X(P))return B(this.j(B(P)));if(0>this.l(z)&&0>P.l(z))return E(this.m()*P.m());for(var w=this.g.length+P.g.length,A=[],C=0;C<2*w;C++)A[C]=0;for(C=0;C<this.g.length;C++)for(var N=0;N<P.g.length;N++){var V=this.i(C)>>>16,S=this.i(C)&65535,Ge=P.i(N)>>>16,gt=P.i(N)&65535;A[2*C+2*N]+=S*gt,ge(A,2*C+2*N),A[2*C+2*N+1]+=V*gt,ge(A,2*C+2*N+1),A[2*C+2*N+1]+=S*Ge,ge(A,2*C+2*N+1),A[2*C+2*N+2]+=V*Ge,ge(A,2*C+2*N+2)}for(C=0;C<w;C++)A[C]=A[2*C+1]<<16|A[2*C];for(C=w;C<2*w;C++)A[C]=0;return new d(A,0)};function ge(P,w){for(;(P[w]&65535)!=P[w];)P[w+1]+=P[w]>>>16,P[w]&=65535,w++}function he(P,w){this.g=P,this.h=w}function de(P,w){if(G(w))throw Error("division by zero");if(G(P))return new he(D,D);if(X(P))return w=de(B(P),w),new he(B(w.g),B(w.h));if(X(w))return w=de(P,B(w)),new he(B(w.g),w.h);if(30<P.g.length){if(X(P)||X(w))throw Error("slowDivide_ only works with positive integers.");for(var A=F,C=w;0>=C.l(P);)A=oe(A),C=oe(C);var N=le(A,1),V=le(C,1);for(C=le(C,2),A=le(A,2);!G(C);){var S=V.add(C);0>=S.l(P)&&(N=N.add(A),V=S),C=le(C,1),A=le(A,1)}return w=ye(P,N.j(w)),new he(N,w)}for(N=D;0<=P.l(w);){for(A=Math.max(1,Math.floor(P.m()/w.m())),C=Math.ceil(Math.log(A)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),V=E(A),S=V.j(w);X(S)||0<S.l(P);)A-=C,V=E(A),S=V.j(w);G(V)&&(V=F),N=N.add(V),P=ye(P,S)}return new he(N,P)}i.A=function(P){return de(this,P).h},i.and=function(P){for(var w=Math.max(this.g.length,P.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)&P.i(C);return new d(A,this.h&P.h)},i.or=function(P){for(var w=Math.max(this.g.length,P.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)|P.i(C);return new d(A,this.h|P.h)},i.xor=function(P){for(var w=Math.max(this.g.length,P.g.length),A=[],C=0;C<w;C++)A[C]=this.i(C)^P.i(C);return new d(A,this.h^P.h)};function oe(P){for(var w=P.g.length+1,A=[],C=0;C<w;C++)A[C]=P.i(C)<<1|P.i(C-1)>>>31;return new d(A,P.h)}function le(P,w){var A=w>>5;w%=32;for(var C=P.g.length-A,N=[],V=0;V<C;V++)N[V]=0<w?P.i(V+A)>>>w|P.i(V+A+1)<<32-w:P.i(V+A);return new d(N,P.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,zm=s,d.prototype.add=d.prototype.add,d.prototype.multiply=d.prototype.j,d.prototype.modulo=d.prototype.A,d.prototype.compare=d.prototype.l,d.prototype.toNumber=d.prototype.m,d.prototype.toString=d.prototype.toString,d.prototype.getBits=d.prototype.i,d.fromNumber=E,d.fromString=I,Li=d}).apply(typeof Op<"u"?Op:typeof self<"u"?self:typeof window<"u"?window:{});var xl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Bm,Xo,jm,zl,uh,$m,qm,Hm;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof xl=="object"&&xl];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var s=n(this);function a(l,f){if(f)e:{var g=s;l=l.split(".");for(var v=0;v<l.length-1;v++){var O=l[v];if(!(O in g))break e;g=g[O]}l=l[l.length-1],v=g[l],f=f(v),f!=v&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function c(l,f){l instanceof String&&(l+="");var g=0,v=!1,O={next:function(){if(!v&&g<l.length){var b=g++;return{value:f(b,l[b]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}a("Array.prototype.values",function(l){return l||function(){return c(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var d=d||{},m=this||self;function y(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function E(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function I(l,f,g){return l.call.apply(l.bind,arguments)}function D(l,f,g){if(!l)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),l.apply(f,O)}}return function(){return l.apply(f,arguments)}}function F(l,f,g){return F=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?I:D,F.apply(null,arguments)}function z(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var v=g.slice();return v.push.apply(v,arguments),l.apply(this,v)}}function G(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(v,O,b){for(var Y=Array(arguments.length-2),Fe=2;Fe<arguments.length;Fe++)Y[Fe-2]=arguments[Fe];return f.prototype[O].apply(v,Y)}}function X(l){const f=l.length;if(0<f){const g=Array(f);for(let v=0;v<f;v++)g[v]=l[v];return g}return[]}function B(l,f){for(let g=1;g<arguments.length;g++){const v=arguments[g];if(y(v)){const O=l.length||0,b=v.length||0;l.length=O+b;for(let Y=0;Y<b;Y++)l[O+Y]=v[Y]}else l.push(v)}}class ye{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function ge(l){return/^[\s\xa0]*$/.test(l)}function he(){var l=m.navigator;return l&&(l=l.userAgent)?l:""}function de(l){return de[" "](l),l}de[" "]=function(){};var oe=he().indexOf("Gecko")!=-1&&!(he().toLowerCase().indexOf("webkit")!=-1&&he().indexOf("Edge")==-1)&&!(he().indexOf("Trident")!=-1||he().indexOf("MSIE")!=-1)&&he().indexOf("Edge")==-1;function le(l,f,g){for(const v in l)f.call(g,l[v],v,l)}function P(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function w(l){const f={};for(const g in l)f[g]=l[g];return f}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(l,f){let g,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(g in v)l[g]=v[g];for(let b=0;b<A.length;b++)g=A[b],Object.prototype.hasOwnProperty.call(v,g)&&(l[g]=v[g])}}function N(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function V(l){m.setTimeout(()=>{throw l},0)}function S(){var l=ue;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class Ge{constructor(){this.h=this.g=null}add(f,g){const v=gt.get();v.set(f,g),this.h?this.h.next=v:this.g=v,this.h=v}}var gt=new ye(()=>new Nt,l=>l.reset());class Nt{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Ue,J=!1,ue=new Ge,ee=()=>{const l=m.Promise.resolve(void 0);Ue=()=>{l.then(x)}};var x=()=>{for(var l;l=S();){try{l.h.call(l.g)}catch(g){V(g)}var f=gt;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}J=!1};function $(){this.s=this.s,this.C=this.C}$.prototype.s=!1,$.prototype.ma=function(){this.s||(this.s=!0,this.N())},$.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ae(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}ae.prototype.h=function(){this.defaultPrevented=!0};var Te=function(){if(!m.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};m.addEventListener("test",g,f),m.removeEventListener("test",g,f)}catch{}return l}();function Ie(l,f){if(ae.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,v=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(oe){e:{try{de(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Pe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ie.aa.h.call(this)}}G(Ie,ae);var Pe={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Oe="closure_listenable_"+(1e6*Math.random()|0),Le=0;function Be(l,f,g,v,O){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!v,this.ha=O,this.key=++Le,this.da=this.fa=!1}function yt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Jn(l){this.src=l,this.g={},this.h=0}Jn.prototype.add=function(l,f,g,v,O){var b=l.toString();l=this.g[b],l||(l=this.g[b]=[],this.h++);var Y=Tr(l,f,v,O);return-1<Y?(f=l[Y],g||(f.fa=!1)):(f=new Be(f,this.src,b,!!v,O),f.fa=g,l.push(f)),f};function qi(l,f){var g=f.type;if(g in l.g){var v=l.g[g],O=Array.prototype.indexOf.call(v,f,void 0),b;(b=0<=O)&&Array.prototype.splice.call(v,O,1),b&&(yt(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Tr(l,f,g,v){for(var O=0;O<l.length;++O){var b=l[O];if(!b.da&&b.listener==f&&b.capture==!!g&&b.ha==v)return O}return-1}var si="closure_lm_"+(1e6*Math.random()|0),Hi={};function Zs(l,f,g,v,O){if(Array.isArray(f)){for(var b=0;b<f.length;b++)Zs(l,f[b],g,v,O);return null}return g=no(g),l&&l[Oe]?l.K(f,g,E(v)?!!v.capture:!!v,O):eo(l,f,g,!1,v,O)}function eo(l,f,g,v,O,b){if(!f)throw Error("Invalid event type");var Y=E(O)?!!O.capture:!!O,Fe=Qi(l);if(Fe||(l[si]=Fe=new Jn(l)),g=Fe.add(f,g,v,Y,b),g.proxy)return g;if(v=ya(),g.proxy=v,v.src=l,v.listener=g,l.addEventListener)Te||(O=Y),O===void 0&&(O=!1),l.addEventListener(f.toString(),v,O);else if(l.attachEvent)l.attachEvent(er(f.toString()),v);else if(l.addListener&&l.removeListener)l.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ya(){function l(g){return f.call(l.src,l.listener,g)}const f=to;return l}function Wi(l,f,g,v,O){if(Array.isArray(f))for(var b=0;b<f.length;b++)Wi(l,f[b],g,v,O);else v=E(v)?!!v.capture:!!v,g=no(g),l&&l[Oe]?(l=l.i,f=String(f).toString(),f in l.g&&(b=l.g[f],g=Tr(b,g,v,O),-1<g&&(yt(b[g]),Array.prototype.splice.call(b,g,1),b.length==0&&(delete l.g[f],l.h--)))):l&&(l=Qi(l))&&(f=l.g[f.toString()],l=-1,f&&(l=Tr(f,g,v,O)),(g=-1<l?f[l]:null)&&Zn(g))}function Zn(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Oe])qi(f.i,l);else{var g=l.type,v=l.proxy;f.removeEventListener?f.removeEventListener(g,v,l.capture):f.detachEvent?f.detachEvent(er(g),v):f.addListener&&f.removeListener&&f.removeListener(v),(g=Qi(f))?(qi(g,l),g.h==0&&(g.src=null,f[si]=null)):yt(l)}}}function er(l){return l in Hi?Hi[l]:Hi[l]="on"+l}function to(l,f){if(l.da)l=!0;else{f=new Ie(f,this);var g=l.listener,v=l.ha||l.src;l.fa&&Zn(l),l=g.call(v,f)}return l}function Qi(l){return l=l[si],l instanceof Jn?l:null}var Ki="__closure_events_fn_"+(1e9*Math.random()>>>0);function no(l){return typeof l=="function"?l:(l[Ki]||(l[Ki]=function(f){return l.handleEvent(f)}),l[Ki])}function lt(){$.call(this),this.i=new Jn(this),this.M=this,this.F=null}G(lt,$),lt.prototype[Oe]=!0,lt.prototype.removeEventListener=function(l,f,g,v){Wi(this,l,f,g,v)};function ut(l,f){var g,v=l.F;if(v)for(g=[];v;v=v.F)g.push(v);if(l=l.M,v=f.type||f,typeof f=="string")f=new ae(f,l);else if(f instanceof ae)f.target=f.target||l;else{var O=f;f=new ae(v,l),C(f,O)}if(O=!0,g)for(var b=g.length-1;0<=b;b--){var Y=f.g=g[b];O=tr(Y,v,!0,f)&&O}if(Y=f.g=l,O=tr(Y,v,!0,f)&&O,O=tr(Y,v,!1,f)&&O,g)for(b=0;b<g.length;b++)Y=f.g=g[b],O=tr(Y,v,!1,f)&&O}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],v=0;v<g.length;v++)yt(g[v]);delete l.g[f],l.h--}}this.F=null},lt.prototype.K=function(l,f,g,v){return this.i.add(String(l),f,!1,g,v)},lt.prototype.L=function(l,f,g,v){return this.i.add(String(l),f,!0,g,v)};function tr(l,f,g,v){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,b=0;b<f.length;++b){var Y=f[b];if(Y&&!Y.da&&Y.capture==g){var Fe=Y.listener,ct=Y.ha||Y.src;Y.fa&&qi(l.i,Y),O=Fe.call(ct,v)!==!1&&O}}return O&&!v.defaultPrevented}function ro(l,f,g){if(typeof l=="function")g&&(l=F(l,g));else if(l&&typeof l.handleEvent=="function")l=F(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:m.setTimeout(l,f||0)}function Ir(l){l.g=ro(()=>{l.g=null,l.i&&(l.i=!1,Ir(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class oi extends ${constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(m.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(l){$.call(this),this.h=l,this.g={}}G(ai,$);var io=[];function so(l){le(l.g,function(f,g){this.g.hasOwnProperty(g)&&Zn(f)},l),l.g={}}ai.prototype.N=function(){ai.aa.N.call(this),so(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var oo=m.JSON.stringify,ao=m.JSON.parse,lo=class{stringify(l){return m.JSON.stringify(l,void 0)}parse(l){return m.JSON.parse(l,void 0)}};function li(){}li.prototype.h=null;function Gi(l){return l.h||(l.h=l.i())}function Xi(){}var an={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mn(){ae.call(this,"d")}G(Mn,ae);function Yi(){ae.call(this,"c")}G(Yi,ae);var Fn={},uo=null;function ui(){return uo=uo||new lt}Fn.La="serverreachability";function co(l){ae.call(this,Fn.La,l)}G(co,ae);function nr(l){const f=ui();ut(f,new co(f))}Fn.STAT_EVENT="statevent";function ho(l,f){ae.call(this,Fn.STAT_EVENT,l),this.stat=f}G(ho,ae);function nt(l){const f=ui();ut(f,new ho(f,l))}Fn.Ma="timingevent";function Ji(l,f){ae.call(this,Fn.Ma,l),this.size=f}G(Ji,ae);function En(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return m.setTimeout(function(){l()},f)}function ci(){this.g=!0}ci.prototype.xa=function(){this.g=!1};function hi(l,f,g,v,O,b){l.info(function(){if(l.g)if(b)for(var Y="",Fe=b.split("&"),ct=0;ct<Fe.length;ct++){var ke=Fe[ct].split("=");if(1<ke.length){var _t=ke[0];ke=ke[1];var st=_t.split("_");Y=2<=st.length&&st[1]=="type"?Y+(_t+"="+ke+"&"):Y+(_t+"=redacted&")}}else Y=null;else Y=b;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+f+`
`+g+`
`+Y})}function Zi(l,f,g,v,O,b,Y){l.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+f+`
`+g+`
`+b+" "+Y})}function wn(l,f,g,v){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+gu(l,g)+(v?" "+v:"")})}function fo(l,f){l.info(function(){return"TIMEOUT: "+f})}ci.prototype.info=function(){};function gu(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var v=g[l];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var b=O[0];if(b!="noop"&&b!="stop"&&b!="close")for(var Y=1;Y<O.length;Y++)O[Y]=""}}}}return oo(g)}catch{return f}}var es={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},_a={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tn;function di(){}G(di,li),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},Tn=new di;function In(l,f,g,v){this.j=l,this.i=f,this.l=g,this.R=v||1,this.U=new ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new va}function va(){this.i=null,this.g="",this.h=!1}var po={},ts={};function ns(l,f,g){l.L=1,l.v=Pr(Zt(f)),l.m=g,l.P=!0,mo(l,null)}function mo(l,f){l.F=Date.now(),je(l),l.A=Zt(l.v);var g=l.A,v=l.R;Array.isArray(v)||(v=[String(v)]),Nr(g.i,"t",v),l.C=0,g=l.j.J,l.h=new va,l.g=Fa(l.j,g?f:null,!l.m),0<l.O&&(l.M=new oi(F(l.Y,l,l.g),l.O)),f=l.U,g=l.g,v=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(io[0]=O.toString()),O=io);for(var b=0;b<O.length;b++){var Y=Zs(g,O[b],v||f.handleEvent,!1,f.h||f);if(!Y)break;f.g[Y.key]=Y}f=l.H?w(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),nr(),hi(l.i,l.u,l.A,l.l,l.R,l.m)}In.prototype.ca=function(l){l=l.target;const f=this.M;f&&qt(l)==3?f.j():this.Y(l)},In.prototype.Y=function(l){try{if(l==this.g)e:{const st=qt(this.g);var f=this.g.Ba();const cn=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||wo(this.g)))){this.J||st!=4||f==7||(f==8||0>=cn?nr(3):nr(2)),fi(this);var g=this.g.Z();this.X=g;t:if(Ea(this)){var v=wo(this.g);l="";var O=v.length,b=qt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ln(this),Sr(this);var Y="";break t}this.h.i=new m.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,l+=this.h.i.decode(v[f],{stream:!(b&&f==O-1)});v.length=0,this.h.g+=l,this.C=0,Y=this.h.g}else Y=this.g.oa();if(this.o=g==200,Zi(this.i,this.u,this.A,this.l,this.R,st,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Fe,ct=this.g;if((Fe=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ge(Fe)){var ke=Fe;break t}}ke=null}if(g=ke)wn(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,go(this,g);else{this.o=!1,this.s=3,nt(12),ln(this),Sr(this);break e}}if(this.P){g=!0;let tn;for(;!this.J&&this.C<Y.length;)if(tn=yu(this,Y),tn==ts){st==4&&(this.s=4,nt(14),g=!1),wn(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==po){this.s=4,nt(15),wn(this.i,this.l,Y,"[Invalid Chunk]"),g=!1;break}else wn(this.i,this.l,tn,null),go(this,tn);if(Ea(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||Y.length!=0||this.h.h||(this.s=1,nt(16),g=!1),this.o=this.o&&g,!g)wn(this.i,this.l,Y,"[Invalid Chunked Response]"),ln(this),Sr(this);else if(0<Y.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+Y.length),Io(_t),_t.M=!0,nt(11))}}else wn(this.i,this.l,Y,null),go(this,Y);st==4&&ln(this),this.o&&!this.J&&(st==4?fs(this.j,this):(this.o=!1,je(this)))}else ls(this.g),g==400&&0<Y.indexOf("Unknown SID")?(this.s=3,nt(12)):(this.s=0,nt(13)),ln(this),Sr(this)}}}catch{}finally{}};function Ea(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function yu(l,f){var g=l.C,v=f.indexOf(`
`,g);return v==-1?ts:(g=Number(f.substring(g,v)),isNaN(g)?po:(v+=1,v+g>f.length?ts:(f=f.slice(v,v+g),l.C=v+g,f)))}In.prototype.cancel=function(){this.J=!0,ln(this)};function je(l){l.S=Date.now()+l.I,wa(l,l.I)}function wa(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=En(F(l.ba,l),f)}function fi(l){l.B&&(m.clearTimeout(l.B),l.B=null)}In.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(fo(this.i,this.A),this.L!=2&&(nr(),nt(17)),ln(this),this.s=2,Sr(this)):wa(this,this.S-l)};function Sr(l){l.j.G==0||l.J||fs(l.j,l)}function ln(l){fi(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,so(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function go(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Ut(g.h,l))){if(!l.K&&Ut(g.h,l)&&g.G==3){try{var v=g.Da.g.parse(f)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)ds(g),Pn(g);else break e;hs(g),nt(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=En(F(g.Za,g),6e3));if(1>=Ia(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else ar(g,11)}else if((l.K||g.g==l)&&ds(g),!ge(f))for(O=g.Da.g.parse(f),f=0;f<O.length;f++){let ke=O[f];if(g.T=ke[0],ke=ke[1],g.G==2)if(ke[0]=="c"){g.K=ke[1],g.ia=ke[2];const _t=ke[3];_t!=null&&(g.la=_t,g.j.info("VER="+g.la));const st=ke[4];st!=null&&(g.Aa=st,g.j.info("SVER="+g.Aa));const cn=ke[5];cn!=null&&typeof cn=="number"&&0<cn&&(v=1.5*cn,g.L=v,g.j.info("backChannelRequestTimeoutMs_="+v)),v=g;const tn=l.g;if(tn){const Ei=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ei){var b=v.h;b.g||Ei.indexOf("spdy")==-1&&Ei.indexOf("quic")==-1&&Ei.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(yo(b,b.h),b.h=null))}if(v.D){const ms=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;ms&&(v.ya=ms,be(v.I,v.D,ms))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),v=g;var Y=l;if(v.qa=Ma(v,v.J?v.ia:null,v.W),Y.K){Sa(v.h,Y);var Fe=Y,ct=v.L;ct&&(Fe.I=ct),Fe.B&&(fi(Fe),je(Fe)),v.g=Y}else vi(v);0<g.i.length&&Bn(g)}else ke[0]!="stop"&&ke[0]!="close"||ar(g,7);else g.G==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?ar(g,7):St(g):ke[0]!="noop"&&g.l&&g.l.ta(ke),g.v=0)}}nr(4)}catch{}}var Ta=class{constructor(l,f){this.g=l,this.map=f}};function pi(l){this.l=l||10,m.PerformanceNavigationTiming?(l=m.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(m.chrome&&m.chrome.loadTimes&&m.chrome.loadTimes()&&m.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jt(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Ia(l){return l.h?1:l.g?l.g.size:0}function Ut(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function yo(l,f){l.g?l.g.add(f):l.h=f}function Sa(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}pi.prototype.cancel=function(){if(this.i=Aa(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Aa(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return X(l.i)}function rs(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(y(l)){for(var f=[],g=l.length,v=0;v<g;v++)f.push(l[v]);return f}f=[],g=0;for(v in l)f[g++]=l[v];return f}function is(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(y(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const v in l)f[g++]=v;return f}}}function Ar(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(y(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=is(l),v=rs(l),O=v.length,b=0;b<O;b++)f.call(void 0,v[b],g&&g[b],l)}var mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _u(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var v=l[g].indexOf("="),O=null;if(0<=v){var b=l[g].substring(0,v);O=l[g].substring(v+1)}else b=l[g];f(b,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function rr(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof rr){this.h=l.h,gi(this,l.j),this.o=l.o,this.g=l.g,Rr(this,l.s),this.l=l.l;var f=l.i,g=new Un;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),Cr(this,g),this.m=l.m}else l&&(f=String(l).match(mi))?(this.h=!1,gi(this,f[1]||"",!0),this.o=Re(f[2]||""),this.g=Re(f[3]||"",!0),Rr(this,f[4]),this.l=Re(f[5]||"",!0),Cr(this,f[6]||"",!0),this.m=Re(f[7]||"")):(this.h=!1,this.i=new Un(null,this.h))}rr.prototype.toString=function(){var l=[],f=this.j;f&&l.push(kr(f,ss,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(kr(f,ss,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(kr(g,g.charAt(0)=="/"?Pa:Ca,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",kr(g,_o)),l.join("")};function Zt(l){return new rr(l)}function gi(l,f,g){l.j=g?Re(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function Rr(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function Cr(l,f,g){f instanceof Un?(l.i=f,bn(l.i,l.h)):(g||(f=kr(f,ka)),l.i=new Un(f,l.h))}function be(l,f,g){l.i.set(f,g)}function Pr(l){return be(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function Re(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function kr(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,Ra),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function Ra(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ss=/[#\/\?@]/g,Ca=/[#\?:]/g,Pa=/[#\?]/g,ka=/[#\?@]/g,_o=/#/g;function Un(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function It(l){l.g||(l.g=new Map,l.h=0,l.i&&_u(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}i=Un.prototype,i.add=function(l,f){It(this),this.i=null,l=un(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function Sn(l,f){It(l),f=un(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function An(l,f){return It(l),f=un(l,f),l.g.has(f)}i.forEach=function(l,f){It(this),this.g.forEach(function(g,v){g.forEach(function(O){l.call(f,O,v,this)},this)},this)},i.na=function(){It(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let v=0;v<f.length;v++){const O=l[v];for(let b=0;b<O.length;b++)g.push(f[v])}return g},i.V=function(l){It(this);let f=[];if(typeof l=="string")An(this,l)&&(f=f.concat(this.g.get(un(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},i.set=function(l,f){return It(this),this.i=null,l=un(this,l),An(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},i.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function Nr(l,f,g){Sn(l,f),0<g.length&&(l.i=null,l.g.set(un(l,f),X(g)),l.h+=g.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var v=f[g];const b=encodeURIComponent(String(v)),Y=this.V(v);for(v=0;v<Y.length;v++){var O=b;Y[v]!==""&&(O+="="+encodeURIComponent(String(Y[v]))),l.push(O)}}return this.i=l.join("&")};function un(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function bn(l,f){f&&!l.j&&(It(l),l.i=null,l.g.forEach(function(g,v){var O=v.toLowerCase();v!=O&&(Sn(this,v),Nr(this,O,g))},l)),l.j=f}function vu(l,f){const g=new ci;if(m.Image){const v=new Image;v.onload=z($t,g,"TestLoadImage: loaded",!0,f,v),v.onerror=z($t,g,"TestLoadImage: error",!1,f,v),v.onabort=z($t,g,"TestLoadImage: abort",!1,f,v),v.ontimeout=z($t,g,"TestLoadImage: timeout",!1,f,v),m.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=l}else f(!1)}function Na(l,f){const g=new ci,v=new AbortController,O=setTimeout(()=>{v.abort(),$t(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:v.signal}).then(b=>{clearTimeout(O),b.ok?$t(g,"TestPingServer: ok",!0,f):$t(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),$t(g,"TestPingServer: error",!1,f)})}function $t(l,f,g,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(g)}catch{}}function Eu(){this.g=new lo}function Da(l,f,g){const v=g||"";try{Ar(l,function(O,b){let Y=O;E(O)&&(Y=oo(O)),f.push(v+b+"="+encodeURIComponent(Y))})}catch(O){throw f.push(v+"type="+encodeURIComponent("_badmap")),O}}function ir(l){this.l=l.Ub||null,this.j=l.eb||!1}G(ir,li),ir.prototype.g=function(){return new yi(this.l,this.j)},ir.prototype.i=function(l){return function(){return l}}({});function yi(l,f){lt.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}G(yi,lt),i=yi.prototype,i.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Cn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||m).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Rn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Cn(this)),this.g&&(this.readyState=3,Cn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof m.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Va(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Va(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?Rn(this):Cn(this),this.readyState==3&&Va(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Rn(this))},i.Qa=function(l){this.g&&(this.response=l,Rn(this))},i.ga=function(){this.g&&Rn(this)};function Rn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Cn(l)}i.setRequestHeader=function(l,f){this.u.append(l,f)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Cn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function sr(l){let f="";return le(l,function(g,v){f+=v,f+=":",f+=g,f+=`\r
`}),f}function Dr(l,f,g){e:{for(v in g){var v=!1;break e}v=!0}v||(g=sr(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):be(l,f,g))}function We(l){lt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}G(We,lt);var wu=/^https?$/i,vo=["POST","PUT"];i=We.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,f,g,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tn.g(),this.v=this.o?Gi(this.o):Gi(Tn),this.g.onreadystatechange=F(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(b){_i(this,b);return}if(l=g||"",g=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)g.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const b of v.keys())g.set(b,v.get(b));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(g.keys()).find(b=>b.toLowerCase()=="content-type"),O=m.FormData&&l instanceof m.FormData,!(0<=Array.prototype.indexOf.call(vo,f,void 0))||v||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,Y]of g)this.g.setRequestHeader(b,Y);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{as(this),this.u=!0,this.g.send(l),this.u=!1}catch(b){_i(this,b)}};function _i(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,os(l),en(l)}function os(l){l.A||(l.A=!0,ut(l,"complete"),ut(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ut(this,"complete"),ut(this,"abort"),en(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),en(this,!0)),We.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Eo(this):this.bb())},i.bb=function(){Eo(this)};function Eo(l){if(l.h&&typeof d<"u"&&(!l.v[1]||qt(l)!=4||l.Z()!=2)){if(l.u&&qt(l)==4)ro(l.Ea,0,l);else if(ut(l,"readystatechange"),qt(l)==4){l.h=!1;try{const Y=l.Z();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var v;if(v=Y===0){var O=String(l.D).match(mi)[1]||null;!O&&m.self&&m.self.location&&(O=m.self.location.protocol.slice(0,-1)),v=!wu.test(O?O.toLowerCase():"")}g=v}if(g)ut(l,"complete"),ut(l,"success");else{l.m=6;try{var b=2<qt(l)?l.g.statusText:""}catch{b=""}l.l=b+" ["+l.Z()+"]",os(l)}}finally{en(l)}}}}function en(l,f){if(l.g){as(l);const g=l.g,v=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||ut(l,"ready");try{g.onreadystatechange=v}catch{}}}function as(l){l.I&&(m.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function qt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),ao(f)}};function wo(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function ls(l){const f={};l=(l.g&&2<=qt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<l.length;v++){if(ge(l[v]))continue;var g=N(l[v]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const b=f[O]||[];f[O]=b,b.push(g)}P(f,function(v){return v.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zn(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function To(l){this.Aa=0,this.i=[],this.j=new ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zn("baseRetryDelayMs",5e3,l),this.cb=zn("retryDelaySeedMs",1e4,l),this.Wa=zn("forwardChannelMaxRetries",2,l),this.wa=zn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new pi(l&&l.concurrentRequestLimit),this.Da=new Eu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=To.prototype,i.la=8,i.G=1,i.connect=function(l,f,g,v){nt(0),this.W=l,this.H=f||{},g&&v!==void 0&&(this.H.OSID=g,this.H.OAID=v),this.F=this.X,this.I=Ma(this,null,this.W),Bn(this)};function St(l){if(us(l),l.G==3){var f=l.U++,g=Zt(l.I);if(be(g,"SID",l.K),be(g,"RID",f),be(g,"TYPE","terminate"),or(l,g),f=new In(l,l.j,f),f.L=2,f.v=Pr(Zt(g)),g=!1,m.navigator&&m.navigator.sendBeacon)try{g=m.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&m.Image&&(new Image().src=f.v,g=!0),g||(f.g=Fa(f.j,null),f.g.ea(f.v)),f.F=Date.now(),je(f)}La(l)}function Pn(l){l.g&&(Io(l),l.g.cancel(),l.g=null)}function us(l){Pn(l),l.u&&(m.clearTimeout(l.u),l.u=null),ds(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&m.clearTimeout(l.s),l.s=null)}function Bn(l){if(!Jt(l.h)&&!l.s){l.s=!0;var f=l.Ga;Ue||ee(),J||(Ue(),J=!0),ue.add(f,l),l.B=0}}function Tu(l,f){return Ia(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=En(F(l.Ga,l,f),Oa(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new In(this,this.j,l);let b=this.o;if(this.S&&(b?(b=w(b),C(b,this.S)):b=this.S),this.m!==null||this.O||(O.H=b,b=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var v=this.i[g];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(f+=v,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Vr(this,O,f),g=Zt(this.I),be(g,"RID",l),be(g,"CVER",22),this.D&&be(g,"X-HTTP-Session-Id",this.D),or(this,g),b&&(this.O?f="headers="+encodeURIComponent(String(sr(b)))+"&"+f:this.m&&Dr(g,this.m,b)),yo(this.h,O),this.Ua&&be(g,"TYPE","init"),this.P?(be(g,"$req",f),be(g,"SID","null"),O.T=!0,ns(O,g,null)):ns(O,g,f),this.G=2}}else this.G==3&&(l?cs(this,l):this.i.length==0||Jt(this.h)||cs(this))};function cs(l,f){var g;f?g=f.l:g=l.U++;const v=Zt(l.I);be(v,"SID",l.K),be(v,"RID",g),be(v,"AID",l.T),or(l,v),l.m&&l.o&&Dr(v,l.m,l.o),g=new In(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=Vr(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),yo(l.h,g),ns(g,v,f)}function or(l,f){l.H&&le(l.H,function(g,v){be(f,v,g)}),l.l&&Ar({},function(g,v){be(f,v,g)})}function Vr(l,f,g){g=Math.min(l.i.length,g);var v=l.l?F(l.l.Na,l.l,l):null;e:{var O=l.i;let b=-1;for(;;){const Y=["count="+g];b==-1?0<g?(b=O[0].g,Y.push("ofs="+b)):b=0:Y.push("ofs="+b);let Fe=!0;for(let ct=0;ct<g;ct++){let ke=O[ct].g;const _t=O[ct].map;if(ke-=b,0>ke)b=Math.max(0,O[ct].g-100),Fe=!1;else try{Da(_t,Y,"req"+ke+"_")}catch{v&&v(_t)}}if(Fe){v=Y.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,v}function vi(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;Ue||ee(),J||(Ue(),J=!0),ue.add(f,l),l.v=0}}function hs(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=En(F(l.Fa,l),Oa(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,xa(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=En(F(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,nt(10),Pn(this),xa(this))};function Io(l){l.A!=null&&(m.clearTimeout(l.A),l.A=null)}function xa(l){l.g=new In(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=Zt(l.qa);be(f,"RID","rpc"),be(f,"SID",l.K),be(f,"AID",l.T),be(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&be(f,"TO",l.ja),be(f,"TYPE","xmlhttp"),or(l,f),l.m&&l.o&&Dr(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=Pr(Zt(f)),g.m=null,g.P=!0,mo(g,l)}i.Za=function(){this.C!=null&&(this.C=null,Pn(this),hs(this),nt(19))};function ds(l){l.C!=null&&(m.clearTimeout(l.C),l.C=null)}function fs(l,f){var g=null;if(l.g==f){ds(l),Io(l),l.g=null;var v=2}else if(Ut(l.h,f))g=f.D,Sa(l.h,f),v=1;else return;if(l.G!=0){if(f.o)if(v==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var O=l.B;v=ui(),ut(v,new Ji(v,g)),Bn(l)}else vi(l);else if(O=f.s,O==3||O==0&&0<f.X||!(v==1&&Tu(l,f)||v==2&&hs(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),O){case 1:ar(l,5);break;case 4:ar(l,10);break;case 3:ar(l,6);break;default:ar(l,2)}}}function Oa(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function ar(l,f){if(l.j.info("Error code "+f),f==2){var g=F(l.fb,l),v=l.Xa;const O=!v;v=new rr(v||"//www.google.com/images/cleardot.gif"),m.location&&m.location.protocol=="http"||gi(v,"https"),Pr(v),O?vu(v.toString(),g):Na(v.toString(),g)}else nt(2);l.G=0,l.l&&l.l.sa(f),La(l),us(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),nt(2)):(this.j.info("Failed to ping google.com"),nt(1))};function La(l){if(l.G=0,l.ka=[],l.l){const f=Aa(l.h);(f.length!=0||l.i.length!=0)&&(B(l.ka,f),B(l.ka,l.i),l.h.i.length=0,X(l.i),l.i.length=0),l.l.ra()}}function Ma(l,f,g){var v=g instanceof rr?Zt(g):new rr(g);if(v.g!="")f&&(v.g=f+"."+v.g),Rr(v,v.s);else{var O=m.location;v=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var b=new rr(null);v&&gi(b,v),f&&(b.g=f),O&&Rr(b,O),g&&(b.l=g),v=b}return g=l.D,f=l.ya,g&&f&&be(v,g,f),be(v,"VER",l.la),or(l,v),v}function Fa(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new We(new ir({eb:g})):new We(l.pa),f.Ha(l.J),f}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function So(){}i=So.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ps(){}ps.prototype.g=function(l,f){return new bt(l,f)};function bt(l,f){lt.call(this),this.g=new To(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!ge(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!ge(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new jn(this)}G(bt,lt),bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},bt.prototype.close=function(){St(this.g)},bt.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=oo(l),l=g);f.i.push(new Ta(f.Ya++,l)),f.G==3&&Bn(f)},bt.prototype.N=function(){this.g.l=null,delete this.j,St(this.g),delete this.g,bt.aa.N.call(this)};function Ua(l){Mn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}G(Ua,Mn);function ba(){Yi.call(this),this.status=1}G(ba,Yi);function jn(l){this.g=l}G(jn,So),jn.prototype.ua=function(){ut(this.g,"a")},jn.prototype.ta=function(l){ut(this.g,new Ua(l))},jn.prototype.sa=function(l){ut(this.g,new ba)},jn.prototype.ra=function(){ut(this.g,"b")},ps.prototype.createWebChannel=ps.prototype.g,bt.prototype.send=bt.prototype.o,bt.prototype.open=bt.prototype.m,bt.prototype.close=bt.prototype.close,Hm=function(){return new ps},qm=function(){return ui()},$m=Fn,uh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},es.NO_ERROR=0,es.TIMEOUT=8,es.HTTP_ERROR=6,zl=es,_a.COMPLETE="complete",jm=_a,Xi.EventType=an,an.OPEN="a",an.CLOSE="b",an.ERROR="c",an.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Xo=Xi,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Bm=We}).apply(typeof xl<"u"?xl:typeof self<"u"?self:typeof window<"u"?window:{});const Lp="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gs="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Dm("@firebase/firestore");function Ms(){return Fi.logLevel}function te(i,...e){if(Fi.logLevel<=De.DEBUG){const n=e.map(Ch);Fi.debug(`Firestore (${Gs}): ${i}`,...n)}}function Er(i,...e){if(Fi.logLevel<=De.ERROR){const n=e.map(Ch);Fi.error(`Firestore (${Gs}): ${i}`,...n)}}function js(i,...e){if(Fi.logLevel<=De.WARN){const n=e.map(Ch);Fi.warn(`Firestore (${Gs}): ${i}`,...n)}}function Ch(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(i="Unexpected state"){const e=`FIRESTORE (${Gs}) INTERNAL ASSERTION FAILED: `+i;throw Er(e),new Error(e)}function Me(i,e){i||ve()}function we(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends bi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class u0{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class c0{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Me(this.o===void 0);let s=this.i;const a=y=>this.i!==s?(s=this.i,n(y)):Promise.resolve();let c=new Jr;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable(async()=>{await y.promise,await a(this.currentUser)})},m=y=>{te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),d())};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(te("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jr)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(s=>this.i!==e?(te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Me(typeof s.accessToken=="string"),new Wm(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Me(e===null||typeof e=="string"),new Mt(e)}}class h0{constructor(e,n,s){this.l=e,this.h=n,this.P=s,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class d0{constructor(e,n,s){this.l=e,this.h=n,this.P=s}getToken(){return Promise.resolve(new h0(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p0{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Me(this.o===void 0);const s=c=>{c.error!=null&&te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const d=c.token!==this.R;return this.R=c.token,te("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>s(c))};const a=c=>{te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Me(typeof n.token=="string"),this.R=n.token,new f0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m0(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let s="";for(;s.length<20;){const a=m0(40);for(let c=0;c<a.length;++c)s.length<20&&a[c]<n&&(s+=e.charAt(a[c]%e.length))}return s}}function Ce(i,e){return i<e?-1:i>e?1:0}function $s(i,e,n){return i.length===e.length&&i.every((s,a)=>n(s,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{static now(){return pt.fromMillis(Date.now())}static fromDate(e){return pt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor(1e6*(e-1e3*n));return new pt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ce(this.nanoseconds,e.nanoseconds):Ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{static fromTimestamp(e){return new Ee(e)}static min(){return new Ee(new pt(0,0))}static max(){return new Ee(new pt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,n,s){n===void 0?n=0:n>e.length&&ve(),s===void 0?s=e.length-n:s>e.length-n&&ve(),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return oa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof oa?e.forEach(s=>{n.push(s)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let a=0;a<s;a++){const c=e.get(a),d=n.get(a);if(c<d)return-1;if(c>d)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ke extends oa{construct(e,n,s){return new Ke(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce(Q.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter(a=>a.length>0))}return new Ke(n)}static emptyPath(){return new Ke([])}}const g0=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends oa{construct(e,n,s){return new Pt(e,n,s)}static isValidIdentifier(e){return g0.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let s="",a=0;const c=()=>{if(s.length===0)throw new ce(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let d=!1;for(;a<e.length;){const m=e[a];if(m==="\\"){if(a+1===e.length)throw new ce(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[a+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new ce(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=y,a+=2}else m==="`"?(d=!d,a++):m!=="."||d?(s+=m,a++):(c(),a++)}if(c(),d)throw new ce(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class me{constructor(e){this.path=e}static fromPath(e){return new me(Ke.fromString(e))}static fromName(e){return new me(Ke.fromString(e).popFirst(5))}static empty(){return new me(Ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new me(new Ke(e.slice()))}}function y0(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,a=Ee.fromTimestamp(s===1e9?new pt(n+1,0):new pt(n,s));return new ei(a,me.empty(),e)}function _0(i){return new ei(i.readTime,i.key,-1)}class ei{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new ei(Ee.min(),me.empty(),-1)}static max(){return new ei(Ee.max(),me.empty(),-1)}}function v0(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=me.comparator(i.documentKey,e.documentKey),n!==0?n:Ce(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E0="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class w0{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xs(i){if(i.code!==Q.FAILED_PRECONDITION||i.message!==E0)throw i;te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ve(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((s,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(s,a)},this.catchCallback=c=>{this.wrapFailure(n,c).next(s,a)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,s)=>{n(e)})}static reject(e){return new j((n,s)=>{s(e)})}static waitFor(e){return new j((n,s)=>{let a=0,c=0,d=!1;e.forEach(m=>{++a,m.next(()=>{++c,d&&c===a&&n()},y=>s(y))}),d=!0,c===a&&n()})}static or(e){let n=j.resolve(!1);for(const s of e)n=n.next(a=>a?j.resolve(a):s());return n}static forEach(e,n){const s=[];return e.forEach((a,c)=>{s.push(n.call(this,a,c))}),this.waitFor(s)}static mapArray(e,n){return new j((s,a)=>{const c=e.length,d=new Array(c);let m=0;for(let y=0;y<c;y++){const E=y;n(e[E]).next(I=>{d[E]=I,++m,m===c&&s(d)},I=>a(I))}})}static doWhile(e,n){return new j((s,a)=>{const c=()=>{e()===!0?n().next(()=>{c()},a):s()};c()})}}function T0(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ys(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ie(s),this.se=s=>n.writeSequenceNumber(s))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ru.oe=-1;function iu(i){return i==null}function Ql(i){return i===0&&1/i==-1/0}function I0(i){return typeof i=="number"&&Number.isInteger(i)&&!Ql(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=Mp(e)),e=A0(i.get(n),e);return Mp(e)}function A0(i,e){let n=e;const s=i.length;for(let a=0;a<s;a++){const c=i.charAt(a);switch(c){case"\0":n+="";break;case"":n+="";break;default:n+=c}}return n}function Mp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function zi(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function Km(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n){this.comparator=e,this.root=n||Ct.EMPTY}insert(e,n){return new Je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ct.BLACK,null,null))}remove(e){return new Je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ct.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const a=this.comparator(e,s.key);if(a===0)return n+s.left.size;a<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,s)=>(e(n,s),!1))}toString(){const e=[];return this.inorderTraversal((n,s)=>(e.push(`${n}:${s}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ol(this.root,e,this.comparator,!0)}}class Ol{constructor(e,n,s,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=n?s(e.key,n):1,n&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ct{constructor(e,n,s,a,c){this.key=e,this.value=n,this.color=s??Ct.RED,this.left=a??Ct.EMPTY,this.right=c??Ct.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,a,c){return new Ct(e??this.key,n??this.value,s??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let a=this;const c=s(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,n,s),null):c===0?a.copy(null,n,null,null,null):a.copy(null,null,null,null,a.right.insert(e,n,s)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Ct.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,a=this;if(n(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,n),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),n(e,a.key)===0){if(a.right.isEmpty())return Ct.EMPTY;s=a.right.min(),a=a.copy(s.key,s.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,n))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ct.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ct.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ve();const e=this.left.check();if(e!==this.right.check())throw ve();return e+(this.isRed()?0:1)}}Ct.EMPTY=null,Ct.RED=!0,Ct.BLACK=!1;Ct.EMPTY=new class{constructor(){this.size=0}get key(){throw ve()}get value(){throw ve()}get color(){throw ve()}get left(){throw ve()}get right(){throw ve()}copy(e,n,s,a,c){return this}insert(e,n,s){return new Ct(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e){this.comparator=e,this.data=new Je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,s)=>(e(n),!1))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const a=s.getNext();if(this.comparator(a.key,e[1])>=0)return;n(a.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Up(this.data.getIterator())}getIteratorFrom(e){return new Up(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(s=>{n=n.add(s)}),n}isEqual(e){if(!(e instanceof mt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new mt(this.comparator);return n.data=e,n}}class Up{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new Ln([])}unionWith(e){let n=new mt(Pt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Ln(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return $s(this.fields,e.fields,(n,s)=>n.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Gm("Invalid base64 string: "+c):c}}(e);return new kt(n)}static fromUint8Array(e){const n=function(a){let c="";for(let d=0;d<a.length;++d)c+=String.fromCharCode(a[d]);return c}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const R0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ti(i){if(Me(!!i),typeof i=="string"){let e=0;const n=R0.exec(i);if(Me(!!n),n[1]){let a=n[1];a=(a+"000000000").substr(0,9),e=Number(a)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:it(i.seconds),nanos:it(i.nanos)}}function it(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function ni(i){return typeof i=="string"?kt.fromBase64String(i):kt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ph(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function su(i){const e=i.mapValue.fields.__previous_value__;return Ph(e)?su(e):e}function aa(i){const e=ti(i.mapValue.fields.__local_write_time__.timestampValue);return new pt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,n,s,a,c,d,m,y,E){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=a,this.ssl=c,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.longPollingOptions=y,this.useFetchStreams=E}}class la{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new la("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof la&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ri(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Ph(i)?4:k0(i)?9007199254740991:P0(i)?10:11:ve()}function Xn(i,e){if(i===e)return!0;const n=ri(i);if(n!==ri(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return aa(i).isEqual(aa(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const d=ti(a.timestampValue),m=ti(c.timestampValue);return d.seconds===m.seconds&&d.nanos===m.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return ni(a.bytesValue).isEqual(ni(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return it(a.geoPointValue.latitude)===it(c.geoPointValue.latitude)&&it(a.geoPointValue.longitude)===it(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return it(a.integerValue)===it(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const d=it(a.doubleValue),m=it(c.doubleValue);return d===m?Ql(d)===Ql(m):isNaN(d)&&isNaN(m)}return!1}(i,e);case 9:return $s(i.arrayValue.values||[],e.arrayValue.values||[],Xn);case 10:case 11:return function(a,c){const d=a.mapValue.fields||{},m=c.mapValue.fields||{};if(Fp(d)!==Fp(m))return!1;for(const y in d)if(d.hasOwnProperty(y)&&(m[y]===void 0||!Xn(d[y],m[y])))return!1;return!0}(i,e);default:return ve()}}function ua(i,e){return(i.values||[]).find(n=>Xn(n,e))!==void 0}function qs(i,e){if(i===e)return 0;const n=ri(i),s=ri(e);if(n!==s)return Ce(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ce(i.booleanValue,e.booleanValue);case 2:return function(c,d){const m=it(c.integerValue||c.doubleValue),y=it(d.integerValue||d.doubleValue);return m<y?-1:m>y?1:m===y?0:isNaN(m)?isNaN(y)?0:-1:1}(i,e);case 3:return bp(i.timestampValue,e.timestampValue);case 4:return bp(aa(i),aa(e));case 5:return Ce(i.stringValue,e.stringValue);case 6:return function(c,d){const m=ni(c),y=ni(d);return m.compareTo(y)}(i.bytesValue,e.bytesValue);case 7:return function(c,d){const m=c.split("/"),y=d.split("/");for(let E=0;E<m.length&&E<y.length;E++){const I=Ce(m[E],y[E]);if(I!==0)return I}return Ce(m.length,y.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,d){const m=Ce(it(c.latitude),it(d.latitude));return m!==0?m:Ce(it(c.longitude),it(d.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return zp(i.arrayValue,e.arrayValue);case 10:return function(c,d){var m,y,E,I;const D=c.fields||{},F=d.fields||{},z=(m=D.value)===null||m===void 0?void 0:m.arrayValue,G=(y=F.value)===null||y===void 0?void 0:y.arrayValue,X=Ce(((E=z==null?void 0:z.values)===null||E===void 0?void 0:E.length)||0,((I=G==null?void 0:G.values)===null||I===void 0?void 0:I.length)||0);return X!==0?X:zp(z,G)}(i.mapValue,e.mapValue);case 11:return function(c,d){if(c===Ll.mapValue&&d===Ll.mapValue)return 0;if(c===Ll.mapValue)return 1;if(d===Ll.mapValue)return-1;const m=c.fields||{},y=Object.keys(m),E=d.fields||{},I=Object.keys(E);y.sort(),I.sort();for(let D=0;D<y.length&&D<I.length;++D){const F=Ce(y[D],I[D]);if(F!==0)return F;const z=qs(m[y[D]],E[I[D]]);if(z!==0)return z}return Ce(y.length,I.length)}(i.mapValue,e.mapValue);default:throw ve()}}function bp(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ce(i,e);const n=ti(i),s=ti(e),a=Ce(n.seconds,s.seconds);return a!==0?a:Ce(n.nanos,s.nanos)}function zp(i,e){const n=i.values||[],s=e.values||[];for(let a=0;a<n.length&&a<s.length;++a){const c=qs(n[a],s[a]);if(c)return c}return Ce(n.length,s.length)}function Hs(i){return ch(i)}function ch(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(n){const s=ti(n);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(n){return ni(n).toBase64()}(i.bytesValue):"referenceValue"in i?function(n){return me.fromName(n).toString()}(i.referenceValue):"geoPointValue"in i?function(n){return`geo(${n.latitude},${n.longitude})`}(i.geoPointValue):"arrayValue"in i?function(n){let s="[",a=!0;for(const c of n.values||[])a?a=!1:s+=",",s+=ch(c);return s+"]"}(i.arrayValue):"mapValue"in i?function(n){const s=Object.keys(n.fields||{}).sort();let a="{",c=!0;for(const d of s)c?c=!1:a+=",",a+=`${d}:${ch(n.fields[d])}`;return a+"}"}(i.mapValue):ve()}function Bl(i){switch(ri(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=su(i);return e?16+Bl(e):16;case 5:return 2*i.stringValue.length;case 6:return ni(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((a,c)=>a+Bl(c),0)}(i.arrayValue);case 10:case 11:return function(s){let a=0;return zi(s.fields,(c,d)=>{a+=c.length+Bl(d)}),a}(i.mapValue);default:throw ve()}}function hh(i){return!!i&&"integerValue"in i}function kh(i){return!!i&&"arrayValue"in i}function Bp(i){return!!i&&"nullValue"in i}function jp(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function jl(i){return!!i&&"mapValue"in i}function P0(i){var e,n;return((n=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Zo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return zi(i.mapValue.fields,(n,s)=>e.mapValue.fields[n]=Zo(s)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zo(i.arrayValue.values[n]);return e}return Object.assign({},i)}function k0(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(n)}setAll(e){let n=Pt.emptyPath(),s={},a=[];e.forEach((d,m)=>{if(!n.isImmediateParentOf(m)){const y=this.getFieldsMap(n);this.applyChanges(y,s,a),s={},a=[],n=m.popLast()}d?s[m.lastSegment()]=Zo(d):a.push(m.lastSegment())});const c=this.getFieldsMap(n);this.applyChanges(c,s,a)}delete(e){const n=this.field(e.popLast());jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Xn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let a=n.mapValue.fields[e.get(s)];jl(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=a),n=a}return n.mapValue.fields}applyChanges(e,n,s){zi(n,(a,c)=>e[a]=c);for(const a of s)delete e[a]}clone(){return new _n(Zo(this.value))}}function Xm(i){const e=[];return zi(i.fields,(n,s)=>{const a=new Pt([n]);if(jl(s)){const c=Xm(s.mapValue).fields;if(c.length===0)e.push(a);else for(const d of c)e.push(a.child(d))}else e.push(a)}),new Ln(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,n,s,a,c,d,m){this.key=e,this.documentType=n,this.version=s,this.readTime=a,this.createTime=c,this.data=d,this.documentState=m}static newInvalidDocument(e){return new Ft(e,0,Ee.min(),Ee.min(),Ee.min(),_n.empty(),0)}static newFoundDocument(e,n,s,a){return new Ft(e,1,n,Ee.min(),s,a,0)}static newNoDocument(e,n){return new Ft(e,2,n,Ee.min(),Ee.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new Ft(e,3,n,Ee.min(),Ee.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kl{constructor(e,n){this.position=e,this.inclusive=n}}function $p(i,e,n){let s=0;for(let a=0;a<i.position.length;a++){const c=e[a],d=i.position[a];if(c.field.isKeyField()?s=me.comparator(me.fromName(d.referenceValue),n.key):s=qs(d,n.data.field(c.field)),c.dir==="desc"&&(s*=-1),s!==0)break}return s}function qp(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Xn(i.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{constructor(e,n="asc"){this.field=e,this.dir=n}}function N0(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{}class ft extends Ym{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new V0(e,n,s):n==="array-contains"?new L0(e,s):n==="in"?new M0(e,s):n==="not-in"?new F0(e,s):n==="array-contains-any"?new U0(e,s):new ft(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new x0(e,s):new O0(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qs(n,this.value)):n!==null&&ri(this.value)===ri(n)&&this.matchesComparison(qs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ve()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yn extends Ym{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Yn(e,n)}matches(e){return Jm(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jm(i){return i.op==="and"}function Zm(i){return D0(i)&&Jm(i)}function D0(i){for(const e of i.filters)if(e instanceof Yn)return!1;return!0}function dh(i){if(i instanceof ft)return i.field.canonicalString()+i.op.toString()+Hs(i.value);if(Zm(i))return i.filters.map(e=>dh(e)).join(",");{const e=i.filters.map(n=>dh(n)).join(",");return`${i.op}(${e})`}}function eg(i,e){return i instanceof ft?function(s,a){return a instanceof ft&&s.op===a.op&&s.field.isEqual(a.field)&&Xn(s.value,a.value)}(i,e):i instanceof Yn?function(s,a){return a instanceof Yn&&s.op===a.op&&s.filters.length===a.filters.length?s.filters.reduce((c,d,m)=>c&&eg(d,a.filters[m]),!0):!1}(i,e):void ve()}function tg(i){return i instanceof ft?function(n){return`${n.field.canonicalString()} ${n.op} ${Hs(n.value)}`}(i):i instanceof Yn?function(n){return n.op.toString()+" {"+n.getFilters().map(tg).join(" ,")+"}"}(i):"Filter"}class V0 extends ft{constructor(e,n,s){super(e,n,s),this.key=me.fromName(s.referenceValue)}matches(e){const n=me.comparator(e.key,this.key);return this.matchesComparison(n)}}class x0 extends ft{constructor(e,n){super(e,"in",n),this.keys=ng("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class O0 extends ft{constructor(e,n){super(e,"not-in",n),this.keys=ng("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ng(i,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(s=>me.fromName(s.referenceValue))}class L0 extends ft{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return kh(n)&&ua(n.arrayValue,this.value)}}class M0 extends ft{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ua(this.value.arrayValue,n)}}class F0 extends ft{constructor(e,n){super(e,"not-in",n)}matches(e){if(ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!ua(this.value.arrayValue,n)}}class U0 extends ft{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!kh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(s=>ua(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(e,n=null,s=[],a=[],c=null,d=null,m=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=a,this.limit=c,this.startAt=d,this.endAt=m,this.ue=null}}function Hp(i,e=null,n=[],s=[],a=null,c=null,d=null){return new b0(i,e,n,s,a,c,d)}function Nh(i){const e=we(i);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(s=>dh(s)).join(","),n+="|ob:",n+=e.orderBy.map(s=>function(c){return c.field.canonicalString()+c.dir}(s)).join(","),iu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(s=>Hs(s)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(s=>Hs(s)).join(",")),e.ue=n}return e.ue}function Dh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!N0(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!eg(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!qp(i.startAt,e.startAt)&&qp(i.endAt,e.endAt)}function fh(i){return me.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n=null,s=[],a=[],c=null,d="F",m=null,y=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=a,this.limit=c,this.limitType=d,this.startAt=m,this.endAt=y,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function z0(i,e,n,s,a,c,d,m){return new ou(i,e,n,s,a,c,d,m)}function Vh(i){return new ou(i)}function Wp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function B0(i){return i.collectionGroup!==null}function ea(i){const e=we(i);if(e.ce===null){e.ce=[];const n=new Set;for(const c of e.explicitOrderBy)e.ce.push(c),n.add(c.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(d){let m=new mt(Pt.comparator);return d.filters.forEach(y=>{y.getFlattenedFilters().forEach(E=>{E.isInequality()&&(m=m.add(E.field))})}),m})(e).forEach(c=>{n.has(c.canonicalString())||c.isKeyField()||e.ce.push(new Gl(c,s))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new Gl(Pt.keyField(),s))}return e.ce}function Kn(i){const e=we(i);return e.le||(e.le=j0(e,ea(i))),e.le}function j0(i,e){if(i.limitType==="F")return Hp(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new Gl(a.field,c)});const n=i.endAt?new Kl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new Kl(i.startAt.position,i.startAt.inclusive):null;return Hp(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function ph(i,e,n){return new ou(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function au(i,e){return Dh(Kn(i),Kn(e))&&i.limitType===e.limitType}function rg(i){return`${Nh(Kn(i))}|lt:${i.limitType}`}function Fs(i){return`Query(target=${function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map(a=>tg(a)).join(", ")}]`),iu(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map(a=>function(d){return`${d.field.canonicalString()} (${d.dir})`}(a)).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map(a=>Hs(a)).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map(a=>Hs(a)).join(",")),`Target(${s})`}(Kn(i))}; limitType=${i.limitType})`}function lu(i,e){return e.isFoundDocument()&&function(s,a){const c=a.key.path;return s.collectionGroup!==null?a.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(c):me.isDocumentKey(s.path)?s.path.isEqual(c):s.path.isImmediateParentOf(c)}(i,e)&&function(s,a){for(const c of ea(s))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(s,a){for(const c of s.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(s,a){return!(s.startAt&&!function(d,m,y){const E=$p(d,m,y);return d.inclusive?E<=0:E<0}(s.startAt,ea(s),a)||s.endAt&&!function(d,m,y){const E=$p(d,m,y);return d.inclusive?E>=0:E>0}(s.endAt,ea(s),a))}(i,e)}function $0(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ig(i){return(e,n)=>{let s=!1;for(const a of ea(i)){const c=q0(a,e,n);if(c!==0)return c;s=s||a.field.isKeyField()}return 0}}function q0(i,e,n){const s=i.field.isKeyField()?me.comparator(e.key,n.key):function(c,d,m){const y=d.data.field(c),E=m.data.field(c);return y!==null&&E!==null?qs(y,E):ve()}(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return ve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[a,c]of s)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),a=this.inner[s];if(a===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,n]);a.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return s.length===1?delete this.inner[n]:s.splice(a,1),this.innerSize--,!0;return!1}forEach(e){zi(this.inner,(n,s)=>{for(const[a,c]of s)e(a,c)})}isEmpty(){return Km(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=new Je(me.comparator);function wr(){return H0}const sg=new Je(me.comparator);function Yo(...i){let e=sg;for(const n of i)e=e.insert(n.key,n);return e}function og(i){let e=sg;return i.forEach((n,s)=>e=e.insert(n,s.overlayedDocument)),e}function Oi(){return ta()}function ag(){return ta()}function ta(){return new Bi(i=>i.toString(),(i,e)=>i.isEqual(e))}const W0=new Je(me.comparator),Q0=new mt(me.comparator);function Ae(...i){let e=Q0;for(const n of i)e=e.add(n);return e}const K0=new mt(Ce);function G0(){return K0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ql(e)?"-0":e}}function lg(i){return{integerValue:""+i}}function X0(i,e){return I0(e)?lg(e):xh(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(){this._=void 0}}function Y0(i,e,n){return i instanceof ca?function(a,c){const d={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&Ph(c)&&(c=su(c)),c&&(d.fields.__previous_value__=c),{mapValue:d}}(n,e):i instanceof ha?cg(i,e):i instanceof da?hg(i,e):function(a,c){const d=ug(a,c),m=Qp(d)+Qp(a.Pe);return hh(d)&&hh(a.Pe)?lg(m):xh(a.serializer,m)}(i,e)}function J0(i,e,n){return i instanceof ha?cg(i,e):i instanceof da?hg(i,e):n}function ug(i,e){return i instanceof Xl?function(s){return hh(s)||function(c){return!!c&&"doubleValue"in c}(s)}(e)?e:{integerValue:0}:null}class ca extends uu{}class ha extends uu{constructor(e){super(),this.elements=e}}function cg(i,e){const n=dg(e);for(const s of i.elements)n.some(a=>Xn(a,s))||n.push(s);return{arrayValue:{values:n}}}class da extends uu{constructor(e){super(),this.elements=e}}function hg(i,e){let n=dg(e);for(const s of i.elements)n=n.filter(a=>!Xn(a,s));return{arrayValue:{values:n}}}class Xl extends uu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Qp(i){return it(i.integerValue||i.doubleValue)}function dg(i){return kh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z0{constructor(e,n){this.field=e,this.transform=n}}function eE(i,e){return i.field.isEqual(e.field)&&function(s,a){return s instanceof ha&&a instanceof ha||s instanceof da&&a instanceof da?$s(s.elements,a.elements,Xn):s instanceof Xl&&a instanceof Xl?Xn(s.Pe,a.Pe):s instanceof ca&&a instanceof ca}(i.transform,e.transform)}class tE{constructor(e,n){this.version=e,this.transformResults=n}}class yr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new yr}static exists(e){return new yr(void 0,e)}static updateTime(e){return new yr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $l(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class cu{}function fg(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new mg(i.key,yr.none()):new fa(i.key,i.data,yr.none());{const n=i.data,s=_n.empty();let a=new mt(Pt.comparator);for(let c of e.fields)if(!a.has(c)){let d=n.field(c);d===null&&c.length>1&&(c=c.popLast(),d=n.field(c)),d===null?s.delete(c):s.set(c,d),a=a.add(c)}return new ji(i.key,s,new Ln(a.toArray()),yr.none())}}function nE(i,e,n){i instanceof fa?function(a,c,d){const m=a.value.clone(),y=Gp(a.fieldTransforms,c,d.transformResults);m.setAll(y),c.convertToFoundDocument(d.version,m).setHasCommittedMutations()}(i,e,n):i instanceof ji?function(a,c,d){if(!$l(a.precondition,c))return void c.convertToUnknownDocument(d.version);const m=Gp(a.fieldTransforms,c,d.transformResults),y=c.data;y.setAll(pg(a)),y.setAll(m),c.convertToFoundDocument(d.version,y).setHasCommittedMutations()}(i,e,n):function(a,c,d){c.convertToNoDocument(d.version).setHasCommittedMutations()}(0,e,n)}function na(i,e,n,s){return i instanceof fa?function(c,d,m,y){if(!$l(c.precondition,d))return m;const E=c.value.clone(),I=Xp(c.fieldTransforms,y,d);return E.setAll(I),d.convertToFoundDocument(d.version,E).setHasLocalMutations(),null}(i,e,n,s):i instanceof ji?function(c,d,m,y){if(!$l(c.precondition,d))return m;const E=Xp(c.fieldTransforms,y,d),I=d.data;return I.setAll(pg(c)),I.setAll(E),d.convertToFoundDocument(d.version,I).setHasLocalMutations(),m===null?null:m.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(D=>D.field))}(i,e,n,s):function(c,d,m){return $l(c.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):m}(i,e,n)}function rE(i,e){let n=null;for(const s of i.fieldTransforms){const a=e.data.field(s.field),c=ug(s.transform,a||null);c!=null&&(n===null&&(n=_n.empty()),n.set(s.field,c))}return n||null}function Kp(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(s,a){return s===void 0&&a===void 0||!(!s||!a)&&$s(s,a,(c,d)=>eE(c,d))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class fa extends cu{constructor(e,n,s,a=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class ji extends cu{constructor(e,n,s,a,c=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function pg(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}}),e}function Gp(i,e,n){const s=new Map;Me(i.length===n.length);for(let a=0;a<n.length;a++){const c=i[a],d=c.transform,m=e.data.field(c.field);s.set(c.field,J0(d,m,n[a]))}return s}function Xp(i,e,n){const s=new Map;for(const a of i){const c=a.transform,d=n.data.field(a.field);s.set(a.field,Y0(c,d,e))}return s}class mg extends cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class iE extends cu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sE{constructor(e,n,s,a){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=a}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&nE(c,e,s[a])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=na(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=na(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=ag();return this.mutations.forEach(a=>{const c=e.get(a.key),d=c.overlayedDocument;let m=this.applyToLocalView(d,c.mutatedFields);m=n.has(a.key)?null:m;const y=fg(d,m);y!==null&&s.set(a.key,y),d.isValidDocument()||d.convertToNoDocument(Ee.min())}),s}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ae())}isEqual(e){return this.batchId===e.batchId&&$s(this.mutations,e.mutations,(n,s)=>Kp(n,s))&&$s(this.baseMutations,e.baseMutations,(n,s)=>Kp(n,s))}}class Oh{constructor(e,n,s,a){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=a}static from(e,n,s){Me(e.mutations.length===s.length);let a=function(){return W0}();const c=e.mutations;for(let d=0;d<c.length;d++)a=a.insert(c[d].key,s[d].version);return new Oh(e,n,s,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ne;function lE(i){switch(i){default:return ve();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function gg(i){if(i===void 0)return Er("GRPC error has no .code"),Q.UNKNOWN;switch(i){case at.OK:return Q.OK;case at.CANCELLED:return Q.CANCELLED;case at.UNKNOWN:return Q.UNKNOWN;case at.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case at.INTERNAL:return Q.INTERNAL;case at.UNAVAILABLE:return Q.UNAVAILABLE;case at.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case at.NOT_FOUND:return Q.NOT_FOUND;case at.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case at.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case at.ABORTED:return Q.ABORTED;case at.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case at.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case at.DATA_LOSS:return Q.DATA_LOSS;default:return ve()}}(Ne=at||(at={}))[Ne.OK=0]="OK",Ne[Ne.CANCELLED=1]="CANCELLED",Ne[Ne.UNKNOWN=2]="UNKNOWN",Ne[Ne.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ne[Ne.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ne[Ne.NOT_FOUND=5]="NOT_FOUND",Ne[Ne.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ne[Ne.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ne[Ne.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ne[Ne.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ne[Ne.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ne[Ne.ABORTED=10]="ABORTED",Ne[Ne.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ne[Ne.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ne[Ne.INTERNAL=13]="INTERNAL",Ne[Ne.UNAVAILABLE=14]="UNAVAILABLE",Ne[Ne.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE=new Li([4294967295,4294967295],0);function Yp(i){const e=uE().encode(i),n=new zm;return n.update(e),new Uint8Array(n.digest())}function Jp(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Li([n,s],0),new Li([a,c],0)]}class Lh{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Jo(`Invalid padding: ${n}`);if(s<0)throw new Jo(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Jo(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Jo(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Li.fromNumber(this.Te)}Ee(e,n,s){let a=e.add(n.multiply(Li.fromNumber(s)));return a.compare(cE)===1&&(a=new Li([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Yp(e),[s,a]=Jp(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(s,a,c);if(!this.de(d))return!1}return!0}static create(e,n,s){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),d=new Lh(c,a,n);return s.forEach(m=>d.insert(m)),d}insert(e){if(this.Te===0)return;const n=Yp(e),[s,a]=Jp(n);for(let c=0;c<this.hashCount;c++){const d=this.Ee(s,a,c);this.Ae(d)}}Ae(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Jo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n,s,a,c){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const a=new Map;return a.set(e,pa.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new hu(Ee.min(),a,new Je(Ce),wr(),Ae())}}class pa{constructor(e,n,s,a,c){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new pa(s,n,Ae(),Ae(),Ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n,s,a){this.Re=e,this.removedTargetIds=n,this.key=s,this.Ve=a}}class yg{constructor(e,n){this.targetId=e,this.me=n}}class _g{constructor(e,n,s=kt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=a}}class Zp{constructor(){this.fe=0,this.ge=em(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Ae(),n=Ae(),s=Ae();return this.ge.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:n=n.add(a);break;case 1:s=s.add(a);break;default:ve()}}),new pa(this.pe,this.ye,e,n,s)}Ce(){this.we=!1,this.ge=em()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class hE{constructor(e){this.Le=e,this.Be=new Map,this.ke=wr(),this.qe=Ml(),this.Qe=Ml(),this.Ke=new Je(Ce)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const s=this.ze(n);switch(e.state){case 0:this.je(n)&&s.De(e.resumeToken);break;case 1:s.Oe(),s.Se||s.Ce(),s.De(e.resumeToken);break;case 2:s.Oe(),s.Se||this.removeTarget(n);break;case 3:this.je(n)&&(s.Ne(),s.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),s.De(e.resumeToken));break;default:ve()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((s,a)=>{this.je(a)&&n(a)})}Je(e){const n=e.targetId,s=e.me.count,a=this.Ye(n);if(a){const c=a.target;if(fh(c))if(s===0){const d=new me(c.path);this.We(n,d,Ft.newNoDocument(d,Ee.min()))}else Me(s===1);else{const d=this.Ze(n);if(d!==s){const m=this.Xe(e),y=m?this.et(m,e,d):1;if(y!==0){this.He(n);const E=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,E)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:a=0},hashCount:c=0}=n;let d,m;try{d=ni(s).toUint8Array()}catch(y){if(y instanceof Gm)return js("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{m=new Lh(d,a,c)}catch(y){return js(y instanceof Jo?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return m.Te===0?null:m}et(e,n,s){return n.me.count===s-this.rt(e,n.targetId)?0:2}rt(e,n){const s=this.Le.getRemoteKeysForTarget(n);let a=0;return s.forEach(c=>{const d=this.Le.nt(),m=`projects/${d.projectId}/databases/${d.database}/documents/${c.path.canonicalString()}`;e.mightContain(m)||(this.We(n,c,null),a++)}),a}it(e){const n=new Map;this.Be.forEach((c,d)=>{const m=this.Ye(d);if(m){if(c.current&&fh(m.target)){const y=new me(m.target.path);this.st(y).has(d)||this.ot(d,y)||this.We(d,y,Ft.newNoDocument(y,e))}c.be&&(n.set(d,c.ve()),c.Ce())}});let s=Ae();this.Qe.forEach((c,d)=>{let m=!0;d.forEachWhile(y=>{const E=this.Ye(y);return!E||E.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)}),m&&(s=s.add(c))}),this.ke.forEach((c,d)=>d.setReadTime(e));const a=new hu(e,n,this.Ke,this.ke,s);return this.ke=wr(),this.qe=Ml(),this.Qe=Ml(),this.Ke=new Je(Ce),a}Ue(e,n){if(!this.je(e))return;const s=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,s),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,s){if(!this.je(e))return;const a=this.ze(e);this.ot(e,n)?a.Fe(n,1):a.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),s&&(this.ke=this.ke.insert(n,s))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new Zp,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new mt(Ce),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new mt(Ce),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||te("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new Zp),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Ml(){return new Je(me.comparator)}function em(){return new Je(me.comparator)}const dE={asc:"ASCENDING",desc:"DESCENDING"},fE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pE={and:"AND",or:"OR"};class mE{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function mh(i,e){return i.useProto3Json||iu(e)?e:{value:e}}function Yl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vg(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function gE(i,e){return Yl(i,e.toTimestamp())}function Gn(i){return Me(!!i),Ee.fromTimestamp(function(n){const s=ti(n);return new pt(s.seconds,s.nanos)}(i))}function Mh(i,e){return gh(i,e).canonicalString()}function gh(i,e){const n=function(a){return new Ke(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?n:n.child(e)}function Eg(i){const e=Ke.fromString(i);return Me(Ag(e)),e}function yh(i,e){return Mh(i.databaseId,e.path)}function Yc(i,e){const n=Eg(e);if(n.get(1)!==i.databaseId.projectId)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new ce(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new me(Tg(n))}function wg(i,e){return Mh(i.databaseId,e)}function yE(i){const e=Eg(i);return e.length===4?Ke.emptyPath():Tg(e)}function _h(i){return new Ke(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Tg(i){return Me(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function tm(i,e,n){return{name:yh(i,e),fields:n.value.mapValue.fields}}function _E(i,e){let n;if("targetChange"in e){e.targetChange;const s=function(E){return E==="NO_CHANGE"?0:E==="ADD"?1:E==="REMOVE"?2:E==="CURRENT"?3:E==="RESET"?4:ve()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(E,I){return E.useProto3Json?(Me(I===void 0||typeof I=="string"),kt.fromBase64String(I||"")):(Me(I===void 0||I instanceof Buffer||I instanceof Uint8Array),kt.fromUint8Array(I||new Uint8Array))}(i,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(E){const I=E.code===void 0?Q.UNKNOWN:gg(E.code);return new ce(I,E.message||"")}(d);n=new _g(s,a,c,m||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const a=Yc(i,s.document.name),c=Gn(s.document.updateTime),d=s.document.createTime?Gn(s.document.createTime):Ee.min(),m=new _n({mapValue:{fields:s.document.fields}}),y=Ft.newFoundDocument(a,c,d,m),E=s.targetIds||[],I=s.removedTargetIds||[];n=new ql(E,I,y.key,y)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const a=Yc(i,s.document),c=s.readTime?Gn(s.readTime):Ee.min(),d=Ft.newNoDocument(a,c),m=s.removedTargetIds||[];n=new ql([],m,d.key,d)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const a=Yc(i,s.document),c=s.removedTargetIds||[];n=new ql([],c,a,null)}else{if(!("filter"in e))return ve();{e.filter;const s=e.filter;s.targetId;const{count:a=0,unchangedNames:c}=s,d=new aE(a,c),m=s.targetId;n=new yg(m,d)}}return n}function vE(i,e){let n;if(e instanceof fa)n={update:tm(i,e.key,e.value)};else if(e instanceof mg)n={delete:yh(i,e.key)};else if(e instanceof ji)n={update:tm(i,e.key,e.data),updateMask:PE(e.fieldMask)};else{if(!(e instanceof iE))return ve();n={verify:yh(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(s=>function(c,d){const m=d.transform;if(m instanceof ca)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof ha)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof da)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof Xl)return{fieldPath:d.field.canonicalString(),increment:m.Pe};throw ve()}(0,s))),e.precondition.isNone||(n.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:gE(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:ve()}(i,e.precondition)),n}function EE(i,e){return i&&i.length>0?(Me(e!==void 0),i.map(n=>function(a,c){let d=a.updateTime?Gn(a.updateTime):Gn(c);return d.isEqual(Ee.min())&&(d=Gn(c)),new tE(d,a.transformResults||[])}(n,e))):[]}function wE(i,e){return{documents:[wg(i,e.path)]}}function TE(i,e){const n={structuredQuery:{}},s=e.path;let a;e.collectionGroup!==null?(a=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=wg(i,a);const c=function(E){if(E.length!==0)return Sg(Yn.create(E,"and"))}(e.filters);c&&(n.structuredQuery.where=c);const d=function(E){if(E.length!==0)return E.map(I=>function(F){return{field:Us(F.field),direction:AE(F.dir)}}(I))}(e.orderBy);d&&(n.structuredQuery.orderBy=d);const m=mh(i,e.limit);return m!==null&&(n.structuredQuery.limit=m),e.startAt&&(n.structuredQuery.startAt=function(E){return{before:E.inclusive,values:E.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(E){return{before:!E.inclusive,values:E.position}}(e.endAt)),{ct:n,parent:a}}function IE(i){let e=yE(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let a=null;if(s>0){Me(s===1);const I=n.from[0];I.allDescendants?a=I.collectionId:e=e.child(I.collectionId)}let c=[];n.where&&(c=function(D){const F=Ig(D);return F instanceof Yn&&Zm(F)?F.getFilters():[F]}(n.where));let d=[];n.orderBy&&(d=function(D){return D.map(F=>function(G){return new Gl(bs(G.field),function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(G.direction))}(F))}(n.orderBy));let m=null;n.limit&&(m=function(D){let F;return F=typeof D=="object"?D.value:D,iu(F)?null:F}(n.limit));let y=null;n.startAt&&(y=function(D){const F=!!D.before,z=D.values||[];return new Kl(z,F)}(n.startAt));let E=null;return n.endAt&&(E=function(D){const F=!D.before,z=D.values||[];return new Kl(z,F)}(n.endAt)),z0(e,a,d,c,m,"F",y,E)}function SE(i,e){const n=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ve()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Ig(i){return i.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=bs(n.unaryFilter.field);return ft.create(s,"==",{doubleValue:NaN});case"IS_NULL":const a=bs(n.unaryFilter.field);return ft.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=bs(n.unaryFilter.field);return ft.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=bs(n.unaryFilter.field);return ft.create(d,"!=",{nullValue:"NULL_VALUE"});default:return ve()}}(i):i.fieldFilter!==void 0?function(n){return ft.create(bs(n.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ve()}}(n.fieldFilter.op),n.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(n){return Yn.create(n.compositeFilter.filters.map(s=>Ig(s)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ve()}}(n.compositeFilter.op))}(i):ve()}function AE(i){return dE[i]}function RE(i){return fE[i]}function CE(i){return pE[i]}function Us(i){return{fieldPath:i.canonicalString()}}function bs(i){return Pt.fromServerFormat(i.fieldPath)}function Sg(i){return i instanceof ft?function(n){if(n.op==="=="){if(jp(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NAN"}};if(Bp(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jp(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NAN"}};if(Bp(n.value))return{unaryFilter:{field:Us(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Us(n.field),op:RE(n.op),value:n.value}}}(i):i instanceof Yn?function(n){const s=n.getFilters().map(a=>Sg(a));return s.length===1?s[0]:{compositeFilter:{op:CE(n.op),filters:s}}}(i):ve()}function PE(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Ag(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,n,s,a,c=Ee.min(),d=Ee.min(),m=kt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m,this.expectedCount=y}withSequenceNumber(e){return new Kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.ht=e}}function NE(i){const e=IE({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?ph(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(){this.ln=new VE}addToCollectionParentIndex(e,n){return this.ln.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(ei.min())}updateCollectionGroup(e,n,s){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class VE{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n]||new mt(Ke.comparator),c=!a.has(s);return this.index[n]=a.add(s),c}has(e){const n=e.lastSegment(),s=e.popLast(),a=this.index[n];return a&&a.has(s)}getEntries(e){return(this.index[e]||new mt(Ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Yt{static withCacheSize(e){return new Yt(e,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.DEFAULT_COLLECTION_PERCENTILE=10,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Yt.DEFAULT=new Yt(41943040,Yt.DEFAULT_COLLECTION_PERCENTILE,Yt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Yt.DISABLED=new Yt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ws(0)}static Qn(){return new Ws(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rm([i,e],[n,s]){const a=Ce(i,n);return a===0?Ce(e,s):a}class xE{constructor(e){this.Gn=e,this.buffer=new mt(rm),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rm(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class OE{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){te("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ys(n)?te("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Xs(n)}await this.Yn(3e5)})}}class LE{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(s=>Math.floor(n/100*s))}nthSequenceNumber(e,n){if(n===0)return j.resolve(ru.oe);const s=new xE(n);return this.Zn.forEachTarget(e,a=>s.Hn(a.sequenceNumber)).next(()=>this.Zn.er(e,a=>s.Hn(a))).next(()=>s.maxValue)}removeTargets(e,n,s){return this.Zn.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(te("LruGarbageCollector","Garbage collection skipped; disabled"),j.resolve(nm)):this.getCacheSize(e).next(s=>s<this.params.cacheSizeCollectionThreshold?(te("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nm):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let s,a,c,d,m,y,E;const I=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(D=>(D>this.params.maximumSequenceNumbersToCollect?(te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${D}`),a=this.params.maximumSequenceNumbersToCollect):a=D,d=Date.now(),this.nthSequenceNumber(e,a))).next(D=>(s=D,m=Date.now(),this.removeTargets(e,s,n))).next(D=>(c=D,y=Date.now(),this.removeOrphanedDocuments(e,s))).next(D=>(E=Date.now(),Ms()<=De.DEBUG&&te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${d-I}ms
	Determined least recently used ${a} in `+(m-d)+`ms
	Removed ${c} targets in `+(y-m)+`ms
	Removed ${D} documents in `+(E-y)+`ms
Total Duration: ${E-I}ms`),j.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:D})))}}function ME(i,e){return new LE(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.changes=new Bi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?j.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(e,n,s,a){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=a}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next(a=>(s=a,this.remoteDocumentCache.getEntry(e,n))).next(a=>(s!==null&&na(s.mutation,a,Ln.empty(),pt.now()),a))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.getLocalViewOfDocuments(e,s,Ae()).next(()=>s))}getLocalViewOfDocuments(e,n,s=Ae()){const a=Oi();return this.populateOverlays(e,a,n).next(()=>this.computeViews(e,n,a,s).next(c=>{let d=Yo();return c.forEach((m,y)=>{d=d.insert(m,y.overlayedDocument)}),d}))}getOverlayedDocuments(e,n){const s=Oi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,Ae()))}populateOverlays(e,n,s){const a=[];return s.forEach(c=>{n.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((d,m)=>{n.set(d,m)})})}computeViews(e,n,s,a){let c=wr();const d=ta(),m=function(){return ta()}();return n.forEach((y,E)=>{const I=s.get(E.key);a.has(E.key)&&(I===void 0||I.mutation instanceof ji)?c=c.insert(E.key,E):I!==void 0?(d.set(E.key,I.mutation.getFieldMask()),na(I.mutation,E,I.mutation.getFieldMask(),pt.now())):d.set(E.key,Ln.empty())}),this.recalculateAndSaveOverlays(e,c).next(y=>(y.forEach((E,I)=>d.set(E,I)),n.forEach((E,I)=>{var D;return m.set(E,new UE(I,(D=d.get(E))!==null&&D!==void 0?D:null))}),m))}recalculateAndSaveOverlays(e,n){const s=ta();let a=new Je((d,m)=>d-m),c=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(d=>{for(const m of d)m.keys().forEach(y=>{const E=n.get(y);if(E===null)return;let I=s.get(y)||Ln.empty();I=m.applyToLocalView(E,I),s.set(y,I);const D=(a.get(m.batchId)||Ae()).add(y);a=a.insert(m.batchId,D)})}).next(()=>{const d=[],m=a.getReverseIterator();for(;m.hasNext();){const y=m.getNext(),E=y.key,I=y.value,D=ag();I.forEach(F=>{if(!c.has(F)){const z=fg(n.get(F),s.get(F));z!==null&&D.set(F,z),c=c.add(F)}}),d.push(this.documentOverlayCache.saveOverlays(e,E,D))}return j.waitFor(d)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(s=>this.recalculateAndSaveOverlays(e,s))}getDocumentsMatchingQuery(e,n,s,a){return function(d){return me.isDocumentKey(d.path)&&d.collectionGroup===null&&d.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):B0(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,a):this.getDocumentsMatchingCollectionQuery(e,n,s,a)}getNextDocuments(e,n,s,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,a).next(c=>{const d=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,a-c.size):j.resolve(Oi());let m=-1,y=c;return d.next(E=>j.forEach(E,(I,D)=>(m<D.largestBatchId&&(m=D.largestBatchId),c.get(I)?j.resolve():this.remoteDocumentCache.getEntry(e,I).next(F=>{y=y.insert(I,F)}))).next(()=>this.populateOverlays(e,E,c)).next(()=>this.computeViews(e,y,E,Ae())).next(I=>({batchId:m,changes:og(I)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new me(n)).next(s=>{let a=Yo();return s.isFoundDocument()&&(a=a.insert(s.key,s)),a})}getDocumentsMatchingCollectionGroupQuery(e,n,s,a){const c=n.collectionGroup;let d=Yo();return this.indexManager.getCollectionParents(e,c).next(m=>j.forEach(m,y=>{const E=function(D,F){return new ou(F,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt)}(n,y.child(c));return this.getDocumentsMatchingCollectionQuery(e,E,s,a).next(I=>{I.forEach((D,F)=>{d=d.insert(D,F)})})}).next(()=>d))}getDocumentsMatchingCollectionQuery(e,n,s,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next(d=>(c=d,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,c,a))).next(d=>{c.forEach((y,E)=>{const I=E.getKey();d.get(I)===null&&(d=d.insert(I,Ft.newInvalidDocument(I)))});let m=Yo();return d.forEach((y,E)=>{const I=c.get(y);I!==void 0&&na(I.mutation,E,Ln.empty(),pt.now()),lu(n,E)&&(m=m.insert(y,E))}),m})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return j.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(a){return{id:a.id,version:a.version,createTime:Gn(a.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(a){return{name:a.name,query:NE(a.bundledQuery),readTime:Gn(a.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(){this.overlays=new Je(me.comparator),this.Er=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Oi();return j.forEach(n,a=>this.getOverlay(e,a).next(c=>{c!==null&&s.set(a,c)})).next(()=>s)}saveOverlays(e,n,s){return s.forEach((a,c)=>{this.Tt(e,n,c)}),j.resolve()}removeOverlaysForBatchId(e,n,s){const a=this.Er.get(s);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.Er.delete(s)),j.resolve()}getOverlaysForCollection(e,n,s){const a=Oi(),c=n.length+1,d=new me(n.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const y=m.getNext().value,E=y.getKey();if(!n.isPrefixOf(E.path))break;E.path.length===c&&y.largestBatchId>s&&a.set(y.getKey(),y)}return j.resolve(a)}getOverlaysForCollectionGroup(e,n,s,a){let c=new Je((E,I)=>E-I);const d=this.overlays.getIterator();for(;d.hasNext();){const E=d.getNext().value;if(E.getKey().getCollectionGroup()===n&&E.largestBatchId>s){let I=c.get(E.largestBatchId);I===null&&(I=Oi(),c=c.insert(E.largestBatchId,I)),I.set(E.getKey(),E)}}const m=Oi(),y=c.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach((E,I)=>m.set(E,I)),!(m.size()>=a)););return j.resolve(m)}Tt(e,n,s){const a=this.overlays.get(s.key);if(a!==null){const d=this.Er.get(a.largestBatchId).delete(s.key);this.Er.set(a.largestBatchId,d)}this.overlays=this.overlays.insert(s.key,new oE(n,s));let c=this.Er.get(n);c===void 0&&(c=Ae(),this.Er.set(n,c)),this.Er.set(n,c.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(){this.dr=new mt(Tt.Ar),this.Rr=new mt(Tt.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const s=new Tt(e,n);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(e,n){e.forEach(s=>this.addReference(s,n))}removeReference(e,n){this.gr(new Tt(e,n))}pr(e,n){e.forEach(s=>this.removeReference(s,n))}yr(e){const n=new me(new Ke([])),s=new Tt(n,e),a=new Tt(n,e+1),c=[];return this.Rr.forEachInRange([s,a],d=>{this.gr(d),c.push(d.key)}),c}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new me(new Ke([])),s=new Tt(n,e),a=new Tt(n,e+1);let c=Ae();return this.Rr.forEachInRange([s,a],d=>{c=c.add(d.key)}),c}containsKey(e){const n=new Tt(e,0),s=this.dr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Tt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return me.comparator(e.key,n.key)||Ce(e.br,n.br)}static Vr(e,n){return Ce(e.br,n.br)||me.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new mt(Tt.Ar)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,a){const c=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const d=new sE(c,n,s,a);this.mutationQueue.push(d);for(const m of a)this.vr=this.vr.add(new Tt(m.key,c)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return j.resolve(d)}lookupMutationBatch(e,n){return j.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,a=this.Fr(s),c=a<0?0:a;return j.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Tt(n,0),a=new Tt(n,Number.POSITIVE_INFINITY),c=[];return this.vr.forEachInRange([s,a],d=>{const m=this.Cr(d.br);c.push(m)}),j.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new mt(Ce);return n.forEach(a=>{const c=new Tt(a,0),d=new Tt(a,Number.POSITIVE_INFINITY);this.vr.forEachInRange([c,d],m=>{s=s.add(m.br)})}),j.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,a=s.length+1;let c=s;me.isDocumentKey(c)||(c=c.child(""));const d=new Tt(new me(c),0);let m=new mt(Ce);return this.vr.forEachWhile(y=>{const E=y.key.path;return!!s.isPrefixOf(E)&&(E.length===a&&(m=m.add(y.br)),!0)},d),j.resolve(this.Mr(m))}Mr(e){const n=[];return e.forEach(s=>{const a=this.Cr(s);a!==null&&n.push(a)}),n}removeMutationBatch(e,n){Me(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return j.forEach(n.mutations,a=>{const c=new Tt(a.key,n.batchId);return s=s.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.vr=s})}Ln(e){}containsKey(e,n){const s=new Tt(n,0),a=this.vr.firstAfterOrEqual(s);return j.resolve(n.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.Nr=e,this.docs=function(){return new Je(me.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,a=this.docs.get(s),c=a?a.size:0,d=this.Nr(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:d}),this.size+=d-c,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return j.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(n))}getEntries(e,n){let s=wr();return n.forEach(a=>{const c=this.docs.get(a);s=s.insert(a,c?c.document.mutableCopy():Ft.newInvalidDocument(a))}),j.resolve(s)}getDocumentsMatchingQuery(e,n,s,a){let c=wr();const d=n.path,m=new me(d.child("")),y=this.docs.getIteratorFrom(m);for(;y.hasNext();){const{key:E,value:{document:I}}=y.getNext();if(!d.isPrefixOf(E.path))break;E.path.length>d.length+1||v0(_0(I),s)<=0||(a.has(I.key)||lu(n,I))&&(c=c.insert(I.key,I.mutableCopy()))}return j.resolve(c)}getAllFromCollectionGroup(e,n,s,a){ve()}Lr(e,n){return j.forEach(this.docs,s=>n(s))}newChangeBuffer(e){return new HE(this)}getSize(e){return j.resolve(this.size)}}class HE extends FE{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((s,a)=>{a.isValidDocument()?n.push(this.hr.addEntry(e,a)):this.hr.removeEntry(s)}),j.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e){this.persistence=e,this.Br=new Bi(n=>Nh(n),Dh),this.lastRemoteSnapshotVersion=Ee.min(),this.highestTargetId=0,this.kr=0,this.qr=new Fh,this.targetCount=0,this.Qr=Ws.qn()}forEachTarget(e,n){return this.Br.forEach((s,a)=>n(a)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.kr&&(this.kr=n),j.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ws(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Un(n),j.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,s){let a=0;const c=[];return this.Br.forEach((d,m)=>{m.sequenceNumber<=n&&s.get(m.targetId)===null&&(this.Br.delete(d),c.push(this.removeMatchingKeysForTargetId(e,m.targetId)),a++)}),j.waitFor(c).next(()=>a)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const s=this.Br.get(n)||null;return j.resolve(s)}addMatchingKeys(e,n,s){return this.qr.mr(n,s),j.resolve()}removeMatchingKeys(e,n,s){this.qr.pr(n,s);const a=this.persistence.referenceDelegate,c=[];return a&&n.forEach(d=>{c.push(a.markPotentiallyOrphaned(e,d))}),j.waitFor(c)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const s=this.qr.Sr(n);return j.resolve(s)}containsKey(e,n){return j.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,n){this.Kr={},this.overlays={},this.$r=new ru(0),this.Ur=!1,this.Ur=!0,this.Wr=new jE,this.referenceDelegate=e(this),this.Gr=new WE(this),this.indexManager=new DE,this.remoteDocumentCache=function(a){return new qE(a)}(s=>this.referenceDelegate.zr(s)),this.serializer=new kE(n),this.jr=new zE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new BE,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this.Kr[e.toKey()];return s||(s=new $E(n,this.referenceDelegate),this.Kr[e.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,s){te("MemoryPersistence","Starting transaction:",e);const a=new QE(this.$r.next());return this.referenceDelegate.Hr(),s(a).next(c=>this.referenceDelegate.Jr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Yr(e,n){return j.or(Object.values(this.Kr).map(s=>()=>s.containsKey(e,n)))}}class QE extends w0{constructor(e){super(),this.currentSequenceNumber=e}}class Uh{constructor(e){this.persistence=e,this.Zr=new Fh,this.Xr=null}static ei(e){return new Uh(e)}get ti(){if(this.Xr)return this.Xr;throw ve()}addReference(e,n,s){return this.Zr.addReference(s,n),this.ti.delete(s.toString()),j.resolve()}removeReference(e,n,s){return this.Zr.removeReference(s,n),this.ti.add(s.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),j.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(a=>this.ti.add(a.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next(a=>{a.forEach(c=>this.ti.add(c.toString()))}).next(()=>s.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.ti,s=>{const a=me.fromPath(s);return this.ni(e,a).next(c=>{c||n.removeEntry(a,Ee.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(s=>{s?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return j.or([()=>j.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class Jl{constructor(e,n){this.persistence=e,this.ri=new Bi(s=>S0(s.path),(s,a)=>s.isEqual(a)),this.garbageCollector=ME(this,n)}static ei(e,n){return new Jl(e,n)}Hr(){}Jr(e){return j.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(s=>n.next(a=>s+a))}nr(e){let n=0;return this.er(e,s=>{n++}).next(()=>n)}er(e,n){return j.forEach(this.ri,(s,a)=>this.ir(e,s,a).next(c=>c?j.resolve():n(a)))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.Lr(e,d=>this.ir(e,d,n).next(m=>{m||(s++,c.removeEntry(d,Ee.min()))})).next(()=>c.apply(e)).next(()=>s)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),j.resolve()}removeReference(e,n,s){return this.ri.set(s,e.currentSequenceNumber),j.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),j.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bl(e.data.value)),n}ir(e,n,s){return j.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const a=this.ri.get(n);return j.resolve(a!==void 0&&a>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(e,n,s,a){this.targetId=e,this.fromCache=n,this.Wi=s,this.Gi=a}static zi(e,n){let s=Ae(),a=Ae();for(const c of n.docChanges)switch(c.type){case 0:s=s.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new bh(e,n.fromCache,s,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Q_()?8:T0(H_())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,s,a){const c={result:null};return this.Xi(e,n).next(d=>{c.result=d}).next(()=>{if(!c.result)return this.es(e,n,a,s).next(d=>{c.result=d})}).next(()=>{if(c.result)return;const d=new KE;return this.ts(e,n,d).next(m=>{if(c.result=m,this.Hi)return this.ns(e,n,d,m.size)})}).next(()=>c.result)}ns(e,n,s,a){return s.documentReadCount<this.Ji?(Ms()<=De.DEBUG&&te("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),j.resolve()):(Ms()<=De.DEBUG&&te("QueryEngine","Query:",Fs(n),"scans",s.documentReadCount,"local documents and returns",a,"documents as results."),s.documentReadCount>this.Yi*a?(Ms()<=De.DEBUG&&te("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kn(n))):j.resolve())}Xi(e,n){if(Wp(n))return j.resolve(null);let s=Kn(n);return this.indexManager.getIndexType(e,s).next(a=>a===0?null:(n.limit!==null&&a===1&&(n=ph(n,null,"F"),s=Kn(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next(c=>{const d=Ae(...c);return this.Zi.getDocuments(e,d).next(m=>this.indexManager.getMinOffset(e,s).next(y=>{const E=this.rs(n,m);return this.ss(n,E,d,y.readTime)?this.Xi(e,ph(n,null,"F")):this.os(e,E,n,y)}))})))}es(e,n,s,a){return Wp(n)||a.isEqual(Ee.min())?j.resolve(null):this.Zi.getDocuments(e,s).next(c=>{const d=this.rs(n,c);return this.ss(n,d,s,a)?j.resolve(null):(Ms()<=De.DEBUG&&te("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Fs(n)),this.os(e,d,n,y0(a,-1)).next(m=>m))})}rs(e,n){let s=new mt(ig(e));return n.forEach((a,c)=>{lu(e,c)&&(s=s.add(c))}),s}ss(e,n,s,a){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const c=e.limitType==="F"?n.last():n.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}ts(e,n,s){return Ms()<=De.DEBUG&&te("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.Zi.getDocumentsMatchingQuery(e,n,ei.min(),s)}os(e,n,s,a){return this.Zi.getDocumentsMatchingQuery(e,s,a).next(c=>(n.forEach(d=>{c=c.insert(d.key,d)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n,s,a){this.persistence=e,this._s=n,this.serializer=a,this.us=new Je(Ce),this.cs=new Bi(c=>Nh(c),Dh),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(s)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new bE(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function YE(i,e,n,s){return new XE(i,e,n,s)}async function Cg(i,e){const n=we(i);return await n.persistence.runTransaction("Handle user change","readonly",s=>{let a;return n.mutationQueue.getAllMutationBatches(s).next(c=>(a=c,n.Ps(e),n.mutationQueue.getAllMutationBatches(s))).next(c=>{const d=[],m=[];let y=Ae();for(const E of a){d.push(E.batchId);for(const I of E.mutations)y=y.add(I.key)}for(const E of c){m.push(E.batchId);for(const I of E.mutations)y=y.add(I.key)}return n.localDocuments.getDocuments(s,y).next(E=>({Ts:E,removedBatchIds:d,addedBatchIds:m}))})})}function JE(i,e){const n=we(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const a=e.batch.keys(),c=n.hs.newChangeBuffer({trackRemovals:!0});return function(m,y,E,I){const D=E.batch,F=D.keys();let z=j.resolve();return F.forEach(G=>{z=z.next(()=>I.getEntry(y,G)).next(X=>{const B=E.docVersions.get(G);Me(B!==null),X.version.compareTo(B)<0&&(D.applyToRemoteDocument(X,E),X.isValidDocument()&&(X.setReadTime(E.commitVersion),I.addEntry(X)))})}),z.next(()=>m.mutationQueue.removeMutationBatch(y,D))}(n,s,e,c).next(()=>c.apply(s)).next(()=>n.mutationQueue.performConsistencyCheck(s)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(s,a,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(m){let y=Ae();for(let E=0;E<m.mutationResults.length;++E)m.mutationResults[E].transformResults.length>0&&(y=y.add(m.batch.mutations[E].key));return y}(e))).next(()=>n.localDocuments.getDocuments(s,a))})}function Pg(i){const e=we(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function ZE(i,e){const n=we(i),s=e.snapshotVersion;let a=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const d=n.hs.newChangeBuffer({trackRemovals:!0});a=n.us;const m=[];e.targetChanges.forEach((I,D)=>{const F=a.get(D);if(!F)return;m.push(n.Gr.removeMatchingKeys(c,I.removedDocuments,D).next(()=>n.Gr.addMatchingKeys(c,I.addedDocuments,D)));let z=F.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(D)!==null?z=z.withResumeToken(kt.EMPTY_BYTE_STRING,Ee.min()).withLastLimboFreeSnapshotVersion(Ee.min()):I.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(I.resumeToken,s)),a=a.insert(D,z),function(X,B,ye){return X.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-X.snapshotVersion.toMicroseconds()>=3e8?!0:ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0}(F,z,I)&&m.push(n.Gr.updateTargetData(c,z))});let y=wr(),E=Ae();if(e.documentUpdates.forEach(I=>{e.resolvedLimboDocuments.has(I)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(c,I))}),m.push(ew(c,d,e.documentUpdates).next(I=>{y=I.Is,E=I.Es})),!s.isEqual(Ee.min())){const I=n.Gr.getLastRemoteSnapshotVersion(c).next(D=>n.Gr.setTargetsMetadata(c,c.currentSequenceNumber,s));m.push(I)}return j.waitFor(m).next(()=>d.apply(c)).next(()=>n.localDocuments.getLocalViewOfDocuments(c,y,E)).next(()=>y)}).then(c=>(n.us=a,c))}function ew(i,e,n){let s=Ae(),a=Ae();return n.forEach(c=>s=s.add(c)),e.getEntries(i,s).next(c=>{let d=wr();return n.forEach((m,y)=>{const E=c.get(m);y.isFoundDocument()!==E.isFoundDocument()&&(a=a.add(m)),y.isNoDocument()&&y.version.isEqual(Ee.min())?(e.removeEntry(m,y.readTime),d=d.insert(m,y)):!E.isValidDocument()||y.version.compareTo(E.version)>0||y.version.compareTo(E.version)===0&&E.hasPendingWrites?(e.addEntry(y),d=d.insert(m,y)):te("LocalStore","Ignoring outdated watch update for ",m,". Current version:",E.version," Watch version:",y.version)}),{Is:d,Es:a}})}function tw(i,e){const n=we(i);return n.persistence.runTransaction("Get next mutation batch","readonly",s=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e)))}function nw(i,e){const n=we(i);return n.persistence.runTransaction("Allocate target","readwrite",s=>{let a;return n.Gr.getTargetData(s,e).next(c=>c?(a=c,j.resolve(a)):n.Gr.allocateTargetId(s).next(d=>(a=new Kr(e,d,"TargetPurposeListen",s.currentSequenceNumber),n.Gr.addTargetData(s,a).next(()=>a))))}).then(s=>{const a=n.us.get(s.targetId);return(a===null||s.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(n.us=n.us.insert(s.targetId,s),n.cs.set(e,s.targetId)),s})}async function vh(i,e,n){const s=we(i),a=s.us.get(e),c=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",c,d=>s.persistence.referenceDelegate.removeTarget(d,a))}catch(d){if(!Ys(d))throw d;te("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}s.us=s.us.remove(e),s.cs.delete(a.target)}function im(i,e,n){const s=we(i);let a=Ee.min(),c=Ae();return s.persistence.runTransaction("Execute query","readwrite",d=>function(y,E,I){const D=we(y),F=D.cs.get(I);return F!==void 0?j.resolve(D.us.get(F)):D.Gr.getTargetData(E,I)}(s,d,Kn(e)).next(m=>{if(m)return a=m.lastLimboFreeSnapshotVersion,s.Gr.getMatchingKeysForTargetId(d,m.targetId).next(y=>{c=y})}).next(()=>s._s.getDocumentsMatchingQuery(d,e,n?a:Ee.min(),n?c:Ae())).next(m=>(rw(s,$0(e),m),{documents:m,ds:c})))}function rw(i,e,n){let s=i.ls.get(e)||Ee.min();n.forEach((a,c)=>{c.readTime.compareTo(s)>0&&(s=c.readTime)}),i.ls.set(e,s)}class sm{constructor(){this.activeTargetIds=G0()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class iw{constructor(){this._o=new sm,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,s){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new sm,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class om{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){te("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){te("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fl=null;function Jc(){return Fl===null?Fl=function(){return 268435456+Math.round(2147483648*Math.random())}():Fl++,"0x"+Fl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lt="WebChannelConnection";class lw extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const s=n.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+n.host,this.Mo=`projects/${a}/databases/${c}`,this.xo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}Oo(n,s,a,c,d){const m=Jc(),y=this.No(n,s.toUriEncodedString());te("RestConnection",`Sending RPC '${n}' ${m}:`,y,a);const E={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(E,c,d),this.Bo(n,y,E,a).then(I=>(te("RestConnection",`Received RPC '${n}' ${m}: `,I),I),I=>{throw js("RestConnection",`RPC '${n}' ${m} failed with error: `,I,"url: ",y,"request:",a),I})}ko(n,s,a,c,d,m){return this.Oo(n,s,a,c,d)}Lo(n,s,a){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Gs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((c,d)=>n[d]=c),a&&a.headers.forEach((c,d)=>n[d]=c)}No(n,s){const a=ow[n];return`${this.Fo}/v1/${s}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,s,a){const c=Jc();return new Promise((d,m)=>{const y=new Bm;y.setWithCredentials(!0),y.listenOnce(jm.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case zl.NO_ERROR:const I=y.getResponseJson();te(Lt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(I)),d(I);break;case zl.TIMEOUT:te(Lt,`RPC '${e}' ${c} timed out`),m(new ce(Q.DEADLINE_EXCEEDED,"Request time out"));break;case zl.HTTP_ERROR:const D=y.getStatus();if(te(Lt,`RPC '${e}' ${c} failed with status:`,D,"response text:",y.getResponseText()),D>0){let F=y.getResponseJson();Array.isArray(F)&&(F=F[0]);const z=F==null?void 0:F.error;if(z&&z.status&&z.message){const G=function(B){const ye=B.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(ye)>=0?ye:Q.UNKNOWN}(z.status);m(new ce(G,z.message))}else m(new ce(Q.UNKNOWN,"Server responded with status "+y.getStatus()))}else m(new ce(Q.UNAVAILABLE,"Connection failed."));break;default:ve()}}finally{te(Lt,`RPC '${e}' ${c} completed.`)}});const E=JSON.stringify(a);te(Lt,`RPC '${e}' ${c} sending request:`,a),y.send(n,"POST",E,s,15)})}qo(e,n,s){const a=Jc(),c=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],d=Hm(),m=qm(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},E=this.longPollingOptions.timeoutSeconds;E!==void 0&&(y.longPollingTimeout=Math.round(1e3*E)),this.useFetchStreams&&(y.useFetchStreams=!0),this.Lo(y.initMessageHeaders,n,s),y.encodeInitMessageHeaders=!0;const I=c.join("");te(Lt,`Creating RPC '${e}' stream ${a}: ${I}`,y);const D=d.createWebChannel(I,y);let F=!1,z=!1;const G=new aw({Eo:B=>{z?te(Lt,`Not sending because RPC '${e}' stream ${a} is closed:`,B):(F||(te(Lt,`Opening RPC '${e}' stream ${a} transport.`),D.open(),F=!0),te(Lt,`RPC '${e}' stream ${a} sending:`,B),D.send(B))},Ao:()=>D.close()}),X=(B,ye,ge)=>{B.listen(ye,he=>{try{ge(he)}catch(de){setTimeout(()=>{throw de},0)}})};return X(D,Xo.EventType.OPEN,()=>{z||(te(Lt,`RPC '${e}' stream ${a} transport opened.`),G.So())}),X(D,Xo.EventType.CLOSE,()=>{z||(z=!0,te(Lt,`RPC '${e}' stream ${a} transport closed`),G.Do())}),X(D,Xo.EventType.ERROR,B=>{z||(z=!0,js(Lt,`RPC '${e}' stream ${a} transport errored:`,B),G.Do(new ce(Q.UNAVAILABLE,"The operation could not be completed")))}),X(D,Xo.EventType.MESSAGE,B=>{var ye;if(!z){const ge=B.data[0];Me(!!ge);const he=ge,de=(he==null?void 0:he.error)||((ye=he[0])===null||ye===void 0?void 0:ye.error);if(de){te(Lt,`RPC '${e}' stream ${a} received error:`,de);const oe=de.status;let le=function(A){const C=at[A];if(C!==void 0)return gg(C)}(oe),P=de.message;le===void 0&&(le=Q.INTERNAL,P="Unknown error status: "+oe+" with message "+de.message),z=!0,G.Do(new ce(le,P)),D.close()}else te(Lt,`RPC '${e}' stream ${a} received:`,ge),G.vo(ge)}}),X(m,$m.STAT_EVENT,B=>{B.stat===uh.PROXY?te(Lt,`RPC '${e}' stream ${a} detected buffering proxy`):B.stat===uh.NOPROXY&&te(Lt,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{G.bo()},0),G}}function Zc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(i){return new mE(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,n,s=1e3,a=1.5,c=6e4){this.li=e,this.timerId=n,this.Qo=s,this.Ko=a,this.$o=c,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),a=Math.max(0,n-s);a>0&&te("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,a,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,n,s,a,c,d,m,y){this.li=e,this.Yo=s,this.Zo=a,this.connection=c,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=y,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new kg(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(Er(n.toString()),Er("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,a])=>{this.Xo===n&&this.I_(s,a)},s=>{e(()=>{const a=new ce(Q.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(a)})})}I_(e,n){const s=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(a=>{s(()=>this.E_(a))}),this.stream.onMessage(a=>{s(()=>++this.n_==1?this.A_(a):this.onNext(a))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return te("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(te("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uw extends Ng{constructor(e,n,s,a,c,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,a,d),this.serializer=c}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=_E(this.serializer,e),s=function(c){if(!("targetChange"in c))return Ee.min();const d=c.targetChange;return d.targetIds&&d.targetIds.length?Ee.min():d.readTime?Gn(d.readTime):Ee.min()}(e);return this.listener.R_(n,s)}V_(e){const n={};n.database=_h(this.serializer),n.addTarget=function(c,d){let m;const y=d.target;if(m=fh(y)?{documents:wE(c,y)}:{query:TE(c,y).ct},m.targetId=d.targetId,d.resumeToken.approximateByteSize()>0){m.resumeToken=vg(c,d.resumeToken);const E=mh(c,d.expectedCount);E!==null&&(m.expectedCount=E)}else if(d.snapshotVersion.compareTo(Ee.min())>0){m.readTime=Yl(c,d.snapshotVersion.toTimestamp());const E=mh(c,d.expectedCount);E!==null&&(m.expectedCount=E)}return m}(this.serializer,e);const s=SE(this.serializer,e);s&&(n.labels=s),this.c_(n)}m_(e){const n={};n.database=_h(this.serializer),n.removeTarget=e,this.c_(n)}}class cw extends Ng{constructor(e,n,s,a,c,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,a,d),this.serializer=c}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Me(!!e.streamToken),this.lastStreamToken=e.streamToken,Me(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=EE(e.writeResults,e.commitTime),s=Gn(e.commitTime);return this.listener.y_(s,n)}w_(){const e={};e.database=_h(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(s=>vE(this.serializer,s))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw extends class{}{constructor(e,n,s,a){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=a,this.S_=!1}b_(){if(this.S_)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,s,a){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,d])=>this.connection.Oo(e,gh(n,s),a,c,d)).catch(c=>{throw c.name==="FirebaseError"?(c.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ce(Q.UNKNOWN,c.toString())})}ko(e,n,s,a,c){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ko(e,gh(n,s),a,d,m,c)).catch(d=>{throw d.name==="FirebaseError"?(d.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new ce(Q.UNKNOWN,d.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class dw{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Er(n),this.C_=!1):te("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e,n,s,a,c){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=c,this.Q_.uo(d=>{s.enqueueAndForget(async()=>{$i(this)&&(te("RemoteStore","Restarting streams for network reachability change."),await async function(y){const E=we(y);E.k_.add(4),await ma(E),E.K_.set("Unknown"),E.k_.delete(4),await fu(E)}(this))})}),this.K_=new dw(s,a)}}async function fu(i){if($i(i))for(const e of i.q_)await e(!0)}async function ma(i){for(const e of i.q_)await e(!1)}function Dg(i,e){const n=we(i);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),$h(n)?jh(n):Js(n).s_()&&Bh(n,e))}function zh(i,e){const n=we(i),s=Js(n);n.B_.delete(e),s.s_()&&Vg(n,e),n.B_.size===0&&(s.s_()?s.a_():$i(n)&&n.K_.set("Unknown"))}function Bh(i,e){if(i.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ee.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Js(i).V_(e)}function Vg(i,e){i.U_.xe(e),Js(i).m_(e)}function jh(i){i.U_=new hE({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>i.B_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),Js(i).start(),i.K_.F_()}function $h(i){return $i(i)&&!Js(i).i_()&&i.B_.size>0}function $i(i){return we(i).k_.size===0}function xg(i){i.U_=void 0}async function pw(i){i.K_.set("Online")}async function mw(i){i.B_.forEach((e,n)=>{Bh(i,e)})}async function gw(i,e){xg(i),$h(i)?(i.K_.O_(e),jh(i)):i.K_.set("Unknown")}async function yw(i,e,n){if(i.K_.set("Online"),e instanceof _g&&e.state===2&&e.cause)try{await async function(a,c){const d=c.cause;for(const m of c.targetIds)a.B_.has(m)&&(await a.remoteSyncer.rejectListen(m,d),a.B_.delete(m),a.U_.removeTarget(m))}(i,e)}catch(s){te("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Zl(i,s)}else if(e instanceof ql?i.U_.$e(e):e instanceof yg?i.U_.Je(e):i.U_.Ge(e),!n.isEqual(Ee.min()))try{const s=await Pg(i.localStore);n.compareTo(s)>=0&&await function(c,d){const m=c.U_.it(d);return m.targetChanges.forEach((y,E)=>{if(y.resumeToken.approximateByteSize()>0){const I=c.B_.get(E);I&&c.B_.set(E,I.withResumeToken(y.resumeToken,d))}}),m.targetMismatches.forEach((y,E)=>{const I=c.B_.get(y);if(!I)return;c.B_.set(y,I.withResumeToken(kt.EMPTY_BYTE_STRING,I.snapshotVersion)),Vg(c,y);const D=new Kr(I.target,y,E,I.sequenceNumber);Bh(c,D)}),c.remoteSyncer.applyRemoteEvent(m)}(i,n)}catch(s){te("RemoteStore","Failed to raise snapshot:",s),await Zl(i,s)}}async function Zl(i,e,n){if(!Ys(e))throw e;i.k_.add(1),await ma(i),i.K_.set("Offline"),n||(n=()=>Pg(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{te("RemoteStore","Retrying IndexedDB access"),await n(),i.k_.delete(1),await fu(i)})}function Og(i,e){return e().catch(n=>Zl(i,n,e))}async function pu(i){const e=we(i),n=ii(e);let s=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;_w(e);)try{const a=await tw(e.localStore,s);if(a===null){e.L_.length===0&&n.a_();break}s=a.batchId,vw(e,a)}catch(a){await Zl(e,a)}Lg(e)&&Mg(e)}function _w(i){return $i(i)&&i.L_.length<10}function vw(i,e){i.L_.push(e);const n=ii(i);n.s_()&&n.f_&&n.g_(e.mutations)}function Lg(i){return $i(i)&&!ii(i).i_()&&i.L_.length>0}function Mg(i){ii(i).start()}async function Ew(i){ii(i).w_()}async function ww(i){const e=ii(i);for(const n of i.L_)e.g_(n.mutations)}async function Tw(i,e,n){const s=i.L_.shift(),a=Oh.from(s,e,n);await Og(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await pu(i)}async function Iw(i,e){e&&ii(i).f_&&await async function(s,a){if(function(d){return lE(d)&&d!==Q.ABORTED}(a.code)){const c=s.L_.shift();ii(s).__(),await Og(s,()=>s.remoteSyncer.rejectFailedWrite(c.batchId,a)),await pu(s)}}(i,e),Lg(i)&&Mg(i)}async function am(i,e){const n=we(i);n.asyncQueue.verifyOperationInProgress(),te("RemoteStore","RemoteStore received new credentials");const s=$i(n);n.k_.add(3),await ma(n),s&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await fu(n)}async function Sw(i,e){const n=we(i);e?(n.k_.delete(2),await fu(n)):e||(n.k_.add(2),await ma(n),n.K_.set("Unknown"))}function Js(i){return i.W_||(i.W_=function(n,s,a){const c=we(n);return c.b_(),new uw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:pw.bind(null,i),mo:mw.bind(null,i),po:gw.bind(null,i),R_:yw.bind(null,i)}),i.q_.push(async e=>{e?(i.W_.__(),$h(i)?jh(i):i.K_.set("Unknown")):(await i.W_.stop(),xg(i))})),i.W_}function ii(i){return i.G_||(i.G_=function(n,s,a){const c=we(n);return c.b_(),new cw(s,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:Ew.bind(null,i),po:Iw.bind(null,i),p_:ww.bind(null,i),y_:Tw.bind(null,i)}),i.q_.push(async e=>{e?(i.G_.__(),await pu(i)):(await i.G_.stop(),i.L_.length>0&&(te("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(e,n,s,a,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=a,this.removalCallback=c,this.deferred=new Jr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,a,c){const d=Date.now()+s,m=new qh(e,n,d,a,c);return m.start(s),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hh(i,e){if(Er("AsyncQueue",`${e}: ${i}`),Ys(i))return new ce(Q.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{static emptySet(e){return new zs(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||me.comparator(n.key,s.key):(n,s)=>me.comparator(n.key,s.key),this.keyedMap=Yo(),this.sortedSet=new Je(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,s)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const a=n.getNext().key,c=s.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new zs;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(){this.z_=new Je(me.comparator)}track(e){const n=e.doc.key,s=this.z_.get(n);s?e.type!==0&&s.type===3?this.z_=this.z_.insert(n,e):e.type===3&&s.type!==1?this.z_=this.z_.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.z_=this.z_.remove(n):e.type===1&&s.type===2?this.z_=this.z_.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):ve():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,s)=>{e.push(s)}),e}}class Qs{constructor(e,n,s,a,c,d,m,y,E){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=a,this.mutatedKeys=c,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=y,this.hasCachedResults=E}static fromInitialDocuments(e,n,s,a,c){const d=[];return n.forEach(m=>{d.push({type:0,doc:m})}),new Qs(e,n,zs.emptySet(n),d,s,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&au(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(n[a].type!==s[a].type||!n[a].doc.isEqual(s[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class Rw{constructor(){this.queries=um(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,s){const a=we(n),c=a.queries;a.queries=um(),c.forEach((d,m)=>{for(const y of m.J_)y.onError(s)})})(this,new ce(Q.ABORTED,"Firestore shutting down"))}}function um(){return new Bi(i=>rg(i),au)}async function Cw(i,e){const n=we(i);let s=3;const a=e.query;let c=n.queries.get(a);c?!c.Y_()&&e.Z_()&&(s=2):(c=new Aw,s=e.Z_()?0:1);try{switch(s){case 0:c.H_=await n.onListen(a,!0);break;case 1:c.H_=await n.onListen(a,!1);break;case 2:await n.onFirstRemoteStoreListen(a)}}catch(d){const m=Hh(d,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(m)}n.queries.set(a,c),c.J_.push(e),e.ea(n.onlineState),c.H_&&e.ta(c.H_)&&Wh(n)}async function Pw(i,e){const n=we(i),s=e.query;let a=3;const c=n.queries.get(s);if(c){const d=c.J_.indexOf(e);d>=0&&(c.J_.splice(d,1),c.J_.length===0?a=e.Z_()?0:1:!c.Y_()&&e.Z_()&&(a=2))}switch(a){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function kw(i,e){const n=we(i);let s=!1;for(const a of e){const c=a.query,d=n.queries.get(c);if(d){for(const m of d.J_)m.ta(a)&&(s=!0);d.H_=a}}s&&Wh(n)}function Nw(i,e,n){const s=we(i),a=s.queries.get(e);if(a)for(const c of a.J_)c.onError(n);s.queries.delete(e)}function Wh(i){i.X_.forEach(e=>{e.next()})}var Eh,cm;(cm=Eh||(Eh={})).na="default",cm.Cache="cache";class Dw{constructor(e,n,s){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=s||{}}ta(e){if(!this.options.includeMetadataChanges){const s=[];for(const a of e.docChanges)a.type!==3&&s.push(a);e=new Qs(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const s=n!=="Offline";return(!this.options.ua||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=Qs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Eh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e){this.key=e}}class Ug{constructor(e){this.key=e}}class Vw{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Ae(),this.mutatedKeys=Ae(),this.Va=ig(e),this.ma=new zs(this.Va)}get fa(){return this.da}ga(e,n){const s=n?n.pa:new lm,a=n?n.ma:this.ma;let c=n?n.mutatedKeys:this.mutatedKeys,d=a,m=!1;const y=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,E=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((I,D)=>{const F=a.get(I),z=lu(this.query,D)?D:null,G=!!F&&this.mutatedKeys.has(F.key),X=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let B=!1;F&&z?F.data.isEqual(z.data)?G!==X&&(s.track({type:3,doc:z}),B=!0):this.ya(F,z)||(s.track({type:2,doc:z}),B=!0,(y&&this.Va(z,y)>0||E&&this.Va(z,E)<0)&&(m=!0)):!F&&z?(s.track({type:0,doc:z}),B=!0):F&&!z&&(s.track({type:1,doc:F}),B=!0,(y||E)&&(m=!0)),B&&(z?(d=d.add(z),c=X?c.add(I):c.delete(I)):(d=d.delete(I),c=c.delete(I)))}),this.query.limit!==null)for(;d.size>this.query.limit;){const I=this.query.limitType==="F"?d.last():d.first();d=d.delete(I.key),c=c.delete(I.key),s.track({type:1,doc:I})}return{ma:d,pa:s,ss:m,mutatedKeys:c}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,a){const c=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const d=e.pa.j_();d.sort((I,D)=>function(z,G){const X=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ve()}};return X(z)-X(G)}(I.type,D.type)||this.Va(I.doc,D.doc)),this.wa(s),a=a!=null&&a;const m=n&&!a?this.Sa():[],y=this.Ra.size===0&&this.current&&!a?1:0,E=y!==this.Aa;return this.Aa=y,d.length!==0||E?{snapshot:new Qs(this.query,e.ma,c,d,e.mutatedKeys,y===0,E,!1,!!s&&s.resumeToken.approximateByteSize()>0),ba:m}:{ba:m}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new lm,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Ae(),this.ma.forEach(s=>{this.Da(s.key)&&(this.Ra=this.Ra.add(s.key))});const n=[];return e.forEach(s=>{this.Ra.has(s)||n.push(new Ug(s))}),this.Ra.forEach(s=>{e.has(s)||n.push(new Fg(s))}),n}va(e){this.da=e.ds,this.Ra=Ae();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return Qs.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class xw{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class Ow{constructor(e){this.key=e,this.Fa=!1}}class Lw{constructor(e,n,s,a,c,d){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=d,this.Ma={},this.xa=new Bi(m=>rg(m),au),this.Oa=new Map,this.Na=new Set,this.La=new Je(me.comparator),this.Ba=new Map,this.ka=new Fh,this.qa={},this.Qa=new Map,this.Ka=Ws.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Mw(i,e,n=!0){const s=qg(i);let a;const c=s.xa.get(e);return c?(s.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.Ca()):a=await bg(s,e,n,!0),a}async function Fw(i,e){const n=qg(i);await bg(n,e,!0,!1)}async function bg(i,e,n,s){const a=await nw(i.localStore,Kn(e)),c=a.targetId,d=i.sharedClientState.addLocalQueryTarget(c,n);let m;return s&&(m=await Uw(i,e,c,d==="current",a.resumeToken)),i.isPrimaryClient&&n&&Dg(i.remoteStore,a),m}async function Uw(i,e,n,s,a){i.Ua=(D,F,z)=>async function(X,B,ye,ge){let he=B.view.ga(ye);he.ss&&(he=await im(X.localStore,B.query,!1).then(({documents:P})=>B.view.ga(P,he)));const de=ge&&ge.targetChanges.get(B.targetId),oe=ge&&ge.targetMismatches.get(B.targetId)!=null,le=B.view.applyChanges(he,X.isPrimaryClient,de,oe);return dm(X,B.targetId,le.ba),le.snapshot}(i,D,F,z);const c=await im(i.localStore,e,!0),d=new Vw(e,c.ds),m=d.ga(c.documents),y=pa.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",a),E=d.applyChanges(m,i.isPrimaryClient,y);dm(i,n,E.ba);const I=new xw(e,n,d);return i.xa.set(e,I),i.Oa.has(n)?i.Oa.get(n).push(e):i.Oa.set(n,[e]),E.snapshot}async function bw(i,e,n){const s=we(i),a=s.xa.get(e),c=s.Oa.get(a.targetId);if(c.length>1)return s.Oa.set(a.targetId,c.filter(d=>!au(d,e))),void s.xa.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await vh(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),n&&zh(s.remoteStore,a.targetId),wh(s,a.targetId)}).catch(Xs)):(wh(s,a.targetId),await vh(s.localStore,a.targetId,!0))}async function zw(i,e){const n=we(i),s=n.xa.get(e),a=n.Oa.get(s.targetId);n.isPrimaryClient&&a.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),zh(n.remoteStore,s.targetId))}async function Bw(i,e,n){const s=Kw(i);try{const a=await function(d,m){const y=we(d),E=pt.now(),I=m.reduce((z,G)=>z.add(G.key),Ae());let D,F;return y.persistence.runTransaction("Locally write mutations","readwrite",z=>{let G=wr(),X=Ae();return y.hs.getEntries(z,I).next(B=>{G=B,G.forEach((ye,ge)=>{ge.isValidDocument()||(X=X.add(ye))})}).next(()=>y.localDocuments.getOverlayedDocuments(z,G)).next(B=>{D=B;const ye=[];for(const ge of m){const he=rE(ge,D.get(ge.key).overlayedDocument);he!=null&&ye.push(new ji(ge.key,he,Xm(he.value.mapValue),yr.exists(!0)))}return y.mutationQueue.addMutationBatch(z,E,ye,m)}).next(B=>{F=B;const ye=B.applyToLocalDocumentSet(D,X);return y.documentOverlayCache.saveOverlays(z,B.batchId,ye)})}).then(()=>({batchId:F.batchId,changes:og(D)}))}(s.localStore,e);s.sharedClientState.addPendingMutation(a.batchId),function(d,m,y){let E=d.qa[d.currentUser.toKey()];E||(E=new Je(Ce)),E=E.insert(m,y),d.qa[d.currentUser.toKey()]=E}(s,a.batchId,n),await ga(s,a.changes),await pu(s.remoteStore)}catch(a){const c=Hh(a,"Failed to persist write");n.reject(c)}}async function zg(i,e){const n=we(i);try{const s=await ZE(n.localStore,e);e.targetChanges.forEach((a,c)=>{const d=n.Ba.get(c);d&&(Me(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?d.Fa=!0:a.modifiedDocuments.size>0?Me(d.Fa):a.removedDocuments.size>0&&(Me(d.Fa),d.Fa=!1))}),await ga(n,s,e)}catch(s){await Xs(s)}}function hm(i,e,n){const s=we(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const a=[];s.xa.forEach((c,d)=>{const m=d.view.ea(e);m.snapshot&&a.push(m.snapshot)}),function(d,m){const y=we(d);y.onlineState=m;let E=!1;y.queries.forEach((I,D)=>{for(const F of D.J_)F.ea(m)&&(E=!0)}),E&&Wh(y)}(s.eventManager,e),a.length&&s.Ma.R_(a),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function jw(i,e,n){const s=we(i);s.sharedClientState.updateQueryState(e,"rejected",n);const a=s.Ba.get(e),c=a&&a.key;if(c){let d=new Je(me.comparator);d=d.insert(c,Ft.newNoDocument(c,Ee.min()));const m=Ae().add(c),y=new hu(Ee.min(),new Map,new Je(Ce),d,m);await zg(s,y),s.La=s.La.remove(c),s.Ba.delete(e),Qh(s)}else await vh(s.localStore,e,!1).then(()=>wh(s,e,n)).catch(Xs)}async function $w(i,e){const n=we(i),s=e.batch.batchId;try{const a=await JE(n.localStore,e);jg(n,s,null),Bg(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ga(n,a)}catch(a){await Xs(a)}}async function qw(i,e,n){const s=we(i);try{const a=await function(d,m){const y=we(d);return y.persistence.runTransaction("Reject batch","readwrite-primary",E=>{let I;return y.mutationQueue.lookupMutationBatch(E,m).next(D=>(Me(D!==null),I=D.keys(),y.mutationQueue.removeMutationBatch(E,D))).next(()=>y.mutationQueue.performConsistencyCheck(E)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(E,I,m)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(E,I)).next(()=>y.localDocuments.getDocuments(E,I))})}(s.localStore,e);jg(s,e,n),Bg(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ga(s,a)}catch(a){await Xs(a)}}function Bg(i,e){(i.Qa.get(e)||[]).forEach(n=>{n.resolve()}),i.Qa.delete(e)}function jg(i,e,n){const s=we(i);let a=s.qa[s.currentUser.toKey()];if(a){const c=a.get(e);c&&(n?c.reject(n):c.resolve(),a=a.remove(e)),s.qa[s.currentUser.toKey()]=a}}function wh(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Oa.get(e))i.xa.delete(s),n&&i.Ma.Wa(s,n);i.Oa.delete(e),i.isPrimaryClient&&i.ka.yr(e).forEach(s=>{i.ka.containsKey(s)||$g(i,s)})}function $g(i,e){i.Na.delete(e.path.canonicalString());const n=i.La.get(e);n!==null&&(zh(i.remoteStore,n),i.La=i.La.remove(e),i.Ba.delete(n),Qh(i))}function dm(i,e,n){for(const s of n)s instanceof Fg?(i.ka.addReference(s.key,e),Hw(i,s)):s instanceof Ug?(te("SyncEngine","Document no longer in limbo: "+s.key),i.ka.removeReference(s.key,e),i.ka.containsKey(s.key)||$g(i,s.key)):ve()}function Hw(i,e){const n=e.key,s=n.path.canonicalString();i.La.get(n)||i.Na.has(s)||(te("SyncEngine","New document in limbo: "+n),i.Na.add(s),Qh(i))}function Qh(i){for(;i.Na.size>0&&i.La.size<i.maxConcurrentLimboResolutions;){const e=i.Na.values().next().value;i.Na.delete(e);const n=new me(Ke.fromString(e)),s=i.Ka.next();i.Ba.set(s,new Ow(n)),i.La=i.La.insert(n,s),Dg(i.remoteStore,new Kr(Kn(Vh(n.path)),s,"TargetPurposeLimboResolution",ru.oe))}}async function ga(i,e,n){const s=we(i),a=[],c=[],d=[];s.xa.isEmpty()||(s.xa.forEach((m,y)=>{d.push(s.Ua(y,e,n).then(E=>{var I;if((E||n)&&s.isPrimaryClient){const D=E?!E.fromCache:(I=n==null?void 0:n.targetChanges.get(y.targetId))===null||I===void 0?void 0:I.current;s.sharedClientState.updateQueryState(y.targetId,D?"current":"not-current")}if(E){a.push(E);const D=bh.zi(y.targetId,E);c.push(D)}}))}),await Promise.all(d),s.Ma.R_(a),await async function(y,E){const I=we(y);try{await I.persistence.runTransaction("notifyLocalViewChanges","readwrite",D=>j.forEach(E,F=>j.forEach(F.Wi,z=>I.persistence.referenceDelegate.addReference(D,F.targetId,z)).next(()=>j.forEach(F.Gi,z=>I.persistence.referenceDelegate.removeReference(D,F.targetId,z)))))}catch(D){if(!Ys(D))throw D;te("LocalStore","Failed to update sequence numbers: "+D)}for(const D of E){const F=D.targetId;if(!D.fromCache){const z=I.us.get(F),G=z.snapshotVersion,X=z.withLastLimboFreeSnapshotVersion(G);I.us=I.us.insert(F,X)}}}(s.localStore,c))}async function Ww(i,e){const n=we(i);if(!n.currentUser.isEqual(e)){te("SyncEngine","User change. New user:",e.toKey());const s=await Cg(n.localStore,e);n.currentUser=e,function(c,d){c.Qa.forEach(m=>{m.forEach(y=>{y.reject(new ce(Q.CANCELLED,d))})}),c.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ga(n,s.Ts)}}function Qw(i,e){const n=we(i),s=n.Ba.get(e);if(s&&s.Fa)return Ae().add(s.key);{let a=Ae();const c=n.Oa.get(e);if(!c)return a;for(const d of c){const m=n.xa.get(d);a=a.unionWith(m.view.fa)}return a}}function qg(i){const e=we(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=zg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Qw.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jw.bind(null,e),e.Ma.R_=kw.bind(null,e.eventManager),e.Ma.Wa=Nw.bind(null,e.eventManager),e}function Kw(i){const e=we(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$w.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=qw.bind(null,e),e}class eu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=du(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return YE(this.persistence,new GE,e.initialUser,this.serializer)}ja(e){return new Rg(Uh.ei,this.serializer)}za(e){return new iw}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}eu.provider={build:()=>new eu};class Gw extends eu{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Me(this.persistence.referenceDelegate instanceof Jl);const s=this.persistence.referenceDelegate.garbageCollector;return new OE(s,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Yt.withCacheSize(this.cacheSizeBytes):Yt.DEFAULT;return new Rg(s=>Jl.ei(s,n),this.serializer)}}class Th{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>hm(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ww.bind(null,this.syncEngine),await Sw(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Rw}()}createDatastore(e){const n=du(e.databaseInfo.databaseId),s=function(c){return new lw(c)}(e.databaseInfo);return function(c,d,m,y){return new hw(c,d,m,y)}(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return function(s,a,c,d,m){return new fw(s,a,c,d,m)}(this.localStore,this.datastore,e.asyncQueue,n=>hm(this.syncEngine,n,0),function(){return om.p()?new om:new sw}())}createSyncEngine(e,n){return function(a,c,d,m,y,E,I){const D=new Lw(a,c,d,m,y,E);return I&&(D.$a=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(a){const c=we(a);te("RemoteStore","RemoteStore shutting down."),c.k_.add(5),await ma(c),c.Q_.shutdown(),c.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Th.provider={build:()=>new Th};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Er("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e,n,s,a,c){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this.databaseInfo=a,this.user=Mt.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(s,async d=>{te("FirestoreClient","Received user=",d.uid),await this.authCredentialListener(d),this.user=d}),this.appCheckCredentials.start(s,d=>(te("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Hh(n,"Failed to shutdown persistence");e.reject(s)}}),e.promise}}async function eh(i,e){i.asyncQueue.verifyOperationInProgress(),te("FirestoreClient","Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener(async a=>{s.isEqual(a)||(await Cg(e.localStore,a),s=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function fm(i,e){i.asyncQueue.verifyOperationInProgress();const n=await Jw(i);te("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener(s=>am(e.remoteStore,s)),i.setAppCheckTokenChangeListener((s,a)=>am(e.remoteStore,a)),i._onlineComponents=e}async function Jw(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){te("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(a){return a.name==="FirebaseError"?a.code===Q.FAILED_PRECONDITION||a.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11}(n))throw n;js("Error using user provided cache. Falling back to memory cache: "+n),await eh(i,new eu)}}else te("FirestoreClient","Using default OfflineComponentProvider"),await eh(i,new Gw(void 0));return i._offlineComponents}async function Hg(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(te("FirestoreClient","Using user provided OnlineComponentProvider"),await fm(i,i._uninitializedComponentsProvider._online)):(te("FirestoreClient","Using default OnlineComponentProvider"),await fm(i,new Th))),i._onlineComponents}function Zw(i){return Hg(i).then(e=>e.syncEngine)}async function e1(i){const e=await Hg(i),n=e.eventManager;return n.onListen=Mw.bind(null,e.syncEngine),n.onUnlisten=bw.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Fw.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=zw.bind(null,e.syncEngine),n}function t1(i,e,n={}){const s=new Jr;return i.asyncQueue.enqueueAndForget(async()=>function(c,d,m,y,E){const I=new Xw({next:F=>{I.eu(),d.enqueueAndForget(()=>Pw(c,D));const z=F.docs.has(m);!z&&F.fromCache?E.reject(new ce(Q.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&F.fromCache&&y&&y.source==="server"?E.reject(new ce(Q.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):E.resolve(F)},error:F=>E.reject(F)}),D=new Dw(Vh(m.path),I,{includeMetadataChanges:!0,ua:!0});return Cw(c,D)}(await e1(i),i.asyncQueue,e,n,s)),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wg(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pm=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qg(i,e,n){if(!n)throw new ce(Q.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function n1(i,e,n,s){if(e===!0&&s===!0)throw new ce(Q.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function mm(i){if(!me.isDocumentKey(i))throw new ce(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function gm(i){if(me.isDocumentKey(i))throw new ce(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Kh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(s){return s.constructor?s.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ve()}function tu(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new ce(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(i);throw new ce(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e){var n,s;if(e.host===void 0){if(e.ssl!==void 0)throw new ce(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ce(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}n1("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wg((s=e.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new ce(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(s,a){return s.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mu{constructor(e,n,s,a){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ym({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ym(e),e.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new l0;switch(s.type){case"firstParty":return new d0(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const s=pm.get(n);s&&(te("ComponentProvider","Removing Datastore"),pm.delete(n),s.terminate())}(this),Promise.resolve()}}function r1(i,e,n,s={}){var a;const c=(i=tu(i,mu))._getSettings(),d=`${e}:${n}`;if(c.host!=="firestore.googleapis.com"&&c.host!==d&&js("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:d,ssl:!1})),s.mockUserToken){let m,y;if(typeof s.mockUserToken=="string")m=s.mockUserToken,y=Mt.MOCK_USER;else{m=km(s.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new ce(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Mt(E)}i._authCredentials=new u0(new Wm(m,y))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Gh(this.firestore,e,this._query)}}class vn{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class Zr extends Gh{constructor(e,n,s){super(e,n,Vh(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new me(e))}withConverter(e){return new Zr(this.firestore,e,this._path)}}function i1(i,e,...n){if(i=_r(i),Qg("collection","path",e),i instanceof mu){const s=Ke.fromString(e,...n);return gm(s),new Zr(i,null,s)}{if(!(i instanceof vn||i instanceof Zr))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ke.fromString(e,...n));return gm(s),new Zr(i.firestore,null,s)}}function Kg(i,e,...n){if(i=_r(i),arguments.length===1&&(e=Qm.newId()),Qg("doc","path",e),i instanceof mu){const s=Ke.fromString(e,...n);return mm(s),new vn(i,null,new me(s))}{if(!(i instanceof vn||i instanceof Zr))throw new ce(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(Ke.fromString(e,...n));return mm(s),new vn(i.firestore,i instanceof Zr?i.converter:null,new me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new kg(this,"async_queue_retry"),this.fu=()=>{const s=Zc();s&&te("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=e;const n=Zc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Zc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Jr;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ys(e))throw e;te("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(s=>{this.Au=s,this.Ru=!1;const a=function(d){let m=d.message||"";return d.stack&&(m=d.stack.includes(d.message)?d.stack:d.message+`
`+d.stack),m}(s);throw Er("INTERNAL UNHANDLED ERROR: ",a),s}).then(s=>(this.Ru=!1,s))));return this.gu=n,n}enqueueAfterDelay(e,n,s){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const a=qh.createAndSchedule(this,e,n,s,c=>this.Su(c));return this.du.push(a),a}pu(){this.Au&&ve()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,s)=>n.targetTimeMs-s.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Xh extends mu{constructor(e,n,s,a){super(e,n,s,a),this.type="firestore",this._queue=new _m,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new _m(e),this._firestoreClient=void 0,await e}}}function s1(i,e){const n=typeof i=="object"?i:Fm(),s=typeof i=="string"?i:"(default)",a=Om(n,"firestore").getImmediate({identifier:s});if(!a._initialized){const c=Cm("firestore");c&&r1(a,...c)}return a}function Gg(i){if(i._terminated)throw new ce(Q.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||o1(i),i._firestoreClient}function o1(i){var e,n,s;const a=i._freezeSettings(),c=function(m,y,E,I){return new C0(m,y,E,I.host,I.ssl,I.experimentalForceLongPolling,I.experimentalAutoDetectLongPolling,Wg(I.experimentalLongPollingOptions),I.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((n=a.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((s=a.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new Yw(i._authCredentials,i._appCheckCredentials,i._queue,c,i._componentsProvider&&function(m){const y=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(y),_online:y}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ks(kt.fromBase64String(e))}catch(n){throw new ce(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ks(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ce(this._lat,e._lat)||Ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(s,a){if(s.length!==a.length)return!1;for(let c=0;c<s.length;++c)if(s[c]!==a[c])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a1=/^__.*__$/;class l1{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new fa(e,this.data,n,this.fieldTransforms)}}function Xg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ve()}}class td{constructor(e,n,s,a,c,d){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=a,c===void 0&&this.Fu(),this.fieldTransforms=c||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new td(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Lu(e),a}Bu(e){var n;const s=(n=this.path)===null||n===void 0?void 0:n.child(e),a=this.xu({path:s,Nu:!1});return a.Fu(),a}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return nu(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Xg(this.Mu)&&a1.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class u1{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||du(e)}$u(e,n,s,a=!1){return new td({Mu:e,methodName:n,Ku:s,path:Pt.emptyPath(),Nu:!1,Qu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function c1(i){const e=i._freezeSettings(),n=du(i._databaseId);return new u1(i._databaseId,!!e.ignoreUndefinedProperties,n)}function h1(i,e,n,s,a,c={}){const d=i.$u(c.merge||c.mergeFields?2:0,e,n,a);ey("Data must be an object, but it was:",d,s);const m=Jg(s,d);let y,E;if(c.merge)y=new Ln(d.fieldMask),E=d.fieldTransforms;else if(c.mergeFields){const I=[];for(const D of c.mergeFields){const F=d1(e,D,n);if(!d.contains(F))throw new ce(Q.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);p1(I,F)||I.push(F)}y=new Ln(I),E=d.fieldTransforms.filter(D=>y.covers(D.field))}else y=null,E=d.fieldTransforms;return new l1(new _n(m),y,E)}class nd extends Jh{_toFieldTransform(e){return new Z0(e.path,new ca)}isEqual(e){return e instanceof nd}}function Yg(i,e){if(Zg(i=_r(i)))return ey("Unsupported field value:",e,i),Jg(i,e);if(i instanceof Jh)return function(s,a){if(!Xg(a.Mu))throw a.qu(`${s._methodName}() can only be used with update() and set()`);if(!a.path)throw a.qu(`${s._methodName}() is not currently supported inside arrays`);const c=s._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(s,a){const c=[];let d=0;for(const m of s){let y=Yg(m,a.ku(d));y==null&&(y={nullValue:"NULL_VALUE"}),c.push(y),d++}return{arrayValue:{values:c}}}(i,e)}return function(s,a){if((s=_r(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return X0(a.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const c=pt.fromDate(s);return{timestampValue:Yl(a.serializer,c)}}if(s instanceof pt){const c=new pt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Yl(a.serializer,c)}}if(s instanceof Zh)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Ks)return{bytesValue:vg(a.serializer,s._byteString)};if(s instanceof vn){const c=a.databaseId,d=s.firestore._databaseId;if(!d.isEqual(c))throw a.qu(`Document reference is for database ${d.projectId}/${d.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:Mh(s.firestore._databaseId||a.databaseId,s._key.path)}}if(s instanceof ed)return function(d,m){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:d.toArray().map(y=>{if(typeof y!="number")throw m.qu("VectorValues must only contain numeric values.");return xh(m.serializer,y)})}}}}}}(s,a);throw a.qu(`Unsupported field value: ${Kh(s)}`)}(i,e)}function Jg(i,e){const n={};return Km(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zi(i,(s,a)=>{const c=Yg(a,e.Ou(s));c!=null&&(n[s]=c)}),{mapValue:{fields:n}}}function Zg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof pt||i instanceof Zh||i instanceof Ks||i instanceof vn||i instanceof Jh||i instanceof ed)}function ey(i,e,n){if(!Zg(n)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(n)){const s=Kh(n);throw s==="an object"?e.qu(i+" a custom object"):e.qu(i+" "+s)}}function d1(i,e,n){if((e=_r(e))instanceof Yh)return e._internalPath;if(typeof e=="string")return ty(i,e);throw nu("Field path arguments must be of type string or ",i,!1,void 0,n)}const f1=new RegExp("[~\\*/\\[\\]]");function ty(i,e,n){if(e.search(f1)>=0)throw nu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Yh(...e.split("."))._internalPath}catch{throw nu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function nu(i,e,n,s,a){const c=s&&!s.isEmpty(),d=a!==void 0;let m=`Function ${e}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let y="";return(c||d)&&(y+=" (found",c&&(y+=` in field ${s}`),d&&(y+=` in document ${a}`),y+=")"),new ce(Q.INVALID_ARGUMENT,m+i+y)}function p1(i,e){return i.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ny{constructor(e,n,s,a,c){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new m1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ry("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class m1 extends ny{data(){return super.data()}}function ry(i,e){return typeof e=="string"?ty(i,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}class g1{convertValue(e,n="none"){switch(ri(e)){case 0:return null;case 1:return e.booleanValue;case 2:return it(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ni(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ve()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return zi(e,(a,c)=>{s[a]=this.convertValue(c,n)}),s}convertVectorValue(e){var n,s,a;const c=(a=(s=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||s===void 0?void 0:s.values)===null||a===void 0?void 0:a.map(d=>it(d.doubleValue));return new ed(c)}convertGeoPoint(e){return new Zh(it(e.latitude),it(e.longitude))}convertArray(e,n){return(e.values||[]).map(s=>this.convertValue(s,n))}convertServerTimestamp(e,n){switch(n){case"previous":const s=su(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(aa(e));default:return null}}convertTimestamp(e){const n=ti(e);return new pt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=Ke.fromString(e);Me(Ag(s));const a=new la(s.get(1),s.get(3)),c=new me(s.popFirst(5));return a.isEqual(n)||Er(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y1(i,e,n){let s;return s=i?i.toFirestore(e):e,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class iy extends ny{constructor(e,n,s,a,c,d){super(e,n,s,a,d),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new v1(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ry("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}}class v1 extends iy{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E1(i){i=tu(i,vn);const e=tu(i.firestore,Xh);return t1(Gg(e),i._key).then(n=>S1(e,i,n))}class w1 extends g1{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ks(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,n)}}function T1(i,e){const n=tu(i.firestore,Xh),s=Kg(i),a=y1(i.converter,e);return I1(n,[h1(c1(i.firestore),"addDoc",s._key,a,i.converter!==null,{}).toMutation(s._key,yr.exists(!1))]).then(()=>s)}function I1(i,e){return function(s,a){const c=new Jr;return s.asyncQueue.enqueueAndForget(async()=>Bw(await Zw(s),a,c)),c.promise}(Gg(i),e)}function S1(i,e,n){const s=n.docs.get(e._key),a=new w1(i);return new iy(i,a,e._key,s,new _1(n.hasPendingWrites,n.fromCache),e.converter)}function A1(){return new nd("serverTimestamp")}(function(e,n=!0){(function(a){Gs=a})(Lm),ia(new Bs("firestore",(s,{instanceIdentifier:a,options:c})=>{const d=s.getProvider("app").getImmediate(),m=new Xh(new c0(s.getProvider("auth-internal")),new p0(s.getProvider("app-check-internal")),function(E,I){if(!Object.prototype.hasOwnProperty.apply(E.options,["projectId"]))throw new ce(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new la(E.options.projectId,I)}(d,a),d);return c=Object.assign({useFetchStreams:n},c),m._setSettings(c),m},"PUBLIC").setMultipleInstances(!0)),Yr(Lp,"4.7.5",e),Yr(Lp,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="firebasestorage.googleapis.com",oy="storageBucket",R1=2*60*1e3,C1=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt extends bi{constructor(e,n,s=0){super(th(e),`Firebase Storage: ${n} (${th(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return th(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var et;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(et||(et={}));function th(i){return"storage/"+i}function rd(){const i="An unknown error occurred, please check the error payload for server response.";return new tt(et.UNKNOWN,i)}function P1(i){return new tt(et.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function k1(i){return new tt(et.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function N1(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new tt(et.UNAUTHENTICATED,i)}function D1(){return new tt(et.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function V1(i){return new tt(et.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function x1(){return new tt(et.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function O1(){return new tt(et.CANCELED,"User canceled the upload/download.")}function L1(i){return new tt(et.INVALID_URL,"Invalid URL '"+i+"'.")}function M1(i){return new tt(et.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function F1(){return new tt(et.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+oy+"' property when initializing the app?")}function U1(){return new tt(et.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function b1(){return new tt(et.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function z1(i){return new tt(et.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ih(i){return new tt(et.INVALID_ARGUMENT,i)}function ay(){return new tt(et.APP_DELETED,"The Firebase app was deleted.")}function B1(i){return new tt(et.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ra(i,e){return new tt(et.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function Go(i){throw new tt(et.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=on.makeFromUrl(e,n)}catch{return new on(e,"")}if(s.path==="")return s;throw M1(e)}static makeFromUrl(e,n){let s=null;const a="([A-Za-z0-9.\\-_]+)";function c(de){de.path.charAt(de.path.length-1)==="/"&&(de.path_=de.path_.slice(0,-1))}const d="(/(.*))?$",m=new RegExp("^gs://"+a+d,"i"),y={bucket:1,path:3};function E(de){de.path_=decodeURIComponent(de.path)}const I="v[A-Za-z0-9_]+",D=n.replace(/[.]/g,"\\."),F="(/([^?#]*).*)?$",z=new RegExp(`^https?://${D}/${I}/b/${a}/o${F}`,"i"),G={bucket:1,path:3},X=n===sy?"(?:storage.googleapis.com|storage.cloud.google.com)":n,B="([^?#]*)",ye=new RegExp(`^https?://${X}/${a}/${B}`,"i"),he=[{regex:m,indices:y,postModify:c},{regex:z,indices:G,postModify:E},{regex:ye,indices:{bucket:1,path:2},postModify:E}];for(let de=0;de<he.length;de++){const oe=he[de],le=oe.regex.exec(e);if(le){const P=le[oe.indices.bucket];let w=le[oe.indices.path];w||(w=""),s=new on(P,w),oe.postModify(s);break}}if(s==null)throw L1(e);return s}}class j1{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(i,e,n){let s=1,a=null,c=null,d=!1,m=0;function y(){return m===2}let E=!1;function I(...B){E||(E=!0,e.apply(null,B))}function D(B){a=setTimeout(()=>{a=null,i(z,y())},B)}function F(){c&&clearTimeout(c)}function z(B,...ye){if(E){F();return}if(B){F(),I.call(null,B,...ye);return}if(y()||d){F(),I.call(null,B,...ye);return}s<64&&(s*=2);let he;m===1?(m=2,he=0):he=(s+Math.random())*1e3,D(he)}let G=!1;function X(B){G||(G=!0,F(),!E&&(a!==null?(B||(m=2),clearTimeout(a),D(0)):B||(m=1)))}return D(0),c=setTimeout(()=>{d=!0,X(!0)},n),X}function q1(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H1(i){return i!==void 0}function W1(i){return typeof i=="object"&&!Array.isArray(i)}function id(i){return typeof i=="string"||i instanceof String}function vm(i){return sd()&&i instanceof Blob}function sd(){return typeof Blob<"u"}function Em(i,e,n,s){if(s<e)throw Ih(`Invalid value for '${i}'. Expected ${e} or greater.`);if(s>n)throw Ih(`Invalid value for '${i}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function od(i,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${i}`}function ly(i){const e=encodeURIComponent;let n="?";for(const s in i)if(i.hasOwnProperty(s)){const a=e(s)+"="+e(i[s]);n=n+a+"&"}return n=n.slice(0,-1),n}var Mi;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(Mi||(Mi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(i,e){const n=i>=500&&i<600,a=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return n||a||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n,s,a,c,d,m,y,E,I,D,F=!0){this.url_=e,this.method_=n,this.headers_=s,this.body_=a,this.successCodes_=c,this.additionalRetryCodes_=d,this.callback_=m,this.errorCallback_=y,this.timeout_=E,this.progressCallback_=I,this.connectionFactory_=D,this.retry=F,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((z,G)=>{this.resolve_=z,this.reject_=G,this.start_()})}start_(){const e=(s,a)=>{if(a){s(!1,new Ul(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const d=m=>{const y=m.loaded,E=m.lengthComputable?m.total:-1;this.progressCallback_!==null&&this.progressCallback_(y,E)};this.progressCallback_!==null&&c.addUploadProgressListener(d),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(d),this.pendingConnection_=null;const m=c.getErrorCode()===Mi.NO_ERROR,y=c.getStatus();if(!m||Q1(y,this.additionalRetryCodes_)&&this.retry){const I=c.getErrorCode()===Mi.ABORT;s(!1,new Ul(!1,null,I));return}const E=this.successCodes_.indexOf(y)!==-1;s(!0,new Ul(E,c))})},n=(s,a)=>{const c=this.resolve_,d=this.reject_,m=a.connection;if(a.wasSuccessCode)try{const y=this.callback_(m,m.getResponse());H1(y)?c(y):c()}catch(y){d(y)}else if(m!==null){const y=rd();y.serverResponse=m.getErrorText(),this.errorCallback_?d(this.errorCallback_(m,y)):d(y)}else if(a.canceled){const y=this.appDelete_?ay():O1();d(y)}else{const y=x1();d(y)}};this.canceled_?n(!1,new Ul(!1,null,!0)):this.backoffId_=$1(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&q1(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ul{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function G1(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function X1(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Y1(i,e){e&&(i["X-Firebase-GMPID"]=e)}function J1(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function Z1(i,e,n,s,a,c,d=!0){const m=ly(i.urlParams),y=i.url+m,E=Object.assign({},i.headers);return Y1(E,e),G1(E,n),X1(E,c),J1(E,s),new K1(y,i.method,E,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,a,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function tT(...i){const e=eT();if(e!==void 0){const n=new e;for(let s=0;s<i.length;s++)n.append(i[s]);return n.getBlob()}else{if(sd())return new Blob(i);throw new tt(et.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function nT(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(i){if(typeof atob>"u")throw z1("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class nh{constructor(e,n){this.data=e,this.contentType=n||null}}function iT(i,e){switch(i){case Qn.RAW:return new nh(uy(e));case Qn.BASE64:case Qn.BASE64URL:return new nh(cy(i,e));case Qn.DATA_URL:return new nh(oT(e),aT(e))}throw rd()}function uy(i){const e=[];for(let n=0;n<i.length;n++){let s=i.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<i.length-1&&(i.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const c=s,d=i.charCodeAt(++n);s=65536|(c&1023)<<10|d&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function sT(i){let e;try{e=decodeURIComponent(i)}catch{throw ra(Qn.DATA_URL,"Malformed data URL.")}return uy(e)}function cy(i,e){switch(i){case Qn.BASE64:{const a=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(a||c)throw ra(i,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Qn.BASE64URL:{const a=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(a||c)throw ra(i,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=rT(e)}catch(a){throw a.message.includes("polyfill")?a:ra(i,"Invalid character found")}const s=new Uint8Array(n.length);for(let a=0;a<n.length;a++)s[a]=n.charCodeAt(a);return s}class hy{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ra(Qn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=lT(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function oT(i){const e=new hy(i);return e.base64?cy(Qn.BASE64,e.rest):sT(e.rest)}function aT(i){return new hy(i).contentType}function lT(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,n){let s=0,a="";vm(e)?(this.data_=e,s=e.size,a=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,n){if(vm(this.data_)){const s=this.data_,a=nT(s,e,n);return a===null?null:new Qr(a)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new Qr(s,!0)}}static getBlob(...e){if(sd()){const n=e.map(s=>s instanceof Qr?s.data_:s);return new Qr(tT.apply(null,n))}else{const n=e.map(d=>id(d)?iT(Qn.RAW,d).data:d.data_);let s=0;n.forEach(d=>{s+=d.byteLength});const a=new Uint8Array(s);let c=0;return n.forEach(d=>{for(let m=0;m<d.length;m++)a[c++]=d[m]}),new Qr(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(i){let e;try{e=JSON.parse(i)}catch{return null}return W1(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function cT(i,e){const n=e.split("/").filter(s=>s.length>0).join("/");return i.length===0?n:i+"/"+n}function fy(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(i,e){return e}class jt{constructor(e,n,s,a){this.server=e,this.local=n||e,this.writable=!!s,this.xform=a||hT}}let bl=null;function dT(i){return!id(i)||i.length<2?i:fy(i)}function py(){if(bl)return bl;const i=[];i.push(new jt("bucket")),i.push(new jt("generation")),i.push(new jt("metageneration")),i.push(new jt("name","fullPath",!0));function e(c,d){return dT(d)}const n=new jt("name");n.xform=e,i.push(n);function s(c,d){return d!==void 0?Number(d):d}const a=new jt("size");return a.xform=s,i.push(a),i.push(new jt("timeCreated")),i.push(new jt("updated")),i.push(new jt("md5Hash",null,!0)),i.push(new jt("cacheControl",null,!0)),i.push(new jt("contentDisposition",null,!0)),i.push(new jt("contentEncoding",null,!0)),i.push(new jt("contentLanguage",null,!0)),i.push(new jt("contentType",null,!0)),i.push(new jt("metadata","customMetadata",!0)),bl=i,bl}function fT(i,e){function n(){const s=i.bucket,a=i.fullPath,c=new on(s,a);return e._makeStorageReference(c)}Object.defineProperty(i,"ref",{get:n})}function pT(i,e,n){const s={};s.type="file";const a=n.length;for(let c=0;c<a;c++){const d=n[c];s[d.local]=d.xform(s,e[d.server])}return fT(s,i),s}function my(i,e,n){const s=dy(e);return s===null?null:pT(i,s,n)}function mT(i,e,n,s){const a=dy(e);if(a===null||!id(a.downloadTokens))return null;const c=a.downloadTokens;if(c.length===0)return null;const d=encodeURIComponent;return c.split(",").map(E=>{const I=i.bucket,D=i.fullPath,F="/b/"+d(I)+"/o/"+d(D),z=od(F,n,s),G=ly({alt:"media",token:E});return z+G})[0]}function gT(i,e){const n={},s=e.length;for(let a=0;a<s;a++){const c=e[a];c.writable&&(n[c.server]=i[c.local])}return JSON.stringify(n)}class gy{constructor(e,n,s,a){this.url=e,this.method=n,this.handler=s,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yy(i){if(!i)throw rd()}function yT(i,e){function n(s,a){const c=my(i,a,e);return yy(c!==null),c}return n}function _T(i,e){function n(s,a){const c=my(i,a,e);return yy(c!==null),mT(c,a,i.host,i._protocol)}return n}function _y(i){function e(n,s){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=D1():a=N1():n.getStatus()===402?a=k1(i.bucket):n.getStatus()===403?a=V1(i.path):a=s,a.status=n.getStatus(),a.serverResponse=s.serverResponse,a}return e}function vT(i){const e=_y(i);function n(s,a){let c=e(s,a);return s.getStatus()===404&&(c=P1(i.path)),c.serverResponse=a.serverResponse,c}return n}function ET(i,e,n){const s=e.fullServerUrl(),a=od(s,i.host,i._protocol),c="GET",d=i.maxOperationRetryTime,m=new gy(a,c,_T(i,n),d);return m.errorHandler=vT(e),m}function wT(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function TT(i,e,n){const s=Object.assign({},n);return s.fullPath=i.path,s.size=e.size(),s.contentType||(s.contentType=wT(null,e)),s}function IT(i,e,n,s,a){const c=e.bucketOnlyServerUrl(),d={"X-Goog-Upload-Protocol":"multipart"};function m(){let he="";for(let de=0;de<2;de++)he=he+Math.random().toString().slice(2);return he}const y=m();d["Content-Type"]="multipart/related; boundary="+y;const E=TT(e,s,a),I=gT(E,n),D="--"+y+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+I+`\r
--`+y+`\r
Content-Type: `+E.contentType+`\r
\r
`,F=`\r
--`+y+"--",z=Qr.getBlob(D,s,F);if(z===null)throw U1();const G={name:E.fullPath},X=od(c,i.host,i._protocol),B="POST",ye=i.maxUploadRetryTime,ge=new gy(X,B,yT(i,n),ye);return ge.urlParams=G,ge.headers=d,ge.body=z.uploadData(),ge.errorHandler=_y(e),ge}class ST{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Mi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Mi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Mi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,a){if(this.sent_)throw Go("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Go("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Go("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Go("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Go("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class AT extends ST{initXhr(){this.xhr_.responseType="text"}}function vy(){return new AT}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e,n){this._service=e,n instanceof on?this._location=n:this._location=on.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ui(e,n)}get root(){const e=new on(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return fy(this._location.path)}get storage(){return this._service}get parent(){const e=uT(this._location.path);if(e===null)return null;const n=new on(this._location.bucket,e);return new Ui(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw B1(e)}}function RT(i,e,n){i._throwIfRoot("uploadBytes");const s=IT(i.storage,i._location,py(),new Qr(e,!0),n);return i.storage.makeRequestWithTokens(s,vy).then(a=>({metadata:a,ref:i}))}function CT(i){i._throwIfRoot("getDownloadURL");const e=ET(i.storage,i._location,py());return i.storage.makeRequestWithTokens(e,vy).then(n=>{if(n===null)throw b1();return n})}function PT(i,e){const n=cT(i._location.path,e),s=new on(i._location.bucket,n);return new Ui(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(i){return/^[A-Za-z]+:\/\//.test(i)}function NT(i,e){return new Ui(i,e)}function Ey(i,e){if(i instanceof ad){const n=i;if(n._bucket==null)throw F1();const s=new Ui(n,n._bucket);return e!=null?Ey(s,e):s}else return e!==void 0?PT(i,e):i}function DT(i,e){if(e&&kT(e)){if(i instanceof ad)return NT(i,e);throw Ih("To use ref(service, url), the first argument must be a Storage instance.")}else return Ey(i,e)}function wm(i,e){const n=e==null?void 0:e[oy];return n==null?null:on.makeFromBucketSpec(n,i)}function VT(i,e,n,s={}){i.host=`${e}:${n}`,i._protocol="http";const{mockUserToken:a}=s;a&&(i._overrideAuthToken=typeof a=="string"?a:km(a,i.app.options.projectId))}class ad{constructor(e,n,s,a,c){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=a,this._firebaseVersion=c,this._bucket=null,this._host=sy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=R1,this._maxUploadRetryTime=C1,this._requests=new Set,a!=null?this._bucket=on.makeFromBucketSpec(a,this._host):this._bucket=wm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=on.makeFromBucketSpec(this._url,e):this._bucket=wm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Em("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Em("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ui(this,e)}_makeRequest(e,n,s,a,c=!0){if(this._deleted)return new j1(ay());{const d=Z1(e,this._appId,s,a,n,this._firebaseVersion,c);return this._requests.add(d),d.getPromise().then(()=>this._requests.delete(d),()=>this._requests.delete(d)),d}}async makeRequestWithTokens(e,n){const[s,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,a).getPromise()}}const Tm="@firebase/storage",Im="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wy="storage";function xT(i,e,n){return i=_r(i),RT(i,e,n)}function OT(i){return i=_r(i),CT(i)}function LT(i,e){return i=_r(i),DT(i,e)}function MT(i=Fm(),e){i=_r(i);const s=Om(i,wy).getImmediate({identifier:e}),a=Cm("storage");return a&&FT(s,...a),s}function FT(i,e,n,s={}){VT(i,e,n,s)}function UT(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),a=i.getProvider("app-check-internal");return new ad(n,s,a,e,Lm)}function bT(){ia(new Bs(wy,UT,"PUBLIC").setMultipleInstances(!0)),Yr(Tm,Im,""),Yr(Tm,Im,"esm2017")}bT();const zT="_container_bwnkz_3",BT="_form_bwnkz_17",jT="_nfcButton_bwnkz_41",$T="_scanButton_bwnkz_41",qT="_selfieButton_bwnkz_41",HT="_submitButton_bwnkz_41",WT="_scannerContainer_bwnkz_67",QT="_scanner_bwnkz_67",KT="_modalOverlay_bwnkz_97",GT="_modalContent_bwnkz_125",XT="_status_bwnkz_149",YT="_statusWarning_bwnkz_167",JT="_statusInfo_bwnkz_181",ZT="_statusSuccess_bwnkz_195",eI="_statusError_bwnkz_209",tI="_pulse_bwnkz_1",yn={container:zT,form:BT,nfcButton:jT,scanButton:$T,selfieButton:qT,submitButton:HT,scannerContainer:WT,scanner:QT,modalOverlay:KT,modalContent:GT,status:XT,statusWarning:YT,statusInfo:JT,statusSuccess:ZT,statusError:eI,"animate-pulse":"_animate-pulse_bwnkz_247",pulse:tI},nI={apiKey:"AIzaSyC8tDVbDIrKuylsyF3rbDSSPlzsEHXqZIs",authDomain:"online-attendance-21f95.firebaseapp.com",databaseURL:"https://online-attendance-21f95-default-rtdb.firebaseio.com",projectId:"online-attendance-21f95",storageBucket:"online-attendance-21f95.appspot.com",messagingSenderId:"756223518392",appId:"1:756223518392:web:5e8d28c78f7eefb8be764d"},Ty=Mm(nI),Sm=s1(Ty),rI=MT(Ty),iI=({message:i,type:e,isProcessing:n})=>{if(!i)return null;const s=()=>{switch(e){case"warning":return yn.statusWarning;case"error":return yn.statusError;case"success":return yn.statusSuccess;default:return yn.statusInfo}};return ze.jsx("div",{className:yn.modalOverlay,children:ze.jsx("div",{className:yn.modalContent,children:ze.jsx("div",{className:`${yn.status} ${s()} ${n?yn["animate-pulse"]:""}`,children:i})})})},sI=()=>{const[i,e]=gr.useState({studentName:"",email:"",course:"",campus:"",studentId:""}),[n,s]=gr.useState(null),[a,c]=gr.useState(!1),[d,m]=gr.useState(""),[y,E]=gr.useState(null),[I,D]=gr.useState("info"),F=gr.useRef(null),z=(oe,le="info")=>{m(oe),D(le)};gr.useEffect(()=>()=>{y&&y.abort()},[y]);const G=oe=>{const le=oe.target.files[0];s(le)},X=async()=>{if(!n)return null;m("Uploading selfie...");const oe=i.email.replace(/[@.]/g,"_"),le=LT(rI,`users/${oe}/profile/${n.name}`),P=await xT(le,n);return await OT(P.ref)},B=async()=>{if(!("NDEFReader"in window))throw new Error("NFC not supported on this device");try{c(!0),m("Waiting for NFC tag...");const oe=new NDEFReader;return E(oe),await oe.scan(),new Promise((le,P)=>{const w=async({serialNumber:A})=>{try{if(m("Checking NFC authorization..."),!await ge(A)){P(new Error("Unauthorized NFC tag"));return}m("Uploading data...");const N=await X(),V={...i,nfcSerialNumber:A,selfieUrl:N,createdAt:A1()};m("Saving to database...");const S=await T1(i1(Sm,"RegisteredStudent"),V);m("Writing to NFC tag...");try{await oe.write({records:[{recordType:"text",data:new TextEncoder().encode(S.id)}]}),m("Verifying NFC write..."),await ye(S.id,oe)}catch(Ge){console.error("NFC Write Error:",Ge),m("Attempting alternative write method...");try{await navigator.nfc.push({type:"NDEF",records:[{type:"text/plain",payload:S.id}]})}catch(gt){console.error("Fallback NFC Write Error:",gt),m("NFC write failed, but registration saved")}}oe.addEventListener("reading",w,{once:!0}),le(S.id)}catch(C){oe.removeEventListener("reading",w),P(C)}};oe.addEventListener("reading",w,{once:!0})})}catch(oe){throw z(oe.message,"error"),oe}},ye=async(oe,le)=>new Promise((P,w)=>{const A=setTimeout(()=>{w(new Error("Verification timeout"))},5e3);le.addEventListener("reading",({message:C})=>{clearTimeout(A),C.records.some(V=>V.recordType==="text"&&new TextDecoder().decode(V.data)===oe)?P():w(new Error("NFC write verification failed"))},{once:!0})}),ge=async oe=>{try{const le=Kg(Sm,"Toregistered",oe);return(await E1(le)).exists()}catch(le){return console.error("NFC Authorization Check Error:",le),!1}},he=()=>{e({studentName:"",email:"",course:"",campus:"",studentId:""}),s(null),m(""),F.current&&(F.current.value="")},de=async oe=>{if(oe.preventDefault(),!("NDEFReader"in window)){z("NFC is not supported on this device","warning");return}if(window.confirm("Approach NFC tag to complete registration"))try{const le=await B();z("Registration completed successfully!","success"),setTimeout(()=>{z(""),he()},3e3)}catch(le){console.error("Registration Error:",le),z(`Registration failed: ${le.message}`,"error")}finally{c(!1),y&&(y.abort(),E(null))}};return ze.jsxs("div",{className:yn.container,children:[ze.jsx("h1",{children:"Student Registration"}),(!("NDEFReader"in window)||d)&&ze.jsx(iI,{message:"NDEFReader"in window?d:"NFC is not supported on this device",type:"NDEFReader"in window?I:"warning",isProcessing:a}),ze.jsxs("form",{onSubmit:de,className:yn.form,children:[ze.jsx("input",{type:"text",placeholder:"Student Name",value:i.studentName,onChange:oe=>e({...i,studentName:oe.target.value}),required:!0,disabled:a}),ze.jsx("input",{type:"email",placeholder:"Email",value:i.email,onChange:oe=>e({...i,email:oe.target.value}),required:!0,disabled:a}),ze.jsx("input",{type:"text",placeholder:"Course",value:i.course,onChange:oe=>e({...i,course:oe.target.value}),required:!0,disabled:a}),ze.jsxs("select",{value:i.campus,onChange:oe=>e({...i,campus:oe.target.value}),required:!0,disabled:a,children:[ze.jsx("option",{value:"",children:"Select Campus"}),ze.jsx("option",{value:"Main",children:"Main Campus"}),ze.jsx("option",{value:"North",children:"North Campus"}),ze.jsx("option",{value:"Online",children:"Online Campus"})]}),ze.jsx("input",{type:"text",placeholder:"Student ID",value:i.studentId,onChange:oe=>e({...i,studentId:oe.target.value}),required:!0,disabled:a}),n?ze.jsxs("p",{children:["Selfie Captured: ",n.name]}):ze.jsxs(ze.Fragment,{children:[ze.jsx("input",{type:"file",ref:F,onChange:G,accept:"image/*",capture:"user",style:{display:"none"},disabled:a}),ze.jsx("button",{type:"button",onClick:()=>F.current.click(),className:yn.selfieButton,disabled:a,children:"Take Selfie"})]}),ze.jsx("button",{type:"submit",className:`${yn.submitButton} ${a?"animate-pulse":""}`,disabled:!i.studentId||!n||a||!("NDEFReader"in window),children:a?"Processing...":"Complete Registration with NFC"})]})]})};function oI(){return ze.jsx(ze.Fragment,{children:ze.jsx(sI,{})})}O_.createRoot(document.getElementById("root")).render(ze.jsx(gr.StrictMode,{children:ze.jsx(oI,{})}));
