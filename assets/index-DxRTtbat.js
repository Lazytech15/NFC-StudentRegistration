function w2(s,e){for(var n=0;n<e.length;n++){const l=e[n];if(typeof l!="string"&&!Array.isArray(l)){for(const h in l)if(h!=="default"&&!(h in s)){const g=Object.getOwnPropertyDescriptor(l,h);g&&Object.defineProperty(s,h,g.get?g:{enumerable:!0,get:()=>l[h]})}}}return Object.freeze(Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))l(h);new MutationObserver(h=>{for(const g of h)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function n(h){const g={};return h.integrity&&(g.integrity=h.integrity),h.referrerPolicy&&(g.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?g.credentials="include":h.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(h){if(h.ep)return;h.ep=!0;const g=n(h);fetch(h.href,g)}})();var bu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x2(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Oh={exports:{}},ml={},Mh={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K1;function E2(){if(K1)return _t;K1=1;var s=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),k=Symbol.iterator;function q($){return $===null||typeof $!="object"?null:($=k&&$[k]||$["@@iterator"],typeof $=="function"?$:null)}var te={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fe=Object.assign,ce={};function oe($,he,je){this.props=$,this.context=he,this.refs=ce,this.updater=je||te}oe.prototype.isReactComponent={},oe.prototype.setState=function($,he){if(typeof $!="object"&&typeof $!="function"&&$!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,$,he,"setState")},oe.prototype.forceUpdate=function($){this.updater.enqueueForceUpdate(this,$,"forceUpdate")};function Ue(){}Ue.prototype=oe.prototype;function De($,he,je){this.props=$,this.context=he,this.refs=ce,this.updater=je||te}var ye=De.prototype=new Ue;ye.constructor=De,fe(ye,oe.prototype),ye.isPureReactComponent=!0;var Re=Array.isArray,At=Object.prototype.hasOwnProperty,Le={current:null},U={key:!0,ref:!0,__self:!0,__source:!0};function F($,he,je){var qe,dt={},ve=null,vt=null;if(he!=null)for(qe in he.ref!==void 0&&(vt=he.ref),he.key!==void 0&&(ve=""+he.key),he)At.call(he,qe)&&!U.hasOwnProperty(qe)&&(dt[qe]=he[qe]);var nt=arguments.length-2;if(nt===1)dt.children=je;else if(1<nt){for(var kt=Array(nt),fn=0;fn<nt;fn++)kt[fn]=arguments[fn+2];dt.children=kt}if($&&$.defaultProps)for(qe in nt=$.defaultProps,nt)dt[qe]===void 0&&(dt[qe]=nt[qe]);return{$$typeof:s,type:$,key:ve,ref:vt,props:dt,_owner:Le.current}}function P($,he){return{$$typeof:s,type:$.type,key:he,ref:$.ref,props:$.props,_owner:$._owner}}function W($){return typeof $=="object"&&$!==null&&$.$$typeof===s}function Y($){var he={"=":"=0",":":"=2"};return"$"+$.replace(/[=:]/g,function(je){return he[je]})}var H=/\/+/g;function z($,he){return typeof $=="object"&&$!==null&&$.key!=null?Y(""+$.key):he.toString(36)}function ot($,he,je,qe,dt){var ve=typeof $;(ve==="undefined"||ve==="boolean")&&($=null);var vt=!1;if($===null)vt=!0;else switch(ve){case"string":case"number":vt=!0;break;case"object":switch($.$$typeof){case s:case e:vt=!0}}if(vt)return vt=$,dt=dt(vt),$=qe===""?"."+z(vt,0):qe,Re(dt)?(je="",$!=null&&(je=$.replace(H,"$&/")+"/"),ot(dt,he,je,"",function(fn){return fn})):dt!=null&&(W(dt)&&(dt=P(dt,je+(!dt.key||vt&&vt.key===dt.key?"":(""+dt.key).replace(H,"$&/")+"/")+$)),he.push(dt)),1;if(vt=0,qe=qe===""?".":qe+":",Re($))for(var nt=0;nt<$.length;nt++){ve=$[nt];var kt=qe+z(ve,nt);vt+=ot(ve,he,je,kt,dt)}else if(kt=q($),typeof kt=="function")for($=kt.call($),nt=0;!(ve=$.next()).done;)ve=ve.value,kt=qe+z(ve,nt++),vt+=ot(ve,he,je,kt,dt);else if(ve==="object")throw he=String($),Error("Objects are not valid as a React child (found: "+(he==="[object Object]"?"object with keys {"+Object.keys($).join(", ")+"}":he)+"). If you meant to render a collection of children, use an array instead.");return vt}function ae($,he,je){if($==null)return $;var qe=[],dt=0;return ot($,qe,"","",function(ve){return he.call(je,ve,dt++)}),qe}function gt($){if($._status===-1){var he=$._result;he=he(),he.then(function(je){($._status===0||$._status===-1)&&($._status=1,$._result=je)},function(je){($._status===0||$._status===-1)&&($._status=2,$._result=je)}),$._status===-1&&($._status=0,$._result=he)}if($._status===1)return $._result.default;throw $._result}var Oe={current:null},Te={transition:null},ze={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:Te,ReactCurrentOwner:Le};function be(){throw Error("act(...) is not supported in production builds of React.")}return _t.Children={map:ae,forEach:function($,he,je){ae($,function(){he.apply(this,arguments)},je)},count:function($){var he=0;return ae($,function(){he++}),he},toArray:function($){return ae($,function(he){return he})||[]},only:function($){if(!W($))throw Error("React.Children.only expected to receive a single React element child.");return $}},_t.Component=oe,_t.Fragment=n,_t.Profiler=h,_t.PureComponent=De,_t.StrictMode=l,_t.Suspense=S,_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ze,_t.act=be,_t.cloneElement=function($,he,je){if($==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+$+".");var qe=fe({},$.props),dt=$.key,ve=$.ref,vt=$._owner;if(he!=null){if(he.ref!==void 0&&(ve=he.ref,vt=Le.current),he.key!==void 0&&(dt=""+he.key),$.type&&$.type.defaultProps)var nt=$.type.defaultProps;for(kt in he)At.call(he,kt)&&!U.hasOwnProperty(kt)&&(qe[kt]=he[kt]===void 0&&nt!==void 0?nt[kt]:he[kt])}var kt=arguments.length-2;if(kt===1)qe.children=je;else if(1<kt){nt=Array(kt);for(var fn=0;fn<kt;fn++)nt[fn]=arguments[fn+2];qe.children=nt}return{$$typeof:s,type:$.type,key:dt,ref:ve,props:qe,_owner:vt}},_t.createContext=function($){return $={$$typeof:x,_currentValue:$,_currentValue2:$,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},$.Provider={$$typeof:g,_context:$},$.Consumer=$},_t.createElement=F,_t.createFactory=function($){var he=F.bind(null,$);return he.type=$,he},_t.createRef=function(){return{current:null}},_t.forwardRef=function($){return{$$typeof:C,render:$}},_t.isValidElement=W,_t.lazy=function($){return{$$typeof:O,_payload:{_status:-1,_result:$},_init:gt}},_t.memo=function($,he){return{$$typeof:A,type:$,compare:he===void 0?null:he}},_t.startTransition=function($){var he=Te.transition;Te.transition={};try{$()}finally{Te.transition=he}},_t.unstable_act=be,_t.useCallback=function($,he){return Oe.current.useCallback($,he)},_t.useContext=function($){return Oe.current.useContext($)},_t.useDebugValue=function(){},_t.useDeferredValue=function($){return Oe.current.useDeferredValue($)},_t.useEffect=function($,he){return Oe.current.useEffect($,he)},_t.useId=function(){return Oe.current.useId()},_t.useImperativeHandle=function($,he,je){return Oe.current.useImperativeHandle($,he,je)},_t.useInsertionEffect=function($,he){return Oe.current.useInsertionEffect($,he)},_t.useLayoutEffect=function($,he){return Oe.current.useLayoutEffect($,he)},_t.useMemo=function($,he){return Oe.current.useMemo($,he)},_t.useReducer=function($,he,je){return Oe.current.useReducer($,he,je)},_t.useRef=function($){return Oe.current.useRef($)},_t.useState=function($){return Oe.current.useState($)},_t.useSyncExternalStore=function($,he,je){return Oe.current.useSyncExternalStore($,he,je)},_t.useTransition=function(){return Oe.current.useTransition()},_t.version="18.3.1",_t}var Z1;function mf(){return Z1||(Z1=1,Mh.exports=E2()),Mh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $1;function _2(){if($1)return ml;$1=1;var s=mf(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),l=Object.prototype.hasOwnProperty,h=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function x(C,S,A){var O,k={},q=null,te=null;A!==void 0&&(q=""+A),S.key!==void 0&&(q=""+S.key),S.ref!==void 0&&(te=S.ref);for(O in S)l.call(S,O)&&!g.hasOwnProperty(O)&&(k[O]=S[O]);if(C&&C.defaultProps)for(O in S=C.defaultProps,S)k[O]===void 0&&(k[O]=S[O]);return{$$typeof:e,type:C,key:q,ref:te,props:k,_owner:h.current}}return ml.Fragment=n,ml.jsx=x,ml.jsxs=x,ml}var J1;function A2(){return J1||(J1=1,Oh.exports=_2()),Oh.exports}var We=A2(),Xr=mf(),Ou={},Ph={exports:{}},oi={},kh={exports:{}},Lh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function C2(){return e0||(e0=1,function(s){function e(Te,ze){var be=Te.length;Te.push(ze);e:for(;0<be;){var $=be-1>>>1,he=Te[$];if(0<h(he,ze))Te[$]=ze,Te[be]=he,be=$;else break e}}function n(Te){return Te.length===0?null:Te[0]}function l(Te){if(Te.length===0)return null;var ze=Te[0],be=Te.pop();if(be!==ze){Te[0]=be;e:for(var $=0,he=Te.length,je=he>>>1;$<je;){var qe=2*($+1)-1,dt=Te[qe],ve=qe+1,vt=Te[ve];if(0>h(dt,be))ve<he&&0>h(vt,dt)?(Te[$]=vt,Te[ve]=be,$=ve):(Te[$]=dt,Te[qe]=be,$=qe);else if(ve<he&&0>h(vt,be))Te[$]=vt,Te[ve]=be,$=ve;else break e}}return ze}function h(Te,ze){var be=Te.sortIndex-ze.sortIndex;return be!==0?be:Te.id-ze.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;s.unstable_now=function(){return g.now()}}else{var x=Date,C=x.now();s.unstable_now=function(){return x.now()-C}}var S=[],A=[],O=1,k=null,q=3,te=!1,fe=!1,ce=!1,oe=typeof setTimeout=="function"?setTimeout:null,Ue=typeof clearTimeout=="function"?clearTimeout:null,De=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ye(Te){for(var ze=n(A);ze!==null;){if(ze.callback===null)l(A);else if(ze.startTime<=Te)l(A),ze.sortIndex=ze.expirationTime,e(S,ze);else break;ze=n(A)}}function Re(Te){if(ce=!1,ye(Te),!fe)if(n(S)!==null)fe=!0,gt(At);else{var ze=n(A);ze!==null&&Oe(Re,ze.startTime-Te)}}function At(Te,ze){fe=!1,ce&&(ce=!1,Ue(F),F=-1),te=!0;var be=q;try{for(ye(ze),k=n(S);k!==null&&(!(k.expirationTime>ze)||Te&&!Y());){var $=k.callback;if(typeof $=="function"){k.callback=null,q=k.priorityLevel;var he=$(k.expirationTime<=ze);ze=s.unstable_now(),typeof he=="function"?k.callback=he:k===n(S)&&l(S),ye(ze)}else l(S);k=n(S)}if(k!==null)var je=!0;else{var qe=n(A);qe!==null&&Oe(Re,qe.startTime-ze),je=!1}return je}finally{k=null,q=be,te=!1}}var Le=!1,U=null,F=-1,P=5,W=-1;function Y(){return!(s.unstable_now()-W<P)}function H(){if(U!==null){var Te=s.unstable_now();W=Te;var ze=!0;try{ze=U(!0,Te)}finally{ze?z():(Le=!1,U=null)}}else Le=!1}var z;if(typeof De=="function")z=function(){De(H)};else if(typeof MessageChannel<"u"){var ot=new MessageChannel,ae=ot.port2;ot.port1.onmessage=H,z=function(){ae.postMessage(null)}}else z=function(){oe(H,0)};function gt(Te){U=Te,Le||(Le=!0,z())}function Oe(Te,ze){F=oe(function(){Te(s.unstable_now())},ze)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(Te){Te.callback=null},s.unstable_continueExecution=function(){fe||te||(fe=!0,gt(At))},s.unstable_forceFrameRate=function(Te){0>Te||125<Te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<Te?Math.floor(1e3/Te):5},s.unstable_getCurrentPriorityLevel=function(){return q},s.unstable_getFirstCallbackNode=function(){return n(S)},s.unstable_next=function(Te){switch(q){case 1:case 2:case 3:var ze=3;break;default:ze=q}var be=q;q=ze;try{return Te()}finally{q=be}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(Te,ze){switch(Te){case 1:case 2:case 3:case 4:case 5:break;default:Te=3}var be=q;q=Te;try{return ze()}finally{q=be}},s.unstable_scheduleCallback=function(Te,ze,be){var $=s.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?$+be:$):be=$,Te){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=be+he,Te={id:O++,callback:ze,priorityLevel:Te,startTime:be,expirationTime:he,sortIndex:-1},be>$?(Te.sortIndex=be,e(A,Te),n(S)===null&&Te===n(A)&&(ce?(Ue(F),F=-1):ce=!0,Oe(Re,be-$))):(Te.sortIndex=he,e(S,Te),fe||te||(fe=!0,gt(At))),Te},s.unstable_shouldYield=Y,s.unstable_wrapCallback=function(Te){var ze=q;return function(){var be=q;q=ze;try{return Te.apply(this,arguments)}finally{q=be}}}}(Lh)),Lh}var t0;function I2(){return t0||(t0=1,kh.exports=C2()),kh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n0;function T2(){if(n0)return oi;n0=1;var s=mf(),e=I2();function n(r){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+r,d=1;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d]);return"Minified React error #"+r+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=new Set,h={};function g(r,a){x(r,a),x(r+"Capture",a)}function x(r,a){for(h[r]=a,r=0;r<a.length;r++)l.add(a[r])}var C=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),S=Object.prototype.hasOwnProperty,A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O={},k={};function q(r){return S.call(k,r)?!0:S.call(O,r)?!1:A.test(r)?k[r]=!0:(O[r]=!0,!1)}function te(r,a,d,y){if(d!==null&&d.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return y?!1:d!==null?!d.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function fe(r,a,d,y){if(a===null||typeof a>"u"||te(r,a,d,y))return!0;if(y)return!1;if(d!==null)switch(d.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function ce(r,a,d,y,_,T,b){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=y,this.attributeNamespace=_,this.mustUseProperty=d,this.propertyName=r,this.type=a,this.sanitizeURL=T,this.removeEmptyString=b}var oe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){oe[r]=new ce(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var a=r[0];oe[a]=new ce(a,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){oe[r]=new ce(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){oe[r]=new ce(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){oe[r]=new ce(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){oe[r]=new ce(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){oe[r]=new ce(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){oe[r]=new ce(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){oe[r]=new ce(r,5,!1,r.toLowerCase(),null,!1,!1)});var Ue=/[\-:]([a-z])/g;function De(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var a=r.replace(Ue,De);oe[a]=new ce(a,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var a=r.replace(Ue,De);oe[a]=new ce(a,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var a=r.replace(Ue,De);oe[a]=new ce(a,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){oe[r]=new ce(r,1,!1,r.toLowerCase(),null,!1,!1)}),oe.xlinkHref=new ce("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){oe[r]=new ce(r,1,!1,r.toLowerCase(),null,!0,!0)});function ye(r,a,d,y){var _=oe.hasOwnProperty(a)?oe[a]:null;(_!==null?_.type!==0:y||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(fe(a,d,_,y)&&(d=null),y||_===null?q(a)&&(d===null?r.removeAttribute(a):r.setAttribute(a,""+d)):_.mustUseProperty?r[_.propertyName]=d===null?_.type===3?!1:"":d:(a=_.attributeName,y=_.attributeNamespace,d===null?r.removeAttribute(a):(_=_.type,d=_===3||_===4&&d===!0?"":""+d,y?r.setAttributeNS(y,a,d):r.setAttribute(a,d))))}var Re=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,At=Symbol.for("react.element"),Le=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),Y=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),ot=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),Te=Symbol.iterator;function ze(r){return r===null||typeof r!="object"?null:(r=Te&&r[Te]||r["@@iterator"],typeof r=="function"?r:null)}var be=Object.assign,$;function he(r){if($===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);$=a&&a[1]||""}return`
`+$+r}var je=!1;function qe(r,a){if(!r||je)return"";je=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(le){var y=le}Reflect.construct(r,[],a)}else{try{a.call()}catch(le){y=le}r.call(a.prototype)}else{try{throw Error()}catch(le){y=le}r()}}catch(le){if(le&&y&&typeof le.stack=="string"){for(var _=le.stack.split(`
`),T=y.stack.split(`
`),b=_.length-1,j=T.length-1;1<=b&&0<=j&&_[b]!==T[j];)j--;for(;1<=b&&0<=j;b--,j--)if(_[b]!==T[j]){if(b!==1||j!==1)do if(b--,j--,0>j||_[b]!==T[j]){var X=`
`+_[b].replace(" at new "," at ");return r.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",r.displayName)),X}while(1<=b&&0<=j);break}}}finally{je=!1,Error.prepareStackTrace=d}return(r=r?r.displayName||r.name:"")?he(r):""}function dt(r){switch(r.tag){case 5:return he(r.type);case 16:return he("Lazy");case 13:return he("Suspense");case 19:return he("SuspenseList");case 0:case 2:case 15:return r=qe(r.type,!1),r;case 11:return r=qe(r.type.render,!1),r;case 1:return r=qe(r.type,!0),r;default:return""}}function ve(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case U:return"Fragment";case Le:return"Portal";case P:return"Profiler";case F:return"StrictMode";case z:return"Suspense";case ot:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case Y:return(r.displayName||"Context")+".Consumer";case W:return(r._context.displayName||"Context")+".Provider";case H:var a=r.render;return r=r.displayName,r||(r=a.displayName||a.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ae:return a=r.displayName||null,a!==null?a:ve(r.type)||"Memo";case gt:a=r._payload,r=r._init;try{return ve(r(a))}catch{}}return null}function vt(r){var a=r.type;switch(r.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=a.render,r=r.displayName||r.name||"",a.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ve(a);case 8:return a===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function nt(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function kt(r){var a=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function fn(r){var a=kt(r)?"checked":"value",d=Object.getOwnPropertyDescriptor(r.constructor.prototype,a),y=""+r[a];if(!r.hasOwnProperty(a)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var _=d.get,T=d.set;return Object.defineProperty(r,a,{configurable:!0,get:function(){return _.call(this)},set:function(b){y=""+b,T.call(this,b)}}),Object.defineProperty(r,a,{enumerable:d.enumerable}),{getValue:function(){return y},setValue:function(b){y=""+b},stopTracking:function(){r._valueTracker=null,delete r[a]}}}}function dn(r){r._valueTracker||(r._valueTracker=fn(r))}function Li(r){if(!r)return!1;var a=r._valueTracker;if(!a)return!0;var d=a.getValue(),y="";return r&&(y=kt(r)?r.checked?"true":"false":r.value),r=y,r!==d?(a.setValue(r),!0):!1}function pt(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function Qr(r,a){var d=a.checked;return be({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:d??r._wrapperState.initialChecked})}function ur(r,a){var d=a.defaultValue==null?"":a.defaultValue,y=a.checked!=null?a.checked:a.defaultChecked;d=nt(a.value!=null?a.value:d),r._wrapperState={initialChecked:y,initialValue:d,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Bi(r,a){a=a.checked,a!=null&&ye(r,"checked",a,!1)}function En(r,a){Bi(r,a);var d=nt(a.value),y=a.type;if(d!=null)y==="number"?(d===0&&r.value===""||r.value!=d)&&(r.value=""+d):r.value!==""+d&&(r.value=""+d);else if(y==="submit"||y==="reset"){r.removeAttribute("value");return}a.hasOwnProperty("value")?mt(r,a.type,d):a.hasOwnProperty("defaultValue")&&mt(r,a.type,nt(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(r.defaultChecked=!!a.defaultChecked)}function Vt(r,a,d){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var y=a.type;if(!(y!=="submit"&&y!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+r._wrapperState.initialValue,d||a===r.value||(r.value=a),r.defaultValue=a}d=r.name,d!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,d!==""&&(r.name=d)}function mt(r,a,d){(a!=="number"||pt(r.ownerDocument)!==r)&&(d==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+d&&(r.defaultValue=""+d))}var qr=Array.isArray;function Pe(r,a,d,y){if(r=r.options,a){a={};for(var _=0;_<d.length;_++)a["$"+d[_]]=!0;for(d=0;d<r.length;d++)_=a.hasOwnProperty("$"+r[d].value),r[d].selected!==_&&(r[d].selected=_),_&&y&&(r[d].defaultSelected=!0)}else{for(d=""+nt(d),a=null,_=0;_<r.length;_++){if(r[_].value===d){r[_].selected=!0,y&&(r[_].defaultSelected=!0);return}a!==null||r[_].disabled||(a=r[_])}a!==null&&(a.selected=!0)}}function Zi(r,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return be({},a,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ws(r,a){var d=a.value;if(d==null){if(d=a.children,a=a.defaultValue,d!=null){if(a!=null)throw Error(n(92));if(qr(d)){if(1<d.length)throw Error(n(93));d=d[0]}a=d}a==null&&(a=""),d=a}r._wrapperState={initialValue:nt(d)}}function Ar(r,a){var d=nt(a.value),y=nt(a.defaultValue);d!=null&&(d=""+d,d!==r.value&&(r.value=d),a.defaultValue==null&&r.defaultValue!==d&&(r.defaultValue=d)),y!=null&&(r.defaultValue=""+y)}function xs(r){var a=r.textContent;a===r._wrapperState.initialValue&&a!==""&&a!==null&&(r.value=a)}function Ut(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tn(r,a){return r==null||r==="http://www.w3.org/1999/xhtml"?Ut(a):r==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var er,kn=function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,d,y,_){MSApp.execUnsafeLocalFunction(function(){return r(a,d,y,_)})}:r}(function(r,a){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=a;else{for(er=er||document.createElement("div"),er.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=er.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;a.firstChild;)r.appendChild(a.firstChild)}});function Fi(r,a){if(a){var d=r.firstChild;if(d&&d===r.lastChild&&d.nodeType===3){d.nodeValue=a;return}}r.textContent=a}var Ci={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Es=["Webkit","ms","Moz","O"];Object.keys(Ci).forEach(function(r){Es.forEach(function(a){a=a+r.charAt(0).toUpperCase()+r.substring(1),Ci[a]=Ci[r]})});function tn(r,a,d){return a==null||typeof a=="boolean"||a===""?"":d||typeof a!="number"||a===0||Ci.hasOwnProperty(r)&&Ci[r]?(""+a).trim():a+"px"}function Se(r,a){r=r.style;for(var d in a)if(a.hasOwnProperty(d)){var y=d.indexOf("--")===0,_=tn(d,a[d],y);d==="float"&&(d="cssFloat"),y?r.setProperty(d,_):r[d]=_}}var sn=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mt(r,a){if(a){if(sn[r]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,r));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function qt(r,a){if(r.indexOf("-")===-1)return typeof a.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function $i(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _s=null,ht=null,tr=null;function As(r){if(r=tl(r)){if(typeof _s!="function")throw Error(n(280));var a=r.stateNode;a&&(a=Xl(a),_s(r.stateNode,r.type,a))}}function ui(r){ht?tr?tr.push(r):tr=[r]:ht=r}function cr(){if(ht){var r=ht,a=tr;if(tr=ht=null,As(r),a)for(r=0;r<a.length;r++)As(a[r])}}function Vi(r,a){return r(a)}function vn(){}var Cr=!1;function Ji(r,a,d){if(Cr)return r(a,d);Cr=!0;try{return Vi(r,a,d)}finally{Cr=!1,(ht!==null||tr!==null)&&(vn(),cr())}}function Lt(r,a){var d=r.stateNode;if(d===null)return null;var y=Xl(d);if(y===null)return null;d=y[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(r=r.type,y=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!y;break e;default:r=!1}if(r)return null;if(d&&typeof d!="function")throw Error(n(231,a,typeof d));return d}var Ws=!1;if(C)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){Ws=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{Ws=!1}function Ui(r,a,d,y,_,T,b,j,X){var le=Array.prototype.slice.call(arguments,3);try{a.apply(d,le)}catch(we){this.onError(we)}}var Sn=!1,Kr=null,gn=!1,Me=null,es={onError:function(r){Sn=!0,Kr=r}};function ts(r,a,d,y,_,T,b,j,X){Sn=!1,Kr=null,Ui.apply(es,arguments)}function Gn(r,a,d,y,_,T,b,j,X){if(ts.apply(this,arguments),Sn){if(Sn){var le=Kr;Sn=!1,Kr=null}else throw Error(n(198));gn||(gn=!0,Me=le)}}function nr(r){var a=r,d=r;if(r.alternate)for(;a.return;)a=a.return;else{r=a;do a=r,a.flags&4098&&(d=a.return),r=a.return;while(r)}return a.tag===3?d:null}function Ii(r){if(r.tag===13){var a=r.memoizedState;if(a===null&&(r=r.alternate,r!==null&&(a=r.memoizedState)),a!==null)return a.dehydrated}return null}function Ir(r){if(nr(r)!==r)throw Error(n(188))}function Fr(r){var a=r.alternate;if(!a){if(a=nr(r),a===null)throw Error(n(188));return a!==r?null:r}for(var d=r,y=a;;){var _=d.return;if(_===null)break;var T=_.alternate;if(T===null){if(y=_.return,y!==null){d=y;continue}break}if(_.child===T.child){for(T=_.child;T;){if(T===d)return Ir(_),r;if(T===y)return Ir(_),a;T=T.sibling}throw Error(n(188))}if(d.return!==y.return)d=_,y=T;else{for(var b=!1,j=_.child;j;){if(j===d){b=!0,d=_,y=T;break}if(j===y){b=!0,y=_,d=T;break}j=j.sibling}if(!b){for(j=T.child;j;){if(j===d){b=!0,d=T,y=_;break}if(j===y){b=!0,y=T,d=_;break}j=j.sibling}if(!b)throw Error(n(189))}}if(d.alternate!==y)throw Error(n(190))}if(d.tag!==3)throw Error(n(188));return d.stateNode.current===d?r:a}function Do(r){return r=Fr(r),r!==null?Gs(r):null}function Gs(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var a=Gs(r);if(a!==null)return a;r=r.sibling}return null}var hr=e.unstable_scheduleCallback,Ln=e.unstable_cancelCallback,Xt=e.unstable_shouldYield,sa=e.unstable_requestPaint,St=e.unstable_now,Xs=e.unstable_getCurrentPriorityLevel,de=e.unstable_ImmediatePriority,ns=e.unstable_UserBlockingPriority,Rt=e.unstable_NormalPriority,Ti=e.unstable_LowPriority,oa=e.unstable_IdlePriority,Et=null,ut=null;function yt(r){if(ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Et,r,void 0,(r.current.flags&128)===128)}catch{}}var Xn=Math.clz32?Math.clz32:pn,Cs=Math.log,Ys=Math.LN2;function pn(r){return r>>>=0,r===0?32:31-(Cs(r)/Ys|0)|0}var Vr=64,Qs=4194304;function Wt(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Tr(r,a){var d=r.pendingLanes;if(d===0)return 0;var y=0,_=r.suspendedLanes,T=r.pingedLanes,b=d&268435455;if(b!==0){var j=b&~_;j!==0?y=Wt(j):(T&=b,T!==0&&(y=Wt(T)))}else b=d&~_,b!==0?y=Wt(b):T!==0&&(y=Wt(T));if(y===0)return 0;if(a!==0&&a!==y&&!(a&_)&&(_=y&-y,T=a&-a,_>=T||_===16&&(T&4194240)!==0))return a;if(y&4&&(y|=d&16),a=r.entangledLanes,a!==0)for(r=r.entanglements,a&=y;0<a;)d=31-Xn(a),_=1<<d,y|=r[d],a&=~_;return y}function Ya(r,a){switch(r){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vr(r,a){for(var d=r.suspendedLanes,y=r.pingedLanes,_=r.expirationTimes,T=r.pendingLanes;0<T;){var b=31-Xn(T),j=1<<b,X=_[b];X===-1?(!(j&d)||j&y)&&(_[b]=Ya(j,a)):X<=a&&(r.expiredLanes|=j),T&=~j}}function wt(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function mn(){var r=Vr;return Vr<<=1,!(Vr&4194240)&&(Vr=64),r}function J(r){for(var a=[],d=0;31>d;d++)a.push(r);return a}function B(r,a,d){r.pendingLanes|=a,a!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,a=31-Xn(a),r[a]=d}function Ne(r,a){var d=r.pendingLanes&~a;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=a,r.mutableReadLanes&=a,r.entangledLanes&=a,a=r.entanglements;var y=r.eventTimes;for(r=r.expirationTimes;0<d;){var _=31-Xn(d),T=1<<_;a[_]=0,y[_]=-1,r[_]=-1,d&=~T}}function Zt(r,a){var d=r.entangledLanes|=a;for(r=r.entanglements;d;){var y=31-Xn(d),_=1<<y;_&a|r[y]&a&&(r[y]|=a),d&=~_}}var it=0;function rs(r){return r&=-r,1<r?4<r?r&268435455?16:536870912:4:1}var qs,Yn,Ye,Kt,bo,Oo=!1,Zr=[],Rn=null,Ur=null,ci=null,$t=new Map,rr=new Map,Qn=[],Ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function aa(r,a){switch(r){case"focusin":case"focusout":Rn=null;break;case"dragenter":case"dragleave":Ur=null;break;case"mouseover":case"mouseout":ci=null;break;case"pointerover":case"pointerout":$t.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":rr.delete(a.pointerId)}}function Ke(r,a,d,y,_,T){return r===null||r.nativeEvent!==T?(r={blockedOn:a,domEventName:d,eventSystemFlags:y,nativeEvent:T,targetContainers:[_]},a!==null&&(a=tl(a),a!==null&&Yn(a)),r):(r.eventSystemFlags|=y,a=r.targetContainers,_!==null&&a.indexOf(_)===-1&&a.push(_),r)}function Bn(r,a,d,y,_){switch(a){case"focusin":return Rn=Ke(Rn,r,a,d,y,_),!0;case"dragenter":return Ur=Ke(Ur,r,a,d,y,_),!0;case"mouseover":return ci=Ke(ci,r,a,d,y,_),!0;case"pointerover":var T=_.pointerId;return $t.set(T,Ke($t.get(T)||null,r,a,d,y,_)),!0;case"gotpointercapture":return T=_.pointerId,rr.set(T,Ke(rr.get(T)||null,r,a,d,y,_)),!0}return!1}function la(r){var a=Lo(r.target);if(a!==null){var d=nr(a);if(d!==null){if(a=d.tag,a===13){if(a=Ii(d),a!==null){r.blockedOn=a,bo(r.priority,function(){Ye(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){r.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}r.blockedOn=null}function hi(r){if(r.blockedOn!==null)return!1;for(var a=r.targetContainers;0<a.length;){var d=Ts(r.domEventName,r.eventSystemFlags,a[0],r.nativeEvent);if(d===null){d=r.nativeEvent;var y=new d.constructor(d.type,d);li=y,d.target.dispatchEvent(y),li=null}else return a=tl(d),a!==null&&Yn(a),r.blockedOn=d,!1;a.shift()}return!0}function is(r,a,d){hi(r)&&d.delete(a)}function vi(){Oo=!1,Rn!==null&&hi(Rn)&&(Rn=null),Ur!==null&&hi(Ur)&&(Ur=null),ci!==null&&hi(ci)&&(ci=null),$t.forEach(is),rr.forEach(is)}function fi(r,a){r.blockedOn===a&&(r.blockedOn=null,Oo||(Oo=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,vi)))}function fr(r){function a(_){return fi(_,r)}if(0<Zr.length){fi(Zr[0],r);for(var d=1;d<Zr.length;d++){var y=Zr[d];y.blockedOn===r&&(y.blockedOn=null)}}for(Rn!==null&&fi(Rn,r),Ur!==null&&fi(Ur,r),ci!==null&&fi(ci,r),$t.forEach(a),rr.forEach(a),d=0;d<Qn.length;d++)y=Qn[d],y.blockedOn===r&&(y.blockedOn=null);for(;0<Qn.length&&(d=Qn[0],d.blockedOn===null);)la(d),d.blockedOn===null&&Qn.shift()}var zr=Re.ReactCurrentBatchConfig,$r=!0;function Jt(r,a,d,y){var _=it,T=zr.transition;zr.transition=null;try{it=1,zi(r,a,d,y)}finally{it=_,zr.transition=T}}function Is(r,a,d,y){var _=it,T=zr.transition;zr.transition=null;try{it=4,zi(r,a,d,y)}finally{it=_,zr.transition=T}}function zi(r,a,d,y){if($r){var _=Ts(r,a,d,y);if(_===null)Ac(r,a,y,Nn,d),aa(r,y);else if(Bn(_,r,a,d,y))y.stopPropagation();else if(aa(r,y),a&4&&-1<Ze.indexOf(r)){for(;_!==null;){var T=tl(_);if(T!==null&&qs(T),T=Ts(r,a,d,y),T===null&&Ac(r,a,y,Nn,d),T===_)break;_=T}_!==null&&y.stopPropagation()}else Ac(r,a,y,null,d)}}var Nn=null;function Ts(r,a,d,y){if(Nn=null,r=$i(y),r=Lo(r),r!==null)if(a=nr(r),a===null)r=null;else if(d=a.tag,d===13){if(r=Ii(a),r!==null)return r;r=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;r=null}else a!==r&&(r=null);return Nn=r,null}function Ks(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xs()){case de:return 1;case ns:return 4;case Rt:case Ti:return 16;case oa:return 536870912;default:return 16}default:return 16}}var Sr=null,Zs=null,Rr=null;function Mo(){if(Rr)return Rr;var r,a=Zs,d=a.length,y,_="value"in Sr?Sr.value:Sr.textContent,T=_.length;for(r=0;r<d&&a[r]===_[r];r++);var b=d-r;for(y=1;y<=b&&a[d-y]===_[T-y];y++);return Rr=_.slice(r,1<y?1-y:void 0)}function Nt(r){var a=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&a===13&&(r=13)):r=a,r===10&&(r=13),32<=r||r===13?r:0}function di(){return!0}function ss(){return!1}function nn(r){function a(d,y,_,T,b){this._reactName=d,this._targetInst=_,this.type=y,this.nativeEvent=T,this.target=b,this.currentTarget=null;for(var j in r)r.hasOwnProperty(j)&&(d=r[j],this[j]=d?d(T):T[j]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?di:ss,this.isPropagationStopped=ss,this}return be(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),a}var gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ie=nn(gi),rt=be({},gi,{view:0,detail:0}),Fn=nn(rt),ji,Si,os,vs=be({},rt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ei,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==os&&(os&&r.type==="mousemove"?(ji=r.screenX-os.screenX,Si=r.screenY-os.screenY):Si=ji=0,os=r),ji)},movementY:function(r){return"movementY"in r?r.movementY:Si}}),$s=nn(vs),Ss=be({},vs,{dataTransfer:0}),yn=nn(Ss),as=be({},rt,{relatedTarget:0}),Yt=nn(as),Rs=be({},gi,{animationName:0,elapsedTime:0,pseudoElement:0}),dr=nn(Rs),Bt=be({},gi,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),Qe=nn(Bt),ua=be({},gi,{data:0}),zt=nn(ua),Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ca={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(r){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(r):(r=ca[r])?!!a[r]:!1}function ei(){return jr}var m=be({},rt,{key:function(r){if(r.key){var a=Jr[r.key]||r.key;if(a!=="Unidentified")return a}return r.type==="keypress"?(r=Nt(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Dn[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ei,charCode:function(r){return r.type==="keypress"?Nt(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?Nt(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),I=nn(m),R=be({},vs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),L=nn(R),ee=be({},rt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ei}),ue=nn(ee),Ie=be({},gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),jt=nn(Ie),on=be({},vs,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Ct=nn(on),en=[9,13,27,32],an=C&&"CompositionEvent"in window,ln=null;C&&"documentMode"in document&&(ln=document.documentMode);var Nr=C&&"TextEvent"in window&&!ln,ir=C&&(!an||ln&&8<ln&&11>=ln),Js=" ",ha=!1;function Ul(r,a){switch(r){case"keyup":return en.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qa(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var gr=!1;function wc(r,a){switch(r){case"compositionend":return Qa(a);case"keypress":return a.which!==32?null:(ha=!0,Js);case"textInput":return r=a.data,r===Js&&ha?null:r;default:return null}}function qa(r,a){if(gr)return r==="compositionend"||!an&&Ul(r,a)?(r=Mo(),Rr=Zs=Sr=null,gr=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return ir&&a.locale!=="ko"?null:a.data;default:return null}}var Po={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function It(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a==="input"?!!Po[r.type]:a==="textarea"}function ko(r,a,d,y){ui(y),a=Hl(a,"onChange"),0<a.length&&(d=new ie("onChange","change",null,d,y),r.push({event:d,listeners:a}))}var N=null,t=null;function i(r){fd(r,0)}function o(r){var a=ga(r);if(Li(a))return r}function u(r,a){if(r==="change")return a}var c=!1;if(C){var f;if(C){var p="oninput"in document;if(!p){var w=document.createElement("div");w.setAttribute("oninput","return;"),p=typeof w.oninput=="function"}f=p}else f=!1;c=f&&(!document.documentMode||9<document.documentMode)}function E(){N&&(N.detachEvent("onpropertychange",v),t=N=null)}function v(r){if(r.propertyName==="value"&&o(t)){var a=[];ko(a,t,r,$i(r)),Ji(i,a)}}function D(r,a,d){r==="focusin"?(E(),N=a,t=d,N.attachEvent("onpropertychange",v)):r==="focusout"&&E()}function M(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return o(t)}function V(r,a){if(r==="click")return o(a)}function G(r,a){if(r==="input"||r==="change")return o(a)}function Q(r,a){return r===a&&(r!==0||1/r===1/a)||r!==r&&a!==a}var Z=typeof Object.is=="function"?Object.is:Q;function se(r,a){if(Z(r,a))return!0;if(typeof r!="object"||r===null||typeof a!="object"||a===null)return!1;var d=Object.keys(r),y=Object.keys(a);if(d.length!==y.length)return!1;for(y=0;y<d.length;y++){var _=d[y];if(!S.call(a,_)||!Z(r[_],a[_]))return!1}return!0}function _e(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Ae(r,a){var d=_e(r);r=0;for(var y;d;){if(d.nodeType===3){if(y=r+d.textContent.length,r<=a&&y>=a)return{node:d,offset:a-r};r=y}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=_e(d)}}function me(r,a){return r&&a?r===a?!0:r&&r.nodeType===3?!1:a&&a.nodeType===3?me(r,a.parentNode):"contains"in r?r.contains(a):r.compareDocumentPosition?!!(r.compareDocumentPosition(a)&16):!1:!1}function xt(){for(var r=window,a=pt();a instanceof r.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)r=a.contentWindow;else break;a=pt(r.document)}return a}function at(r){var a=r&&r.nodeName&&r.nodeName.toLowerCase();return a&&(a==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||a==="textarea"||r.contentEditable==="true")}function Dr(r){var a=xt(),d=r.focusedElem,y=r.selectionRange;if(a!==d&&d&&d.ownerDocument&&me(d.ownerDocument.documentElement,d)){if(y!==null&&at(d)){if(a=y.start,r=y.end,r===void 0&&(r=a),"selectionStart"in d)d.selectionStart=a,d.selectionEnd=Math.min(r,d.value.length);else if(r=(a=d.ownerDocument||document)&&a.defaultView||window,r.getSelection){r=r.getSelection();var _=d.textContent.length,T=Math.min(y.start,_);y=y.end===void 0?T:Math.min(y.end,_),!r.extend&&T>y&&(_=y,y=T,T=_),_=Ae(d,T);var b=Ae(d,y);_&&b&&(r.rangeCount!==1||r.anchorNode!==_.node||r.anchorOffset!==_.offset||r.focusNode!==b.node||r.focusOffset!==b.offset)&&(a=a.createRange(),a.setStart(_.node,_.offset),r.removeAllRanges(),T>y?(r.addRange(a),r.extend(b.node,b.offset)):(a.setEnd(b.node,b.offset),r.addRange(a)))}}for(a=[],r=d;r=r.parentNode;)r.nodeType===1&&a.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof d.focus=="function"&&d.focus(),d=0;d<a.length;d++)r=a[d],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var pi=C&&"documentMode"in document&&11>=document.documentMode,Vn=null,Ht=null,_n=null,pr=!1;function Ns(r,a,d){var y=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;pr||Vn==null||Vn!==pt(y)||(y=Vn,"selectionStart"in y&&at(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),_n&&se(_n,y)||(_n=y,y=Hl(Ht,"onSelect"),0<y.length&&(a=new ie("onSelect","select",null,a,d),r.push({event:a,listeners:y}),a.target=Vn)))}function Hi(r,a){var d={};return d[r.toLowerCase()]=a.toLowerCase(),d["Webkit"+r]="webkit"+a,d["Moz"+r]="moz"+a,d}var eo={animationend:Hi("Animation","AnimationEnd"),animationiteration:Hi("Animation","AnimationIteration"),animationstart:Hi("Animation","AnimationStart"),transitionend:Hi("Transition","TransitionEnd")},Ka={},id={};C&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete eo.animationend.animation,delete eo.animationiteration.animation,delete eo.animationstart.animation),"TransitionEvent"in window||delete eo.transitionend.transition);function zl(r){if(Ka[r])return Ka[r];if(!eo[r])return r;var a=eo[r],d;for(d in a)if(a.hasOwnProperty(d)&&d in id)return Ka[r]=a[d];return r}var sd=zl("animationend"),od=zl("animationiteration"),ad=zl("animationstart"),ld=zl("transitionend"),ud=new Map,cd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function to(r,a){ud.set(r,a),g(a,[r])}for(var xc=0;xc<cd.length;xc++){var Ec=cd[xc],Sm=Ec.toLowerCase(),Rm=Ec[0].toUpperCase()+Ec.slice(1);to(Sm,"on"+Rm)}to(sd,"onAnimationEnd"),to(od,"onAnimationIteration"),to(ad,"onAnimationStart"),to("dblclick","onDoubleClick"),to("focusin","onFocus"),to("focusout","onBlur"),to(ld,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Nm=new Set("cancel close invalid load scroll toggle".split(" ").concat(Za));function hd(r,a,d){var y=r.type||"unknown-event";r.currentTarget=d,Gn(y,a,void 0,r),r.currentTarget=null}function fd(r,a){a=(a&4)!==0;for(var d=0;d<r.length;d++){var y=r[d],_=y.event;y=y.listeners;e:{var T=void 0;if(a)for(var b=y.length-1;0<=b;b--){var j=y[b],X=j.instance,le=j.currentTarget;if(j=j.listener,X!==T&&_.isPropagationStopped())break e;hd(_,j,le),T=X}else for(b=0;b<y.length;b++){if(j=y[b],X=j.instance,le=j.currentTarget,j=j.listener,X!==T&&_.isPropagationStopped())break e;hd(_,j,le),T=X}}}if(gn)throw r=Me,gn=!1,Me=null,r}function un(r,a){var d=a[Rc];d===void 0&&(d=a[Rc]=new Set);var y=r+"__bubble";d.has(y)||(dd(a,r,2,!1),d.add(y))}function _c(r,a,d){var y=0;a&&(y|=4),dd(d,r,y,a)}var jl="_reactListening"+Math.random().toString(36).slice(2);function $a(r){if(!r[jl]){r[jl]=!0,l.forEach(function(d){d!=="selectionchange"&&(Nm.has(d)||_c(d,!1,r),_c(d,!0,r))});var a=r.nodeType===9?r:r.ownerDocument;a===null||a[jl]||(a[jl]=!0,_c("selectionchange",!1,a))}}function dd(r,a,d,y){switch(Ks(a)){case 1:var _=Jt;break;case 4:_=Is;break;default:_=zi}d=_.bind(null,a,d,r),_=void 0,!Ws||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(_=!0),y?_!==void 0?r.addEventListener(a,d,{capture:!0,passive:_}):r.addEventListener(a,d,!0):_!==void 0?r.addEventListener(a,d,{passive:_}):r.addEventListener(a,d,!1)}function Ac(r,a,d,y,_){var T=y;if(!(a&1)&&!(a&2)&&y!==null)e:for(;;){if(y===null)return;var b=y.tag;if(b===3||b===4){var j=y.stateNode.containerInfo;if(j===_||j.nodeType===8&&j.parentNode===_)break;if(b===4)for(b=y.return;b!==null;){var X=b.tag;if((X===3||X===4)&&(X=b.stateNode.containerInfo,X===_||X.nodeType===8&&X.parentNode===_))return;b=b.return}for(;j!==null;){if(b=Lo(j),b===null)return;if(X=b.tag,X===5||X===6){y=T=b;continue e}j=j.parentNode}}y=y.return}Ji(function(){var le=T,we=$i(d),xe=[];e:{var pe=ud.get(r);if(pe!==void 0){var ke=ie,He=r;switch(r){case"keypress":if(Nt(d)===0)break e;case"keydown":case"keyup":ke=I;break;case"focusin":He="focus",ke=Yt;break;case"focusout":He="blur",ke=Yt;break;case"beforeblur":case"afterblur":ke=Yt;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ke=$s;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ke=yn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ke=ue;break;case sd:case od:case ad:ke=dr;break;case ld:ke=jt;break;case"scroll":ke=Fn;break;case"wheel":ke=Ct;break;case"copy":case"cut":case"paste":ke=Qe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ke=L}var Ge=(a&4)!==0,Un=!Ge&&r==="scroll",ne=Ge?pe!==null?pe+"Capture":null:pe;Ge=[];for(var K=le,re;K!==null;){re=K;var Ce=re.stateNode;if(re.tag===5&&Ce!==null&&(re=Ce,ne!==null&&(Ce=Lt(K,ne),Ce!=null&&Ge.push(Ja(K,Ce,re)))),Un)break;K=K.return}0<Ge.length&&(pe=new ke(pe,He,null,d,we),xe.push({event:pe,listeners:Ge}))}}if(!(a&7)){e:{if(pe=r==="mouseover"||r==="pointerover",ke=r==="mouseout"||r==="pointerout",pe&&d!==li&&(He=d.relatedTarget||d.fromElement)&&(Lo(He)||He[Ds]))break e;if((ke||pe)&&(pe=we.window===we?we:(pe=we.ownerDocument)?pe.defaultView||pe.parentWindow:window,ke?(He=d.relatedTarget||d.toElement,ke=le,He=He?Lo(He):null,He!==null&&(Un=nr(He),He!==Un||He.tag!==5&&He.tag!==6)&&(He=null)):(ke=null,He=le),ke!==He)){if(Ge=$s,Ce="onMouseLeave",ne="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(Ge=L,Ce="onPointerLeave",ne="onPointerEnter",K="pointer"),Un=ke==null?pe:ga(ke),re=He==null?pe:ga(He),pe=new Ge(Ce,K+"leave",ke,d,we),pe.target=Un,pe.relatedTarget=re,Ce=null,Lo(we)===le&&(Ge=new Ge(ne,K+"enter",He,d,we),Ge.target=re,Ge.relatedTarget=Un,Ce=Ge),Un=Ce,ke&&He)t:{for(Ge=ke,ne=He,K=0,re=Ge;re;re=fa(re))K++;for(re=0,Ce=ne;Ce;Ce=fa(Ce))re++;for(;0<K-re;)Ge=fa(Ge),K--;for(;0<re-K;)ne=fa(ne),re--;for(;K--;){if(Ge===ne||ne!==null&&Ge===ne.alternate)break t;Ge=fa(Ge),ne=fa(ne)}Ge=null}else Ge=null;ke!==null&&gd(xe,pe,ke,Ge,!1),He!==null&&Un!==null&&gd(xe,Un,He,Ge,!0)}}e:{if(pe=le?ga(le):window,ke=pe.nodeName&&pe.nodeName.toLowerCase(),ke==="select"||ke==="input"&&pe.type==="file")var Xe=u;else if(It(pe))if(c)Xe=G;else{Xe=M;var Je=D}else(ke=pe.nodeName)&&ke.toLowerCase()==="input"&&(pe.type==="checkbox"||pe.type==="radio")&&(Xe=V);if(Xe&&(Xe=Xe(r,le))){ko(xe,Xe,d,we);break e}Je&&Je(r,pe,le),r==="focusout"&&(Je=pe._wrapperState)&&Je.controlled&&pe.type==="number"&&mt(pe,"number",pe.value)}switch(Je=le?ga(le):window,r){case"focusin":(It(Je)||Je.contentEditable==="true")&&(Vn=Je,Ht=le,_n=null);break;case"focusout":_n=Ht=Vn=null;break;case"mousedown":pr=!0;break;case"contextmenu":case"mouseup":case"dragend":pr=!1,Ns(xe,d,we);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":Ns(xe,d,we)}var et;if(an)e:{switch(r){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else gr?Ul(r,d)&&(st="onCompositionEnd"):r==="keydown"&&d.keyCode===229&&(st="onCompositionStart");st&&(ir&&d.locale!=="ko"&&(gr||st!=="onCompositionStart"?st==="onCompositionEnd"&&gr&&(et=Mo()):(Sr=we,Zs="value"in Sr?Sr.value:Sr.textContent,gr=!0)),Je=Hl(le,st),0<Je.length&&(st=new zt(st,r,null,d,we),xe.push({event:st,listeners:Je}),et?st.data=et:(et=Qa(d),et!==null&&(st.data=et)))),(et=Nr?wc(r,d):qa(r,d))&&(le=Hl(le,"onBeforeInput"),0<le.length&&(we=new zt("onBeforeInput","beforeinput",null,d,we),xe.push({event:we,listeners:le}),we.data=et))}fd(xe,a)})}function Ja(r,a,d){return{instance:r,listener:a,currentTarget:d}}function Hl(r,a){for(var d=a+"Capture",y=[];r!==null;){var _=r,T=_.stateNode;_.tag===5&&T!==null&&(_=T,T=Lt(r,d),T!=null&&y.unshift(Ja(r,T,_)),T=Lt(r,a),T!=null&&y.push(Ja(r,T,_))),r=r.return}return y}function fa(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function gd(r,a,d,y,_){for(var T=a._reactName,b=[];d!==null&&d!==y;){var j=d,X=j.alternate,le=j.stateNode;if(X!==null&&X===y)break;j.tag===5&&le!==null&&(j=le,_?(X=Lt(d,T),X!=null&&b.unshift(Ja(d,X,j))):_||(X=Lt(d,T),X!=null&&b.push(Ja(d,X,j)))),d=d.return}b.length!==0&&r.push({event:a,listeners:b})}var Dm=/\r\n?/g,bm=/\u0000|\uFFFD/g;function pd(r){return(typeof r=="string"?r:""+r).replace(Dm,`
`).replace(bm,"")}function Wl(r,a,d){if(a=pd(a),pd(r)!==a&&d)throw Error(n(425))}function Gl(){}var Cc=null,Ic=null;function Tc(r,a){return r==="textarea"||r==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var vc=typeof setTimeout=="function"?setTimeout:void 0,Om=typeof clearTimeout=="function"?clearTimeout:void 0,md=typeof Promise=="function"?Promise:void 0,Mm=typeof queueMicrotask=="function"?queueMicrotask:typeof md<"u"?function(r){return md.resolve(null).then(r).catch(Pm)}:vc;function Pm(r){setTimeout(function(){throw r})}function Sc(r,a){var d=a,y=0;do{var _=d.nextSibling;if(r.removeChild(d),_&&_.nodeType===8)if(d=_.data,d==="/$"){if(y===0){r.removeChild(_),fr(a);return}y--}else d!=="$"&&d!=="$?"&&d!=="$!"||y++;d=_}while(d);fr(a)}function no(r){for(;r!=null;r=r.nextSibling){var a=r.nodeType;if(a===1||a===3)break;if(a===8){if(a=r.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return r}function yd(r){r=r.previousSibling;for(var a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="$"||d==="$!"||d==="$?"){if(a===0)return r;a--}else d==="/$"&&a++}r=r.previousSibling}return null}var da=Math.random().toString(36).slice(2),ls="__reactFiber$"+da,el="__reactProps$"+da,Ds="__reactContainer$"+da,Rc="__reactEvents$"+da,km="__reactListeners$"+da,Lm="__reactHandles$"+da;function Lo(r){var a=r[ls];if(a)return a;for(var d=r.parentNode;d;){if(a=d[Ds]||d[ls]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(r=yd(r);r!==null;){if(d=r[ls])return d;r=yd(r)}return a}r=d,d=r.parentNode}return null}function tl(r){return r=r[ls]||r[Ds],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function ga(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(n(33))}function Xl(r){return r[el]||null}var Nc=[],pa=-1;function ro(r){return{current:r}}function cn(r){0>pa||(r.current=Nc[pa],Nc[pa]=null,pa--)}function rn(r,a){pa++,Nc[pa]=r.current,r.current=a}var io={},br=ro(io),ti=ro(!1),Bo=io;function ma(r,a){var d=r.type.contextTypes;if(!d)return io;var y=r.stateNode;if(y&&y.__reactInternalMemoizedUnmaskedChildContext===a)return y.__reactInternalMemoizedMaskedChildContext;var _={},T;for(T in d)_[T]=a[T];return y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=a,r.__reactInternalMemoizedMaskedChildContext=_),_}function ni(r){return r=r.childContextTypes,r!=null}function Yl(){cn(ti),cn(br)}function wd(r,a,d){if(br.current!==io)throw Error(n(168));rn(br,a),rn(ti,d)}function xd(r,a,d){var y=r.stateNode;if(a=a.childContextTypes,typeof y.getChildContext!="function")return d;y=y.getChildContext();for(var _ in y)if(!(_ in a))throw Error(n(108,vt(r)||"Unknown",_));return be({},d,y)}function Ql(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||io,Bo=br.current,rn(br,r),rn(ti,ti.current),!0}function Ed(r,a,d){var y=r.stateNode;if(!y)throw Error(n(169));d?(r=xd(r,a,Bo),y.__reactInternalMemoizedMergedChildContext=r,cn(ti),cn(br),rn(br,r)):cn(ti),rn(ti,d)}var bs=null,ql=!1,Dc=!1;function _d(r){bs===null?bs=[r]:bs.push(r)}function Bm(r){ql=!0,_d(r)}function so(){if(!Dc&&bs!==null){Dc=!0;var r=0,a=it;try{var d=bs;for(it=1;r<d.length;r++){var y=d[r];do y=y(!0);while(y!==null)}bs=null,ql=!1}catch(_){throw bs!==null&&(bs=bs.slice(r+1)),hr(de,so),_}finally{it=a,Dc=!1}}return null}var ya=[],wa=0,Kl=null,Zl=0,Ri=[],Ni=0,Fo=null,Os=1,Ms="";function Vo(r,a){ya[wa++]=Zl,ya[wa++]=Kl,Kl=r,Zl=a}function Ad(r,a,d){Ri[Ni++]=Os,Ri[Ni++]=Ms,Ri[Ni++]=Fo,Fo=r;var y=Os;r=Ms;var _=32-Xn(y)-1;y&=~(1<<_),d+=1;var T=32-Xn(a)+_;if(30<T){var b=_-_%5;T=(y&(1<<b)-1).toString(32),y>>=b,_-=b,Os=1<<32-Xn(a)+_|d<<_|y,Ms=T+r}else Os=1<<T|d<<_|y,Ms=r}function bc(r){r.return!==null&&(Vo(r,1),Ad(r,1,0))}function Oc(r){for(;r===Kl;)Kl=ya[--wa],ya[wa]=null,Zl=ya[--wa],ya[wa]=null;for(;r===Fo;)Fo=Ri[--Ni],Ri[Ni]=null,Ms=Ri[--Ni],Ri[Ni]=null,Os=Ri[--Ni],Ri[Ni]=null}var mi=null,yi=null,wn=!1,Wi=null;function Cd(r,a){var d=Mi(5,null,null,0);d.elementType="DELETED",d.stateNode=a,d.return=r,a=r.deletions,a===null?(r.deletions=[d],r.flags|=16):a.push(d)}function Id(r,a){switch(r.tag){case 5:var d=r.type;return a=a.nodeType!==1||d.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(r.stateNode=a,mi=r,yi=no(a.firstChild),!0):!1;case 6:return a=r.pendingProps===""||a.nodeType!==3?null:a,a!==null?(r.stateNode=a,mi=r,yi=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(d=Fo!==null?{id:Os,overflow:Ms}:null,r.memoizedState={dehydrated:a,treeContext:d,retryLane:1073741824},d=Mi(18,null,null,0),d.stateNode=a,d.return=r,r.child=d,mi=r,yi=null,!0):!1;default:return!1}}function Mc(r){return(r.mode&1)!==0&&(r.flags&128)===0}function Pc(r){if(wn){var a=yi;if(a){var d=a;if(!Id(r,a)){if(Mc(r))throw Error(n(418));a=no(d.nextSibling);var y=mi;a&&Id(r,a)?Cd(y,d):(r.flags=r.flags&-4097|2,wn=!1,mi=r)}}else{if(Mc(r))throw Error(n(418));r.flags=r.flags&-4097|2,wn=!1,mi=r}}}function Td(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;mi=r}function $l(r){if(r!==mi)return!1;if(!wn)return Td(r),wn=!0,!1;var a;if((a=r.tag!==3)&&!(a=r.tag!==5)&&(a=r.type,a=a!=="head"&&a!=="body"&&!Tc(r.type,r.memoizedProps)),a&&(a=yi)){if(Mc(r))throw vd(),Error(n(418));for(;a;)Cd(r,a),a=no(a.nextSibling)}if(Td(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));e:{for(r=r.nextSibling,a=0;r;){if(r.nodeType===8){var d=r.data;if(d==="/$"){if(a===0){yi=no(r.nextSibling);break e}a--}else d!=="$"&&d!=="$!"&&d!=="$?"||a++}r=r.nextSibling}yi=null}}else yi=mi?no(r.stateNode.nextSibling):null;return!0}function vd(){for(var r=yi;r;)r=no(r.nextSibling)}function xa(){yi=mi=null,wn=!1}function kc(r){Wi===null?Wi=[r]:Wi.push(r)}var Fm=Re.ReactCurrentBatchConfig;function nl(r,a,d){if(r=d.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(d._owner){if(d=d._owner,d){if(d.tag!==1)throw Error(n(309));var y=d.stateNode}if(!y)throw Error(n(147,r));var _=y,T=""+r;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===T?a.ref:(a=function(b){var j=_.refs;b===null?delete j[T]:j[T]=b},a._stringRef=T,a)}if(typeof r!="string")throw Error(n(284));if(!d._owner)throw Error(n(290,r))}return r}function Jl(r,a){throw r=Object.prototype.toString.call(a),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":r))}function Sd(r){var a=r._init;return a(r._payload)}function Rd(r){function a(ne,K){if(r){var re=ne.deletions;re===null?(ne.deletions=[K],ne.flags|=16):re.push(K)}}function d(ne,K){if(!r)return null;for(;K!==null;)a(ne,K),K=K.sibling;return null}function y(ne,K){for(ne=new Map;K!==null;)K.key!==null?ne.set(K.key,K):ne.set(K.index,K),K=K.sibling;return ne}function _(ne,K){return ne=go(ne,K),ne.index=0,ne.sibling=null,ne}function T(ne,K,re){return ne.index=re,r?(re=ne.alternate,re!==null?(re=re.index,re<K?(ne.flags|=2,K):re):(ne.flags|=2,K)):(ne.flags|=1048576,K)}function b(ne){return r&&ne.alternate===null&&(ne.flags|=2),ne}function j(ne,K,re,Ce){return K===null||K.tag!==6?(K=vh(re,ne.mode,Ce),K.return=ne,K):(K=_(K,re),K.return=ne,K)}function X(ne,K,re,Ce){var Xe=re.type;return Xe===U?we(ne,K,re.props.children,Ce,re.key):K!==null&&(K.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===gt&&Sd(Xe)===K.type)?(Ce=_(K,re.props),Ce.ref=nl(ne,K,re),Ce.return=ne,Ce):(Ce=Cu(re.type,re.key,re.props,null,ne.mode,Ce),Ce.ref=nl(ne,K,re),Ce.return=ne,Ce)}function le(ne,K,re,Ce){return K===null||K.tag!==4||K.stateNode.containerInfo!==re.containerInfo||K.stateNode.implementation!==re.implementation?(K=Sh(re,ne.mode,Ce),K.return=ne,K):(K=_(K,re.children||[]),K.return=ne,K)}function we(ne,K,re,Ce,Xe){return K===null||K.tag!==7?(K=Yo(re,ne.mode,Ce,Xe),K.return=ne,K):(K=_(K,re),K.return=ne,K)}function xe(ne,K,re){if(typeof K=="string"&&K!==""||typeof K=="number")return K=vh(""+K,ne.mode,re),K.return=ne,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case At:return re=Cu(K.type,K.key,K.props,null,ne.mode,re),re.ref=nl(ne,null,K),re.return=ne,re;case Le:return K=Sh(K,ne.mode,re),K.return=ne,K;case gt:var Ce=K._init;return xe(ne,Ce(K._payload),re)}if(qr(K)||ze(K))return K=Yo(K,ne.mode,re,null),K.return=ne,K;Jl(ne,K)}return null}function pe(ne,K,re,Ce){var Xe=K!==null?K.key:null;if(typeof re=="string"&&re!==""||typeof re=="number")return Xe!==null?null:j(ne,K,""+re,Ce);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case At:return re.key===Xe?X(ne,K,re,Ce):null;case Le:return re.key===Xe?le(ne,K,re,Ce):null;case gt:return Xe=re._init,pe(ne,K,Xe(re._payload),Ce)}if(qr(re)||ze(re))return Xe!==null?null:we(ne,K,re,Ce,null);Jl(ne,re)}return null}function ke(ne,K,re,Ce,Xe){if(typeof Ce=="string"&&Ce!==""||typeof Ce=="number")return ne=ne.get(re)||null,j(K,ne,""+Ce,Xe);if(typeof Ce=="object"&&Ce!==null){switch(Ce.$$typeof){case At:return ne=ne.get(Ce.key===null?re:Ce.key)||null,X(K,ne,Ce,Xe);case Le:return ne=ne.get(Ce.key===null?re:Ce.key)||null,le(K,ne,Ce,Xe);case gt:var Je=Ce._init;return ke(ne,K,re,Je(Ce._payload),Xe)}if(qr(Ce)||ze(Ce))return ne=ne.get(re)||null,we(K,ne,Ce,Xe,null);Jl(K,Ce)}return null}function He(ne,K,re,Ce){for(var Xe=null,Je=null,et=K,st=K=0,ar=null;et!==null&&st<re.length;st++){et.index>st?(ar=et,et=null):ar=et.sibling;var Ft=pe(ne,et,re[st],Ce);if(Ft===null){et===null&&(et=ar);break}r&&et&&Ft.alternate===null&&a(ne,et),K=T(Ft,K,st),Je===null?Xe=Ft:Je.sibling=Ft,Je=Ft,et=ar}if(st===re.length)return d(ne,et),wn&&Vo(ne,st),Xe;if(et===null){for(;st<re.length;st++)et=xe(ne,re[st],Ce),et!==null&&(K=T(et,K,st),Je===null?Xe=et:Je.sibling=et,Je=et);return wn&&Vo(ne,st),Xe}for(et=y(ne,et);st<re.length;st++)ar=ke(et,ne,st,re[st],Ce),ar!==null&&(r&&ar.alternate!==null&&et.delete(ar.key===null?st:ar.key),K=T(ar,K,st),Je===null?Xe=ar:Je.sibling=ar,Je=ar);return r&&et.forEach(function(po){return a(ne,po)}),wn&&Vo(ne,st),Xe}function Ge(ne,K,re,Ce){var Xe=ze(re);if(typeof Xe!="function")throw Error(n(150));if(re=Xe.call(re),re==null)throw Error(n(151));for(var Je=Xe=null,et=K,st=K=0,ar=null,Ft=re.next();et!==null&&!Ft.done;st++,Ft=re.next()){et.index>st?(ar=et,et=null):ar=et.sibling;var po=pe(ne,et,Ft.value,Ce);if(po===null){et===null&&(et=ar);break}r&&et&&po.alternate===null&&a(ne,et),K=T(po,K,st),Je===null?Xe=po:Je.sibling=po,Je=po,et=ar}if(Ft.done)return d(ne,et),wn&&Vo(ne,st),Xe;if(et===null){for(;!Ft.done;st++,Ft=re.next())Ft=xe(ne,Ft.value,Ce),Ft!==null&&(K=T(Ft,K,st),Je===null?Xe=Ft:Je.sibling=Ft,Je=Ft);return wn&&Vo(ne,st),Xe}for(et=y(ne,et);!Ft.done;st++,Ft=re.next())Ft=ke(et,ne,st,Ft.value,Ce),Ft!==null&&(r&&Ft.alternate!==null&&et.delete(Ft.key===null?st:Ft.key),K=T(Ft,K,st),Je===null?Xe=Ft:Je.sibling=Ft,Je=Ft);return r&&et.forEach(function(y2){return a(ne,y2)}),wn&&Vo(ne,st),Xe}function Un(ne,K,re,Ce){if(typeof re=="object"&&re!==null&&re.type===U&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case At:e:{for(var Xe=re.key,Je=K;Je!==null;){if(Je.key===Xe){if(Xe=re.type,Xe===U){if(Je.tag===7){d(ne,Je.sibling),K=_(Je,re.props.children),K.return=ne,ne=K;break e}}else if(Je.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===gt&&Sd(Xe)===Je.type){d(ne,Je.sibling),K=_(Je,re.props),K.ref=nl(ne,Je,re),K.return=ne,ne=K;break e}d(ne,Je);break}else a(ne,Je);Je=Je.sibling}re.type===U?(K=Yo(re.props.children,ne.mode,Ce,re.key),K.return=ne,ne=K):(Ce=Cu(re.type,re.key,re.props,null,ne.mode,Ce),Ce.ref=nl(ne,K,re),Ce.return=ne,ne=Ce)}return b(ne);case Le:e:{for(Je=re.key;K!==null;){if(K.key===Je)if(K.tag===4&&K.stateNode.containerInfo===re.containerInfo&&K.stateNode.implementation===re.implementation){d(ne,K.sibling),K=_(K,re.children||[]),K.return=ne,ne=K;break e}else{d(ne,K);break}else a(ne,K);K=K.sibling}K=Sh(re,ne.mode,Ce),K.return=ne,ne=K}return b(ne);case gt:return Je=re._init,Un(ne,K,Je(re._payload),Ce)}if(qr(re))return He(ne,K,re,Ce);if(ze(re))return Ge(ne,K,re,Ce);Jl(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"?(re=""+re,K!==null&&K.tag===6?(d(ne,K.sibling),K=_(K,re),K.return=ne,ne=K):(d(ne,K),K=vh(re,ne.mode,Ce),K.return=ne,ne=K),b(ne)):d(ne,K)}return Un}var Ea=Rd(!0),Nd=Rd(!1),eu=ro(null),tu=null,_a=null,Lc=null;function Bc(){Lc=_a=tu=null}function Fc(r){var a=eu.current;cn(eu),r._currentValue=a}function Vc(r,a,d){for(;r!==null;){var y=r.alternate;if((r.childLanes&a)!==a?(r.childLanes|=a,y!==null&&(y.childLanes|=a)):y!==null&&(y.childLanes&a)!==a&&(y.childLanes|=a),r===d)break;r=r.return}}function Aa(r,a){tu=r,Lc=_a=null,r=r.dependencies,r!==null&&r.firstContext!==null&&(r.lanes&a&&(ri=!0),r.firstContext=null)}function Di(r){var a=r._currentValue;if(Lc!==r)if(r={context:r,memoizedValue:a,next:null},_a===null){if(tu===null)throw Error(n(308));_a=r,tu.dependencies={lanes:0,firstContext:r}}else _a=_a.next=r;return a}var Uo=null;function Uc(r){Uo===null?Uo=[r]:Uo.push(r)}function Dd(r,a,d,y){var _=a.interleaved;return _===null?(d.next=d,Uc(a)):(d.next=_.next,_.next=d),a.interleaved=d,Ps(r,y)}function Ps(r,a){r.lanes|=a;var d=r.alternate;for(d!==null&&(d.lanes|=a),d=r,r=r.return;r!==null;)r.childLanes|=a,d=r.alternate,d!==null&&(d.childLanes|=a),d=r,r=r.return;return d.tag===3?d.stateNode:null}var oo=!1;function zc(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bd(r,a){r=r.updateQueue,a.updateQueue===r&&(a.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function ks(r,a){return{eventTime:r,lane:a,tag:0,payload:null,callback:null,next:null}}function ao(r,a,d){var y=r.updateQueue;if(y===null)return null;if(y=y.shared,Pt&2){var _=y.pending;return _===null?a.next=a:(a.next=_.next,_.next=a),y.pending=a,Ps(r,d)}return _=y.interleaved,_===null?(a.next=a,Uc(y)):(a.next=_.next,_.next=a),y.interleaved=a,Ps(r,d)}function nu(r,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194240)!==0)){var y=a.lanes;y&=r.pendingLanes,d|=y,a.lanes=d,Zt(r,d)}}function Od(r,a){var d=r.updateQueue,y=r.alternate;if(y!==null&&(y=y.updateQueue,d===y)){var _=null,T=null;if(d=d.firstBaseUpdate,d!==null){do{var b={eventTime:d.eventTime,lane:d.lane,tag:d.tag,payload:d.payload,callback:d.callback,next:null};T===null?_=T=b:T=T.next=b,d=d.next}while(d!==null);T===null?_=T=a:T=T.next=a}else _=T=a;d={baseState:y.baseState,firstBaseUpdate:_,lastBaseUpdate:T,shared:y.shared,effects:y.effects},r.updateQueue=d;return}r=d.lastBaseUpdate,r===null?d.firstBaseUpdate=a:r.next=a,d.lastBaseUpdate=a}function ru(r,a,d,y){var _=r.updateQueue;oo=!1;var T=_.firstBaseUpdate,b=_.lastBaseUpdate,j=_.shared.pending;if(j!==null){_.shared.pending=null;var X=j,le=X.next;X.next=null,b===null?T=le:b.next=le,b=X;var we=r.alternate;we!==null&&(we=we.updateQueue,j=we.lastBaseUpdate,j!==b&&(j===null?we.firstBaseUpdate=le:j.next=le,we.lastBaseUpdate=X))}if(T!==null){var xe=_.baseState;b=0,we=le=X=null,j=T;do{var pe=j.lane,ke=j.eventTime;if((y&pe)===pe){we!==null&&(we=we.next={eventTime:ke,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var He=r,Ge=j;switch(pe=a,ke=d,Ge.tag){case 1:if(He=Ge.payload,typeof He=="function"){xe=He.call(ke,xe,pe);break e}xe=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Ge.payload,pe=typeof He=="function"?He.call(ke,xe,pe):He,pe==null)break e;xe=be({},xe,pe);break e;case 2:oo=!0}}j.callback!==null&&j.lane!==0&&(r.flags|=64,pe=_.effects,pe===null?_.effects=[j]:pe.push(j))}else ke={eventTime:ke,lane:pe,tag:j.tag,payload:j.payload,callback:j.callback,next:null},we===null?(le=we=ke,X=xe):we=we.next=ke,b|=pe;if(j=j.next,j===null){if(j=_.shared.pending,j===null)break;pe=j,j=pe.next,pe.next=null,_.lastBaseUpdate=pe,_.shared.pending=null}}while(!0);if(we===null&&(X=xe),_.baseState=X,_.firstBaseUpdate=le,_.lastBaseUpdate=we,a=_.shared.interleaved,a!==null){_=a;do b|=_.lane,_=_.next;while(_!==a)}else T===null&&(_.shared.lanes=0);Ho|=b,r.lanes=b,r.memoizedState=xe}}function Md(r,a,d){if(r=a.effects,a.effects=null,r!==null)for(a=0;a<r.length;a++){var y=r[a],_=y.callback;if(_!==null){if(y.callback=null,y=d,typeof _!="function")throw Error(n(191,_));_.call(y)}}}var rl={},us=ro(rl),il=ro(rl),sl=ro(rl);function zo(r){if(r===rl)throw Error(n(174));return r}function jc(r,a){switch(rn(sl,a),rn(il,r),rn(us,rl),r=a.nodeType,r){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Tn(null,"");break;default:r=r===8?a.parentNode:a,a=r.namespaceURI||null,r=r.tagName,a=Tn(a,r)}cn(us),rn(us,a)}function Ca(){cn(us),cn(il),cn(sl)}function Pd(r){zo(sl.current);var a=zo(us.current),d=Tn(a,r.type);a!==d&&(rn(il,r),rn(us,d))}function Hc(r){il.current===r&&(cn(us),cn(il))}var An=ro(0);function iu(r){for(var a=r;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||d.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Wc=[];function Gc(){for(var r=0;r<Wc.length;r++)Wc[r]._workInProgressVersionPrimary=null;Wc.length=0}var su=Re.ReactCurrentDispatcher,Xc=Re.ReactCurrentBatchConfig,jo=0,Cn=null,qn=null,sr=null,ou=!1,ol=!1,al=0,Vm=0;function Or(){throw Error(n(321))}function Yc(r,a){if(a===null)return!1;for(var d=0;d<a.length&&d<r.length;d++)if(!Z(r[d],a[d]))return!1;return!0}function Qc(r,a,d,y,_,T){if(jo=T,Cn=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,su.current=r===null||r.memoizedState===null?Hm:Wm,r=d(y,_),ol){T=0;do{if(ol=!1,al=0,25<=T)throw Error(n(301));T+=1,sr=qn=null,a.updateQueue=null,su.current=Gm,r=d(y,_)}while(ol)}if(su.current=uu,a=qn!==null&&qn.next!==null,jo=0,sr=qn=Cn=null,ou=!1,a)throw Error(n(300));return r}function qc(){var r=al!==0;return al=0,r}function cs(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sr===null?Cn.memoizedState=sr=r:sr=sr.next=r,sr}function bi(){if(qn===null){var r=Cn.alternate;r=r!==null?r.memoizedState:null}else r=qn.next;var a=sr===null?Cn.memoizedState:sr.next;if(a!==null)sr=a,qn=r;else{if(r===null)throw Error(n(310));qn=r,r={memoizedState:qn.memoizedState,baseState:qn.baseState,baseQueue:qn.baseQueue,queue:qn.queue,next:null},sr===null?Cn.memoizedState=sr=r:sr=sr.next=r}return sr}function ll(r,a){return typeof a=="function"?a(r):a}function Kc(r){var a=bi(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=r;var y=qn,_=y.baseQueue,T=d.pending;if(T!==null){if(_!==null){var b=_.next;_.next=T.next,T.next=b}y.baseQueue=_=T,d.pending=null}if(_!==null){T=_.next,y=y.baseState;var j=b=null,X=null,le=T;do{var we=le.lane;if((jo&we)===we)X!==null&&(X=X.next={lane:0,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),y=le.hasEagerState?le.eagerState:r(y,le.action);else{var xe={lane:we,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null};X===null?(j=X=xe,b=y):X=X.next=xe,Cn.lanes|=we,Ho|=we}le=le.next}while(le!==null&&le!==T);X===null?b=y:X.next=j,Z(y,a.memoizedState)||(ri=!0),a.memoizedState=y,a.baseState=b,a.baseQueue=X,d.lastRenderedState=y}if(r=d.interleaved,r!==null){_=r;do T=_.lane,Cn.lanes|=T,Ho|=T,_=_.next;while(_!==r)}else _===null&&(d.lanes=0);return[a.memoizedState,d.dispatch]}function Zc(r){var a=bi(),d=a.queue;if(d===null)throw Error(n(311));d.lastRenderedReducer=r;var y=d.dispatch,_=d.pending,T=a.memoizedState;if(_!==null){d.pending=null;var b=_=_.next;do T=r(T,b.action),b=b.next;while(b!==_);Z(T,a.memoizedState)||(ri=!0),a.memoizedState=T,a.baseQueue===null&&(a.baseState=T),d.lastRenderedState=T}return[T,y]}function kd(){}function Ld(r,a){var d=Cn,y=bi(),_=a(),T=!Z(y.memoizedState,_);if(T&&(y.memoizedState=_,ri=!0),y=y.queue,$c(Vd.bind(null,d,y,r),[r]),y.getSnapshot!==a||T||sr!==null&&sr.memoizedState.tag&1){if(d.flags|=2048,ul(9,Fd.bind(null,d,y,_,a),void 0,null),or===null)throw Error(n(349));jo&30||Bd(d,a,_)}return _}function Bd(r,a,d){r.flags|=16384,r={getSnapshot:a,value:d},a=Cn.updateQueue,a===null?(a={lastEffect:null,stores:null},Cn.updateQueue=a,a.stores=[r]):(d=a.stores,d===null?a.stores=[r]:d.push(r))}function Fd(r,a,d,y){a.value=d,a.getSnapshot=y,Ud(a)&&zd(r)}function Vd(r,a,d){return d(function(){Ud(a)&&zd(r)})}function Ud(r){var a=r.getSnapshot;r=r.value;try{var d=a();return!Z(r,d)}catch{return!0}}function zd(r){var a=Ps(r,1);a!==null&&Qi(a,r,1,-1)}function jd(r){var a=cs();return typeof r=="function"&&(r=r()),a.memoizedState=a.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ll,lastRenderedState:r},a.queue=r,r=r.dispatch=jm.bind(null,Cn,r),[a.memoizedState,r]}function ul(r,a,d,y){return r={tag:r,create:a,destroy:d,deps:y,next:null},a=Cn.updateQueue,a===null?(a={lastEffect:null,stores:null},Cn.updateQueue=a,a.lastEffect=r.next=r):(d=a.lastEffect,d===null?a.lastEffect=r.next=r:(y=d.next,d.next=r,r.next=y,a.lastEffect=r)),r}function Hd(){return bi().memoizedState}function au(r,a,d,y){var _=cs();Cn.flags|=r,_.memoizedState=ul(1|a,d,void 0,y===void 0?null:y)}function lu(r,a,d,y){var _=bi();y=y===void 0?null:y;var T=void 0;if(qn!==null){var b=qn.memoizedState;if(T=b.destroy,y!==null&&Yc(y,b.deps)){_.memoizedState=ul(a,d,T,y);return}}Cn.flags|=r,_.memoizedState=ul(1|a,d,T,y)}function Wd(r,a){return au(8390656,8,r,a)}function $c(r,a){return lu(2048,8,r,a)}function Gd(r,a){return lu(4,2,r,a)}function Xd(r,a){return lu(4,4,r,a)}function Yd(r,a){if(typeof a=="function")return r=r(),a(r),function(){a(null)};if(a!=null)return r=r(),a.current=r,function(){a.current=null}}function Qd(r,a,d){return d=d!=null?d.concat([r]):null,lu(4,4,Yd.bind(null,a,r),d)}function Jc(){}function qd(r,a){var d=bi();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Yc(a,y[1])?y[0]:(d.memoizedState=[r,a],r)}function Kd(r,a){var d=bi();a=a===void 0?null:a;var y=d.memoizedState;return y!==null&&a!==null&&Yc(a,y[1])?y[0]:(r=r(),d.memoizedState=[r,a],r)}function Zd(r,a,d){return jo&21?(Z(d,a)||(d=mn(),Cn.lanes|=d,Ho|=d,r.baseState=!0),a):(r.baseState&&(r.baseState=!1,ri=!0),r.memoizedState=d)}function Um(r,a){var d=it;it=d!==0&&4>d?d:4,r(!0);var y=Xc.transition;Xc.transition={};try{r(!1),a()}finally{it=d,Xc.transition=y}}function $d(){return bi().memoizedState}function zm(r,a,d){var y=ho(r);if(d={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null},Jd(r))e1(a,d);else if(d=Dd(r,a,d,y),d!==null){var _=Wr();Qi(d,r,y,_),t1(d,a,y)}}function jm(r,a,d){var y=ho(r),_={lane:y,action:d,hasEagerState:!1,eagerState:null,next:null};if(Jd(r))e1(a,_);else{var T=r.alternate;if(r.lanes===0&&(T===null||T.lanes===0)&&(T=a.lastRenderedReducer,T!==null))try{var b=a.lastRenderedState,j=T(b,d);if(_.hasEagerState=!0,_.eagerState=j,Z(j,b)){var X=a.interleaved;X===null?(_.next=_,Uc(a)):(_.next=X.next,X.next=_),a.interleaved=_;return}}catch{}finally{}d=Dd(r,a,_,y),d!==null&&(_=Wr(),Qi(d,r,y,_),t1(d,a,y))}}function Jd(r){var a=r.alternate;return r===Cn||a!==null&&a===Cn}function e1(r,a){ol=ou=!0;var d=r.pending;d===null?a.next=a:(a.next=d.next,d.next=a),r.pending=a}function t1(r,a,d){if(d&4194240){var y=a.lanes;y&=r.pendingLanes,d|=y,a.lanes=d,Zt(r,d)}}var uu={readContext:Di,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},Hm={readContext:Di,useCallback:function(r,a){return cs().memoizedState=[r,a===void 0?null:a],r},useContext:Di,useEffect:Wd,useImperativeHandle:function(r,a,d){return d=d!=null?d.concat([r]):null,au(4194308,4,Yd.bind(null,a,r),d)},useLayoutEffect:function(r,a){return au(4194308,4,r,a)},useInsertionEffect:function(r,a){return au(4,2,r,a)},useMemo:function(r,a){var d=cs();return a=a===void 0?null:a,r=r(),d.memoizedState=[r,a],r},useReducer:function(r,a,d){var y=cs();return a=d!==void 0?d(a):a,y.memoizedState=y.baseState=a,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:a},y.queue=r,r=r.dispatch=zm.bind(null,Cn,r),[y.memoizedState,r]},useRef:function(r){var a=cs();return r={current:r},a.memoizedState=r},useState:jd,useDebugValue:Jc,useDeferredValue:function(r){return cs().memoizedState=r},useTransition:function(){var r=jd(!1),a=r[0];return r=Um.bind(null,r[1]),cs().memoizedState=r,[a,r]},useMutableSource:function(){},useSyncExternalStore:function(r,a,d){var y=Cn,_=cs();if(wn){if(d===void 0)throw Error(n(407));d=d()}else{if(d=a(),or===null)throw Error(n(349));jo&30||Bd(y,a,d)}_.memoizedState=d;var T={value:d,getSnapshot:a};return _.queue=T,Wd(Vd.bind(null,y,T,r),[r]),y.flags|=2048,ul(9,Fd.bind(null,y,T,d,a),void 0,null),d},useId:function(){var r=cs(),a=or.identifierPrefix;if(wn){var d=Ms,y=Os;d=(y&~(1<<32-Xn(y)-1)).toString(32)+d,a=":"+a+"R"+d,d=al++,0<d&&(a+="H"+d.toString(32)),a+=":"}else d=Vm++,a=":"+a+"r"+d.toString(32)+":";return r.memoizedState=a},unstable_isNewReconciler:!1},Wm={readContext:Di,useCallback:qd,useContext:Di,useEffect:$c,useImperativeHandle:Qd,useInsertionEffect:Gd,useLayoutEffect:Xd,useMemo:Kd,useReducer:Kc,useRef:Hd,useState:function(){return Kc(ll)},useDebugValue:Jc,useDeferredValue:function(r){var a=bi();return Zd(a,qn.memoizedState,r)},useTransition:function(){var r=Kc(ll)[0],a=bi().memoizedState;return[r,a]},useMutableSource:kd,useSyncExternalStore:Ld,useId:$d,unstable_isNewReconciler:!1},Gm={readContext:Di,useCallback:qd,useContext:Di,useEffect:$c,useImperativeHandle:Qd,useInsertionEffect:Gd,useLayoutEffect:Xd,useMemo:Kd,useReducer:Zc,useRef:Hd,useState:function(){return Zc(ll)},useDebugValue:Jc,useDeferredValue:function(r){var a=bi();return qn===null?a.memoizedState=r:Zd(a,qn.memoizedState,r)},useTransition:function(){var r=Zc(ll)[0],a=bi().memoizedState;return[r,a]},useMutableSource:kd,useSyncExternalStore:Ld,useId:$d,unstable_isNewReconciler:!1};function Gi(r,a){if(r&&r.defaultProps){a=be({},a),r=r.defaultProps;for(var d in r)a[d]===void 0&&(a[d]=r[d]);return a}return a}function eh(r,a,d,y){a=r.memoizedState,d=d(y,a),d=d==null?a:be({},a,d),r.memoizedState=d,r.lanes===0&&(r.updateQueue.baseState=d)}var cu={isMounted:function(r){return(r=r._reactInternals)?nr(r)===r:!1},enqueueSetState:function(r,a,d){r=r._reactInternals;var y=Wr(),_=ho(r),T=ks(y,_);T.payload=a,d!=null&&(T.callback=d),a=ao(r,T,_),a!==null&&(Qi(a,r,_,y),nu(a,r,_))},enqueueReplaceState:function(r,a,d){r=r._reactInternals;var y=Wr(),_=ho(r),T=ks(y,_);T.tag=1,T.payload=a,d!=null&&(T.callback=d),a=ao(r,T,_),a!==null&&(Qi(a,r,_,y),nu(a,r,_))},enqueueForceUpdate:function(r,a){r=r._reactInternals;var d=Wr(),y=ho(r),_=ks(d,y);_.tag=2,a!=null&&(_.callback=a),a=ao(r,_,y),a!==null&&(Qi(a,r,y,d),nu(a,r,y))}};function n1(r,a,d,y,_,T,b){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(y,T,b):a.prototype&&a.prototype.isPureReactComponent?!se(d,y)||!se(_,T):!0}function r1(r,a,d){var y=!1,_=io,T=a.contextType;return typeof T=="object"&&T!==null?T=Di(T):(_=ni(a)?Bo:br.current,y=a.contextTypes,T=(y=y!=null)?ma(r,_):io),a=new a(d,T),r.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=cu,r.stateNode=a,a._reactInternals=r,y&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=_,r.__reactInternalMemoizedMaskedChildContext=T),a}function i1(r,a,d,y){r=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,y),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,y),a.state!==r&&cu.enqueueReplaceState(a,a.state,null)}function th(r,a,d,y){var _=r.stateNode;_.props=d,_.state=r.memoizedState,_.refs={},zc(r);var T=a.contextType;typeof T=="object"&&T!==null?_.context=Di(T):(T=ni(a)?Bo:br.current,_.context=ma(r,T)),_.state=r.memoizedState,T=a.getDerivedStateFromProps,typeof T=="function"&&(eh(r,a,T,d),_.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(a=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),a!==_.state&&cu.enqueueReplaceState(_,_.state,null),ru(r,d,_,y),_.state=r.memoizedState),typeof _.componentDidMount=="function"&&(r.flags|=4194308)}function Ia(r,a){try{var d="",y=a;do d+=dt(y),y=y.return;while(y);var _=d}catch(T){_=`
Error generating stack: `+T.message+`
`+T.stack}return{value:r,source:a,stack:_,digest:null}}function nh(r,a,d){return{value:r,source:null,stack:d??null,digest:a??null}}function rh(r,a){try{console.error(a.value)}catch(d){setTimeout(function(){throw d})}}var Xm=typeof WeakMap=="function"?WeakMap:Map;function s1(r,a,d){d=ks(-1,d),d.tag=3,d.payload={element:null};var y=a.value;return d.callback=function(){yu||(yu=!0,wh=y),rh(r,a)},d}function o1(r,a,d){d=ks(-1,d),d.tag=3;var y=r.type.getDerivedStateFromError;if(typeof y=="function"){var _=a.value;d.payload=function(){return y(_)},d.callback=function(){rh(r,a)}}var T=r.stateNode;return T!==null&&typeof T.componentDidCatch=="function"&&(d.callback=function(){rh(r,a),typeof y!="function"&&(uo===null?uo=new Set([this]):uo.add(this));var b=a.stack;this.componentDidCatch(a.value,{componentStack:b!==null?b:""})}),d}function a1(r,a,d){var y=r.pingCache;if(y===null){y=r.pingCache=new Xm;var _=new Set;y.set(a,_)}else _=y.get(a),_===void 0&&(_=new Set,y.set(a,_));_.has(d)||(_.add(d),r=o2.bind(null,r,a,d),a.then(r,r))}function l1(r){do{var a;if((a=r.tag===13)&&(a=r.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return r;r=r.return}while(r!==null);return null}function u1(r,a,d,y,_){return r.mode&1?(r.flags|=65536,r.lanes=_,r):(r===a?r.flags|=65536:(r.flags|=128,d.flags|=131072,d.flags&=-52805,d.tag===1&&(d.alternate===null?d.tag=17:(a=ks(-1,1),a.tag=2,ao(d,a,1))),d.lanes|=1),r)}var Ym=Re.ReactCurrentOwner,ri=!1;function Hr(r,a,d,y){a.child=r===null?Nd(a,null,d,y):Ea(a,r.child,d,y)}function c1(r,a,d,y,_){d=d.render;var T=a.ref;return Aa(a,_),y=Qc(r,a,d,y,T,_),d=qc(),r!==null&&!ri?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~_,Ls(r,a,_)):(wn&&d&&bc(a),a.flags|=1,Hr(r,a,y,_),a.child)}function h1(r,a,d,y,_){if(r===null){var T=d.type;return typeof T=="function"&&!Th(T)&&T.defaultProps===void 0&&d.compare===null&&d.defaultProps===void 0?(a.tag=15,a.type=T,f1(r,a,T,y,_)):(r=Cu(d.type,null,y,a,a.mode,_),r.ref=a.ref,r.return=a,a.child=r)}if(T=r.child,!(r.lanes&_)){var b=T.memoizedProps;if(d=d.compare,d=d!==null?d:se,d(b,y)&&r.ref===a.ref)return Ls(r,a,_)}return a.flags|=1,r=go(T,y),r.ref=a.ref,r.return=a,a.child=r}function f1(r,a,d,y,_){if(r!==null){var T=r.memoizedProps;if(se(T,y)&&r.ref===a.ref)if(ri=!1,a.pendingProps=y=T,(r.lanes&_)!==0)r.flags&131072&&(ri=!0);else return a.lanes=r.lanes,Ls(r,a,_)}return ih(r,a,d,y,_)}function d1(r,a,d){var y=a.pendingProps,_=y.children,T=r!==null?r.memoizedState:null;if(y.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},rn(va,wi),wi|=d;else{if(!(d&1073741824))return r=T!==null?T.baseLanes|d:d,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:r,cachePool:null,transitions:null},a.updateQueue=null,rn(va,wi),wi|=r,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},y=T!==null?T.baseLanes:d,rn(va,wi),wi|=y}else T!==null?(y=T.baseLanes|d,a.memoizedState=null):y=d,rn(va,wi),wi|=y;return Hr(r,a,_,d),a.child}function g1(r,a){var d=a.ref;(r===null&&d!==null||r!==null&&r.ref!==d)&&(a.flags|=512,a.flags|=2097152)}function ih(r,a,d,y,_){var T=ni(d)?Bo:br.current;return T=ma(a,T),Aa(a,_),d=Qc(r,a,d,y,T,_),y=qc(),r!==null&&!ri?(a.updateQueue=r.updateQueue,a.flags&=-2053,r.lanes&=~_,Ls(r,a,_)):(wn&&y&&bc(a),a.flags|=1,Hr(r,a,d,_),a.child)}function p1(r,a,d,y,_){if(ni(d)){var T=!0;Ql(a)}else T=!1;if(Aa(a,_),a.stateNode===null)fu(r,a),r1(a,d,y),th(a,d,y,_),y=!0;else if(r===null){var b=a.stateNode,j=a.memoizedProps;b.props=j;var X=b.context,le=d.contextType;typeof le=="object"&&le!==null?le=Di(le):(le=ni(d)?Bo:br.current,le=ma(a,le));var we=d.getDerivedStateFromProps,xe=typeof we=="function"||typeof b.getSnapshotBeforeUpdate=="function";xe||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==y||X!==le)&&i1(a,b,y,le),oo=!1;var pe=a.memoizedState;b.state=pe,ru(a,y,b,_),X=a.memoizedState,j!==y||pe!==X||ti.current||oo?(typeof we=="function"&&(eh(a,d,we,y),X=a.memoizedState),(j=oo||n1(a,d,j,y,pe,X,le))?(xe||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=y,a.memoizedState=X),b.props=y,b.state=X,b.context=le,y=j):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),y=!1)}else{b=a.stateNode,bd(r,a),j=a.memoizedProps,le=a.type===a.elementType?j:Gi(a.type,j),b.props=le,xe=a.pendingProps,pe=b.context,X=d.contextType,typeof X=="object"&&X!==null?X=Di(X):(X=ni(d)?Bo:br.current,X=ma(a,X));var ke=d.getDerivedStateFromProps;(we=typeof ke=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(j!==xe||pe!==X)&&i1(a,b,y,X),oo=!1,pe=a.memoizedState,b.state=pe,ru(a,y,b,_);var He=a.memoizedState;j!==xe||pe!==He||ti.current||oo?(typeof ke=="function"&&(eh(a,d,ke,y),He=a.memoizedState),(le=oo||n1(a,d,le,y,pe,He,X)||!1)?(we||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(y,He,X),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(y,He,X)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||j===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),a.memoizedProps=y,a.memoizedState=He),b.props=y,b.state=He,b.context=X,y=le):(typeof b.componentDidUpdate!="function"||j===r.memoizedProps&&pe===r.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||j===r.memoizedProps&&pe===r.memoizedState||(a.flags|=1024),y=!1)}return sh(r,a,d,y,T,_)}function sh(r,a,d,y,_,T){g1(r,a);var b=(a.flags&128)!==0;if(!y&&!b)return _&&Ed(a,d,!1),Ls(r,a,T);y=a.stateNode,Ym.current=a;var j=b&&typeof d.getDerivedStateFromError!="function"?null:y.render();return a.flags|=1,r!==null&&b?(a.child=Ea(a,r.child,null,T),a.child=Ea(a,null,j,T)):Hr(r,a,j,T),a.memoizedState=y.state,_&&Ed(a,d,!0),a.child}function m1(r){var a=r.stateNode;a.pendingContext?wd(r,a.pendingContext,a.pendingContext!==a.context):a.context&&wd(r,a.context,!1),jc(r,a.containerInfo)}function y1(r,a,d,y,_){return xa(),kc(_),a.flags|=256,Hr(r,a,d,y),a.child}var oh={dehydrated:null,treeContext:null,retryLane:0};function ah(r){return{baseLanes:r,cachePool:null,transitions:null}}function w1(r,a,d){var y=a.pendingProps,_=An.current,T=!1,b=(a.flags&128)!==0,j;if((j=b)||(j=r!==null&&r.memoizedState===null?!1:(_&2)!==0),j?(T=!0,a.flags&=-129):(r===null||r.memoizedState!==null)&&(_|=1),rn(An,_&1),r===null)return Pc(a),r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?(a.mode&1?r.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(b=y.children,r=y.fallback,T?(y=a.mode,T=a.child,b={mode:"hidden",children:b},!(y&1)&&T!==null?(T.childLanes=0,T.pendingProps=b):T=Iu(b,y,0,null),r=Yo(r,y,d,null),T.return=a,r.return=a,T.sibling=r,a.child=T,a.child.memoizedState=ah(d),a.memoizedState=oh,r):lh(a,b));if(_=r.memoizedState,_!==null&&(j=_.dehydrated,j!==null))return Qm(r,a,b,y,j,_,d);if(T){T=y.fallback,b=a.mode,_=r.child,j=_.sibling;var X={mode:"hidden",children:y.children};return!(b&1)&&a.child!==_?(y=a.child,y.childLanes=0,y.pendingProps=X,a.deletions=null):(y=go(_,X),y.subtreeFlags=_.subtreeFlags&14680064),j!==null?T=go(j,T):(T=Yo(T,b,d,null),T.flags|=2),T.return=a,y.return=a,y.sibling=T,a.child=y,y=T,T=a.child,b=r.child.memoizedState,b=b===null?ah(d):{baseLanes:b.baseLanes|d,cachePool:null,transitions:b.transitions},T.memoizedState=b,T.childLanes=r.childLanes&~d,a.memoizedState=oh,y}return T=r.child,r=T.sibling,y=go(T,{mode:"visible",children:y.children}),!(a.mode&1)&&(y.lanes=d),y.return=a,y.sibling=null,r!==null&&(d=a.deletions,d===null?(a.deletions=[r],a.flags|=16):d.push(r)),a.child=y,a.memoizedState=null,y}function lh(r,a){return a=Iu({mode:"visible",children:a},r.mode,0,null),a.return=r,r.child=a}function hu(r,a,d,y){return y!==null&&kc(y),Ea(a,r.child,null,d),r=lh(a,a.pendingProps.children),r.flags|=2,a.memoizedState=null,r}function Qm(r,a,d,y,_,T,b){if(d)return a.flags&256?(a.flags&=-257,y=nh(Error(n(422))),hu(r,a,b,y)):a.memoizedState!==null?(a.child=r.child,a.flags|=128,null):(T=y.fallback,_=a.mode,y=Iu({mode:"visible",children:y.children},_,0,null),T=Yo(T,_,b,null),T.flags|=2,y.return=a,T.return=a,y.sibling=T,a.child=y,a.mode&1&&Ea(a,r.child,null,b),a.child.memoizedState=ah(b),a.memoizedState=oh,T);if(!(a.mode&1))return hu(r,a,b,null);if(_.data==="$!"){if(y=_.nextSibling&&_.nextSibling.dataset,y)var j=y.dgst;return y=j,T=Error(n(419)),y=nh(T,y,void 0),hu(r,a,b,y)}if(j=(b&r.childLanes)!==0,ri||j){if(y=or,y!==null){switch(b&-b){case 4:_=2;break;case 16:_=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:_=32;break;case 536870912:_=268435456;break;default:_=0}_=_&(y.suspendedLanes|b)?0:_,_!==0&&_!==T.retryLane&&(T.retryLane=_,Ps(r,_),Qi(y,r,_,-1))}return Ih(),y=nh(Error(n(421))),hu(r,a,b,y)}return _.data==="$?"?(a.flags|=128,a.child=r.child,a=a2.bind(null,r),_._reactRetry=a,null):(r=T.treeContext,yi=no(_.nextSibling),mi=a,wn=!0,Wi=null,r!==null&&(Ri[Ni++]=Os,Ri[Ni++]=Ms,Ri[Ni++]=Fo,Os=r.id,Ms=r.overflow,Fo=a),a=lh(a,y.children),a.flags|=4096,a)}function x1(r,a,d){r.lanes|=a;var y=r.alternate;y!==null&&(y.lanes|=a),Vc(r.return,a,d)}function uh(r,a,d,y,_){var T=r.memoizedState;T===null?r.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:y,tail:d,tailMode:_}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=y,T.tail=d,T.tailMode=_)}function E1(r,a,d){var y=a.pendingProps,_=y.revealOrder,T=y.tail;if(Hr(r,a,y.children,d),y=An.current,y&2)y=y&1|2,a.flags|=128;else{if(r!==null&&r.flags&128)e:for(r=a.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&x1(r,d,a);else if(r.tag===19)x1(r,d,a);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===a)break e;for(;r.sibling===null;){if(r.return===null||r.return===a)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}y&=1}if(rn(An,y),!(a.mode&1))a.memoizedState=null;else switch(_){case"forwards":for(d=a.child,_=null;d!==null;)r=d.alternate,r!==null&&iu(r)===null&&(_=d),d=d.sibling;d=_,d===null?(_=a.child,a.child=null):(_=d.sibling,d.sibling=null),uh(a,!1,_,d,T);break;case"backwards":for(d=null,_=a.child,a.child=null;_!==null;){if(r=_.alternate,r!==null&&iu(r)===null){a.child=_;break}r=_.sibling,_.sibling=d,d=_,_=r}uh(a,!0,d,null,T);break;case"together":uh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function fu(r,a){!(a.mode&1)&&r!==null&&(r.alternate=null,a.alternate=null,a.flags|=2)}function Ls(r,a,d){if(r!==null&&(a.dependencies=r.dependencies),Ho|=a.lanes,!(d&a.childLanes))return null;if(r!==null&&a.child!==r.child)throw Error(n(153));if(a.child!==null){for(r=a.child,d=go(r,r.pendingProps),a.child=d,d.return=a;r.sibling!==null;)r=r.sibling,d=d.sibling=go(r,r.pendingProps),d.return=a;d.sibling=null}return a.child}function qm(r,a,d){switch(a.tag){case 3:m1(a),xa();break;case 5:Pd(a);break;case 1:ni(a.type)&&Ql(a);break;case 4:jc(a,a.stateNode.containerInfo);break;case 10:var y=a.type._context,_=a.memoizedProps.value;rn(eu,y._currentValue),y._currentValue=_;break;case 13:if(y=a.memoizedState,y!==null)return y.dehydrated!==null?(rn(An,An.current&1),a.flags|=128,null):d&a.child.childLanes?w1(r,a,d):(rn(An,An.current&1),r=Ls(r,a,d),r!==null?r.sibling:null);rn(An,An.current&1);break;case 19:if(y=(d&a.childLanes)!==0,r.flags&128){if(y)return E1(r,a,d);a.flags|=128}if(_=a.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),rn(An,An.current),y)break;return null;case 22:case 23:return a.lanes=0,d1(r,a,d)}return Ls(r,a,d)}var _1,ch,A1,C1;_1=function(r,a){for(var d=a.child;d!==null;){if(d.tag===5||d.tag===6)r.appendChild(d.stateNode);else if(d.tag!==4&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===a)break;for(;d.sibling===null;){if(d.return===null||d.return===a)return;d=d.return}d.sibling.return=d.return,d=d.sibling}},ch=function(){},A1=function(r,a,d,y){var _=r.memoizedProps;if(_!==y){r=a.stateNode,zo(us.current);var T=null;switch(d){case"input":_=Qr(r,_),y=Qr(r,y),T=[];break;case"select":_=be({},_,{value:void 0}),y=be({},y,{value:void 0}),T=[];break;case"textarea":_=Zi(r,_),y=Zi(r,y),T=[];break;default:typeof _.onClick!="function"&&typeof y.onClick=="function"&&(r.onclick=Gl)}Mt(d,y);var b;d=null;for(le in _)if(!y.hasOwnProperty(le)&&_.hasOwnProperty(le)&&_[le]!=null)if(le==="style"){var j=_[le];for(b in j)j.hasOwnProperty(b)&&(d||(d={}),d[b]="")}else le!=="dangerouslySetInnerHTML"&&le!=="children"&&le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&le!=="autoFocus"&&(h.hasOwnProperty(le)?T||(T=[]):(T=T||[]).push(le,null));for(le in y){var X=y[le];if(j=_!=null?_[le]:void 0,y.hasOwnProperty(le)&&X!==j&&(X!=null||j!=null))if(le==="style")if(j){for(b in j)!j.hasOwnProperty(b)||X&&X.hasOwnProperty(b)||(d||(d={}),d[b]="");for(b in X)X.hasOwnProperty(b)&&j[b]!==X[b]&&(d||(d={}),d[b]=X[b])}else d||(T||(T=[]),T.push(le,d)),d=X;else le==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,j=j?j.__html:void 0,X!=null&&j!==X&&(T=T||[]).push(le,X)):le==="children"?typeof X!="string"&&typeof X!="number"||(T=T||[]).push(le,""+X):le!=="suppressContentEditableWarning"&&le!=="suppressHydrationWarning"&&(h.hasOwnProperty(le)?(X!=null&&le==="onScroll"&&un("scroll",r),T||j===X||(T=[])):(T=T||[]).push(le,X))}d&&(T=T||[]).push("style",d);var le=T;(a.updateQueue=le)&&(a.flags|=4)}},C1=function(r,a,d,y){d!==y&&(a.flags|=4)};function cl(r,a){if(!wn)switch(r.tailMode){case"hidden":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?r.tail=null:d.sibling=null;break;case"collapsed":d=r.tail;for(var y=null;d!==null;)d.alternate!==null&&(y=d),d=d.sibling;y===null?a||r.tail===null?r.tail=null:r.tail.sibling=null:y.sibling=null}}function Mr(r){var a=r.alternate!==null&&r.alternate.child===r.child,d=0,y=0;if(a)for(var _=r.child;_!==null;)d|=_.lanes|_.childLanes,y|=_.subtreeFlags&14680064,y|=_.flags&14680064,_.return=r,_=_.sibling;else for(_=r.child;_!==null;)d|=_.lanes|_.childLanes,y|=_.subtreeFlags,y|=_.flags,_.return=r,_=_.sibling;return r.subtreeFlags|=y,r.childLanes=d,a}function Km(r,a,d){var y=a.pendingProps;switch(Oc(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mr(a),null;case 1:return ni(a.type)&&Yl(),Mr(a),null;case 3:return y=a.stateNode,Ca(),cn(ti),cn(br),Gc(),y.pendingContext&&(y.context=y.pendingContext,y.pendingContext=null),(r===null||r.child===null)&&($l(a)?a.flags|=4:r===null||r.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Wi!==null&&(_h(Wi),Wi=null))),ch(r,a),Mr(a),null;case 5:Hc(a);var _=zo(sl.current);if(d=a.type,r!==null&&a.stateNode!=null)A1(r,a,d,y,_),r.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!y){if(a.stateNode===null)throw Error(n(166));return Mr(a),null}if(r=zo(us.current),$l(a)){y=a.stateNode,d=a.type;var T=a.memoizedProps;switch(y[ls]=a,y[el]=T,r=(a.mode&1)!==0,d){case"dialog":un("cancel",y),un("close",y);break;case"iframe":case"object":case"embed":un("load",y);break;case"video":case"audio":for(_=0;_<Za.length;_++)un(Za[_],y);break;case"source":un("error",y);break;case"img":case"image":case"link":un("error",y),un("load",y);break;case"details":un("toggle",y);break;case"input":ur(y,T),un("invalid",y);break;case"select":y._wrapperState={wasMultiple:!!T.multiple},un("invalid",y);break;case"textarea":ws(y,T),un("invalid",y)}Mt(d,T),_=null;for(var b in T)if(T.hasOwnProperty(b)){var j=T[b];b==="children"?typeof j=="string"?y.textContent!==j&&(T.suppressHydrationWarning!==!0&&Wl(y.textContent,j,r),_=["children",j]):typeof j=="number"&&y.textContent!==""+j&&(T.suppressHydrationWarning!==!0&&Wl(y.textContent,j,r),_=["children",""+j]):h.hasOwnProperty(b)&&j!=null&&b==="onScroll"&&un("scroll",y)}switch(d){case"input":dn(y),Vt(y,T,!0);break;case"textarea":dn(y),xs(y);break;case"select":case"option":break;default:typeof T.onClick=="function"&&(y.onclick=Gl)}y=_,a.updateQueue=y,y!==null&&(a.flags|=4)}else{b=_.nodeType===9?_:_.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=Ut(d)),r==="http://www.w3.org/1999/xhtml"?d==="script"?(r=b.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof y.is=="string"?r=b.createElement(d,{is:y.is}):(r=b.createElement(d),d==="select"&&(b=r,y.multiple?b.multiple=!0:y.size&&(b.size=y.size))):r=b.createElementNS(r,d),r[ls]=a,r[el]=y,_1(r,a,!1,!1),a.stateNode=r;e:{switch(b=qt(d,y),d){case"dialog":un("cancel",r),un("close",r),_=y;break;case"iframe":case"object":case"embed":un("load",r),_=y;break;case"video":case"audio":for(_=0;_<Za.length;_++)un(Za[_],r);_=y;break;case"source":un("error",r),_=y;break;case"img":case"image":case"link":un("error",r),un("load",r),_=y;break;case"details":un("toggle",r),_=y;break;case"input":ur(r,y),_=Qr(r,y),un("invalid",r);break;case"option":_=y;break;case"select":r._wrapperState={wasMultiple:!!y.multiple},_=be({},y,{value:void 0}),un("invalid",r);break;case"textarea":ws(r,y),_=Zi(r,y),un("invalid",r);break;default:_=y}Mt(d,_),j=_;for(T in j)if(j.hasOwnProperty(T)){var X=j[T];T==="style"?Se(r,X):T==="dangerouslySetInnerHTML"?(X=X?X.__html:void 0,X!=null&&kn(r,X)):T==="children"?typeof X=="string"?(d!=="textarea"||X!=="")&&Fi(r,X):typeof X=="number"&&Fi(r,""+X):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(h.hasOwnProperty(T)?X!=null&&T==="onScroll"&&un("scroll",r):X!=null&&ye(r,T,X,b))}switch(d){case"input":dn(r),Vt(r,y,!1);break;case"textarea":dn(r),xs(r);break;case"option":y.value!=null&&r.setAttribute("value",""+nt(y.value));break;case"select":r.multiple=!!y.multiple,T=y.value,T!=null?Pe(r,!!y.multiple,T,!1):y.defaultValue!=null&&Pe(r,!!y.multiple,y.defaultValue,!0);break;default:typeof _.onClick=="function"&&(r.onclick=Gl)}switch(d){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}}y&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Mr(a),null;case 6:if(r&&a.stateNode!=null)C1(r,a,r.memoizedProps,y);else{if(typeof y!="string"&&a.stateNode===null)throw Error(n(166));if(d=zo(sl.current),zo(us.current),$l(a)){if(y=a.stateNode,d=a.memoizedProps,y[ls]=a,(T=y.nodeValue!==d)&&(r=mi,r!==null))switch(r.tag){case 3:Wl(y.nodeValue,d,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Wl(y.nodeValue,d,(r.mode&1)!==0)}T&&(a.flags|=4)}else y=(d.nodeType===9?d:d.ownerDocument).createTextNode(y),y[ls]=a,a.stateNode=y}return Mr(a),null;case 13:if(cn(An),y=a.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(wn&&yi!==null&&a.mode&1&&!(a.flags&128))vd(),xa(),a.flags|=98560,T=!1;else if(T=$l(a),y!==null&&y.dehydrated!==null){if(r===null){if(!T)throw Error(n(318));if(T=a.memoizedState,T=T!==null?T.dehydrated:null,!T)throw Error(n(317));T[ls]=a}else xa(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Mr(a),T=!1}else Wi!==null&&(_h(Wi),Wi=null),T=!0;if(!T)return a.flags&65536?a:null}return a.flags&128?(a.lanes=d,a):(y=y!==null,y!==(r!==null&&r.memoizedState!==null)&&y&&(a.child.flags|=8192,a.mode&1&&(r===null||An.current&1?Kn===0&&(Kn=3):Ih())),a.updateQueue!==null&&(a.flags|=4),Mr(a),null);case 4:return Ca(),ch(r,a),r===null&&$a(a.stateNode.containerInfo),Mr(a),null;case 10:return Fc(a.type._context),Mr(a),null;case 17:return ni(a.type)&&Yl(),Mr(a),null;case 19:if(cn(An),T=a.memoizedState,T===null)return Mr(a),null;if(y=(a.flags&128)!==0,b=T.rendering,b===null)if(y)cl(T,!1);else{if(Kn!==0||r!==null&&r.flags&128)for(r=a.child;r!==null;){if(b=iu(r),b!==null){for(a.flags|=128,cl(T,!1),y=b.updateQueue,y!==null&&(a.updateQueue=y,a.flags|=4),a.subtreeFlags=0,y=d,d=a.child;d!==null;)T=d,r=y,T.flags&=14680066,b=T.alternate,b===null?(T.childLanes=0,T.lanes=r,T.child=null,T.subtreeFlags=0,T.memoizedProps=null,T.memoizedState=null,T.updateQueue=null,T.dependencies=null,T.stateNode=null):(T.childLanes=b.childLanes,T.lanes=b.lanes,T.child=b.child,T.subtreeFlags=0,T.deletions=null,T.memoizedProps=b.memoizedProps,T.memoizedState=b.memoizedState,T.updateQueue=b.updateQueue,T.type=b.type,r=b.dependencies,T.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),d=d.sibling;return rn(An,An.current&1|2),a.child}r=r.sibling}T.tail!==null&&St()>Sa&&(a.flags|=128,y=!0,cl(T,!1),a.lanes=4194304)}else{if(!y)if(r=iu(b),r!==null){if(a.flags|=128,y=!0,d=r.updateQueue,d!==null&&(a.updateQueue=d,a.flags|=4),cl(T,!0),T.tail===null&&T.tailMode==="hidden"&&!b.alternate&&!wn)return Mr(a),null}else 2*St()-T.renderingStartTime>Sa&&d!==1073741824&&(a.flags|=128,y=!0,cl(T,!1),a.lanes=4194304);T.isBackwards?(b.sibling=a.child,a.child=b):(d=T.last,d!==null?d.sibling=b:a.child=b,T.last=b)}return T.tail!==null?(a=T.tail,T.rendering=a,T.tail=a.sibling,T.renderingStartTime=St(),a.sibling=null,d=An.current,rn(An,y?d&1|2:d&1),a):(Mr(a),null);case 22:case 23:return Ch(),y=a.memoizedState!==null,r!==null&&r.memoizedState!==null!==y&&(a.flags|=8192),y&&a.mode&1?wi&1073741824&&(Mr(a),a.subtreeFlags&6&&(a.flags|=8192)):Mr(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function Zm(r,a){switch(Oc(a),a.tag){case 1:return ni(a.type)&&Yl(),r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 3:return Ca(),cn(ti),cn(br),Gc(),r=a.flags,r&65536&&!(r&128)?(a.flags=r&-65537|128,a):null;case 5:return Hc(a),null;case 13:if(cn(An),r=a.memoizedState,r!==null&&r.dehydrated!==null){if(a.alternate===null)throw Error(n(340));xa()}return r=a.flags,r&65536?(a.flags=r&-65537|128,a):null;case 19:return cn(An),null;case 4:return Ca(),null;case 10:return Fc(a.type._context),null;case 22:case 23:return Ch(),null;case 24:return null;default:return null}}var du=!1,Pr=!1,$m=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function Ta(r,a){var d=r.ref;if(d!==null)if(typeof d=="function")try{d(null)}catch(y){bn(r,a,y)}else d.current=null}function hh(r,a,d){try{d()}catch(y){bn(r,a,y)}}var I1=!1;function Jm(r,a){if(Cc=$r,r=xt(),at(r)){if("selectionStart"in r)var d={start:r.selectionStart,end:r.selectionEnd};else e:{d=(d=r.ownerDocument)&&d.defaultView||window;var y=d.getSelection&&d.getSelection();if(y&&y.rangeCount!==0){d=y.anchorNode;var _=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{d.nodeType,T.nodeType}catch{d=null;break e}var b=0,j=-1,X=-1,le=0,we=0,xe=r,pe=null;t:for(;;){for(var ke;xe!==d||_!==0&&xe.nodeType!==3||(j=b+_),xe!==T||y!==0&&xe.nodeType!==3||(X=b+y),xe.nodeType===3&&(b+=xe.nodeValue.length),(ke=xe.firstChild)!==null;)pe=xe,xe=ke;for(;;){if(xe===r)break t;if(pe===d&&++le===_&&(j=b),pe===T&&++we===y&&(X=b),(ke=xe.nextSibling)!==null)break;xe=pe,pe=xe.parentNode}xe=ke}d=j===-1||X===-1?null:{start:j,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ic={focusedElem:r,selectionRange:d},$r=!1,Ve=a;Ve!==null;)if(a=Ve,r=a.child,(a.subtreeFlags&1028)!==0&&r!==null)r.return=a,Ve=r;else for(;Ve!==null;){a=Ve;try{var He=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Ge=He.memoizedProps,Un=He.memoizedState,ne=a.stateNode,K=ne.getSnapshotBeforeUpdate(a.elementType===a.type?Ge:Gi(a.type,Ge),Un);ne.__reactInternalSnapshotBeforeUpdate=K}break;case 3:var re=a.stateNode.containerInfo;re.nodeType===1?re.textContent="":re.nodeType===9&&re.documentElement&&re.removeChild(re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Ce){bn(a,a.return,Ce)}if(r=a.sibling,r!==null){r.return=a.return,Ve=r;break}Ve=a.return}return He=I1,I1=!1,He}function hl(r,a,d){var y=a.updateQueue;if(y=y!==null?y.lastEffect:null,y!==null){var _=y=y.next;do{if((_.tag&r)===r){var T=_.destroy;_.destroy=void 0,T!==void 0&&hh(a,d,T)}_=_.next}while(_!==y)}}function gu(r,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var d=a=a.next;do{if((d.tag&r)===r){var y=d.create;d.destroy=y()}d=d.next}while(d!==a)}}function fh(r){var a=r.ref;if(a!==null){var d=r.stateNode;switch(r.tag){case 5:r=d;break;default:r=d}typeof a=="function"?a(r):a.current=r}}function T1(r){var a=r.alternate;a!==null&&(r.alternate=null,T1(a)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(a=r.stateNode,a!==null&&(delete a[ls],delete a[el],delete a[Rc],delete a[km],delete a[Lm])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function v1(r){return r.tag===5||r.tag===3||r.tag===4}function S1(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||v1(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function dh(r,a,d){var y=r.tag;if(y===5||y===6)r=r.stateNode,a?d.nodeType===8?d.parentNode.insertBefore(r,a):d.insertBefore(r,a):(d.nodeType===8?(a=d.parentNode,a.insertBefore(r,d)):(a=d,a.appendChild(r)),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Gl));else if(y!==4&&(r=r.child,r!==null))for(dh(r,a,d),r=r.sibling;r!==null;)dh(r,a,d),r=r.sibling}function gh(r,a,d){var y=r.tag;if(y===5||y===6)r=r.stateNode,a?d.insertBefore(r,a):d.appendChild(r);else if(y!==4&&(r=r.child,r!==null))for(gh(r,a,d),r=r.sibling;r!==null;)gh(r,a,d),r=r.sibling}var mr=null,Xi=!1;function lo(r,a,d){for(d=d.child;d!==null;)R1(r,a,d),d=d.sibling}function R1(r,a,d){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Et,d)}catch{}switch(d.tag){case 5:Pr||Ta(d,a);case 6:var y=mr,_=Xi;mr=null,lo(r,a,d),mr=y,Xi=_,mr!==null&&(Xi?(r=mr,d=d.stateNode,r.nodeType===8?r.parentNode.removeChild(d):r.removeChild(d)):mr.removeChild(d.stateNode));break;case 18:mr!==null&&(Xi?(r=mr,d=d.stateNode,r.nodeType===8?Sc(r.parentNode,d):r.nodeType===1&&Sc(r,d),fr(r)):Sc(mr,d.stateNode));break;case 4:y=mr,_=Xi,mr=d.stateNode.containerInfo,Xi=!0,lo(r,a,d),mr=y,Xi=_;break;case 0:case 11:case 14:case 15:if(!Pr&&(y=d.updateQueue,y!==null&&(y=y.lastEffect,y!==null))){_=y=y.next;do{var T=_,b=T.destroy;T=T.tag,b!==void 0&&(T&2||T&4)&&hh(d,a,b),_=_.next}while(_!==y)}lo(r,a,d);break;case 1:if(!Pr&&(Ta(d,a),y=d.stateNode,typeof y.componentWillUnmount=="function"))try{y.props=d.memoizedProps,y.state=d.memoizedState,y.componentWillUnmount()}catch(j){bn(d,a,j)}lo(r,a,d);break;case 21:lo(r,a,d);break;case 22:d.mode&1?(Pr=(y=Pr)||d.memoizedState!==null,lo(r,a,d),Pr=y):lo(r,a,d);break;default:lo(r,a,d)}}function N1(r){var a=r.updateQueue;if(a!==null){r.updateQueue=null;var d=r.stateNode;d===null&&(d=r.stateNode=new $m),a.forEach(function(y){var _=l2.bind(null,r,y);d.has(y)||(d.add(y),y.then(_,_))})}}function Yi(r,a){var d=a.deletions;if(d!==null)for(var y=0;y<d.length;y++){var _=d[y];try{var T=r,b=a,j=b;e:for(;j!==null;){switch(j.tag){case 5:mr=j.stateNode,Xi=!1;break e;case 3:mr=j.stateNode.containerInfo,Xi=!0;break e;case 4:mr=j.stateNode.containerInfo,Xi=!0;break e}j=j.return}if(mr===null)throw Error(n(160));R1(T,b,_),mr=null,Xi=!1;var X=_.alternate;X!==null&&(X.return=null),_.return=null}catch(le){bn(_,a,le)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)D1(a,r),a=a.sibling}function D1(r,a){var d=r.alternate,y=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(Yi(a,r),hs(r),y&4){try{hl(3,r,r.return),gu(3,r)}catch(Ge){bn(r,r.return,Ge)}try{hl(5,r,r.return)}catch(Ge){bn(r,r.return,Ge)}}break;case 1:Yi(a,r),hs(r),y&512&&d!==null&&Ta(d,d.return);break;case 5:if(Yi(a,r),hs(r),y&512&&d!==null&&Ta(d,d.return),r.flags&32){var _=r.stateNode;try{Fi(_,"")}catch(Ge){bn(r,r.return,Ge)}}if(y&4&&(_=r.stateNode,_!=null)){var T=r.memoizedProps,b=d!==null?d.memoizedProps:T,j=r.type,X=r.updateQueue;if(r.updateQueue=null,X!==null)try{j==="input"&&T.type==="radio"&&T.name!=null&&Bi(_,T),qt(j,b);var le=qt(j,T);for(b=0;b<X.length;b+=2){var we=X[b],xe=X[b+1];we==="style"?Se(_,xe):we==="dangerouslySetInnerHTML"?kn(_,xe):we==="children"?Fi(_,xe):ye(_,we,xe,le)}switch(j){case"input":En(_,T);break;case"textarea":Ar(_,T);break;case"select":var pe=_._wrapperState.wasMultiple;_._wrapperState.wasMultiple=!!T.multiple;var ke=T.value;ke!=null?Pe(_,!!T.multiple,ke,!1):pe!==!!T.multiple&&(T.defaultValue!=null?Pe(_,!!T.multiple,T.defaultValue,!0):Pe(_,!!T.multiple,T.multiple?[]:"",!1))}_[el]=T}catch(Ge){bn(r,r.return,Ge)}}break;case 6:if(Yi(a,r),hs(r),y&4){if(r.stateNode===null)throw Error(n(162));_=r.stateNode,T=r.memoizedProps;try{_.nodeValue=T}catch(Ge){bn(r,r.return,Ge)}}break;case 3:if(Yi(a,r),hs(r),y&4&&d!==null&&d.memoizedState.isDehydrated)try{fr(a.containerInfo)}catch(Ge){bn(r,r.return,Ge)}break;case 4:Yi(a,r),hs(r);break;case 13:Yi(a,r),hs(r),_=r.child,_.flags&8192&&(T=_.memoizedState!==null,_.stateNode.isHidden=T,!T||_.alternate!==null&&_.alternate.memoizedState!==null||(yh=St())),y&4&&N1(r);break;case 22:if(we=d!==null&&d.memoizedState!==null,r.mode&1?(Pr=(le=Pr)||we,Yi(a,r),Pr=le):Yi(a,r),hs(r),y&8192){if(le=r.memoizedState!==null,(r.stateNode.isHidden=le)&&!we&&r.mode&1)for(Ve=r,we=r.child;we!==null;){for(xe=Ve=we;Ve!==null;){switch(pe=Ve,ke=pe.child,pe.tag){case 0:case 11:case 14:case 15:hl(4,pe,pe.return);break;case 1:Ta(pe,pe.return);var He=pe.stateNode;if(typeof He.componentWillUnmount=="function"){y=pe,d=pe.return;try{a=y,He.props=a.memoizedProps,He.state=a.memoizedState,He.componentWillUnmount()}catch(Ge){bn(y,d,Ge)}}break;case 5:Ta(pe,pe.return);break;case 22:if(pe.memoizedState!==null){M1(xe);continue}}ke!==null?(ke.return=pe,Ve=ke):M1(xe)}we=we.sibling}e:for(we=null,xe=r;;){if(xe.tag===5){if(we===null){we=xe;try{_=xe.stateNode,le?(T=_.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none"):(j=xe.stateNode,X=xe.memoizedProps.style,b=X!=null&&X.hasOwnProperty("display")?X.display:null,j.style.display=tn("display",b))}catch(Ge){bn(r,r.return,Ge)}}}else if(xe.tag===6){if(we===null)try{xe.stateNode.nodeValue=le?"":xe.memoizedProps}catch(Ge){bn(r,r.return,Ge)}}else if((xe.tag!==22&&xe.tag!==23||xe.memoizedState===null||xe===r)&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===r)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===r)break e;we===xe&&(we=null),xe=xe.return}we===xe&&(we=null),xe.sibling.return=xe.return,xe=xe.sibling}}break;case 19:Yi(a,r),hs(r),y&4&&N1(r);break;case 21:break;default:Yi(a,r),hs(r)}}function hs(r){var a=r.flags;if(a&2){try{e:{for(var d=r.return;d!==null;){if(v1(d)){var y=d;break e}d=d.return}throw Error(n(160))}switch(y.tag){case 5:var _=y.stateNode;y.flags&32&&(Fi(_,""),y.flags&=-33);var T=S1(r);gh(r,T,_);break;case 3:case 4:var b=y.stateNode.containerInfo,j=S1(r);dh(r,j,b);break;default:throw Error(n(161))}}catch(X){bn(r,r.return,X)}r.flags&=-3}a&4096&&(r.flags&=-4097)}function e2(r,a,d){Ve=r,b1(r)}function b1(r,a,d){for(var y=(r.mode&1)!==0;Ve!==null;){var _=Ve,T=_.child;if(_.tag===22&&y){var b=_.memoizedState!==null||du;if(!b){var j=_.alternate,X=j!==null&&j.memoizedState!==null||Pr;j=du;var le=Pr;if(du=b,(Pr=X)&&!le)for(Ve=_;Ve!==null;)b=Ve,X=b.child,b.tag===22&&b.memoizedState!==null?P1(_):X!==null?(X.return=b,Ve=X):P1(_);for(;T!==null;)Ve=T,b1(T),T=T.sibling;Ve=_,du=j,Pr=le}O1(r)}else _.subtreeFlags&8772&&T!==null?(T.return=_,Ve=T):O1(r)}}function O1(r){for(;Ve!==null;){var a=Ve;if(a.flags&8772){var d=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Pr||gu(5,a);break;case 1:var y=a.stateNode;if(a.flags&4&&!Pr)if(d===null)y.componentDidMount();else{var _=a.elementType===a.type?d.memoizedProps:Gi(a.type,d.memoizedProps);y.componentDidUpdate(_,d.memoizedState,y.__reactInternalSnapshotBeforeUpdate)}var T=a.updateQueue;T!==null&&Md(a,T,y);break;case 3:var b=a.updateQueue;if(b!==null){if(d=null,a.child!==null)switch(a.child.tag){case 5:d=a.child.stateNode;break;case 1:d=a.child.stateNode}Md(a,b,d)}break;case 5:var j=a.stateNode;if(d===null&&a.flags&4){d=j;var X=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":X.autoFocus&&d.focus();break;case"img":X.src&&(d.src=X.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var le=a.alternate;if(le!==null){var we=le.memoizedState;if(we!==null){var xe=we.dehydrated;xe!==null&&fr(xe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Pr||a.flags&512&&fh(a)}catch(pe){bn(a,a.return,pe)}}if(a===r){Ve=null;break}if(d=a.sibling,d!==null){d.return=a.return,Ve=d;break}Ve=a.return}}function M1(r){for(;Ve!==null;){var a=Ve;if(a===r){Ve=null;break}var d=a.sibling;if(d!==null){d.return=a.return,Ve=d;break}Ve=a.return}}function P1(r){for(;Ve!==null;){var a=Ve;try{switch(a.tag){case 0:case 11:case 15:var d=a.return;try{gu(4,a)}catch(X){bn(a,d,X)}break;case 1:var y=a.stateNode;if(typeof y.componentDidMount=="function"){var _=a.return;try{y.componentDidMount()}catch(X){bn(a,_,X)}}var T=a.return;try{fh(a)}catch(X){bn(a,T,X)}break;case 5:var b=a.return;try{fh(a)}catch(X){bn(a,b,X)}}}catch(X){bn(a,a.return,X)}if(a===r){Ve=null;break}var j=a.sibling;if(j!==null){j.return=a.return,Ve=j;break}Ve=a.return}}var t2=Math.ceil,pu=Re.ReactCurrentDispatcher,ph=Re.ReactCurrentOwner,Oi=Re.ReactCurrentBatchConfig,Pt=0,or=null,jn=null,yr=0,wi=0,va=ro(0),Kn=0,fl=null,Ho=0,mu=0,mh=0,dl=null,ii=null,yh=0,Sa=1/0,Bs=null,yu=!1,wh=null,uo=null,wu=!1,co=null,xu=0,gl=0,xh=null,Eu=-1,_u=0;function Wr(){return Pt&6?St():Eu!==-1?Eu:Eu=St()}function ho(r){return r.mode&1?Pt&2&&yr!==0?yr&-yr:Fm.transition!==null?(_u===0&&(_u=mn()),_u):(r=it,r!==0||(r=window.event,r=r===void 0?16:Ks(r.type)),r):1}function Qi(r,a,d,y){if(50<gl)throw gl=0,xh=null,Error(n(185));B(r,d,y),(!(Pt&2)||r!==or)&&(r===or&&(!(Pt&2)&&(mu|=d),Kn===4&&fo(r,yr)),si(r,y),d===1&&Pt===0&&!(a.mode&1)&&(Sa=St()+500,ql&&so()))}function si(r,a){var d=r.callbackNode;vr(r,a);var y=Tr(r,r===or?yr:0);if(y===0)d!==null&&Ln(d),r.callbackNode=null,r.callbackPriority=0;else if(a=y&-y,r.callbackPriority!==a){if(d!=null&&Ln(d),a===1)r.tag===0?Bm(L1.bind(null,r)):_d(L1.bind(null,r)),Mm(function(){!(Pt&6)&&so()}),d=null;else{switch(rs(y)){case 1:d=de;break;case 4:d=ns;break;case 16:d=Rt;break;case 536870912:d=oa;break;default:d=Rt}d=W1(d,k1.bind(null,r))}r.callbackPriority=a,r.callbackNode=d}}function k1(r,a){if(Eu=-1,_u=0,Pt&6)throw Error(n(327));var d=r.callbackNode;if(Ra()&&r.callbackNode!==d)return null;var y=Tr(r,r===or?yr:0);if(y===0)return null;if(y&30||y&r.expiredLanes||a)a=Au(r,y);else{a=y;var _=Pt;Pt|=2;var T=F1();(or!==r||yr!==a)&&(Bs=null,Sa=St()+500,Go(r,a));do try{i2();break}catch(j){B1(r,j)}while(!0);Bc(),pu.current=T,Pt=_,jn!==null?a=0:(or=null,yr=0,a=Kn)}if(a!==0){if(a===2&&(_=wt(r),_!==0&&(y=_,a=Eh(r,_))),a===1)throw d=fl,Go(r,0),fo(r,y),si(r,St()),d;if(a===6)fo(r,y);else{if(_=r.current.alternate,!(y&30)&&!n2(_)&&(a=Au(r,y),a===2&&(T=wt(r),T!==0&&(y=T,a=Eh(r,T))),a===1))throw d=fl,Go(r,0),fo(r,y),si(r,St()),d;switch(r.finishedWork=_,r.finishedLanes=y,a){case 0:case 1:throw Error(n(345));case 2:Xo(r,ii,Bs);break;case 3:if(fo(r,y),(y&130023424)===y&&(a=yh+500-St(),10<a)){if(Tr(r,0)!==0)break;if(_=r.suspendedLanes,(_&y)!==y){Wr(),r.pingedLanes|=r.suspendedLanes&_;break}r.timeoutHandle=vc(Xo.bind(null,r,ii,Bs),a);break}Xo(r,ii,Bs);break;case 4:if(fo(r,y),(y&4194240)===y)break;for(a=r.eventTimes,_=-1;0<y;){var b=31-Xn(y);T=1<<b,b=a[b],b>_&&(_=b),y&=~T}if(y=_,y=St()-y,y=(120>y?120:480>y?480:1080>y?1080:1920>y?1920:3e3>y?3e3:4320>y?4320:1960*t2(y/1960))-y,10<y){r.timeoutHandle=vc(Xo.bind(null,r,ii,Bs),y);break}Xo(r,ii,Bs);break;case 5:Xo(r,ii,Bs);break;default:throw Error(n(329))}}}return si(r,St()),r.callbackNode===d?k1.bind(null,r):null}function Eh(r,a){var d=dl;return r.current.memoizedState.isDehydrated&&(Go(r,a).flags|=256),r=Au(r,a),r!==2&&(a=ii,ii=d,a!==null&&_h(a)),r}function _h(r){ii===null?ii=r:ii.push.apply(ii,r)}function n2(r){for(var a=r;;){if(a.flags&16384){var d=a.updateQueue;if(d!==null&&(d=d.stores,d!==null))for(var y=0;y<d.length;y++){var _=d[y],T=_.getSnapshot;_=_.value;try{if(!Z(T(),_))return!1}catch{return!1}}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===r)break;for(;a.sibling===null;){if(a.return===null||a.return===r)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function fo(r,a){for(a&=~mh,a&=~mu,r.suspendedLanes|=a,r.pingedLanes&=~a,r=r.expirationTimes;0<a;){var d=31-Xn(a),y=1<<d;r[d]=-1,a&=~y}}function L1(r){if(Pt&6)throw Error(n(327));Ra();var a=Tr(r,0);if(!(a&1))return si(r,St()),null;var d=Au(r,a);if(r.tag!==0&&d===2){var y=wt(r);y!==0&&(a=y,d=Eh(r,y))}if(d===1)throw d=fl,Go(r,0),fo(r,a),si(r,St()),d;if(d===6)throw Error(n(345));return r.finishedWork=r.current.alternate,r.finishedLanes=a,Xo(r,ii,Bs),si(r,St()),null}function Ah(r,a){var d=Pt;Pt|=1;try{return r(a)}finally{Pt=d,Pt===0&&(Sa=St()+500,ql&&so())}}function Wo(r){co!==null&&co.tag===0&&!(Pt&6)&&Ra();var a=Pt;Pt|=1;var d=Oi.transition,y=it;try{if(Oi.transition=null,it=1,r)return r()}finally{it=y,Oi.transition=d,Pt=a,!(Pt&6)&&so()}}function Ch(){wi=va.current,cn(va)}function Go(r,a){r.finishedWork=null,r.finishedLanes=0;var d=r.timeoutHandle;if(d!==-1&&(r.timeoutHandle=-1,Om(d)),jn!==null)for(d=jn.return;d!==null;){var y=d;switch(Oc(y),y.tag){case 1:y=y.type.childContextTypes,y!=null&&Yl();break;case 3:Ca(),cn(ti),cn(br),Gc();break;case 5:Hc(y);break;case 4:Ca();break;case 13:cn(An);break;case 19:cn(An);break;case 10:Fc(y.type._context);break;case 22:case 23:Ch()}d=d.return}if(or=r,jn=r=go(r.current,null),yr=wi=a,Kn=0,fl=null,mh=mu=Ho=0,ii=dl=null,Uo!==null){for(a=0;a<Uo.length;a++)if(d=Uo[a],y=d.interleaved,y!==null){d.interleaved=null;var _=y.next,T=d.pending;if(T!==null){var b=T.next;T.next=_,y.next=b}d.pending=y}Uo=null}return r}function B1(r,a){do{var d=jn;try{if(Bc(),su.current=uu,ou){for(var y=Cn.memoizedState;y!==null;){var _=y.queue;_!==null&&(_.pending=null),y=y.next}ou=!1}if(jo=0,sr=qn=Cn=null,ol=!1,al=0,ph.current=null,d===null||d.return===null){Kn=1,fl=a,jn=null;break}e:{var T=r,b=d.return,j=d,X=a;if(a=yr,j.flags|=32768,X!==null&&typeof X=="object"&&typeof X.then=="function"){var le=X,we=j,xe=we.tag;if(!(we.mode&1)&&(xe===0||xe===11||xe===15)){var pe=we.alternate;pe?(we.updateQueue=pe.updateQueue,we.memoizedState=pe.memoizedState,we.lanes=pe.lanes):(we.updateQueue=null,we.memoizedState=null)}var ke=l1(b);if(ke!==null){ke.flags&=-257,u1(ke,b,j,T,a),ke.mode&1&&a1(T,le,a),a=ke,X=le;var He=a.updateQueue;if(He===null){var Ge=new Set;Ge.add(X),a.updateQueue=Ge}else He.add(X);break e}else{if(!(a&1)){a1(T,le,a),Ih();break e}X=Error(n(426))}}else if(wn&&j.mode&1){var Un=l1(b);if(Un!==null){!(Un.flags&65536)&&(Un.flags|=256),u1(Un,b,j,T,a),kc(Ia(X,j));break e}}T=X=Ia(X,j),Kn!==4&&(Kn=2),dl===null?dl=[T]:dl.push(T),T=b;do{switch(T.tag){case 3:T.flags|=65536,a&=-a,T.lanes|=a;var ne=s1(T,X,a);Od(T,ne);break e;case 1:j=X;var K=T.type,re=T.stateNode;if(!(T.flags&128)&&(typeof K.getDerivedStateFromError=="function"||re!==null&&typeof re.componentDidCatch=="function"&&(uo===null||!uo.has(re)))){T.flags|=65536,a&=-a,T.lanes|=a;var Ce=o1(T,j,a);Od(T,Ce);break e}}T=T.return}while(T!==null)}U1(d)}catch(Xe){a=Xe,jn===d&&d!==null&&(jn=d=d.return);continue}break}while(!0)}function F1(){var r=pu.current;return pu.current=uu,r===null?uu:r}function Ih(){(Kn===0||Kn===3||Kn===2)&&(Kn=4),or===null||!(Ho&268435455)&&!(mu&268435455)||fo(or,yr)}function Au(r,a){var d=Pt;Pt|=2;var y=F1();(or!==r||yr!==a)&&(Bs=null,Go(r,a));do try{r2();break}catch(_){B1(r,_)}while(!0);if(Bc(),Pt=d,pu.current=y,jn!==null)throw Error(n(261));return or=null,yr=0,Kn}function r2(){for(;jn!==null;)V1(jn)}function i2(){for(;jn!==null&&!Xt();)V1(jn)}function V1(r){var a=H1(r.alternate,r,wi);r.memoizedProps=r.pendingProps,a===null?U1(r):jn=a,ph.current=null}function U1(r){var a=r;do{var d=a.alternate;if(r=a.return,a.flags&32768){if(d=Zm(d,a),d!==null){d.flags&=32767,jn=d;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{Kn=6,jn=null;return}}else if(d=Km(d,a,wi),d!==null){jn=d;return}if(a=a.sibling,a!==null){jn=a;return}jn=a=r}while(a!==null);Kn===0&&(Kn=5)}function Xo(r,a,d){var y=it,_=Oi.transition;try{Oi.transition=null,it=1,s2(r,a,d,y)}finally{Oi.transition=_,it=y}return null}function s2(r,a,d,y){do Ra();while(co!==null);if(Pt&6)throw Error(n(327));d=r.finishedWork;var _=r.finishedLanes;if(d===null)return null;if(r.finishedWork=null,r.finishedLanes=0,d===r.current)throw Error(n(177));r.callbackNode=null,r.callbackPriority=0;var T=d.lanes|d.childLanes;if(Ne(r,T),r===or&&(jn=or=null,yr=0),!(d.subtreeFlags&2064)&&!(d.flags&2064)||wu||(wu=!0,W1(Rt,function(){return Ra(),null})),T=(d.flags&15990)!==0,d.subtreeFlags&15990||T){T=Oi.transition,Oi.transition=null;var b=it;it=1;var j=Pt;Pt|=4,ph.current=null,Jm(r,d),D1(d,r),Dr(Ic),$r=!!Cc,Ic=Cc=null,r.current=d,e2(d),sa(),Pt=j,it=b,Oi.transition=T}else r.current=d;if(wu&&(wu=!1,co=r,xu=_),T=r.pendingLanes,T===0&&(uo=null),yt(d.stateNode),si(r,St()),a!==null)for(y=r.onRecoverableError,d=0;d<a.length;d++)_=a[d],y(_.value,{componentStack:_.stack,digest:_.digest});if(yu)throw yu=!1,r=wh,wh=null,r;return xu&1&&r.tag!==0&&Ra(),T=r.pendingLanes,T&1?r===xh?gl++:(gl=0,xh=r):gl=0,so(),null}function Ra(){if(co!==null){var r=rs(xu),a=Oi.transition,d=it;try{if(Oi.transition=null,it=16>r?16:r,co===null)var y=!1;else{if(r=co,co=null,xu=0,Pt&6)throw Error(n(331));var _=Pt;for(Pt|=4,Ve=r.current;Ve!==null;){var T=Ve,b=T.child;if(Ve.flags&16){var j=T.deletions;if(j!==null){for(var X=0;X<j.length;X++){var le=j[X];for(Ve=le;Ve!==null;){var we=Ve;switch(we.tag){case 0:case 11:case 15:hl(8,we,T)}var xe=we.child;if(xe!==null)xe.return=we,Ve=xe;else for(;Ve!==null;){we=Ve;var pe=we.sibling,ke=we.return;if(T1(we),we===le){Ve=null;break}if(pe!==null){pe.return=ke,Ve=pe;break}Ve=ke}}}var He=T.alternate;if(He!==null){var Ge=He.child;if(Ge!==null){He.child=null;do{var Un=Ge.sibling;Ge.sibling=null,Ge=Un}while(Ge!==null)}}Ve=T}}if(T.subtreeFlags&2064&&b!==null)b.return=T,Ve=b;else e:for(;Ve!==null;){if(T=Ve,T.flags&2048)switch(T.tag){case 0:case 11:case 15:hl(9,T,T.return)}var ne=T.sibling;if(ne!==null){ne.return=T.return,Ve=ne;break e}Ve=T.return}}var K=r.current;for(Ve=K;Ve!==null;){b=Ve;var re=b.child;if(b.subtreeFlags&2064&&re!==null)re.return=b,Ve=re;else e:for(b=K;Ve!==null;){if(j=Ve,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:gu(9,j)}}catch(Xe){bn(j,j.return,Xe)}if(j===b){Ve=null;break e}var Ce=j.sibling;if(Ce!==null){Ce.return=j.return,Ve=Ce;break e}Ve=j.return}}if(Pt=_,so(),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Et,r)}catch{}y=!0}return y}finally{it=d,Oi.transition=a}}return!1}function z1(r,a,d){a=Ia(d,a),a=s1(r,a,1),r=ao(r,a,1),a=Wr(),r!==null&&(B(r,1,a),si(r,a))}function bn(r,a,d){if(r.tag===3)z1(r,r,d);else for(;a!==null;){if(a.tag===3){z1(a,r,d);break}else if(a.tag===1){var y=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(uo===null||!uo.has(y))){r=Ia(d,r),r=o1(a,r,1),a=ao(a,r,1),r=Wr(),a!==null&&(B(a,1,r),si(a,r));break}}a=a.return}}function o2(r,a,d){var y=r.pingCache;y!==null&&y.delete(a),a=Wr(),r.pingedLanes|=r.suspendedLanes&d,or===r&&(yr&d)===d&&(Kn===4||Kn===3&&(yr&130023424)===yr&&500>St()-yh?Go(r,0):mh|=d),si(r,a)}function j1(r,a){a===0&&(r.mode&1?(a=Qs,Qs<<=1,!(Qs&130023424)&&(Qs=4194304)):a=1);var d=Wr();r=Ps(r,a),r!==null&&(B(r,a,d),si(r,d))}function a2(r){var a=r.memoizedState,d=0;a!==null&&(d=a.retryLane),j1(r,d)}function l2(r,a){var d=0;switch(r.tag){case 13:var y=r.stateNode,_=r.memoizedState;_!==null&&(d=_.retryLane);break;case 19:y=r.stateNode;break;default:throw Error(n(314))}y!==null&&y.delete(a),j1(r,d)}var H1;H1=function(r,a,d){if(r!==null)if(r.memoizedProps!==a.pendingProps||ti.current)ri=!0;else{if(!(r.lanes&d)&&!(a.flags&128))return ri=!1,qm(r,a,d);ri=!!(r.flags&131072)}else ri=!1,wn&&a.flags&1048576&&Ad(a,Zl,a.index);switch(a.lanes=0,a.tag){case 2:var y=a.type;fu(r,a),r=a.pendingProps;var _=ma(a,br.current);Aa(a,d),_=Qc(null,a,y,r,_,d);var T=qc();return a.flags|=1,typeof _=="object"&&_!==null&&typeof _.render=="function"&&_.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ni(y)?(T=!0,Ql(a)):T=!1,a.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,zc(a),_.updater=cu,a.stateNode=_,_._reactInternals=a,th(a,y,r,d),a=sh(null,a,y,!0,T,d)):(a.tag=0,wn&&T&&bc(a),Hr(null,a,_,d),a=a.child),a;case 16:y=a.elementType;e:{switch(fu(r,a),r=a.pendingProps,_=y._init,y=_(y._payload),a.type=y,_=a.tag=c2(y),r=Gi(y,r),_){case 0:a=ih(null,a,y,r,d);break e;case 1:a=p1(null,a,y,r,d);break e;case 11:a=c1(null,a,y,r,d);break e;case 14:a=h1(null,a,y,Gi(y.type,r),d);break e}throw Error(n(306,y,""))}return a;case 0:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:Gi(y,_),ih(r,a,y,_,d);case 1:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:Gi(y,_),p1(r,a,y,_,d);case 3:e:{if(m1(a),r===null)throw Error(n(387));y=a.pendingProps,T=a.memoizedState,_=T.element,bd(r,a),ru(a,y,null,d);var b=a.memoizedState;if(y=b.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:b.cache,pendingSuspenseBoundaries:b.pendingSuspenseBoundaries,transitions:b.transitions},a.updateQueue.baseState=T,a.memoizedState=T,a.flags&256){_=Ia(Error(n(423)),a),a=y1(r,a,y,d,_);break e}else if(y!==_){_=Ia(Error(n(424)),a),a=y1(r,a,y,d,_);break e}else for(yi=no(a.stateNode.containerInfo.firstChild),mi=a,wn=!0,Wi=null,d=Nd(a,null,y,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(xa(),y===_){a=Ls(r,a,d);break e}Hr(r,a,y,d)}a=a.child}return a;case 5:return Pd(a),r===null&&Pc(a),y=a.type,_=a.pendingProps,T=r!==null?r.memoizedProps:null,b=_.children,Tc(y,_)?b=null:T!==null&&Tc(y,T)&&(a.flags|=32),g1(r,a),Hr(r,a,b,d),a.child;case 6:return r===null&&Pc(a),null;case 13:return w1(r,a,d);case 4:return jc(a,a.stateNode.containerInfo),y=a.pendingProps,r===null?a.child=Ea(a,null,y,d):Hr(r,a,y,d),a.child;case 11:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:Gi(y,_),c1(r,a,y,_,d);case 7:return Hr(r,a,a.pendingProps,d),a.child;case 8:return Hr(r,a,a.pendingProps.children,d),a.child;case 12:return Hr(r,a,a.pendingProps.children,d),a.child;case 10:e:{if(y=a.type._context,_=a.pendingProps,T=a.memoizedProps,b=_.value,rn(eu,y._currentValue),y._currentValue=b,T!==null)if(Z(T.value,b)){if(T.children===_.children&&!ti.current){a=Ls(r,a,d);break e}}else for(T=a.child,T!==null&&(T.return=a);T!==null;){var j=T.dependencies;if(j!==null){b=T.child;for(var X=j.firstContext;X!==null;){if(X.context===y){if(T.tag===1){X=ks(-1,d&-d),X.tag=2;var le=T.updateQueue;if(le!==null){le=le.shared;var we=le.pending;we===null?X.next=X:(X.next=we.next,we.next=X),le.pending=X}}T.lanes|=d,X=T.alternate,X!==null&&(X.lanes|=d),Vc(T.return,d,a),j.lanes|=d;break}X=X.next}}else if(T.tag===10)b=T.type===a.type?null:T.child;else if(T.tag===18){if(b=T.return,b===null)throw Error(n(341));b.lanes|=d,j=b.alternate,j!==null&&(j.lanes|=d),Vc(b,d,a),b=T.sibling}else b=T.child;if(b!==null)b.return=T;else for(b=T;b!==null;){if(b===a){b=null;break}if(T=b.sibling,T!==null){T.return=b.return,b=T;break}b=b.return}T=b}Hr(r,a,_.children,d),a=a.child}return a;case 9:return _=a.type,y=a.pendingProps.children,Aa(a,d),_=Di(_),y=y(_),a.flags|=1,Hr(r,a,y,d),a.child;case 14:return y=a.type,_=Gi(y,a.pendingProps),_=Gi(y.type,_),h1(r,a,y,_,d);case 15:return f1(r,a,a.type,a.pendingProps,d);case 17:return y=a.type,_=a.pendingProps,_=a.elementType===y?_:Gi(y,_),fu(r,a),a.tag=1,ni(y)?(r=!0,Ql(a)):r=!1,Aa(a,d),r1(a,y,_),th(a,y,_,d),sh(null,a,y,!0,r,d);case 19:return E1(r,a,d);case 22:return d1(r,a,d)}throw Error(n(156,a.tag))};function W1(r,a){return hr(r,a)}function u2(r,a,d,y){this.tag=r,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mi(r,a,d,y){return new u2(r,a,d,y)}function Th(r){return r=r.prototype,!(!r||!r.isReactComponent)}function c2(r){if(typeof r=="function")return Th(r)?1:0;if(r!=null){if(r=r.$$typeof,r===H)return 11;if(r===ae)return 14}return 2}function go(r,a){var d=r.alternate;return d===null?(d=Mi(r.tag,a,r.key,r.mode),d.elementType=r.elementType,d.type=r.type,d.stateNode=r.stateNode,d.alternate=r,r.alternate=d):(d.pendingProps=a,d.type=r.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=r.flags&14680064,d.childLanes=r.childLanes,d.lanes=r.lanes,d.child=r.child,d.memoizedProps=r.memoizedProps,d.memoizedState=r.memoizedState,d.updateQueue=r.updateQueue,a=r.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=r.sibling,d.index=r.index,d.ref=r.ref,d}function Cu(r,a,d,y,_,T){var b=2;if(y=r,typeof r=="function")Th(r)&&(b=1);else if(typeof r=="string")b=5;else e:switch(r){case U:return Yo(d.children,_,T,a);case F:b=8,_|=8;break;case P:return r=Mi(12,d,a,_|2),r.elementType=P,r.lanes=T,r;case z:return r=Mi(13,d,a,_),r.elementType=z,r.lanes=T,r;case ot:return r=Mi(19,d,a,_),r.elementType=ot,r.lanes=T,r;case Oe:return Iu(d,_,T,a);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case W:b=10;break e;case Y:b=9;break e;case H:b=11;break e;case ae:b=14;break e;case gt:b=16,y=null;break e}throw Error(n(130,r==null?r:typeof r,""))}return a=Mi(b,d,a,_),a.elementType=r,a.type=y,a.lanes=T,a}function Yo(r,a,d,y){return r=Mi(7,r,y,a),r.lanes=d,r}function Iu(r,a,d,y){return r=Mi(22,r,y,a),r.elementType=Oe,r.lanes=d,r.stateNode={isHidden:!1},r}function vh(r,a,d){return r=Mi(6,r,null,a),r.lanes=d,r}function Sh(r,a,d){return a=Mi(4,r.children!==null?r.children:[],r.key,a),a.lanes=d,a.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},a}function h2(r,a,d,y,_){this.tag=a,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J(0),this.expirationTimes=J(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J(0),this.identifierPrefix=y,this.onRecoverableError=_,this.mutableSourceEagerHydrationData=null}function Rh(r,a,d,y,_,T,b,j,X){return r=new h2(r,a,d,j,X),a===1?(a=1,T===!0&&(a|=8)):a=0,T=Mi(3,null,null,a),r.current=T,T.stateNode=r,T.memoizedState={element:y,isDehydrated:d,cache:null,transitions:null,pendingSuspenseBoundaries:null},zc(T),r}function f2(r,a,d){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Le,key:y==null?null:""+y,children:r,containerInfo:a,implementation:d}}function G1(r){if(!r)return io;r=r._reactInternals;e:{if(nr(r)!==r||r.tag!==1)throw Error(n(170));var a=r;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ni(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(r.tag===1){var d=r.type;if(ni(d))return xd(r,d,a)}return a}function X1(r,a,d,y,_,T,b,j,X){return r=Rh(d,y,!0,r,_,T,b,j,X),r.context=G1(null),d=r.current,y=Wr(),_=ho(d),T=ks(y,_),T.callback=a??null,ao(d,T,_),r.current.lanes=_,B(r,_,y),si(r,y),r}function Tu(r,a,d,y){var _=a.current,T=Wr(),b=ho(_);return d=G1(d),a.context===null?a.context=d:a.pendingContext=d,a=ks(T,b),a.payload={element:r},y=y===void 0?null:y,y!==null&&(a.callback=y),r=ao(_,a,b),r!==null&&(Qi(r,_,b,T),nu(r,_,b)),b}function vu(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function Y1(r,a){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var d=r.retryLane;r.retryLane=d!==0&&d<a?d:a}}function Nh(r,a){Y1(r,a),(r=r.alternate)&&Y1(r,a)}function d2(){return null}var Q1=typeof reportError=="function"?reportError:function(r){console.error(r)};function Dh(r){this._internalRoot=r}Su.prototype.render=Dh.prototype.render=function(r){var a=this._internalRoot;if(a===null)throw Error(n(409));Tu(r,a,null,null)},Su.prototype.unmount=Dh.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var a=r.containerInfo;Wo(function(){Tu(null,r,null,null)}),a[Ds]=null}};function Su(r){this._internalRoot=r}Su.prototype.unstable_scheduleHydration=function(r){if(r){var a=Kt();r={blockedOn:null,target:r,priority:a};for(var d=0;d<Qn.length&&a!==0&&a<Qn[d].priority;d++);Qn.splice(d,0,r),d===0&&la(r)}};function bh(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function Ru(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function q1(){}function g2(r,a,d,y,_){if(_){if(typeof y=="function"){var T=y;y=function(){var le=vu(b);T.call(le)}}var b=X1(a,y,r,0,null,!1,!1,"",q1);return r._reactRootContainer=b,r[Ds]=b.current,$a(r.nodeType===8?r.parentNode:r),Wo(),b}for(;_=r.lastChild;)r.removeChild(_);if(typeof y=="function"){var j=y;y=function(){var le=vu(X);j.call(le)}}var X=Rh(r,0,!1,null,null,!1,!1,"",q1);return r._reactRootContainer=X,r[Ds]=X.current,$a(r.nodeType===8?r.parentNode:r),Wo(function(){Tu(a,X,d,y)}),X}function Nu(r,a,d,y,_){var T=d._reactRootContainer;if(T){var b=T;if(typeof _=="function"){var j=_;_=function(){var X=vu(b);j.call(X)}}Tu(a,b,r,_)}else b=g2(d,a,r,_,y);return vu(b)}qs=function(r){switch(r.tag){case 3:var a=r.stateNode;if(a.current.memoizedState.isDehydrated){var d=Wt(a.pendingLanes);d!==0&&(Zt(a,d|1),si(a,St()),!(Pt&6)&&(Sa=St()+500,so()))}break;case 13:Wo(function(){var y=Ps(r,1);if(y!==null){var _=Wr();Qi(y,r,1,_)}}),Nh(r,1)}},Yn=function(r){if(r.tag===13){var a=Ps(r,134217728);if(a!==null){var d=Wr();Qi(a,r,134217728,d)}Nh(r,134217728)}},Ye=function(r){if(r.tag===13){var a=ho(r),d=Ps(r,a);if(d!==null){var y=Wr();Qi(d,r,a,y)}Nh(r,a)}},Kt=function(){return it},bo=function(r,a){var d=it;try{return it=r,a()}finally{it=d}},_s=function(r,a,d){switch(a){case"input":if(En(r,d),a=d.name,d.type==="radio"&&a!=null){for(d=r;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<d.length;a++){var y=d[a];if(y!==r&&y.form===r.form){var _=Xl(y);if(!_)throw Error(n(90));Li(y),En(y,_)}}}break;case"textarea":Ar(r,d);break;case"select":a=d.value,a!=null&&Pe(r,!!d.multiple,a,!1)}},Vi=Ah,vn=Wo;var p2={usingClientEntryPoint:!1,Events:[tl,ga,Xl,ui,cr,Ah]},pl={findFiberByHostInstance:Lo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},m2={bundleType:pl.bundleType,version:pl.version,rendererPackageName:pl.rendererPackageName,rendererConfig:pl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Re.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=Do(r),r===null?null:r.stateNode},findFiberByHostInstance:pl.findFiberByHostInstance||d2,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Du=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Du.isDisabled&&Du.supportsFiber)try{Et=Du.inject(m2),ut=Du}catch{}}return oi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=p2,oi.createPortal=function(r,a){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(a))throw Error(n(200));return f2(r,a,null,d)},oi.createRoot=function(r,a){if(!bh(r))throw Error(n(299));var d=!1,y="",_=Q1;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(y=a.identifierPrefix),a.onRecoverableError!==void 0&&(_=a.onRecoverableError)),a=Rh(r,1,!1,null,null,d,!1,y,_),r[Ds]=a.current,$a(r.nodeType===8?r.parentNode:r),new Dh(a)},oi.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var a=r._reactInternals;if(a===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=Do(a),r=r===null?null:r.stateNode,r},oi.flushSync=function(r){return Wo(r)},oi.hydrate=function(r,a,d){if(!Ru(a))throw Error(n(200));return Nu(null,r,a,!0,d)},oi.hydrateRoot=function(r,a,d){if(!bh(r))throw Error(n(405));var y=d!=null&&d.hydratedSources||null,_=!1,T="",b=Q1;if(d!=null&&(d.unstable_strictMode===!0&&(_=!0),d.identifierPrefix!==void 0&&(T=d.identifierPrefix),d.onRecoverableError!==void 0&&(b=d.onRecoverableError)),a=X1(a,null,r,1,d??null,_,!1,T,b),r[Ds]=a.current,$a(r),y)for(r=0;r<y.length;r++)d=y[r],_=d._getVersion,_=_(d._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[d,_]:a.mutableSourceEagerHydrationData.push(d,_);return new Su(a)},oi.render=function(r,a,d){if(!Ru(a))throw Error(n(200));return Nu(null,r,a,!1,d)},oi.unmountComponentAtNode=function(r){if(!Ru(r))throw Error(n(40));return r._reactRootContainer?(Wo(function(){Nu(null,null,r,!1,function(){r._reactRootContainer=null,r[Ds]=null})}),!0):!1},oi.unstable_batchedUpdates=Ah,oi.unstable_renderSubtreeIntoContainer=function(r,a,d,y){if(!Ru(d))throw Error(n(200));if(r==null||r._reactInternals===void 0)throw Error(n(38));return Nu(r,a,d,!1,y)},oi.version="18.3.1-next-f1338f8080-20240426",oi}var r0;function v2(){if(r0)return Ph.exports;r0=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(e){console.error(e)}}return s(),Ph.exports=T2(),Ph.exports}var i0;function S2(){if(i0)return Ou;i0=1;var s=v2();return Ou.createRoot=s.createRoot,Ou.hydrateRoot=s.hydrateRoot,Ou}var R2=S2(),Fe;(function(s){s[s.QR_CODE=0]="QR_CODE",s[s.AZTEC=1]="AZTEC",s[s.CODABAR=2]="CODABAR",s[s.CODE_39=3]="CODE_39",s[s.CODE_93=4]="CODE_93",s[s.CODE_128=5]="CODE_128",s[s.DATA_MATRIX=6]="DATA_MATRIX",s[s.MAXICODE=7]="MAXICODE",s[s.ITF=8]="ITF",s[s.EAN_13=9]="EAN_13",s[s.EAN_8=10]="EAN_8",s[s.PDF_417=11]="PDF_417",s[s.RSS_14=12]="RSS_14",s[s.RSS_EXPANDED=13]="RSS_EXPANDED",s[s.UPC_A=14]="UPC_A",s[s.UPC_E=15]="UPC_E",s[s.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var s0=new Map([[Fe.QR_CODE,"QR_CODE"],[Fe.AZTEC,"AZTEC"],[Fe.CODABAR,"CODABAR"],[Fe.CODE_39,"CODE_39"],[Fe.CODE_93,"CODE_93"],[Fe.CODE_128,"CODE_128"],[Fe.DATA_MATRIX,"DATA_MATRIX"],[Fe.MAXICODE,"MAXICODE"],[Fe.ITF,"ITF"],[Fe.EAN_13,"EAN_13"],[Fe.EAN_8,"EAN_8"],[Fe.PDF_417,"PDF_417"],[Fe.RSS_14,"RSS_14"],[Fe.RSS_EXPANDED,"RSS_EXPANDED"],[Fe.UPC_A,"UPC_A"],[Fe.UPC_E,"UPC_E"],[Fe.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),o0;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.URL=1]="URL"})(o0||(o0={}));function N2(s){return Object.values(Fe).includes(s)}var Io;(function(s){s[s.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",s[s.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Io||(Io={}));var qi=function(){function s(){}return s.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",s.SCAN_DEFAULT_FPS=2,s.DEFAULT_DISABLE_FLIP=!1,s.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,s.DEFAULT_SUPPORTED_SCAN_TYPE=[Io.SCAN_TYPE_CAMERA,Io.SCAN_TYPE_FILE],s}(),Ag=function(){function s(e,n){this.format=e,this.formatName=n}return s.prototype.toString=function(){return this.formatName},s.create=function(e){if(!s0.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new s(e,s0.get(e))},s}(),a0=function(){function s(){}return s.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},s.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},s}(),Yh;(function(s){s[s.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",s[s.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",s[s.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Yh||(Yh={}));var Cg=function(){function s(){}return s.createFrom=function(e){return{errorMessage:e,type:Yh.UNKWOWN_ERROR}},s}(),Ig=function(){function s(e){this.verbose=e}return s.prototype.log=function(e){this.verbose&&console.log(e)},s.prototype.warn=function(e){this.verbose&&console.warn(e)},s.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},s.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},s}();function fs(s){return typeof s>"u"||s===null}function D2(s,e,n){return s>n?n:s<e?e:s}var Ma=function(){function s(){}return s.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},s.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},s.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},s.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},s.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},s.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},s.scannerPaused=function(){return"Scanner paused"},s}(),Qt=function(){function s(){}return s.scanningStatus=function(){return"Scanning"},s.idleStatus=function(){return"Idle"},s.errorStatus=function(){return"Error"},s.permissionStatus=function(){return"Permission"},s.noCameraFoundErrorStatus=function(){return"No Cameras"},s.lastMatch=function(e){return"Last Match: ".concat(e)},s.codeScannerTitle=function(){return"Code Scanner"},s.cameraPermissionTitle=function(){return"Request Camera Permissions"},s.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},s.noCameraFound=function(){return"No camera found"},s.scanButtonStopScanningText=function(){return"Stop Scanning"},s.scanButtonStartScanningText=function(){return"Start Scanning"},s.torchOnButton=function(){return"Switch On Torch"},s.torchOffButton=function(){return"Switch Off Torch"},s.torchOnFailedMessage=function(){return"Failed to turn on torch"},s.torchOffFailedMessage=function(){return"Failed to turn off torch"},s.scanButtonScanningStarting=function(){return"Launching Camera..."},s.textIfCameraScanSelected=function(){return"Scan an Image File"},s.textIfFileScanSelected=function(){return"Scan using camera directly"},s.selectCamera=function(){return"Select Camera"},s.fileSelectionChooseImage=function(){return"Choose Image"},s.fileSelectionChooseAnother=function(){return"Choose Another"},s.fileSelectionNoImageSelected=function(){return"No image choosen"},s.anonymousCameraPrefix=function(){return"Anonymous Camera"},s.dragAndDropMessage=function(){return"Or drop an image to scan"},s.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},s.zoom=function(){return"zoom"},s.loadingImage=function(){return"Loading image..."},s.cameraScanAltText=function(){return"Camera based scan"},s.fileScanAltText=function(){return"Fule based scan"},s}(),l0=function(){function s(){}return s.poweredBy=function(){return"Powered by "},s.reportIssues=function(){return"Report issues"},s}(),Tg=function(){function s(){}return s.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var l=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(l,"."),!0),!1}for(var h=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(h),x=Object.keys(e),C=0,S=x;C<S.length;C++){var A=S[C];if(g.has(A))return n.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},s}(),wl={exports:{}},b2=wl.exports,u0;function O2(){return u0||(u0=1,function(s,e){(function(n,l){l(e)})(b2,function(n){function l(N){return N==null}var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,t){N.__proto__=t}||function(N,t){for(var i in t)t.hasOwnProperty(i)&&(N[i]=t[i])};function g(N,t){h(N,t);function i(){this.constructor=N}N.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function x(N,t){var i=Object.setPrototypeOf;i?i(N,t):N.__proto__=t}function C(N,t){t===void 0&&(t=N.constructor);var i=Error.captureStackTrace;i&&i(N,t)}var S=function(N){g(t,N);function t(i){var o=this.constructor,u=N.call(this,i)||this;return Object.defineProperty(u,"name",{value:o.name,enumerable:!1}),x(u,o.prototype),C(u),u}return t}(Error);class A extends S{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}A.kind="Exception";class O extends A{}O.kind="ArgumentException";class k extends A{}k.kind="IllegalArgumentException";class q{constructor(t){if(this.binarizer=t,t===null)throw new k("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,o,u){const c=this.binarizer.getLuminanceSource().crop(t,i,o,u);return new q(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new q(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new q(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class te extends A{static getChecksumInstance(){return new te}}te.kind="ChecksumException";class fe{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class ce{static arraycopy(t,i,o,u,c){for(;c--;)o[u++]=t[i++]}static currentTimeMillis(){return Date.now()}}class oe extends A{}oe.kind="IndexOutOfBoundsException";class Ue extends oe{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}Ue.kind="ArrayIndexOutOfBoundsException";class De{static fill(t,i){for(let o=0,u=t.length;o<u;o++)t[o]=i}static fillWithin(t,i,o,u){De.rangeCheck(t.length,i,o);for(let c=i;c<o;c++)t[c]=u}static rangeCheck(t,i,o){if(i>o)throw new k("fromIndex("+i+") > toIndex("+o+")");if(i<0)throw new Ue(i);if(o>t)throw new Ue(o)}static asList(...t){return t}static create(t,i,o){return Array.from({length:t}).map(c=>Array.from({length:i}).fill(o))}static createInt32Array(t,i,o){return Array.from({length:t}).map(c=>Int32Array.from({length:i}).fill(o))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let o=0,u=t.length;o<u;o++)if(t[o]!==i[o])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const o of t)i=31*i+o;return i}static fillUint8Array(t,i){for(let o=0;o!==t.length;o++)t[o]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const o=new Uint8Array(i);return o.set(t),o}return t.slice(0,i)}static copyOfRange(t,i,o){const u=o-i,c=new Int32Array(u);return ce.arraycopy(t,i,c,0,u),c}static binarySearch(t,i,o){o===void 0&&(o=De.numberComparator);let u=0,c=t.length-1;for(;u<=c;){const f=c+u>>1,p=o(i,t[f]);if(p>0)u=f+1;else if(p<0)c=f-1;else return f}return-u-1}static numberComparator(t,i){return t-i}}class ye{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let o=31;return i=t<<16,i!==0&&(o-=16,t=i),i=t<<8,i!==0&&(o-=8,t=i),i=t<<4,i!==0&&(o-=4,t=i),i=t<<2,i!==0&&(o-=2,t=i),o-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}ye.MIN_VALUE_32_BITS=-2147483648,ye.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Re{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=Re.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=Re.makeArray(t);ce.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const o=this.bits;let u=Math.floor(t/32),c=o[u];c&=~((1<<(t&31))-1);const f=o.length;for(;c===0;){if(++u===f)return i;c=o[u]}const p=u*32+ye.numberOfTrailingZeros(c);return p>i?i:p}getNextUnset(t){const i=this.size;if(t>=i)return i;const o=this.bits;let u=Math.floor(t/32),c=~o[u];c&=~((1<<(t&31))-1);const f=o.length;for(;c===0;){if(++u===f)return i;c=~o[u]}const p=u*32+ye.numberOfTrailingZeros(c);return p>i?i:p}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new k;if(i===t)return;i--;const o=Math.floor(t/32),u=Math.floor(i/32),c=this.bits;for(let f=o;f<=u;f++){const p=f>o?0:t&31,E=(2<<(f<u?31:i&31))-(1<<p);c[f]|=E}}clear(){const t=this.bits.length,i=this.bits;for(let o=0;o<t;o++)i[o]=0}isRange(t,i,o){if(i<t||t<0||i>this.size)throw new k;if(i===t)return!0;i--;const u=Math.floor(t/32),c=Math.floor(i/32),f=this.bits;for(let p=u;p<=c;p++){const w=p>u?0:t&31,v=(2<<(p<c?31:i&31))-(1<<w)&4294967295;if((f[p]&v)!==(o?v:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new k("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let o=i;o>0;o--)this.appendBit((t>>o-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let o=0;o<i;o++)this.appendBit(t.get(o))}xor(t){if(this.size!==t.size)throw new k("Sizes don't match");const i=this.bits;for(let o=0,u=i.length;o<u;o++)i[o]^=t.bits[o]}toBytes(t,i,o,u){for(let c=0;c<u;c++){let f=0;for(let p=0;p<8;p++)this.get(t)&&(f|=1<<7-p),t++;i[o+c]=f}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),o=i+1,u=this.bits;for(let c=0;c<o;c++){let f=u[c];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,t[i-c]=f}if(this.size!==o*32){const c=o*32-this.size;let f=t[0]>>>c;for(let p=1;p<o;p++){const w=t[p];f|=w<<32-c,t[p-1]=f,f=w>>>c}t[o-1]=f}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof Re))return!1;const i=t;return this.size===i.size&&De.equals(this.bits,i.bits)}hashCode(){return 31*this.size+De.hashCode(this.bits)}toString(){let t="";for(let i=0,o=this.size;i<o;i++)i&7||(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new Re(this.size,this.bits.slice())}}var At;(function(N){N[N.OTHER=0]="OTHER",N[N.PURE_BARCODE=1]="PURE_BARCODE",N[N.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",N[N.TRY_HARDER=3]="TRY_HARDER",N[N.CHARACTER_SET=4]="CHARACTER_SET",N[N.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",N[N.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",N[N.ASSUME_GS1=7]="ASSUME_GS1",N[N.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",N[N.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",N[N.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(At||(At={}));var Le=At;class U extends A{static getFormatInstance(){return new U}}U.kind="FormatException";var F;(function(N){N[N.Cp437=0]="Cp437",N[N.ISO8859_1=1]="ISO8859_1",N[N.ISO8859_2=2]="ISO8859_2",N[N.ISO8859_3=3]="ISO8859_3",N[N.ISO8859_4=4]="ISO8859_4",N[N.ISO8859_5=5]="ISO8859_5",N[N.ISO8859_6=6]="ISO8859_6",N[N.ISO8859_7=7]="ISO8859_7",N[N.ISO8859_8=8]="ISO8859_8",N[N.ISO8859_9=9]="ISO8859_9",N[N.ISO8859_10=10]="ISO8859_10",N[N.ISO8859_11=11]="ISO8859_11",N[N.ISO8859_13=12]="ISO8859_13",N[N.ISO8859_14=13]="ISO8859_14",N[N.ISO8859_15=14]="ISO8859_15",N[N.ISO8859_16=15]="ISO8859_16",N[N.SJIS=16]="SJIS",N[N.Cp1250=17]="Cp1250",N[N.Cp1251=18]="Cp1251",N[N.Cp1252=19]="Cp1252",N[N.Cp1256=20]="Cp1256",N[N.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",N[N.UTF8=22]="UTF8",N[N.ASCII=23]="ASCII",N[N.Big5=24]="Big5",N[N.GB18030=25]="GB18030",N[N.EUC_KR=26]="EUC_KR"})(F||(F={}));class P{constructor(t,i,o,...u){this.valueIdentifier=t,this.name=o,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=u,P.VALUE_IDENTIFIER_TO_ECI.set(t,this),P.NAME_TO_ECI.set(o,this);const c=this.values;for(let f=0,p=c.length;f!==p;f++){const w=c[f];P.VALUES_TO_ECI.set(w,this)}for(const f of u)P.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new U("incorect value");const i=P.VALUES_TO_ECI.get(t);if(i===void 0)throw new U("incorect value");return i}static getCharacterSetECIByName(t){const i=P.NAME_TO_ECI.get(t);if(i===void 0)throw new U("incorect value");return i}equals(t){if(!(t instanceof P))return!1;const i=t;return this.getName()===i.getName()}}P.VALUE_IDENTIFIER_TO_ECI=new Map,P.VALUES_TO_ECI=new Map,P.NAME_TO_ECI=new Map,P.Cp437=new P(F.Cp437,Int32Array.from([0,2]),"Cp437"),P.ISO8859_1=new P(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),P.ISO8859_2=new P(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),P.ISO8859_3=new P(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),P.ISO8859_4=new P(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),P.ISO8859_5=new P(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),P.ISO8859_6=new P(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),P.ISO8859_7=new P(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),P.ISO8859_8=new P(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),P.ISO8859_9=new P(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),P.ISO8859_10=new P(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),P.ISO8859_11=new P(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),P.ISO8859_13=new P(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),P.ISO8859_14=new P(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),P.ISO8859_15=new P(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),P.ISO8859_16=new P(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),P.SJIS=new P(F.SJIS,20,"SJIS","Shift_JIS"),P.Cp1250=new P(F.Cp1250,21,"Cp1250","windows-1250"),P.Cp1251=new P(F.Cp1251,22,"Cp1251","windows-1251"),P.Cp1252=new P(F.Cp1252,23,"Cp1252","windows-1252"),P.Cp1256=new P(F.Cp1256,24,"Cp1256","windows-1256"),P.UnicodeBigUnmarked=new P(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),P.UTF8=new P(F.UTF8,26,"UTF8","UTF-8"),P.ASCII=new P(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),P.Big5=new P(F.Big5,28,"Big5"),P.GB18030=new P(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),P.EUC_KR=new P(F.EUC_KR,30,"EUC_KR","EUC-KR");class W extends A{}W.kind="UnsupportedOperationException";class Y{static decode(t,i){const o=this.encodingName(i);return this.customDecoder?this.customDecoder(t,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(t,o):new TextDecoder(o).decode(t)}static shouldDecodeOnFallback(t){return!Y.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const o=this.encodingName(i);return this.customEncoder?this.customEncoder(t,o):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof P?t:P.getCharacterSetECIByName(t)}static decodeFallback(t,i){const o=this.encodingCharacterSet(i);if(Y.isDecodeFallbackSupported(o)){let u="";for(let c=0,f=t.length;c<f;c++){let p=t[c].toString(16);p.length<2&&(p="0"+p),u+="%"+p}return decodeURIComponent(u)}if(o.equals(P.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new W(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(P.UTF8)||t.equals(P.ISO8859_1)||t.equals(P.ASCII)}static encodeFallback(t){const o=btoa(unescape(encodeURIComponent(t))).split(""),u=[];for(let c=0;c<o.length;c++)u.push(o[c].charCodeAt(0));return new Uint8Array(u)}}class H{static castAsNonUtf8Char(t,i=null){const o=i?i.getName():this.ISO88591;return Y.decode(new Uint8Array([t]),o)}static guessEncoding(t,i){if(i!=null&&i.get(Le.CHARACTER_SET)!==void 0)return i.get(Le.CHARACTER_SET).toString();const o=t.length;let u=!0,c=!0,f=!0,p=0,w=0,E=0,v=0,D=0,M=0,V=0,G=0,Q=0,Z=0,se=0;const _e=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let Ae=0;Ae<o&&(u||c||f);Ae++){const me=t[Ae]&255;f&&(p>0?me&128?p--:f=!1:me&128&&(me&64?(p++,me&32?(p++,me&16?(p++,me&8?f=!1:v++):E++):w++):f=!1)),u&&(me>127&&me<160?u=!1:me>159&&(me<192||me===215||me===247)&&se++),c&&(D>0?me<64||me===127||me>252?c=!1:D--:me===128||me===160||me>239?c=!1:me>160&&me<224?(M++,G=0,V++,V>Q&&(Q=V)):me>127?(D++,V=0,G++,G>Z&&(Z=G)):(V=0,G=0))}return f&&p>0&&(f=!1),c&&D>0&&(c=!1),f&&(_e||w+E+v>0)?H.UTF8:c&&(H.ASSUME_SHIFT_JIS||Q>=3||Z>=3)?H.SHIFT_JIS:u&&c?Q===2&&M===2||se*10>=o?H.SHIFT_JIS:H.ISO88591:u?H.ISO88591:c?H.SHIFT_JIS:f?H.UTF8:H.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let o=-1;function u(f,p,w,E,v,D){if(f==="%%")return"%";if(i[++o]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let M=v?parseInt(v.substr(1)):void 0,V;switch(D){case"s":V=i[o];break;case"c":V=i[o][0];break;case"f":V=parseFloat(i[o]).toFixed(f);break;case"p":V=parseFloat(i[o]).toPrecision(f);break;case"e":V=parseFloat(i[o]).toExponential(f);break;case"x":V=parseInt(i[o]).toString(M||16);break;case"d":V=parseFloat(parseInt(i[o],M||10).toPrecision(f)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(M);let G=parseInt(w),Q=w&&w[0]+""=="0"?"0":" ";for(;V.length<G;)V=p!==void 0?V+Q:Q+V;return V}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,u)}static getBytes(t,i){return Y.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}H.SHIFT_JIS=P.SJIS.getName(),H.GB2312="GB2312",H.ISO88591=P.ISO8859_1.getName(),H.EUC_JP="EUC_JP",H.UTF8=P.UTF8.getName(),H.PLATFORM_DEFAULT_ENCODING=H.UTF8,H.ASSUME_SHIFT_JIS=!1;class z{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=H.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,o){for(let u=i;i<i+o;u++)this.append(t[u]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class ot{constructor(t,i,o,u){if(this.width=t,this.height=i,this.rowSize=o,this.bits=u,i==null&&(i=t),this.height=i,t<1||i<1)throw new k("Both dimensions must be greater than 0");o==null&&(o=Math.floor((t+31)/32)),this.rowSize=o,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,o=t[0].length,u=new ot(o,i);for(let c=0;c<i;c++){const f=t[c];for(let p=0;p<o;p++)f[p]&&u.set(p,c)}return u}static parseFromString(t,i,o){if(t===null)throw new k("stringRepresentation cannot be null");const u=new Array(t.length);let c=0,f=0,p=-1,w=0,E=0;for(;E<t.length;)if(t.charAt(E)===`
`||t.charAt(E)==="\r"){if(c>f){if(p===-1)p=c-f;else if(c-f!==p)throw new k("row lengths do not match");f=c,w++}E++}else if(t.substring(E,E+i.length)===i)E+=i.length,u[c]=!0,c++;else if(t.substring(E,E+o.length)===o)E+=o.length,u[c]=!1,c++;else throw new k("illegal character encountered: "+t.substring(E));if(c>f){if(p===-1)p=c-f;else if(c-f!==p)throw new k("row lengths do not match");w++}const v=new ot(p,w);for(let D=0;D<c;D++)u[D]&&v.set(Math.floor(D%p),Math.floor(D/p));return v}get(t,i){const o=i*this.rowSize+Math.floor(t/32);return(this.bits[o]>>>(t&31)&1)!==0}set(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]|=1<<(t&31)&4294967295}unset(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]&=~(1<<(t&31)&4294967295)}flip(t,i){const o=i*this.rowSize+Math.floor(t/32);this.bits[o]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new k("input matrix dimensions do not match");const i=new Re(Math.floor(this.width/32)+1),o=this.rowSize,u=this.bits;for(let c=0,f=this.height;c<f;c++){const p=c*o,w=t.getRow(c,i).getBitArray();for(let E=0;E<o;E++)u[p+E]^=w[E]}}clear(){const t=this.bits,i=t.length;for(let o=0;o<i;o++)t[o]=0}setRegion(t,i,o,u){if(i<0||t<0)throw new k("Left and top must be nonnegative");if(u<1||o<1)throw new k("Height and width must be at least 1");const c=t+o,f=i+u;if(f>this.height||c>this.width)throw new k("The region must fit inside the matrix");const p=this.rowSize,w=this.bits;for(let E=i;E<f;E++){const v=E*p;for(let D=t;D<c;D++)w[v+Math.floor(D/32)]|=1<<(D&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new Re(this.width):i.clear();const o=this.rowSize,u=this.bits,c=t*o;for(let f=0;f<o;f++)i.setBulk(f*32,u[c+f]);return i}setRow(t,i){ce.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let o=new Re(t),u=new Re(t);for(let c=0,f=Math.floor((i+1)/2);c<f;c++)o=this.getRow(c,o),u=this.getRow(i-1-c,u),o.reverse(),u.reverse(),this.setRow(c,u),this.setRow(i-1-c,o)}getEnclosingRectangle(){const t=this.width,i=this.height,o=this.rowSize,u=this.bits;let c=t,f=i,p=-1,w=-1;for(let E=0;E<i;E++)for(let v=0;v<o;v++){const D=u[E*o+v];if(D!==0){if(E<f&&(f=E),E>w&&(w=E),v*32<c){let M=0;for(;!(D<<31-M&4294967295);)M++;v*32+M<c&&(c=v*32+M)}if(v*32+31>p){let M=31;for(;!(D>>>M);)M--;v*32+M>p&&(p=v*32+M)}}}return p<c||w<f?null:Int32Array.from([c,f,p-c+1,w-f+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let o=0;for(;o<i.length&&i[o]===0;)o++;if(o===i.length)return null;const u=o/t;let c=o%t*32;const f=i[o];let p=0;for(;!(f<<31-p&4294967295);)p++;return c+=p,Int32Array.from([c,u])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let o=i.length-1;for(;o>=0&&i[o]===0;)o--;if(o<0)return null;const u=Math.floor(o/t);let c=Math.floor(o%t)*32;const f=i[o];let p=31;for(;!(f>>>p);)p--;return c+=p,Int32Array.from([c,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof ot))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&De.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+De.hashCode(this.bits),t}toString(t="X ",i="  ",o=`
`){return this.buildToString(t,i,o)}buildToString(t,i,o){let u=new z;for(let c=0,f=this.height;c<f;c++){for(let p=0,w=this.width;p<w;p++)u.append(this.get(p,c)?t:i);u.append(o)}return u.toString()}clone(){return new ot(this.width,this.height,this.rowSize,this.bits.slice())}}class ae extends A{static getNotFoundInstance(){return new ae}}ae.kind="NotFoundException";class gt extends fe{constructor(t){super(t),this.luminances=gt.EMPTY,this.buckets=new Int32Array(gt.LUMINANCE_BUCKETS)}getBlackRow(t,i){const o=this.getLuminanceSource(),u=o.getWidth();i==null||i.getSize()<u?i=new Re(u):i.clear(),this.initArrays(u);const c=o.getRow(t,this.luminances),f=this.buckets;for(let w=0;w<u;w++)f[(c[w]&255)>>gt.LUMINANCE_SHIFT]++;const p=gt.estimateBlackPoint(f);if(u<3)for(let w=0;w<u;w++)(c[w]&255)<p&&i.set(w);else{let w=c[0]&255,E=c[1]&255;for(let v=1;v<u-1;v++){const D=c[v+1]&255;(E*4-w-D)/2<p&&i.set(v),w=E,E=D}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),o=t.getHeight(),u=new ot(i,o);this.initArrays(i);const c=this.buckets;for(let w=1;w<5;w++){const E=Math.floor(o*w/5),v=t.getRow(E,this.luminances),D=Math.floor(i*4/5);for(let M=Math.floor(i/5);M<D;M++){const V=v[M]&255;c[V>>gt.LUMINANCE_SHIFT]++}}const f=gt.estimateBlackPoint(c),p=t.getMatrix();for(let w=0;w<o;w++){const E=w*i;for(let v=0;v<i;v++)(p[E+v]&255)<f&&u.set(v,w)}return u}createBinarizer(t){return new gt(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let o=0;o<gt.LUMINANCE_BUCKETS;o++)i[o]=0}static estimateBlackPoint(t){const i=t.length;let o=0,u=0,c=0;for(let v=0;v<i;v++)t[v]>c&&(u=v,c=t[v]),t[v]>o&&(o=t[v]);let f=0,p=0;for(let v=0;v<i;v++){const D=v-u,M=t[v]*D*D;M>p&&(f=v,p=M)}if(u>f){const v=u;u=f,f=v}if(f-u<=i/16)throw new ae;let w=f-1,E=-1;for(let v=f-1;v>u;v--){const D=v-u,M=D*D*(f-v)*(o-t[v]);M>E&&(w=v,E=M)}return w<<gt.LUMINANCE_SHIFT}}gt.LUMINANCE_BITS=5,gt.LUMINANCE_SHIFT=8-gt.LUMINANCE_BITS,gt.LUMINANCE_BUCKETS=1<<gt.LUMINANCE_BITS,gt.EMPTY=Uint8ClampedArray.from([0]);class Oe extends gt{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),o=t.getHeight();if(i>=Oe.MINIMUM_DIMENSION&&o>=Oe.MINIMUM_DIMENSION){const u=t.getMatrix();let c=i>>Oe.BLOCK_SIZE_POWER;i&Oe.BLOCK_SIZE_MASK&&c++;let f=o>>Oe.BLOCK_SIZE_POWER;o&Oe.BLOCK_SIZE_MASK&&f++;const p=Oe.calculateBlackPoints(u,c,f,i,o),w=new ot(i,o);Oe.calculateThresholdForBlock(u,c,f,i,o,p,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new Oe(t)}static calculateThresholdForBlock(t,i,o,u,c,f,p){const w=c-Oe.BLOCK_SIZE,E=u-Oe.BLOCK_SIZE;for(let v=0;v<o;v++){let D=v<<Oe.BLOCK_SIZE_POWER;D>w&&(D=w);const M=Oe.cap(v,2,o-3);for(let V=0;V<i;V++){let G=V<<Oe.BLOCK_SIZE_POWER;G>E&&(G=E);const Q=Oe.cap(V,2,i-3);let Z=0;for(let _e=-2;_e<=2;_e++){const Ae=f[M+_e];Z+=Ae[Q-2]+Ae[Q-1]+Ae[Q]+Ae[Q+1]+Ae[Q+2]}const se=Z/25;Oe.thresholdBlock(t,G,D,se,u,p)}}}static cap(t,i,o){return t<i?i:t>o?o:t}static thresholdBlock(t,i,o,u,c,f){for(let p=0,w=o*c+i;p<Oe.BLOCK_SIZE;p++,w+=c)for(let E=0;E<Oe.BLOCK_SIZE;E++)(t[w+E]&255)<=u&&f.set(i+E,o+p)}static calculateBlackPoints(t,i,o,u,c){const f=c-Oe.BLOCK_SIZE,p=u-Oe.BLOCK_SIZE,w=new Array(o);for(let E=0;E<o;E++){w[E]=new Int32Array(i);let v=E<<Oe.BLOCK_SIZE_POWER;v>f&&(v=f);for(let D=0;D<i;D++){let M=D<<Oe.BLOCK_SIZE_POWER;M>p&&(M=p);let V=0,G=255,Q=0;for(let se=0,_e=v*u+M;se<Oe.BLOCK_SIZE;se++,_e+=u){for(let Ae=0;Ae<Oe.BLOCK_SIZE;Ae++){const me=t[_e+Ae]&255;V+=me,me<G&&(G=me),me>Q&&(Q=me)}if(Q-G>Oe.MIN_DYNAMIC_RANGE)for(se++,_e+=u;se<Oe.BLOCK_SIZE;se++,_e+=u)for(let Ae=0;Ae<Oe.BLOCK_SIZE;Ae++)V+=t[_e+Ae]&255}let Z=V>>Oe.BLOCK_SIZE_POWER*2;if(Q-G<=Oe.MIN_DYNAMIC_RANGE&&(Z=G/2,E>0&&D>0)){const se=(w[E-1][D]+2*w[E][D-1]+w[E-1][D-1])/4;G<se&&(Z=se)}w[E][D]=Z}}return w}}Oe.BLOCK_SIZE_POWER=3,Oe.BLOCK_SIZE=1<<Oe.BLOCK_SIZE_POWER,Oe.BLOCK_SIZE_MASK=Oe.BLOCK_SIZE-1,Oe.MINIMUM_DIMENSION=Oe.BLOCK_SIZE*5,Oe.MIN_DYNAMIC_RANGE=24;class Te{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,o,u){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new z;for(let o=0;o<this.height;o++){const u=this.getRow(o,t);for(let c=0;c<this.width;c++){const f=u[c]&255;let p;f<64?p="#":f<128?p="+":f<192?p=".":p=" ",i.append(p)}i.append(`
`)}return i.toString()}}class ze extends Te{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const o=this.delegate.getRow(t,i),u=this.getWidth();for(let c=0;c<u;c++)o[c]=255-(o[c]&255);return o}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(i);for(let u=0;u<i;u++)o[u]=255-(t[u]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,o,u){return new ze(this.delegate.crop(t,i,o,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ze(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ze(this.delegate.rotateCounterClockwise45())}}class be extends Te{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=be.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return be.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,o){const u=new Uint8ClampedArray(i*o);for(let c=0,f=0,p=t.length;c<p;c+=4,f++){let w;if(t[c+3]===0)w=255;else{const v=t[c],D=t[c+1],M=t[c+2];w=306*v+601*D+117*M+512>>10}u[f]=w}return u}getRow(t,i){if(t<0||t>=this.getHeight())throw new k("Requested row is outside the image: "+t);const o=this.getWidth(),u=t*o;return i===null?i=this.buffer.slice(u,u+o):(i.length<o&&(i=new Uint8ClampedArray(o)),i.set(this.buffer.slice(u,u+o))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,o,u){return super.crop(t,i,o,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),o=i.getContext("2d"),u=t*be.DEGREE_TO_RADIANS,c=this.canvas.width,f=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(u))*c+Math.abs(Math.sin(u))*f),w=Math.ceil(Math.abs(Math.sin(u))*c+Math.abs(Math.cos(u))*f);return i.width=p,i.height=w,o.translate(p/2,w/2),o.rotate(u),o.drawImage(this.canvas,c/-2,f/-2),this.buffer=be.makeBufferFromCanvasImageData(i),this}invert(){return new ze(this)}}be.DEGREE_TO_RADIANS=Math.PI/180;class ${constructor(t,i,o){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var he=(globalThis||bu||self||window||void 0)&&(globalThis||bu||self||window||void 0).__awaiter||function(N,t,i,o){function u(c){return c instanceof i?c:new i(function(f){f(c)})}return new(i||(i=Promise))(function(c,f){function p(v){try{E(o.next(v))}catch(D){f(D)}}function w(v){try{E(o.throw(v))}catch(D){f(D)}}function E(v){v.done?c(v.value):u(v.value).then(p,w)}E((o=o.apply(N,t||[])).next())})};class je{constructor(t,i=500,o){this.reader=t,this.timeBetweenScansMillis=i,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return he(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const o of t){const u=o.kind==="video"?"videoinput":o.kind;if(u!=="videoinput")continue;const c=o.deviceId||o.id,f=o.label||`Video device ${i.length+1}`,p=o.groupId,w={deviceId:c,label:f,kind:u,groupId:p};i.push(w)}return i})}getVideoInputDevices(){return he(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new $(i.deviceId,i.label))})}findDeviceById(t){return he(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(o=>o.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return he(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return he(this,void 0,void 0,function*(){this.reset();let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeOnceFromConstraints(u,i)})}decodeOnceFromConstraints(t,i){return he(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(o,i)})}decodeOnceFromStream(t,i){return he(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(t,i,o){return he(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,o)})}decodeFromVideoDevice(t,i,o){return he(this,void 0,void 0,function*(){let u;t?u={deviceId:{exact:t}}:u={facingMode:"environment"};const c={video:u};return yield this.decodeFromConstraints(c,i,o)})}decodeFromConstraints(t,i,o){return he(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(u,i,o)})}decodeFromStream(t,i,o){return he(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(u,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return he(this,void 0,void 0,function*(){const o=this.prepareVideoElement(i);return this.addVideoSource(o,t),this.videoElement=o,this.stream=t,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(t){return new Promise((i,o)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return he(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const o=document.getElementById(t);if(!o)throw new O(`element with id '${t}' not found`);if(o.nodeName.toLowerCase()!==i.toLowerCase())throw new O(`element with id '${t}' must be an ${i} element`);return o}decodeFromImage(t,i){if(!t&&!i)throw new O("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new O("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,o){if(t===void 0&&i===void 0)throw new O("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,o):this.decodeFromVideoElementContinuously(t,o)}decodeFromImageElement(t){if(!t)throw new O("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let o;return this.isImageLoaded(i)?o=this.decodeOnce(i,!1,!0):o=this._decodeOnLoadImage(i),o}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const o=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(o,i)}_decodeFromVideoElementSetup(t){if(!t)throw new O("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new O("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const o=this._decodeOnLoadImage(i);return i.src=t,o}decodeFromVideoUrl(t){if(!t)throw new O("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),o=this.decodeFromVideoElement(i);return i.src=t,o}decodeFromVideoUrlContinuously(t,i){if(!t)throw new O("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(o,i);return o.src=t,u}_decodeOnLoadImage(t){return new Promise((i,o)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,o),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return he(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return he(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,o=!0){this._stopAsyncDecode=!1;const u=(c,f)=>{if(this._stopAsyncDecode){f(new ae("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(t);c(p)}catch(p){const w=i&&p instanceof ae,v=(p instanceof te||p instanceof U)&&o;if(w||v)return setTimeout(u,this._timeBetweenDecodingAttempts,c,f);f(p)}};return new Promise((c,f)=>u(c,f))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(t);i(u,null),setTimeout(o,this.timeBetweenScansMillis)}catch(u){i(null,u);const c=u instanceof te||u instanceof U,f=u instanceof ae;(c||f)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,o){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,o=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),o=new be(i),u=new Oe(o);return new q(u)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let o,u;return typeof t<"u"&&(t instanceof HTMLVideoElement?(o=t.videoWidth,u=t.videoHeight):t instanceof HTMLImageElement&&(o=t.naturalWidth||t.width,u=t.naturalHeight||t.height)),i.style.width=o+"px",i.style.height=u+"px",i.width=o,i.height=u,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class qe{constructor(t,i,o=i==null?0:8*i.length,u,c,f=ce.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=o,this.resultPoints=u,this.format=c,this.timestamp=f,this.text=t,this.rawBytes=i,o==null?this.numBits=i==null?0:8*i.length:this.numBits=o,this.resultPoints=u,this.format=c,this.resultMetadata=null,f==null?this.timestamp=ce.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const o=new Array(i.length+t.length);ce.arraycopy(i,0,o,0,i.length),ce.arraycopy(t,0,o,i.length,t.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var dt;(function(N){N[N.AZTEC=0]="AZTEC",N[N.CODABAR=1]="CODABAR",N[N.CODE_39=2]="CODE_39",N[N.CODE_93=3]="CODE_93",N[N.CODE_128=4]="CODE_128",N[N.DATA_MATRIX=5]="DATA_MATRIX",N[N.EAN_8=6]="EAN_8",N[N.EAN_13=7]="EAN_13",N[N.ITF=8]="ITF",N[N.MAXICODE=9]="MAXICODE",N[N.PDF_417=10]="PDF_417",N[N.QR_CODE=11]="QR_CODE",N[N.RSS_14=12]="RSS_14",N[N.RSS_EXPANDED=13]="RSS_EXPANDED",N[N.UPC_A=14]="UPC_A",N[N.UPC_E=15]="UPC_E",N[N.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(dt||(dt={}));var ve=dt,vt;(function(N){N[N.OTHER=0]="OTHER",N[N.ORIENTATION=1]="ORIENTATION",N[N.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",N[N.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",N[N.ISSUE_NUMBER=4]="ISSUE_NUMBER",N[N.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",N[N.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",N[N.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",N[N.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",N[N.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",N[N.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(vt||(vt={}));var nt=vt;class kt{constructor(t,i,o,u,c=-1,f=-1){this.rawBytes=t,this.text=i,this.byteSegments=o,this.ecLevel=u,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=f,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class fn{exp(t){return this.expTable[t]}log(t){if(t===0)throw new k;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class dn{constructor(t,i){if(i.length===0)throw new k;this.field=t;const o=i.length;if(o>1&&i[0]===0){let u=1;for(;u<o&&i[u]===0;)u++;u===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-u),ce.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let o;if(t===1){o=0;for(let f=0,p=i.length;f!==p;f++){const w=i[f];o=fn.addOrSubtract(o,w)}return o}o=i[0];const u=i.length,c=this.field;for(let f=1;f<u;f++)o=fn.addOrSubtract(c.multiply(t,o),i[f]);return o}addOrSubtract(t){if(!this.field.equals(t.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,o=t.coefficients;if(i.length>o.length){const f=i;i=o,o=f}let u=new Int32Array(o.length);const c=o.length-i.length;ce.arraycopy(o,0,u,0,c);for(let f=c;f<o.length;f++)u[f]=fn.addOrSubtract(i[f-c],o[f]);return new dn(this.field,u)}multiply(t){if(!this.field.equals(t.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,o=i.length,u=t.coefficients,c=u.length,f=new Int32Array(o+c-1),p=this.field;for(let w=0;w<o;w++){const E=i[w];for(let v=0;v<c;v++)f[w+v]=fn.addOrSubtract(f[w+v],p.multiply(E,u[v]))}return new dn(p,f)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,o=this.field,u=new Int32Array(i),c=this.coefficients;for(let f=0;f<i;f++)u[f]=o.multiply(c[f],t);return new dn(o,u)}multiplyByMonomial(t,i){if(t<0)throw new k;if(i===0)return this.field.getZero();const o=this.coefficients,u=o.length,c=new Int32Array(u+t),f=this.field;for(let p=0;p<u;p++)c[p]=f.multiply(o[p],i);return new dn(f,c)}divide(t){if(!this.field.equals(t.field))throw new k("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new k("Divide by 0");const i=this.field;let o=i.getZero(),u=this;const c=t.getCoefficient(t.getDegree()),f=i.inverse(c);for(;u.getDegree()>=t.getDegree()&&!u.isZero();){const p=u.getDegree()-t.getDegree(),w=i.multiply(u.getCoefficient(u.getDegree()),f),E=t.multiplyByMonomial(p,w),v=i.buildMonomial(p,w);o=o.addOrSubtract(v),u=u.addOrSubtract(E)}return[o,u]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);if(o!==0){if(o<0?(t+=" - ",o=-o):t.length>0&&(t+=" + "),i===0||o!==1){const u=this.field.log(o);u===0?t+="1":u===1?t+="a":(t+="a^",t+=u)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class Li extends A{}Li.kind="ArithmeticException";class pt extends fn{constructor(t,i,o){super(),this.primitive=t,this.size=i,this.generatorBase=o;const u=new Int32Array(i);let c=1;for(let p=0;p<i;p++)u[p]=c,c*=2,c>=i&&(c^=t,c&=i-1);this.expTable=u;const f=new Int32Array(i);for(let p=0;p<i-1;p++)f[u[p]]=p;this.logTable=f,this.zero=new dn(this,Int32Array.from([0])),this.one=new dn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new k;if(i===0)return this.zero;const o=new Int32Array(t+1);return o[0]=i,new dn(this,o)}inverse(t){if(t===0)throw new Li;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+ye.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}pt.AZTEC_DATA_12=new pt(4201,4096,1),pt.AZTEC_DATA_10=new pt(1033,1024,1),pt.AZTEC_DATA_6=new pt(67,64,1),pt.AZTEC_PARAM=new pt(19,16,1),pt.QR_CODE_FIELD_256=new pt(285,256,0),pt.DATA_MATRIX_FIELD_256=new pt(301,256,1),pt.AZTEC_DATA_8=pt.DATA_MATRIX_FIELD_256,pt.MAXICODE_FIELD_64=pt.AZTEC_DATA_6;class Qr extends A{}Qr.kind="ReedSolomonException";class ur extends A{}ur.kind="IllegalStateException";class Bi{constructor(t){this.field=t}decode(t,i){const o=this.field,u=new dn(o,t),c=new Int32Array(i);let f=!0;for(let V=0;V<i;V++){const G=u.evaluateAt(o.exp(V+o.getGeneratorBase()));c[c.length-1-V]=G,G!==0&&(f=!1)}if(f)return;const p=new dn(o,c),w=this.runEuclideanAlgorithm(o.buildMonomial(i,1),p,i),E=w[0],v=w[1],D=this.findErrorLocations(E),M=this.findErrorMagnitudes(v,D);for(let V=0;V<D.length;V++){const G=t.length-1-o.log(D[V]);if(G<0)throw new Qr("Bad error location");t[G]=pt.addOrSubtract(t[G],M[V])}}runEuclideanAlgorithm(t,i,o){if(t.getDegree()<i.getDegree()){const V=t;t=i,i=V}const u=this.field;let c=t,f=i,p=u.getZero(),w=u.getOne();for(;f.getDegree()>=(o/2|0);){let V=c,G=p;if(c=f,p=w,c.isZero())throw new Qr("r_{i-1} was zero");f=V;let Q=u.getZero();const Z=c.getCoefficient(c.getDegree()),se=u.inverse(Z);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){const _e=f.getDegree()-c.getDegree(),Ae=u.multiply(f.getCoefficient(f.getDegree()),se);Q=Q.addOrSubtract(u.buildMonomial(_e,Ae)),f=f.addOrSubtract(c.multiplyByMonomial(_e,Ae))}if(w=Q.multiply(p).addOrSubtract(G),f.getDegree()>=c.getDegree())throw new ur("Division algorithm failed to reduce polynomial?")}const E=w.getCoefficient(0);if(E===0)throw new Qr("sigmaTilde(0) was zero");const v=u.inverse(E),D=w.multiplyScalar(v),M=f.multiplyScalar(v);return[D,M]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const o=new Int32Array(i);let u=0;const c=this.field;for(let f=1;f<c.getSize()&&u<i;f++)t.evaluateAt(f)===0&&(o[u]=c.inverse(f),u++);if(u!==i)throw new Qr("Error locator degree does not match number of roots");return o}findErrorMagnitudes(t,i){const o=i.length,u=new Int32Array(o),c=this.field;for(let f=0;f<o;f++){const p=c.inverse(i[f]);let w=1;for(let E=0;E<o;E++)if(f!==E){const v=c.multiply(i[E],p),D=v&1?v&-2:v|1;w=c.multiply(w,D)}u[f]=c.multiply(t.evaluateAt(p),c.inverse(w)),c.getGeneratorBase()!==0&&(u[f]=c.multiply(u[f],p))}return u}}var En;(function(N){N[N.UPPER=0]="UPPER",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.DIGIT=3]="DIGIT",N[N.PUNCT=4]="PUNCT",N[N.BINARY=5]="BINARY"})(En||(En={}));class Vt{decode(t){this.ddata=t;let i=t.getBits(),o=this.extractBits(i),u=this.correctBits(o),c=Vt.convertBoolArrayToByteArray(u),f=Vt.getEncodedData(u),p=new kt(c,f,null,null);return p.setNumBits(u.length),p}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,o=En.UPPER,u=En.UPPER,c="",f=0;for(;f<i;)if(u===En.BINARY){if(i-f<5)break;let p=Vt.readCode(t,f,5);if(f+=5,p===0){if(i-f<11)break;p=Vt.readCode(t,f,11)+31,f+=11}for(let w=0;w<p;w++){if(i-f<8){f=i;break}const E=Vt.readCode(t,f,8);c+=H.castAsNonUtf8Char(E),f+=8}u=o}else{let p=u===En.DIGIT?4:5;if(i-f<p)break;let w=Vt.readCode(t,f,p);f+=p;let E=Vt.getCharacter(u,w);E.startsWith("CTRL_")?(o=u,u=Vt.getTable(E.charAt(5)),E.charAt(6)==="L"&&(o=u)):(c+=E,u=o)}return c}static getTable(t){switch(t){case"L":return En.LOWER;case"P":return En.PUNCT;case"M":return En.MIXED;case"D":return En.DIGIT;case"B":return En.BINARY;case"U":default:return En.UPPER}}static getCharacter(t,i){switch(t){case En.UPPER:return Vt.UPPER_TABLE[i];case En.LOWER:return Vt.LOWER_TABLE[i];case En.MIXED:return Vt.MIXED_TABLE[i];case En.PUNCT:return Vt.PUNCT_TABLE[i];case En.DIGIT:return Vt.DIGIT_TABLE[i];default:throw new ur("Bad table")}}correctBits(t){let i,o;this.ddata.getNbLayers()<=2?(o=6,i=pt.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,i=pt.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,i=pt.AZTEC_DATA_10):(o=12,i=pt.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),c=t.length/o;if(c<u)throw new U;let f=t.length%o,p=new Int32Array(c);for(let M=0;M<c;M++,f+=o)p[M]=Vt.readCode(t,f,o);try{new Bi(i).decode(p,c-u)}catch(M){throw new U(M)}let w=(1<<o)-1,E=0;for(let M=0;M<u;M++){let V=p[M];if(V===0||V===w)throw new U;(V===1||V===w-1)&&E++}let v=new Array(u*o-E),D=0;for(let M=0;M<u;M++){let V=p[M];if(V===1||V===w-1)v.fill(V>1,D,D+o-1),D+=o-1;else for(let G=o-1;G>=0;--G)v[D++]=(V&1<<G)!==0}return v}extractBits(t){let i=this.ddata.isCompact(),o=this.ddata.getNbLayers(),u=(i?11:14)+o*4,c=new Int32Array(u),f=new Array(this.totalBitsInLayer(o,i));if(i)for(let p=0;p<c.length;p++)c[p]=p;else{let p=u+1+2*ye.truncDivision(ye.truncDivision(u,2)-1,15),w=u/2,E=ye.truncDivision(p,2);for(let v=0;v<w;v++){let D=v+ye.truncDivision(v,15);c[w-v-1]=E-D-1,c[w+v]=E+D+1}}for(let p=0,w=0;p<o;p++){let E=(o-p)*4+(i?9:12),v=p*2,D=u-1-v;for(let M=0;M<E;M++){let V=M*2;for(let G=0;G<2;G++)f[w+V+G]=t.get(c[v+G],c[v+M]),f[w+2*E+V+G]=t.get(c[v+M],c[D-G]),f[w+4*E+V+G]=t.get(c[D-G],c[D-M]),f[w+6*E+V+G]=t.get(c[D-M],c[v+G])}w+=E*8}return f}static readCode(t,i,o){let u=0;for(let c=i;c<i+o;c++)u<<=1,t[c]&&(u|=1);return u}static readByte(t,i){let o=t.length-i;return o>=8?Vt.readCode(t,i,8):Vt.readCode(t,i,o)<<8-o}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let o=0;o<i.length;o++)i[o]=Vt.readByte(t,8*o);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}Vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class mt{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,o,u){const c=t-o,f=i-u;return Math.sqrt(c*c+f*f)}static sum(t){let i=0;for(let o=0,u=t.length;o!==u;o++){const c=t[o];i+=c}return i}}class qr{static floatToIntBits(t){return t}}qr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Pe{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Pe){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*qr.floatToIntBits(this.x)+qr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),o=this.distance(t[1],t[2]),u=this.distance(t[0],t[2]);let c,f,p;if(o>=i&&o>=u?(f=t[0],c=t[1],p=t[2]):u>=o&&u>=i?(f=t[1],c=t[0],p=t[2]):(f=t[2],c=t[0],p=t[1]),this.crossProductZ(c,f,p)<0){const w=c;c=p,p=w}t[0]=c,t[1]=f,t[2]=p}static distance(t,i){return mt.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,o){const u=i.x,c=i.y;return(o.x-u)*(t.y-c)-(o.y-c)*(t.x-u)}}class Zi{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ws extends Zi{constructor(t,i,o,u,c){super(t,i),this.compact=o,this.nbDatablocks=u,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ar{constructor(t,i,o,u){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Ar.INIT_SIZE),o==null&&(o=t.getWidth()/2|0),u==null&&(u=t.getHeight()/2|0);const c=i/2|0;if(this.leftInit=o-c,this.rightInit=o+c,this.upInit=u-c,this.downInit=u+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ae}detect(){let t=this.leftInit,i=this.rightInit,o=this.upInit,u=this.downInit,c=!1,f=!0,p=!1,w=!1,E=!1,v=!1,D=!1;const M=this.width,V=this.height;for(;f;){f=!1;let G=!0;for(;(G||!w)&&i<M;)G=this.containsBlackPoint(o,u,i,!1),G?(i++,f=!0,w=!0):w||i++;if(i>=M){c=!0;break}let Q=!0;for(;(Q||!E)&&u<V;)Q=this.containsBlackPoint(t,i,u,!0),Q?(u++,f=!0,E=!0):E||u++;if(u>=V){c=!0;break}let Z=!0;for(;(Z||!v)&&t>=0;)Z=this.containsBlackPoint(o,u,t,!1),Z?(t--,f=!0,v=!0):v||t--;if(t<0){c=!0;break}let se=!0;for(;(se||!D)&&o>=0;)se=this.containsBlackPoint(t,i,o,!0),se?(o--,f=!0,D=!0):D||o--;if(o<0){c=!0;break}f&&(p=!0)}if(!c&&p){const G=i-t;let Q=null;for(let Ae=1;Q===null&&Ae<G;Ae++)Q=this.getBlackPointOnSegment(t,u-Ae,t+Ae,u);if(Q==null)throw new ae;let Z=null;for(let Ae=1;Z===null&&Ae<G;Ae++)Z=this.getBlackPointOnSegment(t,o+Ae,t+Ae,o);if(Z==null)throw new ae;let se=null;for(let Ae=1;se===null&&Ae<G;Ae++)se=this.getBlackPointOnSegment(i,o+Ae,i-Ae,o);if(se==null)throw new ae;let _e=null;for(let Ae=1;_e===null&&Ae<G;Ae++)_e=this.getBlackPointOnSegment(i,u-Ae,i-Ae,u);if(_e==null)throw new ae;return this.centerEdges(_e,Q,se,Z)}else throw new ae}getBlackPointOnSegment(t,i,o,u){const c=mt.round(mt.distance(t,i,o,u)),f=(o-t)/c,p=(u-i)/c,w=this.image;for(let E=0;E<c;E++){const v=mt.round(t+E*f),D=mt.round(i+E*p);if(w.get(v,D))return new Pe(v,D)}return null}centerEdges(t,i,o,u){const c=t.getX(),f=t.getY(),p=i.getX(),w=i.getY(),E=o.getX(),v=o.getY(),D=u.getX(),M=u.getY(),V=Ar.CORR;return c<this.width/2?[new Pe(D-V,M+V),new Pe(p+V,w+V),new Pe(E-V,v-V),new Pe(c+V,f-V)]:[new Pe(D+V,M+V),new Pe(p+V,w-V),new Pe(E-V,v+V),new Pe(c-V,f-V)]}containsBlackPoint(t,i,o,u){const c=this.image;if(u){for(let f=t;f<=i;f++)if(c.get(f,o))return!0}else for(let f=t;f<=i;f++)if(c.get(o,f))return!0;return!1}}Ar.INIT_SIZE=10,Ar.CORR=1;class xs{static checkAndNudgePoints(t,i){const o=t.getWidth(),u=t.getHeight();let c=!0;for(let f=0;f<i.length&&c;f+=2){const p=Math.floor(i[f]),w=Math.floor(i[f+1]);if(p<-1||p>o||w<-1||w>u)throw new ae;c=!1,p===-1?(i[f]=0,c=!0):p===o&&(i[f]=o-1,c=!0),w===-1?(i[f+1]=0,c=!0):w===u&&(i[f+1]=u-1,c=!0)}c=!0;for(let f=i.length-2;f>=0&&c;f-=2){const p=Math.floor(i[f]),w=Math.floor(i[f+1]);if(p<-1||p>o||w<-1||w>u)throw new ae;c=!1,p===-1?(i[f]=0,c=!0):p===o&&(i[f]=o-1,c=!0),w===-1?(i[f+1]=0,c=!0):w===u&&(i[f+1]=u-1,c=!0)}}}class Ut{constructor(t,i,o,u,c,f,p,w,E){this.a11=t,this.a21=i,this.a31=o,this.a12=u,this.a22=c,this.a32=f,this.a13=p,this.a23=w,this.a33=E}static quadrilateralToQuadrilateral(t,i,o,u,c,f,p,w,E,v,D,M,V,G,Q,Z){const se=Ut.quadrilateralToSquare(t,i,o,u,c,f,p,w);return Ut.squareToQuadrilateral(E,v,D,M,V,G,Q,Z).times(se)}transformPoints(t){const i=t.length,o=this.a11,u=this.a12,c=this.a13,f=this.a21,p=this.a22,w=this.a23,E=this.a31,v=this.a32,D=this.a33;for(let M=0;M<i;M+=2){const V=t[M],G=t[M+1],Q=c*V+w*G+D;t[M]=(o*V+f*G+E)/Q,t[M+1]=(u*V+p*G+v)/Q}}transformPointsWithValues(t,i){const o=this.a11,u=this.a12,c=this.a13,f=this.a21,p=this.a22,w=this.a23,E=this.a31,v=this.a32,D=this.a33,M=t.length;for(let V=0;V<M;V++){const G=t[V],Q=i[V],Z=c*G+w*Q+D;t[V]=(o*G+f*Q+E)/Z,i[V]=(u*G+p*Q+v)/Z}}static squareToQuadrilateral(t,i,o,u,c,f,p,w){const E=t-o+c-p,v=i-u+f-w;if(E===0&&v===0)return new Ut(o-t,c-o,t,u-i,f-u,i,0,0,1);{const D=o-c,M=p-c,V=u-f,G=w-f,Q=D*G-M*V,Z=(E*G-M*v)/Q,se=(D*v-E*V)/Q;return new Ut(o-t+Z*o,p-t+se*p,t,u-i+Z*u,w-i+se*w,i,Z,se,1)}}static quadrilateralToSquare(t,i,o,u,c,f,p,w){return Ut.squareToQuadrilateral(t,i,o,u,c,f,p,w).buildAdjoint()}buildAdjoint(){return new Ut(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Ut(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Tn extends xs{sampleGrid(t,i,o,u,c,f,p,w,E,v,D,M,V,G,Q,Z,se,_e,Ae){const me=Ut.quadrilateralToQuadrilateral(u,c,f,p,w,E,v,D,M,V,G,Q,Z,se,_e,Ae);return this.sampleGridWithTransform(t,i,o,me)}sampleGridWithTransform(t,i,o,u){if(i<=0||o<=0)throw new ae;const c=new ot(i,o),f=new Float32Array(2*i);for(let p=0;p<o;p++){const w=f.length,E=p+.5;for(let v=0;v<w;v+=2)f[v]=v/2+.5,f[v+1]=E;u.transformPoints(f),xs.checkAndNudgePoints(t,f);try{for(let v=0;v<w;v+=2)t.get(Math.floor(f[v]),Math.floor(f[v+1]))&&c.set(v/2,p)}catch{throw new ae}}return c}}class er{static setGridSampler(t){er.gridSampler=t}static getInstance(){return er.gridSampler}}er.gridSampler=new Tn;class kn{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Fi{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),o=this.getBullsEyeCorners(i);if(t){let f=o[0];o[0]=o[2],o[2]=f}this.extractParameters(o);let u=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),c=this.getMatrixCornerPoints(o);return new ws(u,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ae;let i=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(o,i);let u=0;for(let f=0;f<4;f++){let p=o[(this.shift+f)%4];this.compact?(u<<=7,u+=p>>1&127):(u<<=10,u+=(p>>2&992)+(p>>1&31))}let c=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(t,i){let o=0;t.forEach((u,c,f)=>{let p=(u>>i-2<<1)+(u&1);o=(o<<3)+p}),o=((o&1)<<11)+(o>>1);for(let u=0;u<4;u++)if(ye.bitCount(o^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new ae}getCorrectedParameterData(t,i){let o,u;i?(o=7,u=2):(o=10,u=4);let c=o-u,f=new Int32Array(o);for(let w=o-1;w>=0;--w)f[w]=t&15,t>>=4;try{new Bi(pt.AZTEC_PARAM).decode(f,c)}catch{throw new ae}let p=0;for(let w=0;w<u;w++)p=(p<<4)+f[w];return p}getBullsEyeCorners(t){let i=t,o=t,u=t,c=t,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let D=this.getFirstDifferent(i,f,1,-1),M=this.getFirstDifferent(o,f,1,1),V=this.getFirstDifferent(u,f,-1,1),G=this.getFirstDifferent(c,f,-1,-1);if(this.nbCenterLayers>2){let Q=this.distancePoint(G,D)*this.nbCenterLayers/(this.distancePoint(c,i)*(this.nbCenterLayers+2));if(Q<.75||Q>1.25||!this.isWhiteOrBlackRectangle(D,M,V,G))break}i=D,o=M,u=V,c=G,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ae;this.compact=this.nbCenterLayers===5;let p=new Pe(i.getX()+.5,i.getY()-.5),w=new Pe(o.getX()+.5,o.getY()+.5),E=new Pe(u.getX()-.5,u.getY()+.5),v=new Pe(c.getX()-.5,c.getY()-.5);return this.expandSquare([p,w,E,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,o,u;try{let p=new Ar(this.image).detect();t=p[0],i=p[1],o=p[2],u=p[3]}catch{let w=this.image.getWidth()/2,E=this.image.getHeight()/2;t=this.getFirstDifferent(new kn(w+7,E-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new kn(w+7,E+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new kn(w-7,E+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new kn(w-7,E-7),!1,-1,-1).toResultPoint()}let c=mt.round((t.getX()+u.getX()+i.getX()+o.getX())/4),f=mt.round((t.getY()+u.getY()+i.getY()+o.getY())/4);try{let p=new Ar(this.image,15,c,f).detect();t=p[0],i=p[1],o=p[2],u=p[3]}catch{t=this.getFirstDifferent(new kn(c+7,f-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new kn(c+7,f+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new kn(c-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new kn(c-7,f-7),!1,-1,-1).toResultPoint()}return c=mt.round((t.getX()+u.getX()+i.getX()+o.getX())/4),f=mt.round((t.getY()+u.getY()+i.getY()+o.getY())/4),new kn(c,f)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,o,u,c){let f=er.getInstance(),p=this.getDimension(),w=p/2-this.nbCenterLayers,E=p/2+this.nbCenterLayers;return f.sampleGrid(t,p,p,w,w,E,w,E,E,w,E,i.getX(),i.getY(),o.getX(),o.getY(),u.getX(),u.getY(),c.getX(),c.getY())}sampleLine(t,i,o){let u=0,c=this.distanceResultPoint(t,i),f=c/o,p=t.getX(),w=t.getY(),E=f*(i.getX()-t.getX())/c,v=f*(i.getY()-t.getY())/c;for(let D=0;D<o;D++)this.image.get(mt.round(p+D*E),mt.round(w+D*v))&&(u|=1<<o-D-1);return u}isWhiteOrBlackRectangle(t,i,o,u){let c=3;t=new kn(t.getX()-c,t.getY()+c),i=new kn(i.getX()-c,i.getY()-c),o=new kn(o.getX()+c,o.getY()-c),u=new kn(u.getX()+c,u.getY()+c);let f=this.getColor(u,t);if(f===0)return!1;let p=this.getColor(t,i);return p!==f||(p=this.getColor(i,o),p!==f)?!1:(p=this.getColor(o,u),p===f)}getColor(t,i){let o=this.distancePoint(t,i),u=(i.getX()-t.getX())/o,c=(i.getY()-t.getY())/o,f=0,p=t.getX(),w=t.getY(),E=this.image.get(t.getX(),t.getY()),v=Math.ceil(o);for(let M=0;M<v;M++)p+=u,w+=c,this.image.get(mt.round(p),mt.round(w))!==E&&f++;let D=f/o;return D>.1&&D<.9?0:D<=.1===E?1:-1}getFirstDifferent(t,i,o,u){let c=t.getX()+o,f=t.getY()+u;for(;this.isValid(c,f)&&this.image.get(c,f)===i;)c+=o,f+=u;for(c-=o,f-=u;this.isValid(c,f)&&this.image.get(c,f)===i;)c+=o;for(c-=o;this.isValid(c,f)&&this.image.get(c,f)===i;)f+=u;return f-=u,new kn(c,f)}expandSquare(t,i,o){let u=o/(2*i),c=t[0].getX()-t[2].getX(),f=t[0].getY()-t[2].getY(),p=(t[0].getX()+t[2].getX())/2,w=(t[0].getY()+t[2].getY())/2,E=new Pe(p+u*c,w+u*f),v=new Pe(p-u*c,w-u*f);c=t[1].getX()-t[3].getX(),f=t[1].getY()-t[3].getY(),p=(t[1].getX()+t[3].getX())/2,w=(t[1].getY()+t[3].getY())/2;let D=new Pe(p+u*c,w+u*f),M=new Pe(p-u*c,w-u*f);return[E,D,v,M]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=mt.round(t.getX()),o=mt.round(t.getY());return this.isValid(i,o)}distancePoint(t,i){return mt.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return mt.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ye.truncDivision(this.nbLayers-4,8)+1)+15}}class Ci{decode(t,i=null){let o=null,u=new Fi(t.getBlackMatrix()),c=null,f=null;try{let v=u.detectMirror(!1);c=v.getPoints(),this.reportFoundResultPoints(i,c),f=new Vt().decode(v)}catch(v){o=v}if(f==null)try{let v=u.detectMirror(!0);c=v.getPoints(),this.reportFoundResultPoints(i,c),f=new Vt().decode(v)}catch(v){throw o??v}let p=new qe(f.getText(),f.getRawBytes(),f.getNumBits(),c,ve.AZTEC,ce.currentTimeMillis()),w=f.getByteSegments();w!=null&&p.putMetadata(nt.BYTE_SEGMENTS,w);let E=f.getECLevel();return E!=null&&p.putMetadata(nt.ERROR_CORRECTION_LEVEL,E),p}reportFoundResultPoints(t,i){if(t!=null){let o=t.get(Le.NEED_RESULT_POINT_CALLBACK);o!=null&&i.forEach((u,c,f)=>{o.foundPossibleResultPoint(u)})}}reset(){}}class Es extends je{constructor(t=500){super(new Ci,t)}}class tn{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(Le.TRY_HARDER)===!0&&t.isRotateSupported()){const c=t.rotateCounterClockwise(),f=this.doDecode(c,i),p=f.getResultMetadata();let w=270;p!==null&&p.get(nt.ORIENTATION)===!0&&(w=w+p.get(nt.ORIENTATION)%360),f.putMetadata(nt.ORIENTATION,w);const E=f.getResultPoints();if(E!==null){const v=c.getHeight();for(let D=0;D<E.length;D++)E[D]=new Pe(v-E[D].getY()-1,E[D].getX())}return f}else throw new ae}}reset(){}doDecode(t,i){const o=t.getWidth(),u=t.getHeight();let c=new Re(o);const f=i&&i.get(Le.TRY_HARDER)===!0,p=Math.max(1,u>>(f?8:5));let w;f?w=u:w=15;const E=Math.trunc(u/2);for(let v=0;v<w;v++){const D=Math.trunc((v+1)/2),M=(v&1)===0,V=E+p*(M?D:-D);if(V<0||V>=u)break;try{c=t.getBlackRow(V,c)}catch{continue}for(let G=0;G<2;G++){if(G===1&&(c.reverse(),i&&i.get(Le.NEED_RESULT_POINT_CALLBACK)===!0)){const Q=new Map;i.forEach((Z,se)=>Q.set(se,Z)),Q.delete(Le.NEED_RESULT_POINT_CALLBACK),i=Q}try{const Q=this.decodeRow(V,c,i);if(G===1){Q.putMetadata(nt.ORIENTATION,180);const Z=Q.getResultPoints();Z!==null&&(Z[0]=new Pe(o-Z[0].getX()-1,Z[0].getY()),Z[1]=new Pe(o-Z[1].getX()-1,Z[1].getY()))}return Q}catch{}}}throw new ae}static recordPattern(t,i,o){const u=o.length;for(let E=0;E<u;E++)o[E]=0;const c=t.getSize();if(i>=c)throw new ae;let f=!t.get(i),p=0,w=i;for(;w<c;){if(t.get(w)!==f)o[p]++;else{if(++p===u)break;o[p]=1,f=!f}w++}if(!(p===u||p===u-1&&w===c))throw new ae}static recordPatternInReverse(t,i,o){let u=o.length,c=t.get(i);for(;i>0&&u>=0;)t.get(--i)!==c&&(u--,c=!c);if(u>=0)throw new ae;tn.recordPattern(t,i+1,o)}static patternMatchVariance(t,i,o){const u=t.length;let c=0,f=0;for(let E=0;E<u;E++)c+=t[E],f+=i[E];if(c<f)return Number.POSITIVE_INFINITY;const p=c/f;o*=p;let w=0;for(let E=0;E<u;E++){const v=t[E],D=i[E]*p,M=v>D?v-D:D-v;if(M>o)return Number.POSITIVE_INFINITY;w+=M}return w/c}}class Se extends tn{static findStartPattern(t){const i=t.getSize(),o=t.getNextSet(0);let u=0,c=Int32Array.from([0,0,0,0,0,0]),f=o,p=!1;const w=6;for(let E=o;E<i;E++)if(t.get(E)!==p)c[u]++;else{if(u===w-1){let v=Se.MAX_AVG_VARIANCE,D=-1;for(let M=Se.CODE_START_A;M<=Se.CODE_START_C;M++){const V=tn.patternMatchVariance(c,Se.CODE_PATTERNS[M],Se.MAX_INDIVIDUAL_VARIANCE);V<v&&(v=V,D=M)}if(D>=0&&t.isRange(Math.max(0,f-(E-f)/2),f,!1))return Int32Array.from([f,E,D]);f+=c[0]+c[1],c=c.slice(2,c.length-1),c[u-1]=0,c[u]=0,u--}else u++;c[u]=1,p=!p}throw new ae}static decodeCode(t,i,o){tn.recordPattern(t,o,i);let u=Se.MAX_AVG_VARIANCE,c=-1;for(let f=0;f<Se.CODE_PATTERNS.length;f++){const p=Se.CODE_PATTERNS[f],w=this.patternMatchVariance(i,p,Se.MAX_INDIVIDUAL_VARIANCE);w<u&&(u=w,c=f)}if(c>=0)return c;throw new ae}decodeRow(t,i,o){const u=o&&o.get(Le.ASSUME_GS1)===!0,c=Se.findStartPattern(i),f=c[2];let p=0;const w=new Uint8Array(20);w[p++]=f;let E;switch(f){case Se.CODE_START_A:E=Se.CODE_CODE_A;break;case Se.CODE_START_B:E=Se.CODE_CODE_B;break;case Se.CODE_START_C:E=Se.CODE_CODE_C;break;default:throw new U}let v=!1,D=!1,M="",V=c[0],G=c[1];const Q=Int32Array.from([0,0,0,0,0,0]);let Z=0,se=0,_e=f,Ae=0,me=!0,xt=!1,at=!1;for(;!v;){const Hi=D;switch(D=!1,Z=se,se=Se.decodeCode(i,Q,G),w[p++]=se,se!==Se.CODE_STOP&&(me=!0),se!==Se.CODE_STOP&&(Ae++,_e+=Ae*se),V=G,G+=Q.reduce((eo,Ka)=>eo+Ka,0),se){case Se.CODE_START_A:case Se.CODE_START_B:case Se.CODE_START_C:throw new U}switch(E){case Se.CODE_CODE_A:if(se<64)at===xt?M+=String.fromCharCode(32+se):M+=String.fromCharCode(32+se+128),at=!1;else if(se<96)at===xt?M+=String.fromCharCode(se-64):M+=String.fromCharCode(se+64),at=!1;else switch(se!==Se.CODE_STOP&&(me=!1),se){case Se.CODE_FNC_1:u&&(M.length===0?M+="]C1":M+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_A:!xt&&at?(xt=!0,at=!1):xt&&at?(xt=!1,at=!1):at=!0;break;case Se.CODE_SHIFT:D=!0,E=Se.CODE_CODE_B;break;case Se.CODE_CODE_B:E=Se.CODE_CODE_B;break;case Se.CODE_CODE_C:E=Se.CODE_CODE_C;break;case Se.CODE_STOP:v=!0;break}break;case Se.CODE_CODE_B:if(se<96)at===xt?M+=String.fromCharCode(32+se):M+=String.fromCharCode(32+se+128),at=!1;else switch(se!==Se.CODE_STOP&&(me=!1),se){case Se.CODE_FNC_1:u&&(M.length===0?M+="]C1":M+="");break;case Se.CODE_FNC_2:case Se.CODE_FNC_3:break;case Se.CODE_FNC_4_B:!xt&&at?(xt=!0,at=!1):xt&&at?(xt=!1,at=!1):at=!0;break;case Se.CODE_SHIFT:D=!0,E=Se.CODE_CODE_A;break;case Se.CODE_CODE_A:E=Se.CODE_CODE_A;break;case Se.CODE_CODE_C:E=Se.CODE_CODE_C;break;case Se.CODE_STOP:v=!0;break}break;case Se.CODE_CODE_C:if(se<100)se<10&&(M+="0"),M+=se;else switch(se!==Se.CODE_STOP&&(me=!1),se){case Se.CODE_FNC_1:u&&(M.length===0?M+="]C1":M+="");break;case Se.CODE_CODE_A:E=Se.CODE_CODE_A;break;case Se.CODE_CODE_B:E=Se.CODE_CODE_B;break;case Se.CODE_STOP:v=!0;break}break}Hi&&(E=E===Se.CODE_CODE_A?Se.CODE_CODE_B:Se.CODE_CODE_A)}const Dr=G-V;if(G=i.getNextUnset(G),!i.isRange(G,Math.min(i.getSize(),G+(G-V)/2),!1))throw new ae;if(_e-=Ae*Z,_e%103!==Z)throw new te;const pi=M.length;if(pi===0)throw new ae;pi>0&&me&&(E===Se.CODE_CODE_C?M=M.substring(0,pi-2):M=M.substring(0,pi-1));const Vn=(c[1]+c[0])/2,Ht=V+Dr/2,_n=w.length,pr=new Uint8Array(_n);for(let Hi=0;Hi<_n;Hi++)pr[Hi]=w[Hi];const Ns=[new Pe(Vn,t),new Pe(Ht,t)];return new qe(M,pr,0,Ns,ve.CODE_128,new Date().getTime())}}Se.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Se.MAX_AVG_VARIANCE=.25,Se.MAX_INDIVIDUAL_VARIANCE=.7,Se.CODE_SHIFT=98,Se.CODE_CODE_C=99,Se.CODE_CODE_B=100,Se.CODE_CODE_A=101,Se.CODE_FNC_1=102,Se.CODE_FNC_2=97,Se.CODE_FNC_3=96,Se.CODE_FNC_4_A=101,Se.CODE_FNC_4_B=100,Se.CODE_START_A=103,Se.CODE_START_B=104,Se.CODE_START_C=105,Se.CODE_STOP=106;class sn extends tn{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,o){let u=this.counters;u.fill(0),this.decodeRowResult="";let c=sn.findAsteriskPattern(i,u),f=i.getNextSet(c[1]),p=i.getSize(),w,E;do{sn.recordPattern(i,f,u);let Q=sn.toNarrowWidePattern(u);if(Q<0)throw new ae;w=sn.patternToChar(Q),this.decodeRowResult+=w,E=f;for(let Z of u)f+=Z;f=i.getNextSet(f)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let Q of u)v+=Q;let D=f-E-v;if(f!==p&&D*2<v)throw new ae;if(this.usingCheckDigit){let Q=this.decodeRowResult.length-1,Z=0;for(let se=0;se<Q;se++)Z+=sn.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(se));if(this.decodeRowResult.charAt(Q)!==sn.ALPHABET_STRING.charAt(Z%43))throw new te;this.decodeRowResult=this.decodeRowResult.substring(0,Q)}if(this.decodeRowResult.length===0)throw new ae;let M;this.extendedMode?M=sn.decodeExtended(this.decodeRowResult):M=this.decodeRowResult;let V=(c[1]+c[0])/2,G=E+v/2;return new qe(M,null,0,[new Pe(V,t),new Pe(G,t)],ve.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let o=t.getSize(),u=t.getNextSet(0),c=0,f=u,p=!1,w=i.length;for(let E=u;E<o;E++)if(t.get(E)!==p)i[c]++;else{if(c===w-1){if(this.toNarrowWidePattern(i)===sn.ASTERISK_ENCODING&&t.isRange(Math.max(0,f-Math.floor((E-f)/2)),f,!1))return[f,E];f+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,p=!p}throw new ae}static toNarrowWidePattern(t){let i=t.length,o=0,u;do{let c=2147483647;for(let w of t)w<c&&w>o&&(c=w);o=c,u=0;let f=0,p=0;for(let w=0;w<i;w++){let E=t[w];E>o&&(p|=1<<i-1-w,u++,f+=E)}if(u===3){for(let w=0;w<i&&u>0;w++){let E=t[w];if(E>o&&(u--,E*2>=f))return-1}return p}}while(u>3);return-1}static patternToChar(t){for(let i=0;i<sn.CHARACTER_ENCODINGS.length;i++)if(sn.CHARACTER_ENCODINGS[i]===t)return sn.ALPHABET_STRING.charAt(i);if(t===sn.ASTERISK_ENCODING)return"*";throw new ae}static decodeExtended(t){let i=t.length,o="";for(let u=0;u<i;u++){let c=t.charAt(u);if(c==="+"||c==="$"||c==="%"||c==="/"){let f=t.charAt(u+1),p="\0";switch(c){case"+":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)+32);else throw new U;break;case"$":if(f>="A"&&f<="Z")p=String.fromCharCode(f.charCodeAt(0)-64);else throw new U;break;case"%":if(f>="A"&&f<="E")p=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")p=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")p=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")p="\0";else if(f==="V")p="@";else if(f==="W")p="`";else if(f==="X"||f==="Y"||f==="Z")p="";else throw new U;break;case"/":if(f>="A"&&f<="O")p=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")p=":";else throw new U;break}o+=p,u++}else o+=c}return o}}sn.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",sn.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],sn.ASTERISK_ENCODING=148;class Mt extends tn{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,o){let u=this.decodeStart(i),c=this.decodeEnd(i),f=new z;Mt.decodeMiddle(i,u[1],c[0],f);let p=f.toString(),w=null;o!=null&&(w=o.get(Le.ALLOWED_LENGTHS)),w==null&&(w=Mt.DEFAULT_ALLOWED_LENGTHS);let E=p.length,v=!1,D=0;for(let G of w){if(E===G){v=!0;break}G>D&&(D=G)}if(!v&&E>D&&(v=!0),!v)throw new U;const M=[new Pe(u[1],t),new Pe(c[0],t)];return new qe(p,null,0,M,ve.ITF,new Date().getTime())}static decodeMiddle(t,i,o,u){let c=new Int32Array(10),f=new Int32Array(5),p=new Int32Array(5);for(c.fill(0),f.fill(0),p.fill(0);i<o;){tn.recordPattern(t,i,c);for(let E=0;E<5;E++){let v=2*E;f[E]=c[v],p[E]=c[v+1]}let w=Mt.decodeDigit(f);u.append(w.toString()),w=this.decodeDigit(p),u.append(w.toString()),c.forEach(function(E){i+=E})}}decodeStart(t){let i=Mt.skipWhiteSpace(t),o=Mt.findGuardPattern(t,i,Mt.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(t,o[0]),o}validateQuietZone(t,i){let o=this.narrowLineWidth*10;o=o<i?o:i;for(let u=i-1;o>0&&u>=0&&!t.get(u);u--)o--;if(o!==0)throw new ae}static skipWhiteSpace(t){const i=t.getSize(),o=t.getNextSet(0);if(o===i)throw new ae;return o}decodeEnd(t){t.reverse();try{let i=Mt.skipWhiteSpace(t),o;try{o=Mt.findGuardPattern(t,i,Mt.END_PATTERN_REVERSED[0])}catch(c){c instanceof ae&&(o=Mt.findGuardPattern(t,i,Mt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,o[0]);let u=o[0];return o[0]=t.getSize()-o[1],o[1]=t.getSize()-u,o}finally{t.reverse()}}static findGuardPattern(t,i,o){let u=o.length,c=new Int32Array(u),f=t.getSize(),p=!1,w=0,E=i;c.fill(0);for(let v=i;v<f;v++)if(t.get(v)!==p)c[w]++;else{if(w===u-1){if(tn.patternMatchVariance(c,o,Mt.MAX_INDIVIDUAL_VARIANCE)<Mt.MAX_AVG_VARIANCE)return[E,v];E+=c[0]+c[1],ce.arraycopy(c,2,c,0,w-1),c[w-1]=0,c[w]=0,w--}else w++;c[w]=1,p=!p}throw new ae}static decodeDigit(t){let i=Mt.MAX_AVG_VARIANCE,o=-1,u=Mt.PATTERNS.length;for(let c=0;c<u;c++){let f=Mt.PATTERNS[c],p=tn.patternMatchVariance(t,f,Mt.MAX_INDIVIDUAL_VARIANCE);p<i?(i=p,o=c):p===i&&(o=-1)}if(o>=0)return o%10;throw new ae}}Mt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Mt.MAX_AVG_VARIANCE=.38,Mt.MAX_INDIVIDUAL_VARIANCE=.5,Mt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Mt.START_PATTERN=Int32Array.from([1,1,1,1]),Mt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class qt extends tn{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,o,u=0,c=Int32Array.from([0,0,0]);for(;!i;){c=Int32Array.from([0,0,0]),o=qt.findGuardPattern(t,u,!1,this.START_END_PATTERN,c);let f=o[0];u=o[1];let p=f-(u-f);p>=0&&(i=t.isRange(p,f,!1))}return o}static checkChecksum(t){return qt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let o=parseInt(t.charAt(i-1),10);return qt.getStandardUPCEANChecksum(t.substring(0,i-1))===o}static getStandardUPCEANChecksum(t){let i=t.length,o=0;for(let u=i-1;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=i-2;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}static decodeEnd(t,i){return qt.findGuardPattern(t,i,!1,qt.START_END_PATTERN,new Int32Array(qt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,o,u){return this.findGuardPattern(t,i,o,u,new Int32Array(u.length))}static findGuardPattern(t,i,o,u,c){let f=t.getSize();i=o?t.getNextUnset(i):t.getNextSet(i);let p=0,w=i,E=u.length,v=o;for(let D=i;D<f;D++)if(t.get(D)!==v)c[p]++;else{if(p===E-1){if(tn.patternMatchVariance(c,u,qt.MAX_INDIVIDUAL_VARIANCE)<qt.MAX_AVG_VARIANCE)return Int32Array.from([w,D]);w+=c[0]+c[1];let M=c.slice(2,c.length-1);for(let V=0;V<p-1;V++)c[V]=M[V];c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,v=!v}throw new ae}static decodeDigit(t,i,o,u){this.recordPattern(t,o,i);let c=this.MAX_AVG_VARIANCE,f=-1,p=u.length;for(let w=0;w<p;w++){let E=u[w],v=tn.patternMatchVariance(i,E,qt.MAX_INDIVIDUAL_VARIANCE);v<c&&(c=v,f=w)}if(f>=0)return f;throw new ae}}qt.MAX_AVG_VARIANCE=.48,qt.MAX_INDIVIDUAL_VARIANCE=.7,qt.START_END_PATTERN=Int32Array.from([1,1,1]),qt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),qt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),qt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class li{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,u),f=u.toString(),p=li.parseExtensionString(f),w=[new Pe((o[0]+o[1])/2,t),new Pe(c,t)],E=new qe(f,null,0,w,ve.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(t,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),f=i[1],p=0;for(let E=0;E<5&&f<c;E++){let v=qt.decodeDigit(t,u,f,qt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+v%10);for(let D of u)f+=D;v>=10&&(p|=1<<4-E),E!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(o.length!==5)throw new ae;let w=this.determineCheckDigit(p);if(li.extensionChecksum(o.toString())!==w)throw new ae;return f}static extensionChecksum(t){let i=t.length,o=0;for(let u=i-2;u>=0;u-=2)o+=t.charAt(u).charCodeAt(0)-48;o*=3;for(let u=i-1;u>=0;u-=2)o+=t.charAt(u).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ae}static parseExtensionString(t){if(t.length!==5)return null;let i=li.parseExtension5String(t);return i==null?null:new Map([[nt.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let o=parseInt(t.substring(1)),u=(o/100).toString(),c=o%100,f=c<10?"0"+c:c.toString();return i+u+"."+f}}class $i{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,o){let u=this.decodeRowStringBuffer,c=this.decodeMiddle(i,o,u),f=u.toString(),p=$i.parseExtensionString(f),w=[new Pe((o[0]+o[1])/2,t),new Pe(c,t)],E=new qe(f,null,0,w,ve.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&E.putAllMetadata(p),E}decodeMiddle(t,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),f=i[1],p=0;for(let w=0;w<2&&f<c;w++){let E=qt.decodeDigit(t,u,f,qt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let v of u)f+=v;E>=10&&(p|=1<<1-w),w!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(o.length!==2)throw new ae;if(parseInt(o.toString())%4!==p)throw new ae;return f}static parseExtensionString(t){return t.length!==2?null:new Map([[nt.ISSUE_NUMBER,parseInt(t)]])}}class _s{static decodeRow(t,i,o){let u=qt.findGuardPattern(i,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new li().decodeRow(t,i,u)}catch{return new $i().decodeRow(t,i,u)}}}_s.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class ht extends qt{constructor(){super(),this.decodeRowStringBuffer="",ht.L_AND_G_PATTERNS=ht.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=ht.L_PATTERNS[t-10],o=new Int32Array(i.length);for(let u=0;u<i.length;u++)o[u]=i[i.length-u-1];ht.L_AND_G_PATTERNS[t]=o}}decodeRow(t,i,o){let u=ht.findStartGuardPattern(i),c=o==null?null:o.get(Le.NEED_RESULT_POINT_CALLBACK);if(c!=null){const me=new Pe((u[0]+u[1])/2,t);c.foundPossibleResultPoint(me)}let f=this.decodeMiddle(i,u,this.decodeRowStringBuffer),p=f.rowOffset,w=f.resultString;if(c!=null){const me=new Pe(p,t);c.foundPossibleResultPoint(me)}let E=this.decodeEnd(i,p);if(c!=null){const me=new Pe((E[0]+E[1])/2,t);c.foundPossibleResultPoint(me)}let v=E[1],D=v+(v-E[0]);if(D>=i.getSize()||!i.isRange(v,D,!1))throw new ae;let M=w.toString();if(M.length<8)throw new U;if(!ht.checkChecksum(M))throw new te;let V=(u[1]+u[0])/2,G=(E[1]+E[0])/2,Q=this.getBarcodeFormat(),Z=[new Pe(V,t),new Pe(G,t)],se=new qe(M,null,0,Z,Q,new Date().getTime()),_e=0;try{let me=_s.decodeRow(t,i,E[1]);se.putMetadata(nt.UPC_EAN_EXTENSION,me.getText()),se.putAllMetadata(me.getResultMetadata()),se.addResultPoints(me.getResultPoints()),_e=me.getText().length}catch{}let Ae=o==null?null:o.get(Le.ALLOWED_EAN_EXTENSIONS);if(Ae!=null){let me=!1;for(let xt in Ae)if(_e.toString()===xt){me=!0;break}if(!me)throw new ae}return se}decodeEnd(t,i){return ht.findGuardPattern(t,i,!1,ht.START_END_PATTERN,new Int32Array(ht.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return ht.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let o=parseInt(t.charAt(i-1),10);return ht.getStandardUPCEANChecksum(t.substring(0,i-1))===o}static getStandardUPCEANChecksum(t){let i=t.length,o=0;for(let u=i-1;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}o*=3;for(let u=i-2;u>=0;u-=2){let c=t.charAt(u).charCodeAt(0)-48;if(c<0||c>9)throw new U;o+=c}return(1e3-o)%10}}class tr extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,o){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),f=i[1],p=0;for(let E=0;E<6&&f<c;E++){let v=ht.decodeDigit(t,u,f,ht.L_AND_G_PATTERNS);o+=String.fromCharCode(48+v%10);for(let D of u)f+=D;v>=10&&(p|=1<<5-E)}o=tr.determineFirstDigit(o,p),f=ht.findGuardPattern(t,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let E=0;E<6&&f<c;E++){let v=ht.decodeDigit(t,u,f,ht.L_PATTERNS);o+=String.fromCharCode(48+v);for(let D of u)f+=D}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ve.EAN_13}static determineFirstDigit(t,i){for(let o=0;o<10;o++)if(i===this.FIRST_DIGIT_ENCODINGS[o])return t=String.fromCharCode(48+o)+t,t;throw new ae}}tr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class As extends ht{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,o){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),f=i[1];for(let w=0;w<4&&f<c;w++){let E=ht.decodeDigit(t,u,f,ht.L_PATTERNS);o+=String.fromCharCode(48+E);for(let v of u)f+=v}f=ht.findGuardPattern(t,f,!0,ht.MIDDLE_PATTERN,new Int32Array(ht.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&f<c;w++){let E=ht.decodeDigit(t,u,f,ht.L_PATTERNS);o+=String.fromCharCode(48+E);for(let v of u)f+=v}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ve.EAN_8}}class ui extends ht{constructor(){super(...arguments),this.ean13Reader=new tr}getBarcodeFormat(){return ve.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,o))}decodeMiddle(t,i,o){return this.ean13Reader.decodeMiddle(t,i,o)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let o=new qe(i.substring(1),null,null,t.getResultPoints(),ve.UPC_A);return t.getResultMetadata()!=null&&o.putAllMetadata(t.getResultMetadata()),o}else throw new ae}reset(){this.ean13Reader.reset()}}class cr extends ht{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,o){const u=this.decodeMiddleCounters.map(E=>E);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const c=t.getSize();let f=i[1],p=0;for(let E=0;E<6&&f<c;E++){const v=cr.decodeDigit(t,u,f,cr.L_AND_G_PATTERNS);o+=String.fromCharCode(48+v%10);for(let D of u)f+=D;v>=10&&(p|=1<<5-E)}let w=cr.determineNumSysAndCheckDigit(o,p);return{rowOffset:f,resultString:w}}decodeEnd(t,i){return cr.findGuardPatternWithoutCounters(t,i,!0,cr.MIDDLE_END_PATTERN)}checkChecksum(t){return ht.checkChecksum(cr.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let o=0;o<=1;o++)for(let u=0;u<10;u++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][u]){let c=String.fromCharCode(48+o),f=String.fromCharCode(48+u);return c+t+f}throw ae.getNotFoundInstance()}getBarcodeFormat(){return ve.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(c=>c.charCodeAt(0)),o=new z;o.append(t.charAt(0));let u=i[5];switch(u){case 0:case 1:case 2:o.appendChars(i,0,2),o.append(u),o.append("0000"),o.appendChars(i,2,3);break;case 3:o.appendChars(i,0,3),o.append("00000"),o.appendChars(i,3,2);break;case 4:o.appendChars(i,0,4),o.append("00000"),o.append(i[4]);break;default:o.appendChars(i,0,5),o.append("0000"),o.append(u);break}return t.length>=8&&o.append(t.charAt(7)),o.toString()}}cr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),cr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Vi extends tn{constructor(t){super();let i=t==null?null:t.get(Le.POSSIBLE_FORMATS),o=[];l(i)?(o.push(new tr),o.push(new ui),o.push(new As),o.push(new cr)):(i.indexOf(ve.EAN_13)>-1&&o.push(new tr),i.indexOf(ve.UPC_A)>-1&&o.push(new ui),i.indexOf(ve.EAN_8)>-1&&o.push(new As),i.indexOf(ve.UPC_E)>-1&&o.push(new cr)),this.readers=o}decodeRow(t,i,o){for(let u of this.readers)try{const c=u.decodeRow(t,i,o),f=c.getBarcodeFormat()===ve.EAN_13&&c.getText().charAt(0)==="0",p=o==null?null:o.get(Le.POSSIBLE_FORMATS),w=p==null||p.includes(ve.UPC_A);if(f&&w){const E=c.getRawBytes(),v=new qe(c.getText().substring(1),E,E?E.length:null,c.getResultPoints(),ve.UPC_A);return v.putAllMetadata(c.getResultMetadata()),v}return c}catch{}throw new ae}reset(){for(let t of this.readers)t.reset()}}class vn extends tn{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let o=0;o<i.length;o++)if(tn.patternMatchVariance(t,i[o],vn.MAX_INDIVIDUAL_VARIANCE)<vn.MAX_AVG_VARIANCE)return o;throw new ae}static count(t){return mt.sum(new Int32Array(t))}static increment(t,i){let o=0,u=i[0];for(let c=1;c<t.length;c++)i[c]>u&&(u=i[c],o=c);t[o]++}static decrement(t,i){let o=0,u=i[0];for(let c=1;c<t.length;c++)i[c]<u&&(u=i[c],o=c);t[o]--}static isFinderPattern(t){let i=t[0]+t[1],o=i+t[2]+t[3],u=i/o;if(u>=vn.MIN_FINDER_PATTERN_RATIO&&u<=vn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let p of t)p>f&&(f=p),p<c&&(c=p);return f<10*c}return!1}}vn.MAX_AVG_VARIANCE=.2,vn.MAX_INDIVIDUAL_VARIANCE=.45,vn.MIN_FINDER_PATTERN_RATIO=9.5/12,vn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Cr{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Cr))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ji{constructor(t,i,o,u,c){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Pe(o,c)),this.resultPoints.push(new Pe(u,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Ji))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class Lt{constructor(){}static getRSSvalue(t,i,o){let u=0;for(let w of t)u+=w;let c=0,f=0,p=t.length;for(let w=0;w<p-1;w++){let E;for(E=1,f|=1<<w;E<t[w];E++,f&=~(1<<w)){let v=Lt.combins(u-E-1,p-w-2);if(o&&f===0&&u-E-(p-w-1)>=p-w-1&&(v-=Lt.combins(u-E-(p-w),p-w-2)),p-w-1>1){let D=0;for(let M=u-E-(p-w-2);M>i;M--)D+=Lt.combins(u-E-M-1,p-w-3);v-=D*(p-1-w)}else u-E>i&&v--;c+=v}u-=E}return c}static combins(t,i){let o,u;t-i>i?(u=i,o=t-i):(u=t-i,o=i);let c=1,f=1;for(let p=t;p>o;p--)c*=p,f<=u&&(c/=f,f++);for(;f<=u;)c/=f,f++;return c}}class Ws{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let o=12*i,u=new Re(o),c=0,p=t[0].getRightChar().getValue();for(let w=11;w>=0;--w)p&1<<w&&u.set(c),c++;for(let w=1;w<t.length;++w){let E=t[w],v=E.getLeftChar().getValue();for(let D=11;D>=0;--D)v&1<<D&&u.set(c),c++;if(E.getRightChar()!=null){let D=E.getRightChar().getValue();for(let M=11;M>=0;--M)D&1<<M&&u.set(c),c++}}return u}}class Wn{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Ui{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Sn extends Ui{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Sn.FNC1}}Sn.FNC1="$";class Kr extends Ui{constructor(t,i,o){super(t),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class gn extends Ui{constructor(t,i,o){if(super(t),i<0||i>10||o<0||o>10)throw new U;this.firstDigit=i,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===gn.FNC1}isSecondDigitFNC1(){return this.secondDigit===gn.FNC1}isAnyFNC1(){return this.firstDigit===gn.FNC1||this.secondDigit===gn.FNC1}}gn.FNC1=10;class Me{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ae;let i=t.substring(0,2);for(let c of Me.TWO_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(2,c[2],t):Me.processFixedAI(2,c[1],t);if(t.length<3)throw new ae;let o=t.substring(0,3);for(let c of Me.THREE_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(3,c[2],t):Me.processFixedAI(3,c[1],t);for(let c of Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,c[2],t):Me.processFixedAI(4,c[1],t);if(t.length<4)throw new ae;let u=t.substring(0,4);for(let c of Me.FOUR_DIGIT_DATA_LENGTH)if(c[0]===u)return c[1]===Me.VARIABLE_LENGTH?Me.processVariableAI(4,c[2],t):Me.processFixedAI(4,c[1],t);throw new ae}static processFixedAI(t,i,o){if(o.length<t)throw new ae;let u=o.substring(0,t);if(o.length<t+i)throw new ae;let c=o.substring(t,t+i),f=o.substring(t+i),p="("+u+")"+c,w=Me.parseFieldsInGeneralPurpose(f);return w==null?p:p+w}static processVariableAI(t,i,o){let u=o.substring(0,t),c;o.length<t+i?c=o.length:c=t+i;let f=o.substring(t,c),p=o.substring(c),w="("+u+")"+f,E=Me.parseFieldsInGeneralPurpose(p);return E==null?w:w+E}}Me.VARIABLE_LENGTH=[],Me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Me.VARIABLE_LENGTH,20],["22",Me.VARIABLE_LENGTH,29],["30",Me.VARIABLE_LENGTH,8],["37",Me.VARIABLE_LENGTH,8],["90",Me.VARIABLE_LENGTH,30],["91",Me.VARIABLE_LENGTH,30],["92",Me.VARIABLE_LENGTH,30],["93",Me.VARIABLE_LENGTH,30],["94",Me.VARIABLE_LENGTH,30],["95",Me.VARIABLE_LENGTH,30],["96",Me.VARIABLE_LENGTH,30],["97",Me.VARIABLE_LENGTH,3],["98",Me.VARIABLE_LENGTH,30],["99",Me.VARIABLE_LENGTH,30]],Me.THREE_DIGIT_DATA_LENGTH=[["240",Me.VARIABLE_LENGTH,30],["241",Me.VARIABLE_LENGTH,30],["242",Me.VARIABLE_LENGTH,6],["250",Me.VARIABLE_LENGTH,30],["251",Me.VARIABLE_LENGTH,30],["253",Me.VARIABLE_LENGTH,17],["254",Me.VARIABLE_LENGTH,20],["400",Me.VARIABLE_LENGTH,30],["401",Me.VARIABLE_LENGTH,30],["402",17],["403",Me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Me.VARIABLE_LENGTH,20],["421",Me.VARIABLE_LENGTH,15],["422",3],["423",Me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Me.VARIABLE_LENGTH,15],["391",Me.VARIABLE_LENGTH,18],["392",Me.VARIABLE_LENGTH,15],["393",Me.VARIABLE_LENGTH,18],["703",Me.VARIABLE_LENGTH,30]],Me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Me.VARIABLE_LENGTH,20],["8003",Me.VARIABLE_LENGTH,30],["8004",Me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Me.VARIABLE_LENGTH,30],["8008",Me.VARIABLE_LENGTH,12],["8018",18],["8020",Me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Me.VARIABLE_LENGTH,70],["8200",Me.VARIABLE_LENGTH,70]];class es{constructor(t){this.buffer=new z,this.information=t}decodeAllCodes(t,i){let o=i,u=null;do{let c=this.decodeGeneralPurposeField(o,u),f=Me.parseFieldsInGeneralPurpose(c.getNewString());if(f!=null&&t.append(f),c.isRemaining()?u=""+c.getRemainingValue():u=null,o===c.getNewPosition())break;o=c.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(t,4);return c===0?new gn(this.information.getSize(),gn.FNC1,gn.FNC1):new gn(this.information.getSize(),c-1,gn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),o=(i-8)/11,u=(i-8)%11;return new gn(t+7,o,u)}extractNumericValueFromBitArray(t,i){return es.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,o){let u=0;for(let c=0;c<o;++c)t.get(i+c)&&(u|=1<<o-c-1);return u}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Kr(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Kr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let o=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(o!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Kr(this.current.getPosition(),this.buffer.toString()):i=new Kr(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Wn(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Kr(this.current.getPosition(),this.buffer.toString());return new Wn(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Wn(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Kr(this.current.getPosition(),this.buffer.toString());return new Wn(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Wn(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Kr(this.current.getPosition(),this.buffer.toString());return new Wn(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Wn(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<116)return!0;if(t+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(t,8);return u>=232&&u<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Sn(t+5,Sn.FNC1);if(i>=5&&i<15)return new Sn(t+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(t,7);if(o>=64&&o<90)return new Sn(t+7,""+(o+1));if(o>=90&&o<116)return new Sn(t+7,""+(o+7));let u=this.extractNumericValueFromBitArray(t,8),c;switch(u){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new U}return new Sn(t+8,c)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,6);return o>=16&&o<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Sn(t+5,Sn.FNC1);if(i>=5&&i<15)return new Sn(t+5,"0"+(i-5));let o=this.extractNumericValueFromBitArray(t,6);if(o>=32&&o<58)return new Sn(t+6,""+(o+33));let u;switch(o){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new ur("Decoding invalid alphanumeric value: "+o)}return new Sn(t+6,u)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class ts{constructor(t){this.information=t,this.generalDecoder=new es(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Gn extends ts{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let o=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,o)}encodeCompressedGtinWithoutAI(t,i,o){for(let u=0;u<4;++u){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*u,10);c/100===0&&t.append("0"),c/10===0&&t.append("0"),t.append(c)}Gn.appendCheckDigit(t,o)}static appendCheckDigit(t,i){let o=0;for(let u=0;u<13;u++){let c=t.charAt(u+i).charCodeAt(0)-48;o+=u&1?c:3*c}o=10-o%10,o===10&&(o=0),t.append(o)}}Gn.GTIN_SIZE=40;class nr extends Gn{constructor(t){super(t)}parseInformation(){let t=new z;t.append("(01)");let i=t.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(nr.HEADER_SIZE,4);return t.append(o),this.encodeCompressedGtinWithoutAI(t,nr.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,nr.HEADER_SIZE+44)}}nr.HEADER_SIZE=4;class Ii extends ts{constructor(t){super(t)}parseInformation(){let t=new z;return this.getGeneralDecoder().decodeAllCodes(t,Ii.HEADER_SIZE)}}Ii.HEADER_SIZE=5;class Ir extends Gn{constructor(t){super(t)}encodeCompressedWeight(t,i,o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i,o);this.addWeightCode(t,u);let c=this.checkWeight(u),f=1e5;for(let p=0;p<5;++p)c/f===0&&t.append("0"),f/=10;t.append(c)}}class Fr extends Ir{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Fr.HEADER_SIZE+Ir.GTIN_SIZE+Fr.WEIGHT_SIZE)throw new ae;let t=new z;return this.encodeCompressedGtin(t,Fr.HEADER_SIZE),this.encodeCompressedWeight(t,Fr.HEADER_SIZE+Ir.GTIN_SIZE,Fr.WEIGHT_SIZE),t.toString()}}Fr.HEADER_SIZE=5,Fr.WEIGHT_SIZE=15;class Do extends Fr{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Gs extends Fr{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class hr extends Gn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<hr.HEADER_SIZE+Gn.GTIN_SIZE)throw new ae;let t=new z;this.encodeCompressedGtin(t,hr.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(hr.HEADER_SIZE+Gn.GTIN_SIZE,hr.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(hr.HEADER_SIZE+Gn.GTIN_SIZE+hr.LAST_DIGIT_SIZE,null);return t.append(o.getNewString()),t.toString()}}hr.HEADER_SIZE=8,hr.LAST_DIGIT_SIZE=2;class Ln extends Gn{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Ln.HEADER_SIZE+Gn.GTIN_SIZE)throw new ae;let t=new z;this.encodeCompressedGtin(t,Ln.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Gn.GTIN_SIZE,Ln.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Ln.HEADER_SIZE+Gn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE,Ln.FIRST_THREE_DIGITS_SIZE);o/100==0&&t.append("0"),o/10==0&&t.append("0"),t.append(o);let u=this.getGeneralDecoder().decodeGeneralPurposeField(Ln.HEADER_SIZE+Gn.GTIN_SIZE+Ln.LAST_DIGIT_SIZE+Ln.FIRST_THREE_DIGITS_SIZE,null);return t.append(u.getNewString()),t.toString()}}Ln.HEADER_SIZE=8,Ln.LAST_DIGIT_SIZE=2,Ln.FIRST_THREE_DIGITS_SIZE=10;class Xt extends Ir{constructor(t,i,o){super(t),this.dateCode=o,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE+Xt.DATE_SIZE)throw new ae;let t=new z;return this.encodeCompressedGtin(t,Xt.HEADER_SIZE),this.encodeCompressedWeight(t,Xt.HEADER_SIZE+Xt.GTIN_SIZE,Xt.WEIGHT_SIZE),this.encodeCompressedDate(t,Xt.HEADER_SIZE+Xt.GTIN_SIZE+Xt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,Xt.DATE_SIZE);if(o==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let u=o%32;o/=32;let c=o%12+1;o/=12;let f=o;f/10==0&&t.append("0"),t.append(f),c/10==0&&t.append("0"),t.append(c),u/10==0&&t.append("0"),t.append(u)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}Xt.HEADER_SIZE=8,Xt.WEIGHT_SIZE=20,Xt.DATE_SIZE=16;function sa(N){try{if(N.get(1))return new nr(N);if(!N.get(2))return new Ii(N);switch(es.extractNumericValueFromBitArray(N,1,4)){case 4:return new Do(N);case 5:return new Gs(N)}switch(es.extractNumericValueFromBitArray(N,1,5)){case 12:return new hr(N);case 13:return new Ln(N)}switch(es.extractNumericValueFromBitArray(N,1,7)){case 56:return new Xt(N,"310","11");case 57:return new Xt(N,"320","11");case 58:return new Xt(N,"310","13");case 59:return new Xt(N,"320","13");case 60:return new Xt(N,"310","15");case 61:return new Xt(N,"320","15");case 62:return new Xt(N,"310","17");case 63:return new Xt(N,"320","17")}}catch(t){throw console.log(t),new ur("unknown decoder: "+N)}}class St{constructor(t,i,o,u){this.leftchar=t,this.rightchar=i,this.finderpattern=o,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof St?St.equalsOrNull(t.leftchar,i.leftchar)&&St.equalsOrNull(t.rightchar,i.rightchar)&&St.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:St.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Xs{constructor(t,i,o){this.pairs=t,this.rowNumber=i,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof Xs?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let o;return t.forEach((u,c)=>{i.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(o=!0)})}),o}}class de extends vn{constructor(t){super(...arguments),this.pairs=new Array(de.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,o){this.pairs.length=0,this.startFromEven=!1;try{return de.constructResult(this.decodeRow2pairs(t,i))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,de.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(c){if(c instanceof ae){if(!this.pairs.length)throw new ae;o=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(t,!1),u){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ae}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let o=i;o<this.rows.length;o++){let u=this.rows[o];this.pairs.length=0;for(let f of t)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!de.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(t);c.push(u);try{return this.checkRows(c,o+1)}catch(f){this.verbose&&console.log(f)}}throw new ae}static isValidSequence(t){for(let i of de.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let o=!0;for(let u=0;u<t.length;u++)if(t[u].getFinderPattern().getValue()!=i[u]){o=!1;break}if(o)return!0}return!1}storeRow(t,i){let o=0,u=!1,c=!1;for(;o<this.rows.length;){let f=this.rows[o];if(f.getRowNumber()>t){c=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),o++}c||u||de.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Xs(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let o of i)if(o.getPairs().length!==t.length){for(let u of o.getPairs())for(let c of t)if(St.equals(u,c))break}}static isPartialRow(t,i){for(let o of i){let u=!0;for(let c of t){let f=!1;for(let p of o.getPairs())if(c.equals(p)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=Ws.buildBitArray(t),u=sa(i).parseInformation(),c=t[0].getFinderPattern().getResultPoints(),f=t[t.length-1].getFinderPattern().getResultPoints(),p=[c[0],c[1],f[0],f[1]];return new qe(u,null,null,p,ve.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),o=t.getRightChar();if(o==null)return!1;let u=o.getChecksumPortion(),c=2;for(let p=1;p<this.pairs.size();++p){let w=this.pairs.get(p);u+=w.getLeftChar().getChecksumPortion(),c++;let E=w.getRightChar();E!=null&&(u+=E.getChecksumPortion(),c++)}return u%=211,211*(c-4)+u==i.getValue()}static getNextSecondBar(t,i){let o;return t.get(i)?(o=t.getNextUnset(i),o=t.getNextSet(o)):(o=t.getNextSet(i),o=t.getNextUnset(o)),o}retrieveNextPair(t,i,o){let u=i.length%2==0;this.startFromEven&&(u=!u);let c,f=!0,p=-1;do this.findNextPair(t,i,p),c=this.parseFoundFinderPattern(t,o,u),c==null?p=de.getNextSecondBar(t,this.startEnd[0]):f=!1;while(f);let w=this.decodeDataCharacter(t,c,u,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ae;let E;try{E=this.decodeDataCharacter(t,c,u,!1)}catch(v){E=null,this.verbose&&console.log(v)}return new St(w,E,c,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,o){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let c=t.getSize(),f;o>=0?f=o:this.isEmptyPair(i)?f=0:f=i[i.length-1].getFinderPattern().getStartEnd()[1];let p=i.length%2!=0;this.startFromEven&&(p=!p);let w=!1;for(;f<c&&(w=!t.get(f),!!w);)f++;let E=0,v=f;for(let D=f;D<c;D++)if(t.get(D)!=w)u[E]++;else{if(E==3){if(p&&de.reverseCounters(u),de.isFinderPattern(u)){this.startEnd[0]=v,this.startEnd[1]=D;return}p&&de.reverseCounters(u),v+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,E--}else E++;u[E]=1,w=!w}throw new ae}static reverseCounters(t){let i=t.length;for(let o=0;o<i/2;++o){let u=t[o];t[o]=t[i-o-1],t[i-o-1]=u}}parseFoundFinderPattern(t,i,o){let u,c,f;if(o){let E=this.startEnd[0]-1;for(;E>=0&&!t.get(E);)E--;E++,u=this.startEnd[0]-E,c=E,f=this.startEnd[1]}else c=this.startEnd[0],f=t.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let p=this.getDecodeFinderCounters();ce.arraycopy(p,0,p,1,p.length-1),p[0]=u;let w;try{w=this.parseFinderValue(p,de.FINDER_PATTERNS)}catch{return null}return new Ji(w,[c,f],c,f,i)}decodeDataCharacter(t,i,o,u){let c=this.getDataCharacterCounters();for(let Ht=0;Ht<c.length;Ht++)c[Ht]=0;if(u)de.recordPatternInReverse(t,i.getStartEnd()[0],c);else{de.recordPattern(t,i.getStartEnd()[1],c);for(let Ht=0,_n=c.length-1;Ht<_n;Ht++,_n--){let pr=c[Ht];c[Ht]=c[_n],c[_n]=pr}}let f=17,p=mt.sum(new Int32Array(c))/f,w=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(p-w)/w>.3)throw new ae;let E=this.getOddCounts(),v=this.getEvenCounts(),D=this.getOddRoundingErrors(),M=this.getEvenRoundingErrors();for(let Ht=0;Ht<c.length;Ht++){let _n=1*c[Ht]/p,pr=_n+.5;if(pr<1){if(_n<.3)throw new ae;pr=1}else if(pr>8){if(_n>8.7)throw new ae;pr=8}let Ns=Ht/2;Ht&1?(v[Ns]=pr,M[Ns]=_n-pr):(E[Ns]=pr,D[Ns]=_n-pr)}this.adjustOddEvenCounts(f);let V=4*i.getValue()+(o?0:2)+(u?0:1)-1,G=0,Q=0;for(let Ht=E.length-1;Ht>=0;Ht--){if(de.isNotA1left(i,o,u)){let _n=de.WEIGHTS[V][2*Ht];Q+=E[Ht]*_n}G+=E[Ht]}let Z=0;for(let Ht=v.length-1;Ht>=0;Ht--)if(de.isNotA1left(i,o,u)){let _n=de.WEIGHTS[V][2*Ht+1];Z+=v[Ht]*_n}let se=Q+Z;if(G&1||G>13||G<4)throw new ae;let _e=(13-G)/2,Ae=de.SYMBOL_WIDEST[_e],me=9-Ae,xt=Lt.getRSSvalue(E,Ae,!0),at=Lt.getRSSvalue(v,me,!1),Dr=de.EVEN_TOTAL_SUBSET[_e],pi=de.GSUM[_e],Vn=xt*Dr+at+pi;return new Cr(Vn,se)}static isNotA1left(t,i,o){return!(t.getValue()==0&&i&&o)}adjustOddEvenCounts(t){let i=mt.sum(new Int32Array(this.getOddCounts())),o=mt.sum(new Int32Array(this.getEvenCounts())),u=!1,c=!1;i>13?c=!0:i<4&&(u=!0);let f=!1,p=!1;o>13?p=!0:o<4&&(f=!0);let w=i+o-t,E=(i&1)==1,v=(o&1)==0;if(w==1)if(E){if(v)throw new ae;c=!0}else{if(!v)throw new ae;p=!0}else if(w==-1)if(E){if(v)throw new ae;u=!0}else{if(!v)throw new ae;f=!0}else if(w==0){if(E){if(!v)throw new ae;i<o?(u=!0,p=!0):(c=!0,f=!0)}else if(v)throw new ae}else throw new ae;if(u){if(c)throw new ae;de.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&de.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(p)throw new ae;de.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&de.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}de.SYMBOL_WIDEST=[7,5,4,3,1],de.EVEN_TOTAL_SUBSET=[4,20,52,104,204],de.GSUM=[0,348,1388,2948,3988],de.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],de.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],de.FINDER_PAT_A=0,de.FINDER_PAT_B=1,de.FINDER_PAT_C=2,de.FINDER_PAT_D=3,de.FINDER_PAT_E=4,de.FINDER_PAT_F=5,de.FINDER_PATTERN_SEQUENCES=[[de.FINDER_PAT_A,de.FINDER_PAT_A],[de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B],[de.FINDER_PAT_A,de.FINDER_PAT_C,de.FINDER_PAT_B,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_C],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F]],de.MAX_PAIRS=11;class ns extends Cr{constructor(t,i,o){super(t,i),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Rt extends vn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,o){const u=this.decodePair(i,!1,t,o);Rt.addOrTally(this.possibleLeftPairs,u),i.reverse();let c=this.decodePair(i,!0,t,o);Rt.addOrTally(this.possibleRightPairs,c),i.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Rt.checkChecksum(f,p))return Rt.constructResult(f,p)}throw new ae}static addOrTally(t,i){if(i==null)return;let o=!1;for(let u of t)if(u.getValue()===i.getValue()){u.incrementCount(),o=!0;break}o||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let o=4537077*t.getValue()+i.getValue(),u=new String(o).toString(),c=new z;for(let E=13-u.length;E>0;E--)c.append("0");c.append(u);let f=0;for(let E=0;E<13;E++){let v=c.charAt(E).charCodeAt(0)-48;f+=E&1?v:3*v}f=10-f%10,f===10&&(f=0),c.append(f.toString());let p=t.getFinderPattern().getResultPoints(),w=i.getFinderPattern().getResultPoints();return new qe(c.toString(),null,0,[p[0],p[1],w[0],w[1]],ve.RSS_14,new Date().getTime())}static checkChecksum(t,i){let o=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,u=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,o===u}decodePair(t,i,o,u){try{let c=this.findFinderPattern(t,i),f=this.parseFoundFinderPattern(t,o,i,c),p=u==null?null:u.get(Le.NEED_RESULT_POINT_CALLBACK);if(p!=null){let v=(c[0]+c[1])/2;i&&(v=t.getSize()-1-v),p.foundPossibleResultPoint(new Pe(v,o))}let w=this.decodeDataCharacter(t,f,!0),E=this.decodeDataCharacter(t,f,!1);return new ns(1597*w.getValue()+E.getValue(),w.getChecksumPortion()+4*E.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(t,i,o){let u=this.getDataCharacterCounters();for(let Z=0;Z<u.length;Z++)u[Z]=0;if(o)tn.recordPatternInReverse(t,i.getStartEnd()[0],u);else{tn.recordPattern(t,i.getStartEnd()[1]+1,u);for(let Z=0,se=u.length-1;Z<se;Z++,se--){let _e=u[Z];u[Z]=u[se],u[se]=_e}}let c=o?16:15,f=mt.sum(new Int32Array(u))/c,p=this.getOddCounts(),w=this.getEvenCounts(),E=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let Z=0;Z<u.length;Z++){let se=u[Z]/f,_e=Math.floor(se+.5);_e<1?_e=1:_e>8&&(_e=8);let Ae=Math.floor(Z/2);Z&1?(w[Ae]=_e,v[Ae]=se-_e):(p[Ae]=_e,E[Ae]=se-_e)}this.adjustOddEvenCounts(o,c);let D=0,M=0;for(let Z=p.length-1;Z>=0;Z--)M*=9,M+=p[Z],D+=p[Z];let V=0,G=0;for(let Z=w.length-1;Z>=0;Z--)V*=9,V+=w[Z],G+=w[Z];let Q=M+3*V;if(o){if(D&1||D>12||D<4)throw new ae;let Z=(12-D)/2,se=Rt.OUTSIDE_ODD_WIDEST[Z],_e=9-se,Ae=Lt.getRSSvalue(p,se,!1),me=Lt.getRSSvalue(w,_e,!0),xt=Rt.OUTSIDE_EVEN_TOTAL_SUBSET[Z],at=Rt.OUTSIDE_GSUM[Z];return new Cr(Ae*xt+me+at,Q)}else{if(G&1||G>10||G<4)throw new ae;let Z=(10-G)/2,se=Rt.INSIDE_ODD_WIDEST[Z],_e=9-se,Ae=Lt.getRSSvalue(p,se,!0),me=Lt.getRSSvalue(w,_e,!1),xt=Rt.INSIDE_ODD_TOTAL_SUBSET[Z],at=Rt.INSIDE_GSUM[Z];return new Cr(me*xt+Ae+at,Q)}}findFinderPattern(t,i){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),c=!1,f=0;for(;f<u&&(c=!t.get(f),i!==c);)f++;let p=0,w=f;for(let E=f;E<u;E++)if(t.get(E)!==c)o[p]++;else{if(p===3){if(vn.isFinderPattern(o))return[w,E];w+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,p--}else p++;o[p]=1,c=!c}throw new ae}parseFoundFinderPattern(t,i,o,u){let c=t.get(u[0]),f=u[0]-1;for(;f>=0&&c!==t.get(f);)f--;f++;const p=u[0]-f,w=this.getDecodeFinderCounters(),E=new Int32Array(w.length);ce.arraycopy(w,0,E,1,w.length-1),E[0]=p;const v=this.parseFinderValue(E,Rt.FINDER_PATTERNS);let D=f,M=u[1];return o&&(D=t.getSize()-1-D,M=t.getSize()-1-M),new Ji(v,[f,u[1]],D,M,i)}adjustOddEvenCounts(t,i){let o=mt.sum(new Int32Array(this.getOddCounts())),u=mt.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1,p=!1,w=!1;t?(o>12?f=!0:o<4&&(c=!0),u>12?w=!0:u<4&&(p=!0)):(o>11?f=!0:o<5&&(c=!0),u>10?w=!0:u<4&&(p=!0));let E=o+u-i,v=(o&1)===(t?1:0),D=(u&1)===1;if(E===1)if(v){if(D)throw new ae;f=!0}else{if(!D)throw new ae;w=!0}else if(E===-1)if(v){if(D)throw new ae;c=!0}else{if(!D)throw new ae;p=!0}else if(E===0){if(v){if(!D)throw new ae;o<u?(c=!0,w=!0):(f=!0,p=!0)}else if(D)throw new ae}else throw new ae;if(c){if(f)throw new ae;vn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&vn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new ae;vn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&vn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Rt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Rt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Rt.OUTSIDE_GSUM=[0,161,961,2015,2715],Rt.INSIDE_GSUM=[0,336,1036,1516],Rt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Rt.INSIDE_ODD_WIDEST=[2,4,6,8],Rt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ti extends tn{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const o=t?t.get(Le.POSSIBLE_FORMATS):null,u=t&&t.get(Le.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ve.EAN_13)||o.includes(ve.UPC_A)||o.includes(ve.EAN_8)||o.includes(ve.UPC_E))&&this.readers.push(new Vi(t)),o.includes(ve.CODE_39)&&this.readers.push(new sn(u)),o.includes(ve.CODE_128)&&this.readers.push(new Se),o.includes(ve.ITF)&&this.readers.push(new Mt),o.includes(ve.RSS_14)&&this.readers.push(new Rt),o.includes(ve.RSS_EXPANDED)&&this.readers.push(new de(this.verbose))):(this.readers.push(new Vi(t)),this.readers.push(new sn),this.readers.push(new Vi(t)),this.readers.push(new Se),this.readers.push(new Mt),this.readers.push(new Rt),this.readers.push(new de(this.verbose)))}decodeRow(t,i,o){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(t,i,o)}catch{}throw new ae}reset(){this.readers.forEach(t=>t.reset())}}class oa extends je{constructor(t=500,i){super(new Ti(i),t,i)}}class Et{constructor(t,i,o){this.ecCodewords=t,this.ecBlocks=[i],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ut{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class yt{constructor(t,i,o,u,c,f){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=o,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=c,this.ecBlocks=f;let p=0;const w=f.getECCodewords(),E=f.getECBlocks();for(let v of E)p+=v.getCount()*(v.getDataCodewords()+w);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if(t&1||i&1)throw new U;for(let o of yt.VERSIONS)if(o.symbolSizeRows===t&&o.symbolSizeColumns===i)return o;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new yt(1,10,10,8,8,new Et(5,new ut(1,3))),new yt(2,12,12,10,10,new Et(7,new ut(1,5))),new yt(3,14,14,12,12,new Et(10,new ut(1,8))),new yt(4,16,16,14,14,new Et(12,new ut(1,12))),new yt(5,18,18,16,16,new Et(14,new ut(1,18))),new yt(6,20,20,18,18,new Et(18,new ut(1,22))),new yt(7,22,22,20,20,new Et(20,new ut(1,30))),new yt(8,24,24,22,22,new Et(24,new ut(1,36))),new yt(9,26,26,24,24,new Et(28,new ut(1,44))),new yt(10,32,32,14,14,new Et(36,new ut(1,62))),new yt(11,36,36,16,16,new Et(42,new ut(1,86))),new yt(12,40,40,18,18,new Et(48,new ut(1,114))),new yt(13,44,44,20,20,new Et(56,new ut(1,144))),new yt(14,48,48,22,22,new Et(68,new ut(1,174))),new yt(15,52,52,24,24,new Et(42,new ut(2,102))),new yt(16,64,64,14,14,new Et(56,new ut(2,140))),new yt(17,72,72,16,16,new Et(36,new ut(4,92))),new yt(18,80,80,18,18,new Et(48,new ut(4,114))),new yt(19,88,88,20,20,new Et(56,new ut(4,144))),new yt(20,96,96,22,22,new Et(68,new ut(4,174))),new yt(21,104,104,24,24,new Et(56,new ut(6,136))),new yt(22,120,120,18,18,new Et(68,new ut(6,175))),new yt(23,132,132,20,20,new Et(62,new ut(8,163))),new yt(24,144,144,22,22,new Et(62,new ut(8,156),new ut(2,155))),new yt(25,8,18,6,16,new Et(7,new ut(1,5))),new yt(26,8,32,6,14,new Et(11,new ut(1,10))),new yt(27,12,26,10,24,new Et(14,new ut(1,16))),new yt(28,12,36,10,16,new Et(18,new ut(1,22))),new yt(29,16,36,14,16,new Et(24,new ut(1,32))),new yt(30,16,48,14,22,new Et(28,new ut(1,49)))]}}yt.VERSIONS=yt.buildVersions();class Xn{constructor(t){const i=t.getHeight();if(i<8||i>144||i&1)throw new U;this.version=Xn.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new ot(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),o=t.getWidth();return yt.getVersionForDimensions(i,o)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,o=4,u=0;const c=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let p=!1,w=!1,E=!1,v=!1;do if(o===c&&u===0&&!p)t[i++]=this.readCorner1(c,f)&255,o-=2,u+=2,p=!0;else if(o===c-2&&u===0&&f&3&&!w)t[i++]=this.readCorner2(c,f)&255,o-=2,u+=2,w=!0;else if(o===c+4&&u===2&&!(f&7)&&!E)t[i++]=this.readCorner3(c,f)&255,o-=2,u+=2,E=!0;else if(o===c-2&&u===0&&(f&7)===4&&!v)t[i++]=this.readCorner4(c,f)&255,o-=2,u+=2,v=!0;else{do o<c&&u>=0&&!this.readMappingMatrix.get(u,o)&&(t[i++]=this.readUtah(o,u,c,f)&255),o-=2,u+=2;while(o>=0&&u<f);o+=1,u+=3;do o>=0&&u<f&&!this.readMappingMatrix.get(u,o)&&(t[i++]=this.readUtah(o,u,c,f)&255),o+=2,u-=2;while(o<c&&u>=0);o+=3,u+=1}while(o<c||u<f);if(i!==this.version.getTotalCodewords())throw new U;return t}readModule(t,i,o,u){return t<0&&(t+=o,i+=4-(o+4&7)),i<0&&(i+=u,t+=4-(u+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,o,u){let c=0;return this.readModule(t-2,i-2,o,u)&&(c|=1),c<<=1,this.readModule(t-2,i-1,o,u)&&(c|=1),c<<=1,this.readModule(t-1,i-2,o,u)&&(c|=1),c<<=1,this.readModule(t-1,i-1,o,u)&&(c|=1),c<<=1,this.readModule(t-1,i,o,u)&&(c|=1),c<<=1,this.readModule(t,i-2,o,u)&&(c|=1),c<<=1,this.readModule(t,i-1,o,u)&&(c|=1),c<<=1,this.readModule(t,i,o,u)&&(c|=1),c}readCorner1(t,i){let o=0;return this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,1,t,i)&&(o|=1),o<<=1,this.readModule(t-1,2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(2,i-1,t,i)&&(o|=1),o<<=1,this.readModule(3,i-1,t,i)&&(o|=1),o}readCorner2(t,i){let o=0;return this.readModule(t-3,0,t,i)&&(o|=1),o<<=1,this.readModule(t-2,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(0,i-4,t,i)&&(o|=1),o<<=1,this.readModule(0,i-3,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o}readCorner3(t,i){let o=0;return this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(0,i-3,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-3,t,i)&&(o|=1),o<<=1,this.readModule(1,i-2,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o}readCorner4(t,i){let o=0;return this.readModule(t-3,0,t,i)&&(o|=1),o<<=1,this.readModule(t-2,0,t,i)&&(o|=1),o<<=1,this.readModule(t-1,0,t,i)&&(o|=1),o<<=1,this.readModule(0,i-2,t,i)&&(o|=1),o<<=1,this.readModule(0,i-1,t,i)&&(o|=1),o<<=1,this.readModule(1,i-1,t,i)&&(o|=1),o<<=1,this.readModule(2,i-1,t,i)&&(o|=1),o<<=1,this.readModule(3,i-1,t,i)&&(o|=1),o}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new k("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),f=i/u|0,p=o/c|0,w=f*u,E=p*c,v=new ot(E,w);for(let D=0;D<f;++D){const M=D*u;for(let V=0;V<p;++V){const G=V*c;for(let Q=0;Q<u;++Q){const Z=D*(u+2)+1+Q,se=M+Q;for(let _e=0;_e<c;++_e){const Ae=V*(c+2)+1+_e;if(t.get(Ae,Z)){const me=G+_e;v.set(me,se)}}}}}return v}}class Cs{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const o=i.getECBlocks();let u=0;const c=o.getECBlocks();for(let Q of c)u+=Q.getCount();const f=new Array(u);let p=0;for(let Q of c)for(let Z=0;Z<Q.getCount();Z++){const se=Q.getDataCodewords(),_e=o.getECCodewords()+se;f[p++]=new Cs(se,new Uint8Array(_e))}const E=f[0].codewords.length-o.getECCodewords(),v=E-1;let D=0;for(let Q=0;Q<v;Q++)for(let Z=0;Z<p;Z++)f[Z].codewords[Q]=t[D++];const M=i.getVersionNumber()===24,V=M?8:p;for(let Q=0;Q<V;Q++)f[Q].codewords[E-1]=t[D++];const G=f[0].codewords.length;for(let Q=E;Q<G;Q++)for(let Z=0;Z<p;Z++){const se=M?(Z+8)%p:Z,_e=M&&se>7?Q-1:Q;f[se].codewords[_e]=t[D++]}if(D!==t.length)throw new k;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ys{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new k(""+t);let i=0,o=this.bitOffset,u=this.byteOffset;const c=this.bytes;if(o>0){const f=8-o,p=t<f?t:f,w=f-p,E=255>>8-p<<w;i=(c[u]&E)>>w,t-=p,o+=p,o===8&&(o=0,u++)}if(t>0){for(;t>=8;)i=i<<8|c[u]&255,u++,t-=8;if(t>0){const f=8-t,p=255>>f<<f;i=i<<t|(c[u]&p)>>f,o+=t}}return this.bitOffset=o,this.byteOffset=u,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var pn;(function(N){N[N.PAD_ENCODE=0]="PAD_ENCODE",N[N.ASCII_ENCODE=1]="ASCII_ENCODE",N[N.C40_ENCODE=2]="C40_ENCODE",N[N.TEXT_ENCODE=3]="TEXT_ENCODE",N[N.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",N[N.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",N[N.BASE256_ENCODE=6]="BASE256_ENCODE"})(pn||(pn={}));class Vr{static decode(t){const i=new Ys(t),o=new z,u=new z,c=new Array;let f=pn.ASCII_ENCODE;do if(f===pn.ASCII_ENCODE)f=this.decodeAsciiSegment(i,o,u);else{switch(f){case pn.C40_ENCODE:this.decodeC40Segment(i,o);break;case pn.TEXT_ENCODE:this.decodeTextSegment(i,o);break;case pn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,o);break;case pn.EDIFACT_ENCODE:this.decodeEdifactSegment(i,o);break;case pn.BASE256_ENCODE:this.decodeBase256Segment(i,o,c);break;default:throw new U}f=pn.ASCII_ENCODE}while(f!==pn.PAD_ENCODE&&i.available()>0);return u.length()>0&&o.append(u.toString()),new kt(t,o.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(t,i,o){let u=!1;do{let c=t.readBits(8);if(c===0)throw new U;if(c<=128)return u&&(c+=128),i.append(String.fromCharCode(c-1)),pn.ASCII_ENCODE;if(c===129)return pn.PAD_ENCODE;if(c<=229){const f=c-130;f<10&&i.append("0"),i.append(""+f)}else switch(c){case 230:return pn.C40_ENCODE;case 231:return pn.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:i.append("[)>05"),o.insert(0,"");break;case 237:i.append("[)>06"),o.insert(0,"");break;case 238:return pn.ANSIX12_ENCODE;case 239:return pn.TEXT_ENCODE;case 240:return pn.EDIFACT_ENCODE;case 241:break;default:if(c!==254||t.available()!==0)throw new U;break}}while(t.available()>0);return pn.ASCII_ENCODE}static decodeC40Segment(t,i){let o=!1;const u=[];let c=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),u);for(let p=0;p<3;p++){const w=u[p];switch(c){case 0:if(w<3)c=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const E=this.C40_BASIC_SET_CHARS[w];o?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):i.append(E)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(w+128)),o=!1):i.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const E=this.C40_SHIFT2_SET_CHARS[w];o?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):i.append(E)}else switch(w){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:o?(i.append(String.fromCharCode(w+224)),o=!1):i.append(String.fromCharCode(w+96)),c=0;break;default:throw new U}}}while(t.available()>0)}static decodeTextSegment(t,i){let o=!1,u=[],c=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),u);for(let p=0;p<3;p++){const w=u[p];switch(c){case 0:if(w<3)c=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const E=this.TEXT_BASIC_SET_CHARS[w];o?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):i.append(E)}else throw new U;break;case 1:o?(i.append(String.fromCharCode(w+128)),o=!1):i.append(String.fromCharCode(w)),c=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const E=this.TEXT_SHIFT2_SET_CHARS[w];o?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):i.append(E)}else switch(w){case 27:i.append("");break;case 30:o=!0;break;default:throw new U}c=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const E=this.TEXT_SHIFT3_SET_CHARS[w];o?(i.append(String.fromCharCode(E.charCodeAt(0)+128)),o=!1):i.append(E),c=0}else throw new U;break;default:throw new U}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const o=[];do{if(t.available()===8)return;const u=t.readBits(8);if(u===254)return;this.parseTwoBytes(u,t.readBits(8),o);for(let c=0;c<3;c++){const f=o[c];switch(f){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(f<14)i.append(String.fromCharCode(f+44));else if(f<40)i.append(String.fromCharCode(f+51));else throw new U;break}}}while(t.available()>0)}static parseTwoBytes(t,i,o){let u=(t<<8)+i-1,c=Math.floor(u/1600);o[0]=c,u-=c*1600,c=Math.floor(u/40),o[1]=c,o[2]=u-c*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let o=0;o<4;o++){let u=t.readBits(6);if(u===31){const c=8-t.getBitOffset();c!==8&&t.readBits(c);return}u&32||(u|=64),i.append(String.fromCharCode(u))}}while(t.available()>0)}static decodeBase256Segment(t,i,o){let u=1+t.getByteOffset();const c=this.unrandomize255State(t.readBits(8),u++);let f;if(c===0?f=t.available()/8|0:c<250?f=c:f=250*(c-249)+this.unrandomize255State(t.readBits(8),u++),f<0)throw new U;const p=new Uint8Array(f);for(let w=0;w<f;w++){if(t.available()<8)throw new U;p[w]=this.unrandomize255State(t.readBits(8),u++)}o.push(p);try{i.append(Y.decode(p,H.ISO88591))}catch(w){throw new ur("Platform does not support required encoding: "+w.message)}}static unrandomize255State(t,i){const o=149*i%255+1,u=t-o;return u>=0?u:u+256}}Vr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Vr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Vr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Vr.TEXT_SHIFT2_SET_CHARS=Vr.C40_SHIFT2_SET_CHARS,Vr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Qs{constructor(){this.rsDecoder=new Bi(pt.DATA_MATRIX_FIELD_256)}decode(t){const i=new Xn(t),o=i.getVersion(),u=i.readCodewords(),c=Cs.getDataBlocks(u,o);let f=0;for(let E of c)f+=E.getNumDataCodewords();const p=new Uint8Array(f),w=c.length;for(let E=0;E<w;E++){const v=c[E],D=v.getCodewords(),M=v.getNumDataCodewords();this.correctErrors(D,M);for(let V=0;V<M;V++)p[V*w+E]=D[V]}return Vr.decode(p)}correctErrors(t,i){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-i)}catch{throw new te}for(let u=0;u<i;u++)t[u]=o[u]}}class Wt{constructor(t){this.image=t,this.rectangleDetector=new Ar(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ae;i=this.shiftToModuleCenter(i);const o=i[0],u=i[1],c=i[2],f=i[3];let p=this.transitionsBetween(o,f)+1,w=this.transitionsBetween(c,f)+1;(p&1)===1&&(p+=1),(w&1)===1&&(w+=1),4*p<7*w&&4*w<7*p&&(p=w=Math.max(p,w));let E=Wt.sampleGrid(this.image,o,u,c,f,p,w);return new Zi(E,[o,u,c,f])}static shiftPoint(t,i,o){let u=(i.getX()-t.getX())/(o+1),c=(i.getY()-t.getY())/(o+1);return new Pe(t.getX()+u,t.getY()+c)}static moveAway(t,i,o){let u=t.getX(),c=t.getY();return u<i?u-=1:u+=1,c<o?c-=1:c+=1,new Pe(u,c)}detectSolid1(t){let i=t[0],o=t[1],u=t[3],c=t[2],f=this.transitionsBetween(i,o),p=this.transitionsBetween(o,u),w=this.transitionsBetween(u,c),E=this.transitionsBetween(c,i),v=f,D=[c,i,o,u];return v>p&&(v=p,D[0]=i,D[1]=o,D[2]=u,D[3]=c),v>w&&(v=w,D[0]=o,D[1]=u,D[2]=c,D[3]=i),v>E&&(D[0]=u,D[1]=c,D[2]=i,D[3]=o),D}detectSolid2(t){let i=t[0],o=t[1],u=t[2],c=t[3],f=this.transitionsBetween(i,c),p=Wt.shiftPoint(o,u,(f+1)*4),w=Wt.shiftPoint(u,o,(f+1)*4),E=this.transitionsBetween(p,i),v=this.transitionsBetween(w,c);return E<v?(t[0]=i,t[1]=o,t[2]=u,t[3]=c):(t[0]=o,t[1]=u,t[2]=c,t[3]=i),t}correctTopRight(t){let i=t[0],o=t[1],u=t[2],c=t[3],f=this.transitionsBetween(i,c),p=this.transitionsBetween(o,c),w=Wt.shiftPoint(i,o,(p+1)*4),E=Wt.shiftPoint(u,o,(f+1)*4);f=this.transitionsBetween(w,c),p=this.transitionsBetween(E,c);let v=new Pe(c.getX()+(u.getX()-o.getX())/(f+1),c.getY()+(u.getY()-o.getY())/(f+1)),D=new Pe(c.getX()+(i.getX()-o.getX())/(p+1),c.getY()+(i.getY()-o.getY())/(p+1));if(!this.isValid(v))return this.isValid(D)?D:null;if(!this.isValid(D))return v;let M=this.transitionsBetween(w,v)+this.transitionsBetween(E,v),V=this.transitionsBetween(w,D)+this.transitionsBetween(E,D);return M>V?v:D}shiftToModuleCenter(t){let i=t[0],o=t[1],u=t[2],c=t[3],f=this.transitionsBetween(i,c)+1,p=this.transitionsBetween(u,c)+1,w=Wt.shiftPoint(i,o,p*4),E=Wt.shiftPoint(u,o,f*4);f=this.transitionsBetween(w,c)+1,p=this.transitionsBetween(E,c)+1,(f&1)===1&&(f+=1),(p&1)===1&&(p+=1);let v=(i.getX()+o.getX()+u.getX()+c.getX())/4,D=(i.getY()+o.getY()+u.getY()+c.getY())/4;i=Wt.moveAway(i,v,D),o=Wt.moveAway(o,v,D),u=Wt.moveAway(u,v,D),c=Wt.moveAway(c,v,D);let M,V;return w=Wt.shiftPoint(i,o,p*4),w=Wt.shiftPoint(w,c,f*4),M=Wt.shiftPoint(o,i,p*4),M=Wt.shiftPoint(M,u,f*4),E=Wt.shiftPoint(u,c,p*4),E=Wt.shiftPoint(E,o,f*4),V=Wt.shiftPoint(c,u,p*4),V=Wt.shiftPoint(V,i,f*4),[w,M,E,V]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,o,u,c,f,p){return er.getInstance().sampleGrid(t,f,p,.5,.5,f-.5,.5,f-.5,p-.5,.5,p-.5,i.getX(),i.getY(),c.getX(),c.getY(),u.getX(),u.getY(),o.getX(),o.getY())}transitionsBetween(t,i){let o=Math.trunc(t.getX()),u=Math.trunc(t.getY()),c=Math.trunc(i.getX()),f=Math.trunc(i.getY()),p=Math.abs(f-u)>Math.abs(c-o);if(p){let Q=o;o=u,u=Q,Q=c,c=f,f=Q}let w=Math.abs(c-o),E=Math.abs(f-u),v=-w/2,D=u<f?1:-1,M=o<c?1:-1,V=0,G=this.image.get(p?u:o,p?o:u);for(let Q=o,Z=u;Q!==c;Q+=M){let se=this.image.get(p?Z:Q,p?Q:Z);if(se!==G&&(V++,G=se),v+=E,v>0){if(Z===f)break;Z+=D,v-=w}}return V}}class Tr{constructor(){this.decoder=new Qs}decode(t,i=null){let o,u;if(i!=null&&i.has(Le.PURE_BARCODE)){const E=Tr.extractPureBits(t.getBlackMatrix());o=this.decoder.decode(E),u=Tr.NO_POINTS}else{const E=new Wt(t.getBlackMatrix()).detect();o=this.decoder.decode(E.getBits()),u=E.getPoints()}const c=o.getRawBytes(),f=new qe(o.getText(),c,8*c.length,u,ve.DATA_MATRIX,ce.currentTimeMillis()),p=o.getByteSegments();p!=null&&f.putMetadata(nt.BYTE_SEGMENTS,p);const w=o.getECLevel();return w!=null&&f.putMetadata(nt.ERROR_CORRECTION_LEVEL,w),f}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(i==null||o==null)throw new ae;const u=this.moduleSize(i,t);let c=i[1];const f=o[1];let p=i[0];const E=(o[0]-p+1)/u,v=(f-c+1)/u;if(E<=0||v<=0)throw new ae;const D=u/2;c+=D,p+=D;const M=new ot(E,v);for(let V=0;V<v;V++){const G=c+V*u;for(let Q=0;Q<E;Q++)t.get(p+Q*u,G)&&M.set(Q,V)}return M}static moduleSize(t,i){const o=i.getWidth();let u=t[0];const c=t[1];for(;u<o&&i.get(u,c);)u++;if(u===o)throw new ae;const f=u-t[0];if(f===0)throw new ae;return f}}Tr.NO_POINTS=[];class Ya extends je{constructor(t=500){super(new Tr,t)}}var vr;(function(N){N[N.L=0]="L",N[N.M=1]="M",N[N.Q=2]="Q",N[N.H=3]="H"})(vr||(vr={}));class wt{constructor(t,i,o){this.value=t,this.stringValue=i,this.bits=o,wt.FOR_BITS.set(o,this),wt.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return wt.L;case"M":return wt.M;case"Q":return wt.Q;case"H":return wt.H;default:throw new O(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof wt))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=wt.FOR_BITS.size)throw new k;return wt.FOR_BITS.get(t)}}wt.FOR_BITS=new Map,wt.FOR_VALUE=new Map,wt.L=new wt(vr.L,"L",1),wt.M=new wt(vr.M,"M",0),wt.Q=new wt(vr.Q,"Q",3),wt.H=new wt(vr.H,"H",2);class mn{constructor(t){this.errorCorrectionLevel=wt.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return ye.bitCount(t^i)}static decodeFormatInformation(t,i){const o=mn.doDecodeFormatInformation(t,i);return o!==null?o:mn.doDecodeFormatInformation(t^mn.FORMAT_INFO_MASK_QR,i^mn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let o=Number.MAX_SAFE_INTEGER,u=0;for(const c of mn.FORMAT_INFO_DECODE_LOOKUP){const f=c[0];if(f===t||f===i)return new mn(c[1]);let p=mn.numBitsDiffering(t,f);p<o&&(u=c[1],o=p),t!==i&&(p=mn.numBitsDiffering(i,f),p<o&&(u=c[1],o=p))}return o<=3?new mn(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof mn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}mn.FORMAT_INFO_MASK_QR=21522,mn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class J{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const o of i)t+=o.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class B{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ne{constructor(t,i,...o){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=o;let u=0;const c=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();for(const p of f)u+=p.getCount()*(p.getDataCodewords()+c);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new U;try{return this.getVersionForNumber((t-17)/4)}catch{throw new U}}static getVersionForNumber(t){if(t<1||t>40)throw new k;return Ne.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,o=0;for(let u=0;u<Ne.VERSION_DECODE_INFO.length;u++){const c=Ne.VERSION_DECODE_INFO[u];if(c===t)return Ne.getVersionForNumber(u+7);const f=mn.numBitsDiffering(t,c);f<i&&(o=u+7,i=f)}return i<=3?Ne.getVersionForNumber(o):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new ot(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const o=this.alignmentPatternCenters.length;for(let u=0;u<o;u++){const c=this.alignmentPatternCenters[u]-2;for(let f=0;f<o;f++)u===0&&(f===0||f===o-1)||u===o-1&&f===0||i.setRegion(this.alignmentPatternCenters[f]-2,c,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Ne.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ne.VERSIONS=[new Ne(1,new Int32Array(0),new J(7,new B(1,19)),new J(10,new B(1,16)),new J(13,new B(1,13)),new J(17,new B(1,9))),new Ne(2,Int32Array.from([6,18]),new J(10,new B(1,34)),new J(16,new B(1,28)),new J(22,new B(1,22)),new J(28,new B(1,16))),new Ne(3,Int32Array.from([6,22]),new J(15,new B(1,55)),new J(26,new B(1,44)),new J(18,new B(2,17)),new J(22,new B(2,13))),new Ne(4,Int32Array.from([6,26]),new J(20,new B(1,80)),new J(18,new B(2,32)),new J(26,new B(2,24)),new J(16,new B(4,9))),new Ne(5,Int32Array.from([6,30]),new J(26,new B(1,108)),new J(24,new B(2,43)),new J(18,new B(2,15),new B(2,16)),new J(22,new B(2,11),new B(2,12))),new Ne(6,Int32Array.from([6,34]),new J(18,new B(2,68)),new J(16,new B(4,27)),new J(24,new B(4,19)),new J(28,new B(4,15))),new Ne(7,Int32Array.from([6,22,38]),new J(20,new B(2,78)),new J(18,new B(4,31)),new J(18,new B(2,14),new B(4,15)),new J(26,new B(4,13),new B(1,14))),new Ne(8,Int32Array.from([6,24,42]),new J(24,new B(2,97)),new J(22,new B(2,38),new B(2,39)),new J(22,new B(4,18),new B(2,19)),new J(26,new B(4,14),new B(2,15))),new Ne(9,Int32Array.from([6,26,46]),new J(30,new B(2,116)),new J(22,new B(3,36),new B(2,37)),new J(20,new B(4,16),new B(4,17)),new J(24,new B(4,12),new B(4,13))),new Ne(10,Int32Array.from([6,28,50]),new J(18,new B(2,68),new B(2,69)),new J(26,new B(4,43),new B(1,44)),new J(24,new B(6,19),new B(2,20)),new J(28,new B(6,15),new B(2,16))),new Ne(11,Int32Array.from([6,30,54]),new J(20,new B(4,81)),new J(30,new B(1,50),new B(4,51)),new J(28,new B(4,22),new B(4,23)),new J(24,new B(3,12),new B(8,13))),new Ne(12,Int32Array.from([6,32,58]),new J(24,new B(2,92),new B(2,93)),new J(22,new B(6,36),new B(2,37)),new J(26,new B(4,20),new B(6,21)),new J(28,new B(7,14),new B(4,15))),new Ne(13,Int32Array.from([6,34,62]),new J(26,new B(4,107)),new J(22,new B(8,37),new B(1,38)),new J(24,new B(8,20),new B(4,21)),new J(22,new B(12,11),new B(4,12))),new Ne(14,Int32Array.from([6,26,46,66]),new J(30,new B(3,115),new B(1,116)),new J(24,new B(4,40),new B(5,41)),new J(20,new B(11,16),new B(5,17)),new J(24,new B(11,12),new B(5,13))),new Ne(15,Int32Array.from([6,26,48,70]),new J(22,new B(5,87),new B(1,88)),new J(24,new B(5,41),new B(5,42)),new J(30,new B(5,24),new B(7,25)),new J(24,new B(11,12),new B(7,13))),new Ne(16,Int32Array.from([6,26,50,74]),new J(24,new B(5,98),new B(1,99)),new J(28,new B(7,45),new B(3,46)),new J(24,new B(15,19),new B(2,20)),new J(30,new B(3,15),new B(13,16))),new Ne(17,Int32Array.from([6,30,54,78]),new J(28,new B(1,107),new B(5,108)),new J(28,new B(10,46),new B(1,47)),new J(28,new B(1,22),new B(15,23)),new J(28,new B(2,14),new B(17,15))),new Ne(18,Int32Array.from([6,30,56,82]),new J(30,new B(5,120),new B(1,121)),new J(26,new B(9,43),new B(4,44)),new J(28,new B(17,22),new B(1,23)),new J(28,new B(2,14),new B(19,15))),new Ne(19,Int32Array.from([6,30,58,86]),new J(28,new B(3,113),new B(4,114)),new J(26,new B(3,44),new B(11,45)),new J(26,new B(17,21),new B(4,22)),new J(26,new B(9,13),new B(16,14))),new Ne(20,Int32Array.from([6,34,62,90]),new J(28,new B(3,107),new B(5,108)),new J(26,new B(3,41),new B(13,42)),new J(30,new B(15,24),new B(5,25)),new J(28,new B(15,15),new B(10,16))),new Ne(21,Int32Array.from([6,28,50,72,94]),new J(28,new B(4,116),new B(4,117)),new J(26,new B(17,42)),new J(28,new B(17,22),new B(6,23)),new J(30,new B(19,16),new B(6,17))),new Ne(22,Int32Array.from([6,26,50,74,98]),new J(28,new B(2,111),new B(7,112)),new J(28,new B(17,46)),new J(30,new B(7,24),new B(16,25)),new J(24,new B(34,13))),new Ne(23,Int32Array.from([6,30,54,78,102]),new J(30,new B(4,121),new B(5,122)),new J(28,new B(4,47),new B(14,48)),new J(30,new B(11,24),new B(14,25)),new J(30,new B(16,15),new B(14,16))),new Ne(24,Int32Array.from([6,28,54,80,106]),new J(30,new B(6,117),new B(4,118)),new J(28,new B(6,45),new B(14,46)),new J(30,new B(11,24),new B(16,25)),new J(30,new B(30,16),new B(2,17))),new Ne(25,Int32Array.from([6,32,58,84,110]),new J(26,new B(8,106),new B(4,107)),new J(28,new B(8,47),new B(13,48)),new J(30,new B(7,24),new B(22,25)),new J(30,new B(22,15),new B(13,16))),new Ne(26,Int32Array.from([6,30,58,86,114]),new J(28,new B(10,114),new B(2,115)),new J(28,new B(19,46),new B(4,47)),new J(28,new B(28,22),new B(6,23)),new J(30,new B(33,16),new B(4,17))),new Ne(27,Int32Array.from([6,34,62,90,118]),new J(30,new B(8,122),new B(4,123)),new J(28,new B(22,45),new B(3,46)),new J(30,new B(8,23),new B(26,24)),new J(30,new B(12,15),new B(28,16))),new Ne(28,Int32Array.from([6,26,50,74,98,122]),new J(30,new B(3,117),new B(10,118)),new J(28,new B(3,45),new B(23,46)),new J(30,new B(4,24),new B(31,25)),new J(30,new B(11,15),new B(31,16))),new Ne(29,Int32Array.from([6,30,54,78,102,126]),new J(30,new B(7,116),new B(7,117)),new J(28,new B(21,45),new B(7,46)),new J(30,new B(1,23),new B(37,24)),new J(30,new B(19,15),new B(26,16))),new Ne(30,Int32Array.from([6,26,52,78,104,130]),new J(30,new B(5,115),new B(10,116)),new J(28,new B(19,47),new B(10,48)),new J(30,new B(15,24),new B(25,25)),new J(30,new B(23,15),new B(25,16))),new Ne(31,Int32Array.from([6,30,56,82,108,134]),new J(30,new B(13,115),new B(3,116)),new J(28,new B(2,46),new B(29,47)),new J(30,new B(42,24),new B(1,25)),new J(30,new B(23,15),new B(28,16))),new Ne(32,Int32Array.from([6,34,60,86,112,138]),new J(30,new B(17,115)),new J(28,new B(10,46),new B(23,47)),new J(30,new B(10,24),new B(35,25)),new J(30,new B(19,15),new B(35,16))),new Ne(33,Int32Array.from([6,30,58,86,114,142]),new J(30,new B(17,115),new B(1,116)),new J(28,new B(14,46),new B(21,47)),new J(30,new B(29,24),new B(19,25)),new J(30,new B(11,15),new B(46,16))),new Ne(34,Int32Array.from([6,34,62,90,118,146]),new J(30,new B(13,115),new B(6,116)),new J(28,new B(14,46),new B(23,47)),new J(30,new B(44,24),new B(7,25)),new J(30,new B(59,16),new B(1,17))),new Ne(35,Int32Array.from([6,30,54,78,102,126,150]),new J(30,new B(12,121),new B(7,122)),new J(28,new B(12,47),new B(26,48)),new J(30,new B(39,24),new B(14,25)),new J(30,new B(22,15),new B(41,16))),new Ne(36,Int32Array.from([6,24,50,76,102,128,154]),new J(30,new B(6,121),new B(14,122)),new J(28,new B(6,47),new B(34,48)),new J(30,new B(46,24),new B(10,25)),new J(30,new B(2,15),new B(64,16))),new Ne(37,Int32Array.from([6,28,54,80,106,132,158]),new J(30,new B(17,122),new B(4,123)),new J(28,new B(29,46),new B(14,47)),new J(30,new B(49,24),new B(10,25)),new J(30,new B(24,15),new B(46,16))),new Ne(38,Int32Array.from([6,32,58,84,110,136,162]),new J(30,new B(4,122),new B(18,123)),new J(28,new B(13,46),new B(32,47)),new J(30,new B(48,24),new B(14,25)),new J(30,new B(42,15),new B(32,16))),new Ne(39,Int32Array.from([6,26,54,82,110,138,166]),new J(30,new B(20,117),new B(4,118)),new J(28,new B(40,47),new B(7,48)),new J(30,new B(43,24),new B(22,25)),new J(30,new B(10,15),new B(67,16))),new Ne(40,Int32Array.from([6,30,58,86,114,142,170]),new J(30,new B(19,118),new B(6,119)),new J(28,new B(18,47),new B(31,48)),new J(30,new B(34,24),new B(34,25)),new J(30,new B(20,15),new B(61,16)))];var Zt;(function(N){N[N.DATA_MASK_000=0]="DATA_MASK_000",N[N.DATA_MASK_001=1]="DATA_MASK_001",N[N.DATA_MASK_010=2]="DATA_MASK_010",N[N.DATA_MASK_011=3]="DATA_MASK_011",N[N.DATA_MASK_100=4]="DATA_MASK_100",N[N.DATA_MASK_101=5]="DATA_MASK_101",N[N.DATA_MASK_110=6]="DATA_MASK_110",N[N.DATA_MASK_111=7]="DATA_MASK_111"})(Zt||(Zt={}));class it{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let o=0;o<i;o++)for(let u=0;u<i;u++)this.isMasked(o,u)&&t.flip(u,o)}}it.values=new Map([[Zt.DATA_MASK_000,new it(Zt.DATA_MASK_000,(N,t)=>(N+t&1)===0)],[Zt.DATA_MASK_001,new it(Zt.DATA_MASK_001,(N,t)=>(N&1)===0)],[Zt.DATA_MASK_010,new it(Zt.DATA_MASK_010,(N,t)=>t%3===0)],[Zt.DATA_MASK_011,new it(Zt.DATA_MASK_011,(N,t)=>(N+t)%3===0)],[Zt.DATA_MASK_100,new it(Zt.DATA_MASK_100,(N,t)=>(Math.floor(N/2)+Math.floor(t/3)&1)===0)],[Zt.DATA_MASK_101,new it(Zt.DATA_MASK_101,(N,t)=>N*t%6===0)],[Zt.DATA_MASK_110,new it(Zt.DATA_MASK_110,(N,t)=>N*t%6<3)],[Zt.DATA_MASK_111,new it(Zt.DATA_MASK_111,(N,t)=>(N+t+N*t%3&1)===0)]]);class rs{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new U;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let c=0;c<6;c++)t=this.copyBit(c,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let c=5;c>=0;c--)t=this.copyBit(8,c,t);const i=this.bitMatrix.getHeight();let o=0;const u=i-7;for(let c=i-1;c>=u;c--)o=this.copyBit(8,c,o);for(let c=i-8;c<i;c++)o=this.copyBit(c,8,o);if(this.parsedFormatInfo=mn.decodeFormatInformation(t,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Ne.getVersionForNumber(i);let o=0;const u=t-11;for(let f=5;f>=0;f--)for(let p=t-9;p>=u;p--)o=this.copyBit(p,f,o);let c=Ne.decodeVersionInformation(o);if(c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;o=0;for(let f=5;f>=0;f--)for(let p=t-9;p>=u;p--)o=this.copyBit(f,p,o);if(c=Ne.decodeVersionInformation(o),c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;throw new U}copyBit(t,i,o){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?o<<1|1:o<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),o=it.values.get(t.getDataMask()),u=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,u);const c=i.buildFunctionPattern();let f=!0;const p=new Uint8Array(i.getTotalCodewords());let w=0,E=0,v=0;for(let D=u-1;D>0;D-=2){D===6&&D--;for(let M=0;M<u;M++){const V=f?u-1-M:M;for(let G=0;G<2;G++)c.get(D-G,V)||(v++,E<<=1,this.bitMatrix.get(D-G,V)&&(E|=1),v===8&&(p[w++]=E,v=0,E=0))}f=!f}if(w!==i.getTotalCodewords())throw new U;return p}remask(){if(this.parsedFormatInfo===null)return;const t=it.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,o=t.getWidth();i<o;i++)for(let u=i+1,c=t.getHeight();u<c;u++)t.get(i,u)!==t.get(u,i)&&(t.flip(u,i),t.flip(i,u))}}class qs{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,o){if(t.length!==i.getTotalCodewords())throw new k;const u=i.getECBlocksForLevel(o);let c=0;const f=u.getECBlocks();for(const G of f)c+=G.getCount();const p=new Array(c);let w=0;for(const G of f)for(let Q=0;Q<G.getCount();Q++){const Z=G.getDataCodewords(),se=u.getECCodewordsPerBlock()+Z;p[w++]=new qs(Z,new Uint8Array(se))}const E=p[0].codewords.length;let v=p.length-1;for(;v>=0&&p[v].codewords.length!==E;)v--;v++;const D=E-u.getECCodewordsPerBlock();let M=0;for(let G=0;G<D;G++)for(let Q=0;Q<w;Q++)p[Q].codewords[G]=t[M++];for(let G=v;G<w;G++)p[G].codewords[D]=t[M++];const V=p[0].codewords.length;for(let G=D;G<V;G++)for(let Q=0;Q<w;Q++){const Z=Q<v?G:G+1;p[Q].codewords[Z]=t[M++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Yn;(function(N){N[N.TERMINATOR=0]="TERMINATOR",N[N.NUMERIC=1]="NUMERIC",N[N.ALPHANUMERIC=2]="ALPHANUMERIC",N[N.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",N[N.BYTE=4]="BYTE",N[N.ECI=5]="ECI",N[N.KANJI=6]="KANJI",N[N.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",N[N.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",N[N.HANZI=9]="HANZI"})(Yn||(Yn={}));class Ye{constructor(t,i,o,u){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=o,this.bits=u,Ye.FOR_BITS.set(u,this),Ye.FOR_VALUE.set(t,this)}static forBits(t){const i=Ye.FOR_BITS.get(t);if(i===void 0)throw new k;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let o;return i<=9?o=0:i<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Ye))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Ye.FOR_BITS=new Map,Ye.FOR_VALUE=new Map,Ye.TERMINATOR=new Ye(Yn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ye.NUMERIC=new Ye(Yn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ye.ALPHANUMERIC=new Ye(Yn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ye.STRUCTURED_APPEND=new Ye(Yn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ye.BYTE=new Ye(Yn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ye.ECI=new Ye(Yn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ye.KANJI=new Ye(Yn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ye.FNC1_FIRST_POSITION=new Ye(Yn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ye.FNC1_SECOND_POSITION=new Ye(Yn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ye.HANZI=new Ye(Yn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Kt{static decode(t,i,o,u){const c=new Ys(t);let f=new z;const p=new Array;let w=-1,E=-1;try{let v=null,D=!1,M;do{if(c.available()<4)M=Ye.TERMINATOR;else{const V=c.readBits(4);M=Ye.forBits(V)}switch(M){case Ye.TERMINATOR:break;case Ye.FNC1_FIRST_POSITION:case Ye.FNC1_SECOND_POSITION:D=!0;break;case Ye.STRUCTURED_APPEND:if(c.available()<16)throw new U;w=c.readBits(8),E=c.readBits(8);break;case Ye.ECI:const V=Kt.parseECIValue(c);if(v=P.getCharacterSetECIByValue(V),v===null)throw new U;break;case Ye.HANZI:const G=c.readBits(4),Q=c.readBits(M.getCharacterCountBits(i));G===Kt.GB2312_SUBSET&&Kt.decodeHanziSegment(c,f,Q);break;default:const Z=c.readBits(M.getCharacterCountBits(i));switch(M){case Ye.NUMERIC:Kt.decodeNumericSegment(c,f,Z);break;case Ye.ALPHANUMERIC:Kt.decodeAlphanumericSegment(c,f,Z,D);break;case Ye.BYTE:Kt.decodeByteSegment(c,f,Z,v,p,u);break;case Ye.KANJI:Kt.decodeKanjiSegment(c,f,Z);break;default:throw new U}break}}while(M!==Ye.TERMINATOR)}catch{throw new U}return new kt(t,f.toString(),p.length===0?null:p,o===null?null:o.toString(),w,E)}static decodeHanziSegment(t,i,o){if(o*13>t.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const f=t.readBits(13);let p=f/96<<8&4294967295|f%96;p<959?p+=41377:p+=42657,u[c]=p>>8&255,u[c+1]=p&255,c+=2,o--}try{i.append(Y.decode(u,H.GB2312))}catch(f){throw new U(f)}}static decodeKanjiSegment(t,i,o){if(o*13>t.available())throw new U;const u=new Uint8Array(2*o);let c=0;for(;o>0;){const f=t.readBits(13);let p=f/192<<8&4294967295|f%192;p<7936?p+=33088:p+=49472,u[c]=p>>8,u[c+1]=p,c+=2,o--}try{i.append(Y.decode(u,H.SHIFT_JIS))}catch(f){throw new U(f)}}static decodeByteSegment(t,i,o,u,c,f){if(8*o>t.available())throw new U;const p=new Uint8Array(o);for(let E=0;E<o;E++)p[E]=t.readBits(8);let w;u===null?w=H.guessEncoding(p,f):w=u.getName();try{i.append(Y.decode(p,w))}catch(E){throw new U(E)}c.push(p)}static toAlphaNumericChar(t){if(t>=Kt.ALPHANUMERIC_CHARS.length)throw new U;return Kt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,o,u){const c=i.length();for(;o>1;){if(t.available()<11)throw new U;const f=t.readBits(11);i.append(Kt.toAlphaNumericChar(Math.floor(f/45))),i.append(Kt.toAlphaNumericChar(f%45)),o-=2}if(o===1){if(t.available()<6)throw new U;i.append(Kt.toAlphaNumericChar(t.readBits(6)))}if(u)for(let f=c;f<i.length();f++)i.charAt(f)==="%"&&(f<i.length()-1&&i.charAt(f+1)==="%"?i.deleteCharAt(f+1):i.setCharAt(f,""))}static decodeNumericSegment(t,i,o){for(;o>=3;){if(t.available()<10)throw new U;const u=t.readBits(10);if(u>=1e3)throw new U;i.append(Kt.toAlphaNumericChar(Math.floor(u/100))),i.append(Kt.toAlphaNumericChar(Math.floor(u/10)%10)),i.append(Kt.toAlphaNumericChar(u%10)),o-=3}if(o===2){if(t.available()<7)throw new U;const u=t.readBits(7);if(u>=100)throw new U;i.append(Kt.toAlphaNumericChar(Math.floor(u/10))),i.append(Kt.toAlphaNumericChar(u%10))}else if(o===1){if(t.available()<4)throw new U;const u=t.readBits(4);if(u>=10)throw new U;i.append(Kt.toAlphaNumericChar(u))}}static parseECIValue(t){const i=t.readBits(8);if(!(i&128))return i&127;if((i&192)===128){const o=t.readBits(8);return(i&63)<<8&4294967295|o}if((i&224)===192){const o=t.readBits(16);return(i&31)<<16&4294967295|o}throw new U}}Kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Kt.GB2312_SUBSET=1;class bo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class Oo{constructor(){this.rsDecoder=new Bi(pt.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(ot.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const o=new rs(t);let u=null;try{return this.decodeBitMatrixParser(o,i)}catch(c){u=c}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const c=this.decodeBitMatrixParser(o,i);return c.setOther(new bo(!0)),c}catch(c){throw u!==null?u:c}}decodeBitMatrixParser(t,i){const o=t.readVersion(),u=t.readFormatInformation().getErrorCorrectionLevel(),c=t.readCodewords(),f=qs.getDataBlocks(c,o,u);let p=0;for(const v of f)p+=v.getNumDataCodewords();const w=new Uint8Array(p);let E=0;for(const v of f){const D=v.getCodewords(),M=v.getNumDataCodewords();this.correctErrors(D,M);for(let V=0;V<M;V++)w[E++]=D[V]}return Kt.decode(w,o,u,i)}correctErrors(t,i){const o=new Int32Array(t);try{this.rsDecoder.decode(o,t.length-i)}catch{throw new te}for(let u=0;u<i;u++)t[u]=o[u]}}class Zr extends Pe{constructor(t,i,o){super(t,i),this.estimatedModuleSize=o}aboutEquals(t,i,o){if(Math.abs(i-this.getY())<=t&&Math.abs(o-this.getX())<=t){const u=Math.abs(t-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(t,i,o){const u=(this.getX()+i)/2,c=(this.getY()+t)/2,f=(this.estimatedModuleSize+o)/2;return new Zr(u,c,f)}}class Rn{constructor(t,i,o,u,c,f,p){this.image=t,this.startX=i,this.startY=o,this.width=u,this.height=c,this.moduleSize=f,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,o=this.width,u=t+o,c=this.startY+i/2,f=new Int32Array(3),p=this.image;for(let w=0;w<i;w++){const E=c+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));f[0]=0,f[1]=0,f[2]=0;let v=t;for(;v<u&&!p.get(v,E);)v++;let D=0;for(;v<u;){if(p.get(v,E))if(D===1)f[1]++;else if(D===2){if(this.foundPatternCross(f)){const M=this.handlePossibleCenter(f,E,v);if(M!==null)return M}f[0]=f[2],f[1]=1,f[2]=0,D=1}else f[++D]++;else D===1&&D++,f[D]++;v++}if(this.foundPatternCross(f)){const M=this.handlePossibleCenter(f,E,u);if(M!==null)return M}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ae}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,o=i/2;for(let u=0;u<3;u++)if(Math.abs(i-t[u])>=o)return!1;return!0}crossCheckVertical(t,i,o,u){const c=this.image,f=c.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let w=t;for(;w>=0&&c.get(i,w)&&p[1]<=o;)p[1]++,w--;if(w<0||p[1]>o)return NaN;for(;w>=0&&!c.get(i,w)&&p[0]<=o;)p[0]++,w--;if(p[0]>o)return NaN;for(w=t+1;w<f&&c.get(i,w)&&p[1]<=o;)p[1]++,w++;if(w===f||p[1]>o)return NaN;for(;w<f&&!c.get(i,w)&&p[2]<=o;)p[2]++,w++;if(p[2]>o)return NaN;const E=p[0]+p[1]+p[2];return 5*Math.abs(E-u)>=2*u?NaN:this.foundPatternCross(p)?Rn.centerFromEnd(p,w):NaN}handlePossibleCenter(t,i,o){const u=t[0]+t[1]+t[2],c=Rn.centerFromEnd(t,o),f=this.crossCheckVertical(i,c,2*t[1],u);if(!isNaN(f)){const p=(t[0]+t[1]+t[2])/3;for(const E of this.possibleCenters)if(E.aboutEquals(p,f,c))return E.combineEstimate(f,c,p);const w=new Zr(c,f,p);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class Ur extends Pe{constructor(t,i,o,u){super(t,i),this.estimatedModuleSize=o,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,o){if(Math.abs(i-this.getY())<=t&&Math.abs(o-this.getX())<=t){const u=Math.abs(t-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(t,i,o){const u=this.count+1,c=(this.count*this.getX()+i)/u,f=(this.count*this.getY()+t)/u,p=(this.count*this.estimatedModuleSize+o)/u;return new Ur(c,f,p,u)}}class ci{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class $t{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(Le.TRY_HARDER)!==void 0,o=t!=null&&t.get(Le.PURE_BARCODE)!==void 0,u=this.image,c=u.getHeight(),f=u.getWidth();let p=Math.floor(3*c/(4*$t.MAX_MODULES));(p<$t.MIN_SKIP||i)&&(p=$t.MIN_SKIP);let w=!1;const E=new Int32Array(5);for(let D=p-1;D<c&&!w;D+=p){E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0;let M=0;for(let V=0;V<f;V++)if(u.get(V,D))(M&1)===1&&M++,E[M]++;else if(M&1)E[M]++;else if(M===4)if($t.foundPatternCross(E)){if(this.handlePossibleCenter(E,D,V,o)===!0)if(p=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const Q=this.findRowSkip();Q>E[2]&&(D+=Q-E[2]-p,V=f-1)}else{E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,M=3;continue}M=0,E[0]=0,E[1]=0,E[2]=0,E[3]=0,E[4]=0}else E[0]=E[2],E[1]=E[3],E[2]=E[4],E[3]=1,E[4]=0,M=3;else E[++M]++;$t.foundPatternCross(E)&&this.handlePossibleCenter(E,D,f,o)===!0&&(p=E[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return Pe.orderBestPatterns(v),new ci(v)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let c=0;c<5;c++){const f=t[c];if(f===0)return!1;i+=f}if(i<7)return!1;const o=i/7,u=o/2;return Math.abs(o-t[0])<u&&Math.abs(o-t[1])<u&&Math.abs(3*o-t[2])<3*u&&Math.abs(o-t[3])<u&&Math.abs(o-t[4])<u}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,o,u){const c=this.getCrossCheckStateCount();let f=0;const p=this.image;for(;t>=f&&i>=f&&p.get(i-f,t-f);)c[2]++,f++;if(t<f||i<f)return!1;for(;t>=f&&i>=f&&!p.get(i-f,t-f)&&c[1]<=o;)c[1]++,f++;if(t<f||i<f||c[1]>o)return!1;for(;t>=f&&i>=f&&p.get(i-f,t-f)&&c[0]<=o;)c[0]++,f++;if(c[0]>o)return!1;const w=p.getHeight(),E=p.getWidth();for(f=1;t+f<w&&i+f<E&&p.get(i+f,t+f);)c[2]++,f++;if(t+f>=w||i+f>=E)return!1;for(;t+f<w&&i+f<E&&!p.get(i+f,t+f)&&c[3]<o;)c[3]++,f++;if(t+f>=w||i+f>=E||c[3]>=o)return!1;for(;t+f<w&&i+f<E&&p.get(i+f,t+f)&&c[4]<o;)c[4]++,f++;if(c[4]>=o)return!1;const v=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(v-u)<2*u&&$t.foundPatternCross(c)}crossCheckVertical(t,i,o,u){const c=this.image,f=c.getHeight(),p=this.getCrossCheckStateCount();let w=t;for(;w>=0&&c.get(i,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(i,w)&&p[1]<=o;)p[1]++,w--;if(w<0||p[1]>o)return NaN;for(;w>=0&&c.get(i,w)&&p[0]<=o;)p[0]++,w--;if(p[0]>o)return NaN;for(w=t+1;w<f&&c.get(i,w);)p[2]++,w++;if(w===f)return NaN;for(;w<f&&!c.get(i,w)&&p[3]<o;)p[3]++,w++;if(w===f||p[3]>=o)return NaN;for(;w<f&&c.get(i,w)&&p[4]<o;)p[4]++,w++;if(p[4]>=o)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-u)>=2*u?NaN:$t.foundPatternCross(p)?$t.centerFromEnd(p,w):NaN}crossCheckHorizontal(t,i,o,u){const c=this.image,f=c.getWidth(),p=this.getCrossCheckStateCount();let w=t;for(;w>=0&&c.get(w,i);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!c.get(w,i)&&p[1]<=o;)p[1]++,w--;if(w<0||p[1]>o)return NaN;for(;w>=0&&c.get(w,i)&&p[0]<=o;)p[0]++,w--;if(p[0]>o)return NaN;for(w=t+1;w<f&&c.get(w,i);)p[2]++,w++;if(w===f)return NaN;for(;w<f&&!c.get(w,i)&&p[3]<o;)p[3]++,w++;if(w===f||p[3]>=o)return NaN;for(;w<f&&c.get(w,i)&&p[4]<o;)p[4]++,w++;if(p[4]>=o)return NaN;const E=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(E-u)>=u?NaN:$t.foundPatternCross(p)?$t.centerFromEnd(p,w):NaN}handlePossibleCenter(t,i,o,u){const c=t[0]+t[1]+t[2]+t[3]+t[4];let f=$t.centerFromEnd(t,o),p=this.crossCheckVertical(i,Math.floor(f),t[2],c);if(!isNaN(p)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(p),t[2],c),!isNaN(f)&&(!u||this.crossCheckDiagonal(Math.floor(p),Math.floor(f),t[2],c)))){const w=c/7;let E=!1;const v=this.possibleCenters;for(let D=0,M=v.length;D<M;D++){const V=v[D];if(V.aboutEquals(w,p,f)){v[D]=V.combineEstimate(p,f,w),E=!0;break}}if(!E){const D=new Ur(f,p,w);v.push(D),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(D)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const o of this.possibleCenters)if(o.getCount()>=$t.CENTER_QUORUM)if(i==null)i=o;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-o.getX())-Math.abs(i.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const o=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=$t.CENTER_QUORUM&&(t++,i+=f.getEstimatedModuleSize());if(t<3)return!1;const u=i/o;let c=0;for(const f of this.possibleCenters)c+=Math.abs(f.getEstimatedModuleSize()-u);return c<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ae;const i=this.possibleCenters;let o;if(t>3){let u=0,c=0;for(const w of this.possibleCenters){const E=w.getEstimatedModuleSize();u+=E,c+=E*E}o=u/t;let f=Math.sqrt(c/t-o*o);i.sort((w,E)=>{const v=Math.abs(E.getEstimatedModuleSize()-o),D=Math.abs(w.getEstimatedModuleSize()-o);return v<D?-1:v>D?1:0});const p=Math.max(.2*o,f);for(let w=0;w<i.length&&i.length>3;w++){const E=i[w];Math.abs(E.getEstimatedModuleSize()-o)>p&&(i.splice(w,1),w--)}}if(i.length>3){let u=0;for(const c of i)u+=c.getEstimatedModuleSize();o=u/i.length,i.sort((c,f)=>{if(f.getCount()===c.getCount()){const p=Math.abs(f.getEstimatedModuleSize()-o),w=Math.abs(c.getEstimatedModuleSize()-o);return p<w?1:p>w?-1:0}else return f.getCount()-c.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}$t.CENTER_QUORUM=2,$t.MIN_SKIP=3,$t.MAX_MODULES=57;class rr{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(Le.NEED_RESULT_POINT_CALLBACK);const o=new $t(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(o)}processFinderPatternInfo(t){const i=t.getTopLeft(),o=t.getTopRight(),u=t.getBottomLeft(),c=this.calculateModuleSize(i,o,u);if(c<1)throw new ae("No pattern found in proccess finder.");const f=rr.computeDimension(i,o,u,c),p=Ne.getProvisionalVersionForDimension(f),w=p.getDimensionForVersion()-7;let E=null;if(p.getAlignmentPatternCenters().length>0){const V=o.getX()-i.getX()+u.getX(),G=o.getY()-i.getY()+u.getY(),Q=1-3/w,Z=Math.floor(i.getX()+Q*(V-i.getX())),se=Math.floor(i.getY()+Q*(G-i.getY()));for(let _e=4;_e<=16;_e<<=1)try{E=this.findAlignmentInRegion(c,Z,se,_e);break}catch(Ae){if(!(Ae instanceof ae))throw Ae}}const v=rr.createTransform(i,o,u,E,f),D=rr.sampleGrid(this.image,v,f);let M;return E===null?M=[u,i,o]:M=[u,i,o,E],new Zi(D,M)}static createTransform(t,i,o,u,c){const f=c-3.5;let p,w,E,v;return u!==null?(p=u.getX(),w=u.getY(),E=f-3,v=E):(p=i.getX()-t.getX()+o.getX(),w=i.getY()-t.getY()+o.getY(),E=f,v=f),Ut.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,E,v,3.5,f,t.getX(),t.getY(),i.getX(),i.getY(),p,w,o.getX(),o.getY())}static sampleGrid(t,i,o){return er.getInstance().sampleGridWithTransform(t,o,o,i)}static computeDimension(t,i,o,u){const c=mt.round(Pe.distance(t,i)/u),f=mt.round(Pe.distance(t,o)/u);let p=Math.floor((c+f)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new ae("Dimensions could be not found.")}return p}calculateModuleSize(t,i,o){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,o))/2}calculateModuleSizeOneWay(t,i){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(o)?u/7:isNaN(u)?o/7:(o+u)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,o,u){let c=this.sizeOfBlackWhiteBlackRun(t,i,o,u),f=1,p=t-(o-t);p<0?(f=t/(t-p),p=0):p>=this.image.getWidth()&&(f=(this.image.getWidth()-1-t)/(p-t),p=this.image.getWidth()-1);let w=Math.floor(i-(u-i)*f);return f=1,w<0?(f=i/(i-w),w=0):w>=this.image.getHeight()&&(f=(this.image.getHeight()-1-i)/(w-i),w=this.image.getHeight()-1),p=Math.floor(t+(p-t)*f),c+=this.sizeOfBlackWhiteBlackRun(t,i,p,w),c-1}sizeOfBlackWhiteBlackRun(t,i,o,u){const c=Math.abs(u-i)>Math.abs(o-t);if(c){let V=t;t=i,i=V,V=o,o=u,u=V}const f=Math.abs(o-t),p=Math.abs(u-i);let w=-f/2;const E=t<o?1:-1,v=i<u?1:-1;let D=0;const M=o+E;for(let V=t,G=i;V!==M;V+=E){const Q=c?G:V,Z=c?V:G;if(D===1===this.image.get(Q,Z)){if(D===2)return mt.distance(V,G,t,i);D++}if(w+=p,w>0){if(G===u)break;G+=v,w-=f}}return D===2?mt.distance(o+E,u,t,i):NaN}findAlignmentInRegion(t,i,o,u){const c=Math.floor(u*t),f=Math.max(0,i-c),p=Math.min(this.image.getWidth()-1,i+c);if(p-f<t*3)throw new ae("Alignment top exceeds estimated module size.");const w=Math.max(0,o-c),E=Math.min(this.image.getHeight()-1,o+c);if(E-w<t*3)throw new ae("Alignment bottom exceeds estimated module size.");return new Rn(this.image,f,w,p-f,E-w,t,this.resultPointCallback).find()}}class Qn{constructor(){this.decoder=new Oo}getDecoder(){return this.decoder}decode(t,i){let o,u;if(i!=null&&i.get(Le.PURE_BARCODE)!==void 0){const w=Qn.extractPureBits(t.getBlackMatrix());o=this.decoder.decodeBitMatrix(w,i),u=Qn.NO_POINTS}else{const w=new rr(t.getBlackMatrix()).detect(i);o=this.decoder.decodeBitMatrix(w.getBits(),i),u=w.getPoints()}o.getOther()instanceof bo&&o.getOther().applyMirroredCorrection(u);const c=new qe(o.getText(),o.getRawBytes(),void 0,u,ve.QR_CODE,void 0),f=o.getByteSegments();f!==null&&c.putMetadata(nt.BYTE_SEGMENTS,f);const p=o.getECLevel();return p!==null&&c.putMetadata(nt.ERROR_CORRECTION_LEVEL,p),o.hasStructuredAppend()&&(c.putMetadata(nt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),c.putMetadata(nt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),c}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),o=t.getBottomRightOnBit();if(i===null||o===null)throw new ae;const u=this.moduleSize(i,t);let c=i[1],f=o[1],p=i[0],w=o[0];if(p>=w||c>=f)throw new ae;if(f-c!==w-p&&(w=p+(f-c),w>=t.getWidth()))throw new ae;const E=Math.round((w-p+1)/u),v=Math.round((f-c+1)/u);if(E<=0||v<=0)throw new ae;if(v!==E)throw new ae;const D=Math.floor(u/2);c+=D,p+=D;const M=p+Math.floor((E-1)*u)-w;if(M>0){if(M>D)throw new ae;p-=M}const V=c+Math.floor((v-1)*u)-f;if(V>0){if(V>D)throw new ae;c-=V}const G=new ot(E,v);for(let Q=0;Q<v;Q++){const Z=c+Math.floor(Q*u);for(let se=0;se<E;se++)t.get(p+Math.floor(se*u),Z)&&G.set(se,Q)}return G}static moduleSize(t,i){const o=i.getHeight(),u=i.getWidth();let c=t[0],f=t[1],p=!0,w=0;for(;c<u&&f<o;){if(p!==i.get(c,f)){if(++w===5)break;p=!p}c++,f++}if(c===u||f===o)throw new ae;return(c-t[0])/7}}Qn.NO_POINTS=new Array;class Ze{PDF417Common(){}static getBitCountSum(t){return mt.sum(t)}static toIntArray(t){if(t==null||!t.length)return Ze.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let o=0;for(const u of t)i[o++]=u;return i}static getCodeword(t){const i=De.binarySearch(Ze.SYMBOL_TABLE,t&262143);return i<0?-1:(Ze.CODEWORD_TABLE[i]-1)%Ze.NUMBER_OF_CODEWORDS}}Ze.NUMBER_OF_CODEWORDS=929,Ze.MAX_CODEWORDS_IN_BARCODE=Ze.NUMBER_OF_CODEWORDS-1,Ze.MIN_ROWS_IN_BARCODE=3,Ze.MAX_ROWS_IN_BARCODE=90,Ze.MODULES_IN_CODEWORD=17,Ze.MODULES_IN_STOP_PATTERN=18,Ze.BARS_IN_MODULE=8,Ze.EMPTY_INT_ARRAY=new Int32Array([]),Ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class aa{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Ke{static detectMultiple(t,i,o){let u=t.getBlackMatrix(),c=Ke.detect(o,u);return c.length||(u=u.clone(),u.rotate180(),c=Ke.detect(o,u)),new aa(u,c)}static detect(t,i){const o=new Array;let u=0,c=0,f=!1;for(;u<i.getHeight();){const p=Ke.findVertices(i,u,c);if(p[0]==null&&p[3]==null){if(!f)break;f=!1,c=0;for(const w of o)w[1]!=null&&(u=Math.trunc(Math.max(u,w[1].getY()))),w[3]!=null&&(u=Math.max(u,Math.trunc(w[3].getY())));u+=Ke.ROW_STEP;continue}if(f=!0,o.push(p),!t)break;p[2]!=null?(c=Math.trunc(p[2].getX()),u=Math.trunc(p[2].getY())):(c=Math.trunc(p[4].getX()),u=Math.trunc(p[4].getY()))}return o}static findVertices(t,i,o){const u=t.getHeight(),c=t.getWidth(),f=new Array(8);return Ke.copyToResult(f,Ke.findRowsWithPattern(t,u,c,i,o,Ke.START_PATTERN),Ke.INDEXES_START_PATTERN),f[4]!=null&&(o=Math.trunc(f[4].getX()),i=Math.trunc(f[4].getY())),Ke.copyToResult(f,Ke.findRowsWithPattern(t,u,c,i,o,Ke.STOP_PATTERN),Ke.INDEXES_STOP_PATTERN),f}static copyToResult(t,i,o){for(let u=0;u<o.length;u++)t[o[u]]=i[u]}static findRowsWithPattern(t,i,o,u,c,f){const p=new Array(4);let w=!1;const E=new Int32Array(f.length);for(;u<i;u+=Ke.ROW_STEP){let D=Ke.findGuardPattern(t,c,u,o,!1,f,E);if(D!=null){for(;u>0;){const M=Ke.findGuardPattern(t,c,--u,o,!1,f,E);if(M!=null)D=M;else{u++;break}}p[0]=new Pe(D[0],u),p[1]=new Pe(D[1],u),w=!0;break}}let v=u+1;if(w){let D=0,M=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;v<i;v++){const V=Ke.findGuardPattern(t,M[0],v,o,!1,f,E);if(V!=null&&Math.abs(M[0]-V[0])<Ke.MAX_PATTERN_DRIFT&&Math.abs(M[1]-V[1])<Ke.MAX_PATTERN_DRIFT)M=V,D=0;else{if(D>Ke.SKIPPED_ROW_COUNT_MAX)break;D++}}v-=D+1,p[2]=new Pe(M[0],v),p[3]=new Pe(M[1],v)}return v-u<Ke.BARCODE_MIN_HEIGHT&&De.fill(p,null),p}static findGuardPattern(t,i,o,u,c,f,p){De.fillWithin(p,0,p.length,0);let w=i,E=0;for(;t.get(w,o)&&w>0&&E++<Ke.MAX_PIXEL_DRIFT;)w--;let v=w,D=0,M=f.length;for(let V=c;v<u;v++)if(t.get(v,o)!==V)p[D]++;else{if(D===M-1){if(Ke.patternMatchVariance(p,f,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE)return new Int32Array([w,v]);w+=p[0]+p[1],ce.arraycopy(p,2,p,0,D-1),p[D-1]=0,p[D]=0,D--}else D++;p[D]=1,V=!V}return D===M-1&&Ke.patternMatchVariance(p,f,Ke.MAX_INDIVIDUAL_VARIANCE)<Ke.MAX_AVG_VARIANCE?new Int32Array([w,v-1]):null}static patternMatchVariance(t,i,o){let u=t.length,c=0,f=0;for(let E=0;E<u;E++)c+=t[E],f+=i[E];if(c<f)return 1/0;let p=c/f;o*=p;let w=0;for(let E=0;E<u;E++){let v=t[E],D=i[E]*p,M=v>D?v-D:D-v;if(M>o)return 1/0;w+=M}return w/c}}Ke.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ke.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ke.MAX_AVG_VARIANCE=.42,Ke.MAX_INDIVIDUAL_VARIANCE=.8,Ke.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ke.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ke.MAX_PIXEL_DRIFT=3,Ke.MAX_PATTERN_DRIFT=5,Ke.SKIPPED_ROW_COUNT_MAX=25,Ke.ROW_STEP=5,Ke.BARCODE_MIN_HEIGHT=10;class Bn{constructor(t,i){if(i.length===0)throw new k;this.field=t;let o=i.length;if(o>1&&i[0]===0){let u=1;for(;u<o&&i[u]===0;)u++;u===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-u),ce.arraycopy(i,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let u=0;for(let c of this.coefficients)u=this.field.add(u,c);return u}let i=this.coefficients[0],o=this.coefficients.length;for(let u=1;u<o;u++)i=this.field.add(this.field.multiply(t,i),this.coefficients[u]);return i}add(t){if(!this.field.equals(t.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,o=t.coefficients;if(i.length>o.length){let f=i;i=o,o=f}let u=new Int32Array(o.length),c=o.length-i.length;ce.arraycopy(o,0,u,0,c);for(let f=c;f<o.length;f++)u[f]=this.field.add(i[f-c],o[f]);return new Bn(this.field,u)}subtract(t){if(!this.field.equals(t.field))throw new k("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Bn?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Bn(this.field,new Int32Array([0]));let i=this.coefficients,o=i.length,u=t.coefficients,c=u.length,f=new Int32Array(o+c-1);for(let p=0;p<o;p++){let w=i[p];for(let E=0;E<c;E++)f[p+E]=this.field.add(f[p+E],this.field.multiply(w,u[E]))}return new Bn(this.field,f)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let o=0;o<t;o++)i[o]=this.field.subtract(0,this.coefficients[o]);return new Bn(this.field,i)}multiplyScalar(t){if(t===0)return new Bn(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,o=new Int32Array(i);for(let u=0;u<i;u++)o[u]=this.field.multiply(this.coefficients[u],t);return new Bn(this.field,o)}multiplyByMonomial(t,i){if(t<0)throw new k;if(i===0)return new Bn(this.field,new Int32Array([0]));let o=this.coefficients.length,u=new Int32Array(o+t);for(let c=0;c<o;c++)u[c]=this.field.multiply(this.coefficients[c],i);return new Bn(this.field,u)}toString(){let t=new z;for(let i=this.getDegree();i>=0;i--){let o=this.getCoefficient(i);o!==0&&(o<0?(t.append(" - "),o=-o):t.length()>0&&t.append(" + "),(i===0||o!==1)&&t.append(o),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class la{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new k;return this.logTable[t]}inverse(t){if(t===0)throw new Li;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class hi extends la{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let o=1;for(let u=0;u<t;u++)this.expTable[u]=o,o=o*i%t;for(let u=0;u<t-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new Bn(this,new Int32Array([0])),this.one=new Bn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new k;if(i===0)return this.zero;let o=new Int32Array(t+1);return o[0]=i,new Bn(this,o)}}hi.PDF417_GF=new hi(Ze.NUMBER_OF_CODEWORDS,3);class is{constructor(){this.field=hi.PDF417_GF}decode(t,i,o){let u=new Bn(this.field,t),c=new Int32Array(i),f=!1;for(let G=i;G>0;G--){let Q=u.evaluateAt(this.field.exp(G));c[i-G]=Q,Q!==0&&(f=!0)}if(!f)return 0;let p=this.field.getOne();if(o!=null)for(const G of o){let Q=this.field.exp(t.length-1-G),Z=new Bn(this.field,new Int32Array([this.field.subtract(0,Q),1]));p=p.multiply(Z)}let w=new Bn(this.field,c),E=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),w,i),v=E[0],D=E[1],M=this.findErrorLocations(v),V=this.findErrorMagnitudes(D,v,M);for(let G=0;G<M.length;G++){let Q=t.length-1-this.field.log(M[G]);if(Q<0)throw te.getChecksumInstance();t[Q]=this.field.subtract(t[Q],V[G])}return M.length}runEuclideanAlgorithm(t,i,o){if(t.getDegree()<i.getDegree()){let M=t;t=i,i=M}let u=t,c=i,f=this.field.getZero(),p=this.field.getOne();for(;c.getDegree()>=Math.round(o/2);){let M=u,V=f;if(u=c,f=p,u.isZero())throw te.getChecksumInstance();c=M;let G=this.field.getZero(),Q=u.getCoefficient(u.getDegree()),Z=this.field.inverse(Q);for(;c.getDegree()>=u.getDegree()&&!c.isZero();){let se=c.getDegree()-u.getDegree(),_e=this.field.multiply(c.getCoefficient(c.getDegree()),Z);G=G.add(this.field.buildMonomial(se,_e)),c=c.subtract(u.multiplyByMonomial(se,_e))}p=G.multiply(f).subtract(V).negative()}let w=p.getCoefficient(0);if(w===0)throw te.getChecksumInstance();let E=this.field.inverse(w),v=p.multiply(E),D=c.multiply(E);return[v,D]}findErrorLocations(t){let i=t.getDegree(),o=new Int32Array(i),u=0;for(let c=1;c<this.field.getSize()&&u<i;c++)t.evaluateAt(c)===0&&(o[u]=this.field.inverse(c),u++);if(u!==i)throw te.getChecksumInstance();return o}findErrorMagnitudes(t,i,o){let u=i.getDegree(),c=new Int32Array(u);for(let E=1;E<=u;E++)c[u-E]=this.field.multiply(E,i.getCoefficient(E));let f=new Bn(this.field,c),p=o.length,w=new Int32Array(p);for(let E=0;E<p;E++){let v=this.field.inverse(o[E]),D=this.field.subtract(0,t.evaluateAt(v)),M=this.field.inverse(f.evaluateAt(v));w[E]=this.field.multiply(D,M)}return w}}class vi{constructor(t,i,o,u,c){t instanceof vi?this.constructor_2(t):this.constructor_1(t,i,o,u,c)}constructor_1(t,i,o,u,c){const f=i==null||o==null,p=u==null||c==null;if(f&&p)throw new ae;f?(i=new Pe(0,u.getY()),o=new Pe(0,c.getY())):p&&(u=new Pe(t.getWidth()-1,i.getY()),c=new Pe(t.getWidth()-1,o.getY())),this.image=t,this.topLeft=i,this.bottomLeft=o,this.topRight=u,this.bottomRight=c,this.minX=Math.trunc(Math.min(i.getX(),o.getX())),this.maxX=Math.trunc(Math.max(u.getX(),c.getX())),this.minY=Math.trunc(Math.min(i.getY(),u.getY())),this.maxY=Math.trunc(Math.max(o.getY(),c.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new vi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,o){let u=this.topLeft,c=this.bottomLeft,f=this.topRight,p=this.bottomRight;if(t>0){let w=o?this.topLeft:this.topRight,E=Math.trunc(w.getY()-t);E<0&&(E=0);let v=new Pe(w.getX(),E);o?u=v:f=v}if(i>0){let w=o?this.bottomLeft:this.bottomRight,E=Math.trunc(w.getY()+i);E>=this.image.getHeight()&&(E=this.image.getHeight()-1);let v=new Pe(w.getX(),E);o?c=v:p=v}return new vi(this.image,u,c,f,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class fi{constructor(t,i,o,u){this.columnCount=t,this.errorCorrectionLevel=u,this.rowCountUpperPart=i,this.rowCountLowerPart=o,this.rowCount=i+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class fr{constructor(){this.buffer=""}static form(t,i){let o=-1;function u(f,p,w,E,v,D){if(f==="%%")return"%";if(i[++o]===void 0)return;f=E?parseInt(E.substr(1)):void 0;let M=v?parseInt(v.substr(1)):void 0,V;switch(D){case"s":V=i[o];break;case"c":V=i[o][0];break;case"f":V=parseFloat(i[o]).toFixed(f);break;case"p":V=parseFloat(i[o]).toPrecision(f);break;case"e":V=parseFloat(i[o]).toExponential(f);break;case"x":V=parseInt(i[o]).toString(M||16);break;case"d":V=parseFloat(parseInt(i[o],M||10).toPrecision(f)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(M);let G=parseInt(w),Q=w&&w[0]+""=="0"?"0":" ";for(;V.length<G;)V=p!==void 0?V+Q:Q+V;return V}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,u)}format(t,...i){this.buffer+=fr.form(t,i)}toString(){return this.buffer}}class zr{constructor(t){this.boundingBox=new vi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let o=1;o<zr.MAX_NEARBY_DISTANCE;o++){let u=this.imageRowToCodewordIndex(t)-o;if(u>=0&&(i=this.codewords[u],i!=null)||(u=this.imageRowToCodewordIndex(t)+o,u<this.codewords.length&&(i=this.codewords[u],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new fr;let i=0;for(const o of this.codewords){if(o==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,o.getRowNumber(),o.getValue())}return t.toString()}}zr.MAX_NEARBY_DISTANCE=5;class $r{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[o,u]of this.values.entries()){const c={getKey:()=>o,getValue:()=>u};c.getValue()>t?(t=c.getValue(),i=[],i.push(c.getKey())):c.getValue()===t&&i.push(c.getKey())}return Ze.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class Jt extends zr{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t!=null&&t.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let o=this.getBoundingBox(),u=this._isLeft?o.getTopLeft():o.getTopRight(),c=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.imageRowToCodewordIndex(Math.trunc(c.getY())),w=-1,E=1,v=0;for(let D=f;D<p;D++){if(i[D]==null)continue;let M=i[D],V=M.getRowNumber()-w;if(V===0)v++;else if(V===1)E=Math.max(E,v),v=1,w=M.getRowNumber();else if(V<0||M.getRowNumber()>=t.getRowCount()||V>D)i[D]=null;else{let G;E>2?G=(E-2)*V:G=V;let Q=G>=D;for(let Z=1;Z<=G&&!Q;Z++)Q=i[D-Z]!=null;Q?i[D]=null:(w=M.getRowNumber(),v=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let o of this.getCodewords())if(o!=null){let u=o.getRowNumber();if(u>=i.length)continue;i[u]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),o=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=this.getCodewords(),w=-1;for(let E=c;E<f;E++){if(p[E]==null)continue;let v=p[E];v.setRowNumberAsRowIndicatorColumn();let D=v.getRowNumber()-w;D===0||(D===1?w=v.getRowNumber():v.getRowNumber()>=t.getRowCount()?p[E]=null:w=v.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new $r,o=new $r,u=new $r,c=new $r;for(let p of t){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let w=p.getValue()%30,E=p.getRowNumber();switch(this._isLeft||(E+=2),E%3){case 0:o.setValue(w*3+1);break;case 1:c.setValue(w/3),u.setValue(w%3);break;case 2:i.setValue(w+1);break}}if(i.getValue().length===0||o.getValue().length===0||u.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||o.getValue()[0]+u.getValue()[0]<Ze.MIN_ROWS_IN_BARCODE||o.getValue()[0]+u.getValue()[0]>Ze.MAX_ROWS_IN_BARCODE)return null;let f=new fi(i.getValue()[0],o.getValue()[0],u.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(t,f),f}removeIncorrectCodewords(t,i){for(let o=0;o<t.length;o++){let u=t[o];if(t[o]==null)continue;let c=u.getValue()%30,f=u.getRowNumber();if(f>i.getRowCount()){t[o]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:c*3+1!==i.getRowCountUpperPart()&&(t[o]=null);break;case 1:(Math.trunc(c/3)!==i.getErrorCorrectionLevel()||c%3!==i.getRowCountLowerPart())&&(t[o]=null);break;case 2:c+1!==i.getColumnCount()&&(t[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Is{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Ze.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t!=null&&t.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let o=this.detectionResultColumns[i].getCodewords();for(let u=0;u<o.length;u++)o[u]!=null&&(o[u].hasValidRowNumber()||this.adjustRowNumbers(i,u,o))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<t.length;o++)if(t[o]!=null&&i[o]!=null&&t[o].getRowNumber()===i[o].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let c=this.detectionResultColumns[u].getCodewords()[o];c!=null&&(c.setRowNumber(t[o].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let u=i[o].getRowNumber(),c=0;for(let f=this.barcodeColumnCount+1;f>0&&c<this.ADJUST_ROW_NUMBER_SKIP;f--){let p=this.detectionResultColumns[f].getCodewords()[o];p!=null&&(c=Is.adjustRowNumberIfValid(u,c,p),p.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let o=0;o<i.length;o++){if(i[o]==null)continue;let u=i[o].getRowNumber(),c=0;for(let f=1;f<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;f++){let p=this.detectionResultColumns[f].getCodewords()[o];p!=null&&(c=Is.adjustRowNumberIfValid(u,c,p),p.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(t)?(o.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,o){if(!this.detectionResultColumns[t-1])return;let u=o[i],c=this.detectionResultColumns[t-1].getCodewords(),f=c;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());let p=new Array(14);p[2]=c[i],p[3]=f[i],i>0&&(p[0]=o[i-1],p[4]=c[i-1],p[5]=f[i-1]),i>1&&(p[8]=o[i-2],p[10]=c[i-2],p[11]=f[i-2]),i<o.length-1&&(p[1]=o[i+1],p[6]=c[i+1],p[7]=f[i+1]),i<o.length-2&&(p[9]=o[i+2],p[12]=c[i+2],p[13]=f[i+2]);for(let w of p)if(Is.adjustRowNumber(u,w))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new fr;for(let o=0;o<t.getCodewords().length;o++){i.format("CW %3d:",o);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){i.format("    |   ");continue}let c=this.detectionResultColumns[u].getCodewords()[o];if(c==null){i.format("    |   ");continue}i.format(" %3d|%3d",c.getRowNumber(),c.getValue())}i.format("%n")}return i.toString()}}class zi{constructor(t,i,o,u){this.rowNumber=zi.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(o),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==zi.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}zi.BARCODE_ROW_UNKNOWN=-1;class Nn{static initialize(){for(let t=0;t<Ze.SYMBOL_TABLE.length;t++){let i=Ze.SYMBOL_TABLE[t],o=i&1;for(let u=0;u<Ze.BARS_IN_MODULE;u++){let c=0;for(;(i&1)===o;)c+=1,i>>=1;o=i&1,Nn.RATIOS_TABLE[t]||(Nn.RATIOS_TABLE[t]=new Array(Ze.BARS_IN_MODULE)),Nn.RATIOS_TABLE[t][Ze.BARS_IN_MODULE-u-1]=Math.fround(c/Ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=Nn.getDecodedCodewordValue(Nn.sampleBitCounts(t));return i!==-1?i:Nn.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=mt.sum(t),o=new Int32Array(Ze.BARS_IN_MODULE),u=0,c=0;for(let f=0;f<Ze.MODULES_IN_CODEWORD;f++){let p=i/(2*Ze.MODULES_IN_CODEWORD)+f*i/Ze.MODULES_IN_CODEWORD;c+t[u]<=p&&(c+=t[u],u++),o[u]++}return o}static getDecodedCodewordValue(t){let i=Nn.getBitValue(t);return Ze.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let o=0;o<t.length;o++)for(let u=0;u<t[o];u++)i=i<<1|(o%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=mt.sum(t),o=new Array(Ze.BARS_IN_MODULE);if(i>1)for(let f=0;f<o.length;f++)o[f]=Math.fround(t[f]/i);let u=qr.MAX_VALUE,c=-1;this.bSymbolTableReady||Nn.initialize();for(let f=0;f<Nn.RATIOS_TABLE.length;f++){let p=0,w=Nn.RATIOS_TABLE[f];for(let E=0;E<Ze.BARS_IN_MODULE;E++){let v=Math.fround(w[E]-o[E]);if(p+=Math.fround(v*v),p>=u)break}p<u&&(u=p,c=Ze.SYMBOL_TABLE[f])}return c}}Nn.bSymbolTableReady=!1,Nn.RATIOS_TABLE=new Array(Ze.SYMBOL_TABLE.length).map(N=>new Array(Ze.BARS_IN_MODULE));class Ts{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class Ks{static parseLong(t,i=void 0){return parseInt(t,i)}}class Sr extends A{}Sr.kind="NullPointerException";class Zs{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,o){if(t==null)throw new Sr;if(i<0||i>t.length||o<0||i+o>t.length||i+o<0)throw new oe;if(o===0)return;for(let u=0;u<o;u++)this.write(t[i+u])}flush(){}close(){}}class Rr extends A{}class Mo extends Zs{constructor(t=32){if(super(),this.count=0,t<0)throw new k("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let o=this.buf.length<<1;if(o-t<0&&(o=t),o<0){if(t<0)throw new Rr;o=ye.MAX_VALUE}this.buf=De.copyOfUint8Array(this.buf,o)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,o){if(i<0||i>t.length||o<0||i+o-t.length>0)throw new oe;this.ensureCapacity(this.count+o),ce.arraycopy(t,i,this.buf,this.count,o),this.count+=o}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return De.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var Nt;(function(N){N[N.ALPHA=0]="ALPHA",N[N.LOWER=1]="LOWER",N[N.MIXED=2]="MIXED",N[N.PUNCT=3]="PUNCT",N[N.ALPHA_SHIFT=4]="ALPHA_SHIFT",N[N.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Nt||(Nt={}));function di(){if(typeof window<"u")return window.BigInt||null;if(typeof bu<"u")return bu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ss;function nn(N){if(typeof ss>"u"&&(ss=di()),ss===null)throw new Error("BigInt is not supported!");return ss(N)}function gi(){let N=[];N[0]=nn(1);let t=nn(900);N[1]=t;for(let i=2;i<16;i++)N[i]=N[i-1]*t;return N}class ie{static decode(t,i){let o=new z(""),u=P.ISO8859_1;o.enableDecoding(u);let c=1,f=t[c++],p=new Ts;for(;c<t[0];){switch(f){case ie.TEXT_COMPACTION_MODE_LATCH:c=ie.textCompaction(t,c,o);break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:c=ie.byteCompaction(f,t,u,c,o);break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(t[c++]);break;case ie.NUMERIC_COMPACTION_MODE_LATCH:c=ie.numericCompaction(t,c,o);break;case ie.ECI_CHARSET:P.getCharacterSetECIByValue(t[c++]);break;case ie.ECI_GENERAL_PURPOSE:c+=2;break;case ie.ECI_USER_DEFINED:c++;break;case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=ie.decodeMacroBlock(t,c,p);break;case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:throw new U;default:c--,c=ie.textCompaction(t,c,o);break}if(c<t.length)f=t[c++];else throw U.getFormatInstance()}if(o.length()===0)throw U.getFormatInstance();let w=new kt(null,o.toString(),null,i);return w.setOther(p),w}static decodeMacroBlock(t,i,o){if(i+ie.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw U.getFormatInstance();let u=new Int32Array(ie.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<ie.NUMBER_OF_SEQUENCE_CODEWORDS;p++,i++)u[p]=t[i];o.setSegmentIndex(ye.parseInt(ie.decodeBase900toBase10(u,ie.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new z;i=ie.textCompaction(t,i,c),o.setFileId(c.toString());let f=-1;for(t[i]===ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=i+1);i<t[0];)switch(t[i]){case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new z;i=ie.textCompaction(t,i+1,p),o.setFileName(p.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new z;i=ie.textCompaction(t,i+1,w),o.setSender(w.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let E=new z;i=ie.textCompaction(t,i+1,E),o.setAddressee(E.toString());break;case ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new z;i=ie.numericCompaction(t,i+1,v),o.setSegmentCount(ye.parseInt(v.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let D=new z;i=ie.numericCompaction(t,i+1,D),o.setTimestamp(Ks.parseLong(D.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let M=new z;i=ie.numericCompaction(t,i+1,M),o.setChecksum(ye.parseInt(M.toString()));break;case ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let V=new z;i=ie.numericCompaction(t,i+1,V),o.setFileSize(Ks.parseLong(V.toString()));break;default:throw U.getFormatInstance()}break;case ie.MACRO_PDF417_TERMINATOR:i++,o.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(f!==-1){let p=i-f;o.isLastSegment()&&p--,o.setOptionalData(De.copyOfRange(t,f,f+p))}return i}static textCompaction(t,i,o){let u=new Int32Array((t[0]-i)*2),c=new Int32Array((t[0]-i)*2),f=0,p=!1;for(;i<t[0]&&!p;){let w=t[i++];if(w<ie.TEXT_COMPACTION_MODE_LATCH)u[f]=w/30,u[f+1]=w%30,f+=2;else switch(w){case ie.TEXT_COMPACTION_MODE_LATCH:u[f++]=ie.TEXT_COMPACTION_MODE_LATCH;break;case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:i--,p=!0;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=t[i++],c[f]=w,f++;break}}return ie.decodeTextCompaction(u,c,f,o),i}static decodeTextCompaction(t,i,o,u){let c=Nt.ALPHA,f=Nt.ALPHA,p=0;for(;p<o;){let w=t[p],E="";switch(c){case Nt.ALPHA:if(w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case ie.LL:c=Nt.LOWER;break;case ie.ML:c=Nt.MIXED;break;case ie.PS:f=c,c=Nt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=Nt.ALPHA;break}break;case Nt.LOWER:if(w<26)E=String.fromCharCode(97+w);else switch(w){case 26:E=" ";break;case ie.AS:f=c,c=Nt.ALPHA_SHIFT;break;case ie.ML:c=Nt.MIXED;break;case ie.PS:f=c,c=Nt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=Nt.ALPHA;break}break;case Nt.MIXED:if(w<ie.PL)E=ie.MIXED_CHARS[w];else switch(w){case ie.PL:c=Nt.PUNCT;break;case 26:E=" ";break;case ie.LL:c=Nt.LOWER;break;case ie.AL:c=Nt.ALPHA;break;case ie.PS:f=c,c=Nt.PUNCT_SHIFT;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=Nt.ALPHA;break}break;case Nt.PUNCT:if(w<ie.PAL)E=ie.PUNCT_CHARS[w];else switch(w){case ie.PAL:c=Nt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=Nt.ALPHA;break}break;case Nt.ALPHA_SHIFT:if(c=f,w<26)E=String.fromCharCode(65+w);else switch(w){case 26:E=" ";break;case ie.TEXT_COMPACTION_MODE_LATCH:c=Nt.ALPHA;break}break;case Nt.PUNCT_SHIFT:if(c=f,w<ie.PAL)E=ie.PUNCT_CHARS[w];else switch(w){case ie.PAL:c=Nt.ALPHA;break;case ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p]);break;case ie.TEXT_COMPACTION_MODE_LATCH:c=Nt.ALPHA;break}break}E!==""&&u.append(E),p++}}static byteCompaction(t,i,o,u,c){let f=new Mo,p=0,w=0,E=!1;switch(t){case ie.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),D=i[u++];for(;u<i[0]&&!E;)switch(v[p++]=D,w=900*w+D,D=i[u++],D){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:u--,E=!0;break;default:if(p%5===0&&p>0){for(let M=0;M<6;++M)f.write(Number(nn(w)>>nn(8*(5-M))));w=0,p=0}break}u===i[0]&&D<ie.TEXT_COMPACTION_MODE_LATCH&&(v[p++]=D);for(let M=0;M<p;M++)f.write(v[M]);break;case ie.BYTE_COMPACTION_MODE_LATCH_6:for(;u<i[0]&&!E;){let M=i[u++];if(M<ie.TEXT_COMPACTION_MODE_LATCH)p++,w=900*w+M;else switch(M){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.NUMERIC_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:u--,E=!0;break}if(p%5===0&&p>0){for(let V=0;V<6;++V)f.write(Number(nn(w)>>nn(8*(5-V))));w=0,p=0}}break}return c.append(Y.decode(f.toByteArray(),o)),u}static numericCompaction(t,i,o){let u=0,c=!1,f=new Int32Array(ie.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!c;){let p=t[i++];if(i===t[0]&&(c=!0),p<ie.TEXT_COMPACTION_MODE_LATCH)f[u]=p,u++;else switch(p){case ie.TEXT_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH:case ie.BYTE_COMPACTION_MODE_LATCH_6:case ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ie.MACRO_PDF417_TERMINATOR:i--,c=!0;break}(u%ie.MAX_NUMERIC_CODEWORDS===0||p===ie.NUMERIC_COMPACTION_MODE_LATCH||c)&&u>0&&(o.append(ie.decodeBase900toBase10(f,u)),u=0)}return i}static decodeBase900toBase10(t,i){let o=nn(0);for(let c=0;c<i;c++)o+=ie.EXP900[i-c-1]*nn(t[c]);let u=o.toString();if(u.charAt(0)!=="1")throw new U;return u.substring(1)}}ie.TEXT_COMPACTION_MODE_LATCH=900,ie.BYTE_COMPACTION_MODE_LATCH=901,ie.NUMERIC_COMPACTION_MODE_LATCH=902,ie.BYTE_COMPACTION_MODE_LATCH_6=924,ie.ECI_USER_DEFINED=925,ie.ECI_GENERAL_PURPOSE=926,ie.ECI_CHARSET=927,ie.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ie.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ie.MACRO_PDF417_TERMINATOR=922,ie.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ie.MAX_NUMERIC_CODEWORDS=15,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ie.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ie.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ie.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ie.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ie.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ie.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ie.PL=25,ie.LL=27,ie.AS=27,ie.ML=28,ie.AL=28,ie.PS=29,ie.PAL=29,ie.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ie.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ie.EXP900=di()?gi():[],ie.NUMBER_OF_SEQUENCE_CODEWORDS=2;class rt{constructor(){}static decode(t,i,o,u,c,f,p){let w=new vi(t,i,o,u,c),E=null,v=null,D;for(let G=!0;;G=!1){if(i!=null&&(E=rt.getRowIndicatorColumn(t,w,i,!0,f,p)),u!=null&&(v=rt.getRowIndicatorColumn(t,w,u,!1,f,p)),D=rt.merge(E,v),D==null)throw ae.getNotFoundInstance();let Q=D.getBoundingBox();if(G&&Q!=null&&(Q.getMinY()<w.getMinY()||Q.getMaxY()>w.getMaxY()))w=Q;else break}D.setBoundingBox(w);let M=D.getBarcodeColumnCount()+1;D.setDetectionResultColumn(0,E),D.setDetectionResultColumn(M,v);let V=E!=null;for(let G=1;G<=M;G++){let Q=V?G:M-G;if(D.getDetectionResultColumn(Q)!==void 0)continue;let Z;Q===0||Q===M?Z=new Jt(w,Q===0):Z=new zr(w),D.setDetectionResultColumn(Q,Z);let se=-1,_e=se;for(let Ae=w.getMinY();Ae<=w.getMaxY();Ae++){if(se=rt.getStartColumn(D,Q,Ae,V),se<0||se>w.getMaxX()){if(_e===-1)continue;se=_e}let me=rt.detectCodeword(t,w.getMinX(),w.getMaxX(),V,se,Ae,f,p);me!=null&&(Z.setCodeword(Ae,me),_e=se,f=Math.min(f,me.getWidth()),p=Math.max(p,me.getWidth()))}}return rt.createDecoderResult(D)}static merge(t,i){if(t==null&&i==null)return null;let o=rt.getBarcodeMetadata(t,i);if(o==null)return null;let u=vi.merge(rt.adjustBoundingBox(t),rt.adjustBoundingBox(i));return new Is(o,u)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let o=rt.getMax(i),u=0;for(let p of i)if(u+=o-p,p>0)break;let c=t.getCodewords();for(let p=0;u>0&&c[p]==null;p++)u--;let f=0;for(let p=i.length-1;p>=0&&(f+=o-i[p],!(i[p]>0));p--);for(let p=c.length-1;f>0&&c[p]==null;p--)f--;return t.getBoundingBox().addMissingRows(u,f,t.isLeft())}static getMax(t){let i=-1;for(let o of t)i=Math.max(i,o);return i}static getBarcodeMetadata(t,i){let o;if(t==null||(o=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let u;return i==null||(u=i.getBarcodeMetadata())==null?o:o.getColumnCount()!==u.getColumnCount()&&o.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&o.getRowCount()!==u.getRowCount()?null:o}static getRowIndicatorColumn(t,i,o,u,c,f){let p=new Jt(i,u);for(let w=0;w<2;w++){let E=w===0?1:-1,v=Math.trunc(Math.trunc(o.getX()));for(let D=Math.trunc(Math.trunc(o.getY()));D<=i.getMaxY()&&D>=i.getMinY();D+=E){let M=rt.detectCodeword(t,0,t.getWidth(),u,v,D,c,f);M!=null&&(p.setCodeword(D,M),u?v=M.getStartX():v=M.getEndX())}}return p}static adjustCodewordCount(t,i){let o=i[0][1],u=o.getValue(),c=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-rt.getNumberOfECCodeWords(t.getBarcodeECLevel());if(u.length===0){if(c<1||c>Ze.MAX_CODEWORDS_IN_BARCODE)throw ae.getNotFoundInstance();o.setValue(c)}else u[0]!==c&&o.setValue(c)}static createDecoderResult(t){let i=rt.createBarcodeMatrix(t);rt.adjustCodewordCount(t,i);let o=new Array,u=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),c=[],f=new Array;for(let w=0;w<t.getBarcodeRowCount();w++)for(let E=0;E<t.getBarcodeColumnCount();E++){let v=i[w][E+1].getValue(),D=w*t.getBarcodeColumnCount()+E;v.length===0?o.push(D):v.length===1?u[D]=v[0]:(f.push(D),c.push(v))}let p=new Array(c.length);for(let w=0;w<p.length;w++)p[w]=c[w];return rt.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),u,Ze.toIntArray(o),Ze.toIntArray(f),p)}static createDecoderResultFromAmbiguousValues(t,i,o,u,c){let f=new Int32Array(u.length),p=100;for(;p-- >0;){for(let w=0;w<f.length;w++)i[u[w]]=c[w][f[w]];try{return rt.decodeCodewords(i,t,o)}catch(w){if(!(w instanceof te))throw w}if(f.length===0)throw te.getChecksumInstance();for(let w=0;w<f.length;w++)if(f[w]<c[w].length-1){f[w]++;break}else if(f[w]=0,w===f.length-1)throw te.getChecksumInstance()}throw te.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let u=0;u<i.length;u++)for(let c=0;c<i[u].length;c++)i[u][c]=new $r;let o=0;for(let u of t.getDetectionResultColumns()){if(u!=null){for(let c of u.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=0){if(f>=i.length)continue;i[f][o].setValue(c.getValue())}}}o++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,o,u){let c=u?1:-1,f=null;if(rt.isValidBarcodeColumn(t,i-c)&&(f=t.getDetectionResultColumn(i-c).getCodeword(o)),f!=null)return u?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(i).getCodewordNearby(o),f!=null)return u?f.getStartX():f.getEndX();if(rt.isValidBarcodeColumn(t,i-c)&&(f=t.getDetectionResultColumn(i-c).getCodewordNearby(o)),f!=null)return u?f.getEndX():f.getStartX();let p=0;for(;rt.isValidBarcodeColumn(t,i-c);){i-=c;for(let w of t.getDetectionResultColumn(i).getCodewords())if(w!=null)return(u?w.getEndX():w.getStartX())+c*p*(w.getEndX()-w.getStartX());p++}return u?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,o,u,c,f,p,w){c=rt.adjustCodewordStartColumn(t,i,o,u,c,f);let E=rt.getModuleBitCount(t,i,o,u,c,f);if(E==null)return null;let v,D=mt.sum(E);if(u)v=c+D;else{for(let G=0;G<E.length/2;G++){let Q=E[G];E[G]=E[E.length-1-G],E[E.length-1-G]=Q}v=c,c=v-D}if(!rt.checkCodewordSkew(D,p,w))return null;let M=Nn.getDecodedValue(E),V=Ze.getCodeword(M);return V===-1?null:new zi(c,v,rt.getCodewordBucketNumber(M),V)}static getModuleBitCount(t,i,o,u,c,f){let p=c,w=new Int32Array(8),E=0,v=u?1:-1,D=u;for(;(u?p<o:p>=i)&&E<w.length;)t.get(p,f)===D?(w[E]++,p+=v):(E++,D=!D);return E===w.length||p===(u?o:i)&&E===w.length-1?w:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,o,u,c,f){let p=c,w=u?-1:1;for(let E=0;E<2;E++){for(;(u?p>=i:p<o)&&u===t.get(p,f);){if(Math.abs(c-p)>rt.CODEWORD_SKEW_SIZE)return c;p+=w}w=-w,u=!u}return p}static checkCodewordSkew(t,i,o){return i-rt.CODEWORD_SKEW_SIZE<=t&&t<=o+rt.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,o){if(t.length===0)throw U.getFormatInstance();let u=1<<i+1,c=rt.correctErrors(t,o,u);rt.verifyCodewordCount(t,u);let f=ie.decode(t,""+i);return f.setErrorsCorrected(c),f.setErasures(o.length),f}static correctErrors(t,i,o){if(i!=null&&i.length>o/2+rt.MAX_ERRORS||o<0||o>rt.MAX_EC_CODEWORDS)throw te.getChecksumInstance();return rt.errorCorrection.decode(t,o,i)}static verifyCodewordCount(t,i){if(t.length<4)throw U.getFormatInstance();let o=t[0];if(o>t.length)throw U.getFormatInstance();if(o===0)if(i<t.length)t[0]=t.length-i;else throw U.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),o=0,u=i.length-1;for(;!((t&1)!==o&&(o=t&1,u--,u<0));)i[u]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return rt.getCodewordBucketNumber(rt.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new fr;for(let o=0;o<t.length;o++){i.format("Row %2d: ",o);for(let u=0;u<t[o].length;u++){let c=t[o][u];c.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}i.format("%n")}return i.toString()}}rt.CODEWORD_SKEW_SIZE=2,rt.MAX_ERRORS=3,rt.MAX_EC_CODEWORDS=512,rt.errorCorrection=new is;class Fn{decode(t,i=null){let o=Fn.decode(t,i,!1);if(o==null||o.length===0||o[0]==null)throw ae.getNotFoundInstance();return o[0]}decodeMultiple(t,i=null){try{return Fn.decode(t,i,!0)}catch(o){throw o instanceof U||o instanceof te?ae.getNotFoundInstance():o}}static decode(t,i,o){const u=new Array,c=Ke.detectMultiple(t,i,o);for(const f of c.getPoints()){const p=rt.decode(c.getBits(),f[4],f[5],f[6],f[7],Fn.getMinCodewordWidth(f),Fn.getMaxCodewordWidth(f)),w=new qe(p.getText(),p.getRawBytes(),void 0,f,ve.PDF_417);w.putMetadata(nt.ERROR_CORRECTION_LEVEL,p.getECLevel());const E=p.getOther();E!=null&&w.putMetadata(nt.PDF417_EXTRA_METADATA,E),u.push(w)}return u.map(f=>f)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?ye.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(Fn.getMaxWidth(t[0],t[4]),Fn.getMaxWidth(t[6],t[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.max(Fn.getMaxWidth(t[1],t[5]),Fn.getMaxWidth(t[7],t[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(Fn.getMinWidth(t[0],t[4]),Fn.getMinWidth(t[6],t[2])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN),Math.min(Fn.getMinWidth(t[1],t[5]),Fn.getMinWidth(t[7],t[3])*Ze.MODULES_IN_CODEWORD/Ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class ji extends A{}ji.kind="ReaderException";class Si{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!l(t)&&t.get(Le.TRY_HARDER)===!0,o=l(t)?null:t.get(Le.POSSIBLE_FORMATS),u=new Array;if(!l(o)){const c=o.some(f=>f===ve.UPC_A||f===ve.UPC_E||f===ve.EAN_13||f===ve.EAN_8||f===ve.CODABAR||f===ve.CODE_39||f===ve.CODE_93||f===ve.CODE_128||f===ve.ITF||f===ve.RSS_14||f===ve.RSS_EXPANDED);c&&!i&&u.push(new Ti(t,this.verbose)),o.includes(ve.QR_CODE)&&u.push(new Qn),o.includes(ve.DATA_MATRIX)&&u.push(new Tr),o.includes(ve.AZTEC)&&u.push(new Ci),o.includes(ve.PDF_417)&&u.push(new Fn),c&&i&&u.push(new Ti(t,this.verbose))}u.length===0&&(i||u.push(new Ti(t,this.verbose)),u.push(new Qn),u.push(new Tr),u.push(new Ci),u.push(new Fn),i&&u.push(new Ti(t,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new ji("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(o){if(o instanceof ji)continue}throw new ae("No MultiFormat Readers were able to detect the code.")}}class os extends je{constructor(t=null,i=500){const o=new Si;o.setHints(t),super(o,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class vs extends je{constructor(t=500){super(new Fn,t)}}class $s extends je{constructor(t=500){super(new Qn,t)}}var Ss;(function(N){N[N.ERROR_CORRECTION=0]="ERROR_CORRECTION",N[N.CHARACTER_SET=1]="CHARACTER_SET",N[N.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",N[N.MIN_SIZE=3]="MIN_SIZE",N[N.MAX_SIZE=4]="MAX_SIZE",N[N.MARGIN=5]="MARGIN",N[N.PDF417_COMPACT=6]="PDF417_COMPACT",N[N.PDF417_COMPACTION=7]="PDF417_COMPACTION",N[N.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",N[N.AZTEC_LAYERS=9]="AZTEC_LAYERS",N[N.QR_VERSION=10]="QR_VERSION"})(Ss||(Ss={}));var yn=Ss;class as{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new dn(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let o=i[i.length-1];const u=this.field;for(let c=i.length;c<=t;c++){const f=o.multiply(new dn(u,Int32Array.from([1,u.exp(c-1+u.getGeneratorBase())])));i.push(f),o=f}}return i[t]}encode(t,i){if(i===0)throw new k("No error correction bytes");const o=t.length-i;if(o<=0)throw new k("No data bytes provided");const u=this.buildGenerator(i),c=new Int32Array(o);ce.arraycopy(t,0,c,0,o);let f=new dn(this.field,c);f=f.multiplyByMonomial(i,1);const w=f.divide(u)[1].getCoefficients(),E=i-w.length;for(let v=0;v<E;v++)t[o+v]=0;ce.arraycopy(w,0,t,o+E,w.length)}}class Yt{constructor(){}static applyMaskPenaltyRule1(t){return Yt.applyMaskPenaltyRule1Internal(t,!0)+Yt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const o=t.getArray(),u=t.getWidth(),c=t.getHeight();for(let f=0;f<c-1;f++){const p=o[f];for(let w=0;w<u-1;w++){const E=p[w];E===p[w+1]&&E===o[f+1][w]&&E===o[f+1][w+1]&&i++}}return Yt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const o=t.getArray(),u=t.getWidth(),c=t.getHeight();for(let f=0;f<c;f++)for(let p=0;p<u;p++){const w=o[f];p+6<u&&w[p]===1&&w[p+1]===0&&w[p+2]===1&&w[p+3]===1&&w[p+4]===1&&w[p+5]===0&&w[p+6]===1&&(Yt.isWhiteHorizontal(w,p-4,p)||Yt.isWhiteHorizontal(w,p+7,p+11))&&i++,f+6<c&&o[f][p]===1&&o[f+1][p]===0&&o[f+2][p]===1&&o[f+3][p]===1&&o[f+4][p]===1&&o[f+5][p]===0&&o[f+6][p]===1&&(Yt.isWhiteVertical(o,p,f-4,f)||Yt.isWhiteVertical(o,p,f+7,f+11))&&i++}return i*Yt.N3}static isWhiteHorizontal(t,i,o){i=Math.max(i,0),o=Math.min(o,t.length);for(let u=i;u<o;u++)if(t[u]===1)return!1;return!0}static isWhiteVertical(t,i,o,u){o=Math.max(o,0),u=Math.min(u,t.length);for(let c=o;c<u;c++)if(t[c][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const o=t.getArray(),u=t.getWidth(),c=t.getHeight();for(let w=0;w<c;w++){const E=o[w];for(let v=0;v<u;v++)E[v]===1&&i++}const f=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-f)*10/f)*Yt.N4}static getDataMaskBit(t,i,o){let u,c;switch(t){case 0:u=o+i&1;break;case 1:u=o&1;break;case 2:u=i%3;break;case 3:u=(o+i)%3;break;case 4:u=Math.floor(o/2)+Math.floor(i/3)&1;break;case 5:c=o*i,u=(c&1)+c%3;break;case 6:c=o*i,u=(c&1)+c%3&1;break;case 7:c=o*i,u=c%3+(o+i&1)&1;break;default:throw new k("Invalid mask pattern: "+t)}return u===0}static applyMaskPenaltyRule1Internal(t,i){let o=0;const u=i?t.getHeight():t.getWidth(),c=i?t.getWidth():t.getHeight(),f=t.getArray();for(let p=0;p<u;p++){let w=0,E=-1;for(let v=0;v<c;v++){const D=i?f[p][v]:f[v][p];D===E?w++:(w>=5&&(o+=Yt.N1+(w-5)),w=1,E=D)}w>=5&&(o+=Yt.N1+(w-5))}return o}}Yt.N1=3,Yt.N2=3,Yt.N3=40,Yt.N4=10;class Rs{constructor(t,i){this.width=t,this.height=i;const o=new Array(i);for(let u=0;u!==i;u++)o[u]=new Uint8Array(t);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,o){this.bytes[i][t]=o}setBoolean(t,i,o){this.bytes[i][t]=o?1:0}clear(t){for(const i of this.bytes)De.fill(i,t)}equals(t){if(!(t instanceof Rs))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let o=0,u=this.height;o<u;++o){const c=this.bytes[o],f=i.bytes[o];for(let p=0,w=this.width;p<w;++p)if(c[p]!==f[p])return!1}return!0}toString(){const t=new z;for(let i=0,o=this.height;i<o;++i){const u=this.bytes[i];for(let c=0,f=this.width;c<f;++c)switch(u[c]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class dr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new z;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<dr.NUM_MASK_PATTERNS}}dr.NUM_MASK_PATTERNS=8;class Bt extends A{}Bt.kind="WriterException";class Qe{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,o,u,c){Qe.clearMatrix(c),Qe.embedBasicPatterns(o,c),Qe.embedTypeInfo(i,u,c),Qe.maybeEmbedVersionInfo(o,c),Qe.embedDataBits(t,u,c)}static embedBasicPatterns(t,i){Qe.embedPositionDetectionPatternsAndSeparators(i),Qe.embedDarkDotAtLeftBottomCorner(i),Qe.maybeEmbedPositionAdjustmentPatterns(t,i),Qe.embedTimingPatterns(i)}static embedTypeInfo(t,i,o){const u=new Re;Qe.makeTypeInfoBits(t,i,u);for(let c=0,f=u.getSize();c<f;++c){const p=u.get(u.getSize()-1-c),w=Qe.TYPE_INFO_COORDINATES[c],E=w[0],v=w[1];if(o.setBoolean(E,v,p),c<8){const D=o.getWidth()-c-1;o.setBoolean(D,8,p)}else{const M=o.getHeight()-7+(c-8);o.setBoolean(8,M,p)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const o=new Re;Qe.makeVersionInfoBits(t,o);let u=6*3-1;for(let c=0;c<6;++c)for(let f=0;f<3;++f){const p=o.get(u);u--,i.setBoolean(c,i.getHeight()-11+f,p),i.setBoolean(i.getHeight()-11+f,c,p)}}static embedDataBits(t,i,o){let u=0,c=-1,f=o.getWidth()-1,p=o.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);p>=0&&p<o.getHeight();){for(let w=0;w<2;++w){const E=f-w;if(!Qe.isEmpty(o.get(E,p)))continue;let v;u<t.getSize()?(v=t.get(u),++u):v=!1,i!==255&&Yt.getDataMaskBit(i,E,p)&&(v=!v),o.setBoolean(E,p,v)}p+=c}c=-c,p+=c,f-=2}if(u!==t.getSize())throw new Bt("Not all bits consumed: "+u+"/"+t.getSize())}static findMSBSet(t){return 32-ye.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new k("0 polynomial");const o=Qe.findMSBSet(i);for(t<<=o-1;Qe.findMSBSet(t)>=o;)t^=i<<Qe.findMSBSet(t)-o;return t}static makeTypeInfoBits(t,i,o){if(!dr.isValidMaskPattern(i))throw new Bt("Invalid mask pattern");const u=t.getBits()<<3|i;o.appendBits(u,5);const c=Qe.calculateBCHCode(u,Qe.TYPE_INFO_POLY);o.appendBits(c,10);const f=new Re;if(f.appendBits(Qe.TYPE_INFO_MASK_PATTERN,15),o.xor(f),o.getSize()!==15)throw new Bt("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const o=Qe.calculateBCHCode(t.getVersionNumber(),Qe.VERSION_INFO_POLY);if(i.appendBits(o,12),i.getSize()!==18)throw new Bt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const o=(i+1)%2;Qe.isEmpty(t.get(i,6))&&t.setNumber(i,6,o),Qe.isEmpty(t.get(6,i))&&t.setNumber(6,i,o)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new Bt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,o){for(let u=0;u<8;++u){if(!Qe.isEmpty(o.get(t+u,i)))throw new Bt;o.setNumber(t+u,i,0)}}static embedVerticalSeparationPattern(t,i,o){for(let u=0;u<7;++u){if(!Qe.isEmpty(o.get(t,i+u)))throw new Bt;o.setNumber(t,i+u,0)}}static embedPositionAdjustmentPattern(t,i,o){for(let u=0;u<5;++u){const c=Qe.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)o.setNumber(t+f,i+u,c[f])}}static embedPositionDetectionPattern(t,i,o){for(let u=0;u<7;++u){const c=Qe.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)o.setNumber(t+f,i+u,c[f])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Qe.POSITION_DETECTION_PATTERN[0].length;Qe.embedPositionDetectionPattern(0,0,t),Qe.embedPositionDetectionPattern(t.getWidth()-i,0,t),Qe.embedPositionDetectionPattern(0,t.getWidth()-i,t);const o=8;Qe.embedHorizontalSeparationPattern(0,o-1,t),Qe.embedHorizontalSeparationPattern(t.getWidth()-o,o-1,t),Qe.embedHorizontalSeparationPattern(0,t.getWidth()-o,t);const u=7;Qe.embedVerticalSeparationPattern(u,0,t),Qe.embedVerticalSeparationPattern(t.getHeight()-u-1,0,t),Qe.embedVerticalSeparationPattern(u,t.getHeight()-u,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const o=t.getVersionNumber()-1,u=Qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let c=0,f=u.length;c!==f;c++){const p=u[c];if(p>=0)for(let w=0;w!==f;w++){const E=u[w];E>=0&&Qe.isEmpty(i.get(E,p))&&Qe.embedPositionAdjustmentPattern(E-2,p-2,i)}}}}Qe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Qe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Qe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Qe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Qe.VERSION_INFO_POLY=7973,Qe.TYPE_INFO_POLY=1335,Qe.TYPE_INFO_MASK_PATTERN=21522;class ua{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class zt{constructor(){}static calculateMaskPenalty(t){return Yt.applyMaskPenaltyRule1(t)+Yt.applyMaskPenaltyRule2(t)+Yt.applyMaskPenaltyRule3(t)+Yt.applyMaskPenaltyRule4(t)}static encode(t,i,o=null){let u=zt.DEFAULT_BYTE_MODE_ENCODING;const c=o!==null&&o.get(yn.CHARACTER_SET)!==void 0;c&&(u=o.get(yn.CHARACTER_SET).toString());const f=this.chooseMode(t,u),p=new Re;if(f===Ye.BYTE&&(c||zt.DEFAULT_BYTE_MODE_ENCODING!==u)){const Ae=P.getCharacterSetECIByName(u);Ae!==void 0&&this.appendECI(Ae,p)}this.appendModeInfo(f,p);const w=new Re;this.appendBytes(t,f,w,u);let E;if(o!==null&&o.get(yn.QR_VERSION)!==void 0){const Ae=Number.parseInt(o.get(yn.QR_VERSION).toString(),10);E=Ne.getVersionForNumber(Ae);const me=this.calculateBitsNeeded(f,p,w,E);if(!this.willFit(me,E,i))throw new Bt("Data too big for requested version")}else E=this.recommendVersion(i,f,p,w);const v=new Re;v.appendBitArray(p);const D=f===Ye.BYTE?w.getSizeInBytes():t.length;this.appendLengthInfo(D,E,f,v),v.appendBitArray(w);const M=E.getECBlocksForLevel(i),V=E.getTotalCodewords()-M.getTotalECCodewords();this.terminateBits(V,v);const G=this.interleaveWithECBytes(v,E.getTotalCodewords(),V,M.getNumBlocks()),Q=new dr;Q.setECLevel(i),Q.setMode(f),Q.setVersion(E);const Z=E.getDimensionForVersion(),se=new Rs(Z,Z),_e=this.chooseMaskPattern(G,i,E,se);return Q.setMaskPattern(_e),Qe.buildMatrix(G,i,E,_e,se),Q.setMatrix(se),Q}static recommendVersion(t,i,o,u){const c=this.calculateBitsNeeded(i,o,u,Ne.getVersionForNumber(1)),f=this.chooseVersion(c,t),p=this.calculateBitsNeeded(i,o,u,f);return this.chooseVersion(p,t)}static calculateBitsNeeded(t,i,o,u){return i.getSize()+t.getCharacterCountBits(u)+o.getSize()}static getAlphanumericCode(t){return t<zt.ALPHANUMERIC_TABLE.length?zt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(P.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Ye.KANJI;let o=!1,u=!1;for(let c=0,f=t.length;c<f;++c){const p=t.charAt(c);if(zt.isDigit(p))o=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)u=!0;else return Ye.BYTE}return u?Ye.ALPHANUMERIC:o?Ye.NUMERIC:Ye.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=Y.encode(t,P.SJIS)}catch{return!1}const o=i.length;if(o%2!==0)return!1;for(let u=0;u<o;u+=2){const c=i[u]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(t,i,o,u){let c=Number.MAX_SAFE_INTEGER,f=-1;for(let p=0;p<dr.NUM_MASK_PATTERNS;p++){Qe.buildMatrix(t,i,o,p,u);let w=this.calculateMaskPenalty(u);w<c&&(c=w,f=p)}return f}static chooseVersion(t,i){for(let o=1;o<=40;o++){const u=Ne.getVersionForNumber(o);if(zt.willFit(t,u,i))return u}throw new Bt("Data too big")}static willFit(t,i,o){const u=i.getTotalCodewords(),f=i.getECBlocksForLevel(o).getTotalECCodewords(),p=u-f,w=(t+7)/8;return p>=w}static terminateBits(t,i){const o=t*8;if(i.getSize()>o)throw new Bt("data bits cannot fit in the QR Code"+i.getSize()+" > "+o);for(let f=0;f<4&&i.getSize()<o;++f)i.appendBit(!1);const u=i.getSize()&7;if(u>0)for(let f=u;f<8;f++)i.appendBit(!1);const c=t-i.getSizeInBytes();for(let f=0;f<c;++f)i.appendBits(f&1?17:236,8);if(i.getSize()!==o)throw new Bt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,o,u,c,f){if(u>=o)throw new Bt("Block ID too large");const p=t%o,w=o-p,E=Math.floor(t/o),v=E+1,D=Math.floor(i/o),M=D+1,V=E-D,G=v-M;if(V!==G)throw new Bt("EC bytes mismatch");if(o!==w+p)throw new Bt("RS blocks mismatch");if(t!==(D+V)*w+(M+G)*p)throw new Bt("Total bytes mismatch");u<w?(c[0]=D,f[0]=V):(c[0]=M,f[0]=G)}static interleaveWithECBytes(t,i,o,u){if(t.getSizeInBytes()!==o)throw new Bt("Number of bits and data bytes does not match");let c=0,f=0,p=0;const w=new Array;for(let v=0;v<u;++v){const D=new Int32Array(1),M=new Int32Array(1);zt.getNumDataBytesAndNumECBytesForBlockID(i,o,u,v,D,M);const V=D[0],G=new Uint8Array(V);t.toBytes(8*c,G,0,V);const Q=zt.generateECBytes(G,M[0]);w.push(new ua(G,Q)),f=Math.max(f,V),p=Math.max(p,Q.length),c+=D[0]}if(o!==c)throw new Bt("Data bytes does not match offset");const E=new Re;for(let v=0;v<f;++v)for(const D of w){const M=D.getDataBytes();v<M.length&&E.appendBits(M[v],8)}for(let v=0;v<p;++v)for(const D of w){const M=D.getErrorCorrectionBytes();v<M.length&&E.appendBits(M[v],8)}if(i!==E.getSizeInBytes())throw new Bt("Interleaving error: "+i+" and "+E.getSizeInBytes()+" differ.");return E}static generateECBytes(t,i){const o=t.length,u=new Int32Array(o+i);for(let f=0;f<o;f++)u[f]=t[f]&255;new as(pt.QR_CODE_FIELD_256).encode(u,i);const c=new Uint8Array(i);for(let f=0;f<i;f++)c[f]=u[o+f];return c}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,o,u){const c=o.getCharacterCountBits(i);if(t>=1<<c)throw new Bt(t+" is bigger than "+((1<<c)-1));u.appendBits(t,c)}static appendBytes(t,i,o,u){switch(i){case Ye.NUMERIC:zt.appendNumericBytes(t,o);break;case Ye.ALPHANUMERIC:zt.appendAlphanumericBytes(t,o);break;case Ye.BYTE:zt.append8BitBytes(t,o,u);break;case Ye.KANJI:zt.appendKanjiBytes(t,o);break;default:throw new Bt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=zt.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const o=t.length;let u=0;for(;u<o;){const c=zt.getDigit(t.charAt(u));if(u+2<o){const f=zt.getDigit(t.charAt(u+1)),p=zt.getDigit(t.charAt(u+2));i.appendBits(c*100+f*10+p,10),u+=3}else if(u+1<o){const f=zt.getDigit(t.charAt(u+1));i.appendBits(c*10+f,7),u+=2}else i.appendBits(c,4),u++}}static appendAlphanumericBytes(t,i){const o=t.length;let u=0;for(;u<o;){const c=zt.getAlphanumericCode(t.charCodeAt(u));if(c===-1)throw new Bt;if(u+1<o){const f=zt.getAlphanumericCode(t.charCodeAt(u+1));if(f===-1)throw new Bt;i.appendBits(c*45+f,11),u+=2}else i.appendBits(c,6),u++}}static append8BitBytes(t,i,o){let u;try{u=Y.encode(t,o)}catch(c){throw new Bt(c)}for(let c=0,f=u.length;c!==f;c++){const p=u[c];i.appendBits(p,8)}}static appendKanjiBytes(t,i){let o;try{o=Y.encode(t,P.SJIS)}catch(c){throw new Bt(c)}const u=o.length;for(let c=0;c<u;c+=2){const f=o[c]&255,p=o[c+1]&255,w=f<<8&4294967295|p;let E=-1;if(w>=33088&&w<=40956?E=w-33088:w>=57408&&w<=60351&&(E=w-49472),E===-1)throw new Bt("Invalid byte sequence");const v=(E>>8)*192+(E&255);i.appendBits(v,13)}}static appendECI(t,i){i.appendBits(Ye.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}zt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),zt.DEFAULT_BYTE_MODE_ENCODING=P.UTF8.getName();class Jr{write(t,i,o,u=null){if(t.length===0)throw new k("Found empty contents");if(i<0||o<0)throw new k("Requested dimensions are too small: "+i+"x"+o);let c=wt.L,f=Jr.QUIET_ZONE_SIZE;u!==null&&(u.get(yn.ERROR_CORRECTION)!==void 0&&(c=wt.fromString(u.get(yn.ERROR_CORRECTION).toString())),u.get(yn.MARGIN)!==void 0&&(f=Number.parseInt(u.get(yn.MARGIN).toString(),10)));const p=zt.encode(t,c,u);return this.renderResult(p,i,o,f)}writeToDom(t,i,o,u,c=null){typeof t=="string"&&(t=document.querySelector(t));const f=this.write(i,o,u,c);t&&t.appendChild(f)}renderResult(t,i,o,u){const c=t.getMatrix();if(c===null)throw new ur;const f=c.getWidth(),p=c.getHeight(),w=f+u*2,E=p+u*2,v=Math.max(i,w),D=Math.max(o,E),M=Math.min(Math.floor(v/w),Math.floor(D/E)),V=Math.floor((v-f*M)/2),G=Math.floor((D-p*M)/2),Q=this.createSVGElement(v,D);for(let Z=0,se=G;Z<p;Z++,se+=M)for(let _e=0,Ae=V;_e<f;_e++,Ae+=M)if(c.get(_e,Z)===1){const me=this.createSvgRectElement(Ae,se,M,M);Q.appendChild(me)}return Q}createSVGElement(t,i){const o=document.createElementNS(Jr.SVG_NS,"svg");return o.setAttributeNS(null,"height",t.toString()),o.setAttributeNS(null,"width",i.toString()),o}createSvgRectElement(t,i,o,u){const c=document.createElementNS(Jr.SVG_NS,"rect");return c.setAttributeNS(null,"x",t.toString()),c.setAttributeNS(null,"y",i.toString()),c.setAttributeNS(null,"height",o.toString()),c.setAttributeNS(null,"width",u.toString()),c.setAttributeNS(null,"fill","#000000"),c}}Jr.QUIET_ZONE_SIZE=4,Jr.SVG_NS="http://www.w3.org/2000/svg";class Dn{encode(t,i,o,u,c){if(t.length===0)throw new k("Found empty contents");if(i!==ve.QR_CODE)throw new k("Can only encode QR_CODE, but got "+i);if(o<0||u<0)throw new k(`Requested dimensions are too small: ${o}x${u}`);let f=wt.L,p=Dn.QUIET_ZONE_SIZE;c!==null&&(c.get(yn.ERROR_CORRECTION)!==void 0&&(f=wt.fromString(c.get(yn.ERROR_CORRECTION).toString())),c.get(yn.MARGIN)!==void 0&&(p=Number.parseInt(c.get(yn.MARGIN).toString(),10)));const w=zt.encode(t,f,c);return Dn.renderResult(w,o,u,p)}static renderResult(t,i,o,u){const c=t.getMatrix();if(c===null)throw new ur;const f=c.getWidth(),p=c.getHeight(),w=f+u*2,E=p+u*2,v=Math.max(i,w),D=Math.max(o,E),M=Math.min(Math.floor(v/w),Math.floor(D/E)),V=Math.floor((v-f*M)/2),G=Math.floor((D-p*M)/2),Q=new ot(v,D);for(let Z=0,se=G;Z<p;Z++,se+=M)for(let _e=0,Ae=V;_e<f;_e++,Ae+=M)c.get(_e,Z)===1&&Q.setRegion(Ae,se,M,M);return Q}}Dn.QUIET_ZONE_SIZE=4;class ca{encode(t,i,o,u,c){let f;switch(i){case ve.QR_CODE:f=new Dn;break;default:throw new k("No encoder available for format "+i)}return f.encode(t,i,o,u,c)}}class jr extends Te{constructor(t,i,o,u,c,f,p,w){if(super(f,p),this.yuvData=t,this.dataWidth=i,this.dataHeight=o,this.left=u,this.top=c,u+f>i||c+p>o)throw new k("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(f,p)}getRow(t,i){if(t<0||t>=this.getHeight())throw new k("Requested row is outside the image: "+t);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const u=(t+this.top)*this.dataWidth+this.left;return ce.arraycopy(this.yuvData,u,i,0,o),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const o=t*i,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ce.arraycopy(this.yuvData,c,u,0,o),u;for(let f=0;f<i;f++){const p=f*t;ce.arraycopy(this.yuvData,c,u,p,t),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(t,i,o,u){return new jr(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,o,u,!1)}renderThumbnail(){const t=this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(t*i),u=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let f=0;f<i;f++){const p=f*t;for(let w=0;w<t;w++){const E=u[c+w*jr.THUMBNAIL_SCALE_FACTOR]&255;o[p+w]=4278190080|E*65793}c+=this.dataWidth*jr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/jr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/jr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const o=this.yuvData;for(let u=0,c=this.top*this.dataWidth+this.left;u<i;u++,c+=this.dataWidth){const f=c+t/2;for(let p=c,w=c+t-1;p<f;p++,w--){const E=o[p];o[p]=o[w],o[w]=E}}}invert(){return new ze(this)}}jr.THUMBNAIL_SCALE_FACTOR=2;class ei extends Te{constructor(t,i,o,u,c,f,p){if(super(i,o),this.dataWidth=u,this.dataHeight=c,this.left=f,this.top=p,t.BYTES_PER_ELEMENT===4){const w=i*o,E=new Uint8ClampedArray(w);for(let v=0;v<w;v++){const D=t[v],M=D>>16&255,V=D>>7&510,G=D&255;E[v]=(M+V+G)/4&255}this.luminances=E}else this.luminances=t;if(u===void 0&&(this.dataWidth=i),c===void 0&&(this.dataHeight=o),f===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+o>this.dataHeight)throw new k("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new k("Requested row is outside the image: "+t);const o=this.getWidth();(i==null||i.length<o)&&(i=new Uint8ClampedArray(o));const u=(t+this.top)*this.dataWidth+this.left;return ce.arraycopy(this.luminances,u,i,0,o),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const o=t*i,u=new Uint8ClampedArray(o);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return ce.arraycopy(this.luminances,c,u,0,o),u;for(let f=0;f<i;f++){const p=f*t;ce.arraycopy(this.luminances,c,u,p,t),c+=this.dataWidth}return u}isCropSupported(){return!0}crop(t,i,o,u){return new ei(this.luminances,o,u,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new ze(this)}}class m extends P{static forName(t){return this.getCharacterSetECIByName(t)}}class I{}I.ISO_8859_1=P.ISO8859_1;class R{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class L{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class ee{constructor(t){this.previous=t}getPrevious(){return this.previous}}class ue extends ee{constructor(t,i,o){super(t),this.value=i,this.bitCount=o}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new ue(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ue(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+ye.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class Ie extends ue{constructor(t,i,o){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=o}appendTo(t,i){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):o===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+o],8)}addBinaryShift(t,i){return new Ie(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jt(N,t,i){return new Ie(N,t,i)}function on(N,t,i){return new ue(N,t,i)}const Ct=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],en=0,an=1,ln=2,Nr=3,ir=4,Js=new ue(null,0,0),ha=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ul(N){for(let t of N)De.fill(t,-1);return N[en][ir]=0,N[an][ir]=0,N[an][en]=28,N[Nr][ir]=0,N[ln][ir]=0,N[ln][en]=15,N}const Qa=Ul(De.createInt32Array(6,6));class gr{constructor(t,i,o,u){this.token=t,this.mode=i,this.binaryShiftByteCount=o,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let o=this.bitCount,u=this.token;if(t!==this.mode){let f=ha[this.mode][t];u=on(u,f&65535,f>>16),o+=f>>16}let c=t===ln?4:5;return u=on(u,i,c),new gr(u,t,0,o+c)}shiftAndAppend(t,i){let o=this.token,u=this.mode===ln?4:5;return o=on(o,Qa[this.mode][t],u),o=on(o,i,5),new gr(o,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(t){let i=this.token,o=this.mode,u=this.bitCount;if(this.mode===ir||this.mode===ln){let p=ha[o][en];i=on(i,p&65535,p>>16),u+=p>>16,o=en}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new gr(i,o,this.binaryShiftByteCount+1,u+c);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(t+1)),f}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=jt(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new gr(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(ha[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=gr.calculateBinaryShiftCost(t)-gr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let u=this.endBinaryShift(t.length).token;u!==null;u=u.getPrevious())i.unshift(u);let o=new Re;for(const u of i)u.appendTo(o,t);return o}toString(){return H.format("%s bits=%d bytes=%d",Ct[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}gr.INITIAL_STATE=new gr(Js,en,0,0);function wc(N){const t=H.getCharCode(" "),i=H.getCharCode("."),o=H.getCharCode(",");N[en][t]=1;const u=H.getCharCode("Z"),c=H.getCharCode("A");for(let M=c;M<=u;M++)N[en][M]=M-c+2;N[an][t]=1;const f=H.getCharCode("z"),p=H.getCharCode("a");for(let M=p;M<=f;M++)N[an][M]=M-p+2;N[ln][t]=1;const w=H.getCharCode("9"),E=H.getCharCode("0");for(let M=E;M<=w;M++)N[ln][M]=M-E+2;N[ln][o]=12,N[ln][i]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let M=0;M<v.length;M++)N[Nr][H.getCharCode(v[M])]=M;const D=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let M=0;M<D.length;M++)H.getCharCode(D[M])>0&&(N[ir][H.getCharCode(D[M])]=M);return N}const qa=wc(De.createInt32Array(5,256));class Po{constructor(t){this.text=t}encode(){const t=H.getCharCode(" "),i=H.getCharCode(`
`);let o=L.singletonList(gr.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let f,p=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case H.getCharCode("\r"):f=p===i?2:0;break;case H.getCharCode("."):f=p===t?3:0;break;case H.getCharCode(","):f=p===t?4:0;break;case H.getCharCode(":"):f=p===t?5:0;break;default:f=0}f>0?(o=Po.updateStateListForPair(o,c,f),c++):o=this.updateStateListForChar(o,c)}return L.min(o,(c,f)=>c.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const o=[];for(let u of t)this.updateStateForChar(u,i,o);return Po.simplifyStates(o)}updateStateForChar(t,i,o){let u=this.text[i]&255,c=qa[t.getMode()][u]>0,f=null;for(let p=0;p<=ir;p++){let w=qa[p][u];if(w>0){if(f==null&&(f=t.endBinaryShift(i)),!c||p===t.getMode()||p===ln){const E=f.latchAndAppend(p,w);o.push(E)}if(!c&&Qa[t.getMode()][p]>=0){const E=f.shiftAndAppend(p,w);o.push(E)}}}if(t.getBinaryShiftByteCount()>0||qa[t.getMode()][u]===0){let p=t.addBinaryShiftChar(i);o.push(p)}}static updateStateListForPair(t,i,o){const u=[];for(let c of t)this.updateStateForPair(c,i,o,u);return this.simplifyStates(u)}static updateStateForPair(t,i,o,u){let c=t.endBinaryShift(i);if(u.push(c.latchAndAppend(ir,o)),t.getMode()!==ir&&u.push(c.shiftAndAppend(ir,o)),o===3||o===4){let f=c.latchAndAppend(ln,16-o).latchAndAppend(ln,1);u.push(f)}if(t.getBinaryShiftByteCount()>0){let f=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);u.push(f)}}static simplifyStates(t){let i=[];for(const o of t){let u=!0;for(const c of i){if(c.isBetterThanOrEqualTo(o)){u=!1;break}o.isBetterThanOrEqualTo(c)&&(i=i.filter(f=>f!==c))}u&&i.push(o)}return i}}class It{constructor(){}static encodeBytes(t){return It.encode(t,It.DEFAULT_EC_PERCENT,It.DEFAULT_AZTEC_LAYERS)}static encode(t,i,o){let u=new Po(t).encode(),c=ye.truncDivision(u.getSize()*i,100)+11,f=u.getSize()+c,p,w,E,v,D;if(o!==It.DEFAULT_AZTEC_LAYERS){if(p=o<0,w=Math.abs(o),w>(p?It.MAX_NB_BITS_COMPACT:It.MAX_NB_BITS))throw new k(H.format("Illegal value %s for layers",o));E=It.totalBitsInLayer(w,p),v=It.WORD_SIZE[w];let me=E-E%v;if(D=It.stuffBits(u,v),D.getSize()+c>me)throw new k("Data to large for user specified layer");if(p&&D.getSize()>v*64)throw new k("Data to large for user specified layer")}else{v=0,D=null;for(let me=0;;me++){if(me>It.MAX_NB_BITS)throw new k("Data too large for an Aztec code");if(p=me<=3,w=p?me+1:me,E=It.totalBitsInLayer(w,p),f>E)continue;(D==null||v!==It.WORD_SIZE[w])&&(v=It.WORD_SIZE[w],D=It.stuffBits(u,v));let xt=E-E%v;if(!(p&&D.getSize()>v*64)&&D.getSize()+c<=xt)break}}let M=It.generateCheckWords(D,E,v),V=D.getSize()/v,G=It.generateModeMessage(p,w,V),Q=(p?11:14)+w*4,Z=new Int32Array(Q),se;if(p){se=Q;for(let me=0;me<Z.length;me++)Z[me]=me}else{se=Q+1+2*ye.truncDivision(ye.truncDivision(Q,2)-1,15);let me=ye.truncDivision(Q,2),xt=ye.truncDivision(se,2);for(let at=0;at<me;at++){let Dr=at+ye.truncDivision(at,15);Z[me-at-1]=xt-Dr-1,Z[me+at]=xt+Dr+1}}let _e=new ot(se);for(let me=0,xt=0;me<w;me++){let at=(w-me)*4+(p?9:12);for(let Dr=0;Dr<at;Dr++){let pi=Dr*2;for(let Vn=0;Vn<2;Vn++)M.get(xt+pi+Vn)&&_e.set(Z[me*2+Vn],Z[me*2+Dr]),M.get(xt+at*2+pi+Vn)&&_e.set(Z[me*2+Dr],Z[Q-1-me*2-Vn]),M.get(xt+at*4+pi+Vn)&&_e.set(Z[Q-1-me*2-Vn],Z[Q-1-me*2-Dr]),M.get(xt+at*6+pi+Vn)&&_e.set(Z[Q-1-me*2-Dr],Z[me*2+Vn])}xt+=at*8}if(It.drawModeMessage(_e,p,se,G),p)It.drawBullsEye(_e,ye.truncDivision(se,2),5);else{It.drawBullsEye(_e,ye.truncDivision(se,2),7);for(let me=0,xt=0;me<ye.truncDivision(Q,2)-1;me+=15,xt+=16)for(let at=ye.truncDivision(se,2)&1;at<se;at+=2)_e.set(ye.truncDivision(se,2)-xt,at),_e.set(ye.truncDivision(se,2)+xt,at),_e.set(at,ye.truncDivision(se,2)-xt),_e.set(at,ye.truncDivision(se,2)+xt)}let Ae=new R;return Ae.setCompact(p),Ae.setSize(se),Ae.setLayers(w),Ae.setCodeWords(V),Ae.setMatrix(_e),Ae}static drawBullsEye(t,i,o){for(let u=0;u<o;u+=2)for(let c=i-u;c<=i+u;c++)t.set(c,i-u),t.set(c,i+u),t.set(i-u,c),t.set(i+u,c);t.set(i-o,i-o),t.set(i-o+1,i-o),t.set(i-o,i-o+1),t.set(i+o,i-o),t.set(i+o,i-o+1),t.set(i+o,i+o-1)}static generateModeMessage(t,i,o){let u=new Re;return t?(u.appendBits(i-1,2),u.appendBits(o-1,6),u=It.generateCheckWords(u,28,4)):(u.appendBits(i-1,5),u.appendBits(o-1,11),u=It.generateCheckWords(u,40,4)),u}static drawModeMessage(t,i,o,u){let c=ye.truncDivision(o,2);if(i)for(let f=0;f<7;f++){let p=c-3+f;u.get(f)&&t.set(p,c-5),u.get(f+7)&&t.set(c+5,p),u.get(20-f)&&t.set(p,c+5),u.get(27-f)&&t.set(c-5,p)}else for(let f=0;f<10;f++){let p=c-5+f+ye.truncDivision(f,5);u.get(f)&&t.set(p,c-7),u.get(f+10)&&t.set(c+7,p),u.get(29-f)&&t.set(p,c+7),u.get(39-f)&&t.set(c-7,p)}}static generateCheckWords(t,i,o){let u=t.getSize()/o,c=new as(It.getGF(o)),f=ye.truncDivision(i,o),p=It.bitsToWords(t,o,f);c.encode(p,f-u);let w=i%o,E=new Re;E.appendBits(0,w);for(const v of Array.from(p))E.appendBits(v,o);return E}static bitsToWords(t,i,o){let u=new Int32Array(o),c,f;for(c=0,f=t.getSize()/i;c<f;c++){let p=0;for(let w=0;w<i;w++)p|=t.get(c*i+w)?1<<i-w-1:0;u[c]=p}return u}static getGF(t){switch(t){case 4:return pt.AZTEC_PARAM;case 6:return pt.AZTEC_DATA_6;case 8:return pt.AZTEC_DATA_8;case 10:return pt.AZTEC_DATA_10;case 12:return pt.AZTEC_DATA_12;default:throw new k("Unsupported word size "+t)}}static stuffBits(t,i){let o=new Re,u=t.getSize(),c=(1<<i)-2;for(let f=0;f<u;f+=i){let p=0;for(let w=0;w<i;w++)(f+w>=u||t.get(f+w))&&(p|=1<<i-1-w);(p&c)===c?(o.appendBits(p&c,i),f--):p&c?o.appendBits(p,i):(o.appendBits(p|1,i),f--)}return o}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}It.DEFAULT_EC_PERCENT=33,It.DEFAULT_AZTEC_LAYERS=0,It.MAX_NB_BITS=32,It.MAX_NB_BITS_COMPACT=4,It.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ko{encode(t,i,o,u){return this.encodeWithHints(t,i,o,u,null)}encodeWithHints(t,i,o,u,c){let f=I.ISO_8859_1,p=It.DEFAULT_EC_PERCENT,w=It.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(yn.CHARACTER_SET)&&(f=m.forName(c.get(yn.CHARACTER_SET).toString())),c.has(yn.ERROR_CORRECTION)&&(p=ye.parseInt(c.get(yn.ERROR_CORRECTION).toString())),c.has(yn.AZTEC_LAYERS)&&(w=ye.parseInt(c.get(yn.AZTEC_LAYERS).toString()))),ko.encodeLayers(t,i,o,u,f,p,w)}static encodeLayers(t,i,o,u,c,f,p){if(i!==ve.AZTEC)throw new k("Can only encode AZTEC, but got "+i);let w=It.encode(H.getBytes(t,c),f,p);return ko.renderResult(w,o,u)}static renderResult(t,i,o){let u=t.getMatrix();if(u==null)throw new ur;let c=u.getWidth(),f=u.getHeight(),p=Math.max(i,c),w=Math.max(o,f),E=Math.min(p/c,w/f),v=(p-c*E)/2,D=(w-f*E)/2,M=new ot(p,w);for(let V=0,G=D;V<f;V++,G+=E)for(let Q=0,Z=v;Q<c;Q++,Z+=E)u.get(Q,V)&&M.setRegion(Z,G,E,E);return M}}n.AbstractExpandedDecoder=ts,n.ArgumentException=O,n.ArithmeticException=Li,n.AztecCode=R,n.AztecCodeReader=Ci,n.AztecCodeWriter=ko,n.AztecDecoder=Vt,n.AztecDetector=Fi,n.AztecDetectorResult=ws,n.AztecEncoder=It,n.AztecHighLevelEncoder=Po,n.AztecPoint=kn,n.BarcodeFormat=ve,n.Binarizer=fe,n.BinaryBitmap=q,n.BitArray=Re,n.BitMatrix=ot,n.BitSource=Ys,n.BrowserAztecCodeReader=Es,n.BrowserBarcodeReader=oa,n.BrowserCodeReader=je,n.BrowserDatamatrixCodeReader=Ya,n.BrowserMultiFormatReader=os,n.BrowserPDF417Reader=vs,n.BrowserQRCodeReader=$s,n.BrowserQRCodeSvgWriter=Jr,n.CharacterSetECI=P,n.ChecksumException=te,n.Code128Reader=Se,n.Code39Reader=sn,n.DataMatrixDecodedBitStreamParser=Vr,n.DataMatrixReader=Tr,n.DecodeHintType=Le,n.DecoderResult=kt,n.DefaultGridSampler=Tn,n.DetectorResult=Zi,n.EAN13Reader=tr,n.EncodeHintType=yn,n.Exception=A,n.FormatException=U,n.GenericGF=pt,n.GenericGFPoly=dn,n.GlobalHistogramBinarizer=gt,n.GridSampler=xs,n.GridSamplerInstance=er,n.HTMLCanvasElementLuminanceSource=be,n.HybridBinarizer=Oe,n.ITFReader=Mt,n.IllegalArgumentException=k,n.IllegalStateException=ur,n.InvertedLuminanceSource=ze,n.LuminanceSource=Te,n.MathUtils=mt,n.MultiFormatOneDReader=Ti,n.MultiFormatReader=Si,n.MultiFormatWriter=ca,n.NotFoundException=ae,n.OneDReader=tn,n.PDF417DecodedBitStreamParser=ie,n.PDF417DecoderErrorCorrection=is,n.PDF417Reader=Fn,n.PDF417ResultMetadata=Ts,n.PerspectiveTransform=Ut,n.PlanarYUVLuminanceSource=jr,n.QRCodeByteMatrix=Rs,n.QRCodeDataMask=it,n.QRCodeDecodedBitStreamParser=Kt,n.QRCodeDecoderErrorCorrectionLevel=wt,n.QRCodeDecoderFormatInformation=mn,n.QRCodeEncoder=zt,n.QRCodeEncoderQRCode=dr,n.QRCodeMaskUtil=Yt,n.QRCodeMatrixUtil=Qe,n.QRCodeMode=Ye,n.QRCodeReader=Qn,n.QRCodeVersion=Ne,n.QRCodeWriter=Dn,n.RGBLuminanceSource=ei,n.RSS14Reader=Rt,n.RSSExpandedReader=de,n.ReaderException=ji,n.ReedSolomonDecoder=Bi,n.ReedSolomonEncoder=as,n.ReedSolomonException=Qr,n.Result=qe,n.ResultMetadataType=nt,n.ResultPoint=Pe,n.StringUtils=H,n.UnsupportedOperationException=W,n.VideoInputDevice=$,n.WhiteRectangleDetector=Ar,n.WriterException=Bt,n.ZXingArrays=De,n.ZXingCharset=m,n.ZXingInteger=ye,n.ZXingStandardCharsets=I,n.ZXingStringBuilder=z,n.ZXingStringEncoding=Y,n.ZXingSystem=ce,n.createAbstractExpandedDecoder=sa,Object.defineProperty(n,"__esModule",{value:!0})})}(wl,wl.exports)),wl.exports}var hn=O2();const M2=x2(hn),P2=w2({__proto__:null,default:M2},[hn]);var c0=function(){function s(e,n,l){if(this.formatMap=new Map([[Fe.QR_CODE,hn.BarcodeFormat.QR_CODE],[Fe.AZTEC,hn.BarcodeFormat.AZTEC],[Fe.CODABAR,hn.BarcodeFormat.CODABAR],[Fe.CODE_39,hn.BarcodeFormat.CODE_39],[Fe.CODE_93,hn.BarcodeFormat.CODE_93],[Fe.CODE_128,hn.BarcodeFormat.CODE_128],[Fe.DATA_MATRIX,hn.BarcodeFormat.DATA_MATRIX],[Fe.MAXICODE,hn.BarcodeFormat.MAXICODE],[Fe.ITF,hn.BarcodeFormat.ITF],[Fe.EAN_13,hn.BarcodeFormat.EAN_13],[Fe.EAN_8,hn.BarcodeFormat.EAN_8],[Fe.PDF_417,hn.BarcodeFormat.PDF_417],[Fe.RSS_14,hn.BarcodeFormat.RSS_14],[Fe.RSS_EXPANDED,hn.BarcodeFormat.RSS_EXPANDED],[Fe.UPC_A,hn.BarcodeFormat.UPC_A],[Fe.UPC_E,hn.BarcodeFormat.UPC_E],[Fe.UPC_EAN_EXTENSION,hn.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!P2)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=l;var h=this.createZXingFormats(e),g=new Map;g.set(hn.DecodeHintType.POSSIBLE_FORMATS,h),g.set(hn.DecodeHintType.TRY_HARDER,!1),this.hints=g}return s.prototype.decodeAsync=function(e){var n=this;return new Promise(function(l,h){try{l(n.decode(e))}catch(g){h(g)}})},s.prototype.decode=function(e){var n=new hn.MultiFormatReader(this.verbose,this.hints),l=new hn.HTMLCanvasElementLuminanceSource(e),h=new hn.BinaryBitmap(new hn.HybridBinarizer(l)),g=n.decode(h);return{text:g.text,format:Ag.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,l,h){e.set(n,l)}),e},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createZXingFormats=function(e){for(var n=[],l=0,h=e;l<h.length;l++){var g=h[l];this.formatMap.has(g)?n.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return n},s.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},s}(),k2=function(s,e,n,l){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function C(O){try{A(l.next(O))}catch(k){x(k)}}function S(O){try{A(l.throw(O))}catch(k){x(k)}}function A(O){O.done?g(O.value):h(O.value).then(C,S)}A((l=l.apply(s,e||[])).next())})},L2=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(A){return function(O){return S([A,O])}}function S(A){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(l=1,h&&(g=A[0]&2?h.return:A[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,A[1])).done)return g;switch(h=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){n.label=A[1];break}if(A[0]===6&&n.label<g[1]){n.label=g[1],g=A;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(A);break}g[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(s,n)}catch(O){A=[6,O],h=0}finally{l=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},h0=function(){function s(e,n,l){if(this.formatMap=new Map([[Fe.QR_CODE,"qr_code"],[Fe.AZTEC,"aztec"],[Fe.CODABAR,"codabar"],[Fe.CODE_39,"code_39"],[Fe.CODE_93,"code_93"],[Fe.CODE_128,"code_128"],[Fe.DATA_MATRIX,"data_matrix"],[Fe.ITF,"itf"],[Fe.EAN_13,"ean_13"],[Fe.EAN_8,"ean_8"],[Fe.PDF_417,"pdf417"],[Fe.UPC_A,"upc_a"],[Fe.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!s.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=l;var h=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(h),!this.detector)throw"BarcodeDetector detector not supported"}return s.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},s.prototype.decodeAsync=function(e){return k2(this,void 0,void 0,function(){var n,l;return L2(this,function(h){switch(h.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=h.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return l=this.selectLargestBarcode(n),[2,{text:l.rawValue,format:Ag.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}]}})})},s.prototype.selectLargestBarcode=function(e){for(var n=null,l=0,h=0,g=e;h<g.length;h++){var x=g[h],C=x.boundingBox.width*x.boundingBox.height;C>l&&(l=C,n=x)}if(!n)throw"No largest barcode found";return n},s.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],l=0,h=e;l<h.length;l++){var g=h[l];this.formatMap.has(g)?n.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},s.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},s.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,l,h){e.set(n,l)}),e},s.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},s}(),f0=function(s,e,n,l){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function C(O){try{A(l.next(O))}catch(k){x(k)}}function S(O){try{A(l.throw(O))}catch(k){x(k)}}function A(O){O.done?g(O.value):h(O.value).then(C,S)}A((l=l.apply(s,e||[])).next())})},d0=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(A){return function(O){return S([A,O])}}function S(A){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(l=1,h&&(g=A[0]&2?h.return:A[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,A[1])).done)return g;switch(h=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){n.label=A[1];break}if(A[0]===6&&n.label<g[1]){n.label=g[1],g=A;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(A);break}g[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(s,n)}catch(O){A=[6,O],h=0}finally{l=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},B2=function(){function s(e,n,l,h){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=l,n&&h0.isSupported()?(this.primaryDecoder=new h0(e,l,h),this.secondaryDecoder=new c0(e,l,h)):this.primaryDecoder=new c0(e,l,h)}return s.prototype.decodeAsync=function(e){return f0(this,void 0,void 0,function(){var n;return d0(this,function(l){switch(l.label){case 0:n=performance.now(),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,l.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},s.prototype.decodeRobustlyAsync=function(e){return f0(this,void 0,void 0,function(){var n,l;return d0(this,function(h){switch(h.label){case 0:n=performance.now(),h.label=1;case 1:return h.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,h.sent()];case 3:if(l=h.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw l;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},s.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},s.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},s.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,l=this.executionResults;n<l.length;n++){var h=l[n];e+=h}var g=e/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},s}(),yf=function(){var s=function(e,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g])},s(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");s(e,n);function l(){this.constructor=e}e.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)}}(),Gu=function(s,e,n,l){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function C(O){try{A(l.next(O))}catch(k){x(k)}}function S(O){try{A(l.throw(O))}catch(k){x(k)}}function A(O){O.done?g(O.value):h(O.value).then(C,S)}A((l=l.apply(s,e||[])).next())})},Xu=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(A){return function(O){return S([A,O])}}function S(A){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(l=1,h&&(g=A[0]&2?h.return:A[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,A[1])).done)return g;switch(h=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){n.label=A[1];break}if(A[0]===6&&n.label<g[1]){n.label=g[1],g=A;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(A);break}g[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(s,n)}catch(O){A=[6,O],h=0}finally{l=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},vg=function(){function s(e,n){this.name=e,this.track=n}return s.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},s.prototype.apply=function(e){var n={};n[this.name]=e;var l={advanced:[n]};return this.track.applyConstraints(l)},s.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},s}(),F2=function(s){yf(e,s);function e(n,l){return s.call(this,n,l)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var l={};l[this.name]=n;var h={advanced:[l]};return this.track.applyConstraints(h)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),l=n[this.name];return{min:l.min,max:l.max,step:l.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(vg),V2=function(s){yf(e,s);function e(n){return s.call(this,"zoom",n)||this}return e}(F2),U2=function(s){yf(e,s);function e(n){return s.call(this,"torch",n)||this}return e}(vg),z2=function(){function s(e){this.track=e}return s.prototype.zoomFeature=function(){return new V2(this.track)},s.prototype.torchFeature=function(){return new U2(this.track)},s}(),j2=function(){function s(e,n,l){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=l,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return s.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},s.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var l=e.surface.clientWidth,h=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(l,h),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},s.create=function(e,n,l,h){return Gu(this,void 0,void 0,function(){var g,x;return Xu(this,function(C){switch(C.label){case 0:return g=new s(e,n,h),l.aspectRatio?(x={aspectRatio:l.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:C.sent(),C.label=2;case 2:return g.setupSurface(),[2,g]}})})},s.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},s.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},s.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},s.prototype.resume=function(e){this.failIfClosed();var n=this,l=function(){setTimeout(e,200),n.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.play()},s.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},s.prototype.getSurface=function(){return this.failIfClosed(),this.surface},s.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},s.prototype.applyVideoConstraints=function(e){return Gu(this,void 0,void 0,function(){return Xu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},s.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,l){var h=e.mediaStream.getVideoTracks(),g=h.length,x=0;e.mediaStream.getVideoTracks().forEach(function(C){e.mediaStream.removeTrack(C),C.stop(),++x,x>=g&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},s.prototype.getCapabilities=function(){return new z2(this.getFirstTrackOrFail())},s}(),H2=function(){function s(e){this.mediaStream=e}return s.prototype.render=function(e,n,l){return Gu(this,void 0,void 0,function(){return Xu(this,function(h){return[2,j2.create(e,this.mediaStream,n,l)]})})},s.create=function(e){return Gu(this,void 0,void 0,function(){var n,l;return Xu(this,function(h){switch(h.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return l=h.sent(),[2,new s(l)]}})})},s}(),g0=function(s,e,n,l){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function C(O){try{A(l.next(O))}catch(k){x(k)}}function S(O){try{A(l.throw(O))}catch(k){x(k)}}function A(O){O.done?g(O.value):h(O.value).then(C,S)}A((l=l.apply(s,e||[])).next())})},p0=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(A){return function(O){return S([A,O])}}function S(A){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(l=1,h&&(g=A[0]&2?h.return:A[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,A[1])).done)return g;switch(h=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){n.label=A[1];break}if(A[0]===6&&n.label<g[1]){n.label=g[1],g=A;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(A);break}g[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(s,n)}catch(O){A=[6,O],h=0}finally{l=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},W2=function(){function s(){}return s.failIfNotSupported=function(){return g0(this,void 0,void 0,function(){return p0(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new s]})})},s.prototype.create=function(e){return g0(this,void 0,void 0,function(){return p0(this,function(n){return[2,H2.create(e)]})})},s}(),G2=function(s,e,n,l){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function C(O){try{A(l.next(O))}catch(k){x(k)}}function S(O){try{A(l.throw(O))}catch(k){x(k)}}function A(O){O.done?g(O.value):h(O.value).then(C,S)}A((l=l.apply(s,e||[])).next())})},X2=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(A){return function(O){return S([A,O])}}function S(A){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(l=1,h&&(g=A[0]&2?h.return:A[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,A[1])).done)return g;switch(h=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){n.label=A[1];break}if(A[0]===6&&n.label<g[1]){n.label=g[1],g=A;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(A);break}g[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(s,n)}catch(O){A=[6,O],h=0}finally{l=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Y2=function(){function s(){}return s.retrieve=function(){if(navigator.mediaDevices)return s.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?s.getCamerasFromMediaStreamTrack():s.rejectWithError()},s.rejectWithError=function(){var e=Ma.unableToQuerySupportedDevices();return s.isHttpsOrLocalhost()||(e=Ma.insecureContextCameraQueryError()),Promise.reject(e)},s.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},s.getCamerasFromMediaDevices=function(){return G2(this,void 0,void 0,function(){var e,n,l,h,g,x,C;return X2(this,function(S){switch(S.label){case 0:return e=function(A){for(var O=A.getVideoTracks(),k=0,q=O;k<q.length;k++){var te=q[k];te.enabled=!1,te.stop(),A.removeTrack(te)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=S.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(l=S.sent(),h=[],g=0,x=l;g<x.length;g++)C=x[g],C.kind==="videoinput"&&h.push({id:C.deviceId,label:C.label});return e(n),[2,h]}})})},s.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var l=function(g){for(var x=[],C=0,S=g;C<S.length;C++){var A=S[C];A.kind==="video"&&x.push({id:A.id,label:A.label})}e(x)},h=MediaStreamTrack;h.getSources(l)})},s}(),On;(function(s){s[s.UNKNOWN=0]="UNKNOWN",s[s.NOT_STARTED=1]="NOT_STARTED",s[s.SCANNING=2]="SCANNING",s[s.PAUSED=3]="PAUSED"})(On||(On={}));var Q2=function(){function s(){this.state=On.NOT_STARTED,this.onGoingTransactionNewState=On.UNKNOWN}return s.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},s.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},s.prototype.execute=function(){if(this.onGoingTransactionNewState===On.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=On.UNKNOWN,this.directTransition(e)},s.prototype.cancel=function(){if(this.onGoingTransactionNewState===On.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=On.UNKNOWN},s.prototype.getState=function(){return this.state},s.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==On.UNKNOWN)throw"Cannot transition to a new state, already under transition"},s.prototype.validateTransition=function(e){switch(this.state){case On.UNKNOWN:throw"Transition from unknown is not allowed";case On.NOT_STARTED:this.failIfNewStateIs(e,[On.PAUSED]);break;case On.SCANNING:break;case On.PAUSED:break}},s.prototype.failIfNewStateIs=function(e,n){for(var l=0,h=n;l<h.length;l++){var g=h[l];if(e===g)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},s}(),q2=function(){function s(e){this.stateManager=e}return s.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},s.prototype.directTransition=function(e){this.stateManager.directTransition(e)},s.prototype.getState=function(){return this.stateManager.getState()},s.prototype.canScanFile=function(){return this.stateManager.getState()===On.NOT_STARTED},s.prototype.isScanning=function(){return this.stateManager.getState()!==On.NOT_STARTED},s.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===On.SCANNING},s.prototype.isPaused=function(){return this.stateManager.getState()===On.PAUSED},s}(),K2=function(){function s(){}return s.create=function(){return new q2(new Q2)},s}(),Z2=function(){var s=function(e,n){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var g in h)Object.prototype.hasOwnProperty.call(h,g)&&(l[g]=h[g])},s(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");s(e,n);function l(){this.constructor=e}e.prototype=n===null?Object.create(n):(l.prototype=n.prototype,new l)}}(),xi=function(s){Z2(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(qi),$2=function(){function s(e,n){this.logger=n,this.fps=xi.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=xi.DEFAULT_DISABLE_FLIP}return s.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Tg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},s.prototype.isShadedBoxEnabled=function(){return!fs(this.qrbox)},s.create=function(e,n){return new s(e,n)},s}(),m0=function(){function s(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var l;typeof n=="boolean"?this.verbose=n===!0:n&&(l=n,this.verbose=l.verbose===!0,l.experimentalFeatures),this.logger=new Ig(this.verbose),this.qrcode=new B2(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(l),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=K2.create()}return s.prototype.start=function(e,n,l,h){var g=this;if(!e)throw"cameraIdOrConfig is required";if(!l||typeof l!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;h?x=h:x=this.verbose?this.logger.log:function(){};var C=$2.create(n,this.logger);this.clearElement();var S=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?S=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=S,O=document.getElementById(this.elementId);O.clientWidth?O.clientWidth:xi.DEFAULT_WIDTH,O.style.position="relative",this.shouldScan=!0,this.element=O;var k=this,q=this.stateManagerProxy.startTransition(On.SCANNING);return new Promise(function(te,fe){var ce=A?C.videoConstraints:k.createVideoConstraints(e);if(!ce){q.cancel(),fe("videoConstraints should be defined");return}var oe={};(!A||C.aspectRatio)&&(oe.aspectRatio=C.aspectRatio);var Ue={onRenderSurfaceReady:function(De,ye){k.setupUi(De,ye,C),k.isScanning=!0,k.foreverScan(C,l,x)}};W2.failIfNotSupported().then(function(De){De.create(ce).then(function(ye){return ye.render(g.element,oe,Ue).then(function(Re){k.renderedCamera=Re,q.execute(),te(null)}).catch(function(Re){q.cancel(),fe(Re)})}).catch(function(ye){q.cancel(),fe(Ma.errorGettingUserMedia(ye))})}).catch(function(De){q.cancel(),fe(Ma.cameraStreamingNotSupported())})})},s.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(On.PAUSED),this.showPausedState(),(fs(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},s.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(On.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},s.prototype.getState=function(){return this.stateManagerProxy.getState()},s.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(On.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var l=function(){if(e.element){var g=document.getElementById(xi.SHADED_REGION_ELEMENT_ID);g&&e.element.removeChild(g)}},h=this;return this.renderedCamera.close().then(function(){return h.renderedCamera=null,h.element&&(h.element.removeChild(h.canvasElement),h.canvasElement=null),l(),h.qrRegion&&(h.qrRegion=null),h.context&&(h.context=null),n.execute(),h.hidePausedState(),h.isScanning=!1,Promise.resolve()})},s.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(l){return l.decodedText})},s.prototype.scanFileV2=function(e,n){var l=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(fs(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(h,g){l.possiblyCloseLastScanImageFile(),l.clearElement(),l.lastScanImageFile=URL.createObjectURL(e);var x=new Image;x.onload=function(){var C=x.width,S=x.height,A=document.getElementById(l.elementId),O=A.clientWidth?A.clientWidth:xi.DEFAULT_WIDTH,k=Math.max(A.clientHeight?A.clientHeight:S,xi.FILE_SCAN_MIN_HEIGHT),q=l.computeCanvasDrawConfig(C,S,O,k);if(n){var te=l.createCanvasElement(O,k,"qr-canvas-visible");te.style.display="inline-block",A.appendChild(te);var fe=te.getContext("2d");if(!fe)throw"Unable to get 2d context from canvas";fe.canvas.width=O,fe.canvas.height=k,fe.drawImage(x,0,0,C,S,q.x,q.y,q.width,q.height)}var ce=xi.FILE_SCAN_HIDDEN_CANVAS_PADDING,oe=Math.max(x.width,q.width),Ue=Math.max(x.height,q.height),De=oe+2*ce,ye=Ue+2*ce,Re=l.createCanvasElement(De,ye);A.appendChild(Re);var At=Re.getContext("2d");if(!At)throw"Unable to get 2d context from canvas";At.canvas.width=De,At.canvas.height=ye,At.drawImage(x,0,0,C,S,ce,ce,oe,Ue);try{l.qrcode.decodeRobustlyAsync(Re).then(function(Le){h(a0.createFromQrcodeResult(Le))}).catch(g)}catch(Le){g("QR code parse error, error = ".concat(Le))}},x.onerror=g,x.onabort=g,x.onstalled=g,x.onsuspend=g,x.src=URL.createObjectURL(e)})},s.prototype.clear=function(){this.clearElement()},s.getCameras=function(){return Y2.retrieve()},s.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},s.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},s.prototype.applyVideoConstraints=function(e){if(e){if(!Tg.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},s.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},s.prototype.getSupportedFormats=function(e){var n=[Fe.QR_CODE,Fe.AZTEC,Fe.CODABAR,Fe.CODE_39,Fe.CODE_93,Fe.CODE_128,Fe.DATA_MATRIX,Fe.MAXICODE,Fe.ITF,Fe.EAN_13,Fe.EAN_8,Fe.PDF_417,Fe.RSS_14,Fe.RSS_EXPANDED,Fe.UPC_A,Fe.UPC_E,Fe.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var l=[],h=0,g=e.formatsToSupport;h<g.length;h++){var x=g[h];N2(x)?l.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(l.length===0)throw"None of formatsToSupport match supported values.";return l},s.prototype.getUseBarCodeDetectorIfSupported=function(e){if(fs(e))return!0;if(!fs(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(fs(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return fs(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},s.prototype.validateQrboxSize=function(e,n,l){var h=this,g=l.qrbox;this.validateQrboxConfig(g);var x=this.toQrdimensions(e,n,g),C=function(A){if(A<xi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(xi.MIN_QR_BOX_SIZE,"px.")},S=function(A){return A>e&&(h.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=e),A};C(x.width),C(x.height),x.width=S(x.width)},s.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},s.prototype.toQrdimensions=function(e,n,l){if(typeof l=="number")return{width:l,height:l};if(typeof l=="function")try{return l(e,n)}catch(h){throw new Error("qrbox config was passed as a function but it failed with unknown error"+h)}return l},s.prototype.setupUi=function(e,n,l){l.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,l);var h=fs(l.qrbox)?{width:e,height:n}:l.qrbox;this.validateQrboxConfig(h);var g=this.toQrdimensions(e,n,h);g.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=l.isShadedBoxEnabled()&&g.height<=n,C={x:0,y:0,width:e,height:n},S=x?this.getShadedRegionBounds(e,n,g):C,A=this.createCanvasElement(S.width,S.height),O={willReadFrequently:!0},k=A.getContext("2d",O);k.canvas.width=S.width,k.canvas.height=S.height,this.element.append(A),x&&this.possiblyInsertShadingElement(this.element,e,n,g),this.createScannerPausedUiElement(this.element),this.qrRegion=S,this.context=k,this.canvasElement=A},s.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Ma.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},s.prototype.scanContext=function(e,n){var l=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(h){return e(h.text,a0.createFromQrcodeResult(h)),l.possiblyUpdateShaders(!0),!0}).catch(function(h){l.possiblyUpdateShaders(!1);var g=Ma.codeParseError(h);return n(g,Cg.createFrom(g)),!1})},s.prototype.foreverScan=function(e,n,l){var h=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),x=g.videoWidth/g.clientWidth,C=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var S=this.qrRegion.width*x,A=this.qrRegion.height*C,O=this.qrRegion.x*x,k=this.qrRegion.y*C;this.context.drawImage(g,O,k,S,A,0,0,this.qrRegion.width,this.qrRegion.height);var q=function(){h.foreverScanTimeout=setTimeout(function(){h.foreverScan(e,n,l)},h.getTimeoutFps(e.fps))};this.scanContext(n,l).then(function(te){!te&&e.disableFlip!==!0?(h.context.translate(h.context.canvas.width,0),h.context.scale(-1,1),h.scanContext(n,l).finally(function(){q()})):q()}).catch(function(te){h.logger.logError("Error happend while scanning context",te),q()})}},s.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",l="deviceId",h={user:!0,environment:!0},g="exact",x=function(fe){if(fe in h)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(fe,"'")},C=Object.keys(e);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var S=Object.keys(e)[0];if(S!==n&&S!==l)throw"Only '".concat(n,"' and '").concat(l,"' ")+" are supported for 'cameraIdOrConfig'";if(S===n){var A=e.facingMode;if(typeof A=="string"){if(x(A))return{facingMode:A}}else if(typeof A=="object")if(g in A){if(x(A["".concat(g)]))return{facingMode:{exact:A["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var O=typeof A;throw"Invalid type of 'facingMode' = ".concat(O)}}else{var k=e.deviceId;if(typeof k=="string")return{deviceId:k};if(typeof k=="object"){if(g in k)return{deviceId:{exact:k["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var q=typeof k;throw"Invalid type of 'deviceId' = ".concat(q)}}}var te=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(te)},s.prototype.computeCanvasDrawConfig=function(e,n,l,h){if(e<=l&&n<=h){var g=(l-e)/2,x=(h-n)/2;return{x:g,y:x,width:e,height:n}}else{var C=e,S=n;return e>l&&(n=l/e*n,e=l),n>h&&(e=h/n*e,n=h),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(S)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,l,h)}},s.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},s.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?xi.BORDER_SHADER_MATCH_COLOR:xi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},s.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},s.prototype.createCanvasElement=function(e,n,l){var h=e,g=n,x=document.createElement("canvas");return x.style.width="".concat(h,"px"),x.style.height="".concat(g,"px"),x.style.display="none",x.id=fs(l)?"qr-canvas":l,x},s.prototype.getShadedRegionBounds=function(e,n,l){if(l.width>e||l.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-l.width)/2,y:(n-l.height)/2,width:l.width,height:l.height}},s.prototype.possiblyInsertShadingElement=function(e,n,l,h){if(!(n-h.width<1||l-h.height<1)){var g=document.createElement("div");g.style.position="absolute";var x=(n-h.width)/2,C=(l-h.height)/2;if(g.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(xi.SHADED_REGION_ELEMENT_ID),n-h.width<11||l-h.height<11)this.hasBorderShaders=!1;else{var S=5,A=40;this.insertShaderBorders(g,A,S,-S,null,0,!0),this.insertShaderBorders(g,A,S,-S,null,0,!1),this.insertShaderBorders(g,A,S,null,-S,0,!0),this.insertShaderBorders(g,A,S,null,-S,0,!1),this.insertShaderBorders(g,S,A+S,-S,null,-S,!0),this.insertShaderBorders(g,S,A+S,null,-S,-S,!0),this.insertShaderBorders(g,S,A+S,-S,null,-S,!1),this.insertShaderBorders(g,S,A+S,null,-S,-S,!1),this.hasBorderShaders=!0}e.append(g)}},s.prototype.insertShaderBorders=function(e,n,l,h,g,x,C){var S=document.createElement("div");S.style.position="absolute",S.style.backgroundColor=xi.BORDER_SHADER_DEFAULT_COLOR,S.style.width="".concat(n,"px"),S.style.height="".concat(l,"px"),h!==null&&(S.style.top="".concat(h,"px")),g!==null&&(S.style.bottom="".concat(g,"px")),C?S.style.left="".concat(x,"px"):S.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(S),e.appendChild(S)},s.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},s.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},s.prototype.getTimeoutFps=function(e){return 1e3/e},s}(),wf="data:image/svg+xml;base64,",J2=wf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",ey=wf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",y0=wf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",ty="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",w0=function(){function s(){}return s.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},s}(),ny=function(){function s(){this.data=w0.createDefault();var e=localStorage.getItem(s.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return s.prototype.hasCameraPermissions=function(){return this.data.hasPermission},s.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},s.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},s.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},s.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},s.prototype.reset=function(){this.data=w0.createDefault(),this.flush()},s.prototype.flush=function(){localStorage.setItem(s.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},s.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",s}(),ry=function(){function s(){this.infoDiv=document.createElement("div")}return s.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=l0.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var l=document.createElement("br"),h=document.createElement("br");this.infoDiv.appendChild(l),this.infoDiv.appendChild(h);var g=document.createElement("a");g.innerText=l0.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),e.appendChild(this.infoDiv)},s.prototype.show=function(){this.infoDiv.style.display="block"},s.prototype.hide=function(){this.infoDiv.style.display="none"},s}(),iy=function(){function s(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return s.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=y0,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(l){return n.onHoverIn()},this.infoIcon.onmouseout=function(l){return n.onHoverOut()},this.infoIcon.onclick=function(l){return n.onClick()},e.appendChild(this.infoIcon)},s.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},s.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},s.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=ty,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=y0,this.infoIcon.style.opacity="0.6")},s}(),sy=function(){function s(){var e=this;this.infoDiv=new ry,this.infoIcon=new iy(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return s.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},s}(),oy=function(s,e,n,l){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function C(O){try{A(l.next(O))}catch(k){x(k)}}function S(O){try{A(l.throw(O))}catch(k){x(k)}}function A(O){O.done?g(O.value):h(O.value).then(C,S)}A((l=l.apply(s,e||[])).next())})},ay=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(A){return function(O){return S([A,O])}}function S(A){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(l=1,h&&(g=A[0]&2?h.return:A[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,A[1])).done)return g;switch(h=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){n.label=A[1];break}if(A[0]===6&&n.label<g[1]){n.label=g[1],g=A;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(A);break}g[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(s,n)}catch(O){A=[6,O],h=0}finally{l=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},x0=function(){function s(){}return s.hasPermissions=function(){return oy(this,void 0,void 0,function(){var e,n,l,h;return ay(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=g.sent(),n=0,l=e;n<l.length;n++)if(h=l[n],h.kind==="videoinput"&&h.label)return[2,!0];return[2,!1]}})})},s}(),mo=function(){function s(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return s.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},s.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},s.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var l=n[e];if(s.isCameraScanType(l))return!0}return!1},s.isCameraScanType=function(e){return e===Io.SCAN_TYPE_CAMERA},s.isFileScanType=function(e){return e===Io.SCAN_TYPE_FILE},s.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return qi.DEFAULT_SUPPORTED_SCAN_TYPE;var n=qi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var l=0,h=e;l<h.length;l++){var g=h[l];if(!qi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return e},s}(),_i=function(){function s(){}return s.ALL_ELEMENT_CLASS="html5-qrcode-element",s.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",s.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",s.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",s.TORCH_BUTTON_ID="html5-qrcode-button-torch",s.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",s.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",s.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",s.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",s.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",s.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",s}(),Fs=function(){function s(){}return s.createElement=function(e,n){var l=document.createElement(e);return l.id=n,l.classList.add(_i.ALL_ELEMENT_CLASS),e==="button"&&l.setAttribute("type","button"),l},s}(),Sg=function(s,e,n,l){function h(g){return g instanceof n?g:new n(function(x){x(g)})}return new(n||(n=Promise))(function(g,x){function C(O){try{A(l.next(O))}catch(k){x(k)}}function S(O){try{A(l.throw(O))}catch(k){x(k)}}function A(O){O.done?g(O.value):h(O.value).then(C,S)}A((l=l.apply(s,e||[])).next())})},Rg=function(s,e){var n={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},l,h,g,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(A){return function(O){return S([A,O])}}function S(A){if(l)throw new TypeError("Generator is already executing.");for(;x&&(x=0,A[0]&&(n=0)),n;)try{if(l=1,h&&(g=A[0]&2?h.return:A[0]?h.throw||((g=h.return)&&g.call(h),0):h.next)&&!(g=g.call(h,A[1])).done)return g;switch(h=0,g&&(A=[A[0]&2,g.value]),A[0]){case 0:case 1:g=A;break;case 4:return n.label++,{value:A[1],done:!1};case 5:n.label++,h=A[1],A=[0];continue;case 7:A=n.ops.pop(),n.trys.pop();continue;default:if(g=n.trys,!(g=g.length>0&&g[g.length-1])&&(A[0]===6||A[0]===2)){n=0;continue}if(A[0]===3&&(!g||A[1]>g[0]&&A[1]<g[3])){n.label=A[1];break}if(A[0]===6&&n.label<g[1]){n.label=g[1],g=A;break}if(g&&n.label<g[2]){n.label=g[2],n.ops.push(A);break}g[2]&&n.ops.pop(),n.trys.pop();continue}A=e.call(s,n)}catch(O){A=[6,O],h=0}finally{l=g=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},E0=function(){function s(e,n,l){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=l}return s.prototype.isTorchEnabled=function(){return this.isTorchOn},s.prototype.flipState=function(){return Sg(this,void 0,void 0,function(){var e,n;return Rg(this,function(l){switch(l.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return l.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=l.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},s.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?Qt.torchOffButton():Qt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},s.prototype.propagateFailure=function(e,n){var l=e?Qt.torchOnFailedMessage():Qt.torchOffFailedMessage();n&&(l+="; Error = "+n),this.onTorchActionFailureCallback(l)},s.prototype.reset=function(){this.isTorchOn=!1},s}(),ly=function(){function s(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Fs.createElement("button",_i.TORCH_BUTTON_ID),this.torchController=new E0(e,this,n)}return s.prototype.render=function(e,n){var l=this;this.torchButton.innerText=Qt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var h=this;this.torchButton.addEventListener("click",function(g){return Sg(l,void 0,void 0,function(){return Rg(this,function(x){switch(x.label){case 0:return[4,h.torchController.flipState()];case 1:return x.sent(),h.torchController.isTorchEnabled()?(h.torchButton.classList.remove(_i.TORCH_BUTTON_CLASS_TORCH_OFF),h.torchButton.classList.add(_i.TORCH_BUTTON_CLASS_TORCH_ON)):(h.torchButton.classList.remove(_i.TORCH_BUTTON_CLASS_TORCH_ON),h.torchButton.classList.add(_i.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},s.prototype.updateTorchCapability=function(e){this.torchController=new E0(e,this,this.onTorchActionFailureCallback)},s.prototype.getTorchButton=function(){return this.torchButton},s.prototype.hide=function(){this.torchButton.style.display="none"},s.prototype.show=function(){this.torchButton.style.display="inline-block"},s.prototype.disable=function(){this.torchButton.disabled=!0},s.prototype.enable=function(){this.torchButton.disabled=!1},s.prototype.setText=function(e){this.torchButton.innerText=e},s.prototype.reset=function(){this.torchButton.innerText=Qt.torchOnButton(),this.torchController.reset()},s.create=function(e,n,l,h){var g=new s(n,h);return g.render(e,l),g},s}(),uy=function(){function s(e,n,l){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var h=document.createElement("label");h.setAttribute("for",this.getFileScanInputId()),h.style.display="inline-block",this.fileBasedScanRegion.appendChild(h),this.fileSelectionButton=Fs.createElement("button",_i.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(C){h.click()}),h.append(this.fileSelectionButton),this.fileScanInput=Fs.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",h.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(C){if(!(C==null||C.target==null)){var S=C.target;if(!(S.files&&S.files.length===0)){var A=S.files,O=A[0],k=O.name;g.setImageNameToButton(k),l(O)}}});var x=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(x),this.fileBasedScanRegion.addEventListener("dragenter",function(C){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(C){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(C){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),C.stopPropagation(),C.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(C){C.stopPropagation(),C.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var S=C.dataTransfer;if(S){var A=S.files;if(!A||A.length===0)return;for(var O=!1,k=0;k<A.length;++k){var q=A.item(k);if(q){var te=/image.*/;if(q.type.match(te)){O=!0;var fe=q.name;g.setImageNameToButton(fe),l(q),x.innerText=Qt.dragAndDropMessage();break}}}O||(x.innerText=Qt.dragAndDropMessageOnlyImages())}})}return s.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},s.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},s.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},s.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},s.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},s.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},s.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},s.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Qt.dragAndDropMessage(),e.style.fontWeight="400",e},s.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var l=e.substring(0,8),h=e.length,g=e.substring(h-8,h);e="".concat(l,"....").concat(g)}var x=Qt.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=x},s.prototype.setInitialValueToButton=function(){var e=Qt.fileSelectionChooseImage()+" - "+Qt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},s.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},s.create=function(e,n,l){var h=new s(e,n,l);return h},s}(),cy=function(){function s(e){this.selectElement=Fs.createElement("select",_i.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return s.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var l=this.cameras.length;if(l===0)throw new Error("No cameras found");if(l===1)n.style.display="none";else{var h=Qt.selectCamera();n.innerText="".concat(h," (").concat(this.cameras.length,")  ")}for(var g=1,x=0,C=this.cameras;x<C.length;x++){var S=C[x],A=S.id,O=S.label==null?A:S.label;(!O||O==="")&&(O=[Qt.anonymousCameraPrefix(),g++].join(" "));var k=document.createElement("option");k.value=A,k.innerText=O,this.options.push(k),this.selectElement.appendChild(k)}n.appendChild(this.selectElement),e.appendChild(n)},s.prototype.disable=function(){this.selectElement.disabled=!0},s.prototype.isDisabled=function(){return this.selectElement.disabled===!0},s.prototype.enable=function(){this.selectElement.disabled=!1},s.prototype.getValue=function(){return this.selectElement.value},s.prototype.hasValue=function(e){for(var n=0,l=this.options;n<l.length;n++){var h=l[n];if(h.value===e)return!0}return!1},s.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},s.prototype.hasSingleItem=function(){return this.cameras.length===1},s.prototype.numCameras=function(){return this.cameras.length},s.create=function(e,n){var l=new s(n);return l.render(e),l},s}(),hy=function(){function s(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Fs.createElement("input",_i.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return s.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var l=Qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(l),this.rangeText.style.marginRight="10px";var h=this;this.rangeInput.addEventListener("input",function(){return h.onValueChange()}),this.rangeInput.addEventListener("change",function(){return h.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},s.prototype.onValueChange=function(){var e=Qt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},s.prototype.setValues=function(e,n,l,h){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=h.toString(),this.rangeInput.value=l.toString(),this.onValueChange()},s.prototype.show=function(){this.zoomElementContainer.style.display="block"},s.prototype.hide=function(){this.zoomElementContainer.style.display="none"},s.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},s.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},s.create=function(e,n){var l=new s;return l.render(e,n),l},s}(),Ei;(function(s){s[s.STATUS_DEFAULT=0]="STATUS_DEFAULT",s[s.STATUS_SUCCESS=1]="STATUS_SUCCESS",s[s.STATUS_WARNING=2]="STATUS_WARNING",s[s.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ei||(Ei={}));function fy(s){return{fps:s.fps,qrbox:s.qrbox,aspectRatio:s.aspectRatio,disableFlip:s.disableFlip,videoConstraints:s.videoConstraints}}function dy(s,e){return{formatsToSupport:s.formatsToSupport,useBarCodeDetectorIfSupported:s.useBarCodeDetectorIfSupported,experimentalFeatures:s.experimentalFeatures,verbose:e}}var gy=function(){function s(e,n,l){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=l===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new mo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Ig(this.verbose),this.persistedDataManager=new ny,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return s.prototype.render=function(e,n){var l=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,x){if(e)e(g,x);else{if(l.lastMatchFound===g)return;l.lastMatchFound=g,l.setHeaderMessage(Qt.lastMatch(g),Ei.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,x){n&&n(g,x)};var h=document.getElementById(this.elementId);if(!h)throw"HTML Element with id=".concat(this.elementId," not found");h.innerHTML="",this.createBasicLayout(h),this.html5Qrcode=new m0(this.getScanRegionId(),dy(this.config,this.verbose))},s.prototype.pause=function(e){(fs(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},s.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},s.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},s.prototype.clear=function(){var e=this,n=function(){var l=document.getElementById(e.elementId);l&&(l.innerHTML="",e.resetBasicLayout(l))};return this.html5Qrcode?new Promise(function(l,h){if(!e.html5Qrcode){l();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(g){if(!e.html5Qrcode){l();return}e.html5Qrcode.clear(),n(),l()}).catch(function(g){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",g),h(g)}):(e.html5Qrcode.clear(),n(),l())}):Promise.resolve()},s.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},s.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},s.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},s.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},s.prototype.createConfig=function(e){return e?(e.fps||(e.fps=qi.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!qi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=qi.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=qi.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:qi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:qi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:qi.DEFAULT_SUPPORTED_SCAN_TYPE}},s.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),l=this.getScanRegionId();n.id=l,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),mo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var h=document.createElement("div"),g=this.getDashboardId();h.id=g,h.style.width="100%",e.appendChild(h),this.setupInitialDashboard(h)},s.prototype.resetBasicLayout=function(e){e.style.border="none"},s.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},s.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var l=new sy;l.renderInto(n);var h=document.createElement("div");h.id=this.getHeaderMessageContainerId(),h.style.display="none",h.style.textAlign="center",h.style.fontSize="14px",h.style.padding="2px 10px",h.style.margin="4px",h.style.borderTop="1px solid #f6f6f6",n.appendChild(h)},s.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},s.prototype.createCameraListUi=function(e,n,l){var h=this;h.showHideScanTypeSwapLink(!1),h.setHeaderMessage(Qt.cameraPermissionRequesting());var g=function(){l||h.createPermissionButton(e,n)};m0.getCameras().then(function(x){h.persistedDataManager.setHasPermission(!0),h.showHideScanTypeSwapLink(!0),h.resetHeaderMessage(),x&&x.length>0?(e.removeChild(n),h.renderCameraSelection(x)):(h.setHeaderMessage(Qt.noCameraFound(),Ei.STATUS_WARNING),g())}).catch(function(x){h.persistedDataManager.setHasPermission(!1),l?l.disabled=!1:g(),h.setHeaderMessage(x,Ei.STATUS_WARNING),h.showHideScanTypeSwapLink(!0)})},s.prototype.createPermissionButton=function(e,n){var l=this,h=Fs.createElement("button",this.getCameraPermissionButtonId());h.innerText=Qt.cameraPermissionTitle(),h.addEventListener("click",function(){h.disabled=!0,l.createCameraListUi(e,n,h)}),n.appendChild(h)},s.prototype.createPermissionsUi=function(e,n){var l=this;if(mo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){x0.hasPermissions().then(function(h){h?l.createCameraListUi(e,n):(l.persistedDataManager.setHasPermission(!1),l.createPermissionButton(e,n))}).catch(function(h){l.persistedDataManager.setHasPermission(!1),l.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},s.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var l=document.createElement("div");l.id=this.getDashboardSectionCameraScanRegionId(),l.style.display=mo.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(l);var h=document.createElement("div");h.style.textAlign="center",l.appendChild(h),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(l,h),this.renderFileScanUi(n)},s.prototype.renderFileScanUi=function(e){var n=mo.isFileScanType(this.currentScanType),l=this,h=function(g){if(!l.html5Qrcode)throw"html5Qrcode not defined";mo.isFileScanType(l.currentScanType)&&(l.setHeaderMessage(Qt.loadingImage()),l.html5Qrcode.scanFileV2(g,!0).then(function(x){l.resetHeaderMessage(),l.qrCodeSuccessCallback(x.decodedText,x)}).catch(function(x){l.setHeaderMessage(x,Ei.STATUS_WARNING),l.qrCodeErrorCallback(x,Cg.createFrom(x))}))};this.fileSelectionUi=uy.create(e,n,h)},s.prototype.renderCameraSelection=function(e){var n=this,l=this,h=document.getElementById(this.getDashboardSectionCameraScanRegionId());h.style.textAlign="center";var g=hy.create(h,!1),x=function(ce){var oe=ce.zoomFeature();if(oe.isSupported()){g.setOnCameraZoomValueChangeCallback(function(De){oe.apply(De)});var Ue=1;n.config.defaultZoomValueIfSupported&&(Ue=n.config.defaultZoomValueIfSupported),Ue=D2(Ue,oe.min(),oe.max()),g.setValues(oe.min(),oe.max(),Ue,oe.step()),g.show()}},C=cy.create(h,e),S=document.createElement("span"),A=Fs.createElement("button",_i.CAMERA_START_BUTTON_ID);A.innerText=Qt.scanButtonStartScanningText(),S.appendChild(A);var O=Fs.createElement("button",_i.CAMERA_STOP_BUTTON_ID);O.innerText=Qt.scanButtonStopScanningText(),O.style.display="none",O.disabled=!0,S.appendChild(O);var k,q=function(ce){if(!ce.torchFeature().isSupported()){k&&k.hide();return}k?k.updateTorchCapability(ce.torchFeature()):k=ly.create(S,ce.torchFeature(),{display:"none",marginLeft:"5px"},function(oe){l.setHeaderMessage(oe,Ei.STATUS_WARNING)}),k.show()};h.appendChild(S);var te=function(ce){ce||(A.style.display="none"),A.innerText=Qt.scanButtonStartScanningText(),A.style.opacity="1",A.disabled=!1,ce&&(A.style.display="inline-block")};if(A.addEventListener("click",function(ce){A.innerText=Qt.scanButtonScanningStarting(),C.disable(),A.disabled=!0,A.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&l.showHideScanTypeSwapLink(!1),l.resetHeaderMessage();var oe=C.getValue();l.persistedDataManager.setLastUsedCameraId(oe),l.html5Qrcode.start(oe,fy(l.config),l.qrCodeSuccessCallback,l.qrCodeErrorCallback).then(function(Ue){O.disabled=!1,O.style.display="inline-block",te(!1);var De=l.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&q(De),n.config.showZoomSliderIfSupported===!0&&x(De)}).catch(function(Ue){l.showHideScanTypeSwapLink(!0),C.enable(),te(!0),l.setHeaderMessage(Ue,Ei.STATUS_WARNING)})}),C.hasSingleItem()&&A.click(),O.addEventListener("click",function(ce){if(!l.html5Qrcode)throw"html5Qrcode not defined";O.disabled=!0,l.html5Qrcode.stop().then(function(oe){n.scanTypeSelector.hasMoreThanOneScanType()&&l.showHideScanTypeSwapLink(!0),C.enable(),A.disabled=!1,O.style.display="none",A.style.display="inline-block",k&&(k.reset(),k.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),l.insertCameraScanImageToScanRegion()}).catch(function(oe){O.disabled=!1,l.setHeaderMessage(oe,Ei.STATUS_WARNING)})}),l.persistedDataManager.getLastUsedCameraId()){var fe=l.persistedDataManager.getLastUsedCameraId();C.hasValue(fe)?(C.setValue(fe),A.click()):l.persistedDataManager.resetLastUsedCameraId()}},s.prototype.createSectionSwap=function(){var e=this,n=Qt.textIfCameraScanSelected(),l=Qt.textIfFileScanSelected(),h=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var x=Fs.createElement("span",this.getDashboardSectionSwapLinkId());x.style.textDecoration="underline",x.style.cursor="pointer",x.innerText=mo.isCameraScanType(this.currentScanType)?n:l,x.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,mo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),x.innerText=l,e.currentScanType=Io.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),x.innerText=n,e.currentScanType=Io.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),g.appendChild(x),h.appendChild(g)},s.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){x0.hasPermissions().then(function(l){if(l){var h=document.getElementById(n.getCameraPermissionButtonId());if(!h)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";h.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(l){n.persistedDataManager.setHasPermission(!1)});return}},s.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},s.prototype.setHeaderMessage=function(e,n){n||(n=Ei.STATUS_DEFAULT);var l=this.getHeaderMessageDiv();switch(l.innerText=e,l.style.display="block",n){case Ei.STATUS_SUCCESS:l.style.background="rgba(106, 175, 80, 0.26)",l.style.color="#477735";break;case Ei.STATUS_WARNING:l.style.background="rgba(203, 36, 49, 0.14)",l.style.color="#cb2431";break;case Ei.STATUS_DEFAULT:default:l.style.background="rgba(0, 0, 0, 0)",l.style.color="rgb(17, 17, 17)";break}},s.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},s.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(l){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=J2,this.cameraScanImage.alt=Qt.cameraScanAltText()},s.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(l){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=ey,this.fileScanImage.alt=Qt.fileScanAltText()},s.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},s.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},s.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},s.prototype.getDashboardSectionSwapLinkId=function(){return _i.SCAN_TYPE_CHANGE_ANCHOR_ID},s.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},s.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},s.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},s.prototype.getCameraPermissionButtonId=function(){return _i.CAMERA_PERMISSION_BUTTON_ID},s.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},s.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},s.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},s}(),_0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng=function(s){const e=[];let n=0;for(let l=0;l<s.length;l++){let h=s.charCodeAt(l);h<128?e[n++]=h:h<2048?(e[n++]=h>>6|192,e[n++]=h&63|128):(h&64512)===55296&&l+1<s.length&&(s.charCodeAt(l+1)&64512)===56320?(h=65536+((h&1023)<<10)+(s.charCodeAt(++l)&1023),e[n++]=h>>18|240,e[n++]=h>>12&63|128,e[n++]=h>>6&63|128,e[n++]=h&63|128):(e[n++]=h>>12|224,e[n++]=h>>6&63|128,e[n++]=h&63|128)}return e},py=function(s){const e=[];let n=0,l=0;for(;n<s.length;){const h=s[n++];if(h<128)e[l++]=String.fromCharCode(h);else if(h>191&&h<224){const g=s[n++];e[l++]=String.fromCharCode((h&31)<<6|g&63)}else if(h>239&&h<365){const g=s[n++],x=s[n++],C=s[n++],S=((h&7)<<18|(g&63)<<12|(x&63)<<6|C&63)-65536;e[l++]=String.fromCharCode(55296+(S>>10)),e[l++]=String.fromCharCode(56320+(S&1023))}else{const g=s[n++],x=s[n++];e[l++]=String.fromCharCode((h&15)<<12|(g&63)<<6|x&63)}}return e.join("")},Dg={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,e){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,l=[];for(let h=0;h<s.length;h+=3){const g=s[h],x=h+1<s.length,C=x?s[h+1]:0,S=h+2<s.length,A=S?s[h+2]:0,O=g>>2,k=(g&3)<<4|C>>4;let q=(C&15)<<2|A>>6,te=A&63;S||(te=64,x||(q=64)),l.push(n[O],n[k],n[q],n[te])}return l.join("")},encodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(s):this.encodeByteArray(Ng(s),e)},decodeString(s,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(s):py(this.decodeStringToByteArray(s,e))},decodeStringToByteArray(s,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,l=[];for(let h=0;h<s.length;){const g=n[s.charAt(h++)],C=h<s.length?n[s.charAt(h)]:0;++h;const A=h<s.length?n[s.charAt(h)]:64;++h;const k=h<s.length?n[s.charAt(h)]:64;if(++h,g==null||C==null||A==null||k==null)throw new my;const q=g<<2|C>>4;if(l.push(q),A!==64){const te=C<<4&240|A>>2;if(l.push(te),k!==64){const fe=A<<6&192|k;l.push(fe)}}}return l},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class my extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const yy=function(s){const e=Ng(s);return Dg.encodeByteArray(e,!0)},Yu=function(s){return yy(s).replace(/\./g,"")},wy=function(s){try{return Dg.decodeString(s,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ey=()=>xy().__FIREBASE_DEFAULTS__,_y=()=>{if(typeof process>"u"||typeof _0>"u")return;const s=_0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},Ay=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=s&&wy(s[1]);return e&&JSON.parse(e)},xf=()=>{try{return Ey()||_y()||Ay()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},Cy=s=>{var e,n;return(n=(e=xf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[s]},bg=s=>{const e=Cy(s);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const l=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),l]:[e.substring(0,n),l]},Og=()=>{var s;return(s=xf())===null||s===void 0?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,l)=>{n?this.reject(n):this.resolve(l),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,l))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(s,e){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},l=e||"demo-project",h=s.iat||0,g=s.sub||s.user_id;if(!g)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const x=Object.assign({iss:`https://securetoken.google.com/${l}`,aud:l,iat:h,exp:h+3600,auth_time:h,sub:g,user_id:g,firebase:{sign_in_provider:"custom",identities:{}}},s);return[Yu(JSON.stringify(n)),Yu(JSON.stringify(x)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ty(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function vy(){var s;const e=(s=xf())===null||s===void 0?void 0:s.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Sy(){return!vy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ry(){try{return typeof indexedDB=="object"}catch{return!1}}function Ny(){return new Promise((s,e)=>{try{let n=!0;const l="validate-browser-context-for-indexeddb-analytics-module",h=self.indexedDB.open(l);h.onsuccess=()=>{h.result.close(),n||self.indexedDB.deleteDatabase(l),s(!0)},h.onupgradeneeded=()=>{n=!1},h.onerror=()=>{var g;e(((g=h.error)===null||g===void 0?void 0:g.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dy="FirebaseError";class ea extends Error{constructor(e,n,l){super(n),this.code=e,this.customData=l,this.name=Dy,Object.setPrototypeOf(this,ea.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pg.prototype.create)}}class Pg{constructor(e,n,l){this.service=e,this.serviceName=n,this.errors=l}create(e,...n){const l=n[0]||{},h=`${this.service}/${e}`,g=this.errors[e],x=g?by(g,l):"Error",C=`${this.serviceName}: ${x} (${h}).`;return new ea(h,C,l)}}function by(s,e){return s.replace(Oy,(n,l)=>{const h=e[l];return h!=null?String(h):`<${l}?>`})}const Oy=/\{\$([^}]+)}/g;function Qh(s,e){if(s===e)return!0;const n=Object.keys(s),l=Object.keys(e);for(const h of n){if(!l.includes(h))return!1;const g=s[h],x=e[h];if(A0(g)&&A0(x)){if(!Qh(g,x))return!1}else if(g!==x)return!1}for(const h of l)if(!n.includes(h))return!1;return!0}function A0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Us(s){return s&&s._delegate?s._delegate:s}class ka{constructor(e,n,l){this.name=e,this.instanceFactory=n,this.type=l,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const l=new Iy;if(this.instancesDeferred.set(n,l),this.isInitialized(n)||this.shouldAutoInitialize())try{const h=this.getOrInitializeService({instanceIdentifier:n});h&&l.resolve(h)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const l=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),h=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(l)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:l})}catch(g){if(h)return null;throw g}else{if(h)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ky(e))try{this.getOrInitializeService({instanceIdentifier:Qo})}catch{}for(const[n,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(n);try{const g=this.getOrInitializeService({instanceIdentifier:h});l.resolve(g)}catch{}}}}clearInstance(e=Qo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qo){return this.instances.has(e)}getOptions(e=Qo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,l=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(l))throw Error(`${this.name}(${l}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const h=this.getOrInitializeService({instanceIdentifier:l,options:n});for(const[g,x]of this.instancesDeferred.entries()){const C=this.normalizeInstanceIdentifier(g);l===C&&x.resolve(h)}return h}onInit(e,n){var l;const h=this.normalizeInstanceIdentifier(n),g=(l=this.onInitCallbacks.get(h))!==null&&l!==void 0?l:new Set;g.add(e),this.onInitCallbacks.set(h,g);const x=this.instances.get(h);return x&&e(x,h),()=>{g.delete(e)}}invokeOnInitCallbacks(e,n){const l=this.onInitCallbacks.get(n);if(l)for(const h of l)try{h(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let l=this.instances.get(e);if(!l&&this.component&&(l=this.component.instanceFactory(this.container,{instanceIdentifier:Py(e),options:n}),this.instances.set(e,l),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(l,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,l)}catch{}return l||null}normalizeInstanceIdentifier(e=Qo){return this.component?this.component.multipleInstances?e:Qo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Py(s){return s===Qo?void 0:s}function ky(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new My(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ot;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Ot||(Ot={}));const By={debug:Ot.DEBUG,verbose:Ot.VERBOSE,info:Ot.INFO,warn:Ot.WARN,error:Ot.ERROR,silent:Ot.SILENT},Fy=Ot.INFO,Vy={[Ot.DEBUG]:"log",[Ot.VERBOSE]:"log",[Ot.INFO]:"info",[Ot.WARN]:"warn",[Ot.ERROR]:"error"},Uy=(s,e,...n)=>{if(e<s.logLevel)return;const l=new Date().toISOString(),h=Vy[e];if(h)console[h](`[${l}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kg{constructor(e){this.name=e,this._logLevel=Fy,this._logHandler=Uy,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ot))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?By[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ot.DEBUG,...e),this._logHandler(this,Ot.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ot.VERBOSE,...e),this._logHandler(this,Ot.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ot.INFO,...e),this._logHandler(this,Ot.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ot.WARN,...e),this._logHandler(this,Ot.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ot.ERROR,...e),this._logHandler(this,Ot.ERROR,...e)}}const zy=(s,e)=>e.some(n=>s instanceof n);let C0,I0;function jy(){return C0||(C0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hy(){return I0||(I0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lg=new WeakMap,qh=new WeakMap,Bg=new WeakMap,Bh=new WeakMap,Ef=new WeakMap;function Wy(s){const e=new Promise((n,l)=>{const h=()=>{s.removeEventListener("success",g),s.removeEventListener("error",x)},g=()=>{n(xo(s.result)),h()},x=()=>{l(s.error),h()};s.addEventListener("success",g),s.addEventListener("error",x)});return e.then(n=>{n instanceof IDBCursor&&Lg.set(n,s)}).catch(()=>{}),Ef.set(e,s),e}function Gy(s){if(qh.has(s))return;const e=new Promise((n,l)=>{const h=()=>{s.removeEventListener("complete",g),s.removeEventListener("error",x),s.removeEventListener("abort",x)},g=()=>{n(),h()},x=()=>{l(s.error||new DOMException("AbortError","AbortError")),h()};s.addEventListener("complete",g),s.addEventListener("error",x),s.addEventListener("abort",x)});qh.set(s,e)}let Kh={get(s,e,n){if(s instanceof IDBTransaction){if(e==="done")return qh.get(s);if(e==="objectStoreNames")return s.objectStoreNames||Bg.get(s);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xo(s[e])},set(s,e,n){return s[e]=n,!0},has(s,e){return s instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in s}};function Xy(s){Kh=s(Kh)}function Yy(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const l=s.call(Fh(this),e,...n);return Bg.set(l,e.sort?e.sort():[e]),xo(l)}:Hy().includes(s)?function(...e){return s.apply(Fh(this),e),xo(Lg.get(this))}:function(...e){return xo(s.apply(Fh(this),e))}}function Qy(s){return typeof s=="function"?Yy(s):(s instanceof IDBTransaction&&Gy(s),zy(s,jy())?new Proxy(s,Kh):s)}function xo(s){if(s instanceof IDBRequest)return Wy(s);if(Bh.has(s))return Bh.get(s);const e=Qy(s);return e!==s&&(Bh.set(s,e),Ef.set(e,s)),e}const Fh=s=>Ef.get(s);function qy(s,e,{blocked:n,upgrade:l,blocking:h,terminated:g}={}){const x=indexedDB.open(s,e),C=xo(x);return l&&x.addEventListener("upgradeneeded",S=>{l(xo(x.result),S.oldVersion,S.newVersion,xo(x.transaction),S)}),n&&x.addEventListener("blocked",S=>n(S.oldVersion,S.newVersion,S)),C.then(S=>{g&&S.addEventListener("close",()=>g()),h&&S.addEventListener("versionchange",A=>h(A.oldVersion,A.newVersion,A))}).catch(()=>{}),C}const Ky=["get","getKey","getAll","getAllKeys","count"],Zy=["put","add","delete","clear"],Vh=new Map;function T0(s,e){if(!(s instanceof IDBDatabase&&!(e in s)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const n=e.replace(/FromIndex$/,""),l=e!==n,h=Zy.includes(n);if(!(n in(l?IDBIndex:IDBObjectStore).prototype)||!(h||Ky.includes(n)))return;const g=async function(x,...C){const S=this.transaction(x,h?"readwrite":"readonly");let A=S.store;return l&&(A=A.index(C.shift())),(await Promise.all([A[n](...C),h&&S.done]))[0]};return Vh.set(e,g),g}Xy(s=>({...s,get:(e,n,l)=>T0(e,n)||s.get(e,n,l),has:(e,n)=>!!T0(e,n)||s.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Jy(n)){const l=n.getImmediate();return`${l.library}/${l.version}`}else return null}).filter(n=>n).join(" ")}}function Jy(s){const e=s.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Zh="@firebase/app",v0="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=new kg("@firebase/app"),ew="@firebase/app-compat",tw="@firebase/analytics-compat",nw="@firebase/analytics",rw="@firebase/app-check-compat",iw="@firebase/app-check",sw="@firebase/auth",ow="@firebase/auth-compat",aw="@firebase/database",lw="@firebase/data-connect",uw="@firebase/database-compat",cw="@firebase/functions",hw="@firebase/functions-compat",fw="@firebase/installations",dw="@firebase/installations-compat",gw="@firebase/messaging",pw="@firebase/messaging-compat",mw="@firebase/performance",yw="@firebase/performance-compat",ww="@firebase/remote-config",xw="@firebase/remote-config-compat",Ew="@firebase/storage",_w="@firebase/storage-compat",Aw="@firebase/firestore",Cw="@firebase/vertexai",Iw="@firebase/firestore-compat",Tw="firebase",vw="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h="[DEFAULT]",Sw={[Zh]:"fire-core",[ew]:"fire-core-compat",[nw]:"fire-analytics",[tw]:"fire-analytics-compat",[iw]:"fire-app-check",[rw]:"fire-app-check-compat",[sw]:"fire-auth",[ow]:"fire-auth-compat",[aw]:"fire-rtdb",[lw]:"fire-data-connect",[uw]:"fire-rtdb-compat",[cw]:"fire-fn",[hw]:"fire-fn-compat",[fw]:"fire-iid",[dw]:"fire-iid-compat",[gw]:"fire-fcm",[pw]:"fire-fcm-compat",[mw]:"fire-perf",[yw]:"fire-perf-compat",[ww]:"fire-rc",[xw]:"fire-rc-compat",[Ew]:"fire-gcs",[_w]:"fire-gcs-compat",[Aw]:"fire-fst",[Iw]:"fire-fst-compat",[Cw]:"fire-vertex","fire-js":"fire-js",[Tw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,Rw=new Map,Jh=new Map;function S0(s,e){try{s.container.addComponent(e)}catch(n){zs.debug(`Component ${e.name} failed to register with FirebaseApp ${s.name}`,n)}}function Sl(s){const e=s.name;if(Jh.has(e))return zs.debug(`There were multiple attempts to register component ${e}.`),!1;Jh.set(e,s);for(const n of Qu.values())S0(n,s);for(const n of Rw.values())S0(n,s);return!0}function Fg(s,e){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Eo=new Pg("app","Firebase",Nw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,n,l){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=l,this.container.addComponent(new ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Eo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=vw;function _f(s,e={}){let n=s;typeof e!="object"&&(e={name:e});const l=Object.assign({name:$h,automaticDataCollectionEnabled:!1},e),h=l.name;if(typeof h!="string"||!h)throw Eo.create("bad-app-name",{appName:String(h)});if(n||(n=Og()),!n)throw Eo.create("no-options");const g=Qu.get(h);if(g){if(Qh(n,g.options)&&Qh(l,g.config))return g;throw Eo.create("duplicate-app",{appName:h})}const x=new Ly(h);for(const S of Jh.values())x.addComponent(S);const C=new Dw(n,l,x);return Qu.set(h,C),C}function Ug(s=$h){const e=Qu.get(s);if(!e&&s===$h&&Og())return _f();if(!e)throw Eo.create("no-app",{appName:s});return e}function _o(s,e,n){var l;let h=(l=Sw[s])!==null&&l!==void 0?l:s;n&&(h+=`-${n}`);const g=h.match(/\s|\//),x=e.match(/\s|\//);if(g||x){const C=[`Unable to register library "${h}" with version "${e}":`];g&&C.push(`library name "${h}" contains illegal characters (whitespace or "/")`),g&&x&&C.push("and"),x&&C.push(`version name "${e}" contains illegal characters (whitespace or "/")`),zs.warn(C.join(" "));return}Sl(new ka(`${h}-version`,()=>({library:h,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw="firebase-heartbeat-database",Ow=1,Rl="firebase-heartbeat-store";let Uh=null;function zg(){return Uh||(Uh=qy(bw,Ow,{upgrade:(s,e)=>{switch(e){case 0:try{s.createObjectStore(Rl)}catch(n){console.warn(n)}}}}).catch(s=>{throw Eo.create("idb-open",{originalErrorMessage:s.message})})),Uh}async function Mw(s){try{const n=(await zg()).transaction(Rl),l=await n.objectStore(Rl).get(jg(s));return await n.done,l}catch(e){if(e instanceof ea)zs.warn(e.message);else{const n=Eo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});zs.warn(n.message)}}}async function R0(s,e){try{const l=(await zg()).transaction(Rl,"readwrite");await l.objectStore(Rl).put(e,jg(s)),await l.done}catch(n){if(n instanceof ea)zs.warn(n.message);else{const l=Eo.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zs.warn(l.message)}}}function jg(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pw=1024,kw=30*24*60*60*1e3;class Lw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Fw(n),this._heartbeatsCachePromise=this._storage.read().then(l=>(this._heartbeatsCache=l,l))}async triggerHeartbeat(){var e,n;try{const h=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),g=N0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===g||this._heartbeatsCache.heartbeats.some(x=>x.date===g)?void 0:(this._heartbeatsCache.heartbeats.push({date:g,agent:h}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(x=>{const C=new Date(x.date).valueOf();return Date.now()-C<=kw}),this._storage.overwrite(this._heartbeatsCache))}catch(l){zs.warn(l)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=N0(),{heartbeatsToSend:l,unsentEntries:h}=Bw(this._heartbeatsCache.heartbeats),g=Yu(JSON.stringify({version:2,heartbeats:l}));return this._heartbeatsCache.lastSentHeartbeatDate=n,h.length>0?(this._heartbeatsCache.heartbeats=h,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),g}catch(n){return zs.warn(n),""}}}function N0(){return new Date().toISOString().substring(0,10)}function Bw(s,e=Pw){const n=[];let l=s.slice();for(const h of s){const g=n.find(x=>x.agent===h.agent);if(g){if(g.dates.push(h.date),D0(n)>e){g.dates.pop();break}}else if(n.push({agent:h.agent,dates:[h.date]}),D0(n)>e){n.pop();break}l=l.slice(1)}return{heartbeatsToSend:n,unsentEntries:l}}class Fw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ry()?Ny().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Mw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const h=await this.read();return R0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:h.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const h=await this.read();return R0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:h.lastSentHeartbeatDate,heartbeats:[...h.heartbeats,...e.heartbeats]})}else return}}function D0(s){return Yu(JSON.stringify({version:2,heartbeats:s})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(s){Sl(new ka("platform-logger",e=>new $y(e),"PRIVATE")),Sl(new ka("heartbeat",e=>new Lw(e),"PRIVATE")),_o(Zh,v0,s),_o(Zh,v0,"esm2017"),_o("fire-js","")}Vw("");var Uw="firebase",zw="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_o(Uw,zw,"app");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ko,Hg;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(U,F){function P(){}P.prototype=F.prototype,U.D=F.prototype,U.prototype=new P,U.prototype.constructor=U,U.C=function(W,Y,H){for(var z=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)z[ot-2]=arguments[ot];return F.prototype[Y].apply(W,z)}}function n(){this.blockSize=-1}function l(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(l,n),l.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function h(U,F,P){P||(P=0);var W=Array(16);if(typeof F=="string")for(var Y=0;16>Y;++Y)W[Y]=F.charCodeAt(P++)|F.charCodeAt(P++)<<8|F.charCodeAt(P++)<<16|F.charCodeAt(P++)<<24;else for(Y=0;16>Y;++Y)W[Y]=F[P++]|F[P++]<<8|F[P++]<<16|F[P++]<<24;F=U.g[0],P=U.g[1],Y=U.g[2];var H=U.g[3],z=F+(H^P&(Y^H))+W[0]+3614090360&4294967295;F=P+(z<<7&4294967295|z>>>25),z=H+(Y^F&(P^Y))+W[1]+3905402710&4294967295,H=F+(z<<12&4294967295|z>>>20),z=Y+(P^H&(F^P))+W[2]+606105819&4294967295,Y=H+(z<<17&4294967295|z>>>15),z=P+(F^Y&(H^F))+W[3]+3250441966&4294967295,P=Y+(z<<22&4294967295|z>>>10),z=F+(H^P&(Y^H))+W[4]+4118548399&4294967295,F=P+(z<<7&4294967295|z>>>25),z=H+(Y^F&(P^Y))+W[5]+1200080426&4294967295,H=F+(z<<12&4294967295|z>>>20),z=Y+(P^H&(F^P))+W[6]+2821735955&4294967295,Y=H+(z<<17&4294967295|z>>>15),z=P+(F^Y&(H^F))+W[7]+4249261313&4294967295,P=Y+(z<<22&4294967295|z>>>10),z=F+(H^P&(Y^H))+W[8]+1770035416&4294967295,F=P+(z<<7&4294967295|z>>>25),z=H+(Y^F&(P^Y))+W[9]+2336552879&4294967295,H=F+(z<<12&4294967295|z>>>20),z=Y+(P^H&(F^P))+W[10]+4294925233&4294967295,Y=H+(z<<17&4294967295|z>>>15),z=P+(F^Y&(H^F))+W[11]+2304563134&4294967295,P=Y+(z<<22&4294967295|z>>>10),z=F+(H^P&(Y^H))+W[12]+1804603682&4294967295,F=P+(z<<7&4294967295|z>>>25),z=H+(Y^F&(P^Y))+W[13]+4254626195&4294967295,H=F+(z<<12&4294967295|z>>>20),z=Y+(P^H&(F^P))+W[14]+2792965006&4294967295,Y=H+(z<<17&4294967295|z>>>15),z=P+(F^Y&(H^F))+W[15]+1236535329&4294967295,P=Y+(z<<22&4294967295|z>>>10),z=F+(Y^H&(P^Y))+W[1]+4129170786&4294967295,F=P+(z<<5&4294967295|z>>>27),z=H+(P^Y&(F^P))+W[6]+3225465664&4294967295,H=F+(z<<9&4294967295|z>>>23),z=Y+(F^P&(H^F))+W[11]+643717713&4294967295,Y=H+(z<<14&4294967295|z>>>18),z=P+(H^F&(Y^H))+W[0]+3921069994&4294967295,P=Y+(z<<20&4294967295|z>>>12),z=F+(Y^H&(P^Y))+W[5]+3593408605&4294967295,F=P+(z<<5&4294967295|z>>>27),z=H+(P^Y&(F^P))+W[10]+38016083&4294967295,H=F+(z<<9&4294967295|z>>>23),z=Y+(F^P&(H^F))+W[15]+3634488961&4294967295,Y=H+(z<<14&4294967295|z>>>18),z=P+(H^F&(Y^H))+W[4]+3889429448&4294967295,P=Y+(z<<20&4294967295|z>>>12),z=F+(Y^H&(P^Y))+W[9]+568446438&4294967295,F=P+(z<<5&4294967295|z>>>27),z=H+(P^Y&(F^P))+W[14]+3275163606&4294967295,H=F+(z<<9&4294967295|z>>>23),z=Y+(F^P&(H^F))+W[3]+4107603335&4294967295,Y=H+(z<<14&4294967295|z>>>18),z=P+(H^F&(Y^H))+W[8]+1163531501&4294967295,P=Y+(z<<20&4294967295|z>>>12),z=F+(Y^H&(P^Y))+W[13]+2850285829&4294967295,F=P+(z<<5&4294967295|z>>>27),z=H+(P^Y&(F^P))+W[2]+4243563512&4294967295,H=F+(z<<9&4294967295|z>>>23),z=Y+(F^P&(H^F))+W[7]+1735328473&4294967295,Y=H+(z<<14&4294967295|z>>>18),z=P+(H^F&(Y^H))+W[12]+2368359562&4294967295,P=Y+(z<<20&4294967295|z>>>12),z=F+(P^Y^H)+W[5]+4294588738&4294967295,F=P+(z<<4&4294967295|z>>>28),z=H+(F^P^Y)+W[8]+2272392833&4294967295,H=F+(z<<11&4294967295|z>>>21),z=Y+(H^F^P)+W[11]+1839030562&4294967295,Y=H+(z<<16&4294967295|z>>>16),z=P+(Y^H^F)+W[14]+4259657740&4294967295,P=Y+(z<<23&4294967295|z>>>9),z=F+(P^Y^H)+W[1]+2763975236&4294967295,F=P+(z<<4&4294967295|z>>>28),z=H+(F^P^Y)+W[4]+1272893353&4294967295,H=F+(z<<11&4294967295|z>>>21),z=Y+(H^F^P)+W[7]+4139469664&4294967295,Y=H+(z<<16&4294967295|z>>>16),z=P+(Y^H^F)+W[10]+3200236656&4294967295,P=Y+(z<<23&4294967295|z>>>9),z=F+(P^Y^H)+W[13]+681279174&4294967295,F=P+(z<<4&4294967295|z>>>28),z=H+(F^P^Y)+W[0]+3936430074&4294967295,H=F+(z<<11&4294967295|z>>>21),z=Y+(H^F^P)+W[3]+3572445317&4294967295,Y=H+(z<<16&4294967295|z>>>16),z=P+(Y^H^F)+W[6]+76029189&4294967295,P=Y+(z<<23&4294967295|z>>>9),z=F+(P^Y^H)+W[9]+3654602809&4294967295,F=P+(z<<4&4294967295|z>>>28),z=H+(F^P^Y)+W[12]+3873151461&4294967295,H=F+(z<<11&4294967295|z>>>21),z=Y+(H^F^P)+W[15]+530742520&4294967295,Y=H+(z<<16&4294967295|z>>>16),z=P+(Y^H^F)+W[2]+3299628645&4294967295,P=Y+(z<<23&4294967295|z>>>9),z=F+(Y^(P|~H))+W[0]+4096336452&4294967295,F=P+(z<<6&4294967295|z>>>26),z=H+(P^(F|~Y))+W[7]+1126891415&4294967295,H=F+(z<<10&4294967295|z>>>22),z=Y+(F^(H|~P))+W[14]+2878612391&4294967295,Y=H+(z<<15&4294967295|z>>>17),z=P+(H^(Y|~F))+W[5]+4237533241&4294967295,P=Y+(z<<21&4294967295|z>>>11),z=F+(Y^(P|~H))+W[12]+1700485571&4294967295,F=P+(z<<6&4294967295|z>>>26),z=H+(P^(F|~Y))+W[3]+2399980690&4294967295,H=F+(z<<10&4294967295|z>>>22),z=Y+(F^(H|~P))+W[10]+4293915773&4294967295,Y=H+(z<<15&4294967295|z>>>17),z=P+(H^(Y|~F))+W[1]+2240044497&4294967295,P=Y+(z<<21&4294967295|z>>>11),z=F+(Y^(P|~H))+W[8]+1873313359&4294967295,F=P+(z<<6&4294967295|z>>>26),z=H+(P^(F|~Y))+W[15]+4264355552&4294967295,H=F+(z<<10&4294967295|z>>>22),z=Y+(F^(H|~P))+W[6]+2734768916&4294967295,Y=H+(z<<15&4294967295|z>>>17),z=P+(H^(Y|~F))+W[13]+1309151649&4294967295,P=Y+(z<<21&4294967295|z>>>11),z=F+(Y^(P|~H))+W[4]+4149444226&4294967295,F=P+(z<<6&4294967295|z>>>26),z=H+(P^(F|~Y))+W[11]+3174756917&4294967295,H=F+(z<<10&4294967295|z>>>22),z=Y+(F^(H|~P))+W[2]+718787259&4294967295,Y=H+(z<<15&4294967295|z>>>17),z=P+(H^(Y|~F))+W[9]+3951481745&4294967295,U.g[0]=U.g[0]+F&4294967295,U.g[1]=U.g[1]+(Y+(z<<21&4294967295|z>>>11))&4294967295,U.g[2]=U.g[2]+Y&4294967295,U.g[3]=U.g[3]+H&4294967295}l.prototype.u=function(U,F){F===void 0&&(F=U.length);for(var P=F-this.blockSize,W=this.B,Y=this.h,H=0;H<F;){if(Y==0)for(;H<=P;)h(this,U,H),H+=this.blockSize;if(typeof U=="string"){for(;H<F;)if(W[Y++]=U.charCodeAt(H++),Y==this.blockSize){h(this,W),Y=0;break}}else for(;H<F;)if(W[Y++]=U[H++],Y==this.blockSize){h(this,W),Y=0;break}}this.h=Y,this.o+=F},l.prototype.v=function(){var U=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);U[0]=128;for(var F=1;F<U.length-8;++F)U[F]=0;var P=8*this.o;for(F=U.length-8;F<U.length;++F)U[F]=P&255,P/=256;for(this.u(U),U=Array(16),F=P=0;4>F;++F)for(var W=0;32>W;W+=8)U[P++]=this.g[F]>>>W&255;return U};function g(U,F){var P=C;return Object.prototype.hasOwnProperty.call(P,U)?P[U]:P[U]=F(U)}function x(U,F){this.h=F;for(var P=[],W=!0,Y=U.length-1;0<=Y;Y--){var H=U[Y]|0;W&&H==F||(P[Y]=H,W=!1)}this.g=P}var C={};function S(U){return-128<=U&&128>U?g(U,function(F){return new x([F|0],0>F?-1:0)}):new x([U|0],0>U?-1:0)}function A(U){if(isNaN(U)||!isFinite(U))return k;if(0>U)return oe(A(-U));for(var F=[],P=1,W=0;U>=P;W++)F[W]=U/P|0,P*=4294967296;return new x(F,0)}function O(U,F){if(U.length==0)throw Error("number format error: empty string");if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(U.charAt(0)=="-")return oe(O(U.substring(1),F));if(0<=U.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=A(Math.pow(F,8)),W=k,Y=0;Y<U.length;Y+=8){var H=Math.min(8,U.length-Y),z=parseInt(U.substring(Y,Y+H),F);8>H?(H=A(Math.pow(F,H)),W=W.j(H).add(A(z))):(W=W.j(P),W=W.add(A(z)))}return W}var k=S(0),q=S(1),te=S(16777216);s=x.prototype,s.m=function(){if(ce(this))return-oe(this).m();for(var U=0,F=1,P=0;P<this.g.length;P++){var W=this.i(P);U+=(0<=W?W:4294967296+W)*F,F*=4294967296}return U},s.toString=function(U){if(U=U||10,2>U||36<U)throw Error("radix out of range: "+U);if(fe(this))return"0";if(ce(this))return"-"+oe(this).toString(U);for(var F=A(Math.pow(U,6)),P=this,W="";;){var Y=Re(P,F).g;P=Ue(P,Y.j(F));var H=((0<P.g.length?P.g[0]:P.h)>>>0).toString(U);if(P=Y,fe(P))return H+W;for(;6>H.length;)H="0"+H;W=H+W}},s.i=function(U){return 0>U?0:U<this.g.length?this.g[U]:this.h};function fe(U){if(U.h!=0)return!1;for(var F=0;F<U.g.length;F++)if(U.g[F]!=0)return!1;return!0}function ce(U){return U.h==-1}s.l=function(U){return U=Ue(this,U),ce(U)?-1:fe(U)?0:1};function oe(U){for(var F=U.g.length,P=[],W=0;W<F;W++)P[W]=~U.g[W];return new x(P,~U.h).add(q)}s.abs=function(){return ce(this)?oe(this):this},s.add=function(U){for(var F=Math.max(this.g.length,U.g.length),P=[],W=0,Y=0;Y<=F;Y++){var H=W+(this.i(Y)&65535)+(U.i(Y)&65535),z=(H>>>16)+(this.i(Y)>>>16)+(U.i(Y)>>>16);W=z>>>16,H&=65535,z&=65535,P[Y]=z<<16|H}return new x(P,P[P.length-1]&-2147483648?-1:0)};function Ue(U,F){return U.add(oe(F))}s.j=function(U){if(fe(this)||fe(U))return k;if(ce(this))return ce(U)?oe(this).j(oe(U)):oe(oe(this).j(U));if(ce(U))return oe(this.j(oe(U)));if(0>this.l(te)&&0>U.l(te))return A(this.m()*U.m());for(var F=this.g.length+U.g.length,P=[],W=0;W<2*F;W++)P[W]=0;for(W=0;W<this.g.length;W++)for(var Y=0;Y<U.g.length;Y++){var H=this.i(W)>>>16,z=this.i(W)&65535,ot=U.i(Y)>>>16,ae=U.i(Y)&65535;P[2*W+2*Y]+=z*ae,De(P,2*W+2*Y),P[2*W+2*Y+1]+=H*ae,De(P,2*W+2*Y+1),P[2*W+2*Y+1]+=z*ot,De(P,2*W+2*Y+1),P[2*W+2*Y+2]+=H*ot,De(P,2*W+2*Y+2)}for(W=0;W<F;W++)P[W]=P[2*W+1]<<16|P[2*W];for(W=F;W<2*F;W++)P[W]=0;return new x(P,0)};function De(U,F){for(;(U[F]&65535)!=U[F];)U[F+1]+=U[F]>>>16,U[F]&=65535,F++}function ye(U,F){this.g=U,this.h=F}function Re(U,F){if(fe(F))throw Error("division by zero");if(fe(U))return new ye(k,k);if(ce(U))return F=Re(oe(U),F),new ye(oe(F.g),oe(F.h));if(ce(F))return F=Re(U,oe(F)),new ye(oe(F.g),F.h);if(30<U.g.length){if(ce(U)||ce(F))throw Error("slowDivide_ only works with positive integers.");for(var P=q,W=F;0>=W.l(U);)P=At(P),W=At(W);var Y=Le(P,1),H=Le(W,1);for(W=Le(W,2),P=Le(P,2);!fe(W);){var z=H.add(W);0>=z.l(U)&&(Y=Y.add(P),H=z),W=Le(W,1),P=Le(P,1)}return F=Ue(U,Y.j(F)),new ye(Y,F)}for(Y=k;0<=U.l(F);){for(P=Math.max(1,Math.floor(U.m()/F.m())),W=Math.ceil(Math.log(P)/Math.LN2),W=48>=W?1:Math.pow(2,W-48),H=A(P),z=H.j(F);ce(z)||0<z.l(U);)P-=W,H=A(P),z=H.j(F);fe(H)&&(H=q),Y=Y.add(H),U=Ue(U,z)}return new ye(Y,U)}s.A=function(U){return Re(this,U).h},s.and=function(U){for(var F=Math.max(this.g.length,U.g.length),P=[],W=0;W<F;W++)P[W]=this.i(W)&U.i(W);return new x(P,this.h&U.h)},s.or=function(U){for(var F=Math.max(this.g.length,U.g.length),P=[],W=0;W<F;W++)P[W]=this.i(W)|U.i(W);return new x(P,this.h|U.h)},s.xor=function(U){for(var F=Math.max(this.g.length,U.g.length),P=[],W=0;W<F;W++)P[W]=this.i(W)^U.i(W);return new x(P,this.h^U.h)};function At(U){for(var F=U.g.length+1,P=[],W=0;W<F;W++)P[W]=U.i(W)<<1|U.i(W-1)>>>31;return new x(P,U.h)}function Le(U,F){var P=F>>5;F%=32;for(var W=U.g.length-P,Y=[],H=0;H<W;H++)Y[H]=0<F?U.i(H+P)>>>F|U.i(H+P+1)<<32-F:U.i(H+P);return new x(Y,U.h)}l.prototype.digest=l.prototype.v,l.prototype.reset=l.prototype.s,l.prototype.update=l.prototype.u,Hg=l,x.prototype.add=x.prototype.add,x.prototype.multiply=x.prototype.j,x.prototype.modulo=x.prototype.A,x.prototype.compare=x.prototype.l,x.prototype.toNumber=x.prototype.m,x.prototype.toString=x.prototype.toString,x.prototype.getBits=x.prototype.i,x.fromNumber=A,x.fromString=O,Ko=x}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wg,xl,Gg,Uu,ef,Xg,Yg,Qg;(function(){var s,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(m,I,R){return m==Array.prototype||m==Object.prototype||(m[I]=R.value),m};function n(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var I=0;I<m.length;++I){var R=m[I];if(R&&R.Math==Math)return R}throw Error("Cannot find global object")}var l=n(this);function h(m,I){if(I)e:{var R=l;m=m.split(".");for(var L=0;L<m.length-1;L++){var ee=m[L];if(!(ee in R))break e;R=R[ee]}m=m[m.length-1],L=R[m],I=I(L),I!=L&&I!=null&&e(R,m,{configurable:!0,writable:!0,value:I})}}function g(m,I){m instanceof String&&(m+="");var R=0,L=!1,ee={next:function(){if(!L&&R<m.length){var ue=R++;return{value:I(ue,m[ue]),done:!1}}return L=!0,{done:!0,value:void 0}}};return ee[Symbol.iterator]=function(){return ee},ee}h("Array.prototype.values",function(m){return m||function(){return g(this,function(I,R){return R})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var x=x||{},C=this||self;function S(m){var I=typeof m;return I=I!="object"?I:m?Array.isArray(m)?"array":I:"null",I=="array"||I=="object"&&typeof m.length=="number"}function A(m){var I=typeof m;return I=="object"&&m!=null||I=="function"}function O(m,I,R){return m.call.apply(m.bind,arguments)}function k(m,I,R){if(!m)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var ee=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ee,L),m.apply(I,ee)}}return function(){return m.apply(I,arguments)}}function q(m,I,R){return q=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?O:k,q.apply(null,arguments)}function te(m,I){var R=Array.prototype.slice.call(arguments,1);return function(){var L=R.slice();return L.push.apply(L,arguments),m.apply(this,L)}}function fe(m,I){function R(){}R.prototype=I.prototype,m.aa=I.prototype,m.prototype=new R,m.prototype.constructor=m,m.Qb=function(L,ee,ue){for(var Ie=Array(arguments.length-2),jt=2;jt<arguments.length;jt++)Ie[jt-2]=arguments[jt];return I.prototype[ee].apply(L,Ie)}}function ce(m){const I=m.length;if(0<I){const R=Array(I);for(let L=0;L<I;L++)R[L]=m[L];return R}return[]}function oe(m,I){for(let R=1;R<arguments.length;R++){const L=arguments[R];if(S(L)){const ee=m.length||0,ue=L.length||0;m.length=ee+ue;for(let Ie=0;Ie<ue;Ie++)m[ee+Ie]=L[Ie]}else m.push(L)}}class Ue{constructor(I,R){this.i=I,this.j=R,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function De(m){return/^[\s\xa0]*$/.test(m)}function ye(){var m=C.navigator;return m&&(m=m.userAgent)?m:""}function Re(m){return Re[" "](m),m}Re[" "]=function(){};var At=ye().indexOf("Gecko")!=-1&&!(ye().toLowerCase().indexOf("webkit")!=-1&&ye().indexOf("Edge")==-1)&&!(ye().indexOf("Trident")!=-1||ye().indexOf("MSIE")!=-1)&&ye().indexOf("Edge")==-1;function Le(m,I,R){for(const L in m)I.call(R,m[L],L,m)}function U(m,I){for(const R in m)I.call(void 0,m[R],R,m)}function F(m){const I={};for(const R in m)I[R]=m[R];return I}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(m,I){let R,L;for(let ee=1;ee<arguments.length;ee++){L=arguments[ee];for(R in L)m[R]=L[R];for(let ue=0;ue<P.length;ue++)R=P[ue],Object.prototype.hasOwnProperty.call(L,R)&&(m[R]=L[R])}}function Y(m){var I=1;m=m.split(":");const R=[];for(;0<I&&m.length;)R.push(m.shift()),I--;return m.length&&R.push(m.join(":")),R}function H(m){C.setTimeout(()=>{throw m},0)}function z(){var m=ze;let I=null;return m.g&&(I=m.g,m.g=m.g.next,m.g||(m.h=null),I.next=null),I}class ot{constructor(){this.h=this.g=null}add(I,R){const L=ae.get();L.set(I,R),this.h?this.h.next=L:this.g=L,this.h=L}}var ae=new Ue(()=>new gt,m=>m.reset());class gt{constructor(){this.next=this.g=this.h=null}set(I,R){this.h=I,this.g=R,this.next=null}reset(){this.next=this.g=this.h=null}}let Oe,Te=!1,ze=new ot,be=()=>{const m=C.Promise.resolve(void 0);Oe=()=>{m.then($)}};var $=()=>{for(var m;m=z();){try{m.h.call(m.g)}catch(R){H(R)}var I=ae;I.j(m),100>I.h&&(I.h++,m.next=I.g,I.g=m)}Te=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function je(m,I){this.type=m,this.g=this.target=I,this.defaultPrevented=!1}je.prototype.h=function(){this.defaultPrevented=!0};var qe=function(){if(!C.addEventListener||!Object.defineProperty)return!1;var m=!1,I=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const R=()=>{};C.addEventListener("test",R,I),C.removeEventListener("test",R,I)}catch{}return m}();function dt(m,I){if(je.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m){var R=this.type=m.type,L=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;if(this.target=m.target||m.srcElement,this.g=I,I=m.relatedTarget){if(At){e:{try{Re(I.nodeName);var ee=!0;break e}catch{}ee=!1}ee||(I=null)}}else R=="mouseover"?I=m.fromElement:R=="mouseout"&&(I=m.toElement);this.relatedTarget=I,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=typeof m.pointerType=="string"?m.pointerType:ve[m.pointerType]||"",this.state=m.state,this.i=m,m.defaultPrevented&&dt.aa.h.call(this)}}fe(dt,je);var ve={2:"touch",3:"pen",4:"mouse"};dt.prototype.h=function(){dt.aa.h.call(this);var m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),nt=0;function kt(m,I,R,L,ee){this.listener=m,this.proxy=null,this.src=I,this.type=R,this.capture=!!L,this.ha=ee,this.key=++nt,this.da=this.fa=!1}function fn(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function dn(m){this.src=m,this.g={},this.h=0}dn.prototype.add=function(m,I,R,L,ee){var ue=m.toString();m=this.g[ue],m||(m=this.g[ue]=[],this.h++);var Ie=pt(m,I,L,ee);return-1<Ie?(I=m[Ie],R||(I.fa=!1)):(I=new kt(I,this.src,ue,!!L,ee),I.fa=R,m.push(I)),I};function Li(m,I){var R=I.type;if(R in m.g){var L=m.g[R],ee=Array.prototype.indexOf.call(L,I,void 0),ue;(ue=0<=ee)&&Array.prototype.splice.call(L,ee,1),ue&&(fn(I),m.g[R].length==0&&(delete m.g[R],m.h--))}}function pt(m,I,R,L){for(var ee=0;ee<m.length;++ee){var ue=m[ee];if(!ue.da&&ue.listener==I&&ue.capture==!!R&&ue.ha==L)return ee}return-1}var Qr="closure_lm_"+(1e6*Math.random()|0),ur={};function Bi(m,I,R,L,ee){if(Array.isArray(I)){for(var ue=0;ue<I.length;ue++)Bi(m,I[ue],R,L,ee);return null}return R=xs(R),m&&m[vt]?m.K(I,R,A(L)?!!L.capture:!!L,ee):En(m,I,R,!1,L,ee)}function En(m,I,R,L,ee,ue){if(!I)throw Error("Invalid event type");var Ie=A(ee)?!!ee.capture:!!ee,jt=ws(m);if(jt||(m[Qr]=jt=new dn(m)),R=jt.add(I,R,L,Ie,ue),R.proxy)return R;if(L=Vt(),R.proxy=L,L.src=m,L.listener=R,m.addEventListener)qe||(ee=Ie),ee===void 0&&(ee=!1),m.addEventListener(I.toString(),L,ee);else if(m.attachEvent)m.attachEvent(Pe(I.toString()),L);else if(m.addListener&&m.removeListener)m.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return R}function Vt(){function m(R){return I.call(m.src,m.listener,R)}const I=Zi;return m}function mt(m,I,R,L,ee){if(Array.isArray(I))for(var ue=0;ue<I.length;ue++)mt(m,I[ue],R,L,ee);else L=A(L)?!!L.capture:!!L,R=xs(R),m&&m[vt]?(m=m.i,I=String(I).toString(),I in m.g&&(ue=m.g[I],R=pt(ue,R,L,ee),-1<R&&(fn(ue[R]),Array.prototype.splice.call(ue,R,1),ue.length==0&&(delete m.g[I],m.h--)))):m&&(m=ws(m))&&(I=m.g[I.toString()],m=-1,I&&(m=pt(I,R,L,ee)),(R=-1<m?I[m]:null)&&qr(R))}function qr(m){if(typeof m!="number"&&m&&!m.da){var I=m.src;if(I&&I[vt])Li(I.i,m);else{var R=m.type,L=m.proxy;I.removeEventListener?I.removeEventListener(R,L,m.capture):I.detachEvent?I.detachEvent(Pe(R),L):I.addListener&&I.removeListener&&I.removeListener(L),(R=ws(I))?(Li(R,m),R.h==0&&(R.src=null,I[Qr]=null)):fn(m)}}}function Pe(m){return m in ur?ur[m]:ur[m]="on"+m}function Zi(m,I){if(m.da)m=!0;else{I=new dt(I,this);var R=m.listener,L=m.ha||m.src;m.fa&&qr(m),m=R.call(L,I)}return m}function ws(m){return m=m[Qr],m instanceof dn?m:null}var Ar="__closure_events_fn_"+(1e9*Math.random()>>>0);function xs(m){return typeof m=="function"?m:(m[Ar]||(m[Ar]=function(I){return m.handleEvent(I)}),m[Ar])}function Ut(){he.call(this),this.i=new dn(this),this.M=this,this.F=null}fe(Ut,he),Ut.prototype[vt]=!0,Ut.prototype.removeEventListener=function(m,I,R,L){mt(this,m,I,R,L)};function Tn(m,I){var R,L=m.F;if(L)for(R=[];L;L=L.F)R.push(L);if(m=m.M,L=I.type||I,typeof I=="string")I=new je(I,m);else if(I instanceof je)I.target=I.target||m;else{var ee=I;I=new je(L,m),W(I,ee)}if(ee=!0,R)for(var ue=R.length-1;0<=ue;ue--){var Ie=I.g=R[ue];ee=er(Ie,L,!0,I)&&ee}if(Ie=I.g=m,ee=er(Ie,L,!0,I)&&ee,ee=er(Ie,L,!1,I)&&ee,R)for(ue=0;ue<R.length;ue++)Ie=I.g=R[ue],ee=er(Ie,L,!1,I)&&ee}Ut.prototype.N=function(){if(Ut.aa.N.call(this),this.i){var m=this.i,I;for(I in m.g){for(var R=m.g[I],L=0;L<R.length;L++)fn(R[L]);delete m.g[I],m.h--}}this.F=null},Ut.prototype.K=function(m,I,R,L){return this.i.add(String(m),I,!1,R,L)},Ut.prototype.L=function(m,I,R,L){return this.i.add(String(m),I,!0,R,L)};function er(m,I,R,L){if(I=m.i.g[String(I)],!I)return!0;I=I.concat();for(var ee=!0,ue=0;ue<I.length;++ue){var Ie=I[ue];if(Ie&&!Ie.da&&Ie.capture==R){var jt=Ie.listener,on=Ie.ha||Ie.src;Ie.fa&&Li(m.i,Ie),ee=jt.call(on,L)!==!1&&ee}}return ee&&!L.defaultPrevented}function kn(m,I,R){if(typeof m=="function")R&&(m=q(m,R));else if(m&&typeof m.handleEvent=="function")m=q(m.handleEvent,m);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:C.setTimeout(m,I||0)}function Fi(m){m.g=kn(()=>{m.g=null,m.i&&(m.i=!1,Fi(m))},m.l);const I=m.h;m.h=null,m.m.apply(null,I)}class Ci extends he{constructor(I,R){super(),this.m=I,this.l=R,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:Fi(this)}N(){super.N(),this.g&&(C.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Es(m){he.call(this),this.h=m,this.g={}}fe(Es,he);var tn=[];function Se(m){Le(m.g,function(I,R){this.g.hasOwnProperty(R)&&qr(I)},m),m.g={}}Es.prototype.N=function(){Es.aa.N.call(this),Se(this)},Es.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sn=C.JSON.stringify,Mt=C.JSON.parse,qt=class{stringify(m){return C.JSON.stringify(m,void 0)}parse(m){return C.JSON.parse(m,void 0)}};function li(){}li.prototype.h=null;function $i(m){return m.h||(m.h=m.i())}function _s(){}var ht={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function tr(){je.call(this,"d")}fe(tr,je);function As(){je.call(this,"c")}fe(As,je);var ui={},cr=null;function Vi(){return cr=cr||new Ut}ui.La="serverreachability";function vn(m){je.call(this,ui.La,m)}fe(vn,je);function Cr(m){const I=Vi();Tn(I,new vn(I))}ui.STAT_EVENT="statevent";function Ji(m,I){je.call(this,ui.STAT_EVENT,m),this.stat=I}fe(Ji,je);function Lt(m){const I=Vi();Tn(I,new Ji(I,m))}ui.Ma="timingevent";function Ws(m,I){je.call(this,ui.Ma,m),this.size=I}fe(Ws,je);function Wn(m,I){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return C.setTimeout(function(){m()},I)}function Ui(){this.g=!0}Ui.prototype.xa=function(){this.g=!1};function Sn(m,I,R,L,ee,ue){m.info(function(){if(m.g)if(ue)for(var Ie="",jt=ue.split("&"),on=0;on<jt.length;on++){var Ct=jt[on].split("=");if(1<Ct.length){var en=Ct[0];Ct=Ct[1];var an=en.split("_");Ie=2<=an.length&&an[1]=="type"?Ie+(en+"="+Ct+"&"):Ie+(en+"=redacted&")}}else Ie=null;else Ie=ue;return"XMLHTTP REQ ("+L+") [attempt "+ee+"]: "+I+`
`+R+`
`+Ie})}function Kr(m,I,R,L,ee,ue,Ie){m.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+ee+"]: "+I+`
`+R+`
`+ue+" "+Ie})}function gn(m,I,R,L){m.info(function(){return"XMLHTTP TEXT ("+I+"): "+es(m,R)+(L?" "+L:"")})}function Me(m,I){m.info(function(){return"TIMEOUT: "+I})}Ui.prototype.info=function(){};function es(m,I){if(!m.g)return I;if(!I)return null;try{var R=JSON.parse(I);if(R){for(m=0;m<R.length;m++)if(Array.isArray(R[m])){var L=R[m];if(!(2>L.length)){var ee=L[1];if(Array.isArray(ee)&&!(1>ee.length)){var ue=ee[0];if(ue!="noop"&&ue!="stop"&&ue!="close")for(var Ie=1;Ie<ee.length;Ie++)ee[Ie]=""}}}}return sn(R)}catch{return I}}var ts={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Gn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nr;function Ii(){}fe(Ii,li),Ii.prototype.g=function(){return new XMLHttpRequest},Ii.prototype.i=function(){return{}},nr=new Ii;function Ir(m,I,R,L){this.j=m,this.i=I,this.l=R,this.R=L||1,this.U=new Es(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fr}function Fr(){this.i=null,this.g="",this.h=!1}var Do={},Gs={};function hr(m,I,R){m.L=1,m.v=Zt(wt(I)),m.m=R,m.P=!0,Ln(m,null)}function Ln(m,I){m.F=Date.now(),St(m),m.A=wt(m.v);var R=m.A,L=m.R;Array.isArray(L)||(L=[String(L)]),$t(R.i,"t",L),m.C=0,R=m.j.J,m.h=new Fr,m.g=ua(m.j,R?I:null,!m.m),0<m.O&&(m.M=new Ci(q(m.Y,m,m.g),m.O)),I=m.U,R=m.g,L=m.ca;var ee="readystatechange";Array.isArray(ee)||(ee&&(tn[0]=ee.toString()),ee=tn);for(var ue=0;ue<ee.length;ue++){var Ie=Bi(R,ee[ue],L||I.handleEvent,!1,I.h||I);if(!Ie)break;I.g[Ie.key]=Ie}I=m.H?F(m.H):{},m.m?(m.u||(m.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.A,m.u,m.m,I)):(m.u="GET",m.g.ea(m.A,m.u,null,I)),Cr(),Sn(m.i,m.u,m.A,m.l,m.R,m.m)}Ir.prototype.ca=function(m){m=m.target;const I=this.M;I&&Rr(m)==3?I.j():this.Y(m)},Ir.prototype.Y=function(m){try{if(m==this.g)e:{const an=Rr(this.g);var I=this.g.Ba();const ln=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||Mo(this.g)))){this.J||an!=4||I==7||(I==8||0>=ln?Cr(3):Cr(2)),de(this);var R=this.g.Z();this.X=R;t:if(Xt(this)){var L=Mo(this.g);m="";var ee=L.length,ue=Rr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rt(this),ns(this);var Ie="";break t}this.h.i=new C.TextDecoder}for(I=0;I<ee;I++)this.h.h=!0,m+=this.h.i.decode(L[I],{stream:!(ue&&I==ee-1)});L.length=0,this.h.g+=m,this.C=0,Ie=this.h.g}else Ie=this.g.oa();if(this.o=R==200,Kr(this.i,this.u,this.A,this.l,this.R,an,R),this.o){if(this.T&&!this.K){t:{if(this.g){var jt,on=this.g;if((jt=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!De(jt)){var Ct=jt;break t}}Ct=null}if(R=Ct)gn(this.i,this.l,R,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ti(this,R);else{this.o=!1,this.s=3,Lt(12),Rt(this),ns(this);break e}}if(this.P){R=!0;let Nr;for(;!this.J&&this.C<Ie.length;)if(Nr=sa(this,Ie),Nr==Gs){an==4&&(this.s=4,Lt(14),R=!1),gn(this.i,this.l,null,"[Incomplete Response]");break}else if(Nr==Do){this.s=4,Lt(15),gn(this.i,this.l,Ie,"[Invalid Chunk]"),R=!1;break}else gn(this.i,this.l,Nr,null),Ti(this,Nr);if(Xt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||Ie.length!=0||this.h.h||(this.s=1,Lt(16),R=!1),this.o=this.o&&R,!R)gn(this.i,this.l,Ie,"[Invalid Chunked Response]"),Rt(this),ns(this);else if(0<Ie.length&&!this.W){this.W=!0;var en=this.j;en.g==this&&en.ba&&!en.M&&(en.j.info("Great, no buffering proxy detected. Bytes received: "+Ie.length),Ss(en),en.M=!0,Lt(11))}}else gn(this.i,this.l,Ie,null),Ti(this,Ie);an==4&&Rt(this),this.o&&!this.J&&(an==4?Yt(this.j,this):(this.o=!1,St(this)))}else Nt(this.g),R==400&&0<Ie.indexOf("Unknown SID")?(this.s=3,Lt(12)):(this.s=0,Lt(13)),Rt(this),ns(this)}}}catch{}finally{}};function Xt(m){return m.g?m.u=="GET"&&m.L!=2&&m.j.Ca:!1}function sa(m,I){var R=m.C,L=I.indexOf(`
`,R);return L==-1?Gs:(R=Number(I.substring(R,L)),isNaN(R)?Do:(L+=1,L+R>I.length?Gs:(I=I.slice(L,L+R),m.C=L+R,I)))}Ir.prototype.cancel=function(){this.J=!0,Rt(this)};function St(m){m.S=Date.now()+m.I,Xs(m,m.I)}function Xs(m,I){if(m.B!=null)throw Error("WatchDog timer not null");m.B=Wn(q(m.ba,m),I)}function de(m){m.B&&(C.clearTimeout(m.B),m.B=null)}Ir.prototype.ba=function(){this.B=null;const m=Date.now();0<=m-this.S?(Me(this.i,this.A),this.L!=2&&(Cr(),Lt(17)),Rt(this),this.s=2,ns(this)):Xs(this,this.S-m)};function ns(m){m.j.G==0||m.J||Yt(m.j,m)}function Rt(m){de(m);var I=m.M;I&&typeof I.ma=="function"&&I.ma(),m.M=null,Se(m.U),m.g&&(I=m.g,m.g=null,I.abort(),I.ma())}function Ti(m,I){try{var R=m.j;if(R.G!=0&&(R.g==m||Xn(R.h,m))){if(!m.K&&Xn(R.h,m)&&R.G==3){try{var L=R.Da.g.parse(I)}catch{L=null}if(Array.isArray(L)&&L.length==3){var ee=L;if(ee[0]==0){e:if(!R.u){if(R.g)if(R.g.F+3e3<m.F)as(R),gi(R);else break e;$s(R),Lt(18)}}else R.za=ee[1],0<R.za-R.T&&37500>ee[2]&&R.F&&R.v==0&&!R.C&&(R.C=Wn(q(R.Za,R),6e3));if(1>=yt(R.h)&&R.ca){try{R.ca()}catch{}R.ca=void 0}}else dr(R,11)}else if((m.K||R.g==m)&&as(R),!De(I))for(ee=R.Da.g.parse(I),I=0;I<ee.length;I++){let Ct=ee[I];if(R.T=Ct[0],Ct=Ct[1],R.G==2)if(Ct[0]=="c"){R.K=Ct[1],R.ia=Ct[2];const en=Ct[3];en!=null&&(R.la=en,R.j.info("VER="+R.la));const an=Ct[4];an!=null&&(R.Aa=an,R.j.info("SVER="+R.Aa));const ln=Ct[5];ln!=null&&typeof ln=="number"&&0<ln&&(L=1.5*ln,R.L=L,R.j.info("backChannelRequestTimeoutMs_="+L)),L=R;const Nr=m.g;if(Nr){const ir=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ir){var ue=L.h;ue.g||ir.indexOf("spdy")==-1&&ir.indexOf("quic")==-1&&ir.indexOf("h2")==-1||(ue.j=ue.l,ue.g=new Set,ue.h&&(Cs(ue,ue.h),ue.h=null))}if(L.D){const Js=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Js&&(L.ya=Js,Ne(L.I,L.D,Js))}}R.G=3,R.l&&R.l.ua(),R.ba&&(R.R=Date.now()-m.F,R.j.info("Handshake RTT: "+R.R+"ms")),L=R;var Ie=m;if(L.qa=Qe(L,L.J?L.ia:null,L.W),Ie.K){Ys(L.h,Ie);var jt=Ie,on=L.L;on&&(jt.I=on),jt.B&&(de(jt),St(jt)),L.g=Ie}else vs(L);0<R.i.length&&rt(R)}else Ct[0]!="stop"&&Ct[0]!="close"||dr(R,7);else R.G==3&&(Ct[0]=="stop"||Ct[0]=="close"?Ct[0]=="stop"?dr(R,7):nn(R):Ct[0]!="noop"&&R.l&&R.l.ta(Ct),R.v=0)}}Cr(4)}catch{}}var oa=class{constructor(m,I){this.g=m,this.map=I}};function Et(m){this.l=m||10,C.PerformanceNavigationTiming?(m=C.performance.getEntriesByType("navigation"),m=0<m.length&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(C.chrome&&C.chrome.loadTimes&&C.chrome.loadTimes()&&C.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ut(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function yt(m){return m.h?1:m.g?m.g.size:0}function Xn(m,I){return m.h?m.h==I:m.g?m.g.has(I):!1}function Cs(m,I){m.g?m.g.add(I):m.h=I}function Ys(m,I){m.h&&m.h==I?m.h=null:m.g&&m.g.has(I)&&m.g.delete(I)}Et.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function pn(m){if(m.h!=null)return m.i.concat(m.h.D);if(m.g!=null&&m.g.size!==0){let I=m.i;for(const R of m.g.values())I=I.concat(R.D);return I}return ce(m.i)}function Vr(m){if(m.V&&typeof m.V=="function")return m.V();if(typeof Map<"u"&&m instanceof Map||typeof Set<"u"&&m instanceof Set)return Array.from(m.values());if(typeof m=="string")return m.split("");if(S(m)){for(var I=[],R=m.length,L=0;L<R;L++)I.push(m[L]);return I}I=[],R=0;for(L in m)I[R++]=m[L];return I}function Qs(m){if(m.na&&typeof m.na=="function")return m.na();if(!m.V||typeof m.V!="function"){if(typeof Map<"u"&&m instanceof Map)return Array.from(m.keys());if(!(typeof Set<"u"&&m instanceof Set)){if(S(m)||typeof m=="string"){var I=[];m=m.length;for(var R=0;R<m;R++)I.push(R);return I}I=[],R=0;for(const L in m)I[R++]=L;return I}}}function Wt(m,I){if(m.forEach&&typeof m.forEach=="function")m.forEach(I,void 0);else if(S(m)||typeof m=="string")Array.prototype.forEach.call(m,I,void 0);else for(var R=Qs(m),L=Vr(m),ee=L.length,ue=0;ue<ee;ue++)I.call(void 0,L[ue],R&&R[ue],m)}var Tr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ya(m,I){if(m){m=m.split("&");for(var R=0;R<m.length;R++){var L=m[R].indexOf("="),ee=null;if(0<=L){var ue=m[R].substring(0,L);ee=m[R].substring(L+1)}else ue=m[R];I(ue,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}function vr(m){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,m instanceof vr){this.h=m.h,mn(this,m.j),this.o=m.o,this.g=m.g,J(this,m.s),this.l=m.l;var I=m.i,R=new Zr;R.i=I.i,I.g&&(R.g=new Map(I.g),R.h=I.h),B(this,R),this.m=m.m}else m&&(I=String(m).match(Tr))?(this.h=!1,mn(this,I[1]||"",!0),this.o=it(I[2]||""),this.g=it(I[3]||"",!0),J(this,I[4]),this.l=it(I[5]||"",!0),B(this,I[6]||"",!0),this.m=it(I[7]||"")):(this.h=!1,this.i=new Zr(null,this.h))}vr.prototype.toString=function(){var m=[],I=this.j;I&&m.push(rs(I,Yn,!0),":");var R=this.g;return(R||I=="file")&&(m.push("//"),(I=this.o)&&m.push(rs(I,Yn,!0),"@"),m.push(encodeURIComponent(String(R)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),R=this.s,R!=null&&m.push(":",String(R))),(R=this.l)&&(this.g&&R.charAt(0)!="/"&&m.push("/"),m.push(rs(R,R.charAt(0)=="/"?Kt:Ye,!0))),(R=this.i.toString())&&m.push("?",R),(R=this.m)&&m.push("#",rs(R,Oo)),m.join("")};function wt(m){return new vr(m)}function mn(m,I,R){m.j=R?it(I,!0):I,m.j&&(m.j=m.j.replace(/:$/,""))}function J(m,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);m.s=I}else m.s=null}function B(m,I,R){I instanceof Zr?(m.i=I,Qn(m.i,m.h)):(R||(I=rs(I,bo)),m.i=new Zr(I,m.h))}function Ne(m,I,R){m.i.set(I,R)}function Zt(m){return Ne(m,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),m}function it(m,I){return m?I?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function rs(m,I,R){return typeof m=="string"?(m=encodeURI(m).replace(I,qs),R&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function qs(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Yn=/[#\/\?@]/g,Ye=/[#\?:]/g,Kt=/[#\?]/g,bo=/[#\?@]/g,Oo=/#/g;function Zr(m,I){this.h=this.g=null,this.i=m||null,this.j=!!I}function Rn(m){m.g||(m.g=new Map,m.h=0,m.i&&Ya(m.i,function(I,R){m.add(decodeURIComponent(I.replace(/\+/g," ")),R)}))}s=Zr.prototype,s.add=function(m,I){Rn(this),this.i=null,m=rr(this,m);var R=this.g.get(m);return R||this.g.set(m,R=[]),R.push(I),this.h+=1,this};function Ur(m,I){Rn(m),I=rr(m,I),m.g.has(I)&&(m.i=null,m.h-=m.g.get(I).length,m.g.delete(I))}function ci(m,I){return Rn(m),I=rr(m,I),m.g.has(I)}s.forEach=function(m,I){Rn(this),this.g.forEach(function(R,L){R.forEach(function(ee){m.call(I,ee,L,this)},this)},this)},s.na=function(){Rn(this);const m=Array.from(this.g.values()),I=Array.from(this.g.keys()),R=[];for(let L=0;L<I.length;L++){const ee=m[L];for(let ue=0;ue<ee.length;ue++)R.push(I[L])}return R},s.V=function(m){Rn(this);let I=[];if(typeof m=="string")ci(this,m)&&(I=I.concat(this.g.get(rr(this,m))));else{m=Array.from(this.g.values());for(let R=0;R<m.length;R++)I=I.concat(m[R])}return I},s.set=function(m,I){return Rn(this),this.i=null,m=rr(this,m),ci(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[I]),this.h+=1,this},s.get=function(m,I){return m?(m=this.V(m),0<m.length?String(m[0]):I):I};function $t(m,I,R){Ur(m,I),0<R.length&&(m.i=null,m.g.set(rr(m,I),ce(R)),m.h+=R.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],I=Array.from(this.g.keys());for(var R=0;R<I.length;R++){var L=I[R];const ue=encodeURIComponent(String(L)),Ie=this.V(L);for(L=0;L<Ie.length;L++){var ee=ue;Ie[L]!==""&&(ee+="="+encodeURIComponent(String(Ie[L]))),m.push(ee)}}return this.i=m.join("&")};function rr(m,I){return I=String(I),m.j&&(I=I.toLowerCase()),I}function Qn(m,I){I&&!m.j&&(Rn(m),m.i=null,m.g.forEach(function(R,L){var ee=L.toLowerCase();L!=ee&&(Ur(this,L),$t(this,ee,R))},m)),m.j=I}function Ze(m,I){const R=new Ui;if(C.Image){const L=new Image;L.onload=te(Ke,R,"TestLoadImage: loaded",!0,I,L),L.onerror=te(Ke,R,"TestLoadImage: error",!1,I,L),L.onabort=te(Ke,R,"TestLoadImage: abort",!1,I,L),L.ontimeout=te(Ke,R,"TestLoadImage: timeout",!1,I,L),C.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=m}else I(!1)}function aa(m,I){const R=new Ui,L=new AbortController,ee=setTimeout(()=>{L.abort(),Ke(R,"TestPingServer: timeout",!1,I)},1e4);fetch(m,{signal:L.signal}).then(ue=>{clearTimeout(ee),ue.ok?Ke(R,"TestPingServer: ok",!0,I):Ke(R,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(ee),Ke(R,"TestPingServer: error",!1,I)})}function Ke(m,I,R,L,ee){try{ee&&(ee.onload=null,ee.onerror=null,ee.onabort=null,ee.ontimeout=null),L(R)}catch{}}function Bn(){this.g=new qt}function la(m,I,R){const L=R||"";try{Wt(m,function(ee,ue){let Ie=ee;A(ee)&&(Ie=sn(ee)),I.push(L+ue+"="+encodeURIComponent(Ie))})}catch(ee){throw I.push(L+"type="+encodeURIComponent("_badmap")),ee}}function hi(m){this.l=m.Ub||null,this.j=m.eb||!1}fe(hi,li),hi.prototype.g=function(){return new is(this.l,this.j)},hi.prototype.i=function(m){return function(){return m}}({});function is(m,I){Ut.call(this),this.D=m,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}fe(is,Ut),s=is.prototype,s.open=function(m,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=m,this.A=I,this.readyState=1,fr(this)},s.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};m&&(I.body=m),(this.D||C).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fi(this)),this.readyState=0},s.Sa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,fr(this)),this.g&&(this.readyState=3,fr(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof C.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;vi(this)}else m.text().then(this.Ra.bind(this),this.ga.bind(this))};function vi(m){m.j.read().then(m.Pa.bind(m)).catch(m.ga.bind(m))}s.Pa=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var I=m.value?m.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!m.done}))&&(this.response=this.responseText+=I)}m.done?fi(this):fr(this),this.readyState==3&&vi(this)}},s.Ra=function(m){this.g&&(this.response=this.responseText=m,fi(this))},s.Qa=function(m){this.g&&(this.response=m,fi(this))},s.ga=function(){this.g&&fi(this)};function fi(m){m.readyState=4,m.l=null,m.j=null,m.v=null,fr(m)}s.setRequestHeader=function(m,I){this.u.append(m,I)},s.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],I=this.h.entries();for(var R=I.next();!R.done;)R=R.value,m.push(R[0]+": "+R[1]),R=I.next();return m.join(`\r
`)};function fr(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function zr(m){let I="";return Le(m,function(R,L){I+=L,I+=":",I+=R,I+=`\r
`}),I}function $r(m,I,R){e:{for(L in R){var L=!1;break e}L=!0}L||(R=zr(R),typeof m=="string"?R!=null&&encodeURIComponent(String(R)):Ne(m,I,R))}function Jt(m){Ut.call(this),this.headers=new Map,this.o=m||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}fe(Jt,Ut);var Is=/^https?$/i,zi=["POST","PUT"];s=Jt.prototype,s.Ha=function(m){this.J=m},s.ea=function(m,I,R,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);I=I?I.toUpperCase():"GET",this.D=m,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nr.g(),this.v=this.o?$i(this.o):$i(nr),this.g.onreadystatechange=q(this.Ea,this);try{this.B=!0,this.g.open(I,String(m),!0),this.B=!1}catch(ue){Nn(this,ue);return}if(m=R||"",R=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var ee in L)R.set(ee,L[ee]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const ue of L.keys())R.set(ue,L.get(ue));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(R.keys()).find(ue=>ue.toLowerCase()=="content-type"),ee=C.FormData&&m instanceof C.FormData,!(0<=Array.prototype.indexOf.call(zi,I,void 0))||L||ee||R.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ue,Ie]of R)this.g.setRequestHeader(ue,Ie);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zs(this),this.u=!0,this.g.send(m),this.u=!1}catch(ue){Nn(this,ue)}};function Nn(m,I){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=I,m.m=5,Ts(m),Sr(m)}function Ts(m){m.A||(m.A=!0,Tn(m,"complete"),Tn(m,"error"))}s.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=m||7,Tn(this,"complete"),Tn(this,"abort"),Sr(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sr(this,!0)),Jt.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?Ks(this):this.bb())},s.bb=function(){Ks(this)};function Ks(m){if(m.h&&typeof x<"u"&&(!m.v[1]||Rr(m)!=4||m.Z()!=2)){if(m.u&&Rr(m)==4)kn(m.Ea,0,m);else if(Tn(m,"readystatechange"),Rr(m)==4){m.h=!1;try{const Ie=m.Z();e:switch(Ie){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var R;if(!(R=I)){var L;if(L=Ie===0){var ee=String(m.D).match(Tr)[1]||null;!ee&&C.self&&C.self.location&&(ee=C.self.location.protocol.slice(0,-1)),L=!Is.test(ee?ee.toLowerCase():"")}R=L}if(R)Tn(m,"complete"),Tn(m,"success");else{m.m=6;try{var ue=2<Rr(m)?m.g.statusText:""}catch{ue=""}m.l=ue+" ["+m.Z()+"]",Ts(m)}}finally{Sr(m)}}}}function Sr(m,I){if(m.g){Zs(m);const R=m.g,L=m.v[0]?()=>{}:null;m.g=null,m.v=null,I||Tn(m,"ready");try{R.onreadystatechange=L}catch{}}}function Zs(m){m.I&&(C.clearTimeout(m.I),m.I=null)}s.isActive=function(){return!!this.g};function Rr(m){return m.g?m.g.readyState:0}s.Z=function(){try{return 2<Rr(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(m){if(this.g){var I=this.g.responseText;return m&&I.indexOf(m)==0&&(I=I.substring(m.length)),Mt(I)}};function Mo(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.H){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Nt(m){const I={};m=(m.g&&2<=Rr(m)&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<m.length;L++){if(De(m[L]))continue;var R=Y(m[L]);const ee=R[0];if(R=R[1],typeof R!="string")continue;R=R.trim();const ue=I[ee]||[];I[ee]=ue,ue.push(R)}U(I,function(L){return L.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function di(m,I,R){return R&&R.internalChannelParams&&R.internalChannelParams[m]||I}function ss(m){this.Aa=0,this.i=[],this.j=new Ui,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=di("failFast",!1,m),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=di("baseRetryDelayMs",5e3,m),this.cb=di("retryDelaySeedMs",1e4,m),this.Wa=di("forwardChannelMaxRetries",2,m),this.wa=di("forwardChannelRequestTimeoutMs",2e4,m),this.pa=m&&m.xmlHttpFactory||void 0,this.Xa=m&&m.Tb||void 0,this.Ca=m&&m.useFetchStreams||!1,this.L=void 0,this.J=m&&m.supportsCrossDomainXhr||!1,this.K="",this.h=new Et(m&&m.concurrentRequestLimit),this.Da=new Bn,this.P=m&&m.fastHandshake||!1,this.O=m&&m.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=m&&m.Rb||!1,m&&m.xa&&this.j.xa(),m&&m.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&m&&m.detectBufferingProxy||!1,this.ja=void 0,m&&m.longPollingTimeout&&0<m.longPollingTimeout&&(this.ja=m.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ss.prototype,s.la=8,s.G=1,s.connect=function(m,I,R,L){Lt(0),this.W=m,this.H=I||{},R&&L!==void 0&&(this.H.OSID=R,this.H.OAID=L),this.F=this.X,this.I=Qe(this,null,this.W),rt(this)};function nn(m){if(ie(m),m.G==3){var I=m.U++,R=wt(m.I);if(Ne(R,"SID",m.K),Ne(R,"RID",I),Ne(R,"TYPE","terminate"),Si(m,R),I=new Ir(m,m.j,I),I.L=2,I.v=Zt(wt(R)),R=!1,C.navigator&&C.navigator.sendBeacon)try{R=C.navigator.sendBeacon(I.v.toString(),"")}catch{}!R&&C.Image&&(new Image().src=I.v,R=!0),R||(I.g=ua(I.j,null),I.g.ea(I.v)),I.F=Date.now(),St(I)}Bt(m)}function gi(m){m.g&&(Ss(m),m.g.cancel(),m.g=null)}function ie(m){gi(m),m.u&&(C.clearTimeout(m.u),m.u=null),as(m),m.h.cancel(),m.s&&(typeof m.s=="number"&&C.clearTimeout(m.s),m.s=null)}function rt(m){if(!ut(m.h)&&!m.s){m.s=!0;var I=m.Ga;Oe||be(),Te||(Oe(),Te=!0),ze.add(I,m),m.B=0}}function Fn(m,I){return yt(m.h)>=m.h.j-(m.s?1:0)?!1:m.s?(m.i=I.D.concat(m.i),!0):m.G==1||m.G==2||m.B>=(m.Va?0:m.Wa)?!1:(m.s=Wn(q(m.Ga,m,I),Rs(m,m.B)),m.B++,!0)}s.Ga=function(m){if(this.s)if(this.s=null,this.G==1){if(!m){this.U=Math.floor(1e5*Math.random()),m=this.U++;const ee=new Ir(this,this.j,m);let ue=this.o;if(this.S&&(ue?(ue=F(ue),W(ue,this.S)):ue=this.S),this.m!==null||this.O||(ee.H=ue,ue=null),this.P)e:{for(var I=0,R=0;R<this.i.length;R++){t:{var L=this.i[R];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(I+=L,4096<I){I=R;break e}if(I===4096||R===this.i.length-1){I=R+1;break e}}I=1e3}else I=1e3;I=os(this,ee,I),R=wt(this.I),Ne(R,"RID",m),Ne(R,"CVER",22),this.D&&Ne(R,"X-HTTP-Session-Id",this.D),Si(this,R),ue&&(this.O?I="headers="+encodeURIComponent(String(zr(ue)))+"&"+I:this.m&&$r(R,this.m,ue)),Cs(this.h,ee),this.Ua&&Ne(R,"TYPE","init"),this.P?(Ne(R,"$req",I),Ne(R,"SID","null"),ee.T=!0,hr(ee,R,null)):hr(ee,R,I),this.G=2}}else this.G==3&&(m?ji(this,m):this.i.length==0||ut(this.h)||ji(this))};function ji(m,I){var R;I?R=I.l:R=m.U++;const L=wt(m.I);Ne(L,"SID",m.K),Ne(L,"RID",R),Ne(L,"AID",m.T),Si(m,L),m.m&&m.o&&$r(L,m.m,m.o),R=new Ir(m,m.j,R,m.B+1),m.m===null&&(R.H=m.o),I&&(m.i=I.D.concat(m.i)),I=os(m,R,1e3),R.I=Math.round(.5*m.wa)+Math.round(.5*m.wa*Math.random()),Cs(m.h,R),hr(R,L,I)}function Si(m,I){m.H&&Le(m.H,function(R,L){Ne(I,L,R)}),m.l&&Wt({},function(R,L){Ne(I,L,R)})}function os(m,I,R){R=Math.min(m.i.length,R);var L=m.l?q(m.l.Na,m.l,m):null;e:{var ee=m.i;let ue=-1;for(;;){const Ie=["count="+R];ue==-1?0<R?(ue=ee[0].g,Ie.push("ofs="+ue)):ue=0:Ie.push("ofs="+ue);let jt=!0;for(let on=0;on<R;on++){let Ct=ee[on].g;const en=ee[on].map;if(Ct-=ue,0>Ct)ue=Math.max(0,ee[on].g-100),jt=!1;else try{la(en,Ie,"req"+Ct+"_")}catch{L&&L(en)}}if(jt){L=Ie.join("&");break e}}}return m=m.i.splice(0,R),I.D=m,L}function vs(m){if(!m.g&&!m.u){m.Y=1;var I=m.Fa;Oe||be(),Te||(Oe(),Te=!0),ze.add(I,m),m.v=0}}function $s(m){return m.g||m.u||3<=m.v?!1:(m.Y++,m.u=Wn(q(m.Fa,m),Rs(m,m.v)),m.v++,!0)}s.Fa=function(){if(this.u=null,yn(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var m=2*this.R;this.j.info("BP detection timer enabled: "+m),this.A=Wn(q(this.ab,this),m)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Lt(10),gi(this),yn(this))};function Ss(m){m.A!=null&&(C.clearTimeout(m.A),m.A=null)}function yn(m){m.g=new Ir(m,m.j,"rpc",m.Y),m.m===null&&(m.g.H=m.o),m.g.O=0;var I=wt(m.qa);Ne(I,"RID","rpc"),Ne(I,"SID",m.K),Ne(I,"AID",m.T),Ne(I,"CI",m.F?"0":"1"),!m.F&&m.ja&&Ne(I,"TO",m.ja),Ne(I,"TYPE","xmlhttp"),Si(m,I),m.m&&m.o&&$r(I,m.m,m.o),m.L&&(m.g.I=m.L);var R=m.g;m=m.ia,R.L=1,R.v=Zt(wt(I)),R.m=null,R.P=!0,Ln(R,m)}s.Za=function(){this.C!=null&&(this.C=null,gi(this),$s(this),Lt(19))};function as(m){m.C!=null&&(C.clearTimeout(m.C),m.C=null)}function Yt(m,I){var R=null;if(m.g==I){as(m),Ss(m),m.g=null;var L=2}else if(Xn(m.h,I))R=I.D,Ys(m.h,I),L=1;else return;if(m.G!=0){if(I.o)if(L==1){R=I.m?I.m.length:0,I=Date.now()-I.F;var ee=m.B;L=Vi(),Tn(L,new Ws(L,R)),rt(m)}else vs(m);else if(ee=I.s,ee==3||ee==0&&0<I.X||!(L==1&&Fn(m,I)||L==2&&$s(m)))switch(R&&0<R.length&&(I=m.h,I.i=I.i.concat(R)),ee){case 1:dr(m,5);break;case 4:dr(m,10);break;case 3:dr(m,6);break;default:dr(m,2)}}}function Rs(m,I){let R=m.Ta+Math.floor(Math.random()*m.cb);return m.isActive()||(R*=2),R*I}function dr(m,I){if(m.j.info("Error code "+I),I==2){var R=q(m.fb,m),L=m.Xa;const ee=!L;L=new vr(L||"//www.google.com/images/cleardot.gif"),C.location&&C.location.protocol=="http"||mn(L,"https"),Zt(L),ee?Ze(L.toString(),R):aa(L.toString(),R)}else Lt(2);m.G=0,m.l&&m.l.sa(I),Bt(m),ie(m)}s.fb=function(m){m?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Bt(m){if(m.G=0,m.ka=[],m.l){const I=pn(m.h);(I.length!=0||m.i.length!=0)&&(oe(m.ka,I),oe(m.ka,m.i),m.h.i.length=0,ce(m.i),m.i.length=0),m.l.ra()}}function Qe(m,I,R){var L=R instanceof vr?wt(R):new vr(R);if(L.g!="")I&&(L.g=I+"."+L.g),J(L,L.s);else{var ee=C.location;L=ee.protocol,I=I?I+"."+ee.hostname:ee.hostname,ee=+ee.port;var ue=new vr(null);L&&mn(ue,L),I&&(ue.g=I),ee&&J(ue,ee),R&&(ue.l=R),L=ue}return R=m.D,I=m.ya,R&&I&&Ne(L,R,I),Ne(L,"VER",m.la),Si(m,L),L}function ua(m,I,R){if(I&&!m.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=m.Ca&&!m.pa?new Jt(new hi({eb:R})):new Jt(m.pa),I.Ha(m.J),I}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function zt(){}s=zt.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function Jr(){}Jr.prototype.g=function(m,I){return new Dn(m,I)};function Dn(m,I){Ut.call(this),this.g=new ss(I),this.l=m,this.h=I&&I.messageUrlParams||null,m=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(m?m["X-WebChannel-Content-Type"]=I.messageContentType:m={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(m?m["X-WebChannel-Client-Profile"]=I.va:m={"X-WebChannel-Client-Profile":I.va}),this.g.S=m,(m=I&&I.Sb)&&!De(m)&&(this.g.m=m),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!De(I)&&(this.g.D=I,m=this.h,m!==null&&I in m&&(m=this.h,I in m&&delete m[I])),this.j=new ei(this)}fe(Dn,Ut),Dn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dn.prototype.close=function(){nn(this.g)},Dn.prototype.o=function(m){var I=this.g;if(typeof m=="string"){var R={};R.__data__=m,m=R}else this.u&&(R={},R.__data__=sn(m),m=R);I.i.push(new oa(I.Ya++,m)),I.G==3&&rt(I)},Dn.prototype.N=function(){this.g.l=null,delete this.j,nn(this.g),delete this.g,Dn.aa.N.call(this)};function ca(m){tr.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var I=m.__sm__;if(I){e:{for(const R in I){m=R;break e}m=void 0}(this.i=m)&&(m=this.i,I=I!==null&&m in I?I[m]:void 0),this.data=I}else this.data=m}fe(ca,tr);function jr(){As.call(this),this.status=1}fe(jr,As);function ei(m){this.g=m}fe(ei,zt),ei.prototype.ua=function(){Tn(this.g,"a")},ei.prototype.ta=function(m){Tn(this.g,new ca(m))},ei.prototype.sa=function(m){Tn(this.g,new jr)},ei.prototype.ra=function(){Tn(this.g,"b")},Jr.prototype.createWebChannel=Jr.prototype.g,Dn.prototype.send=Dn.prototype.o,Dn.prototype.open=Dn.prototype.m,Dn.prototype.close=Dn.prototype.close,Qg=function(){return new Jr},Yg=function(){return Vi()},Xg=ui,ef={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ts.NO_ERROR=0,ts.TIMEOUT=8,ts.HTTP_ERROR=6,Uu=ts,Gn.COMPLETE="complete",Gg=Gn,_s.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Ut.prototype.listen=Ut.prototype.K,xl=_s,Jt.prototype.listenOnce=Jt.prototype.L,Jt.prototype.getLastError=Jt.prototype.Ka,Jt.prototype.getLastErrorCode=Jt.prototype.Ba,Jt.prototype.getStatus=Jt.prototype.Z,Jt.prototype.getResponseJson=Jt.prototype.Oa,Jt.prototype.getResponseText=Jt.prototype.oa,Jt.prototype.send=Jt.prototype.ea,Jt.prototype.setWithCredentials=Jt.prototype.Ha,Wg=Jt}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});const O0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Lr.UNAUTHENTICATED=new Lr(null),Lr.GOOGLE_CREDENTIALS=new Lr("google-credentials-uid"),Lr.FIRST_PARTY=new Lr("first-party-uid"),Lr.MOCK_USER=new Lr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ha="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=new kg("@firebase/firestore");function Na(){return $o.logLevel}function Be(s,...e){if($o.logLevel<=Ot.DEBUG){const n=e.map(Af);$o.debug(`Firestore (${Ha}): ${s}`,...n)}}function js(s,...e){if($o.logLevel<=Ot.ERROR){const n=e.map(Af);$o.error(`Firestore (${Ha}): ${s}`,...n)}}function La(s,...e){if($o.logLevel<=Ot.WARN){const n=e.map(Af);$o.warn(`Firestore (${Ha}): ${s}`,...n)}}function Af(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lt(s="Unexpected state"){const e=`FIRESTORE (${Ha}) INTERNAL ASSERTION FAILED: `+s;throw js(e),new Error(e)}function Gt(s,e){s||lt()}function ft(s,e){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $e extends ea{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Lr.UNAUTHENTICATED))}shutdown(){}}class Hw{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ww{constructor(e){this.t=e,this.currentUser=Lr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Gt(this.o===void 0);let l=this.i;const h=S=>this.i!==l?(l=this.i,n(S)):Promise.resolve();let g=new Ao;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Ao,e.enqueueRetryable(()=>h(this.currentUser))};const x=()=>{const S=g;e.enqueueRetryable(async()=>{await S.promise,await h(this.currentUser)})},C=S=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=S,this.o&&(this.auth.addAuthTokenListener(this.o),x())};this.t.onInit(S=>C(S)),setTimeout(()=>{if(!this.auth){const S=this.t.getImmediate({optional:!0});S?C(S):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Ao)}},0),x()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(l=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):l?(Gt(typeof l.accessToken=="string"),new qg(l.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Gt(e===null||typeof e=="string"),new Lr(e)}}class Gw{constructor(e,n,l){this.l=e,this.h=n,this.P=l,this.type="FirstParty",this.user=Lr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Xw{constructor(e,n,l){this.l=e,this.h=n,this.P=l}getToken(){return Promise.resolve(new Gw(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Lr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Yw{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Qw{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Gt(this.o===void 0);const l=g=>{g.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const x=g.token!==this.R;return this.R=g.token,Be("FirebaseAppCheckTokenProvider",`Received ${x?"new":"existing"} token.`),x?n(g.token):Promise.resolve()};this.o=g=>{e.enqueueRetryable(()=>l(g))};const h=g=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(g=>h(g)),setTimeout(()=>{if(!this.appCheck){const g=this.A.getImmediate({optional:!0});g?h(g):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Gt(typeof n.token=="string"),this.R=n.token,new Yw(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qw(s){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let l=0;l<s;l++)n[l]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let l="";for(;l.length<20;){const h=qw(40);for(let g=0;g<h.length;++g)l.length<20&&h[g]<n&&(l+=e.charAt(h[g]%e.length))}return l}}function Dt(s,e){return s<e?-1:s>e?1:0}function Ba(s,e,n){return s.length===e.length&&s.every((l,h)=>n(l,e[h]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{static now(){return $n.fromMillis(Date.now())}static fromDate(e){return $n.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),l=Math.floor(1e6*(e-1e3*n));return new $n(n,l)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $e(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $e(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $e(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $e(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Dt(this.nanoseconds,e.nanoseconds):Dt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{static fromTimestamp(e){return new ct(e)}static min(){return new ct(new $n(0,0))}static max(){return new ct(new $n(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,l){n===void 0?n=0:n>e.length&&lt(),l===void 0?l=e.length-n:l>e.length-n&&lt(),this.segments=e,this.offset=n,this.len=l}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(l=>{n.push(l)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,l=this.limit();n<l;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const l=Math.min(e.length,n.length);for(let h=0;h<l;h++){const g=e.get(h),x=n.get(h);if(g<x)return-1;if(g>x)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class xn extends Nl{construct(e,n,l){return new xn(e,n,l)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const l of e){if(l.indexOf("//")>=0)throw new $e(Ee.INVALID_ARGUMENT,`Invalid segment (${l}). Paths must not contain // in them.`);n.push(...l.split("/").filter(h=>h.length>0))}return new xn(n)}static emptyPath(){return new xn([])}}const Kw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Er extends Nl{construct(e,n,l){return new Er(e,n,l)}static isValidIdentifier(e){return Kw.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Er(["__name__"])}static fromServerFormat(e){const n=[];let l="",h=0;const g=()=>{if(l.length===0)throw new $e(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(l),l=""};let x=!1;for(;h<e.length;){const C=e[h];if(C==="\\"){if(h+1===e.length)throw new $e(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const S=e[h+1];if(S!=="\\"&&S!=="."&&S!=="`")throw new $e(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);l+=S,h+=2}else C==="`"?(x=!x,h++):C!=="."||x?(l+=C,h++):(g(),h++)}if(g(),x)throw new $e(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Er(n)}static emptyPath(){return new Er([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.path=e}static fromPath(e){return new tt(xn.fromString(e))}static fromName(e){return new tt(xn.fromString(e).popFirst(5))}static empty(){return new tt(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return xn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tt(new xn(e.slice()))}}function Zw(s,e){const n=s.toTimestamp().seconds,l=s.toTimestamp().nanoseconds+1,h=ct.fromTimestamp(l===1e9?new $n(n+1,0):new $n(n,l));return new To(h,tt.empty(),e)}function $w(s){return new To(s.readTime,s.key,-1)}class To{constructor(e,n,l){this.readTime=e,this.documentKey=n,this.largestBatchId=l}static min(){return new To(ct.min(),tt.empty(),-1)}static max(){return new To(ct.max(),tt.empty(),-1)}}function Jw(s,e){let n=s.readTime.compareTo(e.readTime);return n!==0?n:(n=tt.comparator(s.documentKey,e.documentKey),n!==0?n:Dt(s.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tx{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wa(s){if(s.code!==Ee.FAILED_PRECONDITION||s.message!==ex)throw s;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ge((l,h)=>{this.nextCallback=g=>{this.wrapSuccess(e,g).next(l,h)},this.catchCallback=g=>{this.wrapFailure(n,g).next(l,h)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ge?n:ge.resolve(n)}catch(n){return ge.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ge.reject(n)}static resolve(e){return new ge((n,l)=>{n(e)})}static reject(e){return new ge((n,l)=>{l(e)})}static waitFor(e){return new ge((n,l)=>{let h=0,g=0,x=!1;e.forEach(C=>{++h,C.next(()=>{++g,x&&g===h&&n()},S=>l(S))}),x=!0,g===h&&n()})}static or(e){let n=ge.resolve(!1);for(const l of e)n=n.next(h=>h?ge.resolve(h):l());return n}static forEach(e,n){const l=[];return e.forEach((h,g)=>{l.push(n.call(this,h,g))}),this.waitFor(l)}static mapArray(e,n){return new ge((l,h)=>{const g=e.length,x=new Array(g);let C=0;for(let S=0;S<g;S++){const A=S;n(e[A]).next(O=>{x[A]=O,++C,C===g&&l(x)},O=>h(O))}})}static doWhile(e,n){return new ge((l,h)=>{const g=()=>{e()===!0?n().next(()=>{g()},h):l()};g()})}}function nx(s){const e=s.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ga(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=l=>this.ie(l),this.se=l=>n.writeSequenceNumber(l))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sc.oe=-1;function oc(s){return s==null}function qu(s){return s===0&&1/s==-1/0}function rx(s){return typeof s=="number"&&Number.isInteger(s)&&!qu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ix(s){let e="";for(let n=0;n<s.length;n++)e.length>0&&(e=M0(e)),e=sx(s.get(n),e);return M0(e)}function sx(s,e){let n=e;const l=s.length;for(let h=0;h<l;h++){const g=s.charAt(h);switch(g){case"\0":n+="";break;case"":n+="";break;default:n+=g}}return n}function M0(s){return s+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(s){let e=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e++;return e}function ta(s,e){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&e(n,s[n])}function Zg(s){for(const e in s)if(Object.prototype.hasOwnProperty.call(s,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e,n){this.comparator=e,this.root=n||xr.EMPTY}insert(e,n){return new In(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,xr.BLACK,null,null))}remove(e){return new In(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const l=this.comparator(e,n.key);if(l===0)return n.value;l<0?n=n.left:l>0&&(n=n.right)}return null}indexOf(e){let n=0,l=this.root;for(;!l.isEmpty();){const h=this.comparator(e,l.key);if(h===0)return n+l.left.size;h<0?l=l.left:(n+=l.left.size+1,l=l.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,l)=>(e(n,l),!1))}toString(){const e=[];return this.inorderTraversal((n,l)=>(e.push(`${n}:${l}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,n,l,h){this.isReverse=h,this.nodeStack=[];let g=1;for(;!e.isEmpty();)if(g=n?l(e.key,n):1,n&&h&&(g*=-1),g<0)e=this.isReverse?e.left:e.right;else{if(g===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xr{constructor(e,n,l,h,g){this.key=e,this.value=n,this.color=l??xr.RED,this.left=h??xr.EMPTY,this.right=g??xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,l,h,g){return new xr(e??this.key,n??this.value,l??this.color,h??this.left,g??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,l){let h=this;const g=l(e,h.key);return h=g<0?h.copy(null,null,null,h.left.insert(e,n,l),null):g===0?h.copy(null,n,null,null,null):h.copy(null,null,null,null,h.right.insert(e,n,l)),h.fixUp()}removeMin(){if(this.left.isEmpty())return xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let l,h=this;if(n(e,h.key)<0)h.left.isEmpty()||h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),h=h.copy(null,null,null,h.left.remove(e,n),null);else{if(h.left.isRed()&&(h=h.rotateRight()),h.right.isEmpty()||h.right.isRed()||h.right.left.isRed()||(h=h.moveRedRight()),n(e,h.key)===0){if(h.right.isEmpty())return xr.EMPTY;l=h.right.min(),h=h.copy(l.key,l.value,null,null,h.right.removeMin())}h=h.copy(null,null,null,null,h.right.remove(e,n))}return h.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}xr.EMPTY=null,xr.RED=!0,xr.BLACK=!1;xr.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(e,n,l,h,g){return this}insert(e,n,l){return new xr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.comparator=e,this.data=new In(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,l)=>(e(n),!1))}forEachInRange(e,n){const l=this.data.getIteratorFrom(e[0]);for(;l.hasNext();){const h=l.getNext();if(this.comparator(h.key,e[1])>=0)return;n(h.key)}}forEachWhile(e,n){let l;for(l=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();l.hasNext();)if(!e(l.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new k0(this.data.getIterator())}getIteratorFrom(e){return new k0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(l=>{n=n.add(l)}),n}isEqual(e){if(!(e instanceof Jn)||this.size!==e.size)return!1;const n=this.data.getIterator(),l=e.data.getIterator();for(;n.hasNext();){const h=n.getNext().key,g=l.getNext().key;if(this.comparator(h,g)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Jn(this.comparator);return n.data=e,n}}class k0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.fields=e,e.sort(Er.comparator)}static empty(){return new Ki([])}unionWith(e){let n=new Jn(Er.comparator);for(const l of this.fields)n=n.add(l);for(const l of e)n=n.add(l);return new Ki(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ba(this.fields,e.fields,(n,l)=>n.isEqual(l))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(h){try{return atob(h)}catch(g){throw typeof DOMException<"u"&&g instanceof DOMException?new $g("Invalid base64 string: "+g):g}}(e);return new _r(n)}static fromUint8Array(e){const n=function(h){let g="";for(let x=0;x<h.length;++x)g+=String.fromCharCode(h[x]);return g}(e);return new _r(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const l=new Uint8Array(n.length);for(let h=0;h<n.length;h++)l[h]=n.charCodeAt(h);return l}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Dt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_r.EMPTY_BYTE_STRING=new _r("");const ox=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(s){if(Gt(!!s),typeof s=="string"){let e=0;const n=ox.exec(s);if(Gt(!!n),n[1]){let h=n[1];h=(h+"000000000").substr(0,9),e=Number(h)}const l=new Date(s);return{seconds:Math.floor(l.getTime()/1e3),nanos:e}}return{seconds:zn(s.seconds),nanos:zn(s.nanos)}}function zn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function So(s){return typeof s=="string"?_r.fromBase64String(s):_r.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ac(s){const e=s.mapValue.fields.__previous_value__;return Cf(e)?ac(e):e}function Dl(s){const e=vo(s.mapValue.fields.__local_write_time__.timestampValue);return new $n(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(e,n,l,h,g,x,C,S,A){this.databaseId=e,this.appId=n,this.persistenceKey=l,this.host=h,this.ssl=g,this.forceLongPolling=x,this.autoDetectLongPolling=C,this.longPollingOptions=S,this.useFetchStreams=A}}class bl{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new bl("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ro(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Cf(s)?4:ux(s)?9007199254740991:lx(s)?10:11:lt()}function ms(s,e){if(s===e)return!0;const n=Ro(s);if(n!==Ro(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===e.booleanValue;case 4:return Dl(s).isEqual(Dl(e));case 3:return function(h,g){if(typeof h.timestampValue=="string"&&typeof g.timestampValue=="string"&&h.timestampValue.length===g.timestampValue.length)return h.timestampValue===g.timestampValue;const x=vo(h.timestampValue),C=vo(g.timestampValue);return x.seconds===C.seconds&&x.nanos===C.nanos}(s,e);case 5:return s.stringValue===e.stringValue;case 6:return function(h,g){return So(h.bytesValue).isEqual(So(g.bytesValue))}(s,e);case 7:return s.referenceValue===e.referenceValue;case 8:return function(h,g){return zn(h.geoPointValue.latitude)===zn(g.geoPointValue.latitude)&&zn(h.geoPointValue.longitude)===zn(g.geoPointValue.longitude)}(s,e);case 2:return function(h,g){if("integerValue"in h&&"integerValue"in g)return zn(h.integerValue)===zn(g.integerValue);if("doubleValue"in h&&"doubleValue"in g){const x=zn(h.doubleValue),C=zn(g.doubleValue);return x===C?qu(x)===qu(C):isNaN(x)&&isNaN(C)}return!1}(s,e);case 9:return Ba(s.arrayValue.values||[],e.arrayValue.values||[],ms);case 10:case 11:return function(h,g){const x=h.mapValue.fields||{},C=g.mapValue.fields||{};if(P0(x)!==P0(C))return!1;for(const S in x)if(x.hasOwnProperty(S)&&(C[S]===void 0||!ms(x[S],C[S])))return!1;return!0}(s,e);default:return lt()}}function Ol(s,e){return(s.values||[]).find(n=>ms(n,e))!==void 0}function Fa(s,e){if(s===e)return 0;const n=Ro(s),l=Ro(e);if(n!==l)return Dt(n,l);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dt(s.booleanValue,e.booleanValue);case 2:return function(g,x){const C=zn(g.integerValue||g.doubleValue),S=zn(x.integerValue||x.doubleValue);return C<S?-1:C>S?1:C===S?0:isNaN(C)?isNaN(S)?0:-1:1}(s,e);case 3:return L0(s.timestampValue,e.timestampValue);case 4:return L0(Dl(s),Dl(e));case 5:return Dt(s.stringValue,e.stringValue);case 6:return function(g,x){const C=So(g),S=So(x);return C.compareTo(S)}(s.bytesValue,e.bytesValue);case 7:return function(g,x){const C=g.split("/"),S=x.split("/");for(let A=0;A<C.length&&A<S.length;A++){const O=Dt(C[A],S[A]);if(O!==0)return O}return Dt(C.length,S.length)}(s.referenceValue,e.referenceValue);case 8:return function(g,x){const C=Dt(zn(g.latitude),zn(x.latitude));return C!==0?C:Dt(zn(g.longitude),zn(x.longitude))}(s.geoPointValue,e.geoPointValue);case 9:return B0(s.arrayValue,e.arrayValue);case 10:return function(g,x){var C,S,A,O;const k=g.fields||{},q=x.fields||{},te=(C=k.value)===null||C===void 0?void 0:C.arrayValue,fe=(S=q.value)===null||S===void 0?void 0:S.arrayValue,ce=Dt(((A=te==null?void 0:te.values)===null||A===void 0?void 0:A.length)||0,((O=fe==null?void 0:fe.values)===null||O===void 0?void 0:O.length)||0);return ce!==0?ce:B0(te,fe)}(s.mapValue,e.mapValue);case 11:return function(g,x){if(g===ku.mapValue&&x===ku.mapValue)return 0;if(g===ku.mapValue)return 1;if(x===ku.mapValue)return-1;const C=g.fields||{},S=Object.keys(C),A=x.fields||{},O=Object.keys(A);S.sort(),O.sort();for(let k=0;k<S.length&&k<O.length;++k){const q=Dt(S[k],O[k]);if(q!==0)return q;const te=Fa(C[S[k]],A[O[k]]);if(te!==0)return te}return Dt(S.length,O.length)}(s.mapValue,e.mapValue);default:throw lt()}}function L0(s,e){if(typeof s=="string"&&typeof e=="string"&&s.length===e.length)return Dt(s,e);const n=vo(s),l=vo(e),h=Dt(n.seconds,l.seconds);return h!==0?h:Dt(n.nanos,l.nanos)}function B0(s,e){const n=s.values||[],l=e.values||[];for(let h=0;h<n.length&&h<l.length;++h){const g=Fa(n[h],l[h]);if(g)return g}return Dt(n.length,l.length)}function Va(s){return tf(s)}function tf(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?function(n){const l=vo(n);return`time(${l.seconds},${l.nanos})`}(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?function(n){return So(n).toBase64()}(s.bytesValue):"referenceValue"in s?function(n){return tt.fromName(n).toString()}(s.referenceValue):"geoPointValue"in s?function(n){return`geo(${n.latitude},${n.longitude})`}(s.geoPointValue):"arrayValue"in s?function(n){let l="[",h=!0;for(const g of n.values||[])h?h=!1:l+=",",l+=tf(g);return l+"]"}(s.arrayValue):"mapValue"in s?function(n){const l=Object.keys(n.fields||{}).sort();let h="{",g=!0;for(const x of l)g?g=!1:h+=",",h+=`${x}:${tf(n.fields[x])}`;return h+"}"}(s.mapValue):lt()}function zu(s){switch(Ro(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ac(s);return e?16+zu(e):16;case 5:return 2*s.stringValue.length;case 6:return So(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return function(l){return(l.values||[]).reduce((h,g)=>h+zu(g),0)}(s.arrayValue);case 10:case 11:return function(l){let h=0;return ta(l.fields,(g,x)=>{h+=g.length+zu(x)}),h}(s.mapValue);default:throw lt()}}function nf(s){return!!s&&"integerValue"in s}function If(s){return!!s&&"arrayValue"in s}function F0(s){return!!s&&"nullValue"in s}function V0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function ju(s){return!!s&&"mapValue"in s}function lx(s){var e,n;return((n=(((e=s==null?void 0:s.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Al(s){if(s.geoPointValue)return{geoPointValue:Object.assign({},s.geoPointValue)};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:Object.assign({},s.timestampValue)};if(s.mapValue){const e={mapValue:{fields:{}}};return ta(s.mapValue.fields,(n,l)=>e.mapValue.fields[n]=Al(l)),e}if(s.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Al(s.arrayValue.values[n]);return e}return Object.assign({},s)}function ux(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.value=e}static empty(){return new Pi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let l=0;l<e.length-1;++l)if(n=(n.mapValue.fields||{})[e.get(l)],!ju(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Al(n)}setAll(e){let n=Er.emptyPath(),l={},h=[];e.forEach((x,C)=>{if(!n.isImmediateParentOf(C)){const S=this.getFieldsMap(n);this.applyChanges(S,l,h),l={},h=[],n=C.popLast()}x?l[C.lastSegment()]=Al(x):h.push(C.lastSegment())});const g=this.getFieldsMap(n);this.applyChanges(g,l,h)}delete(e){const n=this.field(e.popLast());ju(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ms(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let l=0;l<e.length;++l){let h=n.mapValue.fields[e.get(l)];ju(h)&&h.mapValue.fields||(h={mapValue:{fields:{}}},n.mapValue.fields[e.get(l)]=h),n=h}return n.mapValue.fields}applyChanges(e,n,l){ta(n,(h,g)=>e[h]=g);for(const h of l)delete e[h]}clone(){return new Pi(Al(this.value))}}function Jg(s){const e=[];return ta(s.fields,(n,l)=>{const h=new Er([n]);if(ju(l)){const g=Jg(l.mapValue).fields;if(g.length===0)e.push(h);else for(const x of g)e.push(h.child(x))}else e.push(h)}),new Ki(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,n,l,h,g,x,C){this.key=e,this.documentType=n,this.version=l,this.readTime=h,this.createTime=g,this.data=x,this.documentState=C}static newInvalidDocument(e){return new Br(e,0,ct.min(),ct.min(),ct.min(),Pi.empty(),0)}static newFoundDocument(e,n,l,h){return new Br(e,1,n,ct.min(),l,h,0)}static newNoDocument(e,n){return new Br(e,2,n,ct.min(),ct.min(),Pi.empty(),0)}static newUnknownDocument(e,n){return new Br(e,3,n,ct.min(),ct.min(),Pi.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ct.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Br&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Br(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n){this.position=e,this.inclusive=n}}function U0(s,e,n){let l=0;for(let h=0;h<s.position.length;h++){const g=e[h],x=s.position[h];if(g.field.isKeyField()?l=tt.comparator(tt.fromName(x.referenceValue),n.key):l=Fa(x,n.data.field(g.field)),g.dir==="desc"&&(l*=-1),l!==0)break}return l}function z0(s,e){if(s===null)return e===null;if(e===null||s.inclusive!==e.inclusive||s.position.length!==e.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!ms(s.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,n="asc"){this.field=e,this.dir=n}}function cx(s,e){return s.dir===e.dir&&s.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{}class Zn extends ep{constructor(e,n,l){super(),this.field=e,this.op=n,this.value=l}static create(e,n,l){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,l):new fx(e,n,l):n==="array-contains"?new px(e,l):n==="in"?new mx(e,l):n==="not-in"?new yx(e,l):n==="array-contains-any"?new wx(e,l):new Zn(e,n,l)}static createKeyFieldInFilter(e,n,l){return n==="in"?new dx(e,l):new gx(e,l)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Fa(n,this.value)):n!==null&&Ro(this.value)===Ro(n)&&this.matchesComparison(Fa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ys extends ep{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ys(e,n)}matches(e){return tp(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function tp(s){return s.op==="and"}function np(s){return hx(s)&&tp(s)}function hx(s){for(const e of s.filters)if(e instanceof ys)return!1;return!0}function rf(s){if(s instanceof Zn)return s.field.canonicalString()+s.op.toString()+Va(s.value);if(np(s))return s.filters.map(e=>rf(e)).join(",");{const e=s.filters.map(n=>rf(n)).join(",");return`${s.op}(${e})`}}function rp(s,e){return s instanceof Zn?function(l,h){return h instanceof Zn&&l.op===h.op&&l.field.isEqual(h.field)&&ms(l.value,h.value)}(s,e):s instanceof ys?function(l,h){return h instanceof ys&&l.op===h.op&&l.filters.length===h.filters.length?l.filters.reduce((g,x,C)=>g&&rp(x,h.filters[C]),!0):!1}(s,e):void lt()}function ip(s){return s instanceof Zn?function(n){return`${n.field.canonicalString()} ${n.op} ${Va(n.value)}`}(s):s instanceof ys?function(n){return n.op.toString()+" {"+n.getFilters().map(ip).join(" ,")+"}"}(s):"Filter"}class fx extends Zn{constructor(e,n,l){super(e,n,l),this.key=tt.fromName(l.referenceValue)}matches(e){const n=tt.comparator(e.key,this.key);return this.matchesComparison(n)}}class dx extends Zn{constructor(e,n){super(e,"in",n),this.keys=sp("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class gx extends Zn{constructor(e,n){super(e,"not-in",n),this.keys=sp("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function sp(s,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(l=>tt.fromName(l.referenceValue))}class px extends Zn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return If(n)&&Ol(n.arrayValue,this.value)}}class mx extends Zn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ol(this.value.arrayValue,n)}}class yx extends Zn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ol(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ol(this.value.arrayValue,n)}}class wx extends Zn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!If(n)||!n.arrayValue.values)&&n.arrayValue.values.some(l=>Ol(this.value.arrayValue,l))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n=null,l=[],h=[],g=null,x=null,C=null){this.path=e,this.collectionGroup=n,this.orderBy=l,this.filters=h,this.limit=g,this.startAt=x,this.endAt=C,this.ue=null}}function j0(s,e=null,n=[],l=[],h=null,g=null,x=null){return new xx(s,e,n,l,h,g,x)}function Tf(s){const e=ft(s);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(l=>rf(l)).join(","),n+="|ob:",n+=e.orderBy.map(l=>function(g){return g.field.canonicalString()+g.dir}(l)).join(","),oc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(l=>Va(l)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(l=>Va(l)).join(",")),e.ue=n}return e.ue}function vf(s,e){if(s.limit!==e.limit||s.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!cx(s.orderBy[n],e.orderBy[n]))return!1;if(s.filters.length!==e.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!rp(s.filters[n],e.filters[n]))return!1;return s.collectionGroup===e.collectionGroup&&!!s.path.isEqual(e.path)&&!!z0(s.startAt,e.startAt)&&z0(s.endAt,e.endAt)}function sf(s){return tt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n=null,l=[],h=[],g=null,x="F",C=null,S=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=l,this.filters=h,this.limit=g,this.limitType=x,this.startAt=C,this.endAt=S,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ex(s,e,n,l,h,g,x,C){return new lc(s,e,n,l,h,g,x,C)}function Sf(s){return new lc(s)}function H0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function _x(s){return s.collectionGroup!==null}function Cl(s){const e=ft(s);if(e.ce===null){e.ce=[];const n=new Set;for(const g of e.explicitOrderBy)e.ce.push(g),n.add(g.field.canonicalString());const l=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(x){let C=new Jn(Er.comparator);return x.filters.forEach(S=>{S.getFlattenedFilters().forEach(A=>{A.isInequality()&&(C=C.add(A.field))})}),C})(e).forEach(g=>{n.has(g.canonicalString())||g.isKeyField()||e.ce.push(new Zu(g,l))}),n.has(Er.keyField().canonicalString())||e.ce.push(new Zu(Er.keyField(),l))}return e.ce}function gs(s){const e=ft(s);return e.le||(e.le=Ax(e,Cl(s))),e.le}function Ax(s,e){if(s.limitType==="F")return j0(s.path,s.collectionGroup,e,s.filters,s.limit,s.startAt,s.endAt);{e=e.map(h=>{const g=h.dir==="desc"?"asc":"desc";return new Zu(h.field,g)});const n=s.endAt?new Ku(s.endAt.position,s.endAt.inclusive):null,l=s.startAt?new Ku(s.startAt.position,s.startAt.inclusive):null;return j0(s.path,s.collectionGroup,e,s.filters,s.limit,n,l)}}function of(s,e,n){return new lc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),e,n,s.startAt,s.endAt)}function uc(s,e){return vf(gs(s),gs(e))&&s.limitType===e.limitType}function op(s){return`${Tf(gs(s))}|lt:${s.limitType}`}function Da(s){return`Query(target=${function(n){let l=n.path.canonicalString();return n.collectionGroup!==null&&(l+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(l+=`, filters: [${n.filters.map(h=>ip(h)).join(", ")}]`),oc(n.limit)||(l+=", limit: "+n.limit),n.orderBy.length>0&&(l+=`, orderBy: [${n.orderBy.map(h=>function(x){return`${x.field.canonicalString()} (${x.dir})`}(h)).join(", ")}]`),n.startAt&&(l+=", startAt: ",l+=n.startAt.inclusive?"b:":"a:",l+=n.startAt.position.map(h=>Va(h)).join(",")),n.endAt&&(l+=", endAt: ",l+=n.endAt.inclusive?"a:":"b:",l+=n.endAt.position.map(h=>Va(h)).join(",")),`Target(${l})`}(gs(s))}; limitType=${s.limitType})`}function cc(s,e){return e.isFoundDocument()&&function(l,h){const g=h.key.path;return l.collectionGroup!==null?h.key.hasCollectionId(l.collectionGroup)&&l.path.isPrefixOf(g):tt.isDocumentKey(l.path)?l.path.isEqual(g):l.path.isImmediateParentOf(g)}(s,e)&&function(l,h){for(const g of Cl(l))if(!g.field.isKeyField()&&h.data.field(g.field)===null)return!1;return!0}(s,e)&&function(l,h){for(const g of l.filters)if(!g.matches(h))return!1;return!0}(s,e)&&function(l,h){return!(l.startAt&&!function(x,C,S){const A=U0(x,C,S);return x.inclusive?A<=0:A<0}(l.startAt,Cl(l),h)||l.endAt&&!function(x,C,S){const A=U0(x,C,S);return x.inclusive?A>=0:A>0}(l.endAt,Cl(l),h))}(s,e)}function Cx(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function ap(s){return(e,n)=>{let l=!1;for(const h of Cl(s)){const g=Ix(h,e,n);if(g!==0)return g;l=l||h.field.isKeyField()}return 0}}function Ix(s,e,n){const l=s.field.isKeyField()?tt.comparator(e.key,n.key):function(g,x,C){const S=x.data.field(g),A=C.data.field(g);return S!==null&&A!==null?Fa(S,A):lt()}(s.field,e,n);switch(s.dir){case"asc":return l;case"desc":return-1*l;default:return lt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),l=this.inner[n];if(l!==void 0){for(const[h,g]of l)if(this.equalsFn(h,e))return g}}has(e){return this.get(e)!==void 0}set(e,n){const l=this.mapKeyFn(e),h=this.inner[l];if(h===void 0)return this.inner[l]=[[e,n]],void this.innerSize++;for(let g=0;g<h.length;g++)if(this.equalsFn(h[g][0],e))return void(h[g]=[e,n]);h.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),l=this.inner[n];if(l===void 0)return!1;for(let h=0;h<l.length;h++)if(this.equalsFn(l[h][0],e))return l.length===1?delete this.inner[n]:l.splice(h,1),this.innerSize--,!0;return!1}forEach(e){ta(this.inner,(n,l)=>{for(const[h,g]of l)e(h,g)})}isEmpty(){return Zg(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new In(tt.comparator);function Hs(){return Tx}const lp=new In(tt.comparator);function El(...s){let e=lp;for(const n of s)e=e.insert(n.key,n);return e}function up(s){let e=lp;return s.forEach((n,l)=>e=e.insert(n,l.overlayedDocument)),e}function qo(){return Il()}function cp(){return Il()}function Il(){return new na(s=>s.toString(),(s,e)=>s.isEqual(e))}const vx=new In(tt.comparator),Sx=new Jn(tt.comparator);function Tt(...s){let e=Sx;for(const n of s)e=e.add(n);return e}const Rx=new Jn(Dt);function Nx(){return Rx}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(s,e){if(s.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qu(e)?"-0":e}}function hp(s){return{integerValue:""+s}}function Dx(s,e){return rx(e)?hp(e):Rf(s,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc{constructor(){this._=void 0}}function bx(s,e,n){return s instanceof Ml?function(h,g){const x={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return g&&Cf(g)&&(g=ac(g)),g&&(x.fields.__previous_value__=g),{mapValue:x}}(n,e):s instanceof Pl?dp(s,e):s instanceof kl?gp(s,e):function(h,g){const x=fp(h,g),C=W0(x)+W0(h.Pe);return nf(x)&&nf(h.Pe)?hp(C):Rf(h.serializer,C)}(s,e)}function Ox(s,e,n){return s instanceof Pl?dp(s,e):s instanceof kl?gp(s,e):n}function fp(s,e){return s instanceof $u?function(l){return nf(l)||function(g){return!!g&&"doubleValue"in g}(l)}(e)?e:{integerValue:0}:null}class Ml extends hc{}class Pl extends hc{constructor(e){super(),this.elements=e}}function dp(s,e){const n=pp(e);for(const l of s.elements)n.some(h=>ms(h,l))||n.push(l);return{arrayValue:{values:n}}}class kl extends hc{constructor(e){super(),this.elements=e}}function gp(s,e){let n=pp(e);for(const l of s.elements)n=n.filter(h=>!ms(h,l));return{arrayValue:{values:n}}}class $u extends hc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function W0(s){return zn(s.integerValue||s.doubleValue)}function pp(s){return If(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n){this.field=e,this.transform=n}}function Px(s,e){return s.field.isEqual(e.field)&&function(l,h){return l instanceof Pl&&h instanceof Pl||l instanceof kl&&h instanceof kl?Ba(l.elements,h.elements,ms):l instanceof $u&&h instanceof $u?ms(l.Pe,h.Pe):l instanceof Ml&&h instanceof Ml}(s.transform,e.transform)}class kx{constructor(e,n){this.version=e,this.transformResults=n}}class Vs{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Vs}static exists(e){return new Vs(void 0,e)}static updateTime(e){return new Vs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(s,e){return s.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(s.updateTime):s.exists===void 0||s.exists===e.isFoundDocument()}class fc{}function mp(s,e){if(!s.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return s.isNoDocument()?new wp(s.key,Vs.none()):new Ll(s.key,s.data,Vs.none());{const n=s.data,l=Pi.empty();let h=new Jn(Er.comparator);for(let g of e.fields)if(!h.has(g)){let x=n.field(g);x===null&&g.length>1&&(g=g.popLast(),x=n.field(g)),x===null?l.delete(g):l.set(g,x),h=h.add(g)}return new ra(s.key,l,new Ki(h.toArray()),Vs.none())}}function Lx(s,e,n){s instanceof Ll?function(h,g,x){const C=h.value.clone(),S=X0(h.fieldTransforms,g,x.transformResults);C.setAll(S),g.convertToFoundDocument(x.version,C).setHasCommittedMutations()}(s,e,n):s instanceof ra?function(h,g,x){if(!Hu(h.precondition,g))return void g.convertToUnknownDocument(x.version);const C=X0(h.fieldTransforms,g,x.transformResults),S=g.data;S.setAll(yp(h)),S.setAll(C),g.convertToFoundDocument(x.version,S).setHasCommittedMutations()}(s,e,n):function(h,g,x){g.convertToNoDocument(x.version).setHasCommittedMutations()}(0,e,n)}function Tl(s,e,n,l){return s instanceof Ll?function(g,x,C,S){if(!Hu(g.precondition,x))return C;const A=g.value.clone(),O=Y0(g.fieldTransforms,S,x);return A.setAll(O),x.convertToFoundDocument(x.version,A).setHasLocalMutations(),null}(s,e,n,l):s instanceof ra?function(g,x,C,S){if(!Hu(g.precondition,x))return C;const A=Y0(g.fieldTransforms,S,x),O=x.data;return O.setAll(yp(g)),O.setAll(A),x.convertToFoundDocument(x.version,O).setHasLocalMutations(),C===null?null:C.unionWith(g.fieldMask.fields).unionWith(g.fieldTransforms.map(k=>k.field))}(s,e,n,l):function(g,x,C){return Hu(g.precondition,x)?(x.convertToNoDocument(x.version).setHasLocalMutations(),null):C}(s,e,n)}function Bx(s,e){let n=null;for(const l of s.fieldTransforms){const h=e.data.field(l.field),g=fp(l.transform,h||null);g!=null&&(n===null&&(n=Pi.empty()),n.set(l.field,g))}return n||null}function G0(s,e){return s.type===e.type&&!!s.key.isEqual(e.key)&&!!s.precondition.isEqual(e.precondition)&&!!function(l,h){return l===void 0&&h===void 0||!(!l||!h)&&Ba(l,h,(g,x)=>Px(g,x))}(s.fieldTransforms,e.fieldTransforms)&&(s.type===0?s.value.isEqual(e.value):s.type!==1||s.data.isEqual(e.data)&&s.fieldMask.isEqual(e.fieldMask))}class Ll extends fc{constructor(e,n,l,h=[]){super(),this.key=e,this.value=n,this.precondition=l,this.fieldTransforms=h,this.type=0}getFieldMask(){return null}}class ra extends fc{constructor(e,n,l,h,g=[]){super(),this.key=e,this.data=n,this.fieldMask=l,this.precondition=h,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function yp(s){const e=new Map;return s.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const l=s.data.field(n);e.set(n,l)}}),e}function X0(s,e,n){const l=new Map;Gt(s.length===n.length);for(let h=0;h<n.length;h++){const g=s[h],x=g.transform,C=e.data.field(g.field);l.set(g.field,Ox(x,C,n[h]))}return l}function Y0(s,e,n){const l=new Map;for(const h of s){const g=h.transform,x=n.data.field(h.field);l.set(h.field,bx(g,x,e))}return l}class wp extends fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Fx extends fc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vx{constructor(e,n,l,h){this.batchId=e,this.localWriteTime=n,this.baseMutations=l,this.mutations=h}applyToRemoteDocument(e,n){const l=n.mutationResults;for(let h=0;h<this.mutations.length;h++){const g=this.mutations[h];g.key.isEqual(e.key)&&Lx(g,e,l[h])}}applyToLocalView(e,n){for(const l of this.baseMutations)l.key.isEqual(e.key)&&(n=Tl(l,e,n,this.localWriteTime));for(const l of this.mutations)l.key.isEqual(e.key)&&(n=Tl(l,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const l=cp();return this.mutations.forEach(h=>{const g=e.get(h.key),x=g.overlayedDocument;let C=this.applyToLocalView(x,g.mutatedFields);C=n.has(h.key)?null:C;const S=mp(x,C);S!==null&&l.set(h.key,S),x.isValidDocument()||x.convertToNoDocument(ct.min())}),l}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Tt())}isEqual(e){return this.batchId===e.batchId&&Ba(this.mutations,e.mutations,(n,l)=>G0(n,l))&&Ba(this.baseMutations,e.baseMutations,(n,l)=>G0(n,l))}}class Nf{constructor(e,n,l,h){this.batch=e,this.commitVersion=n,this.mutationResults=l,this.docVersions=h}static from(e,n,l){Gt(e.mutations.length===l.length);let h=function(){return vx}();const g=e.mutations;for(let x=0;x<g.length;x++)h=h.insert(g[x].key,l[x].version);return new Nf(e,n,l,h)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Hn,bt;function jx(s){switch(s){default:return lt();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0}}function xp(s){if(s===void 0)return js("GRPC error has no .code"),Ee.UNKNOWN;switch(s){case Hn.OK:return Ee.OK;case Hn.CANCELLED:return Ee.CANCELLED;case Hn.UNKNOWN:return Ee.UNKNOWN;case Hn.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case Hn.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case Hn.INTERNAL:return Ee.INTERNAL;case Hn.UNAVAILABLE:return Ee.UNAVAILABLE;case Hn.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case Hn.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case Hn.NOT_FOUND:return Ee.NOT_FOUND;case Hn.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case Hn.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case Hn.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case Hn.ABORTED:return Ee.ABORTED;case Hn.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case Hn.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case Hn.DATA_LOSS:return Ee.DATA_LOSS;default:return lt()}}(bt=Hn||(Hn={}))[bt.OK=0]="OK",bt[bt.CANCELLED=1]="CANCELLED",bt[bt.UNKNOWN=2]="UNKNOWN",bt[bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bt[bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bt[bt.NOT_FOUND=5]="NOT_FOUND",bt[bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",bt[bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",bt[bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",bt[bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bt[bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bt[bt.ABORTED=10]="ABORTED",bt[bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",bt[bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",bt[bt.INTERNAL=13]="INTERNAL",bt[bt.UNAVAILABLE=14]="UNAVAILABLE",bt[bt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hx(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=new Ko([4294967295,4294967295],0);function Q0(s){const e=Hx().encode(s),n=new Hg;return n.update(e),new Uint8Array(n.digest())}function q0(s){const e=new DataView(s.buffer),n=e.getUint32(0,!0),l=e.getUint32(4,!0),h=e.getUint32(8,!0),g=e.getUint32(12,!0);return[new Ko([n,l],0),new Ko([h,g],0)]}class Df{constructor(e,n,l){if(this.bitmap=e,this.padding=n,this.hashCount=l,n<0||n>=8)throw new _l(`Invalid padding: ${n}`);if(l<0)throw new _l(`Invalid hash count: ${l}`);if(e.length>0&&this.hashCount===0)throw new _l(`Invalid hash count: ${l}`);if(e.length===0&&n!==0)throw new _l(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=Ko.fromNumber(this.Te)}Ee(e,n,l){let h=e.add(n.multiply(Ko.fromNumber(l)));return h.compare(Wx)===1&&(h=new Ko([h.getBits(0),h.getBits(1)],0)),h.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=Q0(e),[l,h]=q0(n);for(let g=0;g<this.hashCount;g++){const x=this.Ee(l,h,g);if(!this.de(x))return!1}return!0}static create(e,n,l){const h=e%8==0?0:8-e%8,g=new Uint8Array(Math.ceil(e/8)),x=new Df(g,h,n);return l.forEach(C=>x.insert(C)),x}insert(e){if(this.Te===0)return;const n=Q0(e),[l,h]=q0(n);for(let g=0;g<this.hashCount;g++){const x=this.Ee(l,h,g);this.Ae(x)}}Ae(e){const n=Math.floor(e/8),l=e%8;this.bitmap[n]|=1<<l}}class _l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,l,h,g){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=l,this.documentUpdates=h,this.resolvedLimboDocuments=g}static createSynthesizedRemoteEventForCurrentChange(e,n,l){const h=new Map;return h.set(e,Bl.createSynthesizedTargetChangeForCurrentChange(e,n,l)),new dc(ct.min(),h,new In(Dt),Hs(),Tt())}}class Bl{constructor(e,n,l,h,g){this.resumeToken=e,this.current=n,this.addedDocuments=l,this.modifiedDocuments=h,this.removedDocuments=g}static createSynthesizedTargetChangeForCurrentChange(e,n,l){return new Bl(l,n,Tt(),Tt(),Tt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e,n,l,h){this.Re=e,this.removedTargetIds=n,this.key=l,this.Ve=h}}class Ep{constructor(e,n){this.targetId=e,this.me=n}}class _p{constructor(e,n,l=_r.EMPTY_BYTE_STRING,h=null){this.state=e,this.targetIds=n,this.resumeToken=l,this.cause=h}}class K0{constructor(){this.fe=0,this.ge=Z0(),this.pe=_r.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Tt(),n=Tt(),l=Tt();return this.ge.forEach((h,g)=>{switch(g){case 0:e=e.add(h);break;case 2:n=n.add(h);break;case 1:l=l.add(h);break;default:lt()}}),new Bl(this.pe,this.ye,e,n,l)}Ce(){this.we=!1,this.ge=Z0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Gt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Gx{constructor(e){this.Le=e,this.Be=new Map,this.ke=Hs(),this.qe=Lu(),this.Qe=Lu(),this.Ke=new In(Dt)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const l=this.ze(n);switch(e.state){case 0:this.je(n)&&l.De(e.resumeToken);break;case 1:l.Oe(),l.Se||l.Ce(),l.De(e.resumeToken);break;case 2:l.Oe(),l.Se||this.removeTarget(n);break;case 3:this.je(n)&&(l.Ne(),l.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),l.De(e.resumeToken));break;default:lt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((l,h)=>{this.je(h)&&n(h)})}Je(e){const n=e.targetId,l=e.me.count,h=this.Ye(n);if(h){const g=h.target;if(sf(g))if(l===0){const x=new tt(g.path);this.We(n,x,Br.newNoDocument(x,ct.min()))}else Gt(l===1);else{const x=this.Ze(n);if(x!==l){const C=this.Xe(e),S=C?this.et(C,e,x):1;if(S!==0){this.He(n);const A=S===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,A)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:l="",padding:h=0},hashCount:g=0}=n;let x,C;try{x=So(l).toUint8Array()}catch(S){if(S instanceof $g)return La("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw S}try{C=new Df(x,h,g)}catch(S){return La(S instanceof _l?"BloomFilter error: ":"Applying bloom filter failed: ",S),null}return C.Te===0?null:C}et(e,n,l){return n.me.count===l-this.rt(e,n.targetId)?0:2}rt(e,n){const l=this.Le.getRemoteKeysForTarget(n);let h=0;return l.forEach(g=>{const x=this.Le.nt(),C=`projects/${x.projectId}/databases/${x.database}/documents/${g.path.canonicalString()}`;e.mightContain(C)||(this.We(n,g,null),h++)}),h}it(e){const n=new Map;this.Be.forEach((g,x)=>{const C=this.Ye(x);if(C){if(g.current&&sf(C.target)){const S=new tt(C.target.path);this.st(S).has(x)||this.ot(x,S)||this.We(x,S,Br.newNoDocument(S,e))}g.be&&(n.set(x,g.ve()),g.Ce())}});let l=Tt();this.Qe.forEach((g,x)=>{let C=!0;x.forEachWhile(S=>{const A=this.Ye(S);return!A||A.purpose==="TargetPurposeLimboResolution"||(C=!1,!1)}),C&&(l=l.add(g))}),this.ke.forEach((g,x)=>x.setReadTime(e));const h=new dc(e,n,this.Ke,this.ke,l);return this.ke=Hs(),this.qe=Lu(),this.Qe=Lu(),this.Ke=new In(Dt),h}Ue(e,n){if(!this.je(e))return;const l=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,l),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,l){if(!this.je(e))return;const h=this.ze(e);this.ot(e,n)?h.Fe(n,1):h.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),l&&(this.ke=this.ke.insert(n,l))}removeTarget(e){this.Be.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Be.get(e);return n||(n=new K0,this.Be.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Jn(Dt),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Jn(Dt),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new K0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Lu(){return new In(tt.comparator)}function Z0(){return new In(tt.comparator)}const Xx={asc:"ASCENDING",desc:"DESCENDING"},Yx={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qx={and:"AND",or:"OR"};class qx{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function af(s,e){return s.useProto3Json||oc(e)?e:{value:e}}function Ju(s,e){return s.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ap(s,e){return s.useProto3Json?e.toBase64():e.toUint8Array()}function Kx(s,e){return Ju(s,e.toTimestamp())}function ps(s){return Gt(!!s),ct.fromTimestamp(function(n){const l=vo(n);return new $n(l.seconds,l.nanos)}(s))}function bf(s,e){return lf(s,e).canonicalString()}function lf(s,e){const n=function(h){return new xn(["projects",h.projectId,"databases",h.database])}(s).child("documents");return e===void 0?n:n.child(e)}function Cp(s){const e=xn.fromString(s);return Gt(Rp(e)),e}function uf(s,e){return bf(s.databaseId,e.path)}function zh(s,e){const n=Cp(e);if(n.get(1)!==s.databaseId.projectId)throw new $e(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new $e(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new tt(Tp(n))}function Ip(s,e){return bf(s.databaseId,e)}function Zx(s){const e=Cp(s);return e.length===4?xn.emptyPath():Tp(e)}function cf(s){return new xn(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Tp(s){return Gt(s.length>4&&s.get(4)==="documents"),s.popFirst(5)}function $0(s,e,n){return{name:uf(s,e),fields:n.value.mapValue.fields}}function $x(s,e){let n;if("targetChange"in e){e.targetChange;const l=function(A){return A==="NO_CHANGE"?0:A==="ADD"?1:A==="REMOVE"?2:A==="CURRENT"?3:A==="RESET"?4:lt()}(e.targetChange.targetChangeType||"NO_CHANGE"),h=e.targetChange.targetIds||[],g=function(A,O){return A.useProto3Json?(Gt(O===void 0||typeof O=="string"),_r.fromBase64String(O||"")):(Gt(O===void 0||O instanceof Buffer||O instanceof Uint8Array),_r.fromUint8Array(O||new Uint8Array))}(s,e.targetChange.resumeToken),x=e.targetChange.cause,C=x&&function(A){const O=A.code===void 0?Ee.UNKNOWN:xp(A.code);return new $e(O,A.message||"")}(x);n=new _p(l,h,g,C||null)}else if("documentChange"in e){e.documentChange;const l=e.documentChange;l.document,l.document.name,l.document.updateTime;const h=zh(s,l.document.name),g=ps(l.document.updateTime),x=l.document.createTime?ps(l.document.createTime):ct.min(),C=new Pi({mapValue:{fields:l.document.fields}}),S=Br.newFoundDocument(h,g,x,C),A=l.targetIds||[],O=l.removedTargetIds||[];n=new Wu(A,O,S.key,S)}else if("documentDelete"in e){e.documentDelete;const l=e.documentDelete;l.document;const h=zh(s,l.document),g=l.readTime?ps(l.readTime):ct.min(),x=Br.newNoDocument(h,g),C=l.removedTargetIds||[];n=new Wu([],C,x.key,x)}else if("documentRemove"in e){e.documentRemove;const l=e.documentRemove;l.document;const h=zh(s,l.document),g=l.removedTargetIds||[];n=new Wu([],g,h,null)}else{if(!("filter"in e))return lt();{e.filter;const l=e.filter;l.targetId;const{count:h=0,unchangedNames:g}=l,x=new zx(h,g),C=l.targetId;n=new Ep(C,x)}}return n}function Jx(s,e){let n;if(e instanceof Ll)n={update:$0(s,e.key,e.value)};else if(e instanceof wp)n={delete:uf(s,e.key)};else if(e instanceof ra)n={update:$0(s,e.key,e.data),updateMask:lE(e.fieldMask)};else{if(!(e instanceof Fx))return lt();n={verify:uf(s,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(l=>function(g,x){const C=x.transform;if(C instanceof Ml)return{fieldPath:x.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(C instanceof Pl)return{fieldPath:x.field.canonicalString(),appendMissingElements:{values:C.elements}};if(C instanceof kl)return{fieldPath:x.field.canonicalString(),removeAllFromArray:{values:C.elements}};if(C instanceof $u)return{fieldPath:x.field.canonicalString(),increment:C.Pe};throw lt()}(0,l))),e.precondition.isNone||(n.currentDocument=function(h,g){return g.updateTime!==void 0?{updateTime:Kx(h,g.updateTime)}:g.exists!==void 0?{exists:g.exists}:lt()}(s,e.precondition)),n}function eE(s,e){return s&&s.length>0?(Gt(e!==void 0),s.map(n=>function(h,g){let x=h.updateTime?ps(h.updateTime):ps(g);return x.isEqual(ct.min())&&(x=ps(g)),new kx(x,h.transformResults||[])}(n,e))):[]}function tE(s,e){return{documents:[Ip(s,e.path)]}}function nE(s,e){const n={structuredQuery:{}},l=e.path;let h;e.collectionGroup!==null?(h=l,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(h=l.popLast(),n.structuredQuery.from=[{collectionId:l.lastSegment()}]),n.parent=Ip(s,h);const g=function(A){if(A.length!==0)return Sp(ys.create(A,"and"))}(e.filters);g&&(n.structuredQuery.where=g);const x=function(A){if(A.length!==0)return A.map(O=>function(q){return{field:ba(q.field),direction:sE(q.dir)}}(O))}(e.orderBy);x&&(n.structuredQuery.orderBy=x);const C=af(s,e.limit);return C!==null&&(n.structuredQuery.limit=C),e.startAt&&(n.structuredQuery.startAt=function(A){return{before:A.inclusive,values:A.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(A){return{before:!A.inclusive,values:A.position}}(e.endAt)),{ct:n,parent:h}}function rE(s){let e=Zx(s.parent);const n=s.structuredQuery,l=n.from?n.from.length:0;let h=null;if(l>0){Gt(l===1);const O=n.from[0];O.allDescendants?h=O.collectionId:e=e.child(O.collectionId)}let g=[];n.where&&(g=function(k){const q=vp(k);return q instanceof ys&&np(q)?q.getFilters():[q]}(n.where));let x=[];n.orderBy&&(x=function(k){return k.map(q=>function(fe){return new Zu(Oa(fe.field),function(oe){switch(oe){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(fe.direction))}(q))}(n.orderBy));let C=null;n.limit&&(C=function(k){let q;return q=typeof k=="object"?k.value:k,oc(q)?null:q}(n.limit));let S=null;n.startAt&&(S=function(k){const q=!!k.before,te=k.values||[];return new Ku(te,q)}(n.startAt));let A=null;return n.endAt&&(A=function(k){const q=!k.before,te=k.values||[];return new Ku(te,q)}(n.endAt)),Ex(e,h,x,g,C,"F",S,A)}function iE(s,e){const n=function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function vp(s){return s.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const l=Oa(n.unaryFilter.field);return Zn.create(l,"==",{doubleValue:NaN});case"IS_NULL":const h=Oa(n.unaryFilter.field);return Zn.create(h,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const g=Oa(n.unaryFilter.field);return Zn.create(g,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const x=Oa(n.unaryFilter.field);return Zn.create(x,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(s):s.fieldFilter!==void 0?function(n){return Zn.create(Oa(n.fieldFilter.field),function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(n.fieldFilter.op),n.fieldFilter.value)}(s):s.compositeFilter!==void 0?function(n){return ys.create(n.compositeFilter.filters.map(l=>vp(l)),function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return lt()}}(n.compositeFilter.op))}(s):lt()}function sE(s){return Xx[s]}function oE(s){return Yx[s]}function aE(s){return Qx[s]}function ba(s){return{fieldPath:s.canonicalString()}}function Oa(s){return Er.fromServerFormat(s.fieldPath)}function Sp(s){return s instanceof Zn?function(n){if(n.op==="=="){if(V0(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NAN"}};if(F0(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(V0(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NAN"}};if(F0(n.value))return{unaryFilter:{field:ba(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ba(n.field),op:oE(n.op),value:n.value}}}(s):s instanceof ys?function(n){const l=n.getFilters().map(h=>Sp(h));return l.length===1?l[0]:{compositeFilter:{op:aE(n.op),filters:l}}}(s):lt()}function lE(s){const e=[];return s.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Rp(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n,l,h,g=ct.min(),x=ct.min(),C=_r.EMPTY_BYTE_STRING,S=null){this.target=e,this.targetId=n,this.purpose=l,this.sequenceNumber=h,this.snapshotVersion=g,this.lastLimboFreeSnapshotVersion=x,this.resumeToken=C,this.expectedCount=S}withSequenceNumber(e){return new wo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e){this.ht=e}}function cE(s){const e=rE({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?of(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{constructor(){this.ln=new fE}addToCollectionParentIndex(e,n){return this.ln.add(n),ge.resolve()}getCollectionParents(e,n){return ge.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return ge.resolve()}deleteFieldIndex(e,n){return ge.resolve()}deleteAllFieldIndexes(e){return ge.resolve()}createTargetIndexes(e,n){return ge.resolve()}getDocumentsMatchingTarget(e,n){return ge.resolve(null)}getIndexType(e,n){return ge.resolve(0)}getFieldIndexes(e,n){return ge.resolve([])}getNextCollectionGroupToUpdate(e){return ge.resolve(null)}getMinOffset(e,n){return ge.resolve(To.min())}getMinOffsetFromCollectionGroup(e,n){return ge.resolve(To.min())}updateCollectionGroup(e,n,l){return ge.resolve()}updateIndexEntries(e,n){return ge.resolve()}}class fE{constructor(){this.index={}}add(e){const n=e.lastSegment(),l=e.popLast(),h=this.index[n]||new Jn(xn.comparator),g=!h.has(l);return this.index[n]=h.add(l),g}has(e){const n=e.lastSegment(),l=e.popLast(),h=this.index[n];return h&&h.has(l)}getEntries(e){return(this.index[e]||new Jn(xn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ai{static withCacheSize(e){return new ai(e,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,l){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai.DEFAULT_COLLECTION_PERCENTILE=10,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ai.DEFAULT=new ai(41943040,ai.DEFAULT_COLLECTION_PERCENTILE,ai.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ai.DISABLED=new ai(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ua{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new Ua(0)}static Qn(){return new Ua(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg([s,e],[n,l]){const h=Dt(s,n);return h===0?Dt(e,l):h}class dE{constructor(e){this.Gn=e,this.buffer=new Jn(eg),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const l=this.buffer.last();eg(n,l)<0&&(this.buffer=this.buffer.delete(l).add(n))}}get maxValue(){return this.buffer.last()[0]}}class gE{constructor(e,n,l){this.garbageCollector=e,this.asyncQueue=n,this.localStore=l,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){Be("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ga(n)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Wa(n)}await this.Yn(3e5)})}}class pE{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(l=>Math.floor(n/100*l))}nthSequenceNumber(e,n){if(n===0)return ge.resolve(sc.oe);const l=new dE(n);return this.Zn.forEachTarget(e,h=>l.Hn(h.sequenceNumber)).next(()=>this.Zn.er(e,h=>l.Hn(h))).next(()=>l.maxValue)}removeTargets(e,n,l){return this.Zn.removeTargets(e,n,l)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),ge.resolve(J0)):this.getCacheSize(e).next(l=>l<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${l} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),J0):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let l,h,g,x,C,S,A;const O=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(k=>(k>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${k}`),h=this.params.maximumSequenceNumbersToCollect):h=k,x=Date.now(),this.nthSequenceNumber(e,h))).next(k=>(l=k,C=Date.now(),this.removeTargets(e,l,n))).next(k=>(g=k,S=Date.now(),this.removeOrphanedDocuments(e,l))).next(k=>(A=Date.now(),Na()<=Ot.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${x-O}ms
	Determined least recently used ${h} in `+(C-x)+`ms
	Removed ${g} targets in `+(S-C)+`ms
	Removed ${k} documents in `+(A-S)+`ms
Total Duration: ${A-O}ms`),ge.resolve({didRun:!0,sequenceNumbersCollected:h,targetsRemoved:g,documentsRemoved:k})))}}function mE(s,e){return new pE(s,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.changes=new na(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Br.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const l=this.changes.get(n);return l!==void 0?ge.resolve(l):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xE{constructor(e,n,l,h){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=l,this.indexManager=h}getDocument(e,n){let l=null;return this.documentOverlayCache.getOverlay(e,n).next(h=>(l=h,this.remoteDocumentCache.getEntry(e,n))).next(h=>(l!==null&&Tl(l.mutation,h,Ki.empty(),$n.now()),h))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(l=>this.getLocalViewOfDocuments(e,l,Tt()).next(()=>l))}getLocalViewOfDocuments(e,n,l=Tt()){const h=qo();return this.populateOverlays(e,h,n).next(()=>this.computeViews(e,n,h,l).next(g=>{let x=El();return g.forEach((C,S)=>{x=x.insert(C,S.overlayedDocument)}),x}))}getOverlayedDocuments(e,n){const l=qo();return this.populateOverlays(e,l,n).next(()=>this.computeViews(e,n,l,Tt()))}populateOverlays(e,n,l){const h=[];return l.forEach(g=>{n.has(g)||h.push(g)}),this.documentOverlayCache.getOverlays(e,h).next(g=>{g.forEach((x,C)=>{n.set(x,C)})})}computeViews(e,n,l,h){let g=Hs();const x=Il(),C=function(){return Il()}();return n.forEach((S,A)=>{const O=l.get(A.key);h.has(A.key)&&(O===void 0||O.mutation instanceof ra)?g=g.insert(A.key,A):O!==void 0?(x.set(A.key,O.mutation.getFieldMask()),Tl(O.mutation,A,O.mutation.getFieldMask(),$n.now())):x.set(A.key,Ki.empty())}),this.recalculateAndSaveOverlays(e,g).next(S=>(S.forEach((A,O)=>x.set(A,O)),n.forEach((A,O)=>{var k;return C.set(A,new wE(O,(k=x.get(A))!==null&&k!==void 0?k:null))}),C))}recalculateAndSaveOverlays(e,n){const l=Il();let h=new In((x,C)=>x-C),g=Tt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(x=>{for(const C of x)C.keys().forEach(S=>{const A=n.get(S);if(A===null)return;let O=l.get(S)||Ki.empty();O=C.applyToLocalView(A,O),l.set(S,O);const k=(h.get(C.batchId)||Tt()).add(S);h=h.insert(C.batchId,k)})}).next(()=>{const x=[],C=h.getReverseIterator();for(;C.hasNext();){const S=C.getNext(),A=S.key,O=S.value,k=cp();O.forEach(q=>{if(!g.has(q)){const te=mp(n.get(q),l.get(q));te!==null&&k.set(q,te),g=g.add(q)}}),x.push(this.documentOverlayCache.saveOverlays(e,A,k))}return ge.waitFor(x)}).next(()=>l)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(l=>this.recalculateAndSaveOverlays(e,l))}getDocumentsMatchingQuery(e,n,l,h){return function(x){return tt.isDocumentKey(x.path)&&x.collectionGroup===null&&x.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_x(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,l,h):this.getDocumentsMatchingCollectionQuery(e,n,l,h)}getNextDocuments(e,n,l,h){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,l,h).next(g=>{const x=h-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,l.largestBatchId,h-g.size):ge.resolve(qo());let C=-1,S=g;return x.next(A=>ge.forEach(A,(O,k)=>(C<k.largestBatchId&&(C=k.largestBatchId),g.get(O)?ge.resolve():this.remoteDocumentCache.getEntry(e,O).next(q=>{S=S.insert(O,q)}))).next(()=>this.populateOverlays(e,A,g)).next(()=>this.computeViews(e,S,A,Tt())).next(O=>({batchId:C,changes:up(O)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new tt(n)).next(l=>{let h=El();return l.isFoundDocument()&&(h=h.insert(l.key,l)),h})}getDocumentsMatchingCollectionGroupQuery(e,n,l,h){const g=n.collectionGroup;let x=El();return this.indexManager.getCollectionParents(e,g).next(C=>ge.forEach(C,S=>{const A=function(k,q){return new lc(q,null,k.explicitOrderBy.slice(),k.filters.slice(),k.limit,k.limitType,k.startAt,k.endAt)}(n,S.child(g));return this.getDocumentsMatchingCollectionQuery(e,A,l,h).next(O=>{O.forEach((k,q)=>{x=x.insert(k,q)})})}).next(()=>x))}getDocumentsMatchingCollectionQuery(e,n,l,h){let g;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,l.largestBatchId).next(x=>(g=x,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,l,g,h))).next(x=>{g.forEach((S,A)=>{const O=A.getKey();x.get(O)===null&&(x=x.insert(O,Br.newInvalidDocument(O)))});let C=El();return x.forEach((S,A)=>{const O=g.get(S);O!==void 0&&Tl(O.mutation,A,Ki.empty(),$n.now()),cc(n,A)&&(C=C.insert(S,A))}),C})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return ge.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(h){return{id:h.id,version:h.version,createTime:ps(h.createTime)}}(n)),ge.resolve()}getNamedQuery(e,n){return ge.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(h){return{name:h.name,query:cE(h.bundledQuery),readTime:ps(h.readTime)}}(n)),ge.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.overlays=new In(tt.comparator),this.Er=new Map}getOverlay(e,n){return ge.resolve(this.overlays.get(n))}getOverlays(e,n){const l=qo();return ge.forEach(n,h=>this.getOverlay(e,h).next(g=>{g!==null&&l.set(h,g)})).next(()=>l)}saveOverlays(e,n,l){return l.forEach((h,g)=>{this.Tt(e,n,g)}),ge.resolve()}removeOverlaysForBatchId(e,n,l){const h=this.Er.get(l);return h!==void 0&&(h.forEach(g=>this.overlays=this.overlays.remove(g)),this.Er.delete(l)),ge.resolve()}getOverlaysForCollection(e,n,l){const h=qo(),g=n.length+1,x=new tt(n.child("")),C=this.overlays.getIteratorFrom(x);for(;C.hasNext();){const S=C.getNext().value,A=S.getKey();if(!n.isPrefixOf(A.path))break;A.path.length===g&&S.largestBatchId>l&&h.set(S.getKey(),S)}return ge.resolve(h)}getOverlaysForCollectionGroup(e,n,l,h){let g=new In((A,O)=>A-O);const x=this.overlays.getIterator();for(;x.hasNext();){const A=x.getNext().value;if(A.getKey().getCollectionGroup()===n&&A.largestBatchId>l){let O=g.get(A.largestBatchId);O===null&&(O=qo(),g=g.insert(A.largestBatchId,O)),O.set(A.getKey(),A)}}const C=qo(),S=g.getIterator();for(;S.hasNext()&&(S.getNext().value.forEach((A,O)=>C.set(A,O)),!(C.size()>=h)););return ge.resolve(C)}Tt(e,n,l){const h=this.overlays.get(l.key);if(h!==null){const x=this.Er.get(h.largestBatchId).delete(l.key);this.Er.set(h.largestBatchId,x)}this.overlays=this.overlays.insert(l.key,new Ux(n,l));let g=this.Er.get(n);g===void 0&&(g=Tt(),this.Er.set(n,g)),this.Er.set(n,g.add(l.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(){this.sessionToken=_r.EMPTY_BYTE_STRING}getSessionToken(e){return ge.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ge.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(){this.dr=new Jn(lr.Ar),this.Rr=new Jn(lr.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,n){const l=new lr(e,n);this.dr=this.dr.add(l),this.Rr=this.Rr.add(l)}mr(e,n){e.forEach(l=>this.addReference(l,n))}removeReference(e,n){this.gr(new lr(e,n))}pr(e,n){e.forEach(l=>this.removeReference(l,n))}yr(e){const n=new tt(new xn([])),l=new lr(n,e),h=new lr(n,e+1),g=[];return this.Rr.forEachInRange([l,h],x=>{this.gr(x),g.push(x.key)}),g}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new tt(new xn([])),l=new lr(n,e),h=new lr(n,e+1);let g=Tt();return this.Rr.forEachInRange([l,h],x=>{g=g.add(x.key)}),g}containsKey(e){const n=new lr(e,0),l=this.dr.firstAfterOrEqual(n);return l!==null&&e.isEqual(l.key)}}class lr{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return tt.comparator(e.key,n.key)||Dt(e.br,n.br)}static Vr(e,n){return Dt(e.br,n.br)||tt.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Jn(lr.Ar)}checkEmpty(e){return ge.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,l,h){const g=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const x=new Vx(g,n,l,h);this.mutationQueue.push(x);for(const C of h)this.vr=this.vr.add(new lr(C.key,g)),this.indexManager.addToCollectionParentIndex(e,C.key.path.popLast());return ge.resolve(x)}lookupMutationBatch(e,n){return ge.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const l=n+1,h=this.Fr(l),g=h<0?0:h;return ge.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return ge.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return ge.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const l=new lr(n,0),h=new lr(n,Number.POSITIVE_INFINITY),g=[];return this.vr.forEachInRange([l,h],x=>{const C=this.Cr(x.br);g.push(C)}),ge.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(e,n){let l=new Jn(Dt);return n.forEach(h=>{const g=new lr(h,0),x=new lr(h,Number.POSITIVE_INFINITY);this.vr.forEachInRange([g,x],C=>{l=l.add(C.br)})}),ge.resolve(this.Mr(l))}getAllMutationBatchesAffectingQuery(e,n){const l=n.path,h=l.length+1;let g=l;tt.isDocumentKey(g)||(g=g.child(""));const x=new lr(new tt(g),0);let C=new Jn(Dt);return this.vr.forEachWhile(S=>{const A=S.key.path;return!!l.isPrefixOf(A)&&(A.length===h&&(C=C.add(S.br)),!0)},x),ge.resolve(this.Mr(C))}Mr(e){const n=[];return e.forEach(l=>{const h=this.Cr(l);h!==null&&n.push(h)}),n}removeMutationBatch(e,n){Gt(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let l=this.vr;return ge.forEach(n.mutations,h=>{const g=new lr(h.key,n.batchId);return l=l.delete(g),this.referenceDelegate.markPotentiallyOrphaned(e,h.key)}).next(()=>{this.vr=l})}Ln(e){}containsKey(e,n){const l=new lr(n,0),h=this.vr.firstAfterOrEqual(l);return ge.resolve(n.isEqual(h&&h.key))}performConsistencyCheck(e){return this.mutationQueue.length,ge.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.Nr=e,this.docs=function(){return new In(tt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const l=n.key,h=this.docs.get(l),g=h?h.size:0,x=this.Nr(n);return this.docs=this.docs.insert(l,{document:n.mutableCopy(),size:x}),this.size+=x-g,this.indexManager.addToCollectionParentIndex(e,l.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const l=this.docs.get(n);return ge.resolve(l?l.document.mutableCopy():Br.newInvalidDocument(n))}getEntries(e,n){let l=Hs();return n.forEach(h=>{const g=this.docs.get(h);l=l.insert(h,g?g.document.mutableCopy():Br.newInvalidDocument(h))}),ge.resolve(l)}getDocumentsMatchingQuery(e,n,l,h){let g=Hs();const x=n.path,C=new tt(x.child("")),S=this.docs.getIteratorFrom(C);for(;S.hasNext();){const{key:A,value:{document:O}}=S.getNext();if(!x.isPrefixOf(A.path))break;A.path.length>x.length+1||Jw($w(O),l)<=0||(h.has(O.key)||cc(n,O))&&(g=g.insert(O.key,O.mutableCopy()))}return ge.resolve(g)}getAllFromCollectionGroup(e,n,l,h){lt()}Lr(e,n){return ge.forEach(this.docs,l=>n(l))}newChangeBuffer(e){return new TE(this)}getSize(e){return ge.resolve(this.size)}}class TE extends yE{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((l,h)=>{h.isValidDocument()?n.push(this.hr.addEntry(e,h)):this.hr.removeEntry(l)}),ge.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e){this.persistence=e,this.Br=new na(n=>Tf(n),vf),this.lastRemoteSnapshotVersion=ct.min(),this.highestTargetId=0,this.kr=0,this.qr=new Of,this.targetCount=0,this.Qr=Ua.qn()}forEachTarget(e,n){return this.Br.forEach((l,h)=>n(h)),ge.resolve()}getLastRemoteSnapshotVersion(e){return ge.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ge.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),ge.resolve(this.highestTargetId)}setTargetsMetadata(e,n,l){return l&&(this.lastRemoteSnapshotVersion=l),n>this.kr&&(this.kr=n),ge.resolve()}Un(e){this.Br.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new Ua(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,ge.resolve()}updateTargetData(e,n){return this.Un(n),ge.resolve()}removeTargetData(e,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,ge.resolve()}removeTargets(e,n,l){let h=0;const g=[];return this.Br.forEach((x,C)=>{C.sequenceNumber<=n&&l.get(C.targetId)===null&&(this.Br.delete(x),g.push(this.removeMatchingKeysForTargetId(e,C.targetId)),h++)}),ge.waitFor(g).next(()=>h)}getTargetCount(e){return ge.resolve(this.targetCount)}getTargetData(e,n){const l=this.Br.get(n)||null;return ge.resolve(l)}addMatchingKeys(e,n,l){return this.qr.mr(n,l),ge.resolve()}removeMatchingKeys(e,n,l){this.qr.pr(n,l);const h=this.persistence.referenceDelegate,g=[];return h&&n.forEach(x=>{g.push(h.markPotentiallyOrphaned(e,x))}),ge.waitFor(g)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),ge.resolve()}getMatchingKeysForTargetId(e,n){const l=this.qr.Sr(n);return ge.resolve(l)}containsKey(e,n){return ge.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Np{constructor(e,n){this.Kr={},this.overlays={},this.$r=new sc(0),this.Ur=!1,this.Ur=!0,this.Wr=new AE,this.referenceDelegate=e(this),this.Gr=new vE(this),this.indexManager=new hE,this.remoteDocumentCache=function(h){return new IE(h)}(l=>this.referenceDelegate.zr(l)),this.serializer=new uE(n),this.jr=new EE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new _E,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let l=this.Kr[e.toKey()];return l||(l=new CE(n,this.referenceDelegate),this.Kr[e.toKey()]=l),l}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,l){Be("MemoryPersistence","Starting transaction:",e);const h=new SE(this.$r.next());return this.referenceDelegate.Hr(),l(h).next(g=>this.referenceDelegate.Jr(h).next(()=>g)).toPromise().then(g=>(h.raiseOnCommittedEvent(),g))}Yr(e,n){return ge.or(Object.values(this.Kr).map(l=>()=>l.containsKey(e,n)))}}class SE extends tx{constructor(e){super(),this.currentSequenceNumber=e}}class Mf{constructor(e){this.persistence=e,this.Zr=new Of,this.Xr=null}static ei(e){return new Mf(e)}get ti(){if(this.Xr)return this.Xr;throw lt()}addReference(e,n,l){return this.Zr.addReference(l,n),this.ti.delete(l.toString()),ge.resolve()}removeReference(e,n,l){return this.Zr.removeReference(l,n),this.ti.add(l.toString()),ge.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),ge.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(h=>this.ti.add(h.toString()));const l=this.persistence.getTargetCache();return l.getMatchingKeysForTargetId(e,n.targetId).next(h=>{h.forEach(g=>this.ti.add(g.toString()))}).next(()=>l.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ge.forEach(this.ti,l=>{const h=tt.fromPath(l);return this.ni(e,h).next(g=>{g||n.removeEntry(h,ct.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(l=>{l?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return ge.or([()=>ge.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class ec{constructor(e,n){this.persistence=e,this.ri=new na(l=>ix(l.path),(l,h)=>l.isEqual(h)),this.garbageCollector=mE(this,n)}static ei(e,n){return new ec(e,n)}Hr(){}Jr(e){return ge.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(l=>n.next(h=>l+h))}nr(e){let n=0;return this.er(e,l=>{n++}).next(()=>n)}er(e,n){return ge.forEach(this.ri,(l,h)=>this.ir(e,l,h).next(g=>g?ge.resolve():n(h)))}removeTargets(e,n,l){return this.persistence.getTargetCache().removeTargets(e,n,l)}removeOrphanedDocuments(e,n){let l=0;const h=this.persistence.getRemoteDocumentCache(),g=h.newChangeBuffer();return h.Lr(e,x=>this.ir(e,x,n).next(C=>{C||(l++,g.removeEntry(x,ct.min()))})).next(()=>g.apply(e)).next(()=>l)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),ge.resolve()}removeTarget(e,n){const l=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,l)}addReference(e,n,l){return this.ri.set(l,e.currentSequenceNumber),ge.resolve()}removeReference(e,n,l){return this.ri.set(l,e.currentSequenceNumber),ge.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),ge.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zu(e.data.value)),n}ir(e,n,l){return ge.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const h=this.ri.get(n);return ge.resolve(h!==void 0&&h>l)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n,l,h){this.targetId=e,this.fromCache=n,this.Wi=l,this.Gi=h}static zi(e,n){let l=Tt(),h=Tt();for(const g of n.docChanges)switch(g.type){case 0:l=l.add(g.doc.key);break;case 1:h=h.add(g.doc.key)}return new Pf(e,n.fromCache,l,h)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Sy()?8:nx(Ty())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,l,h){const g={result:null};return this.Xi(e,n).next(x=>{g.result=x}).next(()=>{if(!g.result)return this.es(e,n,h,l).next(x=>{g.result=x})}).next(()=>{if(g.result)return;const x=new RE;return this.ts(e,n,x).next(C=>{if(g.result=C,this.Hi)return this.ns(e,n,x,C.size)})}).next(()=>g.result)}ns(e,n,l,h){return l.documentReadCount<this.Ji?(Na()<=Ot.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",Da(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ge.resolve()):(Na()<=Ot.DEBUG&&Be("QueryEngine","Query:",Da(n),"scans",l.documentReadCount,"local documents and returns",h,"documents as results."),l.documentReadCount>this.Yi*h?(Na()<=Ot.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",Da(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gs(n))):ge.resolve())}Xi(e,n){if(H0(n))return ge.resolve(null);let l=gs(n);return this.indexManager.getIndexType(e,l).next(h=>h===0?null:(n.limit!==null&&h===1&&(n=of(n,null,"F"),l=gs(n)),this.indexManager.getDocumentsMatchingTarget(e,l).next(g=>{const x=Tt(...g);return this.Zi.getDocuments(e,x).next(C=>this.indexManager.getMinOffset(e,l).next(S=>{const A=this.rs(n,C);return this.ss(n,A,x,S.readTime)?this.Xi(e,of(n,null,"F")):this.os(e,A,n,S)}))})))}es(e,n,l,h){return H0(n)||h.isEqual(ct.min())?ge.resolve(null):this.Zi.getDocuments(e,l).next(g=>{const x=this.rs(n,g);return this.ss(n,x,l,h)?ge.resolve(null):(Na()<=Ot.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",h.toString(),Da(n)),this.os(e,x,n,Zw(h,-1)).next(C=>C))})}rs(e,n){let l=new Jn(ap(e));return n.forEach((h,g)=>{cc(e,g)&&(l=l.add(g))}),l}ss(e,n,l,h){if(e.limit===null)return!1;if(l.size!==n.size)return!0;const g=e.limitType==="F"?n.last():n.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(h)>0)}ts(e,n,l){return Na()<=Ot.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Da(n)),this.Zi.getDocumentsMatchingQuery(e,n,To.min(),l)}os(e,n,l,h){return this.Zi.getDocumentsMatchingQuery(e,l,h).next(g=>(n.forEach(x=>{g=g.insert(x.key,x)}),g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{constructor(e,n,l,h){this.persistence=e,this._s=n,this.serializer=h,this.us=new In(Dt),this.cs=new na(g=>Tf(g),vf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(l)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xE(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function bE(s,e,n,l){return new DE(s,e,n,l)}async function Dp(s,e){const n=ft(s);return await n.persistence.runTransaction("Handle user change","readonly",l=>{let h;return n.mutationQueue.getAllMutationBatches(l).next(g=>(h=g,n.Ps(e),n.mutationQueue.getAllMutationBatches(l))).next(g=>{const x=[],C=[];let S=Tt();for(const A of h){x.push(A.batchId);for(const O of A.mutations)S=S.add(O.key)}for(const A of g){C.push(A.batchId);for(const O of A.mutations)S=S.add(O.key)}return n.localDocuments.getDocuments(l,S).next(A=>({Ts:A,removedBatchIds:x,addedBatchIds:C}))})})}function OE(s,e){const n=ft(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",l=>{const h=e.batch.keys(),g=n.hs.newChangeBuffer({trackRemovals:!0});return function(C,S,A,O){const k=A.batch,q=k.keys();let te=ge.resolve();return q.forEach(fe=>{te=te.next(()=>O.getEntry(S,fe)).next(ce=>{const oe=A.docVersions.get(fe);Gt(oe!==null),ce.version.compareTo(oe)<0&&(k.applyToRemoteDocument(ce,A),ce.isValidDocument()&&(ce.setReadTime(A.commitVersion),O.addEntry(ce)))})}),te.next(()=>C.mutationQueue.removeMutationBatch(S,k))}(n,l,e,g).next(()=>g.apply(l)).next(()=>n.mutationQueue.performConsistencyCheck(l)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(l,h,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,function(C){let S=Tt();for(let A=0;A<C.mutationResults.length;++A)C.mutationResults[A].transformResults.length>0&&(S=S.add(C.batch.mutations[A].key));return S}(e))).next(()=>n.localDocuments.getDocuments(l,h))})}function bp(s){const e=ft(s);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function ME(s,e){const n=ft(s),l=e.snapshotVersion;let h=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",g=>{const x=n.hs.newChangeBuffer({trackRemovals:!0});h=n.us;const C=[];e.targetChanges.forEach((O,k)=>{const q=h.get(k);if(!q)return;C.push(n.Gr.removeMatchingKeys(g,O.removedDocuments,k).next(()=>n.Gr.addMatchingKeys(g,O.addedDocuments,k)));let te=q.withSequenceNumber(g.currentSequenceNumber);e.targetMismatches.get(k)!==null?te=te.withResumeToken(_r.EMPTY_BYTE_STRING,ct.min()).withLastLimboFreeSnapshotVersion(ct.min()):O.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(O.resumeToken,l)),h=h.insert(k,te),function(ce,oe,Ue){return ce.resumeToken.approximateByteSize()===0||oe.snapshotVersion.toMicroseconds()-ce.snapshotVersion.toMicroseconds()>=3e8?!0:Ue.addedDocuments.size+Ue.modifiedDocuments.size+Ue.removedDocuments.size>0}(q,te,O)&&C.push(n.Gr.updateTargetData(g,te))});let S=Hs(),A=Tt();if(e.documentUpdates.forEach(O=>{e.resolvedLimboDocuments.has(O)&&C.push(n.persistence.referenceDelegate.updateLimboDocument(g,O))}),C.push(PE(g,x,e.documentUpdates).next(O=>{S=O.Is,A=O.Es})),!l.isEqual(ct.min())){const O=n.Gr.getLastRemoteSnapshotVersion(g).next(k=>n.Gr.setTargetsMetadata(g,g.currentSequenceNumber,l));C.push(O)}return ge.waitFor(C).next(()=>x.apply(g)).next(()=>n.localDocuments.getLocalViewOfDocuments(g,S,A)).next(()=>S)}).then(g=>(n.us=h,g))}function PE(s,e,n){let l=Tt(),h=Tt();return n.forEach(g=>l=l.add(g)),e.getEntries(s,l).next(g=>{let x=Hs();return n.forEach((C,S)=>{const A=g.get(C);S.isFoundDocument()!==A.isFoundDocument()&&(h=h.add(C)),S.isNoDocument()&&S.version.isEqual(ct.min())?(e.removeEntry(C,S.readTime),x=x.insert(C,S)):!A.isValidDocument()||S.version.compareTo(A.version)>0||S.version.compareTo(A.version)===0&&A.hasPendingWrites?(e.addEntry(S),x=x.insert(C,S)):Be("LocalStore","Ignoring outdated watch update for ",C,". Current version:",A.version," Watch version:",S.version)}),{Is:x,Es:h}})}function kE(s,e){const n=ft(s);return n.persistence.runTransaction("Get next mutation batch","readonly",l=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(l,e)))}function LE(s,e){const n=ft(s);return n.persistence.runTransaction("Allocate target","readwrite",l=>{let h;return n.Gr.getTargetData(l,e).next(g=>g?(h=g,ge.resolve(h)):n.Gr.allocateTargetId(l).next(x=>(h=new wo(e,x,"TargetPurposeListen",l.currentSequenceNumber),n.Gr.addTargetData(l,h).next(()=>h))))}).then(l=>{const h=n.us.get(l.targetId);return(h===null||l.snapshotVersion.compareTo(h.snapshotVersion)>0)&&(n.us=n.us.insert(l.targetId,l),n.cs.set(e,l.targetId)),l})}async function hf(s,e,n){const l=ft(s),h=l.us.get(e),g=n?"readwrite":"readwrite-primary";try{n||await l.persistence.runTransaction("Release target",g,x=>l.persistence.referenceDelegate.removeTarget(x,h))}catch(x){if(!Ga(x))throw x;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${x}`)}l.us=l.us.remove(e),l.cs.delete(h.target)}function tg(s,e,n){const l=ft(s);let h=ct.min(),g=Tt();return l.persistence.runTransaction("Execute query","readwrite",x=>function(S,A,O){const k=ft(S),q=k.cs.get(O);return q!==void 0?ge.resolve(k.us.get(q)):k.Gr.getTargetData(A,O)}(l,x,gs(e)).next(C=>{if(C)return h=C.lastLimboFreeSnapshotVersion,l.Gr.getMatchingKeysForTargetId(x,C.targetId).next(S=>{g=S})}).next(()=>l._s.getDocumentsMatchingQuery(x,e,n?h:ct.min(),n?g:Tt())).next(C=>(BE(l,Cx(e),C),{documents:C,ds:g})))}function BE(s,e,n){let l=s.ls.get(e)||ct.min();n.forEach((h,g)=>{g.readTime.compareTo(l)>0&&(l=g.readTime)}),s.ls.set(e,l)}class ng{constructor(){this.activeTargetIds=Nx()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FE{constructor(){this._o=new ng,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,l){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,l){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new ng,Promise.resolve()}handleUserChange(e,n,l){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rg{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=null;function jh(){return Bu===null?Bu=function(){return 268435456+Math.round(2147483648*Math.random())}():Bu++,"0x"+Bu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zE{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr="WebChannelConnection";class jE extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const l=n.ssl?"https":"http",h=encodeURIComponent(this.databaseId.projectId),g=encodeURIComponent(this.databaseId.database);this.Fo=l+"://"+n.host,this.Mo=`projects/${h}/databases/${g}`,this.xo=this.databaseId.database==="(default)"?`project_id=${h}`:`project_id=${h}&database_id=${g}`}Oo(n,l,h,g,x){const C=jh(),S=this.No(n,l.toUriEncodedString());Be("RestConnection",`Sending RPC '${n}' ${C}:`,S,h);const A={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(A,g,x),this.Bo(n,S,A,h).then(O=>(Be("RestConnection",`Received RPC '${n}' ${C}: `,O),O),O=>{throw La("RestConnection",`RPC '${n}' ${C} failed with error: `,O,"url: ",S,"request:",h),O})}ko(n,l,h,g,x,C){return this.Oo(n,l,h,g,x)}Lo(n,l,h){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ha}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),l&&l.headers.forEach((g,x)=>n[x]=g),h&&h.headers.forEach((g,x)=>n[x]=g)}No(n,l){const h=UE[n];return`${this.Fo}/v1/${l}:${h}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,n,l,h){const g=jh();return new Promise((x,C)=>{const S=new Wg;S.setWithCredentials(!0),S.listenOnce(Gg.COMPLETE,()=>{try{switch(S.getLastErrorCode()){case Uu.NO_ERROR:const O=S.getResponseJson();Be(kr,`XHR for RPC '${e}' ${g} received:`,JSON.stringify(O)),x(O);break;case Uu.TIMEOUT:Be(kr,`RPC '${e}' ${g} timed out`),C(new $e(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Uu.HTTP_ERROR:const k=S.getStatus();if(Be(kr,`RPC '${e}' ${g} failed with status:`,k,"response text:",S.getResponseText()),k>0){let q=S.getResponseJson();Array.isArray(q)&&(q=q[0]);const te=q==null?void 0:q.error;if(te&&te.status&&te.message){const fe=function(oe){const Ue=oe.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(Ue)>=0?Ue:Ee.UNKNOWN}(te.status);C(new $e(fe,te.message))}else C(new $e(Ee.UNKNOWN,"Server responded with status "+S.getStatus()))}else C(new $e(Ee.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{Be(kr,`RPC '${e}' ${g} completed.`)}});const A=JSON.stringify(h);Be(kr,`RPC '${e}' ${g} sending request:`,h),S.send(n,"POST",A,l,15)})}qo(e,n,l){const h=jh(),g=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],x=Qg(),C=Yg(),S={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},A=this.longPollingOptions.timeoutSeconds;A!==void 0&&(S.longPollingTimeout=Math.round(1e3*A)),this.useFetchStreams&&(S.useFetchStreams=!0),this.Lo(S.initMessageHeaders,n,l),S.encodeInitMessageHeaders=!0;const O=g.join("");Be(kr,`Creating RPC '${e}' stream ${h}: ${O}`,S);const k=x.createWebChannel(O,S);let q=!1,te=!1;const fe=new zE({Eo:oe=>{te?Be(kr,`Not sending because RPC '${e}' stream ${h} is closed:`,oe):(q||(Be(kr,`Opening RPC '${e}' stream ${h} transport.`),k.open(),q=!0),Be(kr,`RPC '${e}' stream ${h} sending:`,oe),k.send(oe))},Ao:()=>k.close()}),ce=(oe,Ue,De)=>{oe.listen(Ue,ye=>{try{De(ye)}catch(Re){setTimeout(()=>{throw Re},0)}})};return ce(k,xl.EventType.OPEN,()=>{te||(Be(kr,`RPC '${e}' stream ${h} transport opened.`),fe.So())}),ce(k,xl.EventType.CLOSE,()=>{te||(te=!0,Be(kr,`RPC '${e}' stream ${h} transport closed`),fe.Do())}),ce(k,xl.EventType.ERROR,oe=>{te||(te=!0,La(kr,`RPC '${e}' stream ${h} transport errored:`,oe),fe.Do(new $e(Ee.UNAVAILABLE,"The operation could not be completed")))}),ce(k,xl.EventType.MESSAGE,oe=>{var Ue;if(!te){const De=oe.data[0];Gt(!!De);const ye=De,Re=(ye==null?void 0:ye.error)||((Ue=ye[0])===null||Ue===void 0?void 0:Ue.error);if(Re){Be(kr,`RPC '${e}' stream ${h} received error:`,Re);const At=Re.status;let Le=function(P){const W=Hn[P];if(W!==void 0)return xp(W)}(At),U=Re.message;Le===void 0&&(Le=Ee.INTERNAL,U="Unknown error status: "+At+" with message "+Re.message),te=!0,fe.Do(new $e(Le,U)),k.close()}else Be(kr,`RPC '${e}' stream ${h} received:`,De),fe.vo(De)}}),ce(C,Xg.STAT_EVENT,oe=>{oe.stat===ef.PROXY?Be(kr,`RPC '${e}' stream ${h} detected buffering proxy`):oe.stat===ef.NOPROXY&&Be(kr,`RPC '${e}' stream ${h} detected no buffering proxy`)}),setTimeout(()=>{fe.bo()},0),fe}}function Hh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(s){return new qx(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{constructor(e,n,l=1e3,h=1.5,g=6e4){this.li=e,this.timerId=n,this.Qo=l,this.Ko=h,this.$o=g,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),l=Math.max(0,Date.now()-this.Go),h=Math.max(0,n-l);h>0&&Be("ExponentialBackoff",`Backing off for ${h} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${l} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,h,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n,l,h,g,x,C,S){this.li=e,this.Yo=l,this.Zo=h,this.connection=g,this.authCredentialsProvider=x,this.appCheckCredentialsProvider=C,this.listener=S,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Op(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===Ee.RESOURCE_EXHAUSTED?(js(n.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([l,h])=>{this.Xo===n&&this.I_(l,h)},l=>{e(()=>{const h=new $e(Ee.UNKNOWN,"Fetching auth token failed: "+l.message);return this.E_(h)})})}I_(e,n){const l=this.T_(this.Xo);this.stream=this.d_(e,n),this.stream.Ro(()=>{l(()=>this.listener.Ro())}),this.stream.mo(()=>{l(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(h=>{l(()=>this.E_(h))}),this.stream.onMessage(h=>{l(()=>++this.n_==1?this.A_(h):this.onNext(h))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class HE extends Mp{constructor(e,n,l,h,g,x){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,l,h,x),this.serializer=g}d_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=$x(this.serializer,e),l=function(g){if(!("targetChange"in g))return ct.min();const x=g.targetChange;return x.targetIds&&x.targetIds.length?ct.min():x.readTime?ps(x.readTime):ct.min()}(e);return this.listener.R_(n,l)}V_(e){const n={};n.database=cf(this.serializer),n.addTarget=function(g,x){let C;const S=x.target;if(C=sf(S)?{documents:tE(g,S)}:{query:nE(g,S).ct},C.targetId=x.targetId,x.resumeToken.approximateByteSize()>0){C.resumeToken=Ap(g,x.resumeToken);const A=af(g,x.expectedCount);A!==null&&(C.expectedCount=A)}else if(x.snapshotVersion.compareTo(ct.min())>0){C.readTime=Ju(g,x.snapshotVersion.toTimestamp());const A=af(g,x.expectedCount);A!==null&&(C.expectedCount=A)}return C}(this.serializer,e);const l=iE(this.serializer,e);l&&(n.labels=l),this.c_(n)}m_(e){const n={};n.database=cf(this.serializer),n.removeTarget=e,this.c_(n)}}class WE extends Mp{constructor(e,n,l,h,g,x){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,l,h,x),this.serializer=g}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,n){return this.connection.qo("Write",e,n)}A_(e){return Gt(!!e.streamToken),this.lastStreamToken=e.streamToken,Gt(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){Gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=eE(e.writeResults,e.commitTime),l=ps(e.commitTime);return this.listener.y_(l,n)}w_(){const e={};e.database=cf(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(l=>Jx(this.serializer,l))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE extends class{}{constructor(e,n,l,h){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=l,this.serializer=h,this.S_=!1}b_(){if(this.S_)throw new $e(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,l,h){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,x])=>this.connection.Oo(e,lf(n,l),h,g,x)).catch(g=>{throw g.name==="FirebaseError"?(g.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new $e(Ee.UNKNOWN,g.toString())})}ko(e,n,l,h,g){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([x,C])=>this.connection.ko(e,lf(n,l),h,x,C,g)).catch(x=>{throw x.name==="FirebaseError"?(x.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),x):new $e(Ee.UNKNOWN,x.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class XE{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(js(n),this.C_=!1):Be("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{constructor(e,n,l,h,g){this.localStore=e,this.datastore=n,this.asyncQueue=l,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=g,this.Q_.uo(x=>{l.enqueueAndForget(async()=>{ia(this)&&(Be("RemoteStore","Restarting streams for network reachability change."),await async function(S){const A=ft(S);A.k_.add(4),await Fl(A),A.K_.set("Unknown"),A.k_.delete(4),await pc(A)}(this))})}),this.K_=new XE(l,h)}}async function pc(s){if(ia(s))for(const e of s.q_)await e(!0)}async function Fl(s){for(const e of s.q_)await e(!1)}function Pp(s,e){const n=ft(s);n.B_.has(e.targetId)||(n.B_.set(e.targetId,e),Ff(n)?Bf(n):Xa(n).s_()&&Lf(n,e))}function kf(s,e){const n=ft(s),l=Xa(n);n.B_.delete(e),l.s_()&&kp(n,e),n.B_.size===0&&(l.s_()?l.a_():ia(n)&&n.K_.set("Unknown"))}function Lf(s,e){if(s.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ct.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Xa(s).V_(e)}function kp(s,e){s.U_.xe(e),Xa(s).m_(e)}function Bf(s){s.U_=new Gx({getRemoteKeysForTarget:e=>s.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>s.B_.get(e)||null,nt:()=>s.datastore.serializer.databaseId}),Xa(s).start(),s.K_.F_()}function Ff(s){return ia(s)&&!Xa(s).i_()&&s.B_.size>0}function ia(s){return ft(s).k_.size===0}function Lp(s){s.U_=void 0}async function QE(s){s.K_.set("Online")}async function qE(s){s.B_.forEach((e,n)=>{Lf(s,e)})}async function KE(s,e){Lp(s),Ff(s)?(s.K_.O_(e),Bf(s)):s.K_.set("Unknown")}async function ZE(s,e,n){if(s.K_.set("Online"),e instanceof _p&&e.state===2&&e.cause)try{await async function(h,g){const x=g.cause;for(const C of g.targetIds)h.B_.has(C)&&(await h.remoteSyncer.rejectListen(C,x),h.B_.delete(C),h.U_.removeTarget(C))}(s,e)}catch(l){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),l),await tc(s,l)}else if(e instanceof Wu?s.U_.$e(e):e instanceof Ep?s.U_.Je(e):s.U_.Ge(e),!n.isEqual(ct.min()))try{const l=await bp(s.localStore);n.compareTo(l)>=0&&await function(g,x){const C=g.U_.it(x);return C.targetChanges.forEach((S,A)=>{if(S.resumeToken.approximateByteSize()>0){const O=g.B_.get(A);O&&g.B_.set(A,O.withResumeToken(S.resumeToken,x))}}),C.targetMismatches.forEach((S,A)=>{const O=g.B_.get(S);if(!O)return;g.B_.set(S,O.withResumeToken(_r.EMPTY_BYTE_STRING,O.snapshotVersion)),kp(g,S);const k=new wo(O.target,S,A,O.sequenceNumber);Lf(g,k)}),g.remoteSyncer.applyRemoteEvent(C)}(s,n)}catch(l){Be("RemoteStore","Failed to raise snapshot:",l),await tc(s,l)}}async function tc(s,e,n){if(!Ga(e))throw e;s.k_.add(1),await Fl(s),s.K_.set("Offline"),n||(n=()=>bp(s.localStore)),s.asyncQueue.enqueueRetryable(async()=>{Be("RemoteStore","Retrying IndexedDB access"),await n(),s.k_.delete(1),await pc(s)})}function Bp(s,e){return e().catch(n=>tc(s,n,e))}async function mc(s){const e=ft(s),n=No(e);let l=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;$E(e);)try{const h=await kE(e.localStore,l);if(h===null){e.L_.length===0&&n.a_();break}l=h.batchId,JE(e,h)}catch(h){await tc(e,h)}Fp(e)&&Vp(e)}function $E(s){return ia(s)&&s.L_.length<10}function JE(s,e){s.L_.push(e);const n=No(s);n.s_()&&n.f_&&n.g_(e.mutations)}function Fp(s){return ia(s)&&!No(s).i_()&&s.L_.length>0}function Vp(s){No(s).start()}async function e_(s){No(s).w_()}async function t_(s){const e=No(s);for(const n of s.L_)e.g_(n.mutations)}async function n_(s,e,n){const l=s.L_.shift(),h=Nf.from(l,e,n);await Bp(s,()=>s.remoteSyncer.applySuccessfulWrite(h)),await mc(s)}async function r_(s,e){e&&No(s).f_&&await async function(l,h){if(function(x){return jx(x)&&x!==Ee.ABORTED}(h.code)){const g=l.L_.shift();No(l).__(),await Bp(l,()=>l.remoteSyncer.rejectFailedWrite(g.batchId,h)),await mc(l)}}(s,e),Fp(s)&&Vp(s)}async function ig(s,e){const n=ft(s);n.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const l=ia(n);n.k_.add(3),await Fl(n),l&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await pc(n)}async function i_(s,e){const n=ft(s);e?(n.k_.delete(2),await pc(n)):e||(n.k_.add(2),await Fl(n),n.K_.set("Unknown"))}function Xa(s){return s.W_||(s.W_=function(n,l,h){const g=ft(n);return g.b_(),new HE(l,g.connection,g.authCredentials,g.appCheckCredentials,g.serializer,h)}(s.datastore,s.asyncQueue,{Ro:QE.bind(null,s),mo:qE.bind(null,s),po:KE.bind(null,s),R_:ZE.bind(null,s)}),s.q_.push(async e=>{e?(s.W_.__(),Ff(s)?Bf(s):s.K_.set("Unknown")):(await s.W_.stop(),Lp(s))})),s.W_}function No(s){return s.G_||(s.G_=function(n,l,h){const g=ft(n);return g.b_(),new WE(l,g.connection,g.authCredentials,g.appCheckCredentials,g.serializer,h)}(s.datastore,s.asyncQueue,{Ro:()=>Promise.resolve(),mo:e_.bind(null,s),po:r_.bind(null,s),p_:t_.bind(null,s),y_:n_.bind(null,s)}),s.q_.push(async e=>{e?(s.G_.__(),await mc(s)):(await s.G_.stop(),s.L_.length>0&&(Be("RemoteStore",`Stopping write stream with ${s.L_.length} pending writes`),s.L_=[]))})),s.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n,l,h,g){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=l,this.op=h,this.removalCallback=g,this.deferred=new Ao,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(x=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,l,h,g){const x=Date.now()+l,C=new Vf(e,n,x,h,g);return C.start(l),C}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $e(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Uf(s,e){if(js("AsyncQueue",`${e}: ${s}`),Ga(s))return new $e(Ee.UNAVAILABLE,`${e}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{static emptySet(e){return new Pa(e.comparator)}constructor(e){this.comparator=e?(n,l)=>e(n,l)||tt.comparator(n.key,l.key):(n,l)=>tt.comparator(n.key,l.key),this.keyedMap=El(),this.sortedSet=new In(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,l)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Pa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),l=e.sortedSet.getIterator();for(;n.hasNext();){const h=n.getNext().key,g=l.getNext().key;if(!h.isEqual(g))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const l=new Pa;return l.comparator=this.comparator,l.keyedMap=e,l.sortedSet=n,l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{constructor(){this.z_=new In(tt.comparator)}track(e){const n=e.doc.key,l=this.z_.get(n);l?e.type!==0&&l.type===3?this.z_=this.z_.insert(n,e):e.type===3&&l.type!==1?this.z_=this.z_.insert(n,{type:l.type,doc:e.doc}):e.type===2&&l.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&l.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&l.type===0?this.z_=this.z_.remove(n):e.type===1&&l.type===2?this.z_=this.z_.insert(n,{type:1,doc:l.doc}):e.type===0&&l.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):lt():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,l)=>{e.push(l)}),e}}class za{constructor(e,n,l,h,g,x,C,S,A){this.query=e,this.docs=n,this.oldDocs=l,this.docChanges=h,this.mutatedKeys=g,this.fromCache=x,this.syncStateChanged=C,this.excludesMetadataChanges=S,this.hasCachedResults=A}static fromInitialDocuments(e,n,l,h,g){const x=[];return n.forEach(C=>{x.push({type:0,doc:C})}),new za(e,n,Pa.emptySet(n),x,l,h,!0,!1,g)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&uc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,l=e.docChanges;if(n.length!==l.length)return!1;for(let h=0;h<n.length;h++)if(n[h].type!==l[h].type||!n[h].doc.isEqual(l[h].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class o_{constructor(){this.queries=og(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,l){const h=ft(n),g=h.queries;h.queries=og(),g.forEach((x,C)=>{for(const S of C.J_)S.onError(l)})})(this,new $e(Ee.ABORTED,"Firestore shutting down"))}}function og(){return new na(s=>op(s),uc)}async function a_(s,e){const n=ft(s);let l=3;const h=e.query;let g=n.queries.get(h);g?!g.Y_()&&e.Z_()&&(l=2):(g=new s_,l=e.Z_()?0:1);try{switch(l){case 0:g.H_=await n.onListen(h,!0);break;case 1:g.H_=await n.onListen(h,!1);break;case 2:await n.onFirstRemoteStoreListen(h)}}catch(x){const C=Uf(x,`Initialization of query '${Da(e.query)}' failed`);return void e.onError(C)}n.queries.set(h,g),g.J_.push(e),e.ea(n.onlineState),g.H_&&e.ta(g.H_)&&zf(n)}async function l_(s,e){const n=ft(s),l=e.query;let h=3;const g=n.queries.get(l);if(g){const x=g.J_.indexOf(e);x>=0&&(g.J_.splice(x,1),g.J_.length===0?h=e.Z_()?0:1:!g.Y_()&&e.Z_()&&(h=2))}switch(h){case 0:return n.queries.delete(l),n.onUnlisten(l,!0);case 1:return n.queries.delete(l),n.onUnlisten(l,!1);case 2:return n.onLastRemoteStoreUnlisten(l);default:return}}function u_(s,e){const n=ft(s);let l=!1;for(const h of e){const g=h.query,x=n.queries.get(g);if(x){for(const C of x.J_)C.ta(h)&&(l=!0);x.H_=h}}l&&zf(n)}function c_(s,e,n){const l=ft(s),h=l.queries.get(e);if(h)for(const g of h.J_)g.onError(n);l.queries.delete(e)}function zf(s){s.X_.forEach(e=>{e.next()})}var ff,ag;(ag=ff||(ff={})).na="default",ag.Cache="cache";class h_{constructor(e,n,l){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=l||{}}ta(e){if(!this.options.includeMetadataChanges){const l=[];for(const h of e.docChanges)h.type!==3&&l.push(h);e=new za(e.query,e.docs,e.oldDocs,l,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const l=n!=="Offline";return(!this.options.ua||!l)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==ff.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(e){this.key=e}}class zp{constructor(e){this.key=e}}class f_{constructor(e,n){this.query=e,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Tt(),this.mutatedKeys=Tt(),this.Va=ap(e),this.ma=new Pa(this.Va)}get fa(){return this.da}ga(e,n){const l=n?n.pa:new sg,h=n?n.ma:this.ma;let g=n?n.mutatedKeys:this.mutatedKeys,x=h,C=!1;const S=this.query.limitType==="F"&&h.size===this.query.limit?h.last():null,A=this.query.limitType==="L"&&h.size===this.query.limit?h.first():null;if(e.inorderTraversal((O,k)=>{const q=h.get(O),te=cc(this.query,k)?k:null,fe=!!q&&this.mutatedKeys.has(q.key),ce=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let oe=!1;q&&te?q.data.isEqual(te.data)?fe!==ce&&(l.track({type:3,doc:te}),oe=!0):this.ya(q,te)||(l.track({type:2,doc:te}),oe=!0,(S&&this.Va(te,S)>0||A&&this.Va(te,A)<0)&&(C=!0)):!q&&te?(l.track({type:0,doc:te}),oe=!0):q&&!te&&(l.track({type:1,doc:q}),oe=!0,(S||A)&&(C=!0)),oe&&(te?(x=x.add(te),g=ce?g.add(O):g.delete(O)):(x=x.delete(O),g=g.delete(O)))}),this.query.limit!==null)for(;x.size>this.query.limit;){const O=this.query.limitType==="F"?x.last():x.first();x=x.delete(O.key),g=g.delete(O.key),l.track({type:1,doc:O})}return{ma:x,pa:l,ss:C,mutatedKeys:g}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,l,h){const g=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const x=e.pa.j_();x.sort((O,k)=>function(te,fe){const ce=oe=>{switch(oe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return ce(te)-ce(fe)}(O.type,k.type)||this.Va(O.doc,k.doc)),this.wa(l),h=h!=null&&h;const C=n&&!h?this.Sa():[],S=this.Ra.size===0&&this.current&&!h?1:0,A=S!==this.Aa;return this.Aa=S,x.length!==0||A?{snapshot:new za(this.query,e.ma,g,x,e.mutatedKeys,S===0,A,!1,!!l&&l.resumeToken.approximateByteSize()>0),ba:C}:{ba:C}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new sg,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.da=this.da.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=Tt(),this.ma.forEach(l=>{this.Da(l.key)&&(this.Ra=this.Ra.add(l.key))});const n=[];return e.forEach(l=>{this.Ra.has(l)||n.push(new zp(l))}),this.Ra.forEach(l=>{e.has(l)||n.push(new Up(l))}),n}va(e){this.da=e.ds,this.Ra=Tt();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return za.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class d_{constructor(e,n,l){this.query=e,this.targetId=n,this.view=l}}class g_{constructor(e){this.key=e,this.Fa=!1}}class p_{constructor(e,n,l,h,g,x){this.localStore=e,this.remoteStore=n,this.eventManager=l,this.sharedClientState=h,this.currentUser=g,this.maxConcurrentLimboResolutions=x,this.Ma={},this.xa=new na(C=>op(C),uc),this.Oa=new Map,this.Na=new Set,this.La=new In(tt.comparator),this.Ba=new Map,this.ka=new Of,this.qa={},this.Qa=new Map,this.Ka=Ua.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function m_(s,e,n=!0){const l=Yp(s);let h;const g=l.xa.get(e);return g?(l.sharedClientState.addLocalQueryTarget(g.targetId),h=g.view.Ca()):h=await jp(l,e,n,!0),h}async function y_(s,e){const n=Yp(s);await jp(n,e,!0,!1)}async function jp(s,e,n,l){const h=await LE(s.localStore,gs(e)),g=h.targetId,x=s.sharedClientState.addLocalQueryTarget(g,n);let C;return l&&(C=await w_(s,e,g,x==="current",h.resumeToken)),s.isPrimaryClient&&n&&Pp(s.remoteStore,h),C}async function w_(s,e,n,l,h){s.Ua=(k,q,te)=>async function(ce,oe,Ue,De){let ye=oe.view.ga(Ue);ye.ss&&(ye=await tg(ce.localStore,oe.query,!1).then(({documents:U})=>oe.view.ga(U,ye)));const Re=De&&De.targetChanges.get(oe.targetId),At=De&&De.targetMismatches.get(oe.targetId)!=null,Le=oe.view.applyChanges(ye,ce.isPrimaryClient,Re,At);return ug(ce,oe.targetId,Le.ba),Le.snapshot}(s,k,q,te);const g=await tg(s.localStore,e,!0),x=new f_(e,g.ds),C=x.ga(g.documents),S=Bl.createSynthesizedTargetChangeForCurrentChange(n,l&&s.onlineState!=="Offline",h),A=x.applyChanges(C,s.isPrimaryClient,S);ug(s,n,A.ba);const O=new d_(e,n,x);return s.xa.set(e,O),s.Oa.has(n)?s.Oa.get(n).push(e):s.Oa.set(n,[e]),A.snapshot}async function x_(s,e,n){const l=ft(s),h=l.xa.get(e),g=l.Oa.get(h.targetId);if(g.length>1)return l.Oa.set(h.targetId,g.filter(x=>!uc(x,e))),void l.xa.delete(e);l.isPrimaryClient?(l.sharedClientState.removeLocalQueryTarget(h.targetId),l.sharedClientState.isActiveQueryTarget(h.targetId)||await hf(l.localStore,h.targetId,!1).then(()=>{l.sharedClientState.clearQueryState(h.targetId),n&&kf(l.remoteStore,h.targetId),df(l,h.targetId)}).catch(Wa)):(df(l,h.targetId),await hf(l.localStore,h.targetId,!0))}async function E_(s,e){const n=ft(s),l=n.xa.get(e),h=n.Oa.get(l.targetId);n.isPrimaryClient&&h.length===1&&(n.sharedClientState.removeLocalQueryTarget(l.targetId),kf(n.remoteStore,l.targetId))}async function __(s,e,n){const l=R_(s);try{const h=await function(x,C){const S=ft(x),A=$n.now(),O=C.reduce((te,fe)=>te.add(fe.key),Tt());let k,q;return S.persistence.runTransaction("Locally write mutations","readwrite",te=>{let fe=Hs(),ce=Tt();return S.hs.getEntries(te,O).next(oe=>{fe=oe,fe.forEach((Ue,De)=>{De.isValidDocument()||(ce=ce.add(Ue))})}).next(()=>S.localDocuments.getOverlayedDocuments(te,fe)).next(oe=>{k=oe;const Ue=[];for(const De of C){const ye=Bx(De,k.get(De.key).overlayedDocument);ye!=null&&Ue.push(new ra(De.key,ye,Jg(ye.value.mapValue),Vs.exists(!0)))}return S.mutationQueue.addMutationBatch(te,A,Ue,C)}).next(oe=>{q=oe;const Ue=oe.applyToLocalDocumentSet(k,ce);return S.documentOverlayCache.saveOverlays(te,oe.batchId,Ue)})}).then(()=>({batchId:q.batchId,changes:up(k)}))}(l.localStore,e);l.sharedClientState.addPendingMutation(h.batchId),function(x,C,S){let A=x.qa[x.currentUser.toKey()];A||(A=new In(Dt)),A=A.insert(C,S),x.qa[x.currentUser.toKey()]=A}(l,h.batchId,n),await Vl(l,h.changes),await mc(l.remoteStore)}catch(h){const g=Uf(h,"Failed to persist write");n.reject(g)}}async function Hp(s,e){const n=ft(s);try{const l=await ME(n.localStore,e);e.targetChanges.forEach((h,g)=>{const x=n.Ba.get(g);x&&(Gt(h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size<=1),h.addedDocuments.size>0?x.Fa=!0:h.modifiedDocuments.size>0?Gt(x.Fa):h.removedDocuments.size>0&&(Gt(x.Fa),x.Fa=!1))}),await Vl(n,l,e)}catch(l){await Wa(l)}}function lg(s,e,n){const l=ft(s);if(l.isPrimaryClient&&n===0||!l.isPrimaryClient&&n===1){const h=[];l.xa.forEach((g,x)=>{const C=x.view.ea(e);C.snapshot&&h.push(C.snapshot)}),function(x,C){const S=ft(x);S.onlineState=C;let A=!1;S.queries.forEach((O,k)=>{for(const q of k.J_)q.ea(C)&&(A=!0)}),A&&zf(S)}(l.eventManager,e),h.length&&l.Ma.R_(h),l.onlineState=e,l.isPrimaryClient&&l.sharedClientState.setOnlineState(e)}}async function A_(s,e,n){const l=ft(s);l.sharedClientState.updateQueryState(e,"rejected",n);const h=l.Ba.get(e),g=h&&h.key;if(g){let x=new In(tt.comparator);x=x.insert(g,Br.newNoDocument(g,ct.min()));const C=Tt().add(g),S=new dc(ct.min(),new Map,new In(Dt),x,C);await Hp(l,S),l.La=l.La.remove(g),l.Ba.delete(e),jf(l)}else await hf(l.localStore,e,!1).then(()=>df(l,e,n)).catch(Wa)}async function C_(s,e){const n=ft(s),l=e.batch.batchId;try{const h=await OE(n.localStore,e);Gp(n,l,null),Wp(n,l),n.sharedClientState.updateMutationState(l,"acknowledged"),await Vl(n,h)}catch(h){await Wa(h)}}async function I_(s,e,n){const l=ft(s);try{const h=await function(x,C){const S=ft(x);return S.persistence.runTransaction("Reject batch","readwrite-primary",A=>{let O;return S.mutationQueue.lookupMutationBatch(A,C).next(k=>(Gt(k!==null),O=k.keys(),S.mutationQueue.removeMutationBatch(A,k))).next(()=>S.mutationQueue.performConsistencyCheck(A)).next(()=>S.documentOverlayCache.removeOverlaysForBatchId(A,O,C)).next(()=>S.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(A,O)).next(()=>S.localDocuments.getDocuments(A,O))})}(l.localStore,e);Gp(l,e,n),Wp(l,e),l.sharedClientState.updateMutationState(e,"rejected",n),await Vl(l,h)}catch(h){await Wa(h)}}function Wp(s,e){(s.Qa.get(e)||[]).forEach(n=>{n.resolve()}),s.Qa.delete(e)}function Gp(s,e,n){const l=ft(s);let h=l.qa[l.currentUser.toKey()];if(h){const g=h.get(e);g&&(n?g.reject(n):g.resolve(),h=h.remove(e)),l.qa[l.currentUser.toKey()]=h}}function df(s,e,n=null){s.sharedClientState.removeLocalQueryTarget(e);for(const l of s.Oa.get(e))s.xa.delete(l),n&&s.Ma.Wa(l,n);s.Oa.delete(e),s.isPrimaryClient&&s.ka.yr(e).forEach(l=>{s.ka.containsKey(l)||Xp(s,l)})}function Xp(s,e){s.Na.delete(e.path.canonicalString());const n=s.La.get(e);n!==null&&(kf(s.remoteStore,n),s.La=s.La.remove(e),s.Ba.delete(n),jf(s))}function ug(s,e,n){for(const l of n)l instanceof Up?(s.ka.addReference(l.key,e),T_(s,l)):l instanceof zp?(Be("SyncEngine","Document no longer in limbo: "+l.key),s.ka.removeReference(l.key,e),s.ka.containsKey(l.key)||Xp(s,l.key)):lt()}function T_(s,e){const n=e.key,l=n.path.canonicalString();s.La.get(n)||s.Na.has(l)||(Be("SyncEngine","New document in limbo: "+n),s.Na.add(l),jf(s))}function jf(s){for(;s.Na.size>0&&s.La.size<s.maxConcurrentLimboResolutions;){const e=s.Na.values().next().value;s.Na.delete(e);const n=new tt(xn.fromString(e)),l=s.Ka.next();s.Ba.set(l,new g_(n)),s.La=s.La.insert(n,l),Pp(s.remoteStore,new wo(gs(Sf(n.path)),l,"TargetPurposeLimboResolution",sc.oe))}}async function Vl(s,e,n){const l=ft(s),h=[],g=[],x=[];l.xa.isEmpty()||(l.xa.forEach((C,S)=>{x.push(l.Ua(S,e,n).then(A=>{var O;if((A||n)&&l.isPrimaryClient){const k=A?!A.fromCache:(O=n==null?void 0:n.targetChanges.get(S.targetId))===null||O===void 0?void 0:O.current;l.sharedClientState.updateQueryState(S.targetId,k?"current":"not-current")}if(A){h.push(A);const k=Pf.zi(S.targetId,A);g.push(k)}}))}),await Promise.all(x),l.Ma.R_(h),await async function(S,A){const O=ft(S);try{await O.persistence.runTransaction("notifyLocalViewChanges","readwrite",k=>ge.forEach(A,q=>ge.forEach(q.Wi,te=>O.persistence.referenceDelegate.addReference(k,q.targetId,te)).next(()=>ge.forEach(q.Gi,te=>O.persistence.referenceDelegate.removeReference(k,q.targetId,te)))))}catch(k){if(!Ga(k))throw k;Be("LocalStore","Failed to update sequence numbers: "+k)}for(const k of A){const q=k.targetId;if(!k.fromCache){const te=O.us.get(q),fe=te.snapshotVersion,ce=te.withLastLimboFreeSnapshotVersion(fe);O.us=O.us.insert(q,ce)}}}(l.localStore,g))}async function v_(s,e){const n=ft(s);if(!n.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const l=await Dp(n.localStore,e);n.currentUser=e,function(g,x){g.Qa.forEach(C=>{C.forEach(S=>{S.reject(new $e(Ee.CANCELLED,x))})}),g.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,l.removedBatchIds,l.addedBatchIds),await Vl(n,l.Ts)}}function S_(s,e){const n=ft(s),l=n.Ba.get(e);if(l&&l.Fa)return Tt().add(l.key);{let h=Tt();const g=n.Oa.get(e);if(!g)return h;for(const x of g){const C=n.xa.get(x);h=h.unionWith(C.view.fa)}return h}}function Yp(s){const e=ft(s);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=S_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=A_.bind(null,e),e.Ma.R_=u_.bind(null,e.eventManager),e.Ma.Wa=c_.bind(null,e.eventManager),e}function R_(s){const e=ft(s);return e.remoteStore.remoteSyncer.applySuccessfulWrite=C_.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=I_.bind(null,e),e}class nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gc(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return bE(this.persistence,new NE,e.initialUser,this.serializer)}ja(e){return new Np(Mf.ei,this.serializer)}za(e){return new FE}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nc.provider={build:()=>new nc};class N_ extends nc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){Gt(this.persistence.referenceDelegate instanceof ec);const l=this.persistence.referenceDelegate.garbageCollector;return new gE(l,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?ai.withCacheSize(this.cacheSizeBytes):ai.DEFAULT;return new Np(l=>ec.ei(l,n),this.serializer)}}class gf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=l=>lg(this.syncEngine,l,1),this.remoteStore.remoteSyncer.handleCredentialChange=v_.bind(null,this.syncEngine),await i_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new o_}()}createDatastore(e){const n=gc(e.databaseInfo.databaseId),l=function(g){return new jE(g)}(e.databaseInfo);return function(g,x,C,S){return new GE(g,x,C,S)}(e.authCredentials,e.appCheckCredentials,l,n)}createRemoteStore(e){return function(l,h,g,x,C){return new YE(l,h,g,x,C)}(this.localStore,this.datastore,e.asyncQueue,n=>lg(this.syncEngine,n,0),function(){return rg.p()?new rg:new VE}())}createSyncEngine(e,n){return function(h,g,x,C,S,A,O){const k=new p_(h,g,x,C,S,A);return O&&(k.$a=!0),k}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(h){const g=ft(h);Be("RemoteStore","RemoteStore shutting down."),g.k_.add(5),await Fl(g),g.Q_.shutdown(),g.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}gf.provider={build:()=>new gf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):js("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(e,n,l,h,g){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=l,this.databaseInfo=h,this.user=Lr.UNAUTHENTICATED,this.clientId=Kg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=g,this.authCredentials.start(l,async x=>{Be("FirestoreClient","Received user=",x.uid),await this.authCredentialListener(x),this.user=x}),this.appCheckCredentials.start(l,x=>(Be("FirestoreClient","Received new app check token=",x),this.appCheckCredentialListener(x,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ao;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const l=Uf(n,"Failed to shutdown persistence");e.reject(l)}}),e.promise}}async function Wh(s,e){s.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const n=s.configuration;await e.initialize(n);let l=n.initialUser;s.setCredentialChangeListener(async h=>{l.isEqual(h)||(await Dp(e.localStore,h),l=h)}),e.persistence.setDatabaseDeletedListener(()=>s.terminate()),s._offlineComponents=e}async function cg(s,e){s.asyncQueue.verifyOperationInProgress();const n=await O_(s);Be("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,s.configuration),s.setCredentialChangeListener(l=>ig(e.remoteStore,l)),s.setAppCheckTokenChangeListener((l,h)=>ig(e.remoteStore,h)),s._onlineComponents=e}async function O_(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){Be("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wh(s,s._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(h){return h.name==="FirebaseError"?h.code===Ee.FAILED_PRECONDITION||h.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&h instanceof DOMException)||h.code===22||h.code===20||h.code===11}(n))throw n;La("Error using user provided cache. Falling back to memory cache: "+n),await Wh(s,new nc)}}else Be("FirestoreClient","Using default OfflineComponentProvider"),await Wh(s,new N_(void 0));return s._offlineComponents}async function Qp(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(Be("FirestoreClient","Using user provided OnlineComponentProvider"),await cg(s,s._uninitializedComponentsProvider._online)):(Be("FirestoreClient","Using default OnlineComponentProvider"),await cg(s,new gf))),s._onlineComponents}function M_(s){return Qp(s).then(e=>e.syncEngine)}async function P_(s){const e=await Qp(s),n=e.eventManager;return n.onListen=m_.bind(null,e.syncEngine),n.onUnlisten=x_.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=y_.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=E_.bind(null,e.syncEngine),n}function k_(s,e,n={}){const l=new Ao;return s.asyncQueue.enqueueAndForget(async()=>function(g,x,C,S,A){const O=new D_({next:q=>{O.eu(),x.enqueueAndForget(()=>l_(g,k));const te=q.docs.has(C);!te&&q.fromCache?A.reject(new $e(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):te&&q.fromCache&&S&&S.source==="server"?A.reject(new $e(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):A.resolve(q)},error:q=>A.reject(q)}),k=new h_(Sf(C.path),O,{includeMetadataChanges:!0,ua:!0});return a_(g,k)}(await P_(s),s.asyncQueue,e,n,l)),l.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(s){const e={};return s.timeoutSeconds!==void 0&&(e.timeoutSeconds=s.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kp(s,e,n){if(!n)throw new $e(Ee.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${e}.`)}function L_(s,e,n,l){if(e===!0&&l===!0)throw new $e(Ee.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function fg(s){if(!tt.isDocumentKey(s))throw new $e(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function dg(s){if(tt.isDocumentKey(s))throw new $e(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function Hf(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const e=function(l){return l.constructor?l.constructor.name:null}(s);return e?`a custom ${e} object`:"an object"}}return typeof s=="function"?"a function":lt()}function rc(s,e){if("_delegate"in s&&(s=s._delegate),!(s instanceof e)){if(e.name===s.constructor.name)throw new $e(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hf(s);throw new $e(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e){var n,l;if(e.host===void 0){if(e.ssl!==void 0)throw new $e(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $e(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}L_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qp((l=e.experimentalLongPollingOptions)!==null&&l!==void 0?l:{}),function(g){if(g.timeoutSeconds!==void 0){if(isNaN(g.timeoutSeconds))throw new $e(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (must not be NaN)`);if(g.timeoutSeconds<5)throw new $e(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (minimum allowed value is 5)`);if(g.timeoutSeconds>30)throw new $e(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(l,h){return l.timeoutSeconds===h.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yc{constructor(e,n,l,h){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=l,this._app=h,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gg({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $e(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $e(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gg(e),e.credentials!==void 0&&(this._authCredentials=function(l){if(!l)return new jw;switch(l.type){case"firstParty":return new Xw(l.sessionIndex||"0",l.iamToken||null,l.authTokenFactory||null);case"provider":return l.client;default:throw new $e(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const l=hg.get(n);l&&(Be("ComponentProvider","Removing Datastore"),hg.delete(n),l.terminate())}(this),Promise.resolve()}}function B_(s,e,n,l={}){var h;const g=(s=rc(s,yc))._getSettings(),x=`${e}:${n}`;if(g.host!=="firestore.googleapis.com"&&g.host!==x&&La("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),s._setSettings(Object.assign(Object.assign({},g),{host:x,ssl:!1})),l.mockUserToken){let C,S;if(typeof l.mockUserToken=="string")C=l.mockUserToken,S=Lr.MOCK_USER;else{C=Mg(l.mockUserToken,(h=s._app)===null||h===void 0?void 0:h.options.projectId);const A=l.mockUserToken.sub||l.mockUserToken.user_id;if(!A)throw new $e(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new Lr(A)}s._authCredentials=new Hw(new qg(C,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,n,l){this.converter=n,this._query=l,this.type="query",this.firestore=e}withConverter(e){return new Wf(this.firestore,e,this._query)}}class ki{constructor(e,n,l){this.converter=n,this._key=l,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ki(this.firestore,e,this._key)}}class Co extends Wf{constructor(e,n,l){super(e,n,Sf(l)),this._path=l,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ki(this.firestore,null,new tt(e))}withConverter(e){return new Co(this.firestore,e,this._path)}}function F_(s,e,...n){if(s=Us(s),Kp("collection","path",e),s instanceof yc){const l=xn.fromString(e,...n);return dg(l),new Co(s,null,l)}{if(!(s instanceof ki||s instanceof Co))throw new $e(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=s._path.child(xn.fromString(e,...n));return dg(l),new Co(s.firestore,null,l)}}function Gf(s,e,...n){if(s=Us(s),arguments.length===1&&(e=Kg.newId()),Kp("doc","path",e),s instanceof yc){const l=xn.fromString(e,...n);return fg(l),new ki(s,null,new tt(l))}{if(!(s instanceof ki||s instanceof Co))throw new $e(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const l=s._path.child(xn.fromString(e,...n));return fg(l),new ki(s.firestore,s instanceof Co?s.converter:null,new tt(l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pg{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Op(this,"async_queue_retry"),this.fu=()=>{const l=Hh();l&&Be("AsyncQueue","Visibility state changed to "+l.visibilityState),this.r_.Jo()},this.gu=e;const n=Hh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const n=Hh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new Ao;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ga(e))throw e;Be("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(l=>{this.Au=l,this.Ru=!1;const h=function(x){let C=x.message||"";return x.stack&&(C=x.stack.includes(x.message)?x.stack:x.message+`
`+x.stack),C}(l);throw js("INTERNAL UNHANDLED ERROR: ",h),l}).then(l=>(this.Ru=!1,l))));return this.gu=n,n}enqueueAfterDelay(e,n,l){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const h=Vf.createAndSchedule(this,e,n,l,g=>this.Su(g));return this.du.push(h),h}pu(){this.Au&&lt()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.du)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((n,l)=>n.targetTimeMs-l.targetTimeMs);for(const n of this.du)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.du.indexOf(e);this.du.splice(n,1)}}class Xf extends yc{constructor(e,n,l,h){super(e,n,l,h),this.type="firestore",this._queue=new pg,this._persistenceKey=(h==null?void 0:h.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new pg(e),this._firestoreClient=void 0,await e}}}function Zp(s,e){const n=typeof s=="object"?s:Ug(),l=typeof s=="string"?s:"(default)",h=Fg(n,"firestore").getImmediate({identifier:l});if(!h._initialized){const g=bg("firestore");g&&B_(h,...g)}return h}function $p(s){if(s._terminated)throw new $e(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||V_(s),s._firestoreClient}function V_(s){var e,n,l;const h=s._freezeSettings(),g=function(C,S,A,O){return new ax(C,S,A,O.host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,qp(O.experimentalLongPollingOptions),O.useFetchStreams)}(s._databaseId,((e=s._app)===null||e===void 0?void 0:e.options.appId)||"",s._persistenceKey,h);s._componentsProvider||!((n=h.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((l=h.localCache)===null||l===void 0)&&l._onlineComponentProvider)&&(s._componentsProvider={_offline:h.localCache._offlineComponentProvider,_online:h.localCache._onlineComponentProvider}),s._firestoreClient=new b_(s._authCredentials,s._appCheckCredentials,s._queue,g,s._componentsProvider&&function(C){const S=C==null?void 0:C._online.build();return{_offline:C==null?void 0:C._offline.build(S),_online:S}}(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ja(_r.fromBase64String(e))}catch(n){throw new $e(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ja(_r.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $e(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $e(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $e(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Dt(this._lat,e._lat)||Dt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(l,h){if(l.length!==h.length)return!1;for(let g=0;g<l.length;++g)if(l[g]!==h[g])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U_=/^__.*__$/;class z_{constructor(e,n,l){this.data=e,this.fieldMask=n,this.fieldTransforms=l}toMutation(e,n){return this.fieldMask!==null?new ra(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ll(e,this.data,n,this.fieldTransforms)}}function Jp(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class Zf{constructor(e,n,l,h,g,x){this.settings=e,this.databaseId=n,this.serializer=l,this.ignoreUndefinedProperties=h,g===void 0&&this.Fu(),this.fieldTransforms=g||[],this.fieldMask=x||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Zf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const l=(n=this.path)===null||n===void 0?void 0:n.child(e),h=this.xu({path:l,Nu:!1});return h.Lu(e),h}Bu(e){var n;const l=(n=this.path)===null||n===void 0?void 0:n.child(e),h=this.xu({path:l,Nu:!1});return h.Fu(),h}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return ic(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(Jp(this.Mu)&&U_.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class j_{constructor(e,n,l){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=l||gc(e)}$u(e,n,l,h=!1){return new Zf({Mu:e,methodName:n,Ku:l,path:Er.emptyPath(),Nu:!1,Qu:h},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function H_(s){const e=s._freezeSettings(),n=gc(s._databaseId);return new j_(s._databaseId,!!e.ignoreUndefinedProperties,n)}function W_(s,e,n,l,h,g={}){const x=s.$u(g.merge||g.mergeFields?2:0,e,n,h);rm("Data must be an object, but it was:",x,l);const C=tm(l,x);let S,A;if(g.merge)S=new Ki(x.fieldMask),A=x.fieldTransforms;else if(g.mergeFields){const O=[];for(const k of g.mergeFields){const q=G_(e,k,n);if(!x.contains(q))throw new $e(Ee.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);Y_(O,q)||O.push(q)}S=new Ki(O),A=x.fieldTransforms.filter(k=>S.covers(k.field))}else S=null,A=x.fieldTransforms;return new z_(new Pi(C),S,A)}class $f extends Qf{_toFieldTransform(e){return new Mx(e.path,new Ml)}isEqual(e){return e instanceof $f}}function em(s,e){if(nm(s=Us(s)))return rm("Unsupported field value:",e,s),tm(s,e);if(s instanceof Qf)return function(l,h){if(!Jp(h.Mu))throw h.qu(`${l._methodName}() can only be used with update() and set()`);if(!h.path)throw h.qu(`${l._methodName}() is not currently supported inside arrays`);const g=l._toFieldTransform(h);g&&h.fieldTransforms.push(g)}(s,e),null;if(s===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),s instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(l,h){const g=[];let x=0;for(const C of l){let S=em(C,h.ku(x));S==null&&(S={nullValue:"NULL_VALUE"}),g.push(S),x++}return{arrayValue:{values:g}}}(s,e)}return function(l,h){if((l=Us(l))===null)return{nullValue:"NULL_VALUE"};if(typeof l=="number")return Dx(h.serializer,l);if(typeof l=="boolean")return{booleanValue:l};if(typeof l=="string")return{stringValue:l};if(l instanceof Date){const g=$n.fromDate(l);return{timestampValue:Ju(h.serializer,g)}}if(l instanceof $n){const g=new $n(l.seconds,1e3*Math.floor(l.nanoseconds/1e3));return{timestampValue:Ju(h.serializer,g)}}if(l instanceof qf)return{geoPointValue:{latitude:l.latitude,longitude:l.longitude}};if(l instanceof ja)return{bytesValue:Ap(h.serializer,l._byteString)};if(l instanceof ki){const g=h.databaseId,x=l.firestore._databaseId;if(!x.isEqual(g))throw h.qu(`Document reference is for database ${x.projectId}/${x.database} but should be for database ${g.projectId}/${g.database}`);return{referenceValue:bf(l.firestore._databaseId||h.databaseId,l._key.path)}}if(l instanceof Kf)return function(x,C){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:x.toArray().map(S=>{if(typeof S!="number")throw C.qu("VectorValues must only contain numeric values.");return Rf(C.serializer,S)})}}}}}}(l,h);throw h.qu(`Unsupported field value: ${Hf(l)}`)}(s,e)}function tm(s,e){const n={};return Zg(s)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ta(s,(l,h)=>{const g=em(h,e.Ou(l));g!=null&&(n[l]=g)}),{mapValue:{fields:n}}}function nm(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof $n||s instanceof qf||s instanceof ja||s instanceof ki||s instanceof Qf||s instanceof Kf)}function rm(s,e,n){if(!nm(n)||!function(h){return typeof h=="object"&&h!==null&&(Object.getPrototypeOf(h)===Object.prototype||Object.getPrototypeOf(h)===null)}(n)){const l=Hf(n);throw l==="an object"?e.qu(s+" a custom object"):e.qu(s+" "+l)}}function G_(s,e,n){if((e=Us(e))instanceof Yf)return e._internalPath;if(typeof e=="string")return im(s,e);throw ic("Field path arguments must be of type string or ",s,!1,void 0,n)}const X_=new RegExp("[~\\*/\\[\\]]");function im(s,e,n){if(e.search(X_)>=0)throw ic(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Yf(...e.split("."))._internalPath}catch{throw ic(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function ic(s,e,n,l,h){const g=l&&!l.isEmpty(),x=h!==void 0;let C=`Function ${e}() called with invalid data`;n&&(C+=" (via `toFirestore()`)"),C+=". ";let S="";return(g||x)&&(S+=" (found",g&&(S+=` in field ${l}`),x&&(S+=` in document ${h}`),S+=")"),new $e(Ee.INVALID_ARGUMENT,C+s+S)}function Y_(s,e){return s.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n,l,h,g){this._firestore=e,this._userDataWriter=n,this._key=l,this._document=h,this._converter=g}get id(){return this._key.path.lastSegment()}get ref(){return new ki(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Q_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(om("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Q_ extends sm{data(){return super.data()}}function om(s,e){return typeof e=="string"?im(s,e):e instanceof Yf?e._internalPath:e._delegate._internalPath}class q_{convertValue(e,n="none"){switch(Ro(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(So(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw lt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const l={};return ta(e,(h,g)=>{l[h]=this.convertValue(g,n)}),l}convertVectorValue(e){var n,l,h;const g=(h=(l=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||l===void 0?void 0:l.values)===null||h===void 0?void 0:h.map(x=>zn(x.doubleValue));return new Kf(g)}convertGeoPoint(e){return new qf(zn(e.latitude),zn(e.longitude))}convertArray(e,n){return(e.values||[]).map(l=>this.convertValue(l,n))}convertServerTimestamp(e,n){switch(n){case"previous":const l=ac(e);return l==null?null:this.convertValue(l,n);case"estimate":return this.convertTimestamp(Dl(e));default:return null}}convertTimestamp(e){const n=vo(e);return new $n(n.seconds,n.nanos)}convertDocumentKey(e,n){const l=xn.fromString(e);Gt(Rp(l));const h=new bl(l.get(1),l.get(3)),g=new tt(l.popFirst(5));return h.isEqual(n)||js(`Document ${g} contains a document reference within a different database (${h.projectId}/${h.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),g}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(s,e,n){let l;return l=s?s.toFirestore(e):e,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class am extends sm{constructor(e,n,l,h,g,x){super(e,n,l,h,x),this._firestore=e,this._firestoreImpl=e,this.metadata=g}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new $_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const l=this._document.data.field(om("DocumentSnapshot.get",e));if(l!==null)return this._userDataWriter.convertValue(l,n.serverTimestamps)}}}class $_ extends am{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(s){s=rc(s,ki);const e=rc(s.firestore,Xf);return k_($p(e),s._key).then(n=>nA(e,s,n))}class J_ extends q_{constructor(e){super(),this.firestore=e}convertBytes(e){return new ja(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ki(this.firestore,null,n)}}function eA(s,e){const n=rc(s.firestore,Xf),l=Gf(s),h=K_(s.converter,e);return tA(n,[W_(H_(s.firestore),"addDoc",l._key,h,s.converter!==null,{}).toMutation(l._key,Vs.exists(!1))]).then(()=>l)}function tA(s,e){return function(l,h){const g=new Ao;return l.asyncQueue.enqueueAndForget(async()=>__(await M_(l),h,g)),g.promise}($p(s),e)}function nA(s,e,n){const l=n.docs.get(e._key),h=new J_(s);return new am(s,h,e._key,l,new Z_(n.hasPendingWrites,n.fromCache),e.converter)}function rA(){return new $f("serverTimestamp")}(function(e,n=!0){(function(h){Ha=h})(Vg),Sl(new ka("firestore",(l,{instanceIdentifier:h,options:g})=>{const x=l.getProvider("app").getImmediate(),C=new Xf(new Ww(l.getProvider("auth-internal")),new Qw(l.getProvider("app-check-internal")),function(A,O){if(!Object.prototype.hasOwnProperty.apply(A.options,["projectId"]))throw new $e(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bl(A.options.projectId,O)}(x,h),x);return g=Object.assign({useFetchStreams:n},g),C._setSettings(g),C},"PUBLIC").setMultipleInstances(!0)),_o(O0,"4.7.5",e),_o(O0,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const um="firebasestorage.googleapis.com",cm="storageBucket",iA=2*60*1e3,sA=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn extends ea{constructor(e,n,l=0){super(Gh(e),`Firebase Storage: ${n} (${Gh(e)})`),this.status_=l,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Gh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Mn;(function(s){s.UNKNOWN="unknown",s.OBJECT_NOT_FOUND="object-not-found",s.BUCKET_NOT_FOUND="bucket-not-found",s.PROJECT_NOT_FOUND="project-not-found",s.QUOTA_EXCEEDED="quota-exceeded",s.UNAUTHENTICATED="unauthenticated",s.UNAUTHORIZED="unauthorized",s.UNAUTHORIZED_APP="unauthorized-app",s.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",s.INVALID_CHECKSUM="invalid-checksum",s.CANCELED="canceled",s.INVALID_EVENT_NAME="invalid-event-name",s.INVALID_URL="invalid-url",s.INVALID_DEFAULT_BUCKET="invalid-default-bucket",s.NO_DEFAULT_BUCKET="no-default-bucket",s.CANNOT_SLICE_BLOB="cannot-slice-blob",s.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",s.NO_DOWNLOAD_URL="no-download-url",s.INVALID_ARGUMENT="invalid-argument",s.INVALID_ARGUMENT_COUNT="invalid-argument-count",s.APP_DELETED="app-deleted",s.INVALID_ROOT_OPERATION="invalid-root-operation",s.INVALID_FORMAT="invalid-format",s.INTERNAL_ERROR="internal-error",s.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Mn||(Mn={}));function Gh(s){return"storage/"+s}function Jf(){const s="An unknown error occurred, please check the error payload for server response.";return new Pn(Mn.UNKNOWN,s)}function oA(s){return new Pn(Mn.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")}function aA(s){return new Pn(Mn.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lA(){const s="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pn(Mn.UNAUTHENTICATED,s)}function uA(){return new Pn(Mn.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cA(s){return new Pn(Mn.UNAUTHORIZED,"User does not have permission to access '"+s+"'.")}function hA(){return new Pn(Mn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fA(){return new Pn(Mn.CANCELED,"User canceled the upload/download.")}function dA(s){return new Pn(Mn.INVALID_URL,"Invalid URL '"+s+"'.")}function gA(s){return new Pn(Mn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+s+"'.")}function pA(){return new Pn(Mn.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+cm+"' property when initializing the app?")}function mA(){return new Pn(Mn.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yA(){return new Pn(Mn.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wA(s){return new Pn(Mn.UNSUPPORTED_ENVIRONMENT,`${s} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pf(s){return new Pn(Mn.INVALID_ARGUMENT,s)}function hm(){return new Pn(Mn.APP_DELETED,"The Firebase app was deleted.")}function xA(s){return new Pn(Mn.INVALID_ROOT_OPERATION,"The operation '"+s+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function vl(s,e){return new Pn(Mn.INVALID_FORMAT,"String does not match format '"+s+"': "+e)}function yl(s){throw new Pn(Mn.INTERNAL_ERROR,"Internal error: "+s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let l;try{l=Ai.makeFromUrl(e,n)}catch{return new Ai(e,"")}if(l.path==="")return l;throw gA(e)}static makeFromUrl(e,n){let l=null;const h="([A-Za-z0-9.\\-_]+)";function g(Re){Re.path.charAt(Re.path.length-1)==="/"&&(Re.path_=Re.path_.slice(0,-1))}const x="(/(.*))?$",C=new RegExp("^gs://"+h+x,"i"),S={bucket:1,path:3};function A(Re){Re.path_=decodeURIComponent(Re.path)}const O="v[A-Za-z0-9_]+",k=n.replace(/[.]/g,"\\."),q="(/([^?#]*).*)?$",te=new RegExp(`^https?://${k}/${O}/b/${h}/o${q}`,"i"),fe={bucket:1,path:3},ce=n===um?"(?:storage.googleapis.com|storage.cloud.google.com)":n,oe="([^?#]*)",Ue=new RegExp(`^https?://${ce}/${h}/${oe}`,"i"),ye=[{regex:C,indices:S,postModify:g},{regex:te,indices:fe,postModify:A},{regex:Ue,indices:{bucket:1,path:2},postModify:A}];for(let Re=0;Re<ye.length;Re++){const At=ye[Re],Le=At.regex.exec(e);if(Le){const U=Le[At.indices.bucket];let F=Le[At.indices.path];F||(F=""),l=new Ai(U,F),At.postModify(l);break}}if(l==null)throw dA(e);return l}}class EA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(s,e,n){let l=1,h=null,g=null,x=!1,C=0;function S(){return C===2}let A=!1;function O(...oe){A||(A=!0,e.apply(null,oe))}function k(oe){h=setTimeout(()=>{h=null,s(te,S())},oe)}function q(){g&&clearTimeout(g)}function te(oe,...Ue){if(A){q();return}if(oe){q(),O.call(null,oe,...Ue);return}if(S()||x){q(),O.call(null,oe,...Ue);return}l<64&&(l*=2);let ye;C===1?(C=2,ye=0):ye=(l+Math.random())*1e3,k(ye)}let fe=!1;function ce(oe){fe||(fe=!0,q(),!A&&(h!==null?(oe||(C=2),clearTimeout(h),k(0)):oe||(C=1)))}return k(0),g=setTimeout(()=>{x=!0,ce(!0)},n),ce}function AA(s){s(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(s){return s!==void 0}function IA(s){return typeof s=="object"&&!Array.isArray(s)}function ed(s){return typeof s=="string"||s instanceof String}function mg(s){return td()&&s instanceof Blob}function td(){return typeof Blob<"u"}function yg(s,e,n,l){if(l<e)throw pf(`Invalid value for '${s}'. Expected ${e} or greater.`);if(l>n)throw pf(`Invalid value for '${s}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nd(s,e,n){let l=e;return n==null&&(l=`https://${e}`),`${n}://${l}/v0${s}`}function fm(s){const e=encodeURIComponent;let n="?";for(const l in s)if(s.hasOwnProperty(l)){const h=e(l)+"="+e(s[l]);n=n+h+"&"}return n=n.slice(0,-1),n}var Zo;(function(s){s[s.NO_ERROR=0]="NO_ERROR",s[s.NETWORK_ERROR=1]="NETWORK_ERROR",s[s.ABORT=2]="ABORT"})(Zo||(Zo={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TA(s,e){const n=s>=500&&s<600,h=[408,429].indexOf(s)!==-1,g=e.indexOf(s)!==-1;return n||h||g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,n,l,h,g,x,C,S,A,O,k,q=!0){this.url_=e,this.method_=n,this.headers_=l,this.body_=h,this.successCodes_=g,this.additionalRetryCodes_=x,this.callback_=C,this.errorCallback_=S,this.timeout_=A,this.progressCallback_=O,this.connectionFactory_=k,this.retry=q,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((te,fe)=>{this.resolve_=te,this.reject_=fe,this.start_()})}start_(){const e=(l,h)=>{if(h){l(!1,new Fu(!1,null,!0));return}const g=this.connectionFactory_();this.pendingConnection_=g;const x=C=>{const S=C.loaded,A=C.lengthComputable?C.total:-1;this.progressCallback_!==null&&this.progressCallback_(S,A)};this.progressCallback_!==null&&g.addUploadProgressListener(x),g.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&g.removeUploadProgressListener(x),this.pendingConnection_=null;const C=g.getErrorCode()===Zo.NO_ERROR,S=g.getStatus();if(!C||TA(S,this.additionalRetryCodes_)&&this.retry){const O=g.getErrorCode()===Zo.ABORT;l(!1,new Fu(!1,null,O));return}const A=this.successCodes_.indexOf(S)!==-1;l(!0,new Fu(A,g))})},n=(l,h)=>{const g=this.resolve_,x=this.reject_,C=h.connection;if(h.wasSuccessCode)try{const S=this.callback_(C,C.getResponse());CA(S)?g(S):g()}catch(S){x(S)}else if(C!==null){const S=Jf();S.serverResponse=C.getErrorText(),this.errorCallback_?x(this.errorCallback_(C,S)):x(S)}else if(h.canceled){const S=this.appDelete_?hm():fA();x(S)}else{const S=hA();x(S)}};this.canceled_?n(!1,new Fu(!1,null,!0)):this.backoffId_=_A(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&AA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Fu{constructor(e,n,l){this.wasSuccessCode=e,this.connection=n,this.canceled=!!l}}function SA(s,e){e!==null&&e.length>0&&(s.Authorization="Firebase "+e)}function RA(s,e){s["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function NA(s,e){e&&(s["X-Firebase-GMPID"]=e)}function DA(s,e){e!==null&&(s["X-Firebase-AppCheck"]=e)}function bA(s,e,n,l,h,g,x=!0){const C=fm(s.urlParams),S=s.url+C,A=Object.assign({},s.headers);return NA(A,e),SA(A,n),RA(A,g),DA(A,l),new vA(S,s.method,A,s.body,s.successCodes,s.additionalRetryCodes,s.handler,s.errorHandler,s.timeout,s.progressCallback,h,x)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OA(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function MA(...s){const e=OA();if(e!==void 0){const n=new e;for(let l=0;l<s.length;l++)n.append(s[l]);return n.getBlob()}else{if(td())return new Blob(s);throw new Pn(Mn.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function PA(s,e,n){return s.webkitSlice?s.webkitSlice(e,n):s.mozSlice?s.mozSlice(e,n):s.slice?s.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kA(s){if(typeof atob>"u")throw wA("base-64");return atob(s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xh{constructor(e,n){this.data=e,this.contentType=n||null}}function LA(s,e){switch(s){case ds.RAW:return new Xh(dm(e));case ds.BASE64:case ds.BASE64URL:return new Xh(gm(s,e));case ds.DATA_URL:return new Xh(FA(e),VA(e))}throw Jf()}function dm(s){const e=[];for(let n=0;n<s.length;n++){let l=s.charCodeAt(n);if(l<=127)e.push(l);else if(l<=2047)e.push(192|l>>6,128|l&63);else if((l&64512)===55296)if(!(n<s.length-1&&(s.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const g=l,x=s.charCodeAt(++n);l=65536|(g&1023)<<10|x&1023,e.push(240|l>>18,128|l>>12&63,128|l>>6&63,128|l&63)}else(l&64512)===56320?e.push(239,191,189):e.push(224|l>>12,128|l>>6&63,128|l&63)}return new Uint8Array(e)}function BA(s){let e;try{e=decodeURIComponent(s)}catch{throw vl(ds.DATA_URL,"Malformed data URL.")}return dm(e)}function gm(s,e){switch(s){case ds.BASE64:{const h=e.indexOf("-")!==-1,g=e.indexOf("_")!==-1;if(h||g)throw vl(s,"Invalid character '"+(h?"-":"_")+"' found: is it base64url encoded?");break}case ds.BASE64URL:{const h=e.indexOf("+")!==-1,g=e.indexOf("/")!==-1;if(h||g)throw vl(s,"Invalid character '"+(h?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=kA(e)}catch(h){throw h.message.includes("polyfill")?h:vl(s,"Invalid character found")}const l=new Uint8Array(n.length);for(let h=0;h<n.length;h++)l[h]=n.charCodeAt(h);return l}class pm{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw vl(ds.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const l=n[1]||null;l!=null&&(this.base64=UA(l,";base64"),this.contentType=this.base64?l.substring(0,l.length-7):l),this.rest=e.substring(e.indexOf(",")+1)}}function FA(s){const e=new pm(s);return e.base64?gm(ds.BASE64,e.rest):BA(e.rest)}function VA(s){return new pm(s).contentType}function UA(s,e){return s.length>=e.length?s.substring(s.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){let l=0,h="";mg(e)?(this.data_=e,l=e.size,h=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),l=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),l=e.length),this.size_=l,this.type_=h}size(){return this.size_}type(){return this.type_}slice(e,n){if(mg(this.data_)){const l=this.data_,h=PA(l,e,n);return h===null?null:new yo(h)}else{const l=new Uint8Array(this.data_.buffer,e,n-e);return new yo(l,!0)}}static getBlob(...e){if(td()){const n=e.map(l=>l instanceof yo?l.data_:l);return new yo(MA.apply(null,n))}else{const n=e.map(x=>ed(x)?LA(ds.RAW,x).data:x.data_);let l=0;n.forEach(x=>{l+=x.byteLength});const h=new Uint8Array(l);let g=0;return n.forEach(x=>{for(let C=0;C<x.length;C++)h[g++]=x[C]}),new yo(h,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(s){let e;try{e=JSON.parse(s)}catch{return null}return IA(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(s){if(s.length===0)return null;const e=s.lastIndexOf("/");return e===-1?"":s.slice(0,e)}function jA(s,e){const n=e.split("/").filter(l=>l.length>0).join("/");return s.length===0?n:s+"/"+n}function ym(s){const e=s.lastIndexOf("/",s.length-2);return e===-1?s:s.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HA(s,e){return e}class Gr{constructor(e,n,l,h){this.server=e,this.local=n||e,this.writable=!!l,this.xform=h||HA}}let Vu=null;function WA(s){return!ed(s)||s.length<2?s:ym(s)}function wm(){if(Vu)return Vu;const s=[];s.push(new Gr("bucket")),s.push(new Gr("generation")),s.push(new Gr("metageneration")),s.push(new Gr("name","fullPath",!0));function e(g,x){return WA(x)}const n=new Gr("name");n.xform=e,s.push(n);function l(g,x){return x!==void 0?Number(x):x}const h=new Gr("size");return h.xform=l,s.push(h),s.push(new Gr("timeCreated")),s.push(new Gr("updated")),s.push(new Gr("md5Hash",null,!0)),s.push(new Gr("cacheControl",null,!0)),s.push(new Gr("contentDisposition",null,!0)),s.push(new Gr("contentEncoding",null,!0)),s.push(new Gr("contentLanguage",null,!0)),s.push(new Gr("contentType",null,!0)),s.push(new Gr("metadata","customMetadata",!0)),Vu=s,Vu}function GA(s,e){function n(){const l=s.bucket,h=s.fullPath,g=new Ai(l,h);return e._makeStorageReference(g)}Object.defineProperty(s,"ref",{get:n})}function XA(s,e,n){const l={};l.type="file";const h=n.length;for(let g=0;g<h;g++){const x=n[g];l[x.local]=x.xform(l,e[x.server])}return GA(l,s),l}function xm(s,e,n){const l=mm(e);return l===null?null:XA(s,l,n)}function YA(s,e,n,l){const h=mm(e);if(h===null||!ed(h.downloadTokens))return null;const g=h.downloadTokens;if(g.length===0)return null;const x=encodeURIComponent;return g.split(",").map(A=>{const O=s.bucket,k=s.fullPath,q="/b/"+x(O)+"/o/"+x(k),te=nd(q,n,l),fe=fm({alt:"media",token:A});return te+fe})[0]}function QA(s,e){const n={},l=e.length;for(let h=0;h<l;h++){const g=e[h];g.writable&&(n[g.server]=s[g.local])}return JSON.stringify(n)}class Em{constructor(e,n,l,h){this.url=e,this.method=n,this.handler=l,this.timeout=h,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(s){if(!s)throw Jf()}function qA(s,e){function n(l,h){const g=xm(s,h,e);return _m(g!==null),g}return n}function KA(s,e){function n(l,h){const g=xm(s,h,e);return _m(g!==null),YA(g,h,s.host,s._protocol)}return n}function Am(s){function e(n,l){let h;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?h=uA():h=lA():n.getStatus()===402?h=aA(s.bucket):n.getStatus()===403?h=cA(s.path):h=l,h.status=n.getStatus(),h.serverResponse=l.serverResponse,h}return e}function ZA(s){const e=Am(s);function n(l,h){let g=e(l,h);return l.getStatus()===404&&(g=oA(s.path)),g.serverResponse=h.serverResponse,g}return n}function $A(s,e,n){const l=e.fullServerUrl(),h=nd(l,s.host,s._protocol),g="GET",x=s.maxOperationRetryTime,C=new Em(h,g,KA(s,n),x);return C.errorHandler=ZA(e),C}function JA(s,e){return s&&s.contentType||e&&e.type()||"application/octet-stream"}function eC(s,e,n){const l=Object.assign({},n);return l.fullPath=s.path,l.size=e.size(),l.contentType||(l.contentType=JA(null,e)),l}function tC(s,e,n,l,h){const g=e.bucketOnlyServerUrl(),x={"X-Goog-Upload-Protocol":"multipart"};function C(){let ye="";for(let Re=0;Re<2;Re++)ye=ye+Math.random().toString().slice(2);return ye}const S=C();x["Content-Type"]="multipart/related; boundary="+S;const A=eC(e,l,h),O=QA(A,n),k="--"+S+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+O+`\r
--`+S+`\r
Content-Type: `+A.contentType+`\r
\r
`,q=`\r
--`+S+"--",te=yo.getBlob(k,l,q);if(te===null)throw mA();const fe={name:A.fullPath},ce=nd(g,s.host,s._protocol),oe="POST",Ue=s.maxUploadRetryTime,De=new Em(ce,oe,qA(s,n),Ue);return De.urlParams=fe,De.headers=x,De.body=te.uploadData(),De.errorHandler=Am(e),De}class nC{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Zo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Zo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Zo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,l,h){if(this.sent_)throw yl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),h!==void 0)for(const g in h)h.hasOwnProperty(g)&&this.xhr_.setRequestHeader(g,h[g].toString());return l!==void 0?this.xhr_.send(l):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class rC extends nC{initXhr(){this.xhr_.responseType="text"}}function Cm(){return new rC}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,n){this._service=e,n instanceof Ai?this._location=n:this._location=Ai.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Jo(e,n)}get root(){const e=new Ai(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ym(this._location.path)}get storage(){return this._service}get parent(){const e=zA(this._location.path);if(e===null)return null;const n=new Ai(this._location.bucket,e);return new Jo(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw xA(e)}}function iC(s,e,n){s._throwIfRoot("uploadBytes");const l=tC(s.storage,s._location,wm(),new yo(e,!0),n);return s.storage.makeRequestWithTokens(l,Cm).then(h=>({metadata:h,ref:s}))}function sC(s){s._throwIfRoot("getDownloadURL");const e=$A(s.storage,s._location,wm());return s.storage.makeRequestWithTokens(e,Cm).then(n=>{if(n===null)throw yA();return n})}function oC(s,e){const n=jA(s._location.path,e),l=new Ai(s._location.bucket,n);return new Jo(s.storage,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(s){return/^[A-Za-z]+:\/\//.test(s)}function lC(s,e){return new Jo(s,e)}function Im(s,e){if(s instanceof rd){const n=s;if(n._bucket==null)throw pA();const l=new Jo(n,n._bucket);return e!=null?Im(l,e):l}else return e!==void 0?oC(s,e):s}function uC(s,e){if(e&&aC(e)){if(s instanceof rd)return lC(s,e);throw pf("To use ref(service, url), the first argument must be a Storage instance.")}else return Im(s,e)}function wg(s,e){const n=e==null?void 0:e[cm];return n==null?null:Ai.makeFromBucketSpec(n,s)}function cC(s,e,n,l={}){s.host=`${e}:${n}`,s._protocol="http";const{mockUserToken:h}=l;h&&(s._overrideAuthToken=typeof h=="string"?h:Mg(h,s.app.options.projectId))}class rd{constructor(e,n,l,h,g){this.app=e,this._authProvider=n,this._appCheckProvider=l,this._url=h,this._firebaseVersion=g,this._bucket=null,this._host=um,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=iA,this._maxUploadRetryTime=sA,this._requests=new Set,h!=null?this._bucket=Ai.makeFromBucketSpec(h,this._host):this._bucket=wg(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ai.makeFromBucketSpec(this._url,e):this._bucket=wg(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){yg("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jo(this,e)}_makeRequest(e,n,l,h,g=!0){if(this._deleted)return new EA(hm());{const x=bA(e,this._appId,l,h,n,this._firebaseVersion,g);return this._requests.add(x),x.getPromise().then(()=>this._requests.delete(x),()=>this._requests.delete(x)),x}}async makeRequestWithTokens(e,n){const[l,h]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,l,h).getPromise()}}const xg="@firebase/storage",Eg="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tm="storage";function hC(s,e,n){return s=Us(s),iC(s,e,n)}function fC(s){return s=Us(s),sC(s)}function dC(s,e){return s=Us(s),uC(s,e)}function gC(s=Ug(),e){s=Us(s);const l=Fg(s,Tm).getImmediate({identifier:e}),h=bg("storage");return h&&pC(l,...h),l}function pC(s,e,n,l={}){cC(s,e,n,l)}function mC(s,{instanceIdentifier:e}){const n=s.getProvider("app").getImmediate(),l=s.getProvider("auth-internal"),h=s.getProvider("app-check-internal");return new rd(n,l,h,e,Vg)}function yC(){Sl(new ka(Tm,mC,"PUBLIC").setMultipleInstances(!0)),_o(xg,Eg,""),_o(xg,Eg,"esm2017")}yC();const wC="_container_1f1xn_3",xC="_form_1f1xn_17",EC="_nfcButton_1f1xn_41",_C="_scanButton_1f1xn_41",AC="_selfieButton_1f1xn_41",CC="_submitButton_1f1xn_41",IC="_scannerContainer_1f1xn_67",TC="_scanner_1f1xn_67",vC="_modalOverlay_1f1xn_97",SC="_modalContent_1f1xn_125",RC="_status_1f1xn_149",NC="_statusWarning_1f1xn_167",DC="_statusInfo_1f1xn_181",bC="_statusSuccess_1f1xn_195",OC="_statusError_1f1xn_209",MC="_pulse_1f1xn_1",PC="_reader_1f1xn_295",Yr={container:wC,form:xC,nfcButton:EC,scanButton:_C,selfieButton:AC,submitButton:CC,scannerContainer:IC,scanner:TC,modalOverlay:vC,modalContent:SC,status:RC,statusWarning:NC,statusInfo:DC,statusSuccess:bC,statusError:OC,"animate-pulse":"_animate-pulse_1f1xn_247",pulse:MC,reader:PC},kC={apiKey:"AIzaSyC8tDVbDIrKuylsyF3rbDSSPlzsEHXqZIs",authDomain:"online-attendance-21f95.firebaseapp.com",databaseURL:"https://online-attendance-21f95-default-rtdb.firebaseio.com",projectId:"online-attendance-21f95",storageBucket:"online-attendance-21f95.appspot.com",messagingSenderId:"756223518392",appId:"1:756223518392:web:5e8d28c78f7eefb8be764d"},vm=_f(kC),_g=Zp(vm),LC=gC(vm),BC=({message:s,type:e,isProcessing:n})=>{if(!s)return null;const l=()=>{switch(e){case"warning":return Yr.statusWarning;case"error":return Yr.statusError;case"success":return Yr.statusSuccess;default:return Yr.statusInfo}};return We.jsx("div",{className:Yr.modalOverlay,children:We.jsx("div",{className:Yr.modalContent,children:We.jsx("div",{className:`${Yr.status} ${l()} ${n?Yr["animate-pulse"]:""}`,children:s})})})},FC=()=>{const[s,e]=Xr.useState({studentName:"",email:"",course:"",campus:"",studentId:""}),[n,l]=Xr.useState(null),[h,g]=Xr.useState(!1),[x,C]=Xr.useState(""),[S,A]=Xr.useState(null),[O,k]=Xr.useState("info"),[q,te]=Xr.useState(!1),fe=Xr.useRef(null),ce=Xr.useRef(null),oe=(P,W="info")=>{C(P),k(W)};Xr.useEffect(()=>()=>{S&&S.abort()},[S]);const Ue=()=>{te(!0);const P={fps:10,qrbox:{width:250,height:250},aspectRatio:1},W=new gy("reader",P,!1),Y=(z,ot)=>{e(ae=>({...ae,studentId:z})),oe("Barcode scanned successfully!","success"),W&&(W.clear(),te(!1))},H=z=>{console.warn(`Code scan error = ${z}`)};W.render(Y,H),ce.current=W},De=P=>{const W=P.target.files[0];l(W)},ye=async()=>{if(!n)return null;C("Uploading selfie...");const P=s.email.replace(/[@.]/g,"_"),W=dC(LC,`users/${P}/profile/${n.name}`),Y=await hC(W,n);return await fC(Y.ref)},Re=async()=>{if(!("NDEFReader"in window))throw new Error("NFC not supported on this device");try{g(!0),C("Waiting for NFC tag...");const P=new NDEFReader;return A(P),await P.scan(),new Promise((W,Y)=>{const H=async({serialNumber:z})=>{try{if(C("Checking NFC authorization..."),!await Le(z)){Y(new Error("Unauthorized NFC tag"));return}C("Uploading data...");const ae=await ye(),gt={...s,nfcSerialNumber:z,selfieUrl:ae,createdAt:rA()};C("Saving to database...");const Oe=await eA(F_(_g,"RegisteredStudent"),gt);C("Writing to NFC tag...");try{await P.write({records:[{recordType:"text",data:new TextEncoder().encode(Oe.id)}]}),C("Verifying NFC write..."),await At(Oe.id,P)}catch(Te){console.error("NFC Write Error:",Te),C("Attempting alternative write method...");try{await navigator.nfc.push({type:"NDEF",records:[{type:"text/plain",payload:Oe.id}]})}catch(ze){console.error("Fallback NFC Write Error:",ze),C("NFC write failed, but registration saved")}}P.addEventListener("reading",H,{once:!0}),W(Oe.id)}catch(ot){P.removeEventListener("reading",H),Y(ot)}};P.addEventListener("reading",H,{once:!0})})}catch(P){throw oe(P.message,"error"),P}},At=async(P,W)=>new Promise((Y,H)=>{const z=setTimeout(()=>{H(new Error("Verification timeout"))},5e3);W.addEventListener("reading",({message:ot})=>{clearTimeout(z),ot.records.some(gt=>gt.recordType==="text"&&new TextDecoder().decode(gt.data)===P)?Y():H(new Error("NFC write verification failed"))},{once:!0})}),Le=async P=>{try{const W=Gf(_g,"Toregistered",P);return(await lm(W)).exists()}catch(W){return console.error("NFC Authorization Check Error:",W),!1}},U=()=>{e({studentName:"",email:"",course:"",campus:"",studentId:""}),l(null),C(""),fe.current&&(fe.current.value="")},F=async P=>{if(P.preventDefault(),!("NDEFReader"in window)){oe("NFC is not supported on this device","warning");return}if(window.confirm("Approach NFC tag to complete registration"))try{const W=await Re();oe("Registration completed successfully!","success"),setTimeout(()=>{oe(""),U()},3e3)}catch(W){console.error("Registration Error:",W),oe(`Registration failed: ${W.message}`,"error")}finally{g(!1),S&&(S.abort(),A(null))}};return We.jsxs("div",{className:Yr.container,children:[We.jsx("h1",{children:"Student Registration"}),(!("NDEFReader"in window)||x)&&We.jsx(BC,{message:"NDEFReader"in window?x:"NFC is not supported on this device",type:"NDEFReader"in window?O:"warning",isProcessing:h}),We.jsxs("form",{onSubmit:F,className:Yr.form,children:[We.jsx("input",{type:"text",placeholder:"Student Name",value:s.studentName,onChange:P=>e({...s,studentName:P.target.value}),required:!0,disabled:h}),We.jsx("input",{type:"email",placeholder:"Email",value:s.email,onChange:P=>e({...s,email:P.target.value}),required:!0,disabled:h}),We.jsx("input",{type:"text",placeholder:"Course",value:s.course,onChange:P=>e({...s,course:P.target.value}),required:!0,disabled:h}),We.jsxs("div",{className:Yr.scannerContainer,children:[We.jsx("input",{type:"text",placeholder:"Student ID",value:s.studentId,onChange:P=>e({...s,studentId:P.target.value}),required:!0,disabled:h}),We.jsx("button",{type:"button",onClick:()=>{var P;return q?(P=ce.current)==null?void 0:P.clear():Ue()},className:Yr.scanButton,disabled:h,children:q?"Stop Scanning":"Scan Barcode"})]}),q&&We.jsx("div",{id:"reader",className:Yr.reader}),We.jsxs("select",{value:s.campus,onChange:P=>e({...s,campus:P.target.value}),required:!0,disabled:h,children:[We.jsx("option",{value:"",children:"Select Campus"}),We.jsx("option",{value:"Cainta Campus",children:"Cainta Campus"}),We.jsx("option",{value:"Antipolo Campus",children:"Antipolo Campus"}),We.jsx("option",{value:"San Mateo Campus",children:"San Mateo Campus"}),We.jsx("option",{value:"Binangonan Campus",children:"Binangonan Campus"}),We.jsx("option",{value:"Sumulong Campus",children:"Sumulong Campus"}),We.jsx("option",{value:"Taytay Campus",children:"Taytay Campus"}),We.jsx("option",{value:"Angono Campus",children:"Angono Campus"}),We.jsx("option",{value:"Cogeo Campus",children:"Cogeo Campus"})]}),n?We.jsxs("p",{children:["Selfie Captured: ",n.name]}):We.jsxs(We.Fragment,{children:[We.jsx("input",{type:"file",ref:fe,onChange:De,accept:"image/*",capture:"user",style:{display:"none"},disabled:h}),We.jsx("button",{type:"button",onClick:()=>fe.current.click(),className:Yr.selfieButton,disabled:h,children:"Take Selfie"})]}),We.jsx("button",{type:"submit",className:`${Yr.submitButton} ${h?"animate-pulse":""}`,disabled:!s.studentId||!n||h||!("NDEFReader"in window),children:h?"Processing...":"Complete Registration with NFC"})]})]})},VC="_container_dfdvv_1",UC="_status_dfdvv_33",zC="_reading_dfdvv_51",jC="_pulse_dfdvv_1",HC="_error_dfdvv_59",WC="_studentInfo_dfdvv_77",GC="_infoGrid_dfdvv_107",XC="_infoRow_dfdvv_117",YC="_selfie_dfdvv_149",QC="_controls_dfdvv_171",qC="_button_dfdvv_185",KC="_readButton_dfdvv_213",ZC="_resetButton_dfdvv_231",wr={container:VC,status:UC,reading:zC,pulse:jC,error:HC,studentInfo:WC,infoGrid:GC,infoRow:XC,selfie:YC,controls:QC,button:qC,readButton:KC,resetButton:ZC},$C={apiKey:"AIzaSyC8tDVbDIrKuylsyF3rbDSSPlzsEHXqZIs",authDomain:"online-attendance-21f95.firebaseapp.com",databaseURL:"https://online-attendance-21f95-default-rtdb.firebaseio.com",projectId:"online-attendance-21f95",storageBucket:"online-attendance-21f95.appspot.com",messagingSenderId:"756223518392",appId:"1:756223518392:web:5e8d28c78f7eefb8be764d"},JC=_f($C),eI=Zp(JC),tI=()=>{const[s,e]=Xr.useState(null),[n,l]=Xr.useState(""),[h,g]=Xr.useState(!1),[x,C]=Xr.useState(null),S=async()=>{if(!("NDEFReader"in window)){C("NFC is not supported on this device");return}try{g(!0),l("Waiting for NFC card..."),C(null);const O=new NDEFReader;await O.scan(),O.addEventListener("reading",async({message:k})=>{try{const q=k.records.find(oe=>oe.recordType==="text");if(!q)throw new Error("Invalid NFC card: No student data found");const te=new TextDecoder().decode(q.data);l("Retrieving student data...");const fe=Gf(eI,"RegisteredStudent",te),ce=await lm(fe);if(ce.exists()){const oe=ce.data();e(oe),l("Student data retrieved successfully")}else throw new Error("No student record found for this card")}catch(q){C(q.message),e(null)}finally{g(!1),O.stop()}})}catch(O){C(O.message),g(!1)}},A=()=>{e(null),l(""),C(null),g(!1)};return We.jsxs("div",{className:wr.container,children:[We.jsx("h1",{children:"Student NFC Reader"}),n&&We.jsx("div",{className:`${wr.status} ${h?wr.reading:""}`,children:n}),x&&We.jsx("div",{className:wr.error,children:x}),s&&We.jsxs("div",{className:wr.studentInfo,children:[We.jsx("h2",{children:"Student Information"}),We.jsxs("div",{className:wr.infoGrid,children:[We.jsxs("div",{className:wr.infoRow,children:[We.jsx("span",{children:"Name:"}),We.jsx("span",{children:s.studentName})]}),We.jsxs("div",{className:wr.infoRow,children:[We.jsx("span",{children:"Student ID:"}),We.jsx("span",{children:s.studentId})]}),We.jsxs("div",{className:wr.infoRow,children:[We.jsx("span",{children:"Email:"}),We.jsx("span",{children:s.email})]}),We.jsxs("div",{className:wr.infoRow,children:[We.jsx("span",{children:"Course:"}),We.jsx("span",{children:s.course})]}),We.jsxs("div",{className:wr.infoRow,children:[We.jsx("span",{children:"Campus:"}),We.jsx("span",{children:s.campus})]}),s.selfieUrl&&We.jsx("div",{className:wr.selfie,children:We.jsx("img",{src:s.selfieUrl,alt:"Student"})})]})]}),We.jsxs("div",{className:wr.controls,children:[We.jsx("button",{onClick:S,disabled:h||!("NDEFReader"in window),className:`${wr.button} ${wr.readButton}`,children:h?"Reading...":"Scan NFC Card"}),s&&We.jsx("button",{onClick:A,className:`${wr.button} ${wr.resetButton}`,children:"Clear & Scan New Card"})]})]})};function nI(){return We.jsxs(We.Fragment,{children:[We.jsx(FC,{}),We.jsx(tI,{})]})}R2.createRoot(document.getElementById("root")).render(We.jsx(Xr.StrictMode,{children:We.jsx(nI,{})}));
