(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))s(u);new MutationObserver(u=>{for(const g of u)if(g.type==="childList")for(const A of g.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&s(A)}).observe(document,{childList:!0,subtree:!0});function r(u){const g={};return u.integrity&&(g.integrity=u.integrity),u.referrerPolicy&&(g.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?g.credentials="include":u.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function s(u){if(u.ep)return;u.ep=!0;const g=r(u);fetch(u.href,g)}})();function vm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var Ac={exports:{}},Ls={},Rc={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ld;function wm(){if(Ld)return Le;Ld=1;var i=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),A=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),U=Symbol.for("react.memo"),a=Symbol.for("react.lazy"),h=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=h&&B[h]||B["@@iterator"],typeof B=="function"?B:null)}var d={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,p={};function _(B,q,ue){this.props=B,this.context=q,this.refs=p,this.updater=ue||d}_.prototype.isReactComponent={},_.prototype.setState=function(B,q){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,q,"setState")},_.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function v(){}v.prototype=_.prototype;function S(B,q,ue){this.props=B,this.context=q,this.refs=p,this.updater=ue||d}var I=S.prototype=new v;I.constructor=S,f(I,_.prototype),I.isPureReactComponent=!0;var P=Array.isArray,N=Object.prototype.hasOwnProperty,L={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function T(B,q,ue){var se,ve={},De=null,ie=null;if(q!=null)for(se in q.ref!==void 0&&(ie=q.ref),q.key!==void 0&&(De=""+q.key),q)N.call(q,se)&&!R.hasOwnProperty(se)&&(ve[se]=q[se]);var he=arguments.length-2;if(he===1)ve.children=ue;else if(1<he){for(var me=Array(he),ye=0;ye<he;ye++)me[ye]=arguments[ye+2];ve.children=me}if(B&&B.defaultProps)for(se in he=B.defaultProps,he)ve[se]===void 0&&(ve[se]=he[se]);return{$$typeof:i,type:B,key:De,ref:ie,props:ve,_owner:L.current}}function C(B,q){return{$$typeof:i,type:B.type,key:q,ref:B.ref,props:B.props,_owner:B._owner}}function k(B){return typeof B=="object"&&B!==null&&B.$$typeof===i}function O(B){var q={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(ue){return q[ue]})}var b=/\/+/g;function V(B,q){return typeof B=="object"&&B!==null&&B.key!=null?O(""+B.key):q.toString(36)}function $(B,q,ue,se,ve){var De=typeof B;(De==="undefined"||De==="boolean")&&(B=null);var ie=!1;if(B===null)ie=!0;else switch(De){case"string":case"number":ie=!0;break;case"object":switch(B.$$typeof){case i:case t:ie=!0}}if(ie)return ie=B,ve=ve(ie),B=se===""?"."+V(ie,0):se,P(ve)?(ue="",B!=null&&(ue=B.replace(b,"$&/")+"/"),$(ve,q,ue,"",function(ye){return ye})):ve!=null&&(k(ve)&&(ve=C(ve,ue+(!ve.key||ie&&ie.key===ve.key?"":(""+ve.key).replace(b,"$&/")+"/")+B)),q.push(ve)),1;if(ie=0,se=se===""?".":se+":",P(B))for(var he=0;he<B.length;he++){De=B[he];var me=se+V(De,he);ie+=$(De,q,ue,me,ve)}else if(me=m(B),typeof me=="function")for(B=me.call(B),he=0;!(De=B.next()).done;)De=De.value,me=se+V(De,he++),ie+=$(De,q,ue,me,ve);else if(De==="object")throw q=String(B),Error("Objects are not valid as a React child (found: "+(q==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":q)+"). If you meant to render a collection of children, use an array instead.");return ie}function ee(B,q,ue){if(B==null)return B;var se=[],ve=0;return $(B,se,"","",function(De){return q.call(ue,De,ve++)}),se}function X(B){if(B._status===-1){var q=B._result;q=q(),q.then(function(ue){(B._status===0||B._status===-1)&&(B._status=1,B._result=ue)},function(ue){(B._status===0||B._status===-1)&&(B._status=2,B._result=ue)}),B._status===-1&&(B._status=0,B._result=q)}if(B._status===1)return B._result.default;throw B._result}var oe={current:null},J={transition:null},re={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:J,ReactCurrentOwner:L};function G(){throw Error("act(...) is not supported in production builds of React.")}return Le.Children={map:ee,forEach:function(B,q,ue){ee(B,function(){q.apply(this,arguments)},ue)},count:function(B){var q=0;return ee(B,function(){q++}),q},toArray:function(B){return ee(B,function(q){return q})||[]},only:function(B){if(!k(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Le.Component=_,Le.Fragment=r,Le.Profiler=u,Le.PureComponent=S,Le.StrictMode=s,Le.Suspense=F,Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Le.act=G,Le.cloneElement=function(B,q,ue){if(B==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+B+".");var se=f({},B.props),ve=B.key,De=B.ref,ie=B._owner;if(q!=null){if(q.ref!==void 0&&(De=q.ref,ie=L.current),q.key!==void 0&&(ve=""+q.key),B.type&&B.type.defaultProps)var he=B.type.defaultProps;for(me in q)N.call(q,me)&&!R.hasOwnProperty(me)&&(se[me]=q[me]===void 0&&he!==void 0?he[me]:q[me])}var me=arguments.length-2;if(me===1)se.children=ue;else if(1<me){he=Array(me);for(var ye=0;ye<me;ye++)he[ye]=arguments[ye+2];se.children=he}return{$$typeof:i,type:B.type,key:ve,ref:De,props:se,_owner:ie}},Le.createContext=function(B){return B={$$typeof:A,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},B.Provider={$$typeof:g,_context:B},B.Consumer=B},Le.createElement=T,Le.createFactory=function(B){var q=T.bind(null,B);return q.type=B,q},Le.createRef=function(){return{current:null}},Le.forwardRef=function(B){return{$$typeof:D,render:B}},Le.isValidElement=k,Le.lazy=function(B){return{$$typeof:a,_payload:{_status:-1,_result:B},_init:X}},Le.memo=function(B,q){return{$$typeof:U,type:B,compare:q===void 0?null:q}},Le.startTransition=function(B){var q=J.transition;J.transition={};try{B()}finally{J.transition=q}},Le.unstable_act=G,Le.useCallback=function(B,q){return oe.current.useCallback(B,q)},Le.useContext=function(B){return oe.current.useContext(B)},Le.useDebugValue=function(){},Le.useDeferredValue=function(B){return oe.current.useDeferredValue(B)},Le.useEffect=function(B,q){return oe.current.useEffect(B,q)},Le.useId=function(){return oe.current.useId()},Le.useImperativeHandle=function(B,q,ue){return oe.current.useImperativeHandle(B,q,ue)},Le.useInsertionEffect=function(B,q){return oe.current.useInsertionEffect(B,q)},Le.useLayoutEffect=function(B,q){return oe.current.useLayoutEffect(B,q)},Le.useMemo=function(B,q){return oe.current.useMemo(B,q)},Le.useReducer=function(B,q,ue){return oe.current.useReducer(B,q,ue)},Le.useRef=function(B){return oe.current.useRef(B)},Le.useState=function(B){return oe.current.useState(B)},Le.useSyncExternalStore=function(B,q,ue){return oe.current.useSyncExternalStore(B,q,ue)},Le.useTransition=function(){return oe.current.useTransition()},Le.version="18.3.1",Le}var bd;function eh(){return bd||(bd=1,Rc.exports=wm()),Rc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd;function Em(){if(Fd)return Ls;Fd=1;var i=eh(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,u=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function A(D,F,U){var a,h={},m=null,d=null;U!==void 0&&(m=""+U),F.key!==void 0&&(m=""+F.key),F.ref!==void 0&&(d=F.ref);for(a in F)s.call(F,a)&&!g.hasOwnProperty(a)&&(h[a]=F[a]);if(D&&D.defaultProps)for(a in F=D.defaultProps,F)h[a]===void 0&&(h[a]=F[a]);return{$$typeof:t,type:D,key:m,ref:d,props:h,_owner:u.current}}return Ls.Fragment=r,Ls.jsx=A,Ls.jsxs=A,Ls}var zd;function Tm(){return zd||(zd=1,Ac.exports=Em()),Ac.exports}var Xe=Tm(),Yr=eh(),yl={},Cc={exports:{}},on={},Ic={exports:{}},xc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ud;function Sm(){return Ud||(Ud=1,function(i){function t(J,re){var G=J.length;J.push(re);e:for(;0<G;){var B=G-1>>>1,q=J[B];if(0<u(q,re))J[B]=re,J[G]=q,G=B;else break e}}function r(J){return J.length===0?null:J[0]}function s(J){if(J.length===0)return null;var re=J[0],G=J.pop();if(G!==re){J[0]=G;e:for(var B=0,q=J.length,ue=q>>>1;B<ue;){var se=2*(B+1)-1,ve=J[se],De=se+1,ie=J[De];if(0>u(ve,G))De<q&&0>u(ie,ve)?(J[B]=ie,J[De]=G,B=De):(J[B]=ve,J[se]=G,B=se);else if(De<q&&0>u(ie,G))J[B]=ie,J[De]=G,B=De;else break e}}return re}function u(J,re){var G=J.sortIndex-re.sortIndex;return G!==0?G:J.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var g=performance;i.unstable_now=function(){return g.now()}}else{var A=Date,D=A.now();i.unstable_now=function(){return A.now()-D}}var F=[],U=[],a=1,h=null,m=3,d=!1,f=!1,p=!1,_=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(J){for(var re=r(U);re!==null;){if(re.callback===null)s(U);else if(re.startTime<=J)s(U),re.sortIndex=re.expirationTime,t(F,re);else break;re=r(U)}}function P(J){if(p=!1,I(J),!f)if(r(F)!==null)f=!0,X(N);else{var re=r(U);re!==null&&oe(P,re.startTime-J)}}function N(J,re){f=!1,p&&(p=!1,v(T),T=-1),d=!0;var G=m;try{for(I(re),h=r(F);h!==null&&(!(h.expirationTime>re)||J&&!O());){var B=h.callback;if(typeof B=="function"){h.callback=null,m=h.priorityLevel;var q=B(h.expirationTime<=re);re=i.unstable_now(),typeof q=="function"?h.callback=q:h===r(F)&&s(F),I(re)}else s(F);h=r(F)}if(h!==null)var ue=!0;else{var se=r(U);se!==null&&oe(P,se.startTime-re),ue=!1}return ue}finally{h=null,m=G,d=!1}}var L=!1,R=null,T=-1,C=5,k=-1;function O(){return!(i.unstable_now()-k<C)}function b(){if(R!==null){var J=i.unstable_now();k=J;var re=!0;try{re=R(!0,J)}finally{re?V():(L=!1,R=null)}}else L=!1}var V;if(typeof S=="function")V=function(){S(b)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,ee=$.port2;$.port1.onmessage=b,V=function(){ee.postMessage(null)}}else V=function(){_(b,0)};function X(J){R=J,L||(L=!0,V())}function oe(J,re){T=_(function(){J(i.unstable_now())},re)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(J){J.callback=null},i.unstable_continueExecution=function(){f||d||(f=!0,X(N))},i.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<J?Math.floor(1e3/J):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return r(F)},i.unstable_next=function(J){switch(m){case 1:case 2:case 3:var re=3;break;default:re=m}var G=m;m=re;try{return J()}finally{m=G}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(J,re){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var G=m;m=J;try{return re()}finally{m=G}},i.unstable_scheduleCallback=function(J,re,G){var B=i.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?B+G:B):G=B,J){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=G+q,J={id:a++,callback:re,priorityLevel:J,startTime:G,expirationTime:q,sortIndex:-1},G>B?(J.sortIndex=G,t(U,J),r(F)===null&&J===r(U)&&(p?(v(T),T=-1):p=!0,oe(P,G-B))):(J.sortIndex=q,t(F,J),f||d||(f=!0,X(N))),J},i.unstable_shouldYield=O,i.unstable_wrapCallback=function(J){var re=m;return function(){var G=m;m=re;try{return J.apply(this,arguments)}finally{m=G}}}}(xc)),xc}var Bd;function Am(){return Bd||(Bd=1,Ic.exports=Sm()),Ic.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jd;function Rm(){if(jd)return on;jd=1;var i=eh(),t=Am();function r(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,o=1;o<arguments.length;o++)n+="&args[]="+encodeURIComponent(arguments[o]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,u={};function g(e,n){A(e,n),A(e+"Capture",n)}function A(e,n){for(u[e]=n,e=0;e<n.length;e++)s.add(n[e])}var D=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),F=Object.prototype.hasOwnProperty,U=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,a={},h={};function m(e){return F.call(h,e)?!0:F.call(a,e)?!1:U.test(e)?h[e]=!0:(a[e]=!0,!1)}function d(e,n,o,c){if(o!==null&&o.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return c?!1:o!==null?!o.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function f(e,n,o,c){if(n===null||typeof n>"u"||d(e,n,o,c))return!0;if(c)return!1;if(o!==null)switch(o.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function p(e,n,o,c,y,E,M){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=c,this.attributeNamespace=y,this.mustUseProperty=o,this.propertyName=e,this.type=n,this.sanitizeURL=E,this.removeEmptyString=M}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){_[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];_[n]=new p(n,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){_[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){_[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){_[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){_[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){_[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){_[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){_[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function S(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(v,S);_[n]=new p(n,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(v,S);_[n]=new p(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(v,S);_[n]=new p(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){_[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),_.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){_[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});function I(e,n,o,c){var y=_.hasOwnProperty(n)?_[n]:null;(y!==null?y.type!==0:c||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(f(n,o,y,c)&&(o=null),c||y===null?m(n)&&(o===null?e.removeAttribute(n):e.setAttribute(n,""+o)):y.mustUseProperty?e[y.propertyName]=o===null?y.type===3?!1:"":o:(n=y.attributeName,c=y.attributeNamespace,o===null?e.removeAttribute(n):(y=y.type,o=y===3||y===4&&o===!0?"":""+o,c?e.setAttributeNS(c,n,o):e.setAttribute(n,o))))}var P=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,N=Symbol.for("react.element"),L=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),O=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),ee=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),J=Symbol.iterator;function re(e){return e===null||typeof e!="object"?null:(e=J&&e[J]||e["@@iterator"],typeof e=="function"?e:null)}var G=Object.assign,B;function q(e){if(B===void 0)try{throw Error()}catch(o){var n=o.stack.trim().match(/\n( *(at )?)/);B=n&&n[1]||""}return`
`+B+e}var ue=!1;function se(e,n){if(!e||ue)return"";ue=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(Z){var c=Z}Reflect.construct(e,[],n)}else{try{n.call()}catch(Z){c=Z}e.call(n.prototype)}else{try{throw Error()}catch(Z){c=Z}e()}}catch(Z){if(Z&&c&&typeof Z.stack=="string"){for(var y=Z.stack.split(`
`),E=c.stack.split(`
`),M=y.length-1,j=E.length-1;1<=M&&0<=j&&y[M]!==E[j];)j--;for(;1<=M&&0<=j;M--,j--)if(y[M]!==E[j]){if(M!==1||j!==1)do if(M--,j--,0>j||y[M]!==E[j]){var H=`
`+y[M].replace(" at new "," at ");return e.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",e.displayName)),H}while(1<=M&&0<=j);break}}}finally{ue=!1,Error.prepareStackTrace=o}return(e=e?e.displayName||e.name:"")?q(e):""}function ve(e){switch(e.tag){case 5:return q(e.type);case 16:return q("Lazy");case 13:return q("Suspense");case 19:return q("SuspenseList");case 0:case 2:case 15:return e=se(e.type,!1),e;case 11:return e=se(e.type.render,!1),e;case 1:return e=se(e.type,!0),e;default:return""}}function De(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case R:return"Fragment";case L:return"Portal";case C:return"Profiler";case T:return"StrictMode";case V:return"Suspense";case $:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case O:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case b:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ee:return n=e.displayName||null,n!==null?n:De(e.type)||"Memo";case X:n=e._payload,e=e._init;try{return De(e(n))}catch{}}return null}function ie(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return De(n);case 8:return n===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function he(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function me(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function ye(e){var n=me(e)?"checked":"value",o=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),c=""+e[n];if(!e.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var y=o.get,E=o.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return y.call(this)},set:function(M){c=""+M,E.call(this,M)}}),Object.defineProperty(e,n,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(M){c=""+M},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ee(e){e._valueTracker||(e._valueTracker=ye(e))}function xe(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var o=n.getValue(),c="";return e&&(c=me(e)?e.checked?"true":"false":e.value),e=c,e!==o?(n.setValue(e),!0):!1}function te(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function de(e,n){var o=n.checked;return G({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:o??e._wrapperState.initialChecked})}function Ie(e,n){var o=n.defaultValue==null?"":n.defaultValue,c=n.checked!=null?n.checked:n.defaultChecked;o=he(n.value!=null?n.value:o),e._wrapperState={initialChecked:c,initialValue:o,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function Ve(e,n){n=n.checked,n!=null&&I(e,"checked",n,!1)}function be(e,n){Ve(e,n);var o=he(n.value),c=n.type;if(o!=null)c==="number"?(o===0&&e.value===""||e.value!=o)&&(e.value=""+o):e.value!==""+o&&(e.value=""+o);else if(c==="submit"||c==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?Xt(e,n.type,o):n.hasOwnProperty("defaultValue")&&Xt(e,n.type,he(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function et(e,n,o){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var c=n.type;if(!(c!=="submit"&&c!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,o||n===e.value||(e.value=n),e.defaultValue=n}o=e.name,o!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,o!==""&&(e.name=o)}function Xt(e,n,o){(n!=="number"||te(e.ownerDocument)!==e)&&(o==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+o&&(e.defaultValue=""+o))}var ht=Array.isArray;function bt(e,n,o,c){if(e=e.options,n){n={};for(var y=0;y<o.length;y++)n["$"+o[y]]=!0;for(o=0;o<e.length;o++)y=n.hasOwnProperty("$"+e[o].value),e[o].selected!==y&&(e[o].selected=y),y&&c&&(e[o].defaultSelected=!0)}else{for(o=""+he(o),n=null,y=0;y<e.length;y++){if(e[y].value===o){e[y].selected=!0,c&&(e[y].defaultSelected=!0);return}n!==null||e[y].disabled||(n=e[y])}n!==null&&(n.selected=!0)}}function mn(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(r(91));return G({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function yn(e,n){var o=n.value;if(o==null){if(o=n.children,n=n.defaultValue,o!=null){if(n!=null)throw Error(r(92));if(ht(o)){if(1<o.length)throw Error(r(93));o=o[0]}n=o}n==null&&(n=""),o=n}e._wrapperState={initialValue:he(o)}}function sr(e,n){var o=he(n.value),c=he(n.defaultValue);o!=null&&(o=""+o,o!==e.value&&(e.value=o),n.defaultValue==null&&e.defaultValue!==o&&(e.defaultValue=o)),c!=null&&(e.defaultValue=""+c)}function Cr(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function yt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _t(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?yt(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ar,qo=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,o,c,y){MSApp.execUnsafeLocalFunction(function(){return e(n,o,c,y)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(ar=ar||document.createElement("div"),ar.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=ar.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function Ir(e,n){if(n){var o=e.firstChild;if(o&&o===e.lastChild&&o.nodeType===3){o.nodeValue=n;return}}e.textContent=n}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ai=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(e){ai.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),si[n]=si[e]})});function Go(e,n,o){return n==null||typeof n=="boolean"||n===""?"":o||typeof n!="number"||n===0||si.hasOwnProperty(e)&&si[e]?(""+n).trim():n+"px"}function Qo(e,n){e=e.style;for(var o in n)if(n.hasOwnProperty(o)){var c=o.indexOf("--")===0,y=Go(o,n[o],c);o==="float"&&(o="cssFloat"),c?e.setProperty(o,y):e[o]=y}}var Ko=G({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xo(e,n){if(n){if(Ko[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(r(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(r(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(r(61))}if(n.style!=null&&typeof n.style!="object")throw Error(r(62))}}function Yo(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var li=null;function qi(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Gi=null,_n=null,qn=null;function Qi(e){if(e=Es(e)){if(typeof Gi!="function")throw Error(r(280));var n=e.stateNode;n&&(n=Na(n),Gi(e.stateNode,e.type,n))}}function Gn(e){_n?qn?qn.push(e):qn=[e]:_n=e}function Jo(){if(_n){var e=_n,n=qn;if(qn=_n=null,Qi(e),n)for(e=0;e<n.length;e++)Qi(n[e])}}function ui(e,n){return e(n)}function Zo(){}var lr=!1;function es(e,n,o){if(lr)return e(n,o);lr=!0;try{return ui(e,n,o)}finally{lr=!1,(_n!==null||qn!==null)&&(Zo(),Jo())}}function ft(e,n){var o=e.stateNode;if(o===null)return null;var c=Na(o);if(c===null)return null;o=c[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break e;default:e=!1}if(e)return null;if(o&&typeof o!="function")throw Error(r(231,n,typeof o));return o}var Ki=!1;if(D)try{var xn={};Object.defineProperty(xn,"passive",{get:function(){Ki=!0}}),window.addEventListener("test",xn,xn),window.removeEventListener("test",xn,xn)}catch{Ki=!1}function ci(e,n,o,c,y,E,M,j,H){var Z=Array.prototype.slice.call(arguments,3);try{n.apply(o,Z)}catch(ce){this.onError(ce)}}var hi=!1,Xi=null,Pn=!1,ts=null,Jl={onError:function(e){hi=!0,Xi=e}};function Yi(e,n,o,c,y,E,M,j,H){hi=!1,Xi=null,ci.apply(Jl,arguments)}function ra(e,n,o,c,y,E,M,j,H){if(Yi.apply(this,arguments),hi){if(hi){var Z=Xi;hi=!1,Xi=null}else throw Error(r(198));Pn||(Pn=!0,ts=Z)}}function kn(e){var n=e,o=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(o=n.return),e=n.return;while(e)}return n.tag===3?o:null}function fi(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function Dn(e){if(kn(e)!==e)throw Error(r(188))}function ia(e){var n=e.alternate;if(!n){if(n=kn(e),n===null)throw Error(r(188));return n!==e?null:e}for(var o=e,c=n;;){var y=o.return;if(y===null)break;var E=y.alternate;if(E===null){if(c=y.return,c!==null){o=c;continue}break}if(y.child===E.child){for(E=y.child;E;){if(E===o)return Dn(y),e;if(E===c)return Dn(y),n;E=E.sibling}throw Error(r(188))}if(o.return!==c.return)o=y,c=E;else{for(var M=!1,j=y.child;j;){if(j===o){M=!0,o=y,c=E;break}if(j===c){M=!0,c=y,o=E;break}j=j.sibling}if(!M){for(j=E.child;j;){if(j===o){M=!0,o=E,c=y;break}if(j===c){M=!0,c=E,o=y;break}j=j.sibling}if(!M)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?e:n}function ns(e){return e=ia(e),e!==null?Ji(e):null}function Ji(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=Ji(e);if(n!==null)return n;e=e.sibling}return null}var Zi=t.unstable_scheduleCallback,rs=t.unstable_cancelCallback,oa=t.unstable_shouldYield,Zl=t.unstable_requestPaint,Qe=t.unstable_now,sa=t.unstable_getCurrentPriorityLevel,di=t.unstable_ImmediatePriority,xr=t.unstable_UserBlockingPriority,vn=t.unstable_NormalPriority,is=t.unstable_LowPriority,aa=t.unstable_IdlePriority,pi=null,ln=null;function la(e){if(ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(pi,e,void 0,(e.current.flags&128)===128)}catch{}}var Wt=Math.clz32?Math.clz32:ca,os=Math.log,ua=Math.LN2;function ca(e){return e>>>=0,e===0?32:31-(os(e)/ua|0)|0}var eo=64,to=4194304;function Pr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function gi(e,n){var o=e.pendingLanes;if(o===0)return 0;var c=0,y=e.suspendedLanes,E=e.pingedLanes,M=o&268435455;if(M!==0){var j=M&~y;j!==0?c=Pr(j):(E&=M,E!==0&&(c=Pr(E)))}else M=o&~y,M!==0?c=Pr(M):E!==0&&(c=Pr(E));if(c===0)return 0;if(n!==0&&n!==c&&!(n&y)&&(y=c&-c,E=n&-n,y>=E||y===16&&(E&4194240)!==0))return n;if(c&4&&(c|=o&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=c;0<n;)o=31-Wt(n),y=1<<o,c|=e[o],n&=~y;return c}function eu(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ur(e,n){for(var o=e.suspendedLanes,c=e.pingedLanes,y=e.expirationTimes,E=e.pendingLanes;0<E;){var M=31-Wt(E),j=1<<M,H=y[M];H===-1?(!(j&o)||j&c)&&(y[M]=eu(j,n)):H<=n&&(e.expiredLanes|=j),E&=~j}}function un(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function mi(){var e=eo;return eo<<=1,!(eo&4194240)&&(eo=64),e}function kr(e){for(var n=[],o=0;31>o;o++)n.push(e);return n}function Dr(e,n,o){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-Wt(n),e[n]=o}function Ge(e,n){var o=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var c=e.eventTimes;for(e=e.expirationTimes;0<o;){var y=31-Wt(o),E=1<<y;n[y]=0,c[y]=-1,e[y]=-1,o&=~E}}function Nr(e,n){var o=e.entangledLanes|=n;for(e=e.entanglements;o;){var c=31-Wt(o),y=1<<c;y&n|e[c]&n&&(e[c]|=n),o&=~y}}var ze=0;function Or(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ha,no,fa,da,pa,ss=!1,Qn=[],Pt=null,Nn=null,On=null,Mr=new Map,wn=new Map,Kn=[],tu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ga(e,n){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":On=null;break;case"pointerover":case"pointerout":Mr.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":wn.delete(n.pointerId)}}function Yt(e,n,o,c,y,E){return e===null||e.nativeEvent!==E?(e={blockedOn:n,domEventName:o,eventSystemFlags:c,nativeEvent:E,targetContainers:[y]},n!==null&&(n=Es(n),n!==null&&no(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),e)}function nu(e,n,o,c,y){switch(n){case"focusin":return Pt=Yt(Pt,e,n,o,c,y),!0;case"dragenter":return Nn=Yt(Nn,e,n,o,c,y),!0;case"mouseover":return On=Yt(On,e,n,o,c,y),!0;case"pointerover":var E=y.pointerId;return Mr.set(E,Yt(Mr.get(E)||null,e,n,o,c,y)),!0;case"gotpointercapture":return E=y.pointerId,wn.set(E,Yt(wn.get(E)||null,e,n,o,c,y)),!0}return!1}function ma(e){var n=Ei(e.target);if(n!==null){var o=kn(n);if(o!==null){if(n=o.tag,n===13){if(n=fi(o),n!==null){e.blockedOn=n,pa(e.priority,function(){fa(o)});return}}else if(n===3&&o.stateNode.current.memoizedState.isDehydrated){e.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cr(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var o=ro(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(o===null){o=e.nativeEvent;var c=new o.constructor(o.type,o);li=c,o.target.dispatchEvent(c),li=null}else return n=Es(o),n!==null&&no(n),e.blockedOn=o,!1;n.shift()}return!0}function yi(e,n,o){cr(e)&&o.delete(n)}function ya(){ss=!1,Pt!==null&&cr(Pt)&&(Pt=null),Nn!==null&&cr(Nn)&&(Nn=null),On!==null&&cr(On)&&(On=null),Mr.forEach(yi),wn.forEach(yi)}function Mn(e,n){e.blockedOn===n&&(e.blockedOn=null,ss||(ss=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ya)))}function Vn(e){function n(y){return Mn(y,e)}if(0<Qn.length){Mn(Qn[0],e);for(var o=1;o<Qn.length;o++){var c=Qn[o];c.blockedOn===e&&(c.blockedOn=null)}}for(Pt!==null&&Mn(Pt,e),Nn!==null&&Mn(Nn,e),On!==null&&Mn(On,e),Mr.forEach(n),wn.forEach(n),o=0;o<Kn.length;o++)c=Kn[o],c.blockedOn===e&&(c.blockedOn=null);for(;0<Kn.length&&(o=Kn[0],o.blockedOn===null);)ma(o),o.blockedOn===null&&Kn.shift()}var hr=P.ReactCurrentBatchConfig,Vr=!0;function tt(e,n,o,c){var y=ze,E=hr.transition;hr.transition=null;try{ze=1,as(e,n,o,c)}finally{ze=y,hr.transition=E}}function ru(e,n,o,c){var y=ze,E=hr.transition;hr.transition=null;try{ze=4,as(e,n,o,c)}finally{ze=y,hr.transition=E}}function as(e,n,o,c){if(Vr){var y=ro(e,n,o,c);if(y===null)pu(e,n,c,_i,o),ga(e,c);else if(nu(y,e,n,o,c))c.stopPropagation();else if(ga(e,c),n&4&&-1<tu.indexOf(e)){for(;y!==null;){var E=Es(y);if(E!==null&&ha(E),E=ro(e,n,o,c),E===null&&pu(e,n,c,_i,o),E===y)break;y=E}y!==null&&c.stopPropagation()}else pu(e,n,c,null,o)}}var _i=null;function ro(e,n,o,c){if(_i=null,e=qi(c),e=Ei(e),e!==null)if(n=kn(e),n===null)e=null;else if(o=n.tag,o===13){if(e=fi(n),e!==null)return e;e=null}else if(o===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return _i=e,null}function ls(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sa()){case di:return 1;case xr:return 4;case vn:case is:return 16;case aa:return 536870912;default:return 16}default:return 16}}var cn=null,io=null,Jt=null;function us(){if(Jt)return Jt;var e,n=io,o=n.length,c,y="value"in cn?cn.value:cn.textContent,E=y.length;for(e=0;e<o&&n[e]===y[e];e++);var M=o-e;for(c=1;c<=M&&n[o-c]===y[E-c];c++);return Jt=y.slice(e,1<c?1-c:void 0)}function oo(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Xn(){return!0}function cs(){return!1}function kt(e){function n(o,c,y,E,M){this._reactName=o,this._targetInst=y,this.type=c,this.nativeEvent=E,this.target=M,this.currentTarget=null;for(var j in e)e.hasOwnProperty(j)&&(o=e[j],this[j]=o?o(E):E[j]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Xn:cs,this.isPropagationStopped=cs,this}return G(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Xn)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Xn)},persist:function(){},isPersistent:Xn}),n}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},so=kt(Ln),Yn=G({},Ln,{view:0,detail:0}),iu=kt(Yn),ao,fr,Lr,vi=G({},Yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jn,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Lr&&(Lr&&e.type==="mousemove"?(ao=e.screenX-Lr.screenX,fr=e.screenY-Lr.screenY):fr=ao=0,Lr=e),ao)},movementY:function(e){return"movementY"in e?e.movementY:fr}}),lo=kt(vi),hs=G({},vi,{dataTransfer:0}),_a=kt(hs),uo=G({},Yn,{relatedTarget:0}),co=kt(uo),va=G({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),dr=kt(va),wa=G({},Ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ea=kt(wa),Ta=G({},Ln,{data:0}),fs=kt(Ta),ho={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Aa(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=Sa[e])?!!n[e]:!1}function Jn(){return Aa}var l=G({},Yn,{key:function(e){if(e.key){var n=ho[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jn,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),w=kt(l),x=G({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z=kt(x),Q=G({},Yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jn}),ne=kt(Q),_e=G({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),We=kt(_e),vt=G({},vi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ue=kt(vt),Tt=[9,13,27,32],pt=D&&"CompositionEvent"in window,En=null;D&&"documentMode"in document&&(En=document.documentMode);var hn=D&&"TextEvent"in window&&!En,wi=D&&(!pt||En&&8<En&&11>=En),fo=" ",Ph=!1;function kh(e,n){switch(e){case"keyup":return Tt.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Dh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var po=!1;function m0(e,n){switch(e){case"compositionend":return Dh(n);case"keypress":return n.which!==32?null:(Ph=!0,fo);case"textInput":return e=n.data,e===fo&&Ph?null:e;default:return null}}function y0(e,n){if(po)return e==="compositionend"||!pt&&kh(e,n)?(e=us(),Jt=io=cn=null,po=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return wi&&n.locale!=="ko"?null:n.data;default:return null}}var _0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!_0[e.type]:n==="textarea"}function Oh(e,n,o,c){Gn(c),n=Pa(n,"onChange"),0<n.length&&(o=new so("onChange","change",null,o,c),e.push({event:o,listeners:n}))}var ds=null,ps=null;function v0(e){Yh(e,0)}function Ra(e){var n=vo(e);if(xe(n))return e}function w0(e,n){if(e==="change")return n}var Mh=!1;if(D){var ou;if(D){var su="oninput"in document;if(!su){var Vh=document.createElement("div");Vh.setAttribute("oninput","return;"),su=typeof Vh.oninput=="function"}ou=su}else ou=!1;Mh=ou&&(!document.documentMode||9<document.documentMode)}function Lh(){ds&&(ds.detachEvent("onpropertychange",bh),ps=ds=null)}function bh(e){if(e.propertyName==="value"&&Ra(ps)){var n=[];Oh(n,ps,e,qi(e)),es(v0,n)}}function E0(e,n,o){e==="focusin"?(Lh(),ds=n,ps=o,ds.attachEvent("onpropertychange",bh)):e==="focusout"&&Lh()}function T0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ra(ps)}function S0(e,n){if(e==="click")return Ra(n)}function A0(e,n){if(e==="input"||e==="change")return Ra(n)}function R0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var bn=typeof Object.is=="function"?Object.is:R0;function gs(e,n){if(bn(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var o=Object.keys(e),c=Object.keys(n);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var y=o[c];if(!F.call(n,y)||!bn(e[y],n[y]))return!1}return!0}function Fh(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zh(e,n){var o=Fh(e);e=0;for(var c;o;){if(o.nodeType===3){if(c=e+o.textContent.length,e<=n&&c>=n)return{node:o,offset:n-e};e=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Fh(o)}}function Uh(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?Uh(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function Bh(){for(var e=window,n=te();n instanceof e.HTMLIFrameElement;){try{var o=typeof n.contentWindow.location.href=="string"}catch{o=!1}if(o)e=n.contentWindow;else break;n=te(e.document)}return n}function au(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function C0(e){var n=Bh(),o=e.focusedElem,c=e.selectionRange;if(n!==o&&o&&o.ownerDocument&&Uh(o.ownerDocument.documentElement,o)){if(c!==null&&au(o)){if(n=c.start,e=c.end,e===void 0&&(e=n),"selectionStart"in o)o.selectionStart=n,o.selectionEnd=Math.min(e,o.value.length);else if(e=(n=o.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var y=o.textContent.length,E=Math.min(c.start,y);c=c.end===void 0?E:Math.min(c.end,y),!e.extend&&E>c&&(y=c,c=E,E=y),y=zh(o,E);var M=zh(o,c);y&&M&&(e.rangeCount!==1||e.anchorNode!==y.node||e.anchorOffset!==y.offset||e.focusNode!==M.node||e.focusOffset!==M.offset)&&(n=n.createRange(),n.setStart(y.node,y.offset),e.removeAllRanges(),E>c?(e.addRange(n),e.extend(M.node,M.offset)):(n.setEnd(M.node,M.offset),e.addRange(n)))}}for(n=[],e=o;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof o.focus=="function"&&o.focus(),o=0;o<n.length;o++)e=n[o],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var I0=D&&"documentMode"in document&&11>=document.documentMode,go=null,lu=null,ms=null,uu=!1;function jh(e,n,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;uu||go==null||go!==te(c)||(c=go,"selectionStart"in c&&au(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),ms&&gs(ms,c)||(ms=c,c=Pa(lu,"onSelect"),0<c.length&&(n=new so("onSelect","select",null,n,o),e.push({event:n,listeners:c}),n.target=go)))}function Ca(e,n){var o={};return o[e.toLowerCase()]=n.toLowerCase(),o["Webkit"+e]="webkit"+n,o["Moz"+e]="moz"+n,o}var mo={animationend:Ca("Animation","AnimationEnd"),animationiteration:Ca("Animation","AnimationIteration"),animationstart:Ca("Animation","AnimationStart"),transitionend:Ca("Transition","TransitionEnd")},cu={},$h={};D&&($h=document.createElement("div").style,"AnimationEvent"in window||(delete mo.animationend.animation,delete mo.animationiteration.animation,delete mo.animationstart.animation),"TransitionEvent"in window||delete mo.transitionend.transition);function Ia(e){if(cu[e])return cu[e];if(!mo[e])return e;var n=mo[e],o;for(o in n)if(n.hasOwnProperty(o)&&o in $h)return cu[e]=n[o];return e}var Hh=Ia("animationend"),Wh=Ia("animationiteration"),qh=Ia("animationstart"),Gh=Ia("transitionend"),Qh=new Map,Kh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function br(e,n){Qh.set(e,n),g(n,[e])}for(var hu=0;hu<Kh.length;hu++){var fu=Kh[hu],x0=fu.toLowerCase(),P0=fu[0].toUpperCase()+fu.slice(1);br(x0,"on"+P0)}br(Hh,"onAnimationEnd"),br(Wh,"onAnimationIteration"),br(qh,"onAnimationStart"),br("dblclick","onDoubleClick"),br("focusin","onFocus"),br("focusout","onBlur"),br(Gh,"onTransitionEnd"),A("onMouseEnter",["mouseout","mouseover"]),A("onMouseLeave",["mouseout","mouseover"]),A("onPointerEnter",["pointerout","pointerover"]),A("onPointerLeave",["pointerout","pointerover"]),g("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),g("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),g("onBeforeInput",["compositionend","keypress","textInput","paste"]),g("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),g("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k0=new Set("cancel close invalid load scroll toggle".split(" ").concat(ys));function Xh(e,n,o){var c=e.type||"unknown-event";e.currentTarget=o,ra(c,n,void 0,e),e.currentTarget=null}function Yh(e,n){n=(n&4)!==0;for(var o=0;o<e.length;o++){var c=e[o],y=c.event;c=c.listeners;e:{var E=void 0;if(n)for(var M=c.length-1;0<=M;M--){var j=c[M],H=j.instance,Z=j.currentTarget;if(j=j.listener,H!==E&&y.isPropagationStopped())break e;Xh(y,j,Z),E=H}else for(M=0;M<c.length;M++){if(j=c[M],H=j.instance,Z=j.currentTarget,j=j.listener,H!==E&&y.isPropagationStopped())break e;Xh(y,j,Z),E=H}}}if(Pn)throw e=ts,Pn=!1,ts=null,e}function Je(e,n){var o=n[wu];o===void 0&&(o=n[wu]=new Set);var c=e+"__bubble";o.has(c)||(Jh(n,e,2,!1),o.add(c))}function du(e,n,o){var c=0;n&&(c|=4),Jh(o,e,c,n)}var xa="_reactListening"+Math.random().toString(36).slice(2);function _s(e){if(!e[xa]){e[xa]=!0,s.forEach(function(o){o!=="selectionchange"&&(k0.has(o)||du(o,!1,e),du(o,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[xa]||(n[xa]=!0,du("selectionchange",!1,n))}}function Jh(e,n,o,c){switch(ls(n)){case 1:var y=tt;break;case 4:y=ru;break;default:y=as}o=y.bind(null,n,o,e),y=void 0,!Ki||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),c?y!==void 0?e.addEventListener(n,o,{capture:!0,passive:y}):e.addEventListener(n,o,!0):y!==void 0?e.addEventListener(n,o,{passive:y}):e.addEventListener(n,o,!1)}function pu(e,n,o,c,y){var E=c;if(!(n&1)&&!(n&2)&&c!==null)e:for(;;){if(c===null)return;var M=c.tag;if(M===3||M===4){var j=c.stateNode.containerInfo;if(j===y||j.nodeType===8&&j.parentNode===y)break;if(M===4)for(M=c.return;M!==null;){var H=M.tag;if((H===3||H===4)&&(H=M.stateNode.containerInfo,H===y||H.nodeType===8&&H.parentNode===y))return;M=M.return}for(;j!==null;){if(M=Ei(j),M===null)return;if(H=M.tag,H===5||H===6){c=E=M;continue e}j=j.parentNode}}c=c.return}es(function(){var Z=E,ce=qi(o),fe=[];e:{var le=Qh.get(e);if(le!==void 0){var we=so,Se=e;switch(e){case"keypress":if(oo(o)===0)break e;case"keydown":case"keyup":we=w;break;case"focusin":Se="focus",we=co;break;case"focusout":Se="blur",we=co;break;case"beforeblur":case"afterblur":we=co;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=lo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=_a;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=ne;break;case Hh:case Wh:case qh:we=dr;break;case Gh:we=We;break;case"scroll":we=iu;break;case"wheel":we=Ue;break;case"copy":case"cut":case"paste":we=Ea;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=z}var Ae=(n&4)!==0,dt=!Ae&&e==="scroll",K=Ae?le!==null?le+"Capture":null:le;Ae=[];for(var W=Z,Y;W!==null;){Y=W;var ge=Y.stateNode;if(Y.tag===5&&ge!==null&&(Y=ge,K!==null&&(ge=ft(W,K),ge!=null&&Ae.push(vs(W,ge,Y)))),dt)break;W=W.return}0<Ae.length&&(le=new we(le,Se,null,o,ce),fe.push({event:le,listeners:Ae}))}}if(!(n&7)){e:{if(le=e==="mouseover"||e==="pointerover",we=e==="mouseout"||e==="pointerout",le&&o!==li&&(Se=o.relatedTarget||o.fromElement)&&(Ei(Se)||Se[pr]))break e;if((we||le)&&(le=ce.window===ce?ce:(le=ce.ownerDocument)?le.defaultView||le.parentWindow:window,we?(Se=o.relatedTarget||o.toElement,we=Z,Se=Se?Ei(Se):null,Se!==null&&(dt=kn(Se),Se!==dt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(we=null,Se=Z),we!==Se)){if(Ae=lo,ge="onMouseLeave",K="onMouseEnter",W="mouse",(e==="pointerout"||e==="pointerover")&&(Ae=z,ge="onPointerLeave",K="onPointerEnter",W="pointer"),dt=we==null?le:vo(we),Y=Se==null?le:vo(Se),le=new Ae(ge,W+"leave",we,o,ce),le.target=dt,le.relatedTarget=Y,ge=null,Ei(ce)===Z&&(Ae=new Ae(K,W+"enter",Se,o,ce),Ae.target=Y,Ae.relatedTarget=dt,ge=Ae),dt=ge,we&&Se)t:{for(Ae=we,K=Se,W=0,Y=Ae;Y;Y=yo(Y))W++;for(Y=0,ge=K;ge;ge=yo(ge))Y++;for(;0<W-Y;)Ae=yo(Ae),W--;for(;0<Y-W;)K=yo(K),Y--;for(;W--;){if(Ae===K||K!==null&&Ae===K.alternate)break t;Ae=yo(Ae),K=yo(K)}Ae=null}else Ae=null;we!==null&&Zh(fe,le,we,Ae,!1),Se!==null&&dt!==null&&Zh(fe,dt,Se,Ae,!0)}}e:{if(le=Z?vo(Z):window,we=le.nodeName&&le.nodeName.toLowerCase(),we==="select"||we==="input"&&le.type==="file")var Ce=w0;else if(Nh(le))if(Mh)Ce=A0;else{Ce=T0;var Pe=E0}else(we=le.nodeName)&&we.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(Ce=S0);if(Ce&&(Ce=Ce(e,Z))){Oh(fe,Ce,o,ce);break e}Pe&&Pe(e,le,Z),e==="focusout"&&(Pe=le._wrapperState)&&Pe.controlled&&le.type==="number"&&Xt(le,"number",le.value)}switch(Pe=Z?vo(Z):window,e){case"focusin":(Nh(Pe)||Pe.contentEditable==="true")&&(go=Pe,lu=Z,ms=null);break;case"focusout":ms=lu=go=null;break;case"mousedown":uu=!0;break;case"contextmenu":case"mouseup":case"dragend":uu=!1,jh(fe,o,ce);break;case"selectionchange":if(I0)break;case"keydown":case"keyup":jh(fe,o,ce)}var ke;if(pt)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else po?kh(e,o)&&(Oe="onCompositionEnd"):e==="keydown"&&o.keyCode===229&&(Oe="onCompositionStart");Oe&&(wi&&o.locale!=="ko"&&(po||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&po&&(ke=us()):(cn=ce,io="value"in cn?cn.value:cn.textContent,po=!0)),Pe=Pa(Z,Oe),0<Pe.length&&(Oe=new fs(Oe,e,null,o,ce),fe.push({event:Oe,listeners:Pe}),ke?Oe.data=ke:(ke=Dh(o),ke!==null&&(Oe.data=ke)))),(ke=hn?m0(e,o):y0(e,o))&&(Z=Pa(Z,"onBeforeInput"),0<Z.length&&(ce=new fs("onBeforeInput","beforeinput",null,o,ce),fe.push({event:ce,listeners:Z}),ce.data=ke))}Yh(fe,n)})}function vs(e,n,o){return{instance:e,listener:n,currentTarget:o}}function Pa(e,n){for(var o=n+"Capture",c=[];e!==null;){var y=e,E=y.stateNode;y.tag===5&&E!==null&&(y=E,E=ft(e,o),E!=null&&c.unshift(vs(e,E,y)),E=ft(e,n),E!=null&&c.push(vs(e,E,y))),e=e.return}return c}function yo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zh(e,n,o,c,y){for(var E=n._reactName,M=[];o!==null&&o!==c;){var j=o,H=j.alternate,Z=j.stateNode;if(H!==null&&H===c)break;j.tag===5&&Z!==null&&(j=Z,y?(H=ft(o,E),H!=null&&M.unshift(vs(o,H,j))):y||(H=ft(o,E),H!=null&&M.push(vs(o,H,j)))),o=o.return}M.length!==0&&e.push({event:n,listeners:M})}var D0=/\r\n?/g,N0=/\u0000|\uFFFD/g;function ef(e){return(typeof e=="string"?e:""+e).replace(D0,`
`).replace(N0,"")}function ka(e,n,o){if(n=ef(n),ef(e)!==n&&o)throw Error(r(425))}function Da(){}var gu=null,mu=null;function yu(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var _u=typeof setTimeout=="function"?setTimeout:void 0,O0=typeof clearTimeout=="function"?clearTimeout:void 0,tf=typeof Promise=="function"?Promise:void 0,M0=typeof queueMicrotask=="function"?queueMicrotask:typeof tf<"u"?function(e){return tf.resolve(null).then(e).catch(V0)}:_u;function V0(e){setTimeout(function(){throw e})}function vu(e,n){var o=n,c=0;do{var y=o.nextSibling;if(e.removeChild(o),y&&y.nodeType===8)if(o=y.data,o==="/$"){if(c===0){e.removeChild(y),Vn(n);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=y}while(o);Vn(n)}function Fr(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function nf(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="$"||o==="$!"||o==="$?"){if(n===0)return e;n--}else o==="/$"&&n++}e=e.previousSibling}return null}var _o=Math.random().toString(36).slice(2),Zn="__reactFiber$"+_o,ws="__reactProps$"+_o,pr="__reactContainer$"+_o,wu="__reactEvents$"+_o,L0="__reactListeners$"+_o,b0="__reactHandles$"+_o;function Ei(e){var n=e[Zn];if(n)return n;for(var o=e.parentNode;o;){if(n=o[pr]||o[Zn]){if(o=n.alternate,n.child!==null||o!==null&&o.child!==null)for(e=nf(e);e!==null;){if(o=e[Zn])return o;e=nf(e)}return n}e=o,o=e.parentNode}return null}function Es(e){return e=e[Zn]||e[pr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vo(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(r(33))}function Na(e){return e[ws]||null}var Eu=[],wo=-1;function zr(e){return{current:e}}function Ze(e){0>wo||(e.current=Eu[wo],Eu[wo]=null,wo--)}function Ke(e,n){wo++,Eu[wo]=e.current,e.current=n}var Ur={},Ft=zr(Ur),Zt=zr(!1),Ti=Ur;function Eo(e,n){var o=e.type.contextTypes;if(!o)return Ur;var c=e.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===n)return c.__reactInternalMemoizedMaskedChildContext;var y={},E;for(E in o)y[E]=n[E];return c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=y),y}function en(e){return e=e.childContextTypes,e!=null}function Oa(){Ze(Zt),Ze(Ft)}function rf(e,n,o){if(Ft.current!==Ur)throw Error(r(168));Ke(Ft,n),Ke(Zt,o)}function of(e,n,o){var c=e.stateNode;if(n=n.childContextTypes,typeof c.getChildContext!="function")return o;c=c.getChildContext();for(var y in c)if(!(y in n))throw Error(r(108,ie(e)||"Unknown",y));return G({},o,c)}function Ma(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ur,Ti=Ft.current,Ke(Ft,e),Ke(Zt,Zt.current),!0}function sf(e,n,o){var c=e.stateNode;if(!c)throw Error(r(169));o?(e=of(e,n,Ti),c.__reactInternalMemoizedMergedChildContext=e,Ze(Zt),Ze(Ft),Ke(Ft,e)):Ze(Zt),Ke(Zt,o)}var gr=null,Va=!1,Tu=!1;function af(e){gr===null?gr=[e]:gr.push(e)}function F0(e){Va=!0,af(e)}function Br(){if(!Tu&&gr!==null){Tu=!0;var e=0,n=ze;try{var o=gr;for(ze=1;e<o.length;e++){var c=o[e];do c=c(!0);while(c!==null)}gr=null,Va=!1}catch(y){throw gr!==null&&(gr=gr.slice(e+1)),Zi(di,Br),y}finally{ze=n,Tu=!1}}return null}var To=[],So=0,La=null,ba=0,Tn=[],Sn=0,Si=null,mr=1,yr="";function Ai(e,n){To[So++]=ba,To[So++]=La,La=e,ba=n}function lf(e,n,o){Tn[Sn++]=mr,Tn[Sn++]=yr,Tn[Sn++]=Si,Si=e;var c=mr;e=yr;var y=32-Wt(c)-1;c&=~(1<<y),o+=1;var E=32-Wt(n)+y;if(30<E){var M=y-y%5;E=(c&(1<<M)-1).toString(32),c>>=M,y-=M,mr=1<<32-Wt(n)+y|o<<y|c,yr=E+e}else mr=1<<E|o<<y|c,yr=e}function Su(e){e.return!==null&&(Ai(e,1),lf(e,1,0))}function Au(e){for(;e===La;)La=To[--So],To[So]=null,ba=To[--So],To[So]=null;for(;e===Si;)Si=Tn[--Sn],Tn[Sn]=null,yr=Tn[--Sn],Tn[Sn]=null,mr=Tn[--Sn],Tn[Sn]=null}var fn=null,dn=null,nt=!1,Fn=null;function uf(e,n){var o=In(5,null,null,0);o.elementType="DELETED",o.stateNode=n,o.return=e,n=e.deletions,n===null?(e.deletions=[o],e.flags|=16):n.push(o)}function cf(e,n){switch(e.tag){case 5:var o=e.type;return n=n.nodeType!==1||o.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,fn=e,dn=Fr(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,fn=e,dn=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(o=Si!==null?{id:mr,overflow:yr}:null,e.memoizedState={dehydrated:n,treeContext:o,retryLane:1073741824},o=In(18,null,null,0),o.stateNode=n,o.return=e,e.child=o,fn=e,dn=null,!0):!1;default:return!1}}function Ru(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Cu(e){if(nt){var n=dn;if(n){var o=n;if(!cf(e,n)){if(Ru(e))throw Error(r(418));n=Fr(o.nextSibling);var c=fn;n&&cf(e,n)?uf(c,o):(e.flags=e.flags&-4097|2,nt=!1,fn=e)}}else{if(Ru(e))throw Error(r(418));e.flags=e.flags&-4097|2,nt=!1,fn=e}}}function hf(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fn=e}function Fa(e){if(e!==fn)return!1;if(!nt)return hf(e),nt=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!yu(e.type,e.memoizedProps)),n&&(n=dn)){if(Ru(e))throw ff(),Error(r(418));for(;n;)uf(e,n),n=Fr(n.nextSibling)}if(hf(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var o=e.data;if(o==="/$"){if(n===0){dn=Fr(e.nextSibling);break e}n--}else o!=="$"&&o!=="$!"&&o!=="$?"||n++}e=e.nextSibling}dn=null}}else dn=fn?Fr(e.stateNode.nextSibling):null;return!0}function ff(){for(var e=dn;e;)e=Fr(e.nextSibling)}function Ao(){dn=fn=null,nt=!1}function Iu(e){Fn===null?Fn=[e]:Fn.push(e)}var z0=P.ReactCurrentBatchConfig;function Ts(e,n,o){if(e=o.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(o._owner){if(o=o._owner,o){if(o.tag!==1)throw Error(r(309));var c=o.stateNode}if(!c)throw Error(r(147,e));var y=c,E=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===E?n.ref:(n=function(M){var j=y.refs;M===null?delete j[E]:j[E]=M},n._stringRef=E,n)}if(typeof e!="string")throw Error(r(284));if(!o._owner)throw Error(r(290,e))}return e}function za(e,n){throw e=Object.prototype.toString.call(n),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function df(e){var n=e._init;return n(e._payload)}function pf(e){function n(K,W){if(e){var Y=K.deletions;Y===null?(K.deletions=[W],K.flags|=16):Y.push(W)}}function o(K,W){if(!e)return null;for(;W!==null;)n(K,W),W=W.sibling;return null}function c(K,W){for(K=new Map;W!==null;)W.key!==null?K.set(W.key,W):K.set(W.index,W),W=W.sibling;return K}function y(K,W){return K=Kr(K,W),K.index=0,K.sibling=null,K}function E(K,W,Y){return K.index=Y,e?(Y=K.alternate,Y!==null?(Y=Y.index,Y<W?(K.flags|=2,W):Y):(K.flags|=2,W)):(K.flags|=1048576,W)}function M(K){return e&&K.alternate===null&&(K.flags|=2),K}function j(K,W,Y,ge){return W===null||W.tag!==6?(W=_c(Y,K.mode,ge),W.return=K,W):(W=y(W,Y),W.return=K,W)}function H(K,W,Y,ge){var Ce=Y.type;return Ce===R?ce(K,W,Y.props.children,ge,Y.key):W!==null&&(W.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&df(Ce)===W.type)?(ge=y(W,Y.props),ge.ref=Ts(K,W,Y),ge.return=K,ge):(ge=ul(Y.type,Y.key,Y.props,null,K.mode,ge),ge.ref=Ts(K,W,Y),ge.return=K,ge)}function Z(K,W,Y,ge){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=vc(Y,K.mode,ge),W.return=K,W):(W=y(W,Y.children||[]),W.return=K,W)}function ce(K,W,Y,ge,Ce){return W===null||W.tag!==7?(W=Ni(Y,K.mode,ge,Ce),W.return=K,W):(W=y(W,Y),W.return=K,W)}function fe(K,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=_c(""+W,K.mode,Y),W.return=K,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case N:return Y=ul(W.type,W.key,W.props,null,K.mode,Y),Y.ref=Ts(K,null,W),Y.return=K,Y;case L:return W=vc(W,K.mode,Y),W.return=K,W;case X:var ge=W._init;return fe(K,ge(W._payload),Y)}if(ht(W)||re(W))return W=Ni(W,K.mode,Y,null),W.return=K,W;za(K,W)}return null}function le(K,W,Y,ge){var Ce=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ce!==null?null:j(K,W,""+Y,ge);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case N:return Y.key===Ce?H(K,W,Y,ge):null;case L:return Y.key===Ce?Z(K,W,Y,ge):null;case X:return Ce=Y._init,le(K,W,Ce(Y._payload),ge)}if(ht(Y)||re(Y))return Ce!==null?null:ce(K,W,Y,ge,null);za(K,Y)}return null}function we(K,W,Y,ge,Ce){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return K=K.get(Y)||null,j(W,K,""+ge,Ce);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case N:return K=K.get(ge.key===null?Y:ge.key)||null,H(W,K,ge,Ce);case L:return K=K.get(ge.key===null?Y:ge.key)||null,Z(W,K,ge,Ce);case X:var Pe=ge._init;return we(K,W,Y,Pe(ge._payload),Ce)}if(ht(ge)||re(ge))return K=K.get(Y)||null,ce(W,K,ge,Ce,null);za(W,ge)}return null}function Se(K,W,Y,ge){for(var Ce=null,Pe=null,ke=W,Oe=W=0,Rt=null;ke!==null&&Oe<Y.length;Oe++){ke.index>Oe?(Rt=ke,ke=null):Rt=ke.sibling;var He=le(K,ke,Y[Oe],ge);if(He===null){ke===null&&(ke=Rt);break}e&&ke&&He.alternate===null&&n(K,ke),W=E(He,W,Oe),Pe===null?Ce=He:Pe.sibling=He,Pe=He,ke=Rt}if(Oe===Y.length)return o(K,ke),nt&&Ai(K,Oe),Ce;if(ke===null){for(;Oe<Y.length;Oe++)ke=fe(K,Y[Oe],ge),ke!==null&&(W=E(ke,W,Oe),Pe===null?Ce=ke:Pe.sibling=ke,Pe=ke);return nt&&Ai(K,Oe),Ce}for(ke=c(K,ke);Oe<Y.length;Oe++)Rt=we(ke,K,Oe,Y[Oe],ge),Rt!==null&&(e&&Rt.alternate!==null&&ke.delete(Rt.key===null?Oe:Rt.key),W=E(Rt,W,Oe),Pe===null?Ce=Rt:Pe.sibling=Rt,Pe=Rt);return e&&ke.forEach(function(Xr){return n(K,Xr)}),nt&&Ai(K,Oe),Ce}function Ae(K,W,Y,ge){var Ce=re(Y);if(typeof Ce!="function")throw Error(r(150));if(Y=Ce.call(Y),Y==null)throw Error(r(151));for(var Pe=Ce=null,ke=W,Oe=W=0,Rt=null,He=Y.next();ke!==null&&!He.done;Oe++,He=Y.next()){ke.index>Oe?(Rt=ke,ke=null):Rt=ke.sibling;var Xr=le(K,ke,He.value,ge);if(Xr===null){ke===null&&(ke=Rt);break}e&&ke&&Xr.alternate===null&&n(K,ke),W=E(Xr,W,Oe),Pe===null?Ce=Xr:Pe.sibling=Xr,Pe=Xr,ke=Rt}if(He.done)return o(K,ke),nt&&Ai(K,Oe),Ce;if(ke===null){for(;!He.done;Oe++,He=Y.next())He=fe(K,He.value,ge),He!==null&&(W=E(He,W,Oe),Pe===null?Ce=He:Pe.sibling=He,Pe=He);return nt&&Ai(K,Oe),Ce}for(ke=c(K,ke);!He.done;Oe++,He=Y.next())He=we(ke,K,Oe,He.value,ge),He!==null&&(e&&He.alternate!==null&&ke.delete(He.key===null?Oe:He.key),W=E(He,W,Oe),Pe===null?Ce=He:Pe.sibling=He,Pe=He);return e&&ke.forEach(function(_m){return n(K,_m)}),nt&&Ai(K,Oe),Ce}function dt(K,W,Y,ge){if(typeof Y=="object"&&Y!==null&&Y.type===R&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case N:e:{for(var Ce=Y.key,Pe=W;Pe!==null;){if(Pe.key===Ce){if(Ce=Y.type,Ce===R){if(Pe.tag===7){o(K,Pe.sibling),W=y(Pe,Y.props.children),W.return=K,K=W;break e}}else if(Pe.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===X&&df(Ce)===Pe.type){o(K,Pe.sibling),W=y(Pe,Y.props),W.ref=Ts(K,Pe,Y),W.return=K,K=W;break e}o(K,Pe);break}else n(K,Pe);Pe=Pe.sibling}Y.type===R?(W=Ni(Y.props.children,K.mode,ge,Y.key),W.return=K,K=W):(ge=ul(Y.type,Y.key,Y.props,null,K.mode,ge),ge.ref=Ts(K,W,Y),ge.return=K,K=ge)}return M(K);case L:e:{for(Pe=Y.key;W!==null;){if(W.key===Pe)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){o(K,W.sibling),W=y(W,Y.children||[]),W.return=K,K=W;break e}else{o(K,W);break}else n(K,W);W=W.sibling}W=vc(Y,K.mode,ge),W.return=K,K=W}return M(K);case X:return Pe=Y._init,dt(K,W,Pe(Y._payload),ge)}if(ht(Y))return Se(K,W,Y,ge);if(re(Y))return Ae(K,W,Y,ge);za(K,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(o(K,W.sibling),W=y(W,Y),W.return=K,K=W):(o(K,W),W=_c(Y,K.mode,ge),W.return=K,K=W),M(K)):o(K,W)}return dt}var Ro=pf(!0),gf=pf(!1),Ua=zr(null),Ba=null,Co=null,xu=null;function Pu(){xu=Co=Ba=null}function ku(e){var n=Ua.current;Ze(Ua),e._currentValue=n}function Du(e,n,o){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===o)break;e=e.return}}function Io(e,n){Ba=e,xu=Co=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(tn=!0),e.firstContext=null)}function An(e){var n=e._currentValue;if(xu!==e)if(e={context:e,memoizedValue:n,next:null},Co===null){if(Ba===null)throw Error(r(308));Co=e,Ba.dependencies={lanes:0,firstContext:e}}else Co=Co.next=e;return n}var Ri=null;function Nu(e){Ri===null?Ri=[e]:Ri.push(e)}function mf(e,n,o,c){var y=n.interleaved;return y===null?(o.next=o,Nu(n)):(o.next=y.next,y.next=o),n.interleaved=o,_r(e,c)}function _r(e,n){e.lanes|=n;var o=e.alternate;for(o!==null&&(o.lanes|=n),o=e,e=e.return;e!==null;)e.childLanes|=n,o=e.alternate,o!==null&&(o.childLanes|=n),o=e,e=e.return;return o.tag===3?o.stateNode:null}var jr=!1;function Ou(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yf(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vr(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function $r(e,n,o){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,$e&2){var y=c.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),c.pending=n,_r(e,o)}return y=c.interleaved,y===null?(n.next=n,Nu(c)):(n.next=y.next,y.next=n),c.interleaved=n,_r(e,o)}function ja(e,n,o){if(n=n.updateQueue,n!==null&&(n=n.shared,(o&4194240)!==0)){var c=n.lanes;c&=e.pendingLanes,o|=c,n.lanes=o,Nr(e,o)}}function _f(e,n){var o=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var y=null,E=null;if(o=o.firstBaseUpdate,o!==null){do{var M={eventTime:o.eventTime,lane:o.lane,tag:o.tag,payload:o.payload,callback:o.callback,next:null};E===null?y=E=M:E=E.next=M,o=o.next}while(o!==null);E===null?y=E=n:E=E.next=n}else y=E=n;o={baseState:c.baseState,firstBaseUpdate:y,lastBaseUpdate:E,shared:c.shared,effects:c.effects},e.updateQueue=o;return}e=o.lastBaseUpdate,e===null?o.firstBaseUpdate=n:e.next=n,o.lastBaseUpdate=n}function $a(e,n,o,c){var y=e.updateQueue;jr=!1;var E=y.firstBaseUpdate,M=y.lastBaseUpdate,j=y.shared.pending;if(j!==null){y.shared.pending=null;var H=j,Z=H.next;H.next=null,M===null?E=Z:M.next=Z,M=H;var ce=e.alternate;ce!==null&&(ce=ce.updateQueue,j=ce.lastBaseUpdate,j!==M&&(j===null?ce.firstBaseUpdate=Z:j.next=Z,ce.lastBaseUpdate=H))}if(E!==null){var fe=y.baseState;M=0,ce=Z=H=null,j=E;do{var le=j.lane,we=j.eventTime;if((c&le)===le){ce!==null&&(ce=ce.next={eventTime:we,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Se=e,Ae=j;switch(le=n,we=o,Ae.tag){case 1:if(Se=Ae.payload,typeof Se=="function"){fe=Se.call(we,fe,le);break e}fe=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Ae.payload,le=typeof Se=="function"?Se.call(we,fe,le):Se,le==null)break e;fe=G({},fe,le);break e;case 2:jr=!0}}j.callback!==null&&j.lane!==0&&(e.flags|=64,le=y.effects,le===null?y.effects=[j]:le.push(j))}else we={eventTime:we,lane:le,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ce===null?(Z=ce=we,H=fe):ce=ce.next=we,M|=le;if(j=j.next,j===null){if(j=y.shared.pending,j===null)break;le=j,j=le.next,le.next=null,y.lastBaseUpdate=le,y.shared.pending=null}}while(!0);if(ce===null&&(H=fe),y.baseState=H,y.firstBaseUpdate=Z,y.lastBaseUpdate=ce,n=y.shared.interleaved,n!==null){y=n;do M|=y.lane,y=y.next;while(y!==n)}else E===null&&(y.shared.lanes=0);xi|=M,e.lanes=M,e.memoizedState=fe}}function vf(e,n,o){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var c=e[n],y=c.callback;if(y!==null){if(c.callback=null,c=o,typeof y!="function")throw Error(r(191,y));y.call(c)}}}var Ss={},er=zr(Ss),As=zr(Ss),Rs=zr(Ss);function Ci(e){if(e===Ss)throw Error(r(174));return e}function Mu(e,n){switch(Ke(Rs,n),Ke(As,e),Ke(er,Ss),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:_t(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=_t(n,e)}Ze(er),Ke(er,n)}function xo(){Ze(er),Ze(As),Ze(Rs)}function wf(e){Ci(Rs.current);var n=Ci(er.current),o=_t(n,e.type);n!==o&&(Ke(As,e),Ke(er,o))}function Vu(e){As.current===e&&(Ze(er),Ze(As))}var it=zr(0);function Ha(e){for(var n=e;n!==null;){if(n.tag===13){var o=n.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Lu=[];function bu(){for(var e=0;e<Lu.length;e++)Lu[e]._workInProgressVersionPrimary=null;Lu.length=0}var Wa=P.ReactCurrentDispatcher,Fu=P.ReactCurrentBatchConfig,Ii=0,ot=null,wt=null,St=null,qa=!1,Cs=!1,Is=0,U0=0;function zt(){throw Error(r(321))}function zu(e,n){if(n===null)return!1;for(var o=0;o<n.length&&o<e.length;o++)if(!bn(e[o],n[o]))return!1;return!0}function Uu(e,n,o,c,y,E){if(Ii=E,ot=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Wa.current=e===null||e.memoizedState===null?H0:W0,e=o(c,y),Cs){E=0;do{if(Cs=!1,Is=0,25<=E)throw Error(r(301));E+=1,St=wt=null,n.updateQueue=null,Wa.current=q0,e=o(c,y)}while(Cs)}if(Wa.current=Ka,n=wt!==null&&wt.next!==null,Ii=0,St=wt=ot=null,qa=!1,n)throw Error(r(300));return e}function Bu(){var e=Is!==0;return Is=0,e}function tr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return St===null?ot.memoizedState=St=e:St=St.next=e,St}function Rn(){if(wt===null){var e=ot.alternate;e=e!==null?e.memoizedState:null}else e=wt.next;var n=St===null?ot.memoizedState:St.next;if(n!==null)St=n,wt=e;else{if(e===null)throw Error(r(310));wt=e,e={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},St===null?ot.memoizedState=St=e:St=St.next=e}return St}function xs(e,n){return typeof n=="function"?n(e):n}function ju(e){var n=Rn(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var c=wt,y=c.baseQueue,E=o.pending;if(E!==null){if(y!==null){var M=y.next;y.next=E.next,E.next=M}c.baseQueue=y=E,o.pending=null}if(y!==null){E=y.next,c=c.baseState;var j=M=null,H=null,Z=E;do{var ce=Z.lane;if((Ii&ce)===ce)H!==null&&(H=H.next={lane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),c=Z.hasEagerState?Z.eagerState:e(c,Z.action);else{var fe={lane:ce,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null};H===null?(j=H=fe,M=c):H=H.next=fe,ot.lanes|=ce,xi|=ce}Z=Z.next}while(Z!==null&&Z!==E);H===null?M=c:H.next=j,bn(c,n.memoizedState)||(tn=!0),n.memoizedState=c,n.baseState=M,n.baseQueue=H,o.lastRenderedState=c}if(e=o.interleaved,e!==null){y=e;do E=y.lane,ot.lanes|=E,xi|=E,y=y.next;while(y!==e)}else y===null&&(o.lanes=0);return[n.memoizedState,o.dispatch]}function $u(e){var n=Rn(),o=n.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=e;var c=o.dispatch,y=o.pending,E=n.memoizedState;if(y!==null){o.pending=null;var M=y=y.next;do E=e(E,M.action),M=M.next;while(M!==y);bn(E,n.memoizedState)||(tn=!0),n.memoizedState=E,n.baseQueue===null&&(n.baseState=E),o.lastRenderedState=E}return[E,c]}function Ef(){}function Tf(e,n){var o=ot,c=Rn(),y=n(),E=!bn(c.memoizedState,y);if(E&&(c.memoizedState=y,tn=!0),c=c.queue,Hu(Rf.bind(null,o,c,e),[e]),c.getSnapshot!==n||E||St!==null&&St.memoizedState.tag&1){if(o.flags|=2048,Ps(9,Af.bind(null,o,c,y,n),void 0,null),At===null)throw Error(r(349));Ii&30||Sf(o,n,y)}return y}function Sf(e,n,o){e.flags|=16384,e={getSnapshot:n,value:o},n=ot.updateQueue,n===null?(n={lastEffect:null,stores:null},ot.updateQueue=n,n.stores=[e]):(o=n.stores,o===null?n.stores=[e]:o.push(e))}function Af(e,n,o,c){n.value=o,n.getSnapshot=c,Cf(n)&&If(e)}function Rf(e,n,o){return o(function(){Cf(n)&&If(e)})}function Cf(e){var n=e.getSnapshot;e=e.value;try{var o=n();return!bn(e,o)}catch{return!0}}function If(e){var n=_r(e,1);n!==null&&jn(n,e,1,-1)}function xf(e){var n=tr();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},n.queue=e,e=e.dispatch=$0.bind(null,ot,e),[n.memoizedState,e]}function Ps(e,n,o,c){return e={tag:e,create:n,destroy:o,deps:c,next:null},n=ot.updateQueue,n===null?(n={lastEffect:null,stores:null},ot.updateQueue=n,n.lastEffect=e.next=e):(o=n.lastEffect,o===null?n.lastEffect=e.next=e:(c=o.next,o.next=e,e.next=c,n.lastEffect=e)),e}function Pf(){return Rn().memoizedState}function Ga(e,n,o,c){var y=tr();ot.flags|=e,y.memoizedState=Ps(1|n,o,void 0,c===void 0?null:c)}function Qa(e,n,o,c){var y=Rn();c=c===void 0?null:c;var E=void 0;if(wt!==null){var M=wt.memoizedState;if(E=M.destroy,c!==null&&zu(c,M.deps)){y.memoizedState=Ps(n,o,E,c);return}}ot.flags|=e,y.memoizedState=Ps(1|n,o,E,c)}function kf(e,n){return Ga(8390656,8,e,n)}function Hu(e,n){return Qa(2048,8,e,n)}function Df(e,n){return Qa(4,2,e,n)}function Nf(e,n){return Qa(4,4,e,n)}function Of(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function Mf(e,n,o){return o=o!=null?o.concat([e]):null,Qa(4,4,Of.bind(null,n,e),o)}function Wu(){}function Vf(e,n){var o=Rn();n=n===void 0?null:n;var c=o.memoizedState;return c!==null&&n!==null&&zu(n,c[1])?c[0]:(o.memoizedState=[e,n],e)}function Lf(e,n){var o=Rn();n=n===void 0?null:n;var c=o.memoizedState;return c!==null&&n!==null&&zu(n,c[1])?c[0]:(e=e(),o.memoizedState=[e,n],e)}function bf(e,n,o){return Ii&21?(bn(o,n)||(o=mi(),ot.lanes|=o,xi|=o,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,tn=!0),e.memoizedState=o)}function B0(e,n){var o=ze;ze=o!==0&&4>o?o:4,e(!0);var c=Fu.transition;Fu.transition={};try{e(!1),n()}finally{ze=o,Fu.transition=c}}function Ff(){return Rn().memoizedState}function j0(e,n,o){var c=Gr(e);if(o={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null},zf(e))Uf(n,o);else if(o=mf(e,n,o,c),o!==null){var y=Qt();jn(o,e,c,y),Bf(o,n,c)}}function $0(e,n,o){var c=Gr(e),y={lane:c,action:o,hasEagerState:!1,eagerState:null,next:null};if(zf(e))Uf(n,y);else{var E=e.alternate;if(e.lanes===0&&(E===null||E.lanes===0)&&(E=n.lastRenderedReducer,E!==null))try{var M=n.lastRenderedState,j=E(M,o);if(y.hasEagerState=!0,y.eagerState=j,bn(j,M)){var H=n.interleaved;H===null?(y.next=y,Nu(n)):(y.next=H.next,H.next=y),n.interleaved=y;return}}catch{}finally{}o=mf(e,n,y,c),o!==null&&(y=Qt(),jn(o,e,c,y),Bf(o,n,c))}}function zf(e){var n=e.alternate;return e===ot||n!==null&&n===ot}function Uf(e,n){Cs=qa=!0;var o=e.pending;o===null?n.next=n:(n.next=o.next,o.next=n),e.pending=n}function Bf(e,n,o){if(o&4194240){var c=n.lanes;c&=e.pendingLanes,o|=c,n.lanes=o,Nr(e,o)}}var Ka={readContext:An,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useInsertionEffect:zt,useLayoutEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useMutableSource:zt,useSyncExternalStore:zt,useId:zt,unstable_isNewReconciler:!1},H0={readContext:An,useCallback:function(e,n){return tr().memoizedState=[e,n===void 0?null:n],e},useContext:An,useEffect:kf,useImperativeHandle:function(e,n,o){return o=o!=null?o.concat([e]):null,Ga(4194308,4,Of.bind(null,n,e),o)},useLayoutEffect:function(e,n){return Ga(4194308,4,e,n)},useInsertionEffect:function(e,n){return Ga(4,2,e,n)},useMemo:function(e,n){var o=tr();return n=n===void 0?null:n,e=e(),o.memoizedState=[e,n],e},useReducer:function(e,n,o){var c=tr();return n=o!==void 0?o(n):n,c.memoizedState=c.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},c.queue=e,e=e.dispatch=j0.bind(null,ot,e),[c.memoizedState,e]},useRef:function(e){var n=tr();return e={current:e},n.memoizedState=e},useState:xf,useDebugValue:Wu,useDeferredValue:function(e){return tr().memoizedState=e},useTransition:function(){var e=xf(!1),n=e[0];return e=B0.bind(null,e[1]),tr().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,o){var c=ot,y=tr();if(nt){if(o===void 0)throw Error(r(407));o=o()}else{if(o=n(),At===null)throw Error(r(349));Ii&30||Sf(c,n,o)}y.memoizedState=o;var E={value:o,getSnapshot:n};return y.queue=E,kf(Rf.bind(null,c,E,e),[e]),c.flags|=2048,Ps(9,Af.bind(null,c,E,o,n),void 0,null),o},useId:function(){var e=tr(),n=At.identifierPrefix;if(nt){var o=yr,c=mr;o=(c&~(1<<32-Wt(c)-1)).toString(32)+o,n=":"+n+"R"+o,o=Is++,0<o&&(n+="H"+o.toString(32)),n+=":"}else o=U0++,n=":"+n+"r"+o.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},W0={readContext:An,useCallback:Vf,useContext:An,useEffect:Hu,useImperativeHandle:Mf,useInsertionEffect:Df,useLayoutEffect:Nf,useMemo:Lf,useReducer:ju,useRef:Pf,useState:function(){return ju(xs)},useDebugValue:Wu,useDeferredValue:function(e){var n=Rn();return bf(n,wt.memoizedState,e)},useTransition:function(){var e=ju(xs)[0],n=Rn().memoizedState;return[e,n]},useMutableSource:Ef,useSyncExternalStore:Tf,useId:Ff,unstable_isNewReconciler:!1},q0={readContext:An,useCallback:Vf,useContext:An,useEffect:Hu,useImperativeHandle:Mf,useInsertionEffect:Df,useLayoutEffect:Nf,useMemo:Lf,useReducer:$u,useRef:Pf,useState:function(){return $u(xs)},useDebugValue:Wu,useDeferredValue:function(e){var n=Rn();return wt===null?n.memoizedState=e:bf(n,wt.memoizedState,e)},useTransition:function(){var e=$u(xs)[0],n=Rn().memoizedState;return[e,n]},useMutableSource:Ef,useSyncExternalStore:Tf,useId:Ff,unstable_isNewReconciler:!1};function zn(e,n){if(e&&e.defaultProps){n=G({},n),e=e.defaultProps;for(var o in e)n[o]===void 0&&(n[o]=e[o]);return n}return n}function qu(e,n,o,c){n=e.memoizedState,o=o(c,n),o=o==null?n:G({},n,o),e.memoizedState=o,e.lanes===0&&(e.updateQueue.baseState=o)}var Xa={isMounted:function(e){return(e=e._reactInternals)?kn(e)===e:!1},enqueueSetState:function(e,n,o){e=e._reactInternals;var c=Qt(),y=Gr(e),E=vr(c,y);E.payload=n,o!=null&&(E.callback=o),n=$r(e,E,y),n!==null&&(jn(n,e,y,c),ja(n,e,y))},enqueueReplaceState:function(e,n,o){e=e._reactInternals;var c=Qt(),y=Gr(e),E=vr(c,y);E.tag=1,E.payload=n,o!=null&&(E.callback=o),n=$r(e,E,y),n!==null&&(jn(n,e,y,c),ja(n,e,y))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var o=Qt(),c=Gr(e),y=vr(o,c);y.tag=2,n!=null&&(y.callback=n),n=$r(e,y,c),n!==null&&(jn(n,e,c,o),ja(n,e,c))}};function jf(e,n,o,c,y,E,M){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,E,M):n.prototype&&n.prototype.isPureReactComponent?!gs(o,c)||!gs(y,E):!0}function $f(e,n,o){var c=!1,y=Ur,E=n.contextType;return typeof E=="object"&&E!==null?E=An(E):(y=en(n)?Ti:Ft.current,c=n.contextTypes,E=(c=c!=null)?Eo(e,y):Ur),n=new n(o,E),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=Xa,e.stateNode=n,n._reactInternals=e,c&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=y,e.__reactInternalMemoizedMaskedChildContext=E),n}function Hf(e,n,o,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(o,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(o,c),n.state!==e&&Xa.enqueueReplaceState(n,n.state,null)}function Gu(e,n,o,c){var y=e.stateNode;y.props=o,y.state=e.memoizedState,y.refs={},Ou(e);var E=n.contextType;typeof E=="object"&&E!==null?y.context=An(E):(E=en(n)?Ti:Ft.current,y.context=Eo(e,E)),y.state=e.memoizedState,E=n.getDerivedStateFromProps,typeof E=="function"&&(qu(e,n,E,o),y.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof y.getSnapshotBeforeUpdate=="function"||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(n=y.state,typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount(),n!==y.state&&Xa.enqueueReplaceState(y,y.state,null),$a(e,o,y,c),y.state=e.memoizedState),typeof y.componentDidMount=="function"&&(e.flags|=4194308)}function Po(e,n){try{var o="",c=n;do o+=ve(c),c=c.return;while(c);var y=o}catch(E){y=`
Error generating stack: `+E.message+`
`+E.stack}return{value:e,source:n,stack:y,digest:null}}function Qu(e,n,o){return{value:e,source:null,stack:o??null,digest:n??null}}function Ku(e,n){try{console.error(n.value)}catch(o){setTimeout(function(){throw o})}}var G0=typeof WeakMap=="function"?WeakMap:Map;function Wf(e,n,o){o=vr(-1,o),o.tag=3,o.payload={element:null};var c=n.value;return o.callback=function(){rl||(rl=!0,cc=c),Ku(e,n)},o}function qf(e,n,o){o=vr(-1,o),o.tag=3;var c=e.type.getDerivedStateFromError;if(typeof c=="function"){var y=n.value;o.payload=function(){return c(y)},o.callback=function(){Ku(e,n)}}var E=e.stateNode;return E!==null&&typeof E.componentDidCatch=="function"&&(o.callback=function(){Ku(e,n),typeof c!="function"&&(Wr===null?Wr=new Set([this]):Wr.add(this));var M=n.stack;this.componentDidCatch(n.value,{componentStack:M!==null?M:""})}),o}function Gf(e,n,o){var c=e.pingCache;if(c===null){c=e.pingCache=new G0;var y=new Set;c.set(n,y)}else y=c.get(n),y===void 0&&(y=new Set,c.set(n,y));y.has(o)||(y.add(o),e=am.bind(null,e,n,o),n.then(e,e))}function Qf(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function Kf(e,n,o,c,y){return e.mode&1?(e.flags|=65536,e.lanes=y,e):(e===n?e.flags|=65536:(e.flags|=128,o.flags|=131072,o.flags&=-52805,o.tag===1&&(o.alternate===null?o.tag=17:(n=vr(-1,1),n.tag=2,$r(o,n,1))),o.lanes|=1),e)}var Q0=P.ReactCurrentOwner,tn=!1;function Gt(e,n,o,c){n.child=e===null?gf(n,null,o,c):Ro(n,e.child,o,c)}function Xf(e,n,o,c,y){o=o.render;var E=n.ref;return Io(n,y),c=Uu(e,n,o,c,E,y),o=Bu(),e!==null&&!tn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,wr(e,n,y)):(nt&&o&&Su(n),n.flags|=1,Gt(e,n,c,y),n.child)}function Yf(e,n,o,c,y){if(e===null){var E=o.type;return typeof E=="function"&&!yc(E)&&E.defaultProps===void 0&&o.compare===null&&o.defaultProps===void 0?(n.tag=15,n.type=E,Jf(e,n,E,c,y)):(e=ul(o.type,null,c,n,n.mode,y),e.ref=n.ref,e.return=n,n.child=e)}if(E=e.child,!(e.lanes&y)){var M=E.memoizedProps;if(o=o.compare,o=o!==null?o:gs,o(M,c)&&e.ref===n.ref)return wr(e,n,y)}return n.flags|=1,e=Kr(E,c),e.ref=n.ref,e.return=n,n.child=e}function Jf(e,n,o,c,y){if(e!==null){var E=e.memoizedProps;if(gs(E,c)&&e.ref===n.ref)if(tn=!1,n.pendingProps=c=E,(e.lanes&y)!==0)e.flags&131072&&(tn=!0);else return n.lanes=e.lanes,wr(e,n,y)}return Xu(e,n,o,c,y)}function Zf(e,n,o){var c=n.pendingProps,y=c.children,E=e!==null?e.memoizedState:null;if(c.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ke(Do,pn),pn|=o;else{if(!(o&1073741824))return e=E!==null?E.baseLanes|o:o,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Ke(Do,pn),pn|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=E!==null?E.baseLanes:o,Ke(Do,pn),pn|=c}else E!==null?(c=E.baseLanes|o,n.memoizedState=null):c=o,Ke(Do,pn),pn|=c;return Gt(e,n,y,o),n.child}function ed(e,n){var o=n.ref;(e===null&&o!==null||e!==null&&e.ref!==o)&&(n.flags|=512,n.flags|=2097152)}function Xu(e,n,o,c,y){var E=en(o)?Ti:Ft.current;return E=Eo(n,E),Io(n,y),o=Uu(e,n,o,c,E,y),c=Bu(),e!==null&&!tn?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~y,wr(e,n,y)):(nt&&c&&Su(n),n.flags|=1,Gt(e,n,o,y),n.child)}function td(e,n,o,c,y){if(en(o)){var E=!0;Ma(n)}else E=!1;if(Io(n,y),n.stateNode===null)Ja(e,n),$f(n,o,c),Gu(n,o,c,y),c=!0;else if(e===null){var M=n.stateNode,j=n.memoizedProps;M.props=j;var H=M.context,Z=o.contextType;typeof Z=="object"&&Z!==null?Z=An(Z):(Z=en(o)?Ti:Ft.current,Z=Eo(n,Z));var ce=o.getDerivedStateFromProps,fe=typeof ce=="function"||typeof M.getSnapshotBeforeUpdate=="function";fe||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(j!==c||H!==Z)&&Hf(n,M,c,Z),jr=!1;var le=n.memoizedState;M.state=le,$a(n,c,M,y),H=n.memoizedState,j!==c||le!==H||Zt.current||jr?(typeof ce=="function"&&(qu(n,o,ce,c),H=n.memoizedState),(j=jr||jf(n,o,j,c,le,H,Z))?(fe||typeof M.UNSAFE_componentWillMount!="function"&&typeof M.componentWillMount!="function"||(typeof M.componentWillMount=="function"&&M.componentWillMount(),typeof M.UNSAFE_componentWillMount=="function"&&M.UNSAFE_componentWillMount()),typeof M.componentDidMount=="function"&&(n.flags|=4194308)):(typeof M.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=H),M.props=c,M.state=H,M.context=Z,c=j):(typeof M.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{M=n.stateNode,yf(e,n),j=n.memoizedProps,Z=n.type===n.elementType?j:zn(n.type,j),M.props=Z,fe=n.pendingProps,le=M.context,H=o.contextType,typeof H=="object"&&H!==null?H=An(H):(H=en(o)?Ti:Ft.current,H=Eo(n,H));var we=o.getDerivedStateFromProps;(ce=typeof we=="function"||typeof M.getSnapshotBeforeUpdate=="function")||typeof M.UNSAFE_componentWillReceiveProps!="function"&&typeof M.componentWillReceiveProps!="function"||(j!==fe||le!==H)&&Hf(n,M,c,H),jr=!1,le=n.memoizedState,M.state=le,$a(n,c,M,y);var Se=n.memoizedState;j!==fe||le!==Se||Zt.current||jr?(typeof we=="function"&&(qu(n,o,we,c),Se=n.memoizedState),(Z=jr||jf(n,o,Z,c,le,Se,H)||!1)?(ce||typeof M.UNSAFE_componentWillUpdate!="function"&&typeof M.componentWillUpdate!="function"||(typeof M.componentWillUpdate=="function"&&M.componentWillUpdate(c,Se,H),typeof M.UNSAFE_componentWillUpdate=="function"&&M.UNSAFE_componentWillUpdate(c,Se,H)),typeof M.componentDidUpdate=="function"&&(n.flags|=4),typeof M.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof M.componentDidUpdate!="function"||j===e.memoizedProps&&le===e.memoizedState||(n.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&le===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=Se),M.props=c,M.state=Se,M.context=H,c=Z):(typeof M.componentDidUpdate!="function"||j===e.memoizedProps&&le===e.memoizedState||(n.flags|=4),typeof M.getSnapshotBeforeUpdate!="function"||j===e.memoizedProps&&le===e.memoizedState||(n.flags|=1024),c=!1)}return Yu(e,n,o,c,E,y)}function Yu(e,n,o,c,y,E){ed(e,n);var M=(n.flags&128)!==0;if(!c&&!M)return y&&sf(n,o,!1),wr(e,n,E);c=n.stateNode,Q0.current=n;var j=M&&typeof o.getDerivedStateFromError!="function"?null:c.render();return n.flags|=1,e!==null&&M?(n.child=Ro(n,e.child,null,E),n.child=Ro(n,null,j,E)):Gt(e,n,j,E),n.memoizedState=c.state,y&&sf(n,o,!0),n.child}function nd(e){var n=e.stateNode;n.pendingContext?rf(e,n.pendingContext,n.pendingContext!==n.context):n.context&&rf(e,n.context,!1),Mu(e,n.containerInfo)}function rd(e,n,o,c,y){return Ao(),Iu(y),n.flags|=256,Gt(e,n,o,c),n.child}var Ju={dehydrated:null,treeContext:null,retryLane:0};function Zu(e){return{baseLanes:e,cachePool:null,transitions:null}}function id(e,n,o){var c=n.pendingProps,y=it.current,E=!1,M=(n.flags&128)!==0,j;if((j=M)||(j=e!==null&&e.memoizedState===null?!1:(y&2)!==0),j?(E=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(y|=1),Ke(it,y&1),e===null)return Cu(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(M=c.children,e=c.fallback,E?(c=n.mode,E=n.child,M={mode:"hidden",children:M},!(c&1)&&E!==null?(E.childLanes=0,E.pendingProps=M):E=cl(M,c,0,null),e=Ni(e,c,o,null),E.return=n,e.return=n,E.sibling=e,n.child=E,n.child.memoizedState=Zu(o),n.memoizedState=Ju,e):ec(n,M));if(y=e.memoizedState,y!==null&&(j=y.dehydrated,j!==null))return K0(e,n,M,c,j,y,o);if(E){E=c.fallback,M=n.mode,y=e.child,j=y.sibling;var H={mode:"hidden",children:c.children};return!(M&1)&&n.child!==y?(c=n.child,c.childLanes=0,c.pendingProps=H,n.deletions=null):(c=Kr(y,H),c.subtreeFlags=y.subtreeFlags&14680064),j!==null?E=Kr(j,E):(E=Ni(E,M,o,null),E.flags|=2),E.return=n,c.return=n,c.sibling=E,n.child=c,c=E,E=n.child,M=e.child.memoizedState,M=M===null?Zu(o):{baseLanes:M.baseLanes|o,cachePool:null,transitions:M.transitions},E.memoizedState=M,E.childLanes=e.childLanes&~o,n.memoizedState=Ju,c}return E=e.child,e=E.sibling,c=Kr(E,{mode:"visible",children:c.children}),!(n.mode&1)&&(c.lanes=o),c.return=n,c.sibling=null,e!==null&&(o=n.deletions,o===null?(n.deletions=[e],n.flags|=16):o.push(e)),n.child=c,n.memoizedState=null,c}function ec(e,n){return n=cl({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function Ya(e,n,o,c){return c!==null&&Iu(c),Ro(n,e.child,null,o),e=ec(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function K0(e,n,o,c,y,E,M){if(o)return n.flags&256?(n.flags&=-257,c=Qu(Error(r(422))),Ya(e,n,M,c)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(E=c.fallback,y=n.mode,c=cl({mode:"visible",children:c.children},y,0,null),E=Ni(E,y,M,null),E.flags|=2,c.return=n,E.return=n,c.sibling=E,n.child=c,n.mode&1&&Ro(n,e.child,null,M),n.child.memoizedState=Zu(M),n.memoizedState=Ju,E);if(!(n.mode&1))return Ya(e,n,M,null);if(y.data==="$!"){if(c=y.nextSibling&&y.nextSibling.dataset,c)var j=c.dgst;return c=j,E=Error(r(419)),c=Qu(E,c,void 0),Ya(e,n,M,c)}if(j=(M&e.childLanes)!==0,tn||j){if(c=At,c!==null){switch(M&-M){case 4:y=2;break;case 16:y=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:y=32;break;case 536870912:y=268435456;break;default:y=0}y=y&(c.suspendedLanes|M)?0:y,y!==0&&y!==E.retryLane&&(E.retryLane=y,_r(e,y),jn(c,e,y,-1))}return mc(),c=Qu(Error(r(421))),Ya(e,n,M,c)}return y.data==="$?"?(n.flags|=128,n.child=e.child,n=lm.bind(null,e),y._reactRetry=n,null):(e=E.treeContext,dn=Fr(y.nextSibling),fn=n,nt=!0,Fn=null,e!==null&&(Tn[Sn++]=mr,Tn[Sn++]=yr,Tn[Sn++]=Si,mr=e.id,yr=e.overflow,Si=n),n=ec(n,c.children),n.flags|=4096,n)}function od(e,n,o){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),Du(e.return,n,o)}function tc(e,n,o,c,y){var E=e.memoizedState;E===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:y}:(E.isBackwards=n,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=o,E.tailMode=y)}function sd(e,n,o){var c=n.pendingProps,y=c.revealOrder,E=c.tail;if(Gt(e,n,c.children,o),c=it.current,c&2)c=c&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&od(e,o,n);else if(e.tag===19)od(e,o,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}c&=1}if(Ke(it,c),!(n.mode&1))n.memoizedState=null;else switch(y){case"forwards":for(o=n.child,y=null;o!==null;)e=o.alternate,e!==null&&Ha(e)===null&&(y=o),o=o.sibling;o=y,o===null?(y=n.child,n.child=null):(y=o.sibling,o.sibling=null),tc(n,!1,y,o,E);break;case"backwards":for(o=null,y=n.child,n.child=null;y!==null;){if(e=y.alternate,e!==null&&Ha(e)===null){n.child=y;break}e=y.sibling,y.sibling=o,o=y,y=e}tc(n,!0,o,null,E);break;case"together":tc(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function Ja(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function wr(e,n,o){if(e!==null&&(n.dependencies=e.dependencies),xi|=n.lanes,!(o&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(r(153));if(n.child!==null){for(e=n.child,o=Kr(e,e.pendingProps),n.child=o,o.return=n;e.sibling!==null;)e=e.sibling,o=o.sibling=Kr(e,e.pendingProps),o.return=n;o.sibling=null}return n.child}function X0(e,n,o){switch(n.tag){case 3:nd(n),Ao();break;case 5:wf(n);break;case 1:en(n.type)&&Ma(n);break;case 4:Mu(n,n.stateNode.containerInfo);break;case 10:var c=n.type._context,y=n.memoizedProps.value;Ke(Ua,c._currentValue),c._currentValue=y;break;case 13:if(c=n.memoizedState,c!==null)return c.dehydrated!==null?(Ke(it,it.current&1),n.flags|=128,null):o&n.child.childLanes?id(e,n,o):(Ke(it,it.current&1),e=wr(e,n,o),e!==null?e.sibling:null);Ke(it,it.current&1);break;case 19:if(c=(o&n.childLanes)!==0,e.flags&128){if(c)return sd(e,n,o);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),Ke(it,it.current),c)break;return null;case 22:case 23:return n.lanes=0,Zf(e,n,o)}return wr(e,n,o)}var ad,nc,ld,ud;ad=function(e,n){for(var o=n.child;o!==null;){if(o.tag===5||o.tag===6)e.appendChild(o.stateNode);else if(o.tag!==4&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===n)break;for(;o.sibling===null;){if(o.return===null||o.return===n)return;o=o.return}o.sibling.return=o.return,o=o.sibling}},nc=function(){},ld=function(e,n,o,c){var y=e.memoizedProps;if(y!==c){e=n.stateNode,Ci(er.current);var E=null;switch(o){case"input":y=de(e,y),c=de(e,c),E=[];break;case"select":y=G({},y,{value:void 0}),c=G({},c,{value:void 0}),E=[];break;case"textarea":y=mn(e,y),c=mn(e,c),E=[];break;default:typeof y.onClick!="function"&&typeof c.onClick=="function"&&(e.onclick=Da)}Xo(o,c);var M;o=null;for(Z in y)if(!c.hasOwnProperty(Z)&&y.hasOwnProperty(Z)&&y[Z]!=null)if(Z==="style"){var j=y[Z];for(M in j)j.hasOwnProperty(M)&&(o||(o={}),o[M]="")}else Z!=="dangerouslySetInnerHTML"&&Z!=="children"&&Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&Z!=="autoFocus"&&(u.hasOwnProperty(Z)?E||(E=[]):(E=E||[]).push(Z,null));for(Z in c){var H=c[Z];if(j=y!=null?y[Z]:void 0,c.hasOwnProperty(Z)&&H!==j&&(H!=null||j!=null))if(Z==="style")if(j){for(M in j)!j.hasOwnProperty(M)||H&&H.hasOwnProperty(M)||(o||(o={}),o[M]="");for(M in H)H.hasOwnProperty(M)&&j[M]!==H[M]&&(o||(o={}),o[M]=H[M])}else o||(E||(E=[]),E.push(Z,o)),o=H;else Z==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,j=j?j.__html:void 0,H!=null&&j!==H&&(E=E||[]).push(Z,H)):Z==="children"?typeof H!="string"&&typeof H!="number"||(E=E||[]).push(Z,""+H):Z!=="suppressContentEditableWarning"&&Z!=="suppressHydrationWarning"&&(u.hasOwnProperty(Z)?(H!=null&&Z==="onScroll"&&Je("scroll",e),E||j===H||(E=[])):(E=E||[]).push(Z,H))}o&&(E=E||[]).push("style",o);var Z=E;(n.updateQueue=Z)&&(n.flags|=4)}},ud=function(e,n,o,c){o!==c&&(n.flags|=4)};function ks(e,n){if(!nt)switch(e.tailMode){case"hidden":n=e.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e.tail=null:o.sibling=null;break;case"collapsed":o=e.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function Ut(e){var n=e.alternate!==null&&e.alternate.child===e.child,o=0,c=0;if(n)for(var y=e.child;y!==null;)o|=y.lanes|y.childLanes,c|=y.subtreeFlags&14680064,c|=y.flags&14680064,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)o|=y.lanes|y.childLanes,c|=y.subtreeFlags,c|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=c,e.childLanes=o,n}function Y0(e,n,o){var c=n.pendingProps;switch(Au(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(n),null;case 1:return en(n.type)&&Oa(),Ut(n),null;case 3:return c=n.stateNode,xo(),Ze(Zt),Ze(Ft),bu(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(e===null||e.child===null)&&(Fa(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,Fn!==null&&(dc(Fn),Fn=null))),nc(e,n),Ut(n),null;case 5:Vu(n);var y=Ci(Rs.current);if(o=n.type,e!==null&&n.stateNode!=null)ld(e,n,o,c,y),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!c){if(n.stateNode===null)throw Error(r(166));return Ut(n),null}if(e=Ci(er.current),Fa(n)){c=n.stateNode,o=n.type;var E=n.memoizedProps;switch(c[Zn]=n,c[ws]=E,e=(n.mode&1)!==0,o){case"dialog":Je("cancel",c),Je("close",c);break;case"iframe":case"object":case"embed":Je("load",c);break;case"video":case"audio":for(y=0;y<ys.length;y++)Je(ys[y],c);break;case"source":Je("error",c);break;case"img":case"image":case"link":Je("error",c),Je("load",c);break;case"details":Je("toggle",c);break;case"input":Ie(c,E),Je("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!E.multiple},Je("invalid",c);break;case"textarea":yn(c,E),Je("invalid",c)}Xo(o,E),y=null;for(var M in E)if(E.hasOwnProperty(M)){var j=E[M];M==="children"?typeof j=="string"?c.textContent!==j&&(E.suppressHydrationWarning!==!0&&ka(c.textContent,j,e),y=["children",j]):typeof j=="number"&&c.textContent!==""+j&&(E.suppressHydrationWarning!==!0&&ka(c.textContent,j,e),y=["children",""+j]):u.hasOwnProperty(M)&&j!=null&&M==="onScroll"&&Je("scroll",c)}switch(o){case"input":Ee(c),et(c,E,!0);break;case"textarea":Ee(c),Cr(c);break;case"select":case"option":break;default:typeof E.onClick=="function"&&(c.onclick=Da)}c=y,n.updateQueue=c,c!==null&&(n.flags|=4)}else{M=y.nodeType===9?y:y.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yt(o)),e==="http://www.w3.org/1999/xhtml"?o==="script"?(e=M.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof c.is=="string"?e=M.createElement(o,{is:c.is}):(e=M.createElement(o),o==="select"&&(M=e,c.multiple?M.multiple=!0:c.size&&(M.size=c.size))):e=M.createElementNS(e,o),e[Zn]=n,e[ws]=c,ad(e,n,!1,!1),n.stateNode=e;e:{switch(M=Yo(o,c),o){case"dialog":Je("cancel",e),Je("close",e),y=c;break;case"iframe":case"object":case"embed":Je("load",e),y=c;break;case"video":case"audio":for(y=0;y<ys.length;y++)Je(ys[y],e);y=c;break;case"source":Je("error",e),y=c;break;case"img":case"image":case"link":Je("error",e),Je("load",e),y=c;break;case"details":Je("toggle",e),y=c;break;case"input":Ie(e,c),y=de(e,c),Je("invalid",e);break;case"option":y=c;break;case"select":e._wrapperState={wasMultiple:!!c.multiple},y=G({},c,{value:void 0}),Je("invalid",e);break;case"textarea":yn(e,c),y=mn(e,c),Je("invalid",e);break;default:y=c}Xo(o,y),j=y;for(E in j)if(j.hasOwnProperty(E)){var H=j[E];E==="style"?Qo(e,H):E==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&qo(e,H)):E==="children"?typeof H=="string"?(o!=="textarea"||H!=="")&&Ir(e,H):typeof H=="number"&&Ir(e,""+H):E!=="suppressContentEditableWarning"&&E!=="suppressHydrationWarning"&&E!=="autoFocus"&&(u.hasOwnProperty(E)?H!=null&&E==="onScroll"&&Je("scroll",e):H!=null&&I(e,E,H,M))}switch(o){case"input":Ee(e),et(e,c,!1);break;case"textarea":Ee(e),Cr(e);break;case"option":c.value!=null&&e.setAttribute("value",""+he(c.value));break;case"select":e.multiple=!!c.multiple,E=c.value,E!=null?bt(e,!!c.multiple,E,!1):c.defaultValue!=null&&bt(e,!!c.multiple,c.defaultValue,!0);break;default:typeof y.onClick=="function"&&(e.onclick=Da)}switch(o){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Ut(n),null;case 6:if(e&&n.stateNode!=null)ud(e,n,e.memoizedProps,c);else{if(typeof c!="string"&&n.stateNode===null)throw Error(r(166));if(o=Ci(Rs.current),Ci(er.current),Fa(n)){if(c=n.stateNode,o=n.memoizedProps,c[Zn]=n,(E=c.nodeValue!==o)&&(e=fn,e!==null))switch(e.tag){case 3:ka(c.nodeValue,o,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ka(c.nodeValue,o,(e.mode&1)!==0)}E&&(n.flags|=4)}else c=(o.nodeType===9?o:o.ownerDocument).createTextNode(c),c[Zn]=n,n.stateNode=c}return Ut(n),null;case 13:if(Ze(it),c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(nt&&dn!==null&&n.mode&1&&!(n.flags&128))ff(),Ao(),n.flags|=98560,E=!1;else if(E=Fa(n),c!==null&&c.dehydrated!==null){if(e===null){if(!E)throw Error(r(318));if(E=n.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Zn]=n}else Ao(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Ut(n),E=!1}else Fn!==null&&(dc(Fn),Fn=null),E=!0;if(!E)return n.flags&65536?n:null}return n.flags&128?(n.lanes=o,n):(c=c!==null,c!==(e!==null&&e.memoizedState!==null)&&c&&(n.child.flags|=8192,n.mode&1&&(e===null||it.current&1?Et===0&&(Et=3):mc())),n.updateQueue!==null&&(n.flags|=4),Ut(n),null);case 4:return xo(),nc(e,n),e===null&&_s(n.stateNode.containerInfo),Ut(n),null;case 10:return ku(n.type._context),Ut(n),null;case 17:return en(n.type)&&Oa(),Ut(n),null;case 19:if(Ze(it),E=n.memoizedState,E===null)return Ut(n),null;if(c=(n.flags&128)!==0,M=E.rendering,M===null)if(c)ks(E,!1);else{if(Et!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(M=Ha(e),M!==null){for(n.flags|=128,ks(E,!1),c=M.updateQueue,c!==null&&(n.updateQueue=c,n.flags|=4),n.subtreeFlags=0,c=o,o=n.child;o!==null;)E=o,e=c,E.flags&=14680066,M=E.alternate,M===null?(E.childLanes=0,E.lanes=e,E.child=null,E.subtreeFlags=0,E.memoizedProps=null,E.memoizedState=null,E.updateQueue=null,E.dependencies=null,E.stateNode=null):(E.childLanes=M.childLanes,E.lanes=M.lanes,E.child=M.child,E.subtreeFlags=0,E.deletions=null,E.memoizedProps=M.memoizedProps,E.memoizedState=M.memoizedState,E.updateQueue=M.updateQueue,E.type=M.type,e=M.dependencies,E.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),o=o.sibling;return Ke(it,it.current&1|2),n.child}e=e.sibling}E.tail!==null&&Qe()>No&&(n.flags|=128,c=!0,ks(E,!1),n.lanes=4194304)}else{if(!c)if(e=Ha(M),e!==null){if(n.flags|=128,c=!0,o=e.updateQueue,o!==null&&(n.updateQueue=o,n.flags|=4),ks(E,!0),E.tail===null&&E.tailMode==="hidden"&&!M.alternate&&!nt)return Ut(n),null}else 2*Qe()-E.renderingStartTime>No&&o!==1073741824&&(n.flags|=128,c=!0,ks(E,!1),n.lanes=4194304);E.isBackwards?(M.sibling=n.child,n.child=M):(o=E.last,o!==null?o.sibling=M:n.child=M,E.last=M)}return E.tail!==null?(n=E.tail,E.rendering=n,E.tail=n.sibling,E.renderingStartTime=Qe(),n.sibling=null,o=it.current,Ke(it,c?o&1|2:o&1),n):(Ut(n),null);case 22:case 23:return gc(),c=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==c&&(n.flags|=8192),c&&n.mode&1?pn&1073741824&&(Ut(n),n.subtreeFlags&6&&(n.flags|=8192)):Ut(n),null;case 24:return null;case 25:return null}throw Error(r(156,n.tag))}function J0(e,n){switch(Au(n),n.tag){case 1:return en(n.type)&&Oa(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return xo(),Ze(Zt),Ze(Ft),bu(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return Vu(n),null;case 13:if(Ze(it),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(r(340));Ao()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Ze(it),null;case 4:return xo(),null;case 10:return ku(n.type._context),null;case 22:case 23:return gc(),null;case 24:return null;default:return null}}var Za=!1,Bt=!1,Z0=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ko(e,n){var o=e.ref;if(o!==null)if(typeof o=="function")try{o(null)}catch(c){st(e,n,c)}else o.current=null}function rc(e,n,o){try{o()}catch(c){st(e,n,c)}}var cd=!1;function em(e,n){if(gu=Vr,e=Bh(),au(e)){if("selectionStart"in e)var o={start:e.selectionStart,end:e.selectionEnd};else e:{o=(o=e.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var y=c.anchorOffset,E=c.focusNode;c=c.focusOffset;try{o.nodeType,E.nodeType}catch{o=null;break e}var M=0,j=-1,H=-1,Z=0,ce=0,fe=e,le=null;t:for(;;){for(var we;fe!==o||y!==0&&fe.nodeType!==3||(j=M+y),fe!==E||c!==0&&fe.nodeType!==3||(H=M+c),fe.nodeType===3&&(M+=fe.nodeValue.length),(we=fe.firstChild)!==null;)le=fe,fe=we;for(;;){if(fe===e)break t;if(le===o&&++Z===y&&(j=M),le===E&&++ce===c&&(H=M),(we=fe.nextSibling)!==null)break;fe=le,le=fe.parentNode}fe=we}o=j===-1||H===-1?null:{start:j,end:H}}else o=null}o=o||{start:0,end:0}}else o=null;for(mu={focusedElem:e,selectionRange:o},Vr=!1,Te=n;Te!==null;)if(n=Te,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Te=e;else for(;Te!==null;){n=Te;try{var Se=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Ae=Se.memoizedProps,dt=Se.memoizedState,K=n.stateNode,W=K.getSnapshotBeforeUpdate(n.elementType===n.type?Ae:zn(n.type,Ae),dt);K.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=n.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ge){st(n,n.return,ge)}if(e=n.sibling,e!==null){e.return=n.return,Te=e;break}Te=n.return}return Se=cd,cd=!1,Se}function Ds(e,n,o){var c=n.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var y=c=c.next;do{if((y.tag&e)===e){var E=y.destroy;y.destroy=void 0,E!==void 0&&rc(n,o,E)}y=y.next}while(y!==c)}}function el(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var o=n=n.next;do{if((o.tag&e)===e){var c=o.create;o.destroy=c()}o=o.next}while(o!==n)}}function ic(e){var n=e.ref;if(n!==null){var o=e.stateNode;switch(e.tag){case 5:e=o;break;default:e=o}typeof n=="function"?n(e):n.current=e}}function hd(e){var n=e.alternate;n!==null&&(e.alternate=null,hd(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Zn],delete n[ws],delete n[wu],delete n[L0],delete n[b0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function fd(e){return e.tag===5||e.tag===3||e.tag===4}function dd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||fd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oc(e,n,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?o.nodeType===8?o.parentNode.insertBefore(e,n):o.insertBefore(e,n):(o.nodeType===8?(n=o.parentNode,n.insertBefore(e,o)):(n=o,n.appendChild(e)),o=o._reactRootContainer,o!=null||n.onclick!==null||(n.onclick=Da));else if(c!==4&&(e=e.child,e!==null))for(oc(e,n,o),e=e.sibling;e!==null;)oc(e,n,o),e=e.sibling}function sc(e,n,o){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?o.insertBefore(e,n):o.appendChild(e);else if(c!==4&&(e=e.child,e!==null))for(sc(e,n,o),e=e.sibling;e!==null;)sc(e,n,o),e=e.sibling}var Dt=null,Un=!1;function Hr(e,n,o){for(o=o.child;o!==null;)pd(e,n,o),o=o.sibling}function pd(e,n,o){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(pi,o)}catch{}switch(o.tag){case 5:Bt||ko(o,n);case 6:var c=Dt,y=Un;Dt=null,Hr(e,n,o),Dt=c,Un=y,Dt!==null&&(Un?(e=Dt,o=o.stateNode,e.nodeType===8?e.parentNode.removeChild(o):e.removeChild(o)):Dt.removeChild(o.stateNode));break;case 18:Dt!==null&&(Un?(e=Dt,o=o.stateNode,e.nodeType===8?vu(e.parentNode,o):e.nodeType===1&&vu(e,o),Vn(e)):vu(Dt,o.stateNode));break;case 4:c=Dt,y=Un,Dt=o.stateNode.containerInfo,Un=!0,Hr(e,n,o),Dt=c,Un=y;break;case 0:case 11:case 14:case 15:if(!Bt&&(c=o.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){y=c=c.next;do{var E=y,M=E.destroy;E=E.tag,M!==void 0&&(E&2||E&4)&&rc(o,n,M),y=y.next}while(y!==c)}Hr(e,n,o);break;case 1:if(!Bt&&(ko(o,n),c=o.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=o.memoizedProps,c.state=o.memoizedState,c.componentWillUnmount()}catch(j){st(o,n,j)}Hr(e,n,o);break;case 21:Hr(e,n,o);break;case 22:o.mode&1?(Bt=(c=Bt)||o.memoizedState!==null,Hr(e,n,o),Bt=c):Hr(e,n,o);break;default:Hr(e,n,o)}}function gd(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var o=e.stateNode;o===null&&(o=e.stateNode=new Z0),n.forEach(function(c){var y=um.bind(null,e,c);o.has(c)||(o.add(c),c.then(y,y))})}}function Bn(e,n){var o=n.deletions;if(o!==null)for(var c=0;c<o.length;c++){var y=o[c];try{var E=e,M=n,j=M;e:for(;j!==null;){switch(j.tag){case 5:Dt=j.stateNode,Un=!1;break e;case 3:Dt=j.stateNode.containerInfo,Un=!0;break e;case 4:Dt=j.stateNode.containerInfo,Un=!0;break e}j=j.return}if(Dt===null)throw Error(r(160));pd(E,M,y),Dt=null,Un=!1;var H=y.alternate;H!==null&&(H.return=null),y.return=null}catch(Z){st(y,n,Z)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)md(n,e),n=n.sibling}function md(e,n){var o=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bn(n,e),nr(e),c&4){try{Ds(3,e,e.return),el(3,e)}catch(Ae){st(e,e.return,Ae)}try{Ds(5,e,e.return)}catch(Ae){st(e,e.return,Ae)}}break;case 1:Bn(n,e),nr(e),c&512&&o!==null&&ko(o,o.return);break;case 5:if(Bn(n,e),nr(e),c&512&&o!==null&&ko(o,o.return),e.flags&32){var y=e.stateNode;try{Ir(y,"")}catch(Ae){st(e,e.return,Ae)}}if(c&4&&(y=e.stateNode,y!=null)){var E=e.memoizedProps,M=o!==null?o.memoizedProps:E,j=e.type,H=e.updateQueue;if(e.updateQueue=null,H!==null)try{j==="input"&&E.type==="radio"&&E.name!=null&&Ve(y,E),Yo(j,M);var Z=Yo(j,E);for(M=0;M<H.length;M+=2){var ce=H[M],fe=H[M+1];ce==="style"?Qo(y,fe):ce==="dangerouslySetInnerHTML"?qo(y,fe):ce==="children"?Ir(y,fe):I(y,ce,fe,Z)}switch(j){case"input":be(y,E);break;case"textarea":sr(y,E);break;case"select":var le=y._wrapperState.wasMultiple;y._wrapperState.wasMultiple=!!E.multiple;var we=E.value;we!=null?bt(y,!!E.multiple,we,!1):le!==!!E.multiple&&(E.defaultValue!=null?bt(y,!!E.multiple,E.defaultValue,!0):bt(y,!!E.multiple,E.multiple?[]:"",!1))}y[ws]=E}catch(Ae){st(e,e.return,Ae)}}break;case 6:if(Bn(n,e),nr(e),c&4){if(e.stateNode===null)throw Error(r(162));y=e.stateNode,E=e.memoizedProps;try{y.nodeValue=E}catch(Ae){st(e,e.return,Ae)}}break;case 3:if(Bn(n,e),nr(e),c&4&&o!==null&&o.memoizedState.isDehydrated)try{Vn(n.containerInfo)}catch(Ae){st(e,e.return,Ae)}break;case 4:Bn(n,e),nr(e);break;case 13:Bn(n,e),nr(e),y=e.child,y.flags&8192&&(E=y.memoizedState!==null,y.stateNode.isHidden=E,!E||y.alternate!==null&&y.alternate.memoizedState!==null||(uc=Qe())),c&4&&gd(e);break;case 22:if(ce=o!==null&&o.memoizedState!==null,e.mode&1?(Bt=(Z=Bt)||ce,Bn(n,e),Bt=Z):Bn(n,e),nr(e),c&8192){if(Z=e.memoizedState!==null,(e.stateNode.isHidden=Z)&&!ce&&e.mode&1)for(Te=e,ce=e.child;ce!==null;){for(fe=Te=ce;Te!==null;){switch(le=Te,we=le.child,le.tag){case 0:case 11:case 14:case 15:Ds(4,le,le.return);break;case 1:ko(le,le.return);var Se=le.stateNode;if(typeof Se.componentWillUnmount=="function"){c=le,o=le.return;try{n=c,Se.props=n.memoizedProps,Se.state=n.memoizedState,Se.componentWillUnmount()}catch(Ae){st(c,o,Ae)}}break;case 5:ko(le,le.return);break;case 22:if(le.memoizedState!==null){vd(fe);continue}}we!==null?(we.return=le,Te=we):vd(fe)}ce=ce.sibling}e:for(ce=null,fe=e;;){if(fe.tag===5){if(ce===null){ce=fe;try{y=fe.stateNode,Z?(E=y.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none"):(j=fe.stateNode,H=fe.memoizedProps.style,M=H!=null&&H.hasOwnProperty("display")?H.display:null,j.style.display=Go("display",M))}catch(Ae){st(e,e.return,Ae)}}}else if(fe.tag===6){if(ce===null)try{fe.stateNode.nodeValue=Z?"":fe.memoizedProps}catch(Ae){st(e,e.return,Ae)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===e)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===e)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===e)break e;ce===fe&&(ce=null),fe=fe.return}ce===fe&&(ce=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Bn(n,e),nr(e),c&4&&gd(e);break;case 21:break;default:Bn(n,e),nr(e)}}function nr(e){var n=e.flags;if(n&2){try{e:{for(var o=e.return;o!==null;){if(fd(o)){var c=o;break e}o=o.return}throw Error(r(160))}switch(c.tag){case 5:var y=c.stateNode;c.flags&32&&(Ir(y,""),c.flags&=-33);var E=dd(e);sc(e,E,y);break;case 3:case 4:var M=c.stateNode.containerInfo,j=dd(e);oc(e,j,M);break;default:throw Error(r(161))}}catch(H){st(e,e.return,H)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function tm(e,n,o){Te=e,yd(e)}function yd(e,n,o){for(var c=(e.mode&1)!==0;Te!==null;){var y=Te,E=y.child;if(y.tag===22&&c){var M=y.memoizedState!==null||Za;if(!M){var j=y.alternate,H=j!==null&&j.memoizedState!==null||Bt;j=Za;var Z=Bt;if(Za=M,(Bt=H)&&!Z)for(Te=y;Te!==null;)M=Te,H=M.child,M.tag===22&&M.memoizedState!==null?wd(y):H!==null?(H.return=M,Te=H):wd(y);for(;E!==null;)Te=E,yd(E),E=E.sibling;Te=y,Za=j,Bt=Z}_d(e)}else y.subtreeFlags&8772&&E!==null?(E.return=y,Te=E):_d(e)}}function _d(e){for(;Te!==null;){var n=Te;if(n.flags&8772){var o=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:Bt||el(5,n);break;case 1:var c=n.stateNode;if(n.flags&4&&!Bt)if(o===null)c.componentDidMount();else{var y=n.elementType===n.type?o.memoizedProps:zn(n.type,o.memoizedProps);c.componentDidUpdate(y,o.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var E=n.updateQueue;E!==null&&vf(n,E,c);break;case 3:var M=n.updateQueue;if(M!==null){if(o=null,n.child!==null)switch(n.child.tag){case 5:o=n.child.stateNode;break;case 1:o=n.child.stateNode}vf(n,M,o)}break;case 5:var j=n.stateNode;if(o===null&&n.flags&4){o=j;var H=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&o.focus();break;case"img":H.src&&(o.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var Z=n.alternate;if(Z!==null){var ce=Z.memoizedState;if(ce!==null){var fe=ce.dehydrated;fe!==null&&Vn(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Bt||n.flags&512&&ic(n)}catch(le){st(n,n.return,le)}}if(n===e){Te=null;break}if(o=n.sibling,o!==null){o.return=n.return,Te=o;break}Te=n.return}}function vd(e){for(;Te!==null;){var n=Te;if(n===e){Te=null;break}var o=n.sibling;if(o!==null){o.return=n.return,Te=o;break}Te=n.return}}function wd(e){for(;Te!==null;){var n=Te;try{switch(n.tag){case 0:case 11:case 15:var o=n.return;try{el(4,n)}catch(H){st(n,o,H)}break;case 1:var c=n.stateNode;if(typeof c.componentDidMount=="function"){var y=n.return;try{c.componentDidMount()}catch(H){st(n,y,H)}}var E=n.return;try{ic(n)}catch(H){st(n,E,H)}break;case 5:var M=n.return;try{ic(n)}catch(H){st(n,M,H)}}}catch(H){st(n,n.return,H)}if(n===e){Te=null;break}var j=n.sibling;if(j!==null){j.return=n.return,Te=j;break}Te=n.return}}var nm=Math.ceil,tl=P.ReactCurrentDispatcher,ac=P.ReactCurrentOwner,Cn=P.ReactCurrentBatchConfig,$e=0,At=null,gt=null,Nt=0,pn=0,Do=zr(0),Et=0,Ns=null,xi=0,nl=0,lc=0,Os=null,nn=null,uc=0,No=1/0,Er=null,rl=!1,cc=null,Wr=null,il=!1,qr=null,ol=0,Ms=0,hc=null,sl=-1,al=0;function Qt(){return $e&6?Qe():sl!==-1?sl:sl=Qe()}function Gr(e){return e.mode&1?$e&2&&Nt!==0?Nt&-Nt:z0.transition!==null?(al===0&&(al=mi()),al):(e=ze,e!==0||(e=window.event,e=e===void 0?16:ls(e.type)),e):1}function jn(e,n,o,c){if(50<Ms)throw Ms=0,hc=null,Error(r(185));Dr(e,o,c),(!($e&2)||e!==At)&&(e===At&&(!($e&2)&&(nl|=o),Et===4&&Qr(e,Nt)),rn(e,c),o===1&&$e===0&&!(n.mode&1)&&(No=Qe()+500,Va&&Br()))}function rn(e,n){var o=e.callbackNode;ur(e,n);var c=gi(e,e===At?Nt:0);if(c===0)o!==null&&rs(o),e.callbackNode=null,e.callbackPriority=0;else if(n=c&-c,e.callbackPriority!==n){if(o!=null&&rs(o),n===1)e.tag===0?F0(Td.bind(null,e)):af(Td.bind(null,e)),M0(function(){!($e&6)&&Br()}),o=null;else{switch(Or(c)){case 1:o=di;break;case 4:o=xr;break;case 16:o=vn;break;case 536870912:o=aa;break;default:o=vn}o=kd(o,Ed.bind(null,e))}e.callbackPriority=n,e.callbackNode=o}}function Ed(e,n){if(sl=-1,al=0,$e&6)throw Error(r(327));var o=e.callbackNode;if(Oo()&&e.callbackNode!==o)return null;var c=gi(e,e===At?Nt:0);if(c===0)return null;if(c&30||c&e.expiredLanes||n)n=ll(e,c);else{n=c;var y=$e;$e|=2;var E=Ad();(At!==e||Nt!==n)&&(Er=null,No=Qe()+500,ki(e,n));do try{om();break}catch(j){Sd(e,j)}while(!0);Pu(),tl.current=E,$e=y,gt!==null?n=0:(At=null,Nt=0,n=Et)}if(n!==0){if(n===2&&(y=un(e),y!==0&&(c=y,n=fc(e,y))),n===1)throw o=Ns,ki(e,0),Qr(e,c),rn(e,Qe()),o;if(n===6)Qr(e,c);else{if(y=e.current.alternate,!(c&30)&&!rm(y)&&(n=ll(e,c),n===2&&(E=un(e),E!==0&&(c=E,n=fc(e,E))),n===1))throw o=Ns,ki(e,0),Qr(e,c),rn(e,Qe()),o;switch(e.finishedWork=y,e.finishedLanes=c,n){case 0:case 1:throw Error(r(345));case 2:Di(e,nn,Er);break;case 3:if(Qr(e,c),(c&130023424)===c&&(n=uc+500-Qe(),10<n)){if(gi(e,0)!==0)break;if(y=e.suspendedLanes,(y&c)!==c){Qt(),e.pingedLanes|=e.suspendedLanes&y;break}e.timeoutHandle=_u(Di.bind(null,e,nn,Er),n);break}Di(e,nn,Er);break;case 4:if(Qr(e,c),(c&4194240)===c)break;for(n=e.eventTimes,y=-1;0<c;){var M=31-Wt(c);E=1<<M,M=n[M],M>y&&(y=M),c&=~E}if(c=y,c=Qe()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*nm(c/1960))-c,10<c){e.timeoutHandle=_u(Di.bind(null,e,nn,Er),c);break}Di(e,nn,Er);break;case 5:Di(e,nn,Er);break;default:throw Error(r(329))}}}return rn(e,Qe()),e.callbackNode===o?Ed.bind(null,e):null}function fc(e,n){var o=Os;return e.current.memoizedState.isDehydrated&&(ki(e,n).flags|=256),e=ll(e,n),e!==2&&(n=nn,nn=o,n!==null&&dc(n)),e}function dc(e){nn===null?nn=e:nn.push.apply(nn,e)}function rm(e){for(var n=e;;){if(n.flags&16384){var o=n.updateQueue;if(o!==null&&(o=o.stores,o!==null))for(var c=0;c<o.length;c++){var y=o[c],E=y.getSnapshot;y=y.value;try{if(!bn(E(),y))return!1}catch{return!1}}}if(o=n.child,n.subtreeFlags&16384&&o!==null)o.return=n,n=o;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Qr(e,n){for(n&=~lc,n&=~nl,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var o=31-Wt(n),c=1<<o;e[o]=-1,n&=~c}}function Td(e){if($e&6)throw Error(r(327));Oo();var n=gi(e,0);if(!(n&1))return rn(e,Qe()),null;var o=ll(e,n);if(e.tag!==0&&o===2){var c=un(e);c!==0&&(n=c,o=fc(e,c))}if(o===1)throw o=Ns,ki(e,0),Qr(e,n),rn(e,Qe()),o;if(o===6)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,Di(e,nn,Er),rn(e,Qe()),null}function pc(e,n){var o=$e;$e|=1;try{return e(n)}finally{$e=o,$e===0&&(No=Qe()+500,Va&&Br())}}function Pi(e){qr!==null&&qr.tag===0&&!($e&6)&&Oo();var n=$e;$e|=1;var o=Cn.transition,c=ze;try{if(Cn.transition=null,ze=1,e)return e()}finally{ze=c,Cn.transition=o,$e=n,!($e&6)&&Br()}}function gc(){pn=Do.current,Ze(Do)}function ki(e,n){e.finishedWork=null,e.finishedLanes=0;var o=e.timeoutHandle;if(o!==-1&&(e.timeoutHandle=-1,O0(o)),gt!==null)for(o=gt.return;o!==null;){var c=o;switch(Au(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Oa();break;case 3:xo(),Ze(Zt),Ze(Ft),bu();break;case 5:Vu(c);break;case 4:xo();break;case 13:Ze(it);break;case 19:Ze(it);break;case 10:ku(c.type._context);break;case 22:case 23:gc()}o=o.return}if(At=e,gt=e=Kr(e.current,null),Nt=pn=n,Et=0,Ns=null,lc=nl=xi=0,nn=Os=null,Ri!==null){for(n=0;n<Ri.length;n++)if(o=Ri[n],c=o.interleaved,c!==null){o.interleaved=null;var y=c.next,E=o.pending;if(E!==null){var M=E.next;E.next=y,c.next=M}o.pending=c}Ri=null}return e}function Sd(e,n){do{var o=gt;try{if(Pu(),Wa.current=Ka,qa){for(var c=ot.memoizedState;c!==null;){var y=c.queue;y!==null&&(y.pending=null),c=c.next}qa=!1}if(Ii=0,St=wt=ot=null,Cs=!1,Is=0,ac.current=null,o===null||o.return===null){Et=1,Ns=n,gt=null;break}e:{var E=e,M=o.return,j=o,H=n;if(n=Nt,j.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var Z=H,ce=j,fe=ce.tag;if(!(ce.mode&1)&&(fe===0||fe===11||fe===15)){var le=ce.alternate;le?(ce.updateQueue=le.updateQueue,ce.memoizedState=le.memoizedState,ce.lanes=le.lanes):(ce.updateQueue=null,ce.memoizedState=null)}var we=Qf(M);if(we!==null){we.flags&=-257,Kf(we,M,j,E,n),we.mode&1&&Gf(E,Z,n),n=we,H=Z;var Se=n.updateQueue;if(Se===null){var Ae=new Set;Ae.add(H),n.updateQueue=Ae}else Se.add(H);break e}else{if(!(n&1)){Gf(E,Z,n),mc();break e}H=Error(r(426))}}else if(nt&&j.mode&1){var dt=Qf(M);if(dt!==null){!(dt.flags&65536)&&(dt.flags|=256),Kf(dt,M,j,E,n),Iu(Po(H,j));break e}}E=H=Po(H,j),Et!==4&&(Et=2),Os===null?Os=[E]:Os.push(E),E=M;do{switch(E.tag){case 3:E.flags|=65536,n&=-n,E.lanes|=n;var K=Wf(E,H,n);_f(E,K);break e;case 1:j=H;var W=E.type,Y=E.stateNode;if(!(E.flags&128)&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Wr===null||!Wr.has(Y)))){E.flags|=65536,n&=-n,E.lanes|=n;var ge=qf(E,j,n);_f(E,ge);break e}}E=E.return}while(E!==null)}Cd(o)}catch(Ce){n=Ce,gt===o&&o!==null&&(gt=o=o.return);continue}break}while(!0)}function Ad(){var e=tl.current;return tl.current=Ka,e===null?Ka:e}function mc(){(Et===0||Et===3||Et===2)&&(Et=4),At===null||!(xi&268435455)&&!(nl&268435455)||Qr(At,Nt)}function ll(e,n){var o=$e;$e|=2;var c=Ad();(At!==e||Nt!==n)&&(Er=null,ki(e,n));do try{im();break}catch(y){Sd(e,y)}while(!0);if(Pu(),$e=o,tl.current=c,gt!==null)throw Error(r(261));return At=null,Nt=0,Et}function im(){for(;gt!==null;)Rd(gt)}function om(){for(;gt!==null&&!oa();)Rd(gt)}function Rd(e){var n=Pd(e.alternate,e,pn);e.memoizedProps=e.pendingProps,n===null?Cd(e):gt=n,ac.current=null}function Cd(e){var n=e;do{var o=n.alternate;if(e=n.return,n.flags&32768){if(o=J0(o,n),o!==null){o.flags&=32767,gt=o;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Et=6,gt=null;return}}else if(o=Y0(o,n,pn),o!==null){gt=o;return}if(n=n.sibling,n!==null){gt=n;return}gt=n=e}while(n!==null);Et===0&&(Et=5)}function Di(e,n,o){var c=ze,y=Cn.transition;try{Cn.transition=null,ze=1,sm(e,n,o,c)}finally{Cn.transition=y,ze=c}return null}function sm(e,n,o,c){do Oo();while(qr!==null);if($e&6)throw Error(r(327));o=e.finishedWork;var y=e.finishedLanes;if(o===null)return null;if(e.finishedWork=null,e.finishedLanes=0,o===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var E=o.lanes|o.childLanes;if(Ge(e,E),e===At&&(gt=At=null,Nt=0),!(o.subtreeFlags&2064)&&!(o.flags&2064)||il||(il=!0,kd(vn,function(){return Oo(),null})),E=(o.flags&15990)!==0,o.subtreeFlags&15990||E){E=Cn.transition,Cn.transition=null;var M=ze;ze=1;var j=$e;$e|=4,ac.current=null,em(e,o),md(o,e),C0(mu),Vr=!!gu,mu=gu=null,e.current=o,tm(o),Zl(),$e=j,ze=M,Cn.transition=E}else e.current=o;if(il&&(il=!1,qr=e,ol=y),E=e.pendingLanes,E===0&&(Wr=null),la(o.stateNode),rn(e,Qe()),n!==null)for(c=e.onRecoverableError,o=0;o<n.length;o++)y=n[o],c(y.value,{componentStack:y.stack,digest:y.digest});if(rl)throw rl=!1,e=cc,cc=null,e;return ol&1&&e.tag!==0&&Oo(),E=e.pendingLanes,E&1?e===hc?Ms++:(Ms=0,hc=e):Ms=0,Br(),null}function Oo(){if(qr!==null){var e=Or(ol),n=Cn.transition,o=ze;try{if(Cn.transition=null,ze=16>e?16:e,qr===null)var c=!1;else{if(e=qr,qr=null,ol=0,$e&6)throw Error(r(331));var y=$e;for($e|=4,Te=e.current;Te!==null;){var E=Te,M=E.child;if(Te.flags&16){var j=E.deletions;if(j!==null){for(var H=0;H<j.length;H++){var Z=j[H];for(Te=Z;Te!==null;){var ce=Te;switch(ce.tag){case 0:case 11:case 15:Ds(8,ce,E)}var fe=ce.child;if(fe!==null)fe.return=ce,Te=fe;else for(;Te!==null;){ce=Te;var le=ce.sibling,we=ce.return;if(hd(ce),ce===Z){Te=null;break}if(le!==null){le.return=we,Te=le;break}Te=we}}}var Se=E.alternate;if(Se!==null){var Ae=Se.child;if(Ae!==null){Se.child=null;do{var dt=Ae.sibling;Ae.sibling=null,Ae=dt}while(Ae!==null)}}Te=E}}if(E.subtreeFlags&2064&&M!==null)M.return=E,Te=M;else e:for(;Te!==null;){if(E=Te,E.flags&2048)switch(E.tag){case 0:case 11:case 15:Ds(9,E,E.return)}var K=E.sibling;if(K!==null){K.return=E.return,Te=K;break e}Te=E.return}}var W=e.current;for(Te=W;Te!==null;){M=Te;var Y=M.child;if(M.subtreeFlags&2064&&Y!==null)Y.return=M,Te=Y;else e:for(M=W;Te!==null;){if(j=Te,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:el(9,j)}}catch(Ce){st(j,j.return,Ce)}if(j===M){Te=null;break e}var ge=j.sibling;if(ge!==null){ge.return=j.return,Te=ge;break e}Te=j.return}}if($e=y,Br(),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(pi,e)}catch{}c=!0}return c}finally{ze=o,Cn.transition=n}}return!1}function Id(e,n,o){n=Po(o,n),n=Wf(e,n,1),e=$r(e,n,1),n=Qt(),e!==null&&(Dr(e,1,n),rn(e,n))}function st(e,n,o){if(e.tag===3)Id(e,e,o);else for(;n!==null;){if(n.tag===3){Id(n,e,o);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Wr===null||!Wr.has(c))){e=Po(o,e),e=qf(n,e,1),n=$r(n,e,1),e=Qt(),n!==null&&(Dr(n,1,e),rn(n,e));break}}n=n.return}}function am(e,n,o){var c=e.pingCache;c!==null&&c.delete(n),n=Qt(),e.pingedLanes|=e.suspendedLanes&o,At===e&&(Nt&o)===o&&(Et===4||Et===3&&(Nt&130023424)===Nt&&500>Qe()-uc?ki(e,0):lc|=o),rn(e,n)}function xd(e,n){n===0&&(e.mode&1?(n=to,to<<=1,!(to&130023424)&&(to=4194304)):n=1);var o=Qt();e=_r(e,n),e!==null&&(Dr(e,n,o),rn(e,o))}function lm(e){var n=e.memoizedState,o=0;n!==null&&(o=n.retryLane),xd(e,o)}function um(e,n){var o=0;switch(e.tag){case 13:var c=e.stateNode,y=e.memoizedState;y!==null&&(o=y.retryLane);break;case 19:c=e.stateNode;break;default:throw Error(r(314))}c!==null&&c.delete(n),xd(e,o)}var Pd;Pd=function(e,n,o){if(e!==null)if(e.memoizedProps!==n.pendingProps||Zt.current)tn=!0;else{if(!(e.lanes&o)&&!(n.flags&128))return tn=!1,X0(e,n,o);tn=!!(e.flags&131072)}else tn=!1,nt&&n.flags&1048576&&lf(n,ba,n.index);switch(n.lanes=0,n.tag){case 2:var c=n.type;Ja(e,n),e=n.pendingProps;var y=Eo(n,Ft.current);Io(n,o),y=Uu(null,n,c,e,y,o);var E=Bu();return n.flags|=1,typeof y=="object"&&y!==null&&typeof y.render=="function"&&y.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,en(c)?(E=!0,Ma(n)):E=!1,n.memoizedState=y.state!==null&&y.state!==void 0?y.state:null,Ou(n),y.updater=Xa,n.stateNode=y,y._reactInternals=n,Gu(n,c,e,o),n=Yu(null,n,c,!0,E,o)):(n.tag=0,nt&&E&&Su(n),Gt(null,n,y,o),n=n.child),n;case 16:c=n.elementType;e:{switch(Ja(e,n),e=n.pendingProps,y=c._init,c=y(c._payload),n.type=c,y=n.tag=hm(c),e=zn(c,e),y){case 0:n=Xu(null,n,c,e,o);break e;case 1:n=td(null,n,c,e,o);break e;case 11:n=Xf(null,n,c,e,o);break e;case 14:n=Yf(null,n,c,zn(c.type,e),o);break e}throw Error(r(306,c,""))}return n;case 0:return c=n.type,y=n.pendingProps,y=n.elementType===c?y:zn(c,y),Xu(e,n,c,y,o);case 1:return c=n.type,y=n.pendingProps,y=n.elementType===c?y:zn(c,y),td(e,n,c,y,o);case 3:e:{if(nd(n),e===null)throw Error(r(387));c=n.pendingProps,E=n.memoizedState,y=E.element,yf(e,n),$a(n,c,null,o);var M=n.memoizedState;if(c=M.element,E.isDehydrated)if(E={element:c,isDehydrated:!1,cache:M.cache,pendingSuspenseBoundaries:M.pendingSuspenseBoundaries,transitions:M.transitions},n.updateQueue.baseState=E,n.memoizedState=E,n.flags&256){y=Po(Error(r(423)),n),n=rd(e,n,c,o,y);break e}else if(c!==y){y=Po(Error(r(424)),n),n=rd(e,n,c,o,y);break e}else for(dn=Fr(n.stateNode.containerInfo.firstChild),fn=n,nt=!0,Fn=null,o=gf(n,null,c,o),n.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Ao(),c===y){n=wr(e,n,o);break e}Gt(e,n,c,o)}n=n.child}return n;case 5:return wf(n),e===null&&Cu(n),c=n.type,y=n.pendingProps,E=e!==null?e.memoizedProps:null,M=y.children,yu(c,y)?M=null:E!==null&&yu(c,E)&&(n.flags|=32),ed(e,n),Gt(e,n,M,o),n.child;case 6:return e===null&&Cu(n),null;case 13:return id(e,n,o);case 4:return Mu(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=Ro(n,null,c,o):Gt(e,n,c,o),n.child;case 11:return c=n.type,y=n.pendingProps,y=n.elementType===c?y:zn(c,y),Xf(e,n,c,y,o);case 7:return Gt(e,n,n.pendingProps,o),n.child;case 8:return Gt(e,n,n.pendingProps.children,o),n.child;case 12:return Gt(e,n,n.pendingProps.children,o),n.child;case 10:e:{if(c=n.type._context,y=n.pendingProps,E=n.memoizedProps,M=y.value,Ke(Ua,c._currentValue),c._currentValue=M,E!==null)if(bn(E.value,M)){if(E.children===y.children&&!Zt.current){n=wr(e,n,o);break e}}else for(E=n.child,E!==null&&(E.return=n);E!==null;){var j=E.dependencies;if(j!==null){M=E.child;for(var H=j.firstContext;H!==null;){if(H.context===c){if(E.tag===1){H=vr(-1,o&-o),H.tag=2;var Z=E.updateQueue;if(Z!==null){Z=Z.shared;var ce=Z.pending;ce===null?H.next=H:(H.next=ce.next,ce.next=H),Z.pending=H}}E.lanes|=o,H=E.alternate,H!==null&&(H.lanes|=o),Du(E.return,o,n),j.lanes|=o;break}H=H.next}}else if(E.tag===10)M=E.type===n.type?null:E.child;else if(E.tag===18){if(M=E.return,M===null)throw Error(r(341));M.lanes|=o,j=M.alternate,j!==null&&(j.lanes|=o),Du(M,o,n),M=E.sibling}else M=E.child;if(M!==null)M.return=E;else for(M=E;M!==null;){if(M===n){M=null;break}if(E=M.sibling,E!==null){E.return=M.return,M=E;break}M=M.return}E=M}Gt(e,n,y.children,o),n=n.child}return n;case 9:return y=n.type,c=n.pendingProps.children,Io(n,o),y=An(y),c=c(y),n.flags|=1,Gt(e,n,c,o),n.child;case 14:return c=n.type,y=zn(c,n.pendingProps),y=zn(c.type,y),Yf(e,n,c,y,o);case 15:return Jf(e,n,n.type,n.pendingProps,o);case 17:return c=n.type,y=n.pendingProps,y=n.elementType===c?y:zn(c,y),Ja(e,n),n.tag=1,en(c)?(e=!0,Ma(n)):e=!1,Io(n,o),$f(n,c,y),Gu(n,c,y,o),Yu(null,n,c,!0,e,o);case 19:return sd(e,n,o);case 22:return Zf(e,n,o)}throw Error(r(156,n.tag))};function kd(e,n){return Zi(e,n)}function cm(e,n,o,c){this.tag=e,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(e,n,o,c){return new cm(e,n,o,c)}function yc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function hm(e){if(typeof e=="function")return yc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===b)return 11;if(e===ee)return 14}return 2}function Kr(e,n){var o=e.alternate;return o===null?(o=In(e.tag,n,e.key,e.mode),o.elementType=e.elementType,o.type=e.type,o.stateNode=e.stateNode,o.alternate=e,e.alternate=o):(o.pendingProps=n,o.type=e.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=e.flags&14680064,o.childLanes=e.childLanes,o.lanes=e.lanes,o.child=e.child,o.memoizedProps=e.memoizedProps,o.memoizedState=e.memoizedState,o.updateQueue=e.updateQueue,n=e.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},o.sibling=e.sibling,o.index=e.index,o.ref=e.ref,o}function ul(e,n,o,c,y,E){var M=2;if(c=e,typeof e=="function")yc(e)&&(M=1);else if(typeof e=="string")M=5;else e:switch(e){case R:return Ni(o.children,y,E,n);case T:M=8,y|=8;break;case C:return e=In(12,o,n,y|2),e.elementType=C,e.lanes=E,e;case V:return e=In(13,o,n,y),e.elementType=V,e.lanes=E,e;case $:return e=In(19,o,n,y),e.elementType=$,e.lanes=E,e;case oe:return cl(o,y,E,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case k:M=10;break e;case O:M=9;break e;case b:M=11;break e;case ee:M=14;break e;case X:M=16,c=null;break e}throw Error(r(130,e==null?e:typeof e,""))}return n=In(M,o,n,y),n.elementType=e,n.type=c,n.lanes=E,n}function Ni(e,n,o,c){return e=In(7,e,c,n),e.lanes=o,e}function cl(e,n,o,c){return e=In(22,e,c,n),e.elementType=oe,e.lanes=o,e.stateNode={isHidden:!1},e}function _c(e,n,o){return e=In(6,e,null,n),e.lanes=o,e}function vc(e,n,o){return n=In(4,e.children!==null?e.children:[],e.key,n),n.lanes=o,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function fm(e,n,o,c,y){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kr(0),this.expirationTimes=kr(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kr(0),this.identifierPrefix=c,this.onRecoverableError=y,this.mutableSourceEagerHydrationData=null}function wc(e,n,o,c,y,E,M,j,H){return e=new fm(e,n,o,j,H),n===1?(n=1,E===!0&&(n|=8)):n=0,E=In(3,null,null,n),e.current=E,E.stateNode=e,E.memoizedState={element:c,isDehydrated:o,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ou(E),e}function dm(e,n,o){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:c==null?null:""+c,children:e,containerInfo:n,implementation:o}}function Dd(e){if(!e)return Ur;e=e._reactInternals;e:{if(kn(e)!==e||e.tag!==1)throw Error(r(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(en(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(r(171))}if(e.tag===1){var o=e.type;if(en(o))return of(e,o,n)}return n}function Nd(e,n,o,c,y,E,M,j,H){return e=wc(o,c,!0,e,y,E,M,j,H),e.context=Dd(null),o=e.current,c=Qt(),y=Gr(o),E=vr(c,y),E.callback=n??null,$r(o,E,y),e.current.lanes=y,Dr(e,y,c),rn(e,c),e}function hl(e,n,o,c){var y=n.current,E=Qt(),M=Gr(y);return o=Dd(o),n.context===null?n.context=o:n.pendingContext=o,n=vr(E,M),n.payload={element:e},c=c===void 0?null:c,c!==null&&(n.callback=c),e=$r(y,n,M),e!==null&&(jn(e,y,M,E),ja(e,y,M)),M}function fl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Od(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var o=e.retryLane;e.retryLane=o!==0&&o<n?o:n}}function Ec(e,n){Od(e,n),(e=e.alternate)&&Od(e,n)}function pm(){return null}var Md=typeof reportError=="function"?reportError:function(e){console.error(e)};function Tc(e){this._internalRoot=e}dl.prototype.render=Tc.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(r(409));hl(e,n,null,null)},dl.prototype.unmount=Tc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;Pi(function(){hl(null,e,null,null)}),n[pr]=null}};function dl(e){this._internalRoot=e}dl.prototype.unstable_scheduleHydration=function(e){if(e){var n=da();e={blockedOn:null,target:e,priority:n};for(var o=0;o<Kn.length&&n!==0&&n<Kn[o].priority;o++);Kn.splice(o,0,e),o===0&&ma(e)}};function Sc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function pl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Vd(){}function gm(e,n,o,c,y){if(y){if(typeof c=="function"){var E=c;c=function(){var Z=fl(M);E.call(Z)}}var M=Nd(n,c,e,0,null,!1,!1,"",Vd);return e._reactRootContainer=M,e[pr]=M.current,_s(e.nodeType===8?e.parentNode:e),Pi(),M}for(;y=e.lastChild;)e.removeChild(y);if(typeof c=="function"){var j=c;c=function(){var Z=fl(H);j.call(Z)}}var H=wc(e,0,!1,null,null,!1,!1,"",Vd);return e._reactRootContainer=H,e[pr]=H.current,_s(e.nodeType===8?e.parentNode:e),Pi(function(){hl(n,H,o,c)}),H}function gl(e,n,o,c,y){var E=o._reactRootContainer;if(E){var M=E;if(typeof y=="function"){var j=y;y=function(){var H=fl(M);j.call(H)}}hl(n,M,e,y)}else M=gm(o,n,e,y,c);return fl(M)}ha=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var o=Pr(n.pendingLanes);o!==0&&(Nr(n,o|1),rn(n,Qe()),!($e&6)&&(No=Qe()+500,Br()))}break;case 13:Pi(function(){var c=_r(e,1);if(c!==null){var y=Qt();jn(c,e,1,y)}}),Ec(e,1)}},no=function(e){if(e.tag===13){var n=_r(e,134217728);if(n!==null){var o=Qt();jn(n,e,134217728,o)}Ec(e,134217728)}},fa=function(e){if(e.tag===13){var n=Gr(e),o=_r(e,n);if(o!==null){var c=Qt();jn(o,e,n,c)}Ec(e,n)}},da=function(){return ze},pa=function(e,n){var o=ze;try{return ze=e,n()}finally{ze=o}},Gi=function(e,n,o){switch(n){case"input":if(be(e,o),n=o.name,o.type==="radio"&&n!=null){for(o=e;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<o.length;n++){var c=o[n];if(c!==e&&c.form===e.form){var y=Na(c);if(!y)throw Error(r(90));xe(c),be(c,y)}}}break;case"textarea":sr(e,o);break;case"select":n=o.value,n!=null&&bt(e,!!o.multiple,n,!1)}},ui=pc,Zo=Pi;var mm={usingClientEntryPoint:!1,Events:[Es,vo,Na,Gn,Jo,pc]},Vs={findFiberByHostInstance:Ei,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ym={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ns(e),e===null?null:e.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||pm,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{pi=ml.inject(ym),ln=ml}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mm,on.createPortal=function(e,n){var o=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Sc(n))throw Error(r(200));return dm(e,n,null,o)},on.createRoot=function(e,n){if(!Sc(e))throw Error(r(299));var o=!1,c="",y=Md;return n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onRecoverableError!==void 0&&(y=n.onRecoverableError)),n=wc(e,1,!1,null,null,o,!1,c,y),e[pr]=n.current,_s(e.nodeType===8?e.parentNode:e),new Tc(n)},on.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=ns(n),e=e===null?null:e.stateNode,e},on.flushSync=function(e){return Pi(e)},on.hydrate=function(e,n,o){if(!pl(n))throw Error(r(200));return gl(null,e,n,!0,o)},on.hydrateRoot=function(e,n,o){if(!Sc(e))throw Error(r(405));var c=o!=null&&o.hydratedSources||null,y=!1,E="",M=Md;if(o!=null&&(o.unstable_strictMode===!0&&(y=!0),o.identifierPrefix!==void 0&&(E=o.identifierPrefix),o.onRecoverableError!==void 0&&(M=o.onRecoverableError)),n=Nd(n,null,e,1,o??null,y,!1,E,M),e[pr]=n.current,_s(e),c)for(e=0;e<c.length;e++)o=c[e],y=o._getVersion,y=y(o._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[o,y]:n.mutableSourceEagerHydrationData.push(o,y);return new dl(n)},on.render=function(e,n,o){if(!pl(n))throw Error(r(200));return gl(null,e,n,!1,o)},on.unmountComponentAtNode=function(e){if(!pl(e))throw Error(r(40));return e._reactRootContainer?(Pi(function(){gl(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0):!1},on.unstable_batchedUpdates=pc,on.unstable_renderSubtreeIntoContainer=function(e,n,o,c){if(!pl(o))throw Error(r(200));if(e==null||e._reactInternals===void 0)throw Error(r(38));return gl(e,n,o,!1,c)},on.version="18.3.1-next-f1338f8080-20240426",on}var $d;function Cm(){if($d)return Cc.exports;$d=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(t){console.error(t)}}return i(),Cc.exports=Rm(),Cc.exports}var Hd;function Im(){if(Hd)return yl;Hd=1;var i=Cm();return yl.createRoot=i.createRoot,yl.hydrateRoot=i.hydrateRoot,yl}var xm=Im(),Wd={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fp=function(i){const t=[];let r=0;for(let s=0;s<i.length;s++){let u=i.charCodeAt(s);u<128?t[r++]=u:u<2048?(t[r++]=u>>6|192,t[r++]=u&63|128):(u&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(u=65536+((u&1023)<<10)+(i.charCodeAt(++s)&1023),t[r++]=u>>18|240,t[r++]=u>>12&63|128,t[r++]=u>>6&63|128,t[r++]=u&63|128):(t[r++]=u>>12|224,t[r++]=u>>6&63|128,t[r++]=u&63|128)}return t},Pm=function(i){const t=[];let r=0,s=0;for(;r<i.length;){const u=i[r++];if(u<128)t[s++]=String.fromCharCode(u);else if(u>191&&u<224){const g=i[r++];t[s++]=String.fromCharCode((u&31)<<6|g&63)}else if(u>239&&u<365){const g=i[r++],A=i[r++],D=i[r++],F=((u&7)<<18|(g&63)<<12|(A&63)<<6|D&63)-65536;t[s++]=String.fromCharCode(55296+(F>>10)),t[s++]=String.fromCharCode(56320+(F&1023))}else{const g=i[r++],A=i[r++];t[s++]=String.fromCharCode((u&15)<<12|(g&63)<<6|A&63)}}return t.join("")},zp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,t){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let u=0;u<i.length;u+=3){const g=i[u],A=u+1<i.length,D=A?i[u+1]:0,F=u+2<i.length,U=F?i[u+2]:0,a=g>>2,h=(g&3)<<4|D>>4;let m=(D&15)<<2|U>>6,d=U&63;F||(d=64,A||(m=64)),s.push(r[a],r[h],r[m],r[d])}return s.join("")},encodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(i):this.encodeByteArray(Fp(i),t)},decodeString(i,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(i):Pm(this.decodeStringToByteArray(i,t))},decodeStringToByteArray(i,t){this.init_();const r=t?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let u=0;u<i.length;){const g=r[i.charAt(u++)],D=u<i.length?r[i.charAt(u)]:0;++u;const U=u<i.length?r[i.charAt(u)]:64;++u;const h=u<i.length?r[i.charAt(u)]:64;if(++u,g==null||D==null||U==null||h==null)throw new km;const m=g<<2|D>>4;if(s.push(m),U!==64){const d=D<<4&240|U>>2;if(s.push(d),h!==64){const f=U<<6&192|h;s.push(f)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class km extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dm=function(i){const t=Fp(i);return zp.encodeByteArray(t,!0)},Dl=function(i){return Dm(i).replace(/\./g,"")},Nm=function(i){try{return zp.decodeString(i,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm=()=>Om().__FIREBASE_DEFAULTS__,Vm=()=>{if(typeof process>"u"||typeof Wd>"u")return;const i=Wd.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Lm=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=i&&Nm(i[1]);return t&&JSON.parse(t)},th=()=>{try{return Mm()||Vm()||Lm()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},bm=i=>{var t,r;return(r=(t=th())===null||t===void 0?void 0:t.emulatorHosts)===null||r===void 0?void 0:r[i]},Up=i=>{const t=bm(i);if(!t)return;const r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const s=parseInt(t.substring(r+1),10);return t[0]==="["?[t.substring(1,r-1),s]:[t.substring(0,r),s]},Bp=()=>{var i;return(i=th())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}wrapCallback(t){return(r,s)=>{r?this.reject(r):this.resolve(s),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(r):t(r,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(i,t){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},s=t||"demo-project",u=i.iat||0,g=i.sub||i.user_id;if(!g)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const A=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:u,exp:u+3600,auth_time:u,sub:g,user_id:g,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Dl(JSON.stringify(r)),Dl(JSON.stringify(A)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Um(){var i;const t=(i=th())===null||i===void 0?void 0:i.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bm(){return!Um()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jm(){try{return typeof indexedDB=="object"}catch{return!1}}function $m(){return new Promise((i,t)=>{try{let r=!0;const s="validate-browser-context-for-indexeddb-analytics-module",u=self.indexedDB.open(s);u.onsuccess=()=>{u.result.close(),r||self.indexedDB.deleteDatabase(s),i(!0)},u.onupgradeneeded=()=>{r=!1},u.onerror=()=>{var g;t(((g=u.error)===null||g===void 0?void 0:g.message)||"")}}catch(r){t(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="FirebaseError";class $i extends Error{constructor(t,r,s){super(r),this.code=t,this.customData=s,this.name=Hm,Object.setPrototypeOf(this,$i.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$p.prototype.create)}}class $p{constructor(t,r,s){this.service=t,this.serviceName=r,this.errors=s}create(t,...r){const s=r[0]||{},u=`${this.service}/${t}`,g=this.errors[t],A=g?Wm(g,s):"Error",D=`${this.serviceName}: ${A} (${u}).`;return new $i(u,D,s)}}function Wm(i,t){return i.replace(qm,(r,s)=>{const u=t[s];return u!=null?String(u):`<${s}?>`})}const qm=/\{\$([^}]+)}/g;function Fc(i,t){if(i===t)return!0;const r=Object.keys(i),s=Object.keys(t);for(const u of r){if(!s.includes(u))return!1;const g=i[u],A=t[u];if(qd(g)&&qd(A)){if(!Fc(g,A))return!1}else if(g!==A)return!1}for(const u of s)if(!r.includes(u))return!1;return!0}function qd(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ar(i){return i&&i._delegate?i._delegate:i}class Fo{constructor(t,r,s){this.name=t,this.instanceFactory=r,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(t,r){this.name=t,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const r=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(r)){const s=new Fm;if(this.instancesDeferred.set(r,s),this.isInitialized(r)||this.shouldAutoInitialize())try{const u=this.getOrInitializeService({instanceIdentifier:r});u&&s.resolve(u)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(t){var r;const s=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),u=(r=t==null?void 0:t.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(g){if(u)return null;throw g}else{if(u)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(Km(t))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[r,s]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(r);try{const g=this.getOrInitializeService({instanceIdentifier:u});s.resolve(g)}catch{}}}}clearInstance(t=Oi){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...t.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Oi){return this.instances.has(t)}getOptions(t=Oi){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:r={}}=t,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const u=this.getOrInitializeService({instanceIdentifier:s,options:r});for(const[g,A]of this.instancesDeferred.entries()){const D=this.normalizeInstanceIdentifier(g);s===D&&A.resolve(u)}return u}onInit(t,r){var s;const u=this.normalizeInstanceIdentifier(r),g=(s=this.onInitCallbacks.get(u))!==null&&s!==void 0?s:new Set;g.add(t),this.onInitCallbacks.set(u,g);const A=this.instances.get(u);return A&&t(A,u),()=>{g.delete(t)}}invokeOnInitCallbacks(t,r){const s=this.onInitCallbacks.get(r);if(s)for(const u of s)try{u(t,r)}catch{}}getOrInitializeService({instanceIdentifier:t,options:r={}}){let s=this.instances.get(t);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:Qm(t),options:r}),this.instances.set(t,s),this.instancesOptions.set(t,r),this.invokeOnInitCallbacks(s,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,s)}catch{}return s||null}normalizeInstanceIdentifier(t=Oi){return this.component?this.component.multipleInstances?t:Oi:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Qm(i){return i===Oi?void 0:i}function Km(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const r=this.getProvider(t.name);if(r.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);r.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const r=new Gm(t,this);return this.providers.set(t,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(je||(je={}));const Ym={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},Jm=je.INFO,Zm={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},ey=(i,t,...r)=>{if(t<i.logLevel)return;const s=new Date().toISOString(),u=Zm[t];if(u)console[u](`[${s}]  ${i.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hp{constructor(t){this.name=t,this._logLevel=Jm,this._logHandler=ey,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in je))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?Ym[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...t),this._logHandler(this,je.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...t),this._logHandler(this,je.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,je.INFO,...t),this._logHandler(this,je.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,je.WARN,...t),this._logHandler(this,je.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...t),this._logHandler(this,je.ERROR,...t)}}const ty=(i,t)=>t.some(r=>i instanceof r);let Gd,Qd;function ny(){return Gd||(Gd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ry(){return Qd||(Qd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Wp=new WeakMap,zc=new WeakMap,qp=new WeakMap,Pc=new WeakMap,nh=new WeakMap;function iy(i){const t=new Promise((r,s)=>{const u=()=>{i.removeEventListener("success",g),i.removeEventListener("error",A)},g=()=>{r(Zr(i.result)),u()},A=()=>{s(i.error),u()};i.addEventListener("success",g),i.addEventListener("error",A)});return t.then(r=>{r instanceof IDBCursor&&Wp.set(r,i)}).catch(()=>{}),nh.set(t,i),t}function oy(i){if(zc.has(i))return;const t=new Promise((r,s)=>{const u=()=>{i.removeEventListener("complete",g),i.removeEventListener("error",A),i.removeEventListener("abort",A)},g=()=>{r(),u()},A=()=>{s(i.error||new DOMException("AbortError","AbortError")),u()};i.addEventListener("complete",g),i.addEventListener("error",A),i.addEventListener("abort",A)});zc.set(i,t)}let Uc={get(i,t,r){if(i instanceof IDBTransaction){if(t==="done")return zc.get(i);if(t==="objectStoreNames")return i.objectStoreNames||qp.get(i);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Zr(i[t])},set(i,t,r){return i[t]=r,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function sy(i){Uc=i(Uc)}function ay(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){const s=i.call(kc(this),t,...r);return qp.set(s,t.sort?t.sort():[t]),Zr(s)}:ry().includes(i)?function(...t){return i.apply(kc(this),t),Zr(Wp.get(this))}:function(...t){return Zr(i.apply(kc(this),t))}}function ly(i){return typeof i=="function"?ay(i):(i instanceof IDBTransaction&&oy(i),ty(i,ny())?new Proxy(i,Uc):i)}function Zr(i){if(i instanceof IDBRequest)return iy(i);if(Pc.has(i))return Pc.get(i);const t=ly(i);return t!==i&&(Pc.set(i,t),nh.set(t,i)),t}const kc=i=>nh.get(i);function uy(i,t,{blocked:r,upgrade:s,blocking:u,terminated:g}={}){const A=indexedDB.open(i,t),D=Zr(A);return s&&A.addEventListener("upgradeneeded",F=>{s(Zr(A.result),F.oldVersion,F.newVersion,Zr(A.transaction),F)}),r&&A.addEventListener("blocked",F=>r(F.oldVersion,F.newVersion,F)),D.then(F=>{g&&F.addEventListener("close",()=>g()),u&&F.addEventListener("versionchange",U=>u(U.oldVersion,U.newVersion,U))}).catch(()=>{}),D}const cy=["get","getKey","getAll","getAllKeys","count"],hy=["put","add","delete","clear"],Dc=new Map;function Kd(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(Dc.get(t))return Dc.get(t);const r=t.replace(/FromIndex$/,""),s=t!==r,u=hy.includes(r);if(!(r in(s?IDBIndex:IDBObjectStore).prototype)||!(u||cy.includes(r)))return;const g=async function(A,...D){const F=this.transaction(A,u?"readwrite":"readonly");let U=F.store;return s&&(U=U.index(D.shift())),(await Promise.all([U[r](...D),u&&F.done]))[0]};return Dc.set(t,g),g}sy(i=>({...i,get:(t,r,s)=>Kd(t,r)||i.get(t,r,s),has:(t,r)=>!!Kd(t,r)||i.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(dy(r)){const s=r.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(r=>r).join(" ")}}function dy(i){const t=i.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Bc="@firebase/app",Xd="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr=new Hp("@firebase/app"),py="@firebase/app-compat",gy="@firebase/analytics-compat",my="@firebase/analytics",yy="@firebase/app-check-compat",_y="@firebase/app-check",vy="@firebase/auth",wy="@firebase/auth-compat",Ey="@firebase/database",Ty="@firebase/data-connect",Sy="@firebase/database-compat",Ay="@firebase/functions",Ry="@firebase/functions-compat",Cy="@firebase/installations",Iy="@firebase/installations-compat",xy="@firebase/messaging",Py="@firebase/messaging-compat",ky="@firebase/performance",Dy="@firebase/performance-compat",Ny="@firebase/remote-config",Oy="@firebase/remote-config-compat",My="@firebase/storage",Vy="@firebase/storage-compat",Ly="@firebase/firestore",by="@firebase/vertexai",Fy="@firebase/firestore-compat",zy="firebase",Uy="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc="[DEFAULT]",By={[Bc]:"fire-core",[py]:"fire-core-compat",[my]:"fire-analytics",[gy]:"fire-analytics-compat",[_y]:"fire-app-check",[yy]:"fire-app-check-compat",[vy]:"fire-auth",[wy]:"fire-auth-compat",[Ey]:"fire-rtdb",[Ty]:"fire-data-connect",[Sy]:"fire-rtdb-compat",[Ay]:"fire-fn",[Ry]:"fire-fn-compat",[Cy]:"fire-iid",[Iy]:"fire-iid-compat",[xy]:"fire-fcm",[Py]:"fire-fcm-compat",[ky]:"fire-perf",[Dy]:"fire-perf-compat",[Ny]:"fire-rc",[Oy]:"fire-rc-compat",[My]:"fire-gcs",[Vy]:"fire-gcs-compat",[Ly]:"fire-fst",[Fy]:"fire-fst-compat",[by]:"fire-vertex","fire-js":"fire-js",[zy]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=new Map,jy=new Map,$c=new Map;function Yd(i,t){try{i.container.addComponent(t)}catch(r){Rr.debug(`Component ${t.name} failed to register with FirebaseApp ${i.name}`,r)}}function Ws(i){const t=i.name;if($c.has(t))return Rr.debug(`There were multiple attempts to register component ${t}.`),!1;$c.set(t,i);for(const r of Nl.values())Yd(r,i);for(const r of jy.values())Yd(r,i);return!0}function Gp(i,t){const r=i.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),i.container.getProvider(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ei=new $p("app","Firebase",$y);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(t,r,s){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Fo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ei.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=Uy;function Kp(i,t={}){let r=i;typeof t!="object"&&(t={name:t});const s=Object.assign({name:jc,automaticDataCollectionEnabled:!1},t),u=s.name;if(typeof u!="string"||!u)throw ei.create("bad-app-name",{appName:String(u)});if(r||(r=Bp()),!r)throw ei.create("no-options");const g=Nl.get(u);if(g){if(Fc(r,g.options)&&Fc(s,g.config))return g;throw ei.create("duplicate-app",{appName:u})}const A=new Xm(u);for(const F of $c.values())A.addComponent(F);const D=new Hy(r,s,A);return Nl.set(u,D),D}function Xp(i=jc){const t=Nl.get(i);if(!t&&i===jc&&Bp())return Kp();if(!t)throw ei.create("no-app",{appName:i});return t}function ti(i,t,r){var s;let u=(s=By[i])!==null&&s!==void 0?s:i;r&&(u+=`-${r}`);const g=u.match(/\s|\//),A=t.match(/\s|\//);if(g||A){const D=[`Unable to register library "${u}" with version "${t}":`];g&&D.push(`library name "${u}" contains illegal characters (whitespace or "/")`),g&&A&&D.push("and"),A&&D.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Rr.warn(D.join(" "));return}Ws(new Fo(`${u}-version`,()=>({library:u,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy="firebase-heartbeat-database",qy=1,qs="firebase-heartbeat-store";let Nc=null;function Yp(){return Nc||(Nc=uy(Wy,qy,{upgrade:(i,t)=>{switch(t){case 0:try{i.createObjectStore(qs)}catch(r){console.warn(r)}}}}).catch(i=>{throw ei.create("idb-open",{originalErrorMessage:i.message})})),Nc}async function Gy(i){try{const r=(await Yp()).transaction(qs),s=await r.objectStore(qs).get(Jp(i));return await r.done,s}catch(t){if(t instanceof $i)Rr.warn(t.message);else{const r=ei.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});Rr.warn(r.message)}}}async function Jd(i,t){try{const s=(await Yp()).transaction(qs,"readwrite");await s.objectStore(qs).put(t,Jp(i)),await s.done}catch(r){if(r instanceof $i)Rr.warn(r.message);else{const s=ei.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Rr.warn(s.message)}}}function Jp(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy=1024,Ky=30*24*60*60*1e3;class Xy{constructor(t){this.container=t,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new Jy(r),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var t,r;try{const u=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),g=Zd();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===g||this._heartbeatsCache.heartbeats.some(A=>A.date===g)?void 0:(this._heartbeatsCache.heartbeats.push({date:g,agent:u}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(A=>{const D=new Date(A.date).valueOf();return Date.now()-D<=Ky}),this._storage.overwrite(this._heartbeatsCache))}catch(s){Rr.warn(s)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Zd(),{heartbeatsToSend:s,unsentEntries:u}=Yy(this._heartbeatsCache.heartbeats),g=Dl(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=r,u.length>0?(this._heartbeatsCache.heartbeats=u,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),g}catch(r){return Rr.warn(r),""}}}function Zd(){return new Date().toISOString().substring(0,10)}function Yy(i,t=Qy){const r=[];let s=i.slice();for(const u of i){const g=r.find(A=>A.agent===u.agent);if(g){if(g.dates.push(u.date),ep(r)>t){g.dates.pop();break}}else if(r.push({agent:u.agent,dates:[u.date]}),ep(r)>t){r.pop();break}s=s.slice(1)}return{heartbeatsToSend:r,unsentEntries:s}}class Jy{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jm()?$m().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await Gy(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var r;if(await this._canUseIndexedDBPromise){const u=await this.read();return Jd(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:u.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var r;if(await this._canUseIndexedDBPromise){const u=await this.read();return Jd(this.app,{lastSentHeartbeatDate:(r=t.lastSentHeartbeatDate)!==null&&r!==void 0?r:u.lastSentHeartbeatDate,heartbeats:[...u.heartbeats,...t.heartbeats]})}else return}}function ep(i){return Dl(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(i){Ws(new Fo("platform-logger",t=>new fy(t),"PRIVATE")),Ws(new Fo("heartbeat",t=>new Xy(t),"PRIVATE")),ti(Bc,Xd,i),ti(Bc,Xd,"esm2017"),ti("fire-js","")}Zy("");var e1="firebase",t1="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ti(e1,t1,"app");var tp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zp;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(R,T){function C(){}C.prototype=T.prototype,R.D=T.prototype,R.prototype=new C,R.prototype.constructor=R,R.C=function(k,O,b){for(var V=Array(arguments.length-2),$=2;$<arguments.length;$++)V[$-2]=arguments[$];return T.prototype[O].apply(k,V)}}function r(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(s,r),s.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function u(R,T,C){C||(C=0);var k=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)k[O]=T.charCodeAt(C++)|T.charCodeAt(C++)<<8|T.charCodeAt(C++)<<16|T.charCodeAt(C++)<<24;else for(O=0;16>O;++O)k[O]=T[C++]|T[C++]<<8|T[C++]<<16|T[C++]<<24;T=R.g[0],C=R.g[1],O=R.g[2];var b=R.g[3],V=T+(b^C&(O^b))+k[0]+3614090360&4294967295;T=C+(V<<7&4294967295|V>>>25),V=b+(O^T&(C^O))+k[1]+3905402710&4294967295,b=T+(V<<12&4294967295|V>>>20),V=O+(C^b&(T^C))+k[2]+606105819&4294967295,O=b+(V<<17&4294967295|V>>>15),V=C+(T^O&(b^T))+k[3]+3250441966&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(b^C&(O^b))+k[4]+4118548399&4294967295,T=C+(V<<7&4294967295|V>>>25),V=b+(O^T&(C^O))+k[5]+1200080426&4294967295,b=T+(V<<12&4294967295|V>>>20),V=O+(C^b&(T^C))+k[6]+2821735955&4294967295,O=b+(V<<17&4294967295|V>>>15),V=C+(T^O&(b^T))+k[7]+4249261313&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(b^C&(O^b))+k[8]+1770035416&4294967295,T=C+(V<<7&4294967295|V>>>25),V=b+(O^T&(C^O))+k[9]+2336552879&4294967295,b=T+(V<<12&4294967295|V>>>20),V=O+(C^b&(T^C))+k[10]+4294925233&4294967295,O=b+(V<<17&4294967295|V>>>15),V=C+(T^O&(b^T))+k[11]+2304563134&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(b^C&(O^b))+k[12]+1804603682&4294967295,T=C+(V<<7&4294967295|V>>>25),V=b+(O^T&(C^O))+k[13]+4254626195&4294967295,b=T+(V<<12&4294967295|V>>>20),V=O+(C^b&(T^C))+k[14]+2792965006&4294967295,O=b+(V<<17&4294967295|V>>>15),V=C+(T^O&(b^T))+k[15]+1236535329&4294967295,C=O+(V<<22&4294967295|V>>>10),V=T+(O^b&(C^O))+k[1]+4129170786&4294967295,T=C+(V<<5&4294967295|V>>>27),V=b+(C^O&(T^C))+k[6]+3225465664&4294967295,b=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(b^T))+k[11]+643717713&4294967295,O=b+(V<<14&4294967295|V>>>18),V=C+(b^T&(O^b))+k[0]+3921069994&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(O^b&(C^O))+k[5]+3593408605&4294967295,T=C+(V<<5&4294967295|V>>>27),V=b+(C^O&(T^C))+k[10]+38016083&4294967295,b=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(b^T))+k[15]+3634488961&4294967295,O=b+(V<<14&4294967295|V>>>18),V=C+(b^T&(O^b))+k[4]+3889429448&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(O^b&(C^O))+k[9]+568446438&4294967295,T=C+(V<<5&4294967295|V>>>27),V=b+(C^O&(T^C))+k[14]+3275163606&4294967295,b=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(b^T))+k[3]+4107603335&4294967295,O=b+(V<<14&4294967295|V>>>18),V=C+(b^T&(O^b))+k[8]+1163531501&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(O^b&(C^O))+k[13]+2850285829&4294967295,T=C+(V<<5&4294967295|V>>>27),V=b+(C^O&(T^C))+k[2]+4243563512&4294967295,b=T+(V<<9&4294967295|V>>>23),V=O+(T^C&(b^T))+k[7]+1735328473&4294967295,O=b+(V<<14&4294967295|V>>>18),V=C+(b^T&(O^b))+k[12]+2368359562&4294967295,C=O+(V<<20&4294967295|V>>>12),V=T+(C^O^b)+k[5]+4294588738&4294967295,T=C+(V<<4&4294967295|V>>>28),V=b+(T^C^O)+k[8]+2272392833&4294967295,b=T+(V<<11&4294967295|V>>>21),V=O+(b^T^C)+k[11]+1839030562&4294967295,O=b+(V<<16&4294967295|V>>>16),V=C+(O^b^T)+k[14]+4259657740&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(C^O^b)+k[1]+2763975236&4294967295,T=C+(V<<4&4294967295|V>>>28),V=b+(T^C^O)+k[4]+1272893353&4294967295,b=T+(V<<11&4294967295|V>>>21),V=O+(b^T^C)+k[7]+4139469664&4294967295,O=b+(V<<16&4294967295|V>>>16),V=C+(O^b^T)+k[10]+3200236656&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(C^O^b)+k[13]+681279174&4294967295,T=C+(V<<4&4294967295|V>>>28),V=b+(T^C^O)+k[0]+3936430074&4294967295,b=T+(V<<11&4294967295|V>>>21),V=O+(b^T^C)+k[3]+3572445317&4294967295,O=b+(V<<16&4294967295|V>>>16),V=C+(O^b^T)+k[6]+76029189&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(C^O^b)+k[9]+3654602809&4294967295,T=C+(V<<4&4294967295|V>>>28),V=b+(T^C^O)+k[12]+3873151461&4294967295,b=T+(V<<11&4294967295|V>>>21),V=O+(b^T^C)+k[15]+530742520&4294967295,O=b+(V<<16&4294967295|V>>>16),V=C+(O^b^T)+k[2]+3299628645&4294967295,C=O+(V<<23&4294967295|V>>>9),V=T+(O^(C|~b))+k[0]+4096336452&4294967295,T=C+(V<<6&4294967295|V>>>26),V=b+(C^(T|~O))+k[7]+1126891415&4294967295,b=T+(V<<10&4294967295|V>>>22),V=O+(T^(b|~C))+k[14]+2878612391&4294967295,O=b+(V<<15&4294967295|V>>>17),V=C+(b^(O|~T))+k[5]+4237533241&4294967295,C=O+(V<<21&4294967295|V>>>11),V=T+(O^(C|~b))+k[12]+1700485571&4294967295,T=C+(V<<6&4294967295|V>>>26),V=b+(C^(T|~O))+k[3]+2399980690&4294967295,b=T+(V<<10&4294967295|V>>>22),V=O+(T^(b|~C))+k[10]+4293915773&4294967295,O=b+(V<<15&4294967295|V>>>17),V=C+(b^(O|~T))+k[1]+2240044497&4294967295,C=O+(V<<21&4294967295|V>>>11),V=T+(O^(C|~b))+k[8]+1873313359&4294967295,T=C+(V<<6&4294967295|V>>>26),V=b+(C^(T|~O))+k[15]+4264355552&4294967295,b=T+(V<<10&4294967295|V>>>22),V=O+(T^(b|~C))+k[6]+2734768916&4294967295,O=b+(V<<15&4294967295|V>>>17),V=C+(b^(O|~T))+k[13]+1309151649&4294967295,C=O+(V<<21&4294967295|V>>>11),V=T+(O^(C|~b))+k[4]+4149444226&4294967295,T=C+(V<<6&4294967295|V>>>26),V=b+(C^(T|~O))+k[11]+3174756917&4294967295,b=T+(V<<10&4294967295|V>>>22),V=O+(T^(b|~C))+k[2]+718787259&4294967295,O=b+(V<<15&4294967295|V>>>17),V=C+(b^(O|~T))+k[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,R.g[2]=R.g[2]+O&4294967295,R.g[3]=R.g[3]+b&4294967295}s.prototype.u=function(R,T){T===void 0&&(T=R.length);for(var C=T-this.blockSize,k=this.B,O=this.h,b=0;b<T;){if(O==0)for(;b<=C;)u(this,R,b),b+=this.blockSize;if(typeof R=="string"){for(;b<T;)if(k[O++]=R.charCodeAt(b++),O==this.blockSize){u(this,k),O=0;break}}else for(;b<T;)if(k[O++]=R[b++],O==this.blockSize){u(this,k),O=0;break}}this.h=O,this.o+=T},s.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;var C=8*this.o;for(T=R.length-8;T<R.length;++T)R[T]=C&255,C/=256;for(this.u(R),R=Array(16),T=C=0;4>T;++T)for(var k=0;32>k;k+=8)R[C++]=this.g[T]>>>k&255;return R};function g(R,T){var C=D;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=T(R)}function A(R,T){this.h=T;for(var C=[],k=!0,O=R.length-1;0<=O;O--){var b=R[O]|0;k&&b==T||(C[O]=b,k=!1)}this.g=C}var D={};function F(R){return-128<=R&&128>R?g(R,function(T){return new A([T|0],0>T?-1:0)}):new A([R|0],0>R?-1:0)}function U(R){if(isNaN(R)||!isFinite(R))return h;if(0>R)return _(U(-R));for(var T=[],C=1,k=0;R>=C;k++)T[k]=R/C|0,C*=4294967296;return new A(T,0)}function a(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return _(a(R.substring(1),T));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=U(Math.pow(T,8)),k=h,O=0;O<R.length;O+=8){var b=Math.min(8,R.length-O),V=parseInt(R.substring(O,O+b),T);8>b?(b=U(Math.pow(T,b)),k=k.j(b).add(U(V))):(k=k.j(C),k=k.add(U(V)))}return k}var h=F(0),m=F(1),d=F(16777216);i=A.prototype,i.m=function(){if(p(this))return-_(this).m();for(var R=0,T=1,C=0;C<this.g.length;C++){var k=this.i(C);R+=(0<=k?k:4294967296+k)*T,T*=4294967296}return R},i.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(f(this))return"0";if(p(this))return"-"+_(this).toString(R);for(var T=U(Math.pow(R,6)),C=this,k="";;){var O=P(C,T).g;C=v(C,O.j(T));var b=((0<C.g.length?C.g[0]:C.h)>>>0).toString(R);if(C=O,f(C))return b+k;for(;6>b.length;)b="0"+b;k=b+k}},i.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function f(R){if(R.h!=0)return!1;for(var T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function p(R){return R.h==-1}i.l=function(R){return R=v(this,R),p(R)?-1:f(R)?0:1};function _(R){for(var T=R.g.length,C=[],k=0;k<T;k++)C[k]=~R.g[k];return new A(C,~R.h).add(m)}i.abs=function(){return p(this)?_(this):this},i.add=function(R){for(var T=Math.max(this.g.length,R.g.length),C=[],k=0,O=0;O<=T;O++){var b=k+(this.i(O)&65535)+(R.i(O)&65535),V=(b>>>16)+(this.i(O)>>>16)+(R.i(O)>>>16);k=V>>>16,b&=65535,V&=65535,C[O]=V<<16|b}return new A(C,C[C.length-1]&-2147483648?-1:0)};function v(R,T){return R.add(_(T))}i.j=function(R){if(f(this)||f(R))return h;if(p(this))return p(R)?_(this).j(_(R)):_(_(this).j(R));if(p(R))return _(this.j(_(R)));if(0>this.l(d)&&0>R.l(d))return U(this.m()*R.m());for(var T=this.g.length+R.g.length,C=[],k=0;k<2*T;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var O=0;O<R.g.length;O++){var b=this.i(k)>>>16,V=this.i(k)&65535,$=R.i(O)>>>16,ee=R.i(O)&65535;C[2*k+2*O]+=V*ee,S(C,2*k+2*O),C[2*k+2*O+1]+=b*ee,S(C,2*k+2*O+1),C[2*k+2*O+1]+=V*$,S(C,2*k+2*O+1),C[2*k+2*O+2]+=b*$,S(C,2*k+2*O+2)}for(k=0;k<T;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=T;k<2*T;k++)C[k]=0;return new A(C,0)};function S(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function I(R,T){this.g=R,this.h=T}function P(R,T){if(f(T))throw Error("division by zero");if(f(R))return new I(h,h);if(p(R))return T=P(_(R),T),new I(_(T.g),_(T.h));if(p(T))return T=P(R,_(T)),new I(_(T.g),T.h);if(30<R.g.length){if(p(R)||p(T))throw Error("slowDivide_ only works with positive integers.");for(var C=m,k=T;0>=k.l(R);)C=N(C),k=N(k);var O=L(C,1),b=L(k,1);for(k=L(k,2),C=L(C,2);!f(k);){var V=b.add(k);0>=V.l(R)&&(O=O.add(C),b=V),k=L(k,1),C=L(C,1)}return T=v(R,O.j(T)),new I(O,T)}for(O=h;0<=R.l(T);){for(C=Math.max(1,Math.floor(R.m()/T.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),b=U(C),V=b.j(T);p(V)||0<V.l(R);)C-=k,b=U(C),V=b.j(T);f(b)&&(b=m),O=O.add(b),R=v(R,V)}return new I(O,R)}i.A=function(R){return P(this,R).h},i.and=function(R){for(var T=Math.max(this.g.length,R.g.length),C=[],k=0;k<T;k++)C[k]=this.i(k)&R.i(k);return new A(C,this.h&R.h)},i.or=function(R){for(var T=Math.max(this.g.length,R.g.length),C=[],k=0;k<T;k++)C[k]=this.i(k)|R.i(k);return new A(C,this.h|R.h)},i.xor=function(R){for(var T=Math.max(this.g.length,R.g.length),C=[],k=0;k<T;k++)C[k]=this.i(k)^R.i(k);return new A(C,this.h^R.h)};function N(R){for(var T=R.g.length+1,C=[],k=0;k<T;k++)C[k]=R.i(k)<<1|R.i(k-1)>>>31;return new A(C,R.h)}function L(R,T){var C=T>>5;T%=32;for(var k=R.g.length-C,O=[],b=0;b<k;b++)O[b]=0<T?R.i(b+C)>>>T|R.i(b+C+1)<<32-T:R.i(b+C);return new A(O,R.h)}s.prototype.digest=s.prototype.v,s.prototype.reset=s.prototype.s,s.prototype.update=s.prototype.u,A.prototype.add=A.prototype.add,A.prototype.multiply=A.prototype.j,A.prototype.modulo=A.prototype.A,A.prototype.compare=A.prototype.l,A.prototype.toNumber=A.prototype.m,A.prototype.toString=A.prototype.toString,A.prototype.getBits=A.prototype.i,A.fromNumber=U,A.fromString=a,Zp=A}).apply(typeof tp<"u"?tp:typeof self<"u"?self:typeof window<"u"?window:{});var _l=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eg,zs,tg,Cl,Hc,ng,rg,ig;(function(){var i,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,w,x){return l==Array.prototype||l==Object.prototype||(l[w]=x.value),l};function r(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof _l=="object"&&_l];for(var w=0;w<l.length;++w){var x=l[w];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var s=r(this);function u(l,w){if(w)e:{var x=s;l=l.split(".");for(var z=0;z<l.length-1;z++){var Q=l[z];if(!(Q in x))break e;x=x[Q]}l=l[l.length-1],z=x[l],w=w(z),w!=z&&w!=null&&t(x,l,{configurable:!0,writable:!0,value:w})}}function g(l,w){l instanceof String&&(l+="");var x=0,z=!1,Q={next:function(){if(!z&&x<l.length){var ne=x++;return{value:w(ne,l[ne]),done:!1}}return z=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}u("Array.prototype.values",function(l){return l||function(){return g(this,function(w,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var A=A||{},D=this||self;function F(l){var w=typeof l;return w=w!="object"?w:l?Array.isArray(l)?"array":w:"null",w=="array"||w=="object"&&typeof l.length=="number"}function U(l){var w=typeof l;return w=="object"&&l!=null||w=="function"}function a(l,w,x){return l.call.apply(l.bind,arguments)}function h(l,w,x){if(!l)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,z),l.apply(w,Q)}}return function(){return l.apply(w,arguments)}}function m(l,w,x){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?a:h,m.apply(null,arguments)}function d(l,w){var x=Array.prototype.slice.call(arguments,1);return function(){var z=x.slice();return z.push.apply(z,arguments),l.apply(this,z)}}function f(l,w){function x(){}x.prototype=w.prototype,l.aa=w.prototype,l.prototype=new x,l.prototype.constructor=l,l.Qb=function(z,Q,ne){for(var _e=Array(arguments.length-2),We=2;We<arguments.length;We++)_e[We-2]=arguments[We];return w.prototype[Q].apply(z,_e)}}function p(l){const w=l.length;if(0<w){const x=Array(w);for(let z=0;z<w;z++)x[z]=l[z];return x}return[]}function _(l,w){for(let x=1;x<arguments.length;x++){const z=arguments[x];if(F(z)){const Q=l.length||0,ne=z.length||0;l.length=Q+ne;for(let _e=0;_e<ne;_e++)l[Q+_e]=z[_e]}else l.push(z)}}class v{constructor(w,x){this.i=w,this.j=x,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function S(l){return/^[\s\xa0]*$/.test(l)}function I(){var l=D.navigator;return l&&(l=l.userAgent)?l:""}function P(l){return P[" "](l),l}P[" "]=function(){};var N=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function L(l,w,x){for(const z in l)w.call(x,l[z],z,l)}function R(l,w){for(const x in l)w.call(void 0,l[x],x,l)}function T(l){const w={};for(const x in l)w[x]=l[x];return w}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,w){let x,z;for(let Q=1;Q<arguments.length;Q++){z=arguments[Q];for(x in z)l[x]=z[x];for(let ne=0;ne<C.length;ne++)x=C[ne],Object.prototype.hasOwnProperty.call(z,x)&&(l[x]=z[x])}}function O(l){var w=1;l=l.split(":");const x=[];for(;0<w&&l.length;)x.push(l.shift()),w--;return l.length&&x.push(l.join(":")),x}function b(l){D.setTimeout(()=>{throw l},0)}function V(){var l=re;let w=null;return l.g&&(w=l.g,l.g=l.g.next,l.g||(l.h=null),w.next=null),w}class ${constructor(){this.h=this.g=null}add(w,x){const z=ee.get();z.set(w,x),this.h?this.h.next=z:this.g=z,this.h=z}}var ee=new v(()=>new X,l=>l.reset());class X{constructor(){this.next=this.g=this.h=null}set(w,x){this.h=w,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,J=!1,re=new $,G=()=>{const l=D.Promise.resolve(void 0);oe=()=>{l.then(B)}};var B=()=>{for(var l;l=V();){try{l.h.call(l.g)}catch(x){b(x)}var w=ee;w.j(l),100>w.h&&(w.h++,l.next=w.g,w.g=l)}J=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(l,w){this.type=l,this.g=this.target=w,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var se=function(){if(!D.addEventListener||!Object.defineProperty)return!1;var l=!1,w=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const x=()=>{};D.addEventListener("test",x,w),D.removeEventListener("test",x,w)}catch{}return l}();function ve(l,w){if(ue.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var x=this.type=l.type,z=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=w,w=l.relatedTarget){if(N){e:{try{P(w.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(w=null)}}else x=="mouseover"?w=l.fromElement:x=="mouseout"&&(w=l.toElement);this.relatedTarget=w,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:De[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ve.aa.h.call(this)}}f(ve,ue);var De={2:"touch",3:"pen",4:"mouse"};ve.prototype.h=function(){ve.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),he=0;function me(l,w,x,z,Q){this.listener=l,this.proxy=null,this.src=w,this.type=x,this.capture=!!z,this.ha=Q,this.key=++he,this.da=this.fa=!1}function ye(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ee(l){this.src=l,this.g={},this.h=0}Ee.prototype.add=function(l,w,x,z,Q){var ne=l.toString();l=this.g[ne],l||(l=this.g[ne]=[],this.h++);var _e=te(l,w,z,Q);return-1<_e?(w=l[_e],x||(w.fa=!1)):(w=new me(w,this.src,ne,!!z,Q),w.fa=x,l.push(w)),w};function xe(l,w){var x=w.type;if(x in l.g){var z=l.g[x],Q=Array.prototype.indexOf.call(z,w,void 0),ne;(ne=0<=Q)&&Array.prototype.splice.call(z,Q,1),ne&&(ye(w),l.g[x].length==0&&(delete l.g[x],l.h--))}}function te(l,w,x,z){for(var Q=0;Q<l.length;++Q){var ne=l[Q];if(!ne.da&&ne.listener==w&&ne.capture==!!x&&ne.ha==z)return Q}return-1}var de="closure_lm_"+(1e6*Math.random()|0),Ie={};function Ve(l,w,x,z,Q){if(Array.isArray(w)){for(var ne=0;ne<w.length;ne++)Ve(l,w[ne],x,z,Q);return null}return x=Cr(x),l&&l[ie]?l.K(w,x,U(z)?!!z.capture:!!z,Q):be(l,w,x,!1,z,Q)}function be(l,w,x,z,Q,ne){if(!w)throw Error("Invalid event type");var _e=U(Q)?!!Q.capture:!!Q,We=yn(l);if(We||(l[de]=We=new Ee(l)),x=We.add(w,x,z,_e,ne),x.proxy)return x;if(z=et(),x.proxy=z,z.src=l,z.listener=x,l.addEventListener)se||(Q=_e),Q===void 0&&(Q=!1),l.addEventListener(w.toString(),z,Q);else if(l.attachEvent)l.attachEvent(bt(w.toString()),z);else if(l.addListener&&l.removeListener)l.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return x}function et(){function l(x){return w.call(l.src,l.listener,x)}const w=mn;return l}function Xt(l,w,x,z,Q){if(Array.isArray(w))for(var ne=0;ne<w.length;ne++)Xt(l,w[ne],x,z,Q);else z=U(z)?!!z.capture:!!z,x=Cr(x),l&&l[ie]?(l=l.i,w=String(w).toString(),w in l.g&&(ne=l.g[w],x=te(ne,x,z,Q),-1<x&&(ye(ne[x]),Array.prototype.splice.call(ne,x,1),ne.length==0&&(delete l.g[w],l.h--)))):l&&(l=yn(l))&&(w=l.g[w.toString()],l=-1,w&&(l=te(w,x,z,Q)),(x=-1<l?w[l]:null)&&ht(x))}function ht(l){if(typeof l!="number"&&l&&!l.da){var w=l.src;if(w&&w[ie])xe(w.i,l);else{var x=l.type,z=l.proxy;w.removeEventListener?w.removeEventListener(x,z,l.capture):w.detachEvent?w.detachEvent(bt(x),z):w.addListener&&w.removeListener&&w.removeListener(z),(x=yn(w))?(xe(x,l),x.h==0&&(x.src=null,w[de]=null)):ye(l)}}}function bt(l){return l in Ie?Ie[l]:Ie[l]="on"+l}function mn(l,w){if(l.da)l=!0;else{w=new ve(w,this);var x=l.listener,z=l.ha||l.src;l.fa&&ht(l),l=x.call(z,w)}return l}function yn(l){return l=l[de],l instanceof Ee?l:null}var sr="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cr(l){return typeof l=="function"?l:(l[sr]||(l[sr]=function(w){return l.handleEvent(w)}),l[sr])}function yt(){q.call(this),this.i=new Ee(this),this.M=this,this.F=null}f(yt,q),yt.prototype[ie]=!0,yt.prototype.removeEventListener=function(l,w,x,z){Xt(this,l,w,x,z)};function _t(l,w){var x,z=l.F;if(z)for(x=[];z;z=z.F)x.push(z);if(l=l.M,z=w.type||w,typeof w=="string")w=new ue(w,l);else if(w instanceof ue)w.target=w.target||l;else{var Q=w;w=new ue(z,l),k(w,Q)}if(Q=!0,x)for(var ne=x.length-1;0<=ne;ne--){var _e=w.g=x[ne];Q=ar(_e,z,!0,w)&&Q}if(_e=w.g=l,Q=ar(_e,z,!0,w)&&Q,Q=ar(_e,z,!1,w)&&Q,x)for(ne=0;ne<x.length;ne++)_e=w.g=x[ne],Q=ar(_e,z,!1,w)&&Q}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var l=this.i,w;for(w in l.g){for(var x=l.g[w],z=0;z<x.length;z++)ye(x[z]);delete l.g[w],l.h--}}this.F=null},yt.prototype.K=function(l,w,x,z){return this.i.add(String(l),w,!1,x,z)},yt.prototype.L=function(l,w,x,z){return this.i.add(String(l),w,!0,x,z)};function ar(l,w,x,z){if(w=l.i.g[String(w)],!w)return!0;w=w.concat();for(var Q=!0,ne=0;ne<w.length;++ne){var _e=w[ne];if(_e&&!_e.da&&_e.capture==x){var We=_e.listener,vt=_e.ha||_e.src;_e.fa&&xe(l.i,_e),Q=We.call(vt,z)!==!1&&Q}}return Q&&!z.defaultPrevented}function qo(l,w,x){if(typeof l=="function")x&&(l=m(l,x));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:D.setTimeout(l,w||0)}function Ir(l){l.g=qo(()=>{l.g=null,l.i&&(l.i=!1,Ir(l))},l.l);const w=l.h;l.h=null,l.m.apply(null,w)}class si extends q{constructor(w,x){super(),this.m=w,this.l=x,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:Ir(this)}N(){super.N(),this.g&&(D.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ai(l){q.call(this),this.h=l,this.g={}}f(ai,q);var Go=[];function Qo(l){L(l.g,function(w,x){this.g.hasOwnProperty(x)&&ht(w)},l),l.g={}}ai.prototype.N=function(){ai.aa.N.call(this),Qo(this)},ai.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ko=D.JSON.stringify,Xo=D.JSON.parse,Yo=class{stringify(l){return D.JSON.stringify(l,void 0)}parse(l){return D.JSON.parse(l,void 0)}};function li(){}li.prototype.h=null;function qi(l){return l.h||(l.h=l.i())}function Gi(){}var _n={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function qn(){ue.call(this,"d")}f(qn,ue);function Qi(){ue.call(this,"c")}f(Qi,ue);var Gn={},Jo=null;function ui(){return Jo=Jo||new yt}Gn.La="serverreachability";function Zo(l){ue.call(this,Gn.La,l)}f(Zo,ue);function lr(l){const w=ui();_t(w,new Zo(w))}Gn.STAT_EVENT="statevent";function es(l,w){ue.call(this,Gn.STAT_EVENT,l),this.stat=w}f(es,ue);function ft(l){const w=ui();_t(w,new es(w,l))}Gn.Ma="timingevent";function Ki(l,w){ue.call(this,Gn.Ma,l),this.size=w}f(Ki,ue);function xn(l,w){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return D.setTimeout(function(){l()},w)}function ci(){this.g=!0}ci.prototype.xa=function(){this.g=!1};function hi(l,w,x,z,Q,ne){l.info(function(){if(l.g)if(ne)for(var _e="",We=ne.split("&"),vt=0;vt<We.length;vt++){var Ue=We[vt].split("=");if(1<Ue.length){var Tt=Ue[0];Ue=Ue[1];var pt=Tt.split("_");_e=2<=pt.length&&pt[1]=="type"?_e+(Tt+"="+Ue+"&"):_e+(Tt+"=redacted&")}}else _e=null;else _e=ne;return"XMLHTTP REQ ("+z+") [attempt "+Q+"]: "+w+`
`+x+`
`+_e})}function Xi(l,w,x,z,Q,ne,_e){l.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+Q+"]: "+w+`
`+x+`
`+ne+" "+_e})}function Pn(l,w,x,z){l.info(function(){return"XMLHTTP TEXT ("+w+"): "+Jl(l,x)+(z?" "+z:"")})}function ts(l,w){l.info(function(){return"TIMEOUT: "+w})}ci.prototype.info=function(){};function Jl(l,w){if(!l.g)return w;if(!w)return null;try{var x=JSON.parse(w);if(x){for(l=0;l<x.length;l++)if(Array.isArray(x[l])){var z=x[l];if(!(2>z.length)){var Q=z[1];if(Array.isArray(Q)&&!(1>Q.length)){var ne=Q[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var _e=1;_e<Q.length;_e++)Q[_e]=""}}}}return Ko(x)}catch{return w}}var Yi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ra={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},kn;function fi(){}f(fi,li),fi.prototype.g=function(){return new XMLHttpRequest},fi.prototype.i=function(){return{}},kn=new fi;function Dn(l,w,x,z){this.j=l,this.i=w,this.l=x,this.R=z||1,this.U=new ai(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ia}function ia(){this.i=null,this.g="",this.h=!1}var ns={},Ji={};function Zi(l,w,x){l.L=1,l.v=Nr(un(w)),l.m=x,l.P=!0,rs(l,null)}function rs(l,w){l.F=Date.now(),Qe(l),l.A=un(l.v);var x=l.A,z=l.R;Array.isArray(z)||(z=[String(z)]),Mr(x.i,"t",z),l.C=0,x=l.j.J,l.h=new ia,l.g=Ta(l.j,x?w:null,!l.m),0<l.O&&(l.M=new si(m(l.Y,l,l.g),l.O)),w=l.U,x=l.g,z=l.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Go[0]=Q.toString()),Q=Go);for(var ne=0;ne<Q.length;ne++){var _e=Ve(x,Q[ne],z||w.handleEvent,!1,w.h||w);if(!_e)break;w.g[_e.key]=_e}w=l.H?T(l.H):{},l.m?(l.u||(l.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,w)):(l.u="GET",l.g.ea(l.A,l.u,null,w)),lr(),hi(l.i,l.u,l.A,l.l,l.R,l.m)}Dn.prototype.ca=function(l){l=l.target;const w=this.M;w&&Jt(l)==3?w.j():this.Y(l)},Dn.prototype.Y=function(l){try{if(l==this.g)e:{const pt=Jt(this.g);var w=this.g.Ba();const En=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||us(this.g)))){this.J||pt!=4||w==7||(w==8||0>=En?lr(3):lr(2)),di(this);var x=this.g.Z();this.X=x;t:if(oa(this)){var z=us(this.g);l="";var Q=z.length,ne=Jt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vn(this),xr(this);var _e="";break t}this.h.i=new D.TextDecoder}for(w=0;w<Q;w++)this.h.h=!0,l+=this.h.i.decode(z[w],{stream:!(ne&&w==Q-1)});z.length=0,this.h.g+=l,this.C=0,_e=this.h.g}else _e=this.g.oa();if(this.o=x==200,Xi(this.i,this.u,this.A,this.l,this.R,pt,x),this.o){if(this.T&&!this.K){t:{if(this.g){var We,vt=this.g;if((We=vt.g?vt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(We)){var Ue=We;break t}}Ue=null}if(x=Ue)Pn(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,is(this,x);else{this.o=!1,this.s=3,ft(12),vn(this),xr(this);break e}}if(this.P){x=!0;let hn;for(;!this.J&&this.C<_e.length;)if(hn=Zl(this,_e),hn==Ji){pt==4&&(this.s=4,ft(14),x=!1),Pn(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==ns){this.s=4,ft(15),Pn(this.i,this.l,_e,"[Invalid Chunk]"),x=!1;break}else Pn(this.i,this.l,hn,null),is(this,hn);if(oa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||_e.length!=0||this.h.h||(this.s=1,ft(16),x=!1),this.o=this.o&&x,!x)Pn(this.i,this.l,_e,"[Invalid Chunked Response]"),vn(this),xr(this);else if(0<_e.length&&!this.W){this.W=!0;var Tt=this.j;Tt.g==this&&Tt.ba&&!Tt.M&&(Tt.j.info("Great, no buffering proxy detected. Bytes received: "+_e.length),hs(Tt),Tt.M=!0,ft(11))}}else Pn(this.i,this.l,_e,null),is(this,_e);pt==4&&vn(this),this.o&&!this.J&&(pt==4?co(this.j,this):(this.o=!1,Qe(this)))}else oo(this.g),x==400&&0<_e.indexOf("Unknown SID")?(this.s=3,ft(12)):(this.s=0,ft(13)),vn(this),xr(this)}}}catch{}finally{}};function oa(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function Zl(l,w){var x=l.C,z=w.indexOf(`
`,x);return z==-1?Ji:(x=Number(w.substring(x,z)),isNaN(x)?ns:(z+=1,z+x>w.length?Ji:(w=w.slice(z,z+x),l.C=z+x,w)))}Dn.prototype.cancel=function(){this.J=!0,vn(this)};function Qe(l){l.S=Date.now()+l.I,sa(l,l.I)}function sa(l,w){if(l.B!=null)throw Error("WatchDog timer not null");l.B=xn(m(l.ba,l),w)}function di(l){l.B&&(D.clearTimeout(l.B),l.B=null)}Dn.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(ts(this.i,this.A),this.L!=2&&(lr(),ft(17)),vn(this),this.s=2,xr(this)):sa(this,this.S-l)};function xr(l){l.j.G==0||l.J||co(l.j,l)}function vn(l){di(l);var w=l.M;w&&typeof w.ma=="function"&&w.ma(),l.M=null,Qo(l.U),l.g&&(w=l.g,l.g=null,w.abort(),w.ma())}function is(l,w){try{var x=l.j;if(x.G!=0&&(x.g==l||Wt(x.h,l))){if(!l.K&&Wt(x.h,l)&&x.G==3){try{var z=x.Da.g.parse(w)}catch{z=null}if(Array.isArray(z)&&z.length==3){var Q=z;if(Q[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<l.F)uo(x),Ln(x);else break e;lo(x),ft(18)}}else x.za=Q[1],0<x.za-x.T&&37500>Q[2]&&x.F&&x.v==0&&!x.C&&(x.C=xn(m(x.Za,x),6e3));if(1>=la(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else dr(x,11)}else if((l.K||x.g==l)&&uo(x),!S(w))for(Q=x.Da.g.parse(w),w=0;w<Q.length;w++){let Ue=Q[w];if(x.T=Ue[0],Ue=Ue[1],x.G==2)if(Ue[0]=="c"){x.K=Ue[1],x.ia=Ue[2];const Tt=Ue[3];Tt!=null&&(x.la=Tt,x.j.info("VER="+x.la));const pt=Ue[4];pt!=null&&(x.Aa=pt,x.j.info("SVER="+x.Aa));const En=Ue[5];En!=null&&typeof En=="number"&&0<En&&(z=1.5*En,x.L=z,x.j.info("backChannelRequestTimeoutMs_="+z)),z=x;const hn=l.g;if(hn){const wi=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wi){var ne=z.h;ne.g||wi.indexOf("spdy")==-1&&wi.indexOf("quic")==-1&&wi.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(os(ne,ne.h),ne.h=null))}if(z.D){const fo=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;fo&&(z.ya=fo,Ge(z.I,z.D,fo))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-l.F,x.j.info("Handshake RTT: "+x.R+"ms")),z=x;var _e=l;if(z.qa=Ea(z,z.J?z.ia:null,z.W),_e.K){ua(z.h,_e);var We=_e,vt=z.L;vt&&(We.I=vt),We.B&&(di(We),Qe(We)),z.g=_e}else vi(z);0<x.i.length&&Yn(x)}else Ue[0]!="stop"&&Ue[0]!="close"||dr(x,7);else x.G==3&&(Ue[0]=="stop"||Ue[0]=="close"?Ue[0]=="stop"?dr(x,7):kt(x):Ue[0]!="noop"&&x.l&&x.l.ta(Ue),x.v=0)}}lr(4)}catch{}}var aa=class{constructor(l,w){this.g=l,this.map=w}};function pi(l){this.l=l||10,D.PerformanceNavigationTiming?(l=D.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(D.chrome&&D.chrome.loadTimes&&D.chrome.loadTimes()&&D.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ln(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function la(l){return l.h?1:l.g?l.g.size:0}function Wt(l,w){return l.h?l.h==w:l.g?l.g.has(w):!1}function os(l,w){l.g?l.g.add(w):l.h=w}function ua(l,w){l.h&&l.h==w?l.h=null:l.g&&l.g.has(w)&&l.g.delete(w)}pi.prototype.cancel=function(){if(this.i=ca(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ca(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let w=l.i;for(const x of l.g.values())w=w.concat(x.D);return w}return p(l.i)}function eo(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(F(l)){for(var w=[],x=l.length,z=0;z<x;z++)w.push(l[z]);return w}w=[],x=0;for(z in l)w[x++]=l[z];return w}function to(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(F(l)||typeof l=="string"){var w=[];l=l.length;for(var x=0;x<l;x++)w.push(x);return w}w=[],x=0;for(const z in l)w[x++]=z;return w}}}function Pr(l,w){if(l.forEach&&typeof l.forEach=="function")l.forEach(w,void 0);else if(F(l)||typeof l=="string")Array.prototype.forEach.call(l,w,void 0);else for(var x=to(l),z=eo(l),Q=z.length,ne=0;ne<Q;ne++)w.call(void 0,z[ne],x&&x[ne],l)}var gi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eu(l,w){if(l){l=l.split("&");for(var x=0;x<l.length;x++){var z=l[x].indexOf("="),Q=null;if(0<=z){var ne=l[x].substring(0,z);Q=l[x].substring(z+1)}else ne=l[x];w(ne,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function ur(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ur){this.h=l.h,mi(this,l.j),this.o=l.o,this.g=l.g,kr(this,l.s),this.l=l.l;var w=l.i,x=new Qn;x.i=w.i,w.g&&(x.g=new Map(w.g),x.h=w.h),Dr(this,x),this.m=l.m}else l&&(w=String(l).match(gi))?(this.h=!1,mi(this,w[1]||"",!0),this.o=ze(w[2]||""),this.g=ze(w[3]||"",!0),kr(this,w[4]),this.l=ze(w[5]||"",!0),Dr(this,w[6]||"",!0),this.m=ze(w[7]||"")):(this.h=!1,this.i=new Qn(null,this.h))}ur.prototype.toString=function(){var l=[],w=this.j;w&&l.push(Or(w,no,!0),":");var x=this.g;return(x||w=="file")&&(l.push("//"),(w=this.o)&&l.push(Or(w,no,!0),"@"),l.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&l.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&l.push("/"),l.push(Or(x,x.charAt(0)=="/"?da:fa,!0))),(x=this.i.toString())&&l.push("?",x),(x=this.m)&&l.push("#",Or(x,ss)),l.join("")};function un(l){return new ur(l)}function mi(l,w,x){l.j=x?ze(w,!0):w,l.j&&(l.j=l.j.replace(/:$/,""))}function kr(l,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);l.s=w}else l.s=null}function Dr(l,w,x){w instanceof Qn?(l.i=w,Kn(l.i,l.h)):(x||(w=Or(w,pa)),l.i=new Qn(w,l.h))}function Ge(l,w,x){l.i.set(w,x)}function Nr(l){return Ge(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ze(l,w){return l?w?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Or(l,w,x){return typeof l=="string"?(l=encodeURI(l).replace(w,ha),x&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function ha(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var no=/[#\/\?@]/g,fa=/[#\?:]/g,da=/[#\?]/g,pa=/[#\?@]/g,ss=/#/g;function Qn(l,w){this.h=this.g=null,this.i=l||null,this.j=!!w}function Pt(l){l.g||(l.g=new Map,l.h=0,l.i&&eu(l.i,function(w,x){l.add(decodeURIComponent(w.replace(/\+/g," ")),x)}))}i=Qn.prototype,i.add=function(l,w){Pt(this),this.i=null,l=wn(this,l);var x=this.g.get(l);return x||this.g.set(l,x=[]),x.push(w),this.h+=1,this};function Nn(l,w){Pt(l),w=wn(l,w),l.g.has(w)&&(l.i=null,l.h-=l.g.get(w).length,l.g.delete(w))}function On(l,w){return Pt(l),w=wn(l,w),l.g.has(w)}i.forEach=function(l,w){Pt(this),this.g.forEach(function(x,z){x.forEach(function(Q){l.call(w,Q,z,this)},this)},this)},i.na=function(){Pt(this);const l=Array.from(this.g.values()),w=Array.from(this.g.keys()),x=[];for(let z=0;z<w.length;z++){const Q=l[z];for(let ne=0;ne<Q.length;ne++)x.push(w[z])}return x},i.V=function(l){Pt(this);let w=[];if(typeof l=="string")On(this,l)&&(w=w.concat(this.g.get(wn(this,l))));else{l=Array.from(this.g.values());for(let x=0;x<l.length;x++)w=w.concat(l[x])}return w},i.set=function(l,w){return Pt(this),this.i=null,l=wn(this,l),On(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[w]),this.h+=1,this},i.get=function(l,w){return l?(l=this.V(l),0<l.length?String(l[0]):w):w};function Mr(l,w,x){Nn(l,w),0<x.length&&(l.i=null,l.g.set(wn(l,w),p(x)),l.h+=x.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],w=Array.from(this.g.keys());for(var x=0;x<w.length;x++){var z=w[x];const ne=encodeURIComponent(String(z)),_e=this.V(z);for(z=0;z<_e.length;z++){var Q=ne;_e[z]!==""&&(Q+="="+encodeURIComponent(String(_e[z]))),l.push(Q)}}return this.i=l.join("&")};function wn(l,w){return w=String(w),l.j&&(w=w.toLowerCase()),w}function Kn(l,w){w&&!l.j&&(Pt(l),l.i=null,l.g.forEach(function(x,z){var Q=z.toLowerCase();z!=Q&&(Nn(this,z),Mr(this,Q,x))},l)),l.j=w}function tu(l,w){const x=new ci;if(D.Image){const z=new Image;z.onload=d(Yt,x,"TestLoadImage: loaded",!0,w,z),z.onerror=d(Yt,x,"TestLoadImage: error",!1,w,z),z.onabort=d(Yt,x,"TestLoadImage: abort",!1,w,z),z.ontimeout=d(Yt,x,"TestLoadImage: timeout",!1,w,z),D.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=l}else w(!1)}function ga(l,w){const x=new ci,z=new AbortController,Q=setTimeout(()=>{z.abort(),Yt(x,"TestPingServer: timeout",!1,w)},1e4);fetch(l,{signal:z.signal}).then(ne=>{clearTimeout(Q),ne.ok?Yt(x,"TestPingServer: ok",!0,w):Yt(x,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(Q),Yt(x,"TestPingServer: error",!1,w)})}function Yt(l,w,x,z,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),z(x)}catch{}}function nu(){this.g=new Yo}function ma(l,w,x){const z=x||"";try{Pr(l,function(Q,ne){let _e=Q;U(Q)&&(_e=Ko(Q)),w.push(z+ne+"="+encodeURIComponent(_e))})}catch(Q){throw w.push(z+"type="+encodeURIComponent("_badmap")),Q}}function cr(l){this.l=l.Ub||null,this.j=l.eb||!1}f(cr,li),cr.prototype.g=function(){return new yi(this.l,this.j)},cr.prototype.i=function(l){return function(){return l}}({});function yi(l,w){yt.call(this),this.D=l,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}f(yi,yt),i=yi.prototype,i.open=function(l,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=w,this.readyState=1,Vn(this)},i.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(w.body=l),(this.D||D).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},i.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Vn(this)),this.g&&(this.readyState=3,Vn(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof D.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ya(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ya(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}i.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var w=l.value?l.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!l.done}))&&(this.response=this.responseText+=w)}l.done?Mn(this):Vn(this),this.readyState==3&&ya(this)}},i.Ra=function(l){this.g&&(this.response=this.responseText=l,Mn(this))},i.Qa=function(l){this.g&&(this.response=l,Mn(this))},i.ga=function(){this.g&&Mn(this)};function Mn(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Vn(l)}i.setRequestHeader=function(l,w){this.u.append(l,w)},i.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],w=this.h.entries();for(var x=w.next();!x.done;)x=x.value,l.push(x[0]+": "+x[1]),x=w.next();return l.join(`\r
`)};function Vn(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(yi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function hr(l){let w="";return L(l,function(x,z){w+=z,w+=":",w+=x,w+=`\r
`}),w}function Vr(l,w,x){e:{for(z in x){var z=!1;break e}z=!0}z||(x=hr(x),typeof l=="string"?x!=null&&encodeURIComponent(String(x)):Ge(l,w,x))}function tt(l){yt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}f(tt,yt);var ru=/^https?$/i,as=["POST","PUT"];i=tt.prototype,i.Ha=function(l){this.J=l},i.ea=function(l,w,x,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);w=w?w.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():kn.g(),this.v=this.o?qi(this.o):qi(kn),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(w,String(l),!0),this.B=!1}catch(ne){_i(this,ne);return}if(l=x||"",x=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var Q in z)x.set(Q,z[Q]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ne of z.keys())x.set(ne,z.get(ne));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(x.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=D.FormData&&l instanceof D.FormData,!(0<=Array.prototype.indexOf.call(as,w,void 0))||z||Q||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,_e]of x)this.g.setRequestHeader(ne,_e);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{io(this),this.u=!0,this.g.send(l),this.u=!1}catch(ne){_i(this,ne)}};function _i(l,w){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=w,l.m=5,ro(l),cn(l)}function ro(l){l.A||(l.A=!0,_t(l,"complete"),_t(l,"error"))}i.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,_t(this,"complete"),_t(this,"abort"),cn(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cn(this,!0)),tt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?ls(this):this.bb())},i.bb=function(){ls(this)};function ls(l){if(l.h&&typeof A<"u"&&(!l.v[1]||Jt(l)!=4||l.Z()!=2)){if(l.u&&Jt(l)==4)qo(l.Ea,0,l);else if(_t(l,"readystatechange"),Jt(l)==4){l.h=!1;try{const _e=l.Z();e:switch(_e){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var x;if(!(x=w)){var z;if(z=_e===0){var Q=String(l.D).match(gi)[1]||null;!Q&&D.self&&D.self.location&&(Q=D.self.location.protocol.slice(0,-1)),z=!ru.test(Q?Q.toLowerCase():"")}x=z}if(x)_t(l,"complete"),_t(l,"success");else{l.m=6;try{var ne=2<Jt(l)?l.g.statusText:""}catch{ne=""}l.l=ne+" ["+l.Z()+"]",ro(l)}}finally{cn(l)}}}}function cn(l,w){if(l.g){io(l);const x=l.g,z=l.v[0]?()=>{}:null;l.g=null,l.v=null,w||_t(l,"ready");try{x.onreadystatechange=z}catch{}}}function io(l){l.I&&(D.clearTimeout(l.I),l.I=null)}i.isActive=function(){return!!this.g};function Jt(l){return l.g?l.g.readyState:0}i.Z=function(){try{return 2<Jt(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(l){if(this.g){var w=this.g.responseText;return l&&w.indexOf(l)==0&&(w=w.substring(l.length)),Xo(w)}};function us(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function oo(l){const w={};l=(l.g&&2<=Jt(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<l.length;z++){if(S(l[z]))continue;var x=O(l[z]);const Q=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const ne=w[Q]||[];w[Q]=ne,ne.push(x)}R(w,function(z){return z.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xn(l,w,x){return x&&x.internalChannelParams&&x.internalChannelParams[l]||w}function cs(l){this.Aa=0,this.i=[],this.j=new ci,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xn("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xn("baseRetryDelayMs",5e3,l),this.cb=Xn("retryDelaySeedMs",1e4,l),this.Wa=Xn("forwardChannelMaxRetries",2,l),this.wa=Xn("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new pi(l&&l.concurrentRequestLimit),this.Da=new nu,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=cs.prototype,i.la=8,i.G=1,i.connect=function(l,w,x,z){ft(0),this.W=l,this.H=w||{},x&&z!==void 0&&(this.H.OSID=x,this.H.OAID=z),this.F=this.X,this.I=Ea(this,null,this.W),Yn(this)};function kt(l){if(so(l),l.G==3){var w=l.U++,x=un(l.I);if(Ge(x,"SID",l.K),Ge(x,"RID",w),Ge(x,"TYPE","terminate"),fr(l,x),w=new Dn(l,l.j,w),w.L=2,w.v=Nr(un(x)),x=!1,D.navigator&&D.navigator.sendBeacon)try{x=D.navigator.sendBeacon(w.v.toString(),"")}catch{}!x&&D.Image&&(new Image().src=w.v,x=!0),x||(w.g=Ta(w.j,null),w.g.ea(w.v)),w.F=Date.now(),Qe(w)}wa(l)}function Ln(l){l.g&&(hs(l),l.g.cancel(),l.g=null)}function so(l){Ln(l),l.u&&(D.clearTimeout(l.u),l.u=null),uo(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&D.clearTimeout(l.s),l.s=null)}function Yn(l){if(!ln(l.h)&&!l.s){l.s=!0;var w=l.Ga;oe||G(),J||(oe(),J=!0),re.add(w,l),l.B=0}}function iu(l,w){return la(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=w.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=xn(m(l.Ga,l,w),va(l,l.B)),l.B++,!0)}i.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const Q=new Dn(this,this.j,l);let ne=this.o;if(this.S&&(ne?(ne=T(ne),k(ne,this.S)):ne=this.S),this.m!==null||this.O||(Q.H=ne,ne=null),this.P)e:{for(var w=0,x=0;x<this.i.length;x++){t:{var z=this.i[x];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(w+=z,4096<w){w=x;break e}if(w===4096||x===this.i.length-1){w=x+1;break e}}w=1e3}else w=1e3;w=Lr(this,Q,w),x=un(this.I),Ge(x,"RID",l),Ge(x,"CVER",22),this.D&&Ge(x,"X-HTTP-Session-Id",this.D),fr(this,x),ne&&(this.O?w="headers="+encodeURIComponent(String(hr(ne)))+"&"+w:this.m&&Vr(x,this.m,ne)),os(this.h,Q),this.Ua&&Ge(x,"TYPE","init"),this.P?(Ge(x,"$req",w),Ge(x,"SID","null"),Q.T=!0,Zi(Q,x,null)):Zi(Q,x,w),this.G=2}}else this.G==3&&(l?ao(this,l):this.i.length==0||ln(this.h)||ao(this))};function ao(l,w){var x;w?x=w.l:x=l.U++;const z=un(l.I);Ge(z,"SID",l.K),Ge(z,"RID",x),Ge(z,"AID",l.T),fr(l,z),l.m&&l.o&&Vr(z,l.m,l.o),x=new Dn(l,l.j,x,l.B+1),l.m===null&&(x.H=l.o),w&&(l.i=w.D.concat(l.i)),w=Lr(l,x,1e3),x.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),os(l.h,x),Zi(x,z,w)}function fr(l,w){l.H&&L(l.H,function(x,z){Ge(w,z,x)}),l.l&&Pr({},function(x,z){Ge(w,z,x)})}function Lr(l,w,x){x=Math.min(l.i.length,x);var z=l.l?m(l.l.Na,l.l,l):null;e:{var Q=l.i;let ne=-1;for(;;){const _e=["count="+x];ne==-1?0<x?(ne=Q[0].g,_e.push("ofs="+ne)):ne=0:_e.push("ofs="+ne);let We=!0;for(let vt=0;vt<x;vt++){let Ue=Q[vt].g;const Tt=Q[vt].map;if(Ue-=ne,0>Ue)ne=Math.max(0,Q[vt].g-100),We=!1;else try{ma(Tt,_e,"req"+Ue+"_")}catch{z&&z(Tt)}}if(We){z=_e.join("&");break e}}}return l=l.i.splice(0,x),w.D=l,z}function vi(l){if(!l.g&&!l.u){l.Y=1;var w=l.Fa;oe||G(),J||(oe(),J=!0),re.add(w,l),l.v=0}}function lo(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=xn(m(l.Fa,l),va(l,l.v)),l.v++,!0)}i.Fa=function(){if(this.u=null,_a(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=xn(m(this.ab,this),l)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ft(10),Ln(this),_a(this))};function hs(l){l.A!=null&&(D.clearTimeout(l.A),l.A=null)}function _a(l){l.g=new Dn(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var w=un(l.qa);Ge(w,"RID","rpc"),Ge(w,"SID",l.K),Ge(w,"AID",l.T),Ge(w,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ge(w,"TO",l.ja),Ge(w,"TYPE","xmlhttp"),fr(l,w),l.m&&l.o&&Vr(w,l.m,l.o),l.L&&(l.g.I=l.L);var x=l.g;l=l.ia,x.L=1,x.v=Nr(un(w)),x.m=null,x.P=!0,rs(x,l)}i.Za=function(){this.C!=null&&(this.C=null,Ln(this),lo(this),ft(19))};function uo(l){l.C!=null&&(D.clearTimeout(l.C),l.C=null)}function co(l,w){var x=null;if(l.g==w){uo(l),hs(l),l.g=null;var z=2}else if(Wt(l.h,w))x=w.D,ua(l.h,w),z=1;else return;if(l.G!=0){if(w.o)if(z==1){x=w.m?w.m.length:0,w=Date.now()-w.F;var Q=l.B;z=ui(),_t(z,new Ki(z,x)),Yn(l)}else vi(l);else if(Q=w.s,Q==3||Q==0&&0<w.X||!(z==1&&iu(l,w)||z==2&&lo(l)))switch(x&&0<x.length&&(w=l.h,w.i=w.i.concat(x)),Q){case 1:dr(l,5);break;case 4:dr(l,10);break;case 3:dr(l,6);break;default:dr(l,2)}}}function va(l,w){let x=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(x*=2),x*w}function dr(l,w){if(l.j.info("Error code "+w),w==2){var x=m(l.fb,l),z=l.Xa;const Q=!z;z=new ur(z||"//www.google.com/images/cleardot.gif"),D.location&&D.location.protocol=="http"||mi(z,"https"),Nr(z),Q?tu(z.toString(),x):ga(z.toString(),x)}else ft(2);l.G=0,l.l&&l.l.sa(w),wa(l),so(l)}i.fb=function(l){l?(this.j.info("Successfully pinged google.com"),ft(2)):(this.j.info("Failed to ping google.com"),ft(1))};function wa(l){if(l.G=0,l.ka=[],l.l){const w=ca(l.h);(w.length!=0||l.i.length!=0)&&(_(l.ka,w),_(l.ka,l.i),l.h.i.length=0,p(l.i),l.i.length=0),l.l.ra()}}function Ea(l,w,x){var z=x instanceof ur?un(x):new ur(x);if(z.g!="")w&&(z.g=w+"."+z.g),kr(z,z.s);else{var Q=D.location;z=Q.protocol,w=w?w+"."+Q.hostname:Q.hostname,Q=+Q.port;var ne=new ur(null);z&&mi(ne,z),w&&(ne.g=w),Q&&kr(ne,Q),x&&(ne.l=x),z=ne}return x=l.D,w=l.ya,x&&w&&Ge(z,x,w),Ge(z,"VER",l.la),fr(l,z),z}function Ta(l,w,x){if(w&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=l.Ca&&!l.pa?new tt(new cr({eb:x})):new tt(l.pa),w.Ha(l.J),w}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function fs(){}i=fs.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function ho(){}ho.prototype.g=function(l,w){return new qt(l,w)};function qt(l,w){yt.call(this),this.g=new cs(w),this.l=l,this.h=w&&w.messageUrlParams||null,l=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(l?l["X-WebChannel-Content-Type"]=w.messageContentType:l={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(l?l["X-WebChannel-Client-Profile"]=w.va:l={"X-WebChannel-Client-Profile":w.va}),this.g.S=l,(l=w&&w.Sb)&&!S(l)&&(this.g.m=l),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!S(w)&&(this.g.D=w,l=this.h,l!==null&&w in l&&(l=this.h,w in l&&delete l[w])),this.j=new Jn(this)}f(qt,yt),qt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},qt.prototype.close=function(){kt(this.g)},qt.prototype.o=function(l){var w=this.g;if(typeof l=="string"){var x={};x.__data__=l,l=x}else this.u&&(x={},x.__data__=Ko(l),l=x);w.i.push(new aa(w.Ya++,l)),w.G==3&&Yn(w)},qt.prototype.N=function(){this.g.l=null,delete this.j,kt(this.g),delete this.g,qt.aa.N.call(this)};function Sa(l){qn.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var w=l.__sm__;if(w){e:{for(const x in w){l=x;break e}l=void 0}(this.i=l)&&(l=this.i,w=w!==null&&l in w?w[l]:void 0),this.data=w}else this.data=l}f(Sa,qn);function Aa(){Qi.call(this),this.status=1}f(Aa,Qi);function Jn(l){this.g=l}f(Jn,fs),Jn.prototype.ua=function(){_t(this.g,"a")},Jn.prototype.ta=function(l){_t(this.g,new Sa(l))},Jn.prototype.sa=function(l){_t(this.g,new Aa)},Jn.prototype.ra=function(){_t(this.g,"b")},ho.prototype.createWebChannel=ho.prototype.g,qt.prototype.send=qt.prototype.o,qt.prototype.open=qt.prototype.m,qt.prototype.close=qt.prototype.close,ig=function(){return new ho},rg=function(){return ui()},ng=Gn,Hc={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,Cl=Yi,ra.COMPLETE="complete",tg=ra,Gi.EventType=_n,_n.OPEN="a",_n.CLOSE="b",_n.ERROR="c",_n.MESSAGE="d",yt.prototype.listen=yt.prototype.K,zs=Gi,tt.prototype.listenOnce=tt.prototype.L,tt.prototype.getLastError=tt.prototype.Ka,tt.prototype.getLastErrorCode=tt.prototype.Ba,tt.prototype.getStatus=tt.prototype.Z,tt.prototype.getResponseJson=tt.prototype.Oa,tt.prototype.getResponseText=tt.prototype.oa,tt.prototype.send=tt.prototype.ea,tt.prototype.setWithCredentials=tt.prototype.Ha,eg=tt}).apply(typeof _l<"u"?_l:typeof self<"u"?self:typeof window<"u"?window:{});const np="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}$t.UNAUTHENTICATED=new $t(null),$t.GOOGLE_CREDENTIALS=new $t("google-credentials-uid"),$t.FIRST_PARTY=new $t("first-party-uid"),$t.MOCK_USER=new $t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ho="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Hp("@firebase/firestore");function Vo(){return Fi.logLevel}function Re(i,...t){if(Fi.logLevel<=je.DEBUG){const r=t.map(rh);Fi.debug(`Firestore (${Ho}): ${i}`,...r)}}function zi(i,...t){if(Fi.logLevel<=je.ERROR){const r=t.map(rh);Fi.error(`Firestore (${Ho}): ${i}`,...r)}}function Ol(i,...t){if(Fi.logLevel<=je.WARN){const r=t.map(rh);Fi.warn(`Firestore (${Ho}): ${i}`,...r)}}function rh(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fe(i="Unexpected state"){const t=`FIRESTORE (${Ho}) INTERNAL ASSERTION FAILED: `+i;throw zi(t),new Error(t)}function lt(i,t){i||Fe()}function Ye(i,t){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ne extends $i{constructor(t,r){super(t,r),this.code=t,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(){this.promise=new Promise((t,r)=>{this.resolve=t,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(t,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class n1{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,r){t.enqueueRetryable(()=>r($t.UNAUTHENTICATED))}shutdown(){}}class r1{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,r){this.changeListener=r,t.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class i1{constructor(t){this.t=t,this.currentUser=$t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,r){lt(this.o===void 0);let s=this.i;const u=F=>this.i!==s?(s=this.i,r(F)):Promise.resolve();let g=new Vi;this.o=()=>{this.i++,this.currentUser=this.u(),g.resolve(),g=new Vi,t.enqueueRetryable(()=>u(this.currentUser))};const A=()=>{const F=g;t.enqueueRetryable(async()=>{await F.promise,await u(this.currentUser)})},D=F=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=F,this.o&&(this.auth.addAuthTokenListener(this.o),A())};this.t.onInit(F=>D(F)),setTimeout(()=>{if(!this.auth){const F=this.t.getImmediate({optional:!0});F?D(F):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),g.resolve(),g=new Vi)}},0),A()}getToken(){const t=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(s=>this.i!==t?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(lt(typeof s.accessToken=="string"),new og(s.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return lt(t===null||typeof t=="string"),new $t(t)}}class o1{constructor(t,r,s){this.l=t,this.h=r,this.P=s,this.type="FirstParty",this.user=$t.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class s1{constructor(t,r,s){this.l=t,this.h=r,this.P=s}getToken(){return Promise.resolve(new o1(this.l,this.h,this.P))}start(t,r){t.enqueueRetryable(()=>r($t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class a1{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class l1{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,r){lt(this.o===void 0);const s=g=>{g.error!=null&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${g.error.message}`);const A=g.token!==this.R;return this.R=g.token,Re("FirebaseAppCheckTokenProvider",`Received ${A?"new":"existing"} token.`),A?r(g.token):Promise.resolve()};this.o=g=>{t.enqueueRetryable(()=>s(g))};const u=g=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=g,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(g=>u(g)),setTimeout(()=>{if(!this.appCheck){const g=this.A.getImmediate({optional:!0});g?u(g):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(r=>r?(lt(typeof r.token=="string"),this.R=r.token,new a1(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(i){const t=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(r);else for(let s=0;s<i;s++)r[s]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/t.length)*t.length;let s="";for(;s.length<20;){const u=u1(40);for(let g=0;g<u.length;++g)s.length<20&&u[g]<r&&(s+=t.charAt(u[g]%t.length))}return s}}function qe(i,t){return i<t?-1:i>t?1:0}function zo(i,t,r){return i.length===t.length&&i.every((s,u)=>r(s,t[u]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{static now(){return xt.fromMillis(Date.now())}static fromDate(t){return xt.fromMillis(t.getTime())}static fromMillis(t){const r=Math.floor(t/1e3),s=Math.floor(1e6*(t-1e3*r));return new xt(r,s)}constructor(t,r){if(this.seconds=t,this.nanoseconds=r,r<0)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(t<-62135596800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ne(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?qe(this.nanoseconds,t.nanoseconds):qe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{static fromTimestamp(t){return new rt(t)}static min(){return new rt(new xt(0,0))}static max(){return new rt(new xt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs{constructor(t,r,s){r===void 0?r=0:r>t.length&&Fe(),s===void 0?s=t.length-r:s>t.length-r&&Fe(),this.segments=t,this.offset=r,this.len=s}get length(){return this.len}isEqual(t){return Gs.comparator(this,t)===0}child(t){const r=this.segments.slice(this.offset,this.limit());return t instanceof Gs?t.forEach(s=>{r.push(s)}):r.push(t),this.construct(r)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==t.get(r))return!1;return!0}forEach(t){for(let r=this.offset,s=this.limit();r<s;r++)t(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,r){const s=Math.min(t.length,r.length);for(let u=0;u<s;u++){const g=t.get(u),A=r.get(u);if(g<A)return-1;if(g>A)return 1}return t.length<r.length?-1:t.length>r.length?1:0}}class at extends Gs{construct(t,r,s){return new at(t,r,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const r=[];for(const s of t){if(s.indexOf("//")>=0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);r.push(...s.split("/").filter(u=>u.length>0))}return new at(r)}static emptyPath(){return new at([])}}const c1=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vt extends Gs{construct(t,r,s){return new Vt(t,r,s)}static isValidIdentifier(t){return c1.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vt.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Vt(["__name__"])}static fromServerFormat(t){const r=[];let s="",u=0;const g=()=>{if(s.length===0)throw new Ne(pe.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(s),s=""};let A=!1;for(;u<t.length;){const D=t[u];if(D==="\\"){if(u+1===t.length)throw new Ne(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const F=t[u+1];if(F!=="\\"&&F!=="."&&F!=="`")throw new Ne(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);s+=F,u+=2}else D==="`"?(A=!A,u++):D!=="."||A?(s+=D,u++):(g(),u++)}if(g(),A)throw new Ne(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Vt(r)}static emptyPath(){return new Vt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(t){this.path=t}static fromPath(t){return new Me(at.fromString(t))}static fromName(t){return new Me(at.fromString(t).popFirst(5))}static empty(){return new Me(at.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&at.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,r){return at.comparator(t.path,r.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Me(new at(t.slice()))}}function h1(i,t){const r=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,u=rt.fromTimestamp(s===1e9?new xt(r+1,0):new xt(r,s));return new ri(u,Me.empty(),t)}function f1(i){return new ri(i.readTime,i.key,-1)}class ri{constructor(t,r,s){this.readTime=t,this.documentKey=r,this.largestBatchId=s}static min(){return new ri(rt.min(),Me.empty(),-1)}static max(){return new ri(rt.max(),Me.empty(),-1)}}function d1(i,t){let r=i.readTime.compareTo(t.readTime);return r!==0?r:(r=Me.comparator(i.documentKey,t.documentKey),r!==0?r:qe(i.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class g1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(i){if(i.code!==pe.FAILED_PRECONDITION||i.message!==p1)throw i;Re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(t){return this.next(void 0,t)}next(t,r){return this.callbackAttached&&Fe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(t,this.result):new ae((s,u)=>{this.nextCallback=g=>{this.wrapSuccess(t,g).next(s,u)},this.catchCallback=g=>{this.wrapFailure(r,g).next(s,u)}})}toPromise(){return new Promise((t,r)=>{this.next(t,r)})}wrapUserFunction(t){try{const r=t();return r instanceof ae?r:ae.resolve(r)}catch(r){return ae.reject(r)}}wrapSuccess(t,r){return t?this.wrapUserFunction(()=>t(r)):ae.resolve(r)}wrapFailure(t,r){return t?this.wrapUserFunction(()=>t(r)):ae.reject(r)}static resolve(t){return new ae((r,s)=>{r(t)})}static reject(t){return new ae((r,s)=>{s(t)})}static waitFor(t){return new ae((r,s)=>{let u=0,g=0,A=!1;t.forEach(D=>{++u,D.next(()=>{++g,A&&g===u&&r()},F=>s(F))}),A=!0,g===u&&r()})}static or(t){let r=ae.resolve(!1);for(const s of t)r=r.next(u=>u?ae.resolve(u):s());return r}static forEach(t,r){const s=[];return t.forEach((u,g)=>{s.push(r.call(this,u,g))}),this.waitFor(s)}static mapArray(t,r){return new ae((s,u)=>{const g=t.length,A=new Array(g);let D=0;for(let F=0;F<g;F++){const U=F;r(t[U]).next(a=>{A[U]=a,++D,D===g&&s(A)},a=>u(a))}})}static doWhile(t,r){return new ae((s,u)=>{const g=()=>{t()===!0?r().next(()=>{g()},u):s()};g()})}}function m1(i){const t=i.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Zs(i){return i.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ie(s),this.se=s=>r.writeSequenceNumber(s))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}oh.oe=-1;function sh(i){return i==null}function Ml(i){return i===0&&1/i==-1/0}function y1(i){return typeof i=="number"&&Number.isInteger(i)&&!Ml(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(i){let t="";for(let r=0;r<i.length;r++)t.length>0&&(t=rp(t)),t=v1(i.get(r),t);return rp(t)}function v1(i,t){let r=t;const s=i.length;for(let u=0;u<s;u++){const g=i.charAt(u);switch(g){case"\0":r+="";break;case"":r+="";break;default:r+=g}}return r}function rp(i){return i+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(i){let t=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&t++;return t}function Wo(i,t){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&t(r,i[r])}function ag(i){for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(t,r){this.comparator=t,this.root=r||Ot.EMPTY}insert(t,r){return new an(this.comparator,this.root.insert(t,r,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(t){return new an(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(t){let r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return r.value;s<0?r=r.left:s>0&&(r=r.right)}return null}indexOf(t){let r=0,s=this.root;for(;!s.isEmpty();){const u=this.comparator(t,s.key);if(u===0)return r+s.left.size;u<0?s=s.left:(r+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((r,s)=>(t(r,s),!1))}toString(){const t=[];return this.inorderTraversal((r,s)=>(t.push(`${r}:${s}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new vl(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new vl(this.root,t,this.comparator,!1)}getReverseIterator(){return new vl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new vl(this.root,t,this.comparator,!0)}}class vl{constructor(t,r,s,u){this.isReverse=u,this.nodeStack=[];let g=1;for(;!t.isEmpty();)if(g=r?s(t.key,r):1,r&&u&&(g*=-1),g<0)t=this.isReverse?t.left:t.right;else{if(g===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const r={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Ot{constructor(t,r,s,u,g){this.key=t,this.value=r,this.color=s??Ot.RED,this.left=u??Ot.EMPTY,this.right=g??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,r,s,u,g){return new Ot(t??this.key,r??this.value,s??this.color,u??this.left,g??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,s){let u=this;const g=s(t,u.key);return u=g<0?u.copy(null,null,null,u.left.insert(t,r,s),null):g===0?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,s)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,r){let s,u=this;if(r(t,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(t,r),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),r(t,u.key)===0){if(u.right.isEmpty())return Ot.EMPTY;s=u.right.min(),u=u.copy(s.key,s.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(t,r))}return u.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Fe();const t=this.left.check();if(t!==this.right.check())throw Fe();return t+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Fe()}get value(){throw Fe()}get color(){throw Fe()}get left(){throw Fe()}get right(){throw Fe()}copy(t,r,s,u,g){return this}insert(t,r,s){return new Ot(t,r)}remove(t,r){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(t){this.comparator=t,this.data=new an(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((r,s)=>(t(r),!1))}forEachInRange(t,r){const s=this.data.getIteratorFrom(t[0]);for(;s.hasNext();){const u=s.getNext();if(this.comparator(u.key,t[1])>=0)return;r(u.key)}}forEachWhile(t,r){let s;for(s=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();s.hasNext();)if(!t(s.getNext().key))return}firstAfterOrEqual(t){const r=this.data.getIteratorFrom(t);return r.hasNext()?r.getNext().key:null}getIterator(){return new op(this.data.getIterator())}getIteratorFrom(t){return new op(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let r=this;return r.size<t.size&&(r=t,t=this),t.forEach(s=>{r=r.add(s)}),r}isEqual(t){if(!(t instanceof Lt)||this.size!==t.size)return!1;const r=this.data.getIterator(),s=t.data.getIterator();for(;r.hasNext();){const u=r.getNext().key,g=s.getNext().key;if(this.comparator(u,g)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(r=>{t.push(r)}),t}toString(){const t=[];return this.forEach(r=>t.push(r)),"SortedSet("+t.toString()+")"}copy(t){const r=new Lt(this.comparator);return r.data=t,r}}class op{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t){this.fields=t,t.sort(Vt.comparator)}static empty(){return new Wn([])}unionWith(t){let r=new Lt(Vt.comparator);for(const s of this.fields)r=r.add(s);for(const s of t)r=r.add(s);return new Wn(r.toArray())}covers(t){for(const r of this.fields)if(r.isPrefixOf(t))return!0;return!1}isEqual(t){return zo(this.fields,t.fields,(r,s)=>r.isEqual(s))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t){this.binaryString=t}static fromBase64String(t){const r=function(u){try{return atob(u)}catch(g){throw typeof DOMException<"u"&&g instanceof DOMException?new w1("Invalid base64 string: "+g):g}}(t);return new ir(r)}static fromUint8Array(t){const r=function(u){let g="";for(let A=0;A<u.length;++A)g+=String.fromCharCode(u[A]);return g}(t);return new ir(r)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return qe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const E1=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ui(i){if(lt(!!i),typeof i=="string"){let t=0;const r=E1.exec(i);if(lt(!!r),r[1]){let u=r[1];u=(u+"000000000").substr(0,9),t=Number(u)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:t}}return{seconds:Mt(i.seconds),nanos:Mt(i.nanos)}}function Mt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Uo(i){return typeof i=="string"?ir.fromBase64String(i):ir.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ah(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function lh(i){const t=i.mapValue.fields.__previous_value__;return ah(t)?lh(t):t}function Vl(i){const t=Ui(i.mapValue.fields.__local_write_time__.timestampValue);return new xt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{constructor(t,r,s,u,g,A,D,F,U){this.databaseId=t,this.appId=r,this.persistenceKey=s,this.host=u,this.ssl=g,this.forceLongPolling=A,this.autoDetectLongPolling=D,this.longPollingOptions=F,this.useFetchStreams=U}}class Ll{constructor(t,r){this.projectId=t,this.database=r||"(default)"}static empty(){return new Ll("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof Ll&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Bi(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?ah(i)?4:A1(i)?9007199254740991:S1(i)?10:11:Fe()}function or(i,t){if(i===t)return!0;const r=Bi(i);if(r!==Bi(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return Vl(i).isEqual(Vl(t));case 3:return function(u,g){if(typeof u.timestampValue=="string"&&typeof g.timestampValue=="string"&&u.timestampValue.length===g.timestampValue.length)return u.timestampValue===g.timestampValue;const A=Ui(u.timestampValue),D=Ui(g.timestampValue);return A.seconds===D.seconds&&A.nanos===D.nanos}(i,t);case 5:return i.stringValue===t.stringValue;case 6:return function(u,g){return Uo(u.bytesValue).isEqual(Uo(g.bytesValue))}(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return function(u,g){return Mt(u.geoPointValue.latitude)===Mt(g.geoPointValue.latitude)&&Mt(u.geoPointValue.longitude)===Mt(g.geoPointValue.longitude)}(i,t);case 2:return function(u,g){if("integerValue"in u&&"integerValue"in g)return Mt(u.integerValue)===Mt(g.integerValue);if("doubleValue"in u&&"doubleValue"in g){const A=Mt(u.doubleValue),D=Mt(g.doubleValue);return A===D?Ml(A)===Ml(D):isNaN(A)&&isNaN(D)}return!1}(i,t);case 9:return zo(i.arrayValue.values||[],t.arrayValue.values||[],or);case 10:case 11:return function(u,g){const A=u.mapValue.fields||{},D=g.mapValue.fields||{};if(ip(A)!==ip(D))return!1;for(const F in A)if(A.hasOwnProperty(F)&&(D[F]===void 0||!or(A[F],D[F])))return!1;return!0}(i,t);default:return Fe()}}function Qs(i,t){return(i.values||[]).find(r=>or(r,t))!==void 0}function Bo(i,t){if(i===t)return 0;const r=Bi(i),s=Bi(t);if(r!==s)return qe(r,s);switch(r){case 0:case 9007199254740991:return 0;case 1:return qe(i.booleanValue,t.booleanValue);case 2:return function(g,A){const D=Mt(g.integerValue||g.doubleValue),F=Mt(A.integerValue||A.doubleValue);return D<F?-1:D>F?1:D===F?0:isNaN(D)?isNaN(F)?0:-1:1}(i,t);case 3:return sp(i.timestampValue,t.timestampValue);case 4:return sp(Vl(i),Vl(t));case 5:return qe(i.stringValue,t.stringValue);case 6:return function(g,A){const D=Uo(g),F=Uo(A);return D.compareTo(F)}(i.bytesValue,t.bytesValue);case 7:return function(g,A){const D=g.split("/"),F=A.split("/");for(let U=0;U<D.length&&U<F.length;U++){const a=qe(D[U],F[U]);if(a!==0)return a}return qe(D.length,F.length)}(i.referenceValue,t.referenceValue);case 8:return function(g,A){const D=qe(Mt(g.latitude),Mt(A.latitude));return D!==0?D:qe(Mt(g.longitude),Mt(A.longitude))}(i.geoPointValue,t.geoPointValue);case 9:return ap(i.arrayValue,t.arrayValue);case 10:return function(g,A){var D,F,U,a;const h=g.fields||{},m=A.fields||{},d=(D=h.value)===null||D===void 0?void 0:D.arrayValue,f=(F=m.value)===null||F===void 0?void 0:F.arrayValue,p=qe(((U=d==null?void 0:d.values)===null||U===void 0?void 0:U.length)||0,((a=f==null?void 0:f.values)===null||a===void 0?void 0:a.length)||0);return p!==0?p:ap(d,f)}(i.mapValue,t.mapValue);case 11:return function(g,A){if(g===wl.mapValue&&A===wl.mapValue)return 0;if(g===wl.mapValue)return 1;if(A===wl.mapValue)return-1;const D=g.fields||{},F=Object.keys(D),U=A.fields||{},a=Object.keys(U);F.sort(),a.sort();for(let h=0;h<F.length&&h<a.length;++h){const m=qe(F[h],a[h]);if(m!==0)return m;const d=Bo(D[F[h]],U[a[h]]);if(d!==0)return d}return qe(F.length,a.length)}(i.mapValue,t.mapValue);default:throw Fe()}}function sp(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return qe(i,t);const r=Ui(i),s=Ui(t),u=qe(r.seconds,s.seconds);return u!==0?u:qe(r.nanos,s.nanos)}function ap(i,t){const r=i.values||[],s=t.values||[];for(let u=0;u<r.length&&u<s.length;++u){const g=Bo(r[u],s[u]);if(g)return g}return qe(r.length,s.length)}function jo(i){return Wc(i)}function Wc(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(r){const s=Ui(r);return`time(${s.seconds},${s.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(r){return Uo(r).toBase64()}(i.bytesValue):"referenceValue"in i?function(r){return Me.fromName(r).toString()}(i.referenceValue):"geoPointValue"in i?function(r){return`geo(${r.latitude},${r.longitude})`}(i.geoPointValue):"arrayValue"in i?function(r){let s="[",u=!0;for(const g of r.values||[])u?u=!1:s+=",",s+=Wc(g);return s+"]"}(i.arrayValue):"mapValue"in i?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",g=!0;for(const A of s)g?g=!1:u+=",",u+=`${A}:${Wc(r.fields[A])}`;return u+"}"}(i.mapValue):Fe()}function Il(i){switch(Bi(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=lh(i);return t?16+Il(t):16;case 5:return 2*i.stringValue.length;case 6:return Uo(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return function(s){return(s.values||[]).reduce((u,g)=>u+Il(g),0)}(i.arrayValue);case 10:case 11:return function(s){let u=0;return Wo(s.fields,(g,A)=>{u+=g.length+Il(A)}),u}(i.mapValue);default:throw Fe()}}function qc(i){return!!i&&"integerValue"in i}function uh(i){return!!i&&"arrayValue"in i}function xl(i){return!!i&&"mapValue"in i}function S1(i){var t,r;return((r=(((t=i==null?void 0:i.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Us(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const t={mapValue:{fields:{}}};return Wo(i.mapValue.fields,(r,s)=>t.mapValue.fields[r]=Us(s)),t}if(i.arrayValue){const t={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=Us(i.arrayValue.values[r]);return t}return Object.assign({},i)}function A1(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(t){this.value=t}static empty(){return new Hn({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let r=this.value;for(let s=0;s<t.length-1;++s)if(r=(r.mapValue.fields||{})[t.get(s)],!xl(r))return null;return r=(r.mapValue.fields||{})[t.lastSegment()],r||null}}set(t,r){this.getFieldsMap(t.popLast())[t.lastSegment()]=Us(r)}setAll(t){let r=Vt.emptyPath(),s={},u=[];t.forEach((A,D)=>{if(!r.isImmediateParentOf(D)){const F=this.getFieldsMap(r);this.applyChanges(F,s,u),s={},u=[],r=D.popLast()}A?s[D.lastSegment()]=Us(A):u.push(D.lastSegment())});const g=this.getFieldsMap(r);this.applyChanges(g,s,u)}delete(t){const r=this.field(t.popLast());xl(r)&&r.mapValue.fields&&delete r.mapValue.fields[t.lastSegment()]}isEqual(t){return or(this.value,t.value)}getFieldsMap(t){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let s=0;s<t.length;++s){let u=r.mapValue.fields[t.get(s)];xl(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},r.mapValue.fields[t.get(s)]=u),r=u}return r.mapValue.fields}applyChanges(t,r,s){Wo(r,(u,g)=>t[u]=g);for(const u of s)delete t[u]}clone(){return new Hn(Us(this.value))}}function lg(i){const t=[];return Wo(i.fields,(r,s)=>{const u=new Vt([r]);if(xl(s)){const g=lg(s.mapValue).fields;if(g.length===0)t.push(u);else for(const A of g)t.push(u.child(A))}else t.push(u)}),new Wn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,r,s,u,g,A,D){this.key=t,this.documentType=r,this.version=s,this.readTime=u,this.createTime=g,this.data=A,this.documentState=D}static newInvalidDocument(t){return new $n(t,0,rt.min(),rt.min(),rt.min(),Hn.empty(),0)}static newFoundDocument(t,r,s,u){return new $n(t,1,r,rt.min(),s,u,0)}static newNoDocument(t,r){return new $n(t,2,r,rt.min(),rt.min(),Hn.empty(),0)}static newUnknownDocument(t,r){return new $n(t,3,r,rt.min(),rt.min(),Hn.empty(),2)}convertToFoundDocument(t,r){return!this.createTime.isEqual(rt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Hn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof $n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new $n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t,r){this.position=t,this.inclusive=r}}function lp(i,t,r){let s=0;for(let u=0;u<i.position.length;u++){const g=t[u],A=i.position[u];if(g.field.isKeyField()?s=Me.comparator(Me.fromName(A.referenceValue),r.key):s=Bo(A,r.data.field(g.field)),g.dir==="desc"&&(s*=-1),s!==0)break}return s}function up(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!or(i.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(t,r="asc"){this.field=t,this.dir=r}}function R1(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{}class It extends ug{constructor(t,r,s){super(),this.field=t,this.op=r,this.value=s}static create(t,r,s){return t.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(t,r,s):new I1(t,r,s):r==="array-contains"?new k1(t,s):r==="in"?new D1(t,s):r==="not-in"?new N1(t,s):r==="array-contains-any"?new O1(t,s):new It(t,r,s)}static createKeyFieldInFilter(t,r,s){return r==="in"?new x1(t,s):new P1(t,s)}matches(t){const r=t.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Bo(r,this.value)):r!==null&&Bi(this.value)===Bi(r)&&this.matchesComparison(Bo(r,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Fe()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends ug{constructor(t,r){super(),this.filters=t,this.op=r,this.ae=null}static create(t,r){return new ii(t,r)}matches(t){return cg(this)?this.filters.find(r=>!r.matches(t))===void 0:this.filters.find(r=>r.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,r)=>t.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function cg(i){return i.op==="and"}function hg(i){return C1(i)&&cg(i)}function C1(i){for(const t of i.filters)if(t instanceof ii)return!1;return!0}function Gc(i){if(i instanceof It)return i.field.canonicalString()+i.op.toString()+jo(i.value);if(hg(i))return i.filters.map(t=>Gc(t)).join(",");{const t=i.filters.map(r=>Gc(r)).join(",");return`${i.op}(${t})`}}function fg(i,t){return i instanceof It?function(s,u){return u instanceof It&&s.op===u.op&&s.field.isEqual(u.field)&&or(s.value,u.value)}(i,t):i instanceof ii?function(s,u){return u instanceof ii&&s.op===u.op&&s.filters.length===u.filters.length?s.filters.reduce((g,A,D)=>g&&fg(A,u.filters[D]),!0):!1}(i,t):void Fe()}function dg(i){return i instanceof It?function(r){return`${r.field.canonicalString()} ${r.op} ${jo(r.value)}`}(i):i instanceof ii?function(r){return r.op.toString()+" {"+r.getFilters().map(dg).join(" ,")+"}"}(i):"Filter"}class I1 extends It{constructor(t,r,s){super(t,r,s),this.key=Me.fromName(s.referenceValue)}matches(t){const r=Me.comparator(t.key,this.key);return this.matchesComparison(r)}}class x1 extends It{constructor(t,r){super(t,"in",r),this.keys=pg("in",r)}matches(t){return this.keys.some(r=>r.isEqual(t.key))}}class P1 extends It{constructor(t,r){super(t,"not-in",r),this.keys=pg("not-in",r)}matches(t){return!this.keys.some(r=>r.isEqual(t.key))}}function pg(i,t){var r;return(((r=t.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(s=>Me.fromName(s.referenceValue))}class k1 extends It{constructor(t,r){super(t,"array-contains",r)}matches(t){const r=t.data.field(this.field);return uh(r)&&Qs(r.arrayValue,this.value)}}class D1 extends It{constructor(t,r){super(t,"in",r)}matches(t){const r=t.data.field(this.field);return r!==null&&Qs(this.value.arrayValue,r)}}class N1 extends It{constructor(t,r){super(t,"not-in",r)}matches(t){if(Qs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=t.data.field(this.field);return r!==null&&!Qs(this.value.arrayValue,r)}}class O1 extends It{constructor(t,r){super(t,"array-contains-any",r)}matches(t){const r=t.data.field(this.field);return!(!uh(r)||!r.arrayValue.values)&&r.arrayValue.values.some(s=>Qs(this.value.arrayValue,s))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{constructor(t,r=null,s=[],u=[],g=null,A=null,D=null){this.path=t,this.collectionGroup=r,this.orderBy=s,this.filters=u,this.limit=g,this.startAt=A,this.endAt=D,this.ue=null}}function cp(i,t=null,r=[],s=[],u=null,g=null,A=null){return new M1(i,t,r,s,u,g,A)}function ch(i){const t=Ye(i);if(t.ue===null){let r=t.path.canonicalString();t.collectionGroup!==null&&(r+="|cg:"+t.collectionGroup),r+="|f:",r+=t.filters.map(s=>Gc(s)).join(","),r+="|ob:",r+=t.orderBy.map(s=>function(g){return g.field.canonicalString()+g.dir}(s)).join(","),sh(t.limit)||(r+="|l:",r+=t.limit),t.startAt&&(r+="|lb:",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>jo(s)).join(",")),t.endAt&&(r+="|ub:",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>jo(s)).join(",")),t.ue=r}return t.ue}function hh(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<i.orderBy.length;r++)if(!R1(i.orderBy[r],t.orderBy[r]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let r=0;r<i.filters.length;r++)if(!fg(i.filters[r],t.filters[r]))return!1;return i.collectionGroup===t.collectionGroup&&!!i.path.isEqual(t.path)&&!!up(i.startAt,t.startAt)&&up(i.endAt,t.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(t,r=null,s=[],u=[],g=null,A="F",D=null,F=null){this.path=t,this.collectionGroup=r,this.explicitOrderBy=s,this.filters=u,this.limit=g,this.limitType=A,this.startAt=D,this.endAt=F,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function V1(i,t,r,s,u,g,A,D){return new Hl(i,t,r,s,u,g,A,D)}function L1(i){return new Hl(i)}function hp(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function b1(i){return i.collectionGroup!==null}function Bs(i){const t=Ye(i);if(t.ce===null){t.ce=[];const r=new Set;for(const g of t.explicitOrderBy)t.ce.push(g),r.add(g.field.canonicalString());const s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(A){let D=new Lt(Vt.comparator);return A.filters.forEach(F=>{F.getFlattenedFilters().forEach(U=>{U.isInequality()&&(D=D.add(U.field))})}),D})(t).forEach(g=>{r.has(g.canonicalString())||g.isKeyField()||t.ce.push(new Fl(g,s))}),r.has(Vt.keyField().canonicalString())||t.ce.push(new Fl(Vt.keyField(),s))}return t.ce}function Li(i){const t=Ye(i);return t.le||(t.le=F1(t,Bs(i))),t.le}function F1(i,t){if(i.limitType==="F")return cp(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(u=>{const g=u.dir==="desc"?"asc":"desc";return new Fl(u.field,g)});const r=i.endAt?new bl(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new bl(i.startAt.position,i.startAt.inclusive):null;return cp(i.path,i.collectionGroup,t,i.filters,i.limit,r,s)}}function Qc(i,t,r){return new Hl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,r,i.startAt,i.endAt)}function gg(i,t){return hh(Li(i),Li(t))&&i.limitType===t.limitType}function mg(i){return`${ch(Li(i))}|lt:${i.limitType}`}function bs(i){return`Query(target=${function(r){let s=r.path.canonicalString();return r.collectionGroup!==null&&(s+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(s+=`, filters: [${r.filters.map(u=>dg(u)).join(", ")}]`),sh(r.limit)||(s+=", limit: "+r.limit),r.orderBy.length>0&&(s+=`, orderBy: [${r.orderBy.map(u=>function(A){return`${A.field.canonicalString()} (${A.dir})`}(u)).join(", ")}]`),r.startAt&&(s+=", startAt: ",s+=r.startAt.inclusive?"b:":"a:",s+=r.startAt.position.map(u=>jo(u)).join(",")),r.endAt&&(s+=", endAt: ",s+=r.endAt.inclusive?"a:":"b:",s+=r.endAt.position.map(u=>jo(u)).join(",")),`Target(${s})`}(Li(i))}; limitType=${i.limitType})`}function fh(i,t){return t.isFoundDocument()&&function(s,u){const g=u.key.path;return s.collectionGroup!==null?u.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(g):Me.isDocumentKey(s.path)?s.path.isEqual(g):s.path.isImmediateParentOf(g)}(i,t)&&function(s,u){for(const g of Bs(s))if(!g.field.isKeyField()&&u.data.field(g.field)===null)return!1;return!0}(i,t)&&function(s,u){for(const g of s.filters)if(!g.matches(u))return!1;return!0}(i,t)&&function(s,u){return!(s.startAt&&!function(A,D,F){const U=lp(A,D,F);return A.inclusive?U<=0:U<0}(s.startAt,Bs(s),u)||s.endAt&&!function(A,D,F){const U=lp(A,D,F);return A.inclusive?U>=0:U>0}(s.endAt,Bs(s),u))}(i,t)}function z1(i){return(t,r)=>{let s=!1;for(const u of Bs(i)){const g=U1(u,t,r);if(g!==0)return g;s=s||u.field.isKeyField()}return 0}}function U1(i,t,r){const s=i.field.isKeyField()?Me.comparator(t.key,r.key):function(g,A,D){const F=A.data.field(g),U=D.data.field(g);return F!==null&&U!==null?Bo(F,U):Fe()}(i.field,t,r);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return Fe()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,r){this.mapKeyFn=t,this.equalsFn=r,this.inner={},this.innerSize=0}get(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s!==void 0){for(const[u,g]of s)if(this.equalsFn(u,t))return g}}has(t){return this.get(t)!==void 0}set(t,r){const s=this.mapKeyFn(t),u=this.inner[s];if(u===void 0)return this.inner[s]=[[t,r]],void this.innerSize++;for(let g=0;g<u.length;g++)if(this.equalsFn(u[g][0],t))return void(u[g]=[t,r]);u.push([t,r]),this.innerSize++}delete(t){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return!1;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],t))return s.length===1?delete this.inner[r]:s.splice(u,1),this.innerSize--,!0;return!1}forEach(t){Wo(this.inner,(r,s)=>{for(const[u,g]of s)t(u,g)})}isEmpty(){return ag(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new an(Me.comparator);function zl(){return B1}const yg=new an(Me.comparator);function El(...i){let t=yg;for(const r of i)t=t.insert(r.key,r);return t}function _g(i){let t=yg;return i.forEach((r,s)=>t=t.insert(r,s.overlayedDocument)),t}function Mi(){return js()}function vg(){return js()}function js(){return new Hi(i=>i.toString(),(i,t)=>i.isEqual(t))}const j1=new an(Me.comparator),$1=new Lt(Me.comparator);function Ht(...i){let t=$1;for(const r of i)t=t.add(r);return t}const H1=new Lt(qe);function W1(){return H1}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dh(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ml(t)?"-0":t}}function wg(i){return{integerValue:""+i}}function q1(i,t){return y1(t)?wg(t):dh(i,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this._=void 0}}function G1(i,t,r){return i instanceof Ks?function(u,g){const A={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}};return g&&ah(g)&&(g=lh(g)),g&&(A.fields.__previous_value__=g),{mapValue:A}}(r,t):i instanceof Xs?Tg(i,t):i instanceof Ys?Sg(i,t):function(u,g){const A=Eg(u,g),D=fp(A)+fp(u.Pe);return qc(A)&&qc(u.Pe)?wg(D):dh(u.serializer,D)}(i,t)}function Q1(i,t,r){return i instanceof Xs?Tg(i,t):i instanceof Ys?Sg(i,t):r}function Eg(i,t){return i instanceof Ul?function(s){return qc(s)||function(g){return!!g&&"doubleValue"in g}(s)}(t)?t:{integerValue:0}:null}class Ks extends Wl{}class Xs extends Wl{constructor(t){super(),this.elements=t}}function Tg(i,t){const r=Ag(t);for(const s of i.elements)r.some(u=>or(u,s))||r.push(s);return{arrayValue:{values:r}}}class Ys extends Wl{constructor(t){super(),this.elements=t}}function Sg(i,t){let r=Ag(t);for(const s of i.elements)r=r.filter(u=>!or(u,s));return{arrayValue:{values:r}}}class Ul extends Wl{constructor(t,r){super(),this.serializer=t,this.Pe=r}}function fp(i){return Mt(i.integerValue||i.doubleValue)}function Ag(i){return uh(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(t,r){this.field=t,this.transform=r}}function X1(i,t){return i.field.isEqual(t.field)&&function(s,u){return s instanceof Xs&&u instanceof Xs||s instanceof Ys&&u instanceof Ys?zo(s.elements,u.elements,or):s instanceof Ul&&u instanceof Ul?or(s.Pe,u.Pe):s instanceof Ks&&u instanceof Ks}(i.transform,t.transform)}class Y1{constructor(t,r){this.version=t,this.transformResults=r}}class Tr{constructor(t,r){this.updateTime=t,this.exists=r}static none(){return new Tr}static exists(t){return new Tr(void 0,t)}static updateTime(t){return new Tr(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Pl(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists===void 0||i.exists===t.isFoundDocument()}class ql{}function Rg(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Ig(i.key,Tr.none()):new ea(i.key,i.data,Tr.none());{const r=i.data,s=Hn.empty();let u=new Lt(Vt.comparator);for(let g of t.fields)if(!u.has(g)){let A=r.field(g);A===null&&g.length>1&&(g=g.popLast(),A=r.field(g)),A===null?s.delete(g):s.set(g,A),u=u.add(g)}return new Wi(i.key,s,new Wn(u.toArray()),Tr.none())}}function J1(i,t,r){i instanceof ea?function(u,g,A){const D=u.value.clone(),F=pp(u.fieldTransforms,g,A.transformResults);D.setAll(F),g.convertToFoundDocument(A.version,D).setHasCommittedMutations()}(i,t,r):i instanceof Wi?function(u,g,A){if(!Pl(u.precondition,g))return void g.convertToUnknownDocument(A.version);const D=pp(u.fieldTransforms,g,A.transformResults),F=g.data;F.setAll(Cg(u)),F.setAll(D),g.convertToFoundDocument(A.version,F).setHasCommittedMutations()}(i,t,r):function(u,g,A){g.convertToNoDocument(A.version).setHasCommittedMutations()}(0,t,r)}function $s(i,t,r,s){return i instanceof ea?function(g,A,D,F){if(!Pl(g.precondition,A))return D;const U=g.value.clone(),a=gp(g.fieldTransforms,F,A);return U.setAll(a),A.convertToFoundDocument(A.version,U).setHasLocalMutations(),null}(i,t,r,s):i instanceof Wi?function(g,A,D,F){if(!Pl(g.precondition,A))return D;const U=gp(g.fieldTransforms,F,A),a=A.data;return a.setAll(Cg(g)),a.setAll(U),A.convertToFoundDocument(A.version,a).setHasLocalMutations(),D===null?null:D.unionWith(g.fieldMask.fields).unionWith(g.fieldTransforms.map(h=>h.field))}(i,t,r,s):function(g,A,D){return Pl(g.precondition,A)?(A.convertToNoDocument(A.version).setHasLocalMutations(),null):D}(i,t,r)}function Z1(i,t){let r=null;for(const s of i.fieldTransforms){const u=t.data.field(s.field),g=Eg(s.transform,u||null);g!=null&&(r===null&&(r=Hn.empty()),r.set(s.field,g))}return r||null}function dp(i,t){return i.type===t.type&&!!i.key.isEqual(t.key)&&!!i.precondition.isEqual(t.precondition)&&!!function(s,u){return s===void 0&&u===void 0||!(!s||!u)&&zo(s,u,(g,A)=>X1(g,A))}(i.fieldTransforms,t.fieldTransforms)&&(i.type===0?i.value.isEqual(t.value):i.type!==1||i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask))}class ea extends ql{constructor(t,r,s,u=[]){super(),this.key=t,this.value=r,this.precondition=s,this.fieldTransforms=u,this.type=0}getFieldMask(){return null}}class Wi extends ql{constructor(t,r,s,u,g=[]){super(),this.key=t,this.data=r,this.fieldMask=s,this.precondition=u,this.fieldTransforms=g,this.type=1}getFieldMask(){return this.fieldMask}}function Cg(i){const t=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const s=i.data.field(r);t.set(r,s)}}),t}function pp(i,t,r){const s=new Map;lt(i.length===r.length);for(let u=0;u<r.length;u++){const g=i[u],A=g.transform,D=t.data.field(g.field);s.set(g.field,Q1(A,D,r[u]))}return s}function gp(i,t,r){const s=new Map;for(const u of i){const g=u.transform,A=r.data.field(u.field);s.set(u.field,G1(g,A,t))}return s}class Ig extends ql{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class e_ extends ql{constructor(t,r){super(),this.key=t,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(t,r,s,u){this.batchId=t,this.localWriteTime=r,this.baseMutations=s,this.mutations=u}applyToRemoteDocument(t,r){const s=r.mutationResults;for(let u=0;u<this.mutations.length;u++){const g=this.mutations[u];g.key.isEqual(t.key)&&J1(g,t,s[u])}}applyToLocalView(t,r){for(const s of this.baseMutations)s.key.isEqual(t.key)&&(r=$s(s,t,r,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(t.key)&&(r=$s(s,t,r,this.localWriteTime));return r}applyToLocalDocumentSet(t,r){const s=vg();return this.mutations.forEach(u=>{const g=t.get(u.key),A=g.overlayedDocument;let D=this.applyToLocalView(A,g.mutatedFields);D=r.has(u.key)?null:D;const F=Rg(A,D);F!==null&&s.set(u.key,F),A.isValidDocument()||A.convertToNoDocument(rt.min())}),s}keys(){return this.mutations.reduce((t,r)=>t.add(r.key),Ht())}isEqual(t){return this.batchId===t.batchId&&zo(this.mutations,t.mutations,(r,s)=>dp(r,s))&&zo(this.baseMutations,t.baseMutations,(r,s)=>dp(r,s))}}class ph{constructor(t,r,s,u){this.batch=t,this.commitVersion=r,this.mutationResults=s,this.docVersions=u}static from(t,r,s){lt(t.mutations.length===s.length);let u=function(){return j1}();const g=t.mutations;for(let A=0;A<g.length;A++)u=u.insert(g[A].key,s[A].version);return new ph(t,r,s,u)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(t,r){this.largestBatchId=t,this.mutation=r}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Be;function r_(i){switch(i){default:return Fe();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function i_(i){if(i===void 0)return zi("GRPC error has no .code"),pe.UNKNOWN;switch(i){case mt.OK:return pe.OK;case mt.CANCELLED:return pe.CANCELLED;case mt.UNKNOWN:return pe.UNKNOWN;case mt.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case mt.INTERNAL:return pe.INTERNAL;case mt.UNAVAILABLE:return pe.UNAVAILABLE;case mt.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case mt.NOT_FOUND:return pe.NOT_FOUND;case mt.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case mt.ABORTED:return pe.ABORTED;case mt.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case mt.DATA_LOSS:return pe.DATA_LOSS;default:return Fe()}}(Be=mt||(mt={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Zp([4294967295,4294967295],0);class o_{constructor(t,r){this.databaseId=t,this.useProto3Json=r}}function Kc(i,t){return i.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function s_(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function a_(i,t){return Kc(i,t.toTimestamp())}function bo(i){return lt(!!i),rt.fromTimestamp(function(r){const s=Ui(r);return new xt(s.seconds,s.nanos)}(i))}function xg(i,t){return Xc(i,t).canonicalString()}function Xc(i,t){const r=function(u){return new at(["projects",u.projectId,"databases",u.database])}(i).child("documents");return t===void 0?r:r.child(t)}function l_(i){const t=at.fromString(i);return lt(m_(t)),t}function Yc(i,t){return xg(i.databaseId,t.path)}function u_(i){const t=l_(i);return t.length===4?at.emptyPath():h_(t)}function c_(i){return new at(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function h_(i){return lt(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function mp(i,t,r){return{name:Yc(i,t),fields:r.value.mapValue.fields}}function f_(i,t){let r;if(t instanceof ea)r={update:mp(i,t.key,t.value)};else if(t instanceof Ig)r={delete:Yc(i,t.key)};else if(t instanceof Wi)r={update:mp(i,t.key,t.data),updateMask:g_(t.fieldMask)};else{if(!(t instanceof e_))return Fe();r={verify:Yc(i,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(s=>function(g,A){const D=A.transform;if(D instanceof Ks)return{fieldPath:A.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(D instanceof Xs)return{fieldPath:A.field.canonicalString(),appendMissingElements:{values:D.elements}};if(D instanceof Ys)return{fieldPath:A.field.canonicalString(),removeAllFromArray:{values:D.elements}};if(D instanceof Ul)return{fieldPath:A.field.canonicalString(),increment:D.Pe};throw Fe()}(0,s))),t.precondition.isNone||(r.currentDocument=function(u,g){return g.updateTime!==void 0?{updateTime:a_(u,g.updateTime)}:g.exists!==void 0?{exists:g.exists}:Fe()}(i,t.precondition)),r}function d_(i,t){return i&&i.length>0?(lt(t!==void 0),i.map(r=>function(u,g){let A=u.updateTime?bo(u.updateTime):bo(g);return A.isEqual(rt.min())&&(A=bo(g)),new Y1(A,u.transformResults||[])}(r,t))):[]}function p_(i){let t=u_(i.parent);const r=i.structuredQuery,s=r.from?r.from.length:0;let u=null;if(s>0){lt(s===1);const a=r.from[0];a.allDescendants?u=a.collectionId:t=t.child(a.collectionId)}let g=[];r.where&&(g=function(h){const m=Pg(h);return m instanceof ii&&hg(m)?m.getFilters():[m]}(r.where));let A=[];r.orderBy&&(A=function(h){return h.map(m=>function(f){return new Fl(Lo(f.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(f.direction))}(m))}(r.orderBy));let D=null;r.limit&&(D=function(h){let m;return m=typeof h=="object"?h.value:h,sh(m)?null:m}(r.limit));let F=null;r.startAt&&(F=function(h){const m=!!h.before,d=h.values||[];return new bl(d,m)}(r.startAt));let U=null;return r.endAt&&(U=function(h){const m=!h.before,d=h.values||[];return new bl(d,m)}(r.endAt)),V1(t,u,A,g,D,"F",F,U)}function Pg(i){return i.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const s=Lo(r.unaryFilter.field);return It.create(s,"==",{doubleValue:NaN});case"IS_NULL":const u=Lo(r.unaryFilter.field);return It.create(u,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const g=Lo(r.unaryFilter.field);return It.create(g,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const A=Lo(r.unaryFilter.field);return It.create(A,"!=",{nullValue:"NULL_VALUE"});default:return Fe()}}(i):i.fieldFilter!==void 0?function(r){return It.create(Lo(r.fieldFilter.field),function(u){switch(u){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Fe()}}(r.fieldFilter.op),r.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(r){return ii.create(r.compositeFilter.filters.map(s=>Pg(s)),function(u){switch(u){case"AND":return"and";case"OR":return"or";default:return Fe()}}(r.compositeFilter.op))}(i):Fe()}function Lo(i){return Vt.fromServerFormat(i.fieldPath)}function g_(i){const t=[];return i.fields.forEach(r=>t.push(r.canonicalString())),{fieldPaths:t}}function m_(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{constructor(t){this.ht=t}}function __(i){const t=p_({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Qc(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(){this.ln=new w_}addToCollectionParentIndex(t,r){return this.ln.add(r),ae.resolve()}getCollectionParents(t,r){return ae.resolve(this.ln.getEntries(r))}addFieldIndex(t,r){return ae.resolve()}deleteFieldIndex(t,r){return ae.resolve()}deleteAllFieldIndexes(t){return ae.resolve()}createTargetIndexes(t,r){return ae.resolve()}getDocumentsMatchingTarget(t,r){return ae.resolve(null)}getIndexType(t,r){return ae.resolve(0)}getFieldIndexes(t,r){return ae.resolve([])}getNextCollectionGroupToUpdate(t){return ae.resolve(null)}getMinOffset(t,r){return ae.resolve(ri.min())}getMinOffsetFromCollectionGroup(t,r){return ae.resolve(ri.min())}updateCollectionGroup(t,r,s){return ae.resolve()}updateIndexEntries(t,r){return ae.resolve()}}class w_{constructor(){this.index={}}add(t){const r=t.lastSegment(),s=t.popLast(),u=this.index[r]||new Lt(at.comparator),g=!u.has(s);return this.index[r]=u.add(s),g}has(t){const r=t.lastSegment(),s=t.popLast(),u=this.index[r];return u&&u.has(s)}getEntries(t){return(this.index[t]||new Lt(at.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sn{static withCacheSize(t){return new sn(t,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,r,s){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.DEFAULT_COLLECTION_PERCENTILE=10,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sn.DEFAULT=new sn(41943040,sn.DEFAULT_COLLECTION_PERCENTILE,sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sn.DISABLED=new sn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new $o(0)}static Qn(){return new $o(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p([i,t],[r,s]){const u=qe(i,r);return u===0?qe(t,s):u}class E_{constructor(t){this.Gn=t,this.buffer=new Lt(_p),this.zn=0}jn(){return++this.zn}Hn(t){const r=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(r);else{const s=this.buffer.last();_p(r,s)<0&&(this.buffer=this.buffer.delete(s).add(r))}}get maxValue(){return this.buffer.last()[0]}}class T_{constructor(t,r,s){this.garbageCollector=t,this.asyncQueue=r,this.localStore=s,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){Re("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Zs(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):await ih(r)}await this.Yn(3e5)})}}class S_{constructor(t,r){this.Zn=t,this.params=r}calculateTargetCount(t,r){return this.Zn.Xn(t).next(s=>Math.floor(r/100*s))}nthSequenceNumber(t,r){if(r===0)return ae.resolve(oh.oe);const s=new E_(r);return this.Zn.forEachTarget(t,u=>s.Hn(u.sequenceNumber)).next(()=>this.Zn.er(t,u=>s.Hn(u))).next(()=>s.maxValue)}removeTargets(t,r,s){return this.Zn.removeTargets(t,r,s)}removeOrphanedDocuments(t,r){return this.Zn.removeOrphanedDocuments(t,r)}collect(t,r){return this.params.cacheSizeCollectionThreshold===-1?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),ae.resolve(yp)):this.getCacheSize(t).next(s=>s<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),yp):this.tr(t,r))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,r){let s,u,g,A,D,F,U;const a=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),u=this.params.maximumSequenceNumbersToCollect):u=h,A=Date.now(),this.nthSequenceNumber(t,u))).next(h=>(s=h,D=Date.now(),this.removeTargets(t,s,r))).next(h=>(g=h,F=Date.now(),this.removeOrphanedDocuments(t,s))).next(h=>(U=Date.now(),Vo()<=je.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${A-a}ms
	Determined least recently used ${u} in `+(D-A)+`ms
	Removed ${g} targets in `+(F-D)+`ms
	Removed ${h} documents in `+(U-F)+`ms
Total Duration: ${U-a}ms`),ae.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:g,documentsRemoved:h})))}}function A_(i,t){return new S_(i,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(){this.changes=new Hi(t=>t.toString(),(t,r)=>t.isEqual(r)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,r){this.assertNotApplied(),this.changes.set(t,$n.newInvalidDocument(t).setReadTime(r))}getEntry(t,r){this.assertNotApplied();const s=this.changes.get(r);return s!==void 0?ae.resolve(s):this.getFromCache(t,r)}getEntries(t,r){return this.getAllFromCache(t,r)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(t,r){this.overlayedDocument=t,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I_{constructor(t,r,s,u){this.remoteDocumentCache=t,this.mutationQueue=r,this.documentOverlayCache=s,this.indexManager=u}getDocument(t,r){let s=null;return this.documentOverlayCache.getOverlay(t,r).next(u=>(s=u,this.remoteDocumentCache.getEntry(t,r))).next(u=>(s!==null&&$s(s.mutation,u,Wn.empty(),xt.now()),u))}getDocuments(t,r){return this.remoteDocumentCache.getEntries(t,r).next(s=>this.getLocalViewOfDocuments(t,s,Ht()).next(()=>s))}getLocalViewOfDocuments(t,r,s=Ht()){const u=Mi();return this.populateOverlays(t,u,r).next(()=>this.computeViews(t,r,u,s).next(g=>{let A=El();return g.forEach((D,F)=>{A=A.insert(D,F.overlayedDocument)}),A}))}getOverlayedDocuments(t,r){const s=Mi();return this.populateOverlays(t,s,r).next(()=>this.computeViews(t,r,s,Ht()))}populateOverlays(t,r,s){const u=[];return s.forEach(g=>{r.has(g)||u.push(g)}),this.documentOverlayCache.getOverlays(t,u).next(g=>{g.forEach((A,D)=>{r.set(A,D)})})}computeViews(t,r,s,u){let g=zl();const A=js(),D=function(){return js()}();return r.forEach((F,U)=>{const a=s.get(U.key);u.has(U.key)&&(a===void 0||a.mutation instanceof Wi)?g=g.insert(U.key,U):a!==void 0?(A.set(U.key,a.mutation.getFieldMask()),$s(a.mutation,U,a.mutation.getFieldMask(),xt.now())):A.set(U.key,Wn.empty())}),this.recalculateAndSaveOverlays(t,g).next(F=>(F.forEach((U,a)=>A.set(U,a)),r.forEach((U,a)=>{var h;return D.set(U,new C_(a,(h=A.get(U))!==null&&h!==void 0?h:null))}),D))}recalculateAndSaveOverlays(t,r){const s=js();let u=new an((A,D)=>A-D),g=Ht();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,r).next(A=>{for(const D of A)D.keys().forEach(F=>{const U=r.get(F);if(U===null)return;let a=s.get(F)||Wn.empty();a=D.applyToLocalView(U,a),s.set(F,a);const h=(u.get(D.batchId)||Ht()).add(F);u=u.insert(D.batchId,h)})}).next(()=>{const A=[],D=u.getReverseIterator();for(;D.hasNext();){const F=D.getNext(),U=F.key,a=F.value,h=vg();a.forEach(m=>{if(!g.has(m)){const d=Rg(r.get(m),s.get(m));d!==null&&h.set(m,d),g=g.add(m)}}),A.push(this.documentOverlayCache.saveOverlays(t,U,h))}return ae.waitFor(A)}).next(()=>s)}recalculateAndSaveOverlaysForDocumentKeys(t,r){return this.remoteDocumentCache.getEntries(t,r).next(s=>this.recalculateAndSaveOverlays(t,s))}getDocumentsMatchingQuery(t,r,s,u){return function(A){return Me.isDocumentKey(A.path)&&A.collectionGroup===null&&A.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(t,r.path):b1(r)?this.getDocumentsMatchingCollectionGroupQuery(t,r,s,u):this.getDocumentsMatchingCollectionQuery(t,r,s,u)}getNextDocuments(t,r,s,u){return this.remoteDocumentCache.getAllFromCollectionGroup(t,r,s,u).next(g=>{const A=u-g.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,r,s.largestBatchId,u-g.size):ae.resolve(Mi());let D=-1,F=g;return A.next(U=>ae.forEach(U,(a,h)=>(D<h.largestBatchId&&(D=h.largestBatchId),g.get(a)?ae.resolve():this.remoteDocumentCache.getEntry(t,a).next(m=>{F=F.insert(a,m)}))).next(()=>this.populateOverlays(t,U,g)).next(()=>this.computeViews(t,F,U,Ht())).next(a=>({batchId:D,changes:_g(a)})))})}getDocumentsMatchingDocumentQuery(t,r){return this.getDocument(t,new Me(r)).next(s=>{let u=El();return s.isFoundDocument()&&(u=u.insert(s.key,s)),u})}getDocumentsMatchingCollectionGroupQuery(t,r,s,u){const g=r.collectionGroup;let A=El();return this.indexManager.getCollectionParents(t,g).next(D=>ae.forEach(D,F=>{const U=function(h,m){return new Hl(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,F.child(g));return this.getDocumentsMatchingCollectionQuery(t,U,s,u).next(a=>{a.forEach((h,m)=>{A=A.insert(h,m)})})}).next(()=>A))}getDocumentsMatchingCollectionQuery(t,r,s,u){let g;return this.documentOverlayCache.getOverlaysForCollection(t,r.path,s.largestBatchId).next(A=>(g=A,this.remoteDocumentCache.getDocumentsMatchingQuery(t,r,s,g,u))).next(A=>{g.forEach((F,U)=>{const a=U.getKey();A.get(a)===null&&(A=A.insert(a,$n.newInvalidDocument(a)))});let D=El();return A.forEach((F,U)=>{const a=g.get(F);a!==void 0&&$s(a.mutation,U,Wn.empty(),xt.now()),fh(r,U)&&(D=D.insert(F,U))}),D})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,r){return ae.resolve(this.Tr.get(r))}saveBundleMetadata(t,r){return this.Tr.set(r.id,function(u){return{id:u.id,version:u.version,createTime:bo(u.createTime)}}(r)),ae.resolve()}getNamedQuery(t,r){return ae.resolve(this.Ir.get(r))}saveNamedQuery(t,r){return this.Ir.set(r.name,function(u){return{name:u.name,query:__(u.bundledQuery),readTime:bo(u.readTime)}}(r)),ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(){this.overlays=new an(Me.comparator),this.Er=new Map}getOverlay(t,r){return ae.resolve(this.overlays.get(r))}getOverlays(t,r){const s=Mi();return ae.forEach(r,u=>this.getOverlay(t,u).next(g=>{g!==null&&s.set(u,g)})).next(()=>s)}saveOverlays(t,r,s){return s.forEach((u,g)=>{this.Tt(t,r,g)}),ae.resolve()}removeOverlaysForBatchId(t,r,s){const u=this.Er.get(s);return u!==void 0&&(u.forEach(g=>this.overlays=this.overlays.remove(g)),this.Er.delete(s)),ae.resolve()}getOverlaysForCollection(t,r,s){const u=Mi(),g=r.length+1,A=new Me(r.child("")),D=this.overlays.getIteratorFrom(A);for(;D.hasNext();){const F=D.getNext().value,U=F.getKey();if(!r.isPrefixOf(U.path))break;U.path.length===g&&F.largestBatchId>s&&u.set(F.getKey(),F)}return ae.resolve(u)}getOverlaysForCollectionGroup(t,r,s,u){let g=new an((U,a)=>U-a);const A=this.overlays.getIterator();for(;A.hasNext();){const U=A.getNext().value;if(U.getKey().getCollectionGroup()===r&&U.largestBatchId>s){let a=g.get(U.largestBatchId);a===null&&(a=Mi(),g=g.insert(U.largestBatchId,a)),a.set(U.getKey(),U)}}const D=Mi(),F=g.getIterator();for(;F.hasNext()&&(F.getNext().value.forEach((U,a)=>D.set(U,a)),!(D.size()>=u)););return ae.resolve(D)}Tt(t,r,s){const u=this.overlays.get(s.key);if(u!==null){const A=this.Er.get(u.largestBatchId).delete(s.key);this.Er.set(u.largestBatchId,A)}this.overlays=this.overlays.insert(s.key,new n_(r,s));let g=this.Er.get(r);g===void 0&&(g=Ht(),this.Er.set(r,g)),this.Er.set(r,g.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(t){return ae.resolve(this.sessionToken)}setSessionToken(t,r){return this.sessionToken=r,ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(){this.dr=new Lt(Ct.Ar),this.Rr=new Lt(Ct.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(t,r){const s=new Ct(t,r);this.dr=this.dr.add(s),this.Rr=this.Rr.add(s)}mr(t,r){t.forEach(s=>this.addReference(s,r))}removeReference(t,r){this.gr(new Ct(t,r))}pr(t,r){t.forEach(s=>this.removeReference(s,r))}yr(t){const r=new Me(new at([])),s=new Ct(r,t),u=new Ct(r,t+1),g=[];return this.Rr.forEachInRange([s,u],A=>{this.gr(A),g.push(A.key)}),g}wr(){this.dr.forEach(t=>this.gr(t))}gr(t){this.dr=this.dr.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const r=new Me(new at([])),s=new Ct(r,t),u=new Ct(r,t+1);let g=Ht();return this.Rr.forEachInRange([s,u],A=>{g=g.add(A.key)}),g}containsKey(t){const r=new Ct(t,0),s=this.dr.firstAfterOrEqual(r);return s!==null&&t.isEqual(s.key)}}class Ct{constructor(t,r){this.key=t,this.br=r}static Ar(t,r){return Me.comparator(t.key,r.key)||qe(t.br,r.br)}static Vr(t,r){return qe(t.br,r.br)||Me.comparator(t.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(t,r){this.indexManager=t,this.referenceDelegate=r,this.mutationQueue=[],this.Dr=1,this.vr=new Lt(Ct.Ar)}checkEmpty(t){return ae.resolve(this.mutationQueue.length===0)}addMutationBatch(t,r,s,u){const g=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const A=new t_(g,r,s,u);this.mutationQueue.push(A);for(const D of u)this.vr=this.vr.add(new Ct(D.key,g)),this.indexManager.addToCollectionParentIndex(t,D.key.path.popLast());return ae.resolve(A)}lookupMutationBatch(t,r){return ae.resolve(this.Cr(r))}getNextMutationBatchAfterBatchId(t,r){const s=r+1,u=this.Fr(s),g=u<0?0:u;return ae.resolve(this.mutationQueue.length>g?this.mutationQueue[g]:null)}getHighestUnacknowledgedBatchId(){return ae.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,r){const s=new Ct(r,0),u=new Ct(r,Number.POSITIVE_INFINITY),g=[];return this.vr.forEachInRange([s,u],A=>{const D=this.Cr(A.br);g.push(D)}),ae.resolve(g)}getAllMutationBatchesAffectingDocumentKeys(t,r){let s=new Lt(qe);return r.forEach(u=>{const g=new Ct(u,0),A=new Ct(u,Number.POSITIVE_INFINITY);this.vr.forEachInRange([g,A],D=>{s=s.add(D.br)})}),ae.resolve(this.Mr(s))}getAllMutationBatchesAffectingQuery(t,r){const s=r.path,u=s.length+1;let g=s;Me.isDocumentKey(g)||(g=g.child(""));const A=new Ct(new Me(g),0);let D=new Lt(qe);return this.vr.forEachWhile(F=>{const U=F.key.path;return!!s.isPrefixOf(U)&&(U.length===u&&(D=D.add(F.br)),!0)},A),ae.resolve(this.Mr(D))}Mr(t){const r=[];return t.forEach(s=>{const u=this.Cr(s);u!==null&&r.push(u)}),r}removeMutationBatch(t,r){lt(this.Or(r.batchId,"removed")===0),this.mutationQueue.shift();let s=this.vr;return ae.forEach(r.mutations,u=>{const g=new Ct(u.key,r.batchId);return s=s.delete(g),this.referenceDelegate.markPotentiallyOrphaned(t,u.key)}).next(()=>{this.vr=s})}Ln(t){}containsKey(t,r){const s=new Ct(r,0),u=this.vr.firstAfterOrEqual(s);return ae.resolve(r.isEqual(u&&u.key))}performConsistencyCheck(t){return this.mutationQueue.length,ae.resolve()}Or(t,r){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const r=this.Fr(t);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N_{constructor(t){this.Nr=t,this.docs=function(){return new an(Me.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,r){const s=r.key,u=this.docs.get(s),g=u?u.size:0,A=this.Nr(r);return this.docs=this.docs.insert(s,{document:r.mutableCopy(),size:A}),this.size+=A-g,this.indexManager.addToCollectionParentIndex(t,s.path.popLast())}removeEntry(t){const r=this.docs.get(t);r&&(this.docs=this.docs.remove(t),this.size-=r.size)}getEntry(t,r){const s=this.docs.get(r);return ae.resolve(s?s.document.mutableCopy():$n.newInvalidDocument(r))}getEntries(t,r){let s=zl();return r.forEach(u=>{const g=this.docs.get(u);s=s.insert(u,g?g.document.mutableCopy():$n.newInvalidDocument(u))}),ae.resolve(s)}getDocumentsMatchingQuery(t,r,s,u){let g=zl();const A=r.path,D=new Me(A.child("")),F=this.docs.getIteratorFrom(D);for(;F.hasNext();){const{key:U,value:{document:a}}=F.getNext();if(!A.isPrefixOf(U.path))break;U.path.length>A.length+1||d1(f1(a),s)<=0||(u.has(a.key)||fh(r,a))&&(g=g.insert(a.key,a.mutableCopy()))}return ae.resolve(g)}getAllFromCollectionGroup(t,r,s,u){Fe()}Lr(t,r){return ae.forEach(this.docs,s=>r(s))}newChangeBuffer(t){return new O_(this)}getSize(t){return ae.resolve(this.size)}}class O_ extends R_{constructor(t){super(),this.hr=t}applyChanges(t){const r=[];return this.changes.forEach((s,u)=>{u.isValidDocument()?r.push(this.hr.addEntry(t,u)):this.hr.removeEntry(s)}),ae.waitFor(r)}getFromCache(t,r){return this.hr.getEntry(t,r)}getAllFromCache(t,r){return this.hr.getEntries(t,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M_{constructor(t){this.persistence=t,this.Br=new Hi(r=>ch(r),hh),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.kr=0,this.qr=new gh,this.targetCount=0,this.Qr=$o.qn()}forEachTarget(t,r){return this.Br.forEach((s,u)=>r(u)),ae.resolve()}getLastRemoteSnapshotVersion(t){return ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ae.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),ae.resolve(this.highestTargetId)}setTargetsMetadata(t,r,s){return s&&(this.lastRemoteSnapshotVersion=s),r>this.kr&&(this.kr=r),ae.resolve()}Un(t){this.Br.set(t.target,t);const r=t.targetId;r>this.highestTargetId&&(this.Qr=new $o(r),this.highestTargetId=r),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,r){return this.Un(r),this.targetCount+=1,ae.resolve()}updateTargetData(t,r){return this.Un(r),ae.resolve()}removeTargetData(t,r){return this.Br.delete(r.target),this.qr.yr(r.targetId),this.targetCount-=1,ae.resolve()}removeTargets(t,r,s){let u=0;const g=[];return this.Br.forEach((A,D)=>{D.sequenceNumber<=r&&s.get(D.targetId)===null&&(this.Br.delete(A),g.push(this.removeMatchingKeysForTargetId(t,D.targetId)),u++)}),ae.waitFor(g).next(()=>u)}getTargetCount(t){return ae.resolve(this.targetCount)}getTargetData(t,r){const s=this.Br.get(r)||null;return ae.resolve(s)}addMatchingKeys(t,r,s){return this.qr.mr(r,s),ae.resolve()}removeMatchingKeys(t,r,s){this.qr.pr(r,s);const u=this.persistence.referenceDelegate,g=[];return u&&r.forEach(A=>{g.push(u.markPotentiallyOrphaned(t,A))}),ae.waitFor(g)}removeMatchingKeysForTargetId(t,r){return this.qr.yr(r),ae.resolve()}getMatchingKeysForTargetId(t,r){const s=this.qr.Sr(r);return ae.resolve(s)}containsKey(t,r){return ae.resolve(this.qr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t,r){this.Kr={},this.overlays={},this.$r=new oh(0),this.Ur=!1,this.Ur=!0,this.Wr=new k_,this.referenceDelegate=t(this),this.Gr=new M_(this),this.indexManager=new v_,this.remoteDocumentCache=function(u){return new N_(u)}(s=>this.referenceDelegate.zr(s)),this.serializer=new y_(r),this.jr=new x_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let r=this.overlays[t.toKey()];return r||(r=new P_,this.overlays[t.toKey()]=r),r}getMutationQueue(t,r){let s=this.Kr[t.toKey()];return s||(s=new D_(r,this.referenceDelegate),this.Kr[t.toKey()]=s),s}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,r,s){Re("MemoryPersistence","Starting transaction:",t);const u=new V_(this.$r.next());return this.referenceDelegate.Hr(),s(u).next(g=>this.referenceDelegate.Jr(u).next(()=>g)).toPromise().then(g=>(u.raiseOnCommittedEvent(),g))}Yr(t,r){return ae.or(Object.values(this.Kr).map(s=>()=>s.containsKey(t,r)))}}class V_ extends g1{constructor(t){super(),this.currentSequenceNumber=t}}class mh{constructor(t){this.persistence=t,this.Zr=new gh,this.Xr=null}static ei(t){return new mh(t)}get ti(){if(this.Xr)return this.Xr;throw Fe()}addReference(t,r,s){return this.Zr.addReference(s,r),this.ti.delete(s.toString()),ae.resolve()}removeReference(t,r,s){return this.Zr.removeReference(s,r),this.ti.add(s.toString()),ae.resolve()}markPotentiallyOrphaned(t,r){return this.ti.add(r.toString()),ae.resolve()}removeTarget(t,r){this.Zr.yr(r.targetId).forEach(u=>this.ti.add(u.toString()));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(t,r.targetId).next(u=>{u.forEach(g=>this.ti.add(g.toString()))}).next(()=>s.removeTargetData(t,r))}Hr(){this.Xr=new Set}Jr(t){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ae.forEach(this.ti,s=>{const u=Me.fromPath(s);return this.ni(t,u).next(g=>{g||r.removeEntry(u,rt.min())})}).next(()=>(this.Xr=null,r.apply(t)))}updateLimboDocument(t,r){return this.ni(t,r).next(s=>{s?this.ti.delete(r.toString()):this.ti.add(r.toString())})}zr(t){return 0}ni(t,r){return ae.or([()=>ae.resolve(this.Zr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(t,r),()=>this.persistence.Yr(t,r)])}}class Bl{constructor(t,r){this.persistence=t,this.ri=new Hi(s=>_1(s.path),(s,u)=>s.isEqual(u)),this.garbageCollector=A_(this,r)}static ei(t,r){return new Bl(t,r)}Hr(){}Jr(t){return ae.resolve()}forEachTarget(t,r){return this.persistence.getTargetCache().forEachTarget(t,r)}Xn(t){const r=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(s=>r.next(u=>s+u))}nr(t){let r=0;return this.er(t,s=>{r++}).next(()=>r)}er(t,r){return ae.forEach(this.ri,(s,u)=>this.ir(t,s,u).next(g=>g?ae.resolve():r(u)))}removeTargets(t,r,s){return this.persistence.getTargetCache().removeTargets(t,r,s)}removeOrphanedDocuments(t,r){let s=0;const u=this.persistence.getRemoteDocumentCache(),g=u.newChangeBuffer();return u.Lr(t,A=>this.ir(t,A,r).next(D=>{D||(s++,g.removeEntry(A,rt.min()))})).next(()=>g.apply(t)).next(()=>s)}markPotentiallyOrphaned(t,r){return this.ri.set(r,t.currentSequenceNumber),ae.resolve()}removeTarget(t,r){const s=r.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,s)}addReference(t,r,s){return this.ri.set(s,t.currentSequenceNumber),ae.resolve()}removeReference(t,r,s){return this.ri.set(s,t.currentSequenceNumber),ae.resolve()}updateLimboDocument(t,r){return this.ri.set(r,t.currentSequenceNumber),ae.resolve()}zr(t){let r=t.key.toString().length;return t.isFoundDocument()&&(r+=Il(t.data.value)),r}ir(t,r,s){return ae.or([()=>this.persistence.Yr(t,r),()=>this.persistence.getTargetCache().containsKey(t,r),()=>{const u=this.ri.get(r);return ae.resolve(u!==void 0&&u>s)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(t,r,s,u){this.targetId=t,this.fromCache=r,this.Wi=s,this.Gi=u}static zi(t,r){let s=Ht(),u=Ht();for(const g of r.docChanges)switch(g.type){case 0:s=s.add(g.doc.key);break;case 1:u=u.add(g.doc.key)}return new yh(t,r.fromCache,s,u)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b_{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Bm()?8:m1(zm())>0?6:4}()}initialize(t,r){this.Zi=t,this.indexManager=r,this.ji=!0}getDocumentsMatchingQuery(t,r,s,u){const g={result:null};return this.Xi(t,r).next(A=>{g.result=A}).next(()=>{if(!g.result)return this.es(t,r,u,s).next(A=>{g.result=A})}).next(()=>{if(g.result)return;const A=new L_;return this.ts(t,r,A).next(D=>{if(g.result=D,this.Hi)return this.ns(t,r,A,D.size)})}).next(()=>g.result)}ns(t,r,s,u){return s.documentReadCount<this.Ji?(Vo()<=je.DEBUG&&Re("QueryEngine","SDK will not create cache indexes for query:",bs(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),ae.resolve()):(Vo()<=je.DEBUG&&Re("QueryEngine","Query:",bs(r),"scans",s.documentReadCount,"local documents and returns",u,"documents as results."),s.documentReadCount>this.Yi*u?(Vo()<=je.DEBUG&&Re("QueryEngine","The SDK decides to create cache indexes for query:",bs(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Li(r))):ae.resolve())}Xi(t,r){if(hp(r))return ae.resolve(null);let s=Li(r);return this.indexManager.getIndexType(t,s).next(u=>u===0?null:(r.limit!==null&&u===1&&(r=Qc(r,null,"F"),s=Li(r)),this.indexManager.getDocumentsMatchingTarget(t,s).next(g=>{const A=Ht(...g);return this.Zi.getDocuments(t,A).next(D=>this.indexManager.getMinOffset(t,s).next(F=>{const U=this.rs(r,D);return this.ss(r,U,A,F.readTime)?this.Xi(t,Qc(r,null,"F")):this.os(t,U,r,F)}))})))}es(t,r,s,u){return hp(r)||u.isEqual(rt.min())?ae.resolve(null):this.Zi.getDocuments(t,s).next(g=>{const A=this.rs(r,g);return this.ss(r,A,s,u)?ae.resolve(null):(Vo()<=je.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",u.toString(),bs(r)),this.os(t,A,r,h1(u,-1)).next(D=>D))})}rs(t,r){let s=new Lt(z1(t));return r.forEach((u,g)=>{fh(t,g)&&(s=s.add(g))}),s}ss(t,r,s,u){if(t.limit===null)return!1;if(s.size!==r.size)return!0;const g=t.limitType==="F"?r.last():r.first();return!!g&&(g.hasPendingWrites||g.version.compareTo(u)>0)}ts(t,r,s){return Vo()<=je.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",bs(r)),this.Zi.getDocumentsMatchingQuery(t,r,ri.min(),s)}os(t,r,s,u){return this.Zi.getDocumentsMatchingQuery(t,s,u).next(g=>(r.forEach(A=>{g=g.insert(A.key,A)}),g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(t,r,s,u){this.persistence=t,this._s=r,this.serializer=u,this.us=new an(qe),this.cs=new Hi(g=>ch(g),hh),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(s)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new I_(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>t.collect(r,this.us))}}function z_(i,t,r,s){return new F_(i,t,r,s)}async function Dg(i,t){const r=Ye(i);return await r.persistence.runTransaction("Handle user change","readonly",s=>{let u;return r.mutationQueue.getAllMutationBatches(s).next(g=>(u=g,r.Ps(t),r.mutationQueue.getAllMutationBatches(s))).next(g=>{const A=[],D=[];let F=Ht();for(const U of u){A.push(U.batchId);for(const a of U.mutations)F=F.add(a.key)}for(const U of g){D.push(U.batchId);for(const a of U.mutations)F=F.add(a.key)}return r.localDocuments.getDocuments(s,F).next(U=>({Ts:U,removedBatchIds:A,addedBatchIds:D}))})})}function U_(i,t){const r=Ye(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",s=>{const u=t.batch.keys(),g=r.hs.newChangeBuffer({trackRemovals:!0});return function(D,F,U,a){const h=U.batch,m=h.keys();let d=ae.resolve();return m.forEach(f=>{d=d.next(()=>a.getEntry(F,f)).next(p=>{const _=U.docVersions.get(f);lt(_!==null),p.version.compareTo(_)<0&&(h.applyToRemoteDocument(p,U),p.isValidDocument()&&(p.setReadTime(U.commitVersion),a.addEntry(p)))})}),d.next(()=>D.mutationQueue.removeMutationBatch(F,h))}(r,s,t,g).next(()=>g.apply(s)).next(()=>r.mutationQueue.performConsistencyCheck(s)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(s,u,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,function(D){let F=Ht();for(let U=0;U<D.mutationResults.length;++U)D.mutationResults[U].transformResults.length>0&&(F=F.add(D.batch.mutations[U].key));return F}(t))).next(()=>r.localDocuments.getDocuments(s,u))})}function B_(i){const t=Ye(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",r=>t.Gr.getLastRemoteSnapshotVersion(r))}function j_(i,t){const r=Ye(i);return r.persistence.runTransaction("Get next mutation batch","readonly",s=>(t===void 0&&(t=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(s,t)))}class vp{constructor(){this.activeTargetIds=W1()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class $_{constructor(){this._o=new vp,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,r,s){}addLocalQueryTarget(t,r=!0){return r&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,r,s){this.ao[t]=r}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new vp,Promise.resolve()}handleUserChange(t,r,s){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H_{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tl=null;function Oc(){return Tl===null?Tl=function(){return 268435456+Math.round(2147483648*Math.random())}():Tl++,"0x"+Tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class G_ extends class{get Co(){return!1}constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const s=r.ssl?"https":"http",u=encodeURIComponent(this.databaseId.projectId),g=encodeURIComponent(this.databaseId.database);this.Fo=s+"://"+r.host,this.Mo=`projects/${u}/databases/${g}`,this.xo=this.databaseId.database==="(default)"?`project_id=${u}`:`project_id=${u}&database_id=${g}`}Oo(r,s,u,g,A){const D=Oc(),F=this.No(r,s.toUriEncodedString());Re("RestConnection",`Sending RPC '${r}' ${D}:`,F,u);const U={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(U,g,A),this.Bo(r,F,U,u).then(a=>(Re("RestConnection",`Received RPC '${r}' ${D}: `,a),a),a=>{throw Ol("RestConnection",`RPC '${r}' ${D} failed with error: `,a,"url: ",F,"request:",u),a})}ko(r,s,u,g,A,D){return this.Oo(r,s,u,g,A)}Lo(r,s,u){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ho}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach((g,A)=>r[A]=g),u&&u.headers.forEach((g,A)=>r[A]=g)}No(r,s){const u=W_[r];return`${this.Fo}/v1/${s}:${u}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Bo(t,r,s,u){const g=Oc();return new Promise((A,D)=>{const F=new eg;F.setWithCredentials(!0),F.listenOnce(tg.COMPLETE,()=>{try{switch(F.getLastErrorCode()){case Cl.NO_ERROR:const a=F.getResponseJson();Re(jt,`XHR for RPC '${t}' ${g} received:`,JSON.stringify(a)),A(a);break;case Cl.TIMEOUT:Re(jt,`RPC '${t}' ${g} timed out`),D(new Ne(pe.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:const h=F.getStatus();if(Re(jt,`RPC '${t}' ${g} failed with status:`,h,"response text:",F.getResponseText()),h>0){let m=F.getResponseJson();Array.isArray(m)&&(m=m[0]);const d=m==null?void 0:m.error;if(d&&d.status&&d.message){const f=function(_){const v=_.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(v)>=0?v:pe.UNKNOWN}(d.status);D(new Ne(f,d.message))}else D(new Ne(pe.UNKNOWN,"Server responded with status "+F.getStatus()))}else D(new Ne(pe.UNAVAILABLE,"Connection failed."));break;default:Fe()}}finally{Re(jt,`RPC '${t}' ${g} completed.`)}});const U=JSON.stringify(u);Re(jt,`RPC '${t}' ${g} sending request:`,u),F.send(r,"POST",U,s,15)})}qo(t,r,s){const u=Oc(),g=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],A=ig(),D=rg(),F={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},U=this.longPollingOptions.timeoutSeconds;U!==void 0&&(F.longPollingTimeout=Math.round(1e3*U)),this.useFetchStreams&&(F.useFetchStreams=!0),this.Lo(F.initMessageHeaders,r,s),F.encodeInitMessageHeaders=!0;const a=g.join("");Re(jt,`Creating RPC '${t}' stream ${u}: ${a}`,F);const h=A.createWebChannel(a,F);let m=!1,d=!1;const f=new q_({Eo:_=>{d?Re(jt,`Not sending because RPC '${t}' stream ${u} is closed:`,_):(m||(Re(jt,`Opening RPC '${t}' stream ${u} transport.`),h.open(),m=!0),Re(jt,`RPC '${t}' stream ${u} sending:`,_),h.send(_))},Ao:()=>h.close()}),p=(_,v,S)=>{_.listen(v,I=>{try{S(I)}catch(P){setTimeout(()=>{throw P},0)}})};return p(h,zs.EventType.OPEN,()=>{d||(Re(jt,`RPC '${t}' stream ${u} transport opened.`),f.So())}),p(h,zs.EventType.CLOSE,()=>{d||(d=!0,Re(jt,`RPC '${t}' stream ${u} transport closed`),f.Do())}),p(h,zs.EventType.ERROR,_=>{d||(d=!0,Ol(jt,`RPC '${t}' stream ${u} transport errored:`,_),f.Do(new Ne(pe.UNAVAILABLE,"The operation could not be completed")))}),p(h,zs.EventType.MESSAGE,_=>{var v;if(!d){const S=_.data[0];lt(!!S);const I=S,P=(I==null?void 0:I.error)||((v=I[0])===null||v===void 0?void 0:v.error);if(P){Re(jt,`RPC '${t}' stream ${u} received error:`,P);const N=P.status;let L=function(C){const k=mt[C];if(k!==void 0)return i_(k)}(N),R=P.message;L===void 0&&(L=pe.INTERNAL,R="Unknown error status: "+N+" with message "+P.message),d=!0,f.Do(new Ne(L,R)),h.close()}else Re(jt,`RPC '${t}' stream ${u} received:`,S),f.vo(S)}}),p(D,ng.STAT_EVENT,_=>{_.stat===Hc.PROXY?Re(jt,`RPC '${t}' stream ${u} detected buffering proxy`):_.stat===Hc.NOPROXY&&Re(jt,`RPC '${t}' stream ${u} detected no buffering proxy`)}),setTimeout(()=>{f.bo()},0),f}}function Mc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(i){return new o_(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(t,r,s=1e3,u=1.5,g=6e4){this.li=t,this.timerId=r,this.Qo=s,this.Ko=u,this.$o=g,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const r=Math.floor(this.Uo+this.Ho()),s=Math.max(0,Date.now()-this.Go),u=Math.max(0,r-s);u>0&&Re("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.Uo} ms, delay with jitter: ${r} ms, last attempt: ${s} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,u,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(t,r,s,u,g,A,D,F){this.li=t,this.Yo=s,this.Zo=u,this.connection=g,this.authCredentialsProvider=A,this.appCheckCredentialsProvider=D,this.listener=F,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new Ng(t,r)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,r){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():r&&r.code===pe.RESOURCE_EXHAUSTED?(zi(r.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):r&&r.code===pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(r)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),r=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([s,u])=>{this.Xo===r&&this.I_(s,u)},s=>{t(()=>{const u=new Ne(pe.UNKNOWN,"Fetching auth token failed: "+s.message);return this.E_(u)})})}I_(t,r){const s=this.T_(this.Xo);this.stream=this.d_(t,r),this.stream.Ro(()=>{s(()=>this.listener.Ro())}),this.stream.mo(()=>{s(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(u=>{s(()=>this.E_(u))}),this.stream.onMessage(u=>{s(()=>++this.n_==1?this.A_(u):this.onNext(u))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(t){return Re("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return r=>{this.li.enqueueAndForget(()=>this.Xo===t?r():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class K_ extends Q_{constructor(t,r,s,u,g,A){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,s,u,A),this.serializer=g}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(t,r){return this.connection.qo("Write",t,r)}A_(t){return lt(!!t.streamToken),this.lastStreamToken=t.streamToken,lt(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){lt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const r=d_(t.writeResults,t.commitTime),s=bo(t.commitTime);return this.listener.y_(s,r)}w_(){const t={};t.database=c_(this.serializer),this.c_(t)}g_(t){const r={streamToken:this.lastStreamToken,writes:t.map(s=>f_(this.serializer,s))};this.c_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends class{}{constructor(t,r,s,u){super(),this.authCredentials=t,this.appCheckCredentials=r,this.connection=s,this.serializer=u,this.S_=!1}b_(){if(this.S_)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,r,s,u){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([g,A])=>this.connection.Oo(t,Xc(r,s),u,g,A)).catch(g=>{throw g.name==="FirebaseError"?(g.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),g):new Ne(pe.UNKNOWN,g.toString())})}ko(t,r,s,u,g){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([A,D])=>this.connection.ko(t,Xc(r,s),u,A,D,g)).catch(A=>{throw A.name==="FirebaseError"?(A.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),A):new Ne(pe.UNKNOWN,A.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Y_{constructor(t,r){this.asyncQueue=t,this.onlineStateHandler=r,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const r=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(zi(r),this.C_=!1):Re("OnlineStateTracker",r)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J_{constructor(t,r,s,u,g){this.localStore=t,this.datastore=r,this.asyncQueue=s,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=g,this.Q_.uo(A=>{s.enqueueAndForget(async()=>{na(this)&&(Re("RemoteStore","Restarting streams for network reachability change."),await async function(F){const U=Ye(F);U.k_.add(4),await ta(U),U.K_.set("Unknown"),U.k_.delete(4),await Ql(U)}(this))})}),this.K_=new Y_(s,u)}}async function Ql(i){if(na(i))for(const t of i.q_)await t(!0)}async function ta(i){for(const t of i.q_)await t(!1)}function na(i){return Ye(i).k_.size===0}async function Og(i,t,r){if(!Zs(t))throw t;i.k_.add(1),await ta(i),i.K_.set("Offline"),r||(r=()=>B_(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{Re("RemoteStore","Retrying IndexedDB access"),await r(),i.k_.delete(1),await Ql(i)})}function Mg(i,t){return t().catch(r=>Og(i,r,t))}async function Kl(i){const t=Ye(i),r=oi(t);let s=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;Z_(t);)try{const u=await j_(t.localStore,s);if(u===null){t.L_.length===0&&r.a_();break}s=u.batchId,ev(t,u)}catch(u){await Og(t,u)}Vg(t)&&Lg(t)}function Z_(i){return na(i)&&i.L_.length<10}function ev(i,t){i.L_.push(t);const r=oi(i);r.s_()&&r.f_&&r.g_(t.mutations)}function Vg(i){return na(i)&&!oi(i).i_()&&i.L_.length>0}function Lg(i){oi(i).start()}async function tv(i){oi(i).w_()}async function nv(i){const t=oi(i);for(const r of i.L_)t.g_(r.mutations)}async function rv(i,t,r){const s=i.L_.shift(),u=ph.from(s,t,r);await Mg(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),await Kl(i)}async function iv(i,t){t&&oi(i).f_&&await async function(s,u){if(function(A){return r_(A)&&A!==pe.ABORTED}(u.code)){const g=s.L_.shift();oi(s).__(),await Mg(s,()=>s.remoteSyncer.rejectFailedWrite(g.batchId,u)),await Kl(s)}}(i,t),Vg(i)&&Lg(i)}async function Ep(i,t){const r=Ye(i);r.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const s=na(r);r.k_.add(3),await ta(r),s&&r.K_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.k_.delete(3),await Ql(r)}async function ov(i,t){const r=Ye(i);t?(r.k_.delete(2),await Ql(r)):t||(r.k_.add(2),await ta(r),r.K_.set("Unknown"))}function oi(i){return i.G_||(i.G_=function(r,s,u){const g=Ye(r);return g.b_(),new K_(s,g.connection,g.authCredentials,g.appCheckCredentials,g.serializer,u)}(i.datastore,i.asyncQueue,{Ro:()=>Promise.resolve(),mo:tv.bind(null,i),po:iv.bind(null,i),p_:nv.bind(null,i),y_:rv.bind(null,i)}),i.q_.push(async t=>{t?(i.G_.__(),await Kl(i)):(await i.G_.stop(),i.L_.length>0&&(Re("RemoteStore",`Stopping write stream with ${i.L_.length} pending writes`),i.L_=[]))})),i.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,r,s,u,g){this.asyncQueue=t,this.timerId=r,this.targetTimeMs=s,this.op=u,this.removalCallback=g,this.deferred=new Vi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(A=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,r,s,u,g){const A=Date.now()+s,D=new _h(t,r,A,u,g);return D.start(s),D}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ne(pe.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bg(i,t){if(zi("AsyncQueue",`${t}: ${i}`),Zs(i))return new Ne(pe.UNAVAILABLE,`${t}: ${i}`);throw i}class sv{constructor(){this.queries=Tp(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(r,s){const u=Ye(r),g=u.queries;u.queries=Tp(),g.forEach((A,D)=>{for(const F of D.J_)F.onError(s)})})(this,new Ne(pe.ABORTED,"Firestore shutting down"))}}function Tp(){return new Hi(i=>mg(i),gg)}function av(i){i.X_.forEach(t=>{t.next()})}var Sp,Ap;(Ap=Sp||(Sp={})).na="default",Ap.Cache="cache";class lv{constructor(t,r,s,u,g,A){this.localStore=t,this.remoteStore=r,this.eventManager=s,this.sharedClientState=u,this.currentUser=g,this.maxConcurrentLimboResolutions=A,this.Ma={},this.xa=new Hi(D=>mg(D),gg),this.Oa=new Map,this.Na=new Set,this.La=new an(Me.comparator),this.Ba=new Map,this.ka=new gh,this.qa={},this.Qa=new Map,this.Ka=$o.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function uv(i,t,r){const s=dv(i);try{const u=await function(A,D){const F=Ye(A),U=xt.now(),a=D.reduce((d,f)=>d.add(f.key),Ht());let h,m;return F.persistence.runTransaction("Locally write mutations","readwrite",d=>{let f=zl(),p=Ht();return F.hs.getEntries(d,a).next(_=>{f=_,f.forEach((v,S)=>{S.isValidDocument()||(p=p.add(v))})}).next(()=>F.localDocuments.getOverlayedDocuments(d,f)).next(_=>{h=_;const v=[];for(const S of D){const I=Z1(S,h.get(S.key).overlayedDocument);I!=null&&v.push(new Wi(S.key,I,lg(I.value.mapValue),Tr.exists(!0)))}return F.mutationQueue.addMutationBatch(d,U,v,D)}).next(_=>{m=_;const v=_.applyToLocalDocumentSet(h,p);return F.documentOverlayCache.saveOverlays(d,_.batchId,v)})}).then(()=>({batchId:m.batchId,changes:_g(h)}))}(s.localStore,t);s.sharedClientState.addPendingMutation(u.batchId),function(A,D,F){let U=A.qa[A.currentUser.toKey()];U||(U=new an(qe)),U=U.insert(D,F),A.qa[A.currentUser.toKey()]=U}(s,u.batchId,r),await Xl(s,u.changes),await Kl(s.remoteStore)}catch(u){const g=bg(u,"Failed to persist write");r.reject(g)}}function Rp(i,t,r){const s=Ye(i);if(s.isPrimaryClient&&r===0||!s.isPrimaryClient&&r===1){const u=[];s.xa.forEach((g,A)=>{const D=A.view.ea(t);D.snapshot&&u.push(D.snapshot)}),function(A,D){const F=Ye(A);F.onlineState=D;let U=!1;F.queries.forEach((a,h)=>{for(const m of h.J_)m.ea(D)&&(U=!0)}),U&&av(F)}(s.eventManager,t),u.length&&s.Ma.R_(u),s.onlineState=t,s.isPrimaryClient&&s.sharedClientState.setOnlineState(t)}}async function cv(i,t){const r=Ye(i),s=t.batch.batchId;try{const u=await U_(r.localStore,t);zg(r,s,null),Fg(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),await Xl(r,u)}catch(u){await ih(u)}}async function hv(i,t,r){const s=Ye(i);try{const u=await function(A,D){const F=Ye(A);return F.persistence.runTransaction("Reject batch","readwrite-primary",U=>{let a;return F.mutationQueue.lookupMutationBatch(U,D).next(h=>(lt(h!==null),a=h.keys(),F.mutationQueue.removeMutationBatch(U,h))).next(()=>F.mutationQueue.performConsistencyCheck(U)).next(()=>F.documentOverlayCache.removeOverlaysForBatchId(U,a,D)).next(()=>F.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(U,a)).next(()=>F.localDocuments.getDocuments(U,a))})}(s.localStore,t);zg(s,t,r),Fg(s,t),s.sharedClientState.updateMutationState(t,"rejected",r),await Xl(s,u)}catch(u){await ih(u)}}function Fg(i,t){(i.Qa.get(t)||[]).forEach(r=>{r.resolve()}),i.Qa.delete(t)}function zg(i,t,r){const s=Ye(i);let u=s.qa[s.currentUser.toKey()];if(u){const g=u.get(t);g&&(r?g.reject(r):g.resolve(),u=u.remove(t)),s.qa[s.currentUser.toKey()]=u}}async function Xl(i,t,r){const s=Ye(i),u=[],g=[],A=[];s.xa.isEmpty()||(s.xa.forEach((D,F)=>{A.push(s.Ua(F,t,r).then(U=>{var a;if((U||r)&&s.isPrimaryClient){const h=U?!U.fromCache:(a=void 0)===null||a===void 0?void 0:a.current;s.sharedClientState.updateQueryState(F.targetId,h?"current":"not-current")}if(U){u.push(U);const h=yh.zi(F.targetId,U);g.push(h)}}))}),await Promise.all(A),s.Ma.R_(u),await async function(F,U){const a=Ye(F);try{await a.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ae.forEach(U,m=>ae.forEach(m.Wi,d=>a.persistence.referenceDelegate.addReference(h,m.targetId,d)).next(()=>ae.forEach(m.Gi,d=>a.persistence.referenceDelegate.removeReference(h,m.targetId,d)))))}catch(h){if(!Zs(h))throw h;Re("LocalStore","Failed to update sequence numbers: "+h)}for(const h of U){const m=h.targetId;if(!h.fromCache){const d=a.us.get(m),f=d.snapshotVersion,p=d.withLastLimboFreeSnapshotVersion(f);a.us=a.us.insert(m,p)}}}(s.localStore,g))}async function fv(i,t){const r=Ye(i);if(!r.currentUser.isEqual(t)){Re("SyncEngine","User change. New user:",t.toKey());const s=await Dg(r.localStore,t);r.currentUser=t,function(g,A){g.Qa.forEach(D=>{D.forEach(F=>{F.reject(new Ne(pe.CANCELLED,A))})}),g.Qa.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),await Xl(r,s.Ts)}}function dv(i){const t=Ye(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=cv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=hv.bind(null,t),t}class jl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Gl(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,r){return null}Ya(t,r){return null}Ha(t){return z_(this.persistence,new b_,t.initialUser,this.serializer)}ja(t){return new kg(mh.ei,this.serializer)}za(t){return new $_}async terminate(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jl.provider={build:()=>new jl};class pv extends jl{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,r){lt(this.persistence.referenceDelegate instanceof Bl);const s=this.persistence.referenceDelegate.garbageCollector;return new T_(s,t.asyncQueue,r)}ja(t){const r=this.cacheSizeBytes!==void 0?sn.withCacheSize(this.cacheSizeBytes):sn.DEFAULT;return new kg(s=>Bl.ei(s,r),this.serializer)}}class Jc{async initialize(t,r){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Rp(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=fv.bind(null,this.syncEngine),await ov(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new sv}()}createDatastore(t){const r=Gl(t.databaseInfo.databaseId),s=function(g){return new G_(g)}(t.databaseInfo);return function(g,A,D,F){return new X_(g,A,D,F)}(t.authCredentials,t.appCheckCredentials,s,r)}createRemoteStore(t){return function(s,u,g,A,D){return new J_(s,u,g,A,D)}(this.localStore,this.datastore,t.asyncQueue,r=>Rp(this.syncEngine,r,0),function(){return wp.p()?new wp:new H_}())}createSyncEngine(t,r){return function(u,g,A,D,F,U,a){const h=new lv(u,g,A,D,F,U);return a&&(h.$a=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}async terminate(){var t,r;await async function(u){const g=Ye(u);Re("RemoteStore","RemoteStore shutting down."),g.k_.add(5),await ta(g),g.Q_.shutdown(),g.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Jc.provider={build:()=>new Jc};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(t,r,s,u,g){this.authCredentials=t,this.appCheckCredentials=r,this.asyncQueue=s,this.databaseInfo=u,this.user=$t.UNAUTHENTICATED,this.clientId=sg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=g,this.authCredentials.start(s,async A=>{Re("FirestoreClient","Received user=",A.uid),await this.authCredentialListener(A),this.user=A}),this.appCheckCredentials.start(s,A=>(Re("FirestoreClient","Received new app check token=",A),this.appCheckCredentialListener(A,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=bg(r,"Failed to shutdown persistence");t.reject(s)}}),t.promise}}async function Vc(i,t){i.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const r=i.configuration;await t.initialize(r);let s=r.initialUser;i.setCredentialChangeListener(async u=>{s.isEqual(u)||(await Dg(t.localStore,u),s=u)}),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t}async function Cp(i,t){i.asyncQueue.verifyOperationInProgress();const r=await mv(i);Re("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(r,i.configuration),i.setCredentialChangeListener(s=>Ep(t.remoteStore,s)),i.setAppCheckTokenChangeListener((s,u)=>Ep(t.remoteStore,u)),i._onlineComponents=t}async function mv(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){Re("FirestoreClient","Using user provided OfflineComponentProvider");try{await Vc(i,i._uninitializedComponentsProvider._offline)}catch(t){const r=t;if(!function(u){return u.name==="FirebaseError"?u.code===pe.FAILED_PRECONDITION||u.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||u.code===22||u.code===20||u.code===11}(r))throw r;Ol("Error using user provided cache. Falling back to memory cache: "+r),await Vc(i,new jl)}}else Re("FirestoreClient","Using default OfflineComponentProvider"),await Vc(i,new pv(void 0));return i._offlineComponents}async function yv(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(Re("FirestoreClient","Using user provided OnlineComponentProvider"),await Cp(i,i._uninitializedComponentsProvider._online)):(Re("FirestoreClient","Using default OnlineComponentProvider"),await Cp(i,new Jc))),i._onlineComponents}function _v(i){return yv(i).then(t=>t.syncEngine)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(i){const t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bg(i,t,r){if(!r)throw new Ne(pe.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function vv(i,t,r,s){if(t===!0&&s===!0)throw new Ne(pe.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function xp(i){if(!Me.isDocumentKey(i))throw new Ne(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Pp(i){if(Me.isDocumentKey(i))throw new Ne(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function vh(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const t=function(s){return s.constructor?s.constructor.name:null}(i);return t?`a custom ${t} object`:"an object"}}return typeof i=="function"?"a function":Fe()}function jg(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new Ne(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=vh(i);throw new Ne(pe.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(t){var r,s;if(t.host===void 0){if(t.ssl!==void 0)throw new Ne(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(r=t.ssl)===null||r===void 0||r;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Ne(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}vv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ug((s=t.experimentalLongPollingOptions)!==null&&s!==void 0?s:{}),function(g){if(g.timeoutSeconds!==void 0){if(isNaN(g.timeoutSeconds))throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (must not be NaN)`);if(g.timeoutSeconds<5)throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (minimum allowed value is 5)`);if(g.timeoutSeconds>30)throw new Ne(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${g.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(s,u){return s.timeoutSeconds===u.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Yl{constructor(t,r,s,u){this._authCredentials=t,this._appCheckCredentials=r,this._databaseId=s,this._app=u,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kp({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ne(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Ne(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kp(t),t.credentials!==void 0&&(this._authCredentials=function(s){if(!s)return new n1;switch(s.type){case"firstParty":return new s1(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new Ne(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const s=Ip.get(r);s&&(Re("ComponentProvider","Removing Datastore"),Ip.delete(r),s.terminate())}(this),Promise.resolve()}}function wv(i,t,r,s={}){var u;const g=(i=jg(i,Yl))._getSettings(),A=`${t}:${r}`;if(g.host!=="firestore.googleapis.com"&&g.host!==A&&Ol("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},g),{host:A,ssl:!1})),s.mockUserToken){let D,F;if(typeof s.mockUserToken=="string")D=s.mockUserToken,F=$t.MOCK_USER;else{D=jp(s.mockUserToken,(u=i._app)===null||u===void 0?void 0:u.options.projectId);const U=s.mockUserToken.sub||s.mockUserToken.user_id;if(!U)throw new Ne(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");F=new $t(U)}i._authCredentials=new r1(new og(D,F))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(t,r,s){this.converter=r,this._query=s,this.type="query",this.firestore=t}withConverter(t){return new wh(this.firestore,t,this._query)}}class Sr{constructor(t,r,s){this.converter=r,this._key=s,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ni(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Sr(this.firestore,t,this._key)}}class ni extends wh{constructor(t,r,s){super(t,r,L1(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Sr(this.firestore,null,new Me(t))}withConverter(t){return new ni(this.firestore,t,this._path)}}function Ev(i,t,...r){if(i=Ar(i),Bg("collection","path",t),i instanceof Yl){const s=at.fromString(t,...r);return Pp(s),new ni(i,null,s)}{if(!(i instanceof Sr||i instanceof ni))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(t,...r));return Pp(s),new ni(i.firestore,null,s)}}function Tv(i,t,...r){if(i=Ar(i),arguments.length===1&&(t=sg.newId()),Bg("doc","path",t),i instanceof Yl){const s=at.fromString(t,...r);return xp(s),new Sr(i,null,new Me(s))}{if(!(i instanceof Sr||i instanceof ni))throw new Ne(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(at.fromString(t,...r));return xp(s),new Sr(i.firestore,i instanceof ni?i.converter:null,new Me(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(t=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new Ng(this,"async_queue_retry"),this.fu=()=>{const s=Mc();s&&Re("AsyncQueue","Visibility state changed to "+s.visibilityState),this.r_.Jo()},this.gu=t;const r=Mc();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.Eu){this.Eu=!0,this.Vu=t||!1;const r=Mc();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.Eu)return new Promise(()=>{});const r=new Vi;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(t().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!Zs(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const r=this.gu.then(()=>(this.Ru=!0,t().catch(s=>{this.Au=s,this.Ru=!1;const u=function(A){let D=A.message||"";return A.stack&&(D=A.stack.includes(A.message)?A.stack:A.message+`
`+A.stack),D}(s);throw zi("INTERNAL UNHANDLED ERROR: ",u),s}).then(s=>(this.Ru=!1,s))));return this.gu=r,r}enqueueAfterDelay(t,r,s){this.pu(),this.mu.indexOf(t)>-1&&(r=0);const u=_h.createAndSchedule(this,t,r,s,g=>this.Su(g));return this.du.push(u),u}pu(){this.Au&&Fe()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const r of this.du)if(r.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.du.sort((r,s)=>r.targetTimeMs-s.targetTimeMs);for(const r of this.du)if(r.skipDelay(),t!=="all"&&r.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const r=this.du.indexOf(t);this.du.splice(r,1)}}class $g extends Yl{constructor(t,r,s,u){super(t,r,s,u),this.type="firestore",this._queue=new Dp,this._persistenceKey=(u==null?void 0:u.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Dp(t),this._firestoreClient=void 0,await t}}}function Sv(i,t){const r=typeof i=="object"?i:Xp(),s=typeof i=="string"?i:"(default)",u=Gp(r,"firestore").getImmediate({identifier:s});if(!u._initialized){const g=Up("firestore");g&&wv(u,...g)}return u}function Av(i){if(i._terminated)throw new Ne(pe.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||Rv(i),i._firestoreClient}function Rv(i){var t,r,s;const u=i._freezeSettings(),g=function(D,F,U,a){return new T1(D,F,U,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,Ug(a.experimentalLongPollingOptions),a.useFetchStreams)}(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,u);i._componentsProvider||!((r=u.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((s=u.localCache)===null||s===void 0)&&s._onlineComponentProvider)&&(i._componentsProvider={_offline:u.localCache._offlineComponentProvider,_online:u.localCache._onlineComponentProvider}),i._firestoreClient=new gv(i._authCredentials,i._appCheckCredentials,i._queue,g,i._componentsProvider&&function(D){const F=D==null?void 0:D._online.build();return{_offline:D==null?void 0:D._offline.build(F),_online:F}}(i._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Js(ir.fromBase64String(t))}catch(r){throw new Ne(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(t){return new Js(ir.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(...t){for(let r=0;r<t.length;++r)if(t[r].length===0)throw new Ne(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(t,r){if(!isFinite(t)||t<-90||t>90)throw new Ne(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(r)||r<-180||r>180)throw new Ne(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=t,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return qe(this._lat,t._lat)||qe(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t){this._values=(t||[]).map(r=>r)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(s,u){if(s.length!==u.length)return!1;for(let g=0;g<s.length;++g)if(s[g]!==u[g])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=/^__.*__$/;class Iv{constructor(t,r,s){this.data=t,this.fieldMask=r,this.fieldTransforms=s}toMutation(t,r){return this.fieldMask!==null?new Wi(t,this.data,this.fieldMask,r,this.fieldTransforms):new ea(t,this.data,r,this.fieldTransforms)}}function Gg(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Fe()}}class Th{constructor(t,r,s,u,g,A){this.settings=t,this.databaseId=r,this.serializer=s,this.ignoreUndefinedProperties=u,g===void 0&&this.Fu(),this.fieldTransforms=g||[],this.fieldMask=A||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new Th(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(t),u=this.xu({path:s,Nu:!1});return u.Lu(t),u}Bu(t){var r;const s=(r=this.path)===null||r===void 0?void 0:r.child(t),u=this.xu({path:s,Nu:!1});return u.Fu(),u}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return $l(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(r=>t.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>t.isPrefixOf(r.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lu(this.path.get(t))}Lu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(Gg(this.Mu)&&Cv.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class xv{constructor(t,r,s){this.databaseId=t,this.ignoreUndefinedProperties=r,this.serializer=s||Gl(t)}$u(t,r,s,u=!1){return new Th({Mu:t,methodName:r,Ku:s,path:Vt.emptyPath(),Nu:!1,Qu:u},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Pv(i){const t=i._freezeSettings(),r=Gl(i._databaseId);return new xv(i._databaseId,!!t.ignoreUndefinedProperties,r)}function kv(i,t,r,s,u,g={}){const A=i.$u(g.merge||g.mergeFields?2:0,t,r,u);Yg("Data must be an object, but it was:",A,s);const D=Kg(s,A);let F,U;if(g.merge)F=new Wn(A.fieldMask),U=A.fieldTransforms;else if(g.mergeFields){const a=[];for(const h of g.mergeFields){const m=Dv(t,h,r);if(!A.contains(m))throw new Ne(pe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Mv(a,m)||a.push(m)}F=new Wn(a),U=A.fieldTransforms.filter(h=>F.covers(h.field))}else F=null,U=A.fieldTransforms;return new Iv(new Hn(D),F,U)}class Sh extends Eh{_toFieldTransform(t){return new K1(t.path,new Ks)}isEqual(t){return t instanceof Sh}}function Qg(i,t){if(Xg(i=Ar(i)))return Yg("Unsupported field value:",t,i),Kg(i,t);if(i instanceof Eh)return function(s,u){if(!Gg(u.Mu))throw u.qu(`${s._methodName}() can only be used with update() and set()`);if(!u.path)throw u.qu(`${s._methodName}() is not currently supported inside arrays`);const g=s._toFieldTransform(u);g&&u.fieldTransforms.push(g)}(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(s,u){const g=[];let A=0;for(const D of s){let F=Qg(D,u.ku(A));F==null&&(F={nullValue:"NULL_VALUE"}),g.push(F),A++}return{arrayValue:{values:g}}}(i,t)}return function(s,u){if((s=Ar(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return q1(u.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const g=xt.fromDate(s);return{timestampValue:Kc(u.serializer,g)}}if(s instanceof xt){const g=new xt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Kc(u.serializer,g)}}if(s instanceof Wg)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Js)return{bytesValue:s_(u.serializer,s._byteString)};if(s instanceof Sr){const g=u.databaseId,A=s.firestore._databaseId;if(!A.isEqual(g))throw u.qu(`Document reference is for database ${A.projectId}/${A.database} but should be for database ${g.projectId}/${g.database}`);return{referenceValue:xg(s.firestore._databaseId||u.databaseId,s._key.path)}}if(s instanceof qg)return function(A,D){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:A.toArray().map(F=>{if(typeof F!="number")throw D.qu("VectorValues must only contain numeric values.");return dh(D.serializer,F)})}}}}}}(s,u);throw u.qu(`Unsupported field value: ${vh(s)}`)}(i,t)}function Kg(i,t){const r={};return ag(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wo(i,(s,u)=>{const g=Qg(u,t.Ou(s));g!=null&&(r[s]=g)}),{mapValue:{fields:r}}}function Xg(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof xt||i instanceof Wg||i instanceof Js||i instanceof Sr||i instanceof Eh||i instanceof qg)}function Yg(i,t,r){if(!Xg(r)||!function(u){return typeof u=="object"&&u!==null&&(Object.getPrototypeOf(u)===Object.prototype||Object.getPrototypeOf(u)===null)}(r)){const s=vh(r);throw s==="an object"?t.qu(i+" a custom object"):t.qu(i+" "+s)}}function Dv(i,t,r){if((t=Ar(t))instanceof Hg)return t._internalPath;if(typeof t=="string")return Ov(i,t);throw $l("Field path arguments must be of type string or ",i,!1,void 0,r)}const Nv=new RegExp("[~\\*/\\[\\]]");function Ov(i,t,r){if(t.search(Nv)>=0)throw $l(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new Hg(...t.split("."))._internalPath}catch{throw $l(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function $l(i,t,r,s,u){const g=s&&!s.isEmpty(),A=u!==void 0;let D=`Function ${t}() called with invalid data`;r&&(D+=" (via `toFirestore()`)"),D+=". ";let F="";return(g||A)&&(F+=" (found",g&&(F+=` in field ${s}`),A&&(F+=` in document ${u}`),F+=")"),new Ne(pe.INVALID_ARGUMENT,D+i+F)}function Mv(i,t){return i.some(r=>r.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vv(i,t,r){let s;return s=i?i.toFirestore(t):t,s}function Lv(i,t){const r=jg(i.firestore,$g),s=Tv(i),u=Vv(i.converter,t);return bv(r,[kv(Pv(i.firestore),"addDoc",s._key,u,i.converter!==null,{}).toMutation(s._key,Tr.exists(!1))]).then(()=>s)}function bv(i,t){return function(s,u){const g=new Vi;return s.asyncQueue.enqueueAndForget(async()=>uv(await _v(s),u,g)),g.promise}(Av(i),t)}function Fv(){return new Sh("serverTimestamp")}(function(t,r=!0){(function(u){Ho=u})(Qp),Ws(new Fo("firestore",(s,{instanceIdentifier:u,options:g})=>{const A=s.getProvider("app").getImmediate(),D=new $g(new i1(s.getProvider("auth-internal")),new l1(s.getProvider("app-check-internal")),function(U,a){if(!Object.prototype.hasOwnProperty.apply(U.options,["projectId"]))throw new Ne(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ll(U.options.projectId,a)}(A,u),A);return g=Object.assign({useFetchStreams:r},g),D._setSettings(g),D},"PUBLIC").setMultipleInstances(!0)),ti(np,"4.7.5",t),ti(np,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="firebasestorage.googleapis.com",Zg="storageBucket",zv=2*60*1e3,Uv=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends $i{constructor(t,r,s=0){super(Lc(t),`Firebase Storage: ${r} (${Lc(t)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ct.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Lc(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ut;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ut||(ut={}));function Lc(i){return"storage/"+i}function Ah(){const i="An unknown error occurred, please check the error payload for server response.";return new ct(ut.UNKNOWN,i)}function Bv(i){return new ct(ut.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function jv(i){return new ct(ut.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function $v(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ct(ut.UNAUTHENTICATED,i)}function Hv(){return new ct(ut.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Wv(i){return new ct(ut.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function qv(){return new ct(ut.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gv(){return new ct(ut.CANCELED,"User canceled the upload/download.")}function Qv(i){return new ct(ut.INVALID_URL,"Invalid URL '"+i+"'.")}function Kv(i){return new ct(ut.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function Xv(){return new ct(ut.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Zg+"' property when initializing the app?")}function Yv(){return new ct(ut.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Jv(){return new ct(ut.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Zv(i){return new ct(ut.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Zc(i){return new ct(ut.INVALID_ARGUMENT,i)}function e0(){return new ct(ut.APP_DELETED,"The Firebase app was deleted.")}function ew(i){return new ct(ut.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Hs(i,t){return new ct(ut.INVALID_FORMAT,"String does not match format '"+i+"': "+t)}function Fs(i){throw new ct(ut.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t,r){this.bucket=t,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,r){let s;try{s=gn.makeFromUrl(t,r)}catch{return new gn(t,"")}if(s.path==="")return s;throw Kv(t)}static makeFromUrl(t,r){let s=null;const u="([A-Za-z0-9.\\-_]+)";function g(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const A="(/(.*))?$",D=new RegExp("^gs://"+u+A,"i"),F={bucket:1,path:3};function U(P){P.path_=decodeURIComponent(P.path)}const a="v[A-Za-z0-9_]+",h=r.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",d=new RegExp(`^https?://${h}/${a}/b/${u}/o${m}`,"i"),f={bucket:1,path:3},p=r===Jg?"(?:storage.googleapis.com|storage.cloud.google.com)":r,_="([^?#]*)",v=new RegExp(`^https?://${p}/${u}/${_}`,"i"),I=[{regex:D,indices:F,postModify:g},{regex:d,indices:f,postModify:U},{regex:v,indices:{bucket:1,path:2},postModify:U}];for(let P=0;P<I.length;P++){const N=I[P],L=N.regex.exec(t);if(L){const R=L[N.indices.bucket];let T=L[N.indices.path];T||(T=""),s=new gn(R,T),N.postModify(s);break}}if(s==null)throw Qv(t);return s}}class tw{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(i,t,r){let s=1,u=null,g=null,A=!1,D=0;function F(){return D===2}let U=!1;function a(..._){U||(U=!0,t.apply(null,_))}function h(_){u=setTimeout(()=>{u=null,i(d,F())},_)}function m(){g&&clearTimeout(g)}function d(_,...v){if(U){m();return}if(_){m(),a.call(null,_,...v);return}if(F()||A){m(),a.call(null,_,...v);return}s<64&&(s*=2);let I;D===1?(D=2,I=0):I=(s+Math.random())*1e3,h(I)}let f=!1;function p(_){f||(f=!0,m(),!U&&(u!==null?(_||(D=2),clearTimeout(u),h(0)):_||(D=1)))}return h(0),g=setTimeout(()=>{A=!0,p(!0)},r),p}function rw(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(i){return i!==void 0}function ow(i){return typeof i=="object"&&!Array.isArray(i)}function Rh(i){return typeof i=="string"||i instanceof String}function Np(i){return Ch()&&i instanceof Blob}function Ch(){return typeof Blob<"u"}function Op(i,t,r,s){if(s<t)throw Zc(`Invalid value for '${i}'. Expected ${t} or greater.`);if(s>r)throw Zc(`Invalid value for '${i}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ih(i,t,r){let s=t;return r==null&&(s=`https://${t}`),`${r}://${s}/v0${i}`}function t0(i){const t=encodeURIComponent;let r="?";for(const s in i)if(i.hasOwnProperty(s)){const u=t(s)+"="+t(i[s]);r=r+u+"&"}return r=r.slice(0,-1),r}var bi;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(bi||(bi={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sw(i,t){const r=i>=500&&i<600,u=[408,429].indexOf(i)!==-1,g=t.indexOf(i)!==-1;return r||u||g}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(t,r,s,u,g,A,D,F,U,a,h,m=!0){this.url_=t,this.method_=r,this.headers_=s,this.body_=u,this.successCodes_=g,this.additionalRetryCodes_=A,this.callback_=D,this.errorCallback_=F,this.timeout_=U,this.progressCallback_=a,this.connectionFactory_=h,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((d,f)=>{this.resolve_=d,this.reject_=f,this.start_()})}start_(){const t=(s,u)=>{if(u){s(!1,new Sl(!1,null,!0));return}const g=this.connectionFactory_();this.pendingConnection_=g;const A=D=>{const F=D.loaded,U=D.lengthComputable?D.total:-1;this.progressCallback_!==null&&this.progressCallback_(F,U)};this.progressCallback_!==null&&g.addUploadProgressListener(A),g.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&g.removeUploadProgressListener(A),this.pendingConnection_=null;const D=g.getErrorCode()===bi.NO_ERROR,F=g.getStatus();if(!D||sw(F,this.additionalRetryCodes_)&&this.retry){const a=g.getErrorCode()===bi.ABORT;s(!1,new Sl(!1,null,a));return}const U=this.successCodes_.indexOf(F)!==-1;s(!0,new Sl(U,g))})},r=(s,u)=>{const g=this.resolve_,A=this.reject_,D=u.connection;if(u.wasSuccessCode)try{const F=this.callback_(D,D.getResponse());iw(F)?g(F):g()}catch(F){A(F)}else if(D!==null){const F=Ah();F.serverResponse=D.getErrorText(),this.errorCallback_?A(this.errorCallback_(D,F)):A(F)}else if(u.canceled){const F=this.appDelete_?e0():Gv();A(F)}else{const F=qv();A(F)}};this.canceled_?r(!1,new Sl(!1,null,!0)):this.backoffId_=nw(t,r,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&rw(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sl{constructor(t,r,s){this.wasSuccessCode=t,this.connection=r,this.canceled=!!s}}function lw(i,t){t!==null&&t.length>0&&(i.Authorization="Firebase "+t)}function uw(i,t){i["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function cw(i,t){t&&(i["X-Firebase-GMPID"]=t)}function hw(i,t){t!==null&&(i["X-Firebase-AppCheck"]=t)}function fw(i,t,r,s,u,g,A=!0){const D=t0(i.urlParams),F=i.url+D,U=Object.assign({},i.headers);return cw(U,t),lw(U,r),uw(U,g),hw(U,s),new aw(F,i.method,U,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,u,A)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dw(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function pw(...i){const t=dw();if(t!==void 0){const r=new t;for(let s=0;s<i.length;s++)r.append(i[s]);return r.getBlob()}else{if(Ch())return new Blob(i);throw new ct(ut.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gw(i,t,r){return i.webkitSlice?i.webkitSlice(t,r):i.mozSlice?i.mozSlice(t,r):i.slice?i.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(i){if(typeof atob>"u")throw Zv("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class bc{constructor(t,r){this.data=t,this.contentType=r||null}}function yw(i,t){switch(i){case rr.RAW:return new bc(n0(t));case rr.BASE64:case rr.BASE64URL:return new bc(r0(i,t));case rr.DATA_URL:return new bc(vw(t),ww(t))}throw Ah()}function n0(i){const t=[];for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);if(s<=127)t.push(s);else if(s<=2047)t.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(r<i.length-1&&(i.charCodeAt(r+1)&64512)===56320))t.push(239,191,189);else{const g=s,A=i.charCodeAt(++r);s=65536|(g&1023)<<10|A&1023,t.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?t.push(239,191,189):t.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(t)}function _w(i){let t;try{t=decodeURIComponent(i)}catch{throw Hs(rr.DATA_URL,"Malformed data URL.")}return n0(t)}function r0(i,t){switch(i){case rr.BASE64:{const u=t.indexOf("-")!==-1,g=t.indexOf("_")!==-1;if(u||g)throw Hs(i,"Invalid character '"+(u?"-":"_")+"' found: is it base64url encoded?");break}case rr.BASE64URL:{const u=t.indexOf("+")!==-1,g=t.indexOf("/")!==-1;if(u||g)throw Hs(i,"Invalid character '"+(u?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let r;try{r=mw(t)}catch(u){throw u.message.includes("polyfill")?u:Hs(i,"Invalid character found")}const s=new Uint8Array(r.length);for(let u=0;u<r.length;u++)s[u]=r.charCodeAt(u);return s}class i0{constructor(t){this.base64=!1,this.contentType=null;const r=t.match(/^data:([^,]+)?,/);if(r===null)throw Hs(rr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=r[1]||null;s!=null&&(this.base64=Ew(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=t.substring(t.indexOf(",")+1)}}function vw(i){const t=new i0(i);return t.base64?r0(rr.BASE64,t.rest):_w(t.rest)}function ww(i){return new i0(i).contentType}function Ew(i,t){return i.length>=t.length?i.substring(i.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(t,r){let s=0,u="";Np(t)?(this.data_=t,s=t.size,u=t.type):t instanceof ArrayBuffer?(r?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),s=this.data_.length):t instanceof Uint8Array&&(r?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),s=t.length),this.size_=s,this.type_=u}size(){return this.size_}type(){return this.type_}slice(t,r){if(Np(this.data_)){const s=this.data_,u=gw(s,t,r);return u===null?null:new Jr(u)}else{const s=new Uint8Array(this.data_.buffer,t,r-t);return new Jr(s,!0)}}static getBlob(...t){if(Ch()){const r=t.map(s=>s instanceof Jr?s.data_:s);return new Jr(pw.apply(null,r))}else{const r=t.map(A=>Rh(A)?yw(rr.RAW,A).data:A.data_);let s=0;r.forEach(A=>{s+=A.byteLength});const u=new Uint8Array(s);let g=0;return r.forEach(A=>{for(let D=0;D<A.length;D++)u[g++]=A[D]}),new Jr(u,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o0(i){let t;try{t=JSON.parse(i)}catch{return null}return ow(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(i){if(i.length===0)return null;const t=i.lastIndexOf("/");return t===-1?"":i.slice(0,t)}function Sw(i,t){const r=t.split("/").filter(s=>s.length>0).join("/");return i.length===0?r:i+"/"+r}function s0(i){const t=i.lastIndexOf("/",i.length-2);return t===-1?i:i.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(i,t){return t}class Kt{constructor(t,r,s,u){this.server=t,this.local=r||t,this.writable=!!s,this.xform=u||Aw}}let Al=null;function Rw(i){return!Rh(i)||i.length<2?i:s0(i)}function a0(){if(Al)return Al;const i=[];i.push(new Kt("bucket")),i.push(new Kt("generation")),i.push(new Kt("metageneration")),i.push(new Kt("name","fullPath",!0));function t(g,A){return Rw(A)}const r=new Kt("name");r.xform=t,i.push(r);function s(g,A){return A!==void 0?Number(A):A}const u=new Kt("size");return u.xform=s,i.push(u),i.push(new Kt("timeCreated")),i.push(new Kt("updated")),i.push(new Kt("md5Hash",null,!0)),i.push(new Kt("cacheControl",null,!0)),i.push(new Kt("contentDisposition",null,!0)),i.push(new Kt("contentEncoding",null,!0)),i.push(new Kt("contentLanguage",null,!0)),i.push(new Kt("contentType",null,!0)),i.push(new Kt("metadata","customMetadata",!0)),Al=i,Al}function Cw(i,t){function r(){const s=i.bucket,u=i.fullPath,g=new gn(s,u);return t._makeStorageReference(g)}Object.defineProperty(i,"ref",{get:r})}function Iw(i,t,r){const s={};s.type="file";const u=r.length;for(let g=0;g<u;g++){const A=r[g];s[A.local]=A.xform(s,t[A.server])}return Cw(s,i),s}function l0(i,t,r){const s=o0(t);return s===null?null:Iw(i,s,r)}function xw(i,t,r,s){const u=o0(t);if(u===null||!Rh(u.downloadTokens))return null;const g=u.downloadTokens;if(g.length===0)return null;const A=encodeURIComponent;return g.split(",").map(U=>{const a=i.bucket,h=i.fullPath,m="/b/"+A(a)+"/o/"+A(h),d=Ih(m,r,s),f=t0({alt:"media",token:U});return d+f})[0]}function Pw(i,t){const r={},s=t.length;for(let u=0;u<s;u++){const g=t[u];g.writable&&(r[g.server]=i[g.local])}return JSON.stringify(r)}class u0{constructor(t,r,s,u){this.url=t,this.method=r,this.handler=s,this.timeout=u,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(i){if(!i)throw Ah()}function kw(i,t){function r(s,u){const g=l0(i,u,t);return c0(g!==null),g}return r}function Dw(i,t){function r(s,u){const g=l0(i,u,t);return c0(g!==null),xw(g,u,i.host,i._protocol)}return r}function h0(i){function t(r,s){let u;return r.getStatus()===401?r.getErrorText().includes("Firebase App Check token is invalid")?u=Hv():u=$v():r.getStatus()===402?u=jv(i.bucket):r.getStatus()===403?u=Wv(i.path):u=s,u.status=r.getStatus(),u.serverResponse=s.serverResponse,u}return t}function Nw(i){const t=h0(i);function r(s,u){let g=t(s,u);return s.getStatus()===404&&(g=Bv(i.path)),g.serverResponse=u.serverResponse,g}return r}function Ow(i,t,r){const s=t.fullServerUrl(),u=Ih(s,i.host,i._protocol),g="GET",A=i.maxOperationRetryTime,D=new u0(u,g,Dw(i,r),A);return D.errorHandler=Nw(t),D}function Mw(i,t){return i&&i.contentType||t&&t.type()||"application/octet-stream"}function Vw(i,t,r){const s=Object.assign({},r);return s.fullPath=i.path,s.size=t.size(),s.contentType||(s.contentType=Mw(null,t)),s}function Lw(i,t,r,s,u){const g=t.bucketOnlyServerUrl(),A={"X-Goog-Upload-Protocol":"multipart"};function D(){let I="";for(let P=0;P<2;P++)I=I+Math.random().toString().slice(2);return I}const F=D();A["Content-Type"]="multipart/related; boundary="+F;const U=Vw(t,s,u),a=Pw(U,r),h="--"+F+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+a+`\r
--`+F+`\r
Content-Type: `+U.contentType+`\r
\r
`,m=`\r
--`+F+"--",d=Jr.getBlob(h,s,m);if(d===null)throw Yv();const f={name:U.fullPath},p=Ih(g,i.host,i._protocol),_="POST",v=i.maxUploadRetryTime,S=new u0(p,_,kw(i,r),v);return S.urlParams=f,S.headers=A,S.body=d.uploadData(),S.errorHandler=h0(t),S}class bw{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=bi.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=bi.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=bi.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,r,s,u){if(this.sent_)throw Fs("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(r,t,!0),u!==void 0)for(const g in u)u.hasOwnProperty(g)&&this.xhr_.setRequestHeader(g,u[g].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Fs("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Fs("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Fs("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Fs("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Fw extends bw{initXhr(){this.xhr_.responseType="text"}}function f0(){return new Fw}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,r){this._service=t,r instanceof gn?this._location=r:this._location=gn.makeFromUrl(r,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,r){return new ji(t,r)}get root(){const t=new gn(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return s0(this._location.path)}get storage(){return this._service}get parent(){const t=Tw(this._location.path);if(t===null)return null;const r=new gn(this._location.bucket,t);return new ji(this._service,r)}_throwIfRoot(t){if(this._location.path==="")throw ew(t)}}function zw(i,t,r){i._throwIfRoot("uploadBytes");const s=Lw(i.storage,i._location,a0(),new Jr(t,!0),r);return i.storage.makeRequestWithTokens(s,f0).then(u=>({metadata:u,ref:i}))}function Uw(i){i._throwIfRoot("getDownloadURL");const t=Ow(i.storage,i._location,a0());return i.storage.makeRequestWithTokens(t,f0).then(r=>{if(r===null)throw Jv();return r})}function Bw(i,t){const r=Sw(i._location.path,t),s=new gn(i._location.bucket,r);return new ji(i.storage,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jw(i){return/^[A-Za-z]+:\/\//.test(i)}function $w(i,t){return new ji(i,t)}function d0(i,t){if(i instanceof xh){const r=i;if(r._bucket==null)throw Xv();const s=new ji(r,r._bucket);return t!=null?d0(s,t):s}else return t!==void 0?Bw(i,t):i}function Hw(i,t){if(t&&jw(t)){if(i instanceof xh)return $w(i,t);throw Zc("To use ref(service, url), the first argument must be a Storage instance.")}else return d0(i,t)}function Mp(i,t){const r=t==null?void 0:t[Zg];return r==null?null:gn.makeFromBucketSpec(r,i)}function Ww(i,t,r,s={}){i.host=`${t}:${r}`,i._protocol="http";const{mockUserToken:u}=s;u&&(i._overrideAuthToken=typeof u=="string"?u:jp(u,i.app.options.projectId))}class xh{constructor(t,r,s,u,g){this.app=t,this._authProvider=r,this._appCheckProvider=s,this._url=u,this._firebaseVersion=g,this._bucket=null,this._host=Jg,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zv,this._maxUploadRetryTime=Uv,this._requests=new Set,u!=null?this._bucket=gn.makeFromBucketSpec(u,this._host):this._bucket=Mp(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=gn.makeFromBucketSpec(this._url,t):this._bucket=Mp(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Op("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Op("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const r=await t.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ji(this,t)}_makeRequest(t,r,s,u,g=!0){if(this._deleted)return new tw(e0());{const A=fw(t,this._appId,s,u,r,this._firebaseVersion,g);return this._requests.add(A),A.getPromise().then(()=>this._requests.delete(A),()=>this._requests.delete(A)),A}}async makeRequestWithTokens(t,r){const[s,u]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,r,s,u).getPromise()}}const Vp="@firebase/storage",Lp="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p0="storage";function qw(i,t,r){return i=Ar(i),zw(i,t,r)}function Gw(i){return i=Ar(i),Uw(i)}function Qw(i,t){return i=Ar(i),Hw(i,t)}function Kw(i=Xp(),t){i=Ar(i);const s=Gp(i,p0).getImmediate({identifier:t}),u=Up("storage");return u&&Xw(s,...u),s}function Xw(i,t,r,s={}){Ww(i,t,r,s)}function Yw(i,{instanceIdentifier:t}){const r=i.getProvider("app").getImmediate(),s=i.getProvider("auth-internal"),u=i.getProvider("app-check-internal");return new xh(r,s,u,t,Qp)}function Jw(){Ws(new Fo(p0,Yw,"PUBLIC").setMultipleInstances(!0)),ti(Vp,Lp,""),ti(Vp,Lp,"esm2017")}Jw();var kl={exports:{}},Zw=kl.exports,bp;function eE(){return bp||(bp=1,function(i){(function(t,r){var s=r.toString();i.exports=r(s)})(Zw,function(t){/**
* @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
* Available via the MIT or new BSD license.
* see: http://github.com/jrburke/almond for details
*/var r,s,u;(function(a){var h,m,d,f,p={},_={},v={},S={},I=Object.prototype.hasOwnProperty,P=[].slice,N=/\.js$/;function L($,ee){return I.call($,ee)}function R($,ee){var X,oe,J,re,G,B,q,ue,se,ve,De,ie=ee&&ee.split("/"),he=v.map,me=he&&he["*"]||{};if($&&$.charAt(0)===".")if(ee){for(ie=ie.slice(0,ie.length-1),$=$.split("/"),G=$.length-1,v.nodeIdCompat&&N.test($[G])&&($[G]=$[G].replace(N,"")),$=ie.concat($),se=0;se<$.length;se+=1)if(De=$[se],De===".")$.splice(se,1),se-=1;else if(De===".."){if(se===1&&($[2]===".."||$[0]===".."))break;se>0&&($.splice(se-1,2),se-=2)}$=$.join("/")}else $.indexOf("./")===0&&($=$.substring(2));if((ie||me)&&he){for(X=$.split("/"),se=X.length;se>0;se-=1){if(oe=X.slice(0,se).join("/"),ie){for(ve=ie.length;ve>0;ve-=1)if(J=he[ie.slice(0,ve).join("/")],J&&(J=J[oe],J)){re=J,B=se;break}}if(re)break;!q&&me&&me[oe]&&(q=me[oe],ue=se)}!re&&q&&(re=q,B=ue),re&&(X.splice(0,B,re),$=X.join("/"))}return $}function T($,ee){return function(){return m.apply(a,P.call(arguments,0).concat([$,ee]))}}function C($){return function(ee){return R(ee,$)}}function k($){return function(ee){p[$]=ee}}function O($){if(L(_,$)){var ee=_[$];delete _[$],S[$]=!0,h.apply(a,ee)}if(!L(p,$)&&!L(S,$))throw new Error("No "+$);return p[$]}function b($){var ee,X=$?$.indexOf("!"):-1;return X>-1&&(ee=$.substring(0,X),$=$.substring(X+1,$.length)),[ee,$]}d=function($,ee){var X,oe=b($),J=oe[0];return $=oe[1],J&&(J=R(J,ee),X=O(J)),J?X&&X.normalize?$=X.normalize($,C(ee)):$=R($,ee):($=R($,ee),oe=b($),J=oe[0],$=oe[1],J&&(X=O(J))),{f:J?J+"!"+$:$,n:$,pr:J,p:X}};function V($){return function(){return v&&v.config&&v.config[$]||{}}}f={require:function($){return T($)},exports:function($){var ee=p[$];return typeof ee<"u"?ee:p[$]={}},module:function($){return{id:$,uri:"",exports:p[$],config:V($)}}},h=function($,ee,X,oe){var J,re,G,B,q,ue=[],se=typeof X,ve;if(oe=oe||$,se==="undefined"||se==="function"){for(ee=!ee.length&&X.length?["require","exports","module"]:ee,q=0;q<ee.length;q+=1)if(B=d(ee[q],oe),re=B.f,re==="require")ue[q]=f.require($);else if(re==="exports")ue[q]=f.exports($),ve=!0;else if(re==="module")J=ue[q]=f.module($);else if(L(p,re)||L(_,re)||L(S,re))ue[q]=O(re);else if(B.p)B.p.load(B.n,T(oe,!0),k(re),{}),ue[q]=p[re];else throw new Error($+" missing "+re);G=X?X.apply(p[$],ue):void 0,$&&(J&&J.exports!==a&&J.exports!==p[$]?p[$]=J.exports:(G!==a||!ve)&&(p[$]=G))}else $&&(p[$]=X)},r=s=m=function($,ee,X,oe,J){if(typeof $=="string")return f[$]?f[$](ee):O(d($,ee).f);if(!$.splice){if(v=$,v.deps&&m(v.deps,v.callback),!ee)return;ee.splice?($=ee,ee=X,X=null):$=a}return ee=ee||function(){},typeof X=="function"&&(X=oe,oe=J),oe?h(a,$,ee,X):setTimeout(function(){h(a,$,ee,X)},4),m},m.config=function($){return m($)},r._defined=p,u=function($,ee,X){ee.splice||(X=ee,ee=[]),!L(p,$)&&!L(_,$)&&(_[$]=[$,ee,X])},u.amd={jQuery:!0}})(),u("almond",function(){}),u("image_loader",[],function(){var a={};a.load=function(m,d,f,p,_){var v=new Array(p),S=new Array(v.length),I,P,N;if(_===!1)v[0]=m;else for(I=0;I<v.length;I++)N=f+I,v[I]=m+"image-"+("00"+N).slice(-3)+".jpg";for(S.notLoaded=[],S.addImage=function(L){S.notLoaded.push(L)},S.loaded=function(L){for(var R=S.notLoaded,T=0;T<R.length;T++)if(R[T]==L){R.splice(T,1);for(var C=0;C<v.length;C++){var k=v[C].substr(v[C].lastIndexOf("/"));if(L.src.lastIndexOf(k)!=-1){S[C]=L;break}}break}R.length===0&&(console.log("Images loaded"),d.apply(null,[S]))},I=0;I<v.length;I++)P=new Image,S.addImage(P),h(P,S),P.src=v[I]};function h(m,d){m.onload=function(){d.loaded(this)}}return a}),u("input_stream",["image_loader"],function(a){var h={};return h.createVideoStream=function(m){var d={},f=null,p=["canrecord","ended"],_={},v,S,I={x:0,y:0},P={x:0,y:0};function N(){var L=m.videoWidth,R=m.videoHeight;v=f.size?L/R>1?f.size:Math.floor(L/R*f.size):L,S=f.size?L/R>1?Math.floor(R/L*f.size):f.size:R,P.x=v,P.y=S}return d.getRealWidth=function(){return m.videoWidth},d.getRealHeight=function(){return m.videoHeight},d.getWidth=function(){return v},d.getHeight=function(){return S},d.setWidth=function(L){v=L},d.setHeight=function(L){S=L},d.setInputStream=function(L){f=L,m.src=typeof L.src<"u"?L.src:""},d.ended=function(){return m.ended},d.getConfig=function(){return f},d.setAttribute=function(L,R){m.setAttribute(L,R)},d.pause=function(){m.pause()},d.play=function(){m.play()},d.setCurrentTime=function(L){f.type!=="LiveStream"&&(m.currentTime=L)},d.addEventListener=function(L,R,T){p.indexOf(L)!==-1?(_[L]||(_[L]=[]),_[L].push(R)):m.addEventListener(L,R,T)},d.clearEventHandlers=function(){p.forEach(function(L){var R=_[L];R&&R.length>0&&R.forEach(function(T){m.removeEventListener(L,T)})})},d.trigger=function(L,R){var T,C=_[L];if(L==="canrecord"&&N(),C&&C.length>0)for(T=0;T<C.length;T++)C[T].apply(d,R)},d.setTopRight=function(L){I.x=L.x,I.y=L.y},d.getTopRight=function(){return I},d.setCanvasSize=function(L){P.x=L.x,P.y=L.y},d.getCanvasSize=function(){return P},d.getFrame=function(){return m},d},h.createLiveStream=function(m){m.setAttribute("autoplay",!0);var d=h.createVideoStream(m);return d.ended=function(){return!1},d},h.createImageStream=function(){var m={},d=null,f=0,p=0,_=0,v=!0,S=!1,I=null,P=0,N=1,L=null,R=!1,T,C,k=["canrecord","ended"],O={},b={x:0,y:0},V={x:0,y:0};function $(){S=!1,a.load(L,function(X){I=X,f=X[0].width,p=X[0].height,T=d.size?f/p>1?d.size:Math.floor(f/p*d.size):f,C=d.size?f/p>1?Math.floor(p/f*d.size):d.size:p,V.x=T,V.y=C,S=!0,_=0,setTimeout(function(){ee("canrecord",[])},0)},N,P,d.sequence)}function ee(X,oe){var J,re=O[X];if(re&&re.length>0)for(J=0;J<re.length;J++)re[J].apply(m,oe)}return m.trigger=ee,m.getWidth=function(){return T},m.getHeight=function(){return C},m.setWidth=function(X){T=X},m.setHeight=function(X){C=X},m.getRealWidth=function(){return f},m.getRealHeight=function(){return p},m.setInputStream=function(X){d=X,X.sequence===!1?(L=X.src,P=1):(L=X.src,P=X.length),$()},m.ended=function(){return R},m.setAttribute=function(){},m.getConfig=function(){return d},m.pause=function(){v=!0},m.play=function(){v=!1},m.setCurrentTime=function(X){_=X},m.addEventListener=function(X,oe){k.indexOf(X)!==-1&&(O[X]||(O[X]=[]),O[X].push(oe))},m.setTopRight=function(X){b.x=X.x,b.y=X.y},m.getTopRight=function(){return b},m.setCanvasSize=function(X){V.x=X.x,V.y=X.y},m.getCanvasSize=function(){return V},m.getFrame=function(){var X;return S?(v||(X=I[_],_<P-1?_++:setTimeout(function(){R=!0,ee("ended",[])},0)),X):null},m},h}),glMatrixArrayType=Float32Array,typeof window<"u"&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,h){window.setTimeout(a,1e3/60)}}(),navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL),Math.imul=Math.imul||function(a,h){var m=a>>>16&65535,d=a&65535,f=h>>>16&65535,p=h&65535;return d*p+(m*p+d*f<<16>>>0)|0},u("typedefs",function(a){return function(){var h;return h||a.typedefs}}(this)),u("subImage",["typedefs"],function(){function a(h,m,d){d||(d={data:null,size:m}),this.data=d.data,this.originalSize=d.size,this.I=d,this.from=h,this.size=m}return a.prototype.show=function(h,m){var d,f,p,_,v,S,I;for(m||(m=1),d=h.getContext("2d"),h.width=this.size.x,h.height=this.size.y,f=d.getImageData(0,0,h.width,h.height),p=f.data,_=0,v=0;v<this.size.y;v++)for(S=0;S<this.size.x;S++)I=v*this.size.x+S,_=this.get(S,v)*m,p[I*4+0]=_,p[I*4+1]=_,p[I*4+2]=_,p[I*4+3]=255;f.data=p,d.putImageData(f,0,0)},a.prototype.get=function(h,m){return this.data[(this.from.y+m)*this.originalSize.x+this.from.x+h]},a.prototype.updateData=function(h){this.originalSize=h.size,this.data=h.data},a.prototype.updateFrom=function(h){return this.from=h,this},a}),u("cluster",[],function(){var a={create:function(h,m){var d=[],f={rad:0,vec:U.create([0,0])},p={};function _(){v(h),S()}function v(I){p[I.id]=I,d.push(I)}function S(){var I,P=0;for(I=0;I<d.length;I++)P+=d[I].rad;f.rad=P/d.length,f.vec=U.create([Math.cos(f.rad),Math.sin(f.rad)])}return _(),{add:function(I){p[I.id]||(v(I),S())},fits:function(I){var P=Math.abs(U.dot(I.point.vec,f.vec));return P>m},getPoints:function(){return d},getCenter:function(){return f}}},createPoint:function(h,m,d){return{rad:h[d],point:h,id:m}}};return a});var g={};g.create=function(a){var h;return a?(h=new glMatrixArrayType(3),h[0]=a[0],h[1]=a[1],h[2]=a[2]):glMatrixArrayType===Array?h=new glMatrixArrayType([0,0,0]):h=new glMatrixArrayType(3),h},g.set=function(a,h){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h},g.add=function(a,h,m){return!m||a==m?(a[0]+=h[0],a[1]+=h[1],a[2]+=h[2],a):(m[0]=a[0]+h[0],m[1]=a[1]+h[1],m[2]=a[2]+h[2],m)},g.subtract=function(a,h,m){return!m||a==m?(a[0]-=h[0],a[1]-=h[1],a[2]-=h[2],a):(m[0]=a[0]-h[0],m[1]=a[1]-h[1],m[2]=a[2]-h[2],m)},g.negate=function(a,h){return h||(h=a),h[0]=-a[0],h[1]=-a[1],h[2]=-a[2],h},g.scale=function(a,h,m){return!m||a==m?(a[0]*=h,a[1]*=h,a[2]*=h,a):(m[0]=a[0]*h,m[1]=a[1]*h,m[2]=a[2]*h,m)},g.normalize=function(a,h){h||(h=a);var m=a[0],d=a[1],f=a[2],p=Math.sqrt(m*m+d*d+f*f);if(p){if(p==1)return h[0]=m,h[1]=d,h[2]=f,h}else return h[0]=0,h[1]=0,h[2]=0,h;return p=1/p,h[0]=m*p,h[1]=d*p,h[2]=f*p,h},g.cross=function(a,h,m){m||(m=a);var d=a[0],f=a[1],p=a[2],_=h[0],v=h[1],S=h[2];return m[0]=f*S-p*v,m[1]=p*_-d*S,m[2]=d*v-f*_,m},g.length=function(a){var h=a[0],m=a[1],d=a[2];return Math.sqrt(h*h+m*m+d*d)},g.dot=function(a,h){return a[0]*h[0]+a[1]*h[1]+a[2]*h[2]},g.direction=function(a,h,m){m||(m=a);var d=a[0]-h[0],f=a[1]-h[1],p=a[2]-h[2],_=Math.sqrt(d*d+f*f+p*p);return _?(_=1/_,m[0]=d*_,m[1]=f*_,m[2]=p*_,m):(m[0]=0,m[1]=0,m[2]=0,m)},g.lerp=function(a,h,m,d){return d||(d=a),d[0]=a[0]+m*(h[0]-a[0]),d[1]=a[1]+m*(h[1]-a[1]),d[2]=a[2]+m*(h[2]-a[2]),d},g.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var A={};A.create=function(a){var h;return a?(h=new glMatrixArrayType(9),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8]):glMatrixArrayType===Array?h=new glMatrixArrayType([0,0,0,0,0,0,0,0,0]):h=new glMatrixArrayType(9),h},A.set=function(a,h){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h},A.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},A.transpose=function(a,h){if(!h||a==h){var m=a[1],d=a[2],f=a[5];return a[1]=a[3],a[2]=a[6],a[3]=m,a[5]=a[7],a[6]=d,a[7]=f,a}return h[0]=a[0],h[1]=a[3],h[2]=a[6],h[3]=a[1],h[4]=a[4],h[5]=a[7],h[6]=a[2],h[7]=a[5],h[8]=a[8],h},A.toMat4=function(a,h){return h||(h=D.create()),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=0,h[4]=a[3],h[5]=a[4],h[6]=a[5],h[7]=0,h[8]=a[6],h[9]=a[7],h[10]=a[8],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},A.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};var D={};D.create=function(a){var h;return a?(h=new glMatrixArrayType(16),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15]):glMatrixArrayType===Array?h=new glMatrixArrayType([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]):h=new glMatrixArrayType(16),h},D.set=function(a,h){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=a[12],h[13]=a[13],h[14]=a[14],h[15]=a[15],h},D.identity=function(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},D.transpose=function(a,h){if(!h||a==h){var m=a[1],d=a[2],f=a[3],p=a[6],_=a[7],v=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=m,a[6]=a[9],a[7]=a[13],a[8]=d,a[9]=p,a[11]=a[14],a[12]=f,a[13]=_,a[14]=v,a}return h[0]=a[0],h[1]=a[4],h[2]=a[8],h[3]=a[12],h[4]=a[1],h[5]=a[5],h[6]=a[9],h[7]=a[13],h[8]=a[2],h[9]=a[6],h[10]=a[10],h[11]=a[14],h[12]=a[3],h[13]=a[7],h[14]=a[11],h[15]=a[15],h},D.determinant=function(a){var h=a[0],m=a[1],d=a[2],f=a[3],p=a[4],_=a[5],v=a[6],S=a[7],I=a[8],P=a[9],N=a[10],L=a[11],R=a[12],T=a[13],C=a[14],k=a[15];return R*P*v*f-I*T*v*f-R*_*N*f+p*T*N*f+I*_*C*f-p*P*C*f-R*P*d*S+I*T*d*S+R*m*N*S-h*T*N*S-I*m*C*S+h*P*C*S+R*_*d*L-p*T*d*L-R*m*v*L+h*T*v*L+p*m*C*L-h*_*C*L-I*_*d*k+p*P*d*k+I*m*v*k-h*P*v*k-p*m*N*k+h*_*N*k},D.inverse=function(a,h){h||(h=a);var m=a[0],d=a[1],f=a[2],p=a[3],_=a[4],v=a[5],S=a[6],I=a[7],P=a[8],N=a[9],L=a[10],R=a[11],T=a[12],C=a[13],k=a[14],O=a[15],b=m*v-d*_,V=m*S-f*_,$=m*I-p*_,ee=d*S-f*v,X=d*I-p*v,oe=f*I-p*S,J=P*C-N*T,re=P*k-L*T,G=P*O-R*T,B=N*k-L*C,q=N*O-R*C,ue=L*O-R*k,se=1/(b*ue-V*q+$*B+ee*G-X*re+oe*J);return h[0]=(v*ue-S*q+I*B)*se,h[1]=(-d*ue+f*q-p*B)*se,h[2]=(C*oe-k*X+O*ee)*se,h[3]=(-N*oe+L*X-R*ee)*se,h[4]=(-_*ue+S*G-I*re)*se,h[5]=(m*ue-f*G+p*re)*se,h[6]=(-T*oe+k*$-O*V)*se,h[7]=(P*oe-L*$+R*V)*se,h[8]=(_*q-v*G+I*J)*se,h[9]=(-m*q+d*G-p*J)*se,h[10]=(T*X-C*$+O*b)*se,h[11]=(-P*X+N*$-R*b)*se,h[12]=(-_*B+v*re-S*J)*se,h[13]=(m*B-d*re+f*J)*se,h[14]=(-T*ee+C*V-k*b)*se,h[15]=(P*ee-N*V+L*b)*se,h},D.toRotationMat=function(a,h){return h||(h=D.create()),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h[4]=a[4],h[5]=a[5],h[6]=a[6],h[7]=a[7],h[8]=a[8],h[9]=a[9],h[10]=a[10],h[11]=a[11],h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},D.toMat3=function(a,h){return h||(h=A.create()),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[4],h[4]=a[5],h[5]=a[6],h[6]=a[8],h[7]=a[9],h[8]=a[10],h},D.toInverseMat3=function(a,h){var m=a[0],d=a[1],f=a[2],p=a[4],_=a[5],v=a[6],S=a[8],I=a[9],P=a[10],N=P*_-v*I,L=-P*p+v*S,R=I*p-_*S,T=m*N+d*L+f*R;if(!T)return null;var C=1/T;return h||(h=A.create()),h[0]=N*C,h[1]=(-P*d+f*I)*C,h[2]=(v*d-f*_)*C,h[3]=L*C,h[4]=(P*m-f*S)*C,h[5]=(-v*m+f*p)*C,h[6]=R*C,h[7]=(-I*m+d*S)*C,h[8]=(_*m-d*p)*C,h},D.multiply=function(a,h,m){m||(m=a);var d=a[0],f=a[1],p=a[2],_=a[3],v=a[4],S=a[5],I=a[6],P=a[7],N=a[8],L=a[9],R=a[10],T=a[11],C=a[12],k=a[13],O=a[14],b=a[15],V=h[0],$=h[1],ee=h[2],X=h[3],oe=h[4],J=h[5],re=h[6],G=h[7],B=h[8],q=h[9],ue=h[10],se=h[11],ve=h[12],De=h[13],ie=h[14],he=h[15];return m[0]=V*d+$*v+ee*N+X*C,m[1]=V*f+$*S+ee*L+X*k,m[2]=V*p+$*I+ee*R+X*O,m[3]=V*_+$*P+ee*T+X*b,m[4]=oe*d+J*v+re*N+G*C,m[5]=oe*f+J*S+re*L+G*k,m[6]=oe*p+J*I+re*R+G*O,m[7]=oe*_+J*P+re*T+G*b,m[8]=B*d+q*v+ue*N+se*C,m[9]=B*f+q*S+ue*L+se*k,m[10]=B*p+q*I+ue*R+se*O,m[11]=B*_+q*P+ue*T+se*b,m[12]=ve*d+De*v+ie*N+he*C,m[13]=ve*f+De*S+ie*L+he*k,m[14]=ve*p+De*I+ie*R+he*O,m[15]=ve*_+De*P+ie*T+he*b,m},D.multiplyVec3=function(a,h,m){m||(m=h);var d=h[0],f=h[1],p=h[2];return m[0]=a[0]*d+a[4]*f+a[8]*p+a[12],m[1]=a[1]*d+a[5]*f+a[9]*p+a[13],m[2]=a[2]*d+a[6]*f+a[10]*p+a[14],m},D.multiplyVec4=function(a,h,m){m||(m=h);var d=h[0],f=h[1],p=h[2],_=h[3];return m[0]=a[0]*d+a[4]*f+a[8]*p+a[12]*_,m[1]=a[1]*d+a[5]*f+a[9]*p+a[13]*_,m[2]=a[2]*d+a[6]*f+a[10]*p+a[14]*_,m[3]=a[3]*d+a[7]*f+a[11]*p+a[15]*_,m},D.translate=function(a,h,m){var d=h[0],f=h[1],p=h[2];if(!m||a==m)return a[12]=a[0]*d+a[4]*f+a[8]*p+a[12],a[13]=a[1]*d+a[5]*f+a[9]*p+a[13],a[14]=a[2]*d+a[6]*f+a[10]*p+a[14],a[15]=a[3]*d+a[7]*f+a[11]*p+a[15],a;var _=a[0],v=a[1],S=a[2],I=a[3],P=a[4],N=a[5],L=a[6],R=a[7],T=a[8],C=a[9],k=a[10],O=a[11];return m[0]=_,m[1]=v,m[2]=S,m[3]=I,m[4]=P,m[5]=N,m[6]=L,m[7]=R,m[8]=T,m[9]=C,m[10]=k,m[11]=O,m[12]=_*d+P*f+T*p+a[12],m[13]=v*d+N*f+C*p+a[13],m[14]=S*d+L*f+k*p+a[14],m[15]=I*d+R*f+O*p+a[15],m},D.scale=function(a,h,m){var d=h[0],f=h[1],p=h[2];return!m||a==m?(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=f,a[5]*=f,a[6]*=f,a[7]*=f,a[8]*=p,a[9]*=p,a[10]*=p,a[11]*=p,a):(m[0]=a[0]*d,m[1]=a[1]*d,m[2]=a[2]*d,m[3]=a[3]*d,m[4]=a[4]*f,m[5]=a[5]*f,m[6]=a[6]*f,m[7]=a[7]*f,m[8]=a[8]*p,m[9]=a[9]*p,m[10]=a[10]*p,m[11]=a[11]*p,m[12]=a[12],m[13]=a[13],m[14]=a[14],m[15]=a[15],m)},D.rotate=function(a,h,m,d){var f=m[0],p=m[1],_=m[2],v=Math.sqrt(f*f+p*p+_*_);if(!v)return null;v!=1&&(v=1/v,f*=v,p*=v,_*=v);var S=Math.sin(h),I=Math.cos(h),P=1-I,N=a[0],L=a[1],R=a[2],T=a[3],C=a[4],k=a[5],O=a[6],b=a[7],V=a[8],$=a[9],ee=a[10],X=a[11],oe=f*f*P+I,J=p*f*P+_*S,re=_*f*P-p*S,G=f*p*P-_*S,B=p*p*P+I,q=_*p*P+f*S,ue=f*_*P+p*S,se=p*_*P-f*S,ve=_*_*P+I;return d?a!=d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=N*oe+C*J+V*re,d[1]=L*oe+k*J+$*re,d[2]=R*oe+O*J+ee*re,d[3]=T*oe+b*J+X*re,d[4]=N*G+C*B+V*q,d[5]=L*G+k*B+$*q,d[6]=R*G+O*B+ee*q,d[7]=T*G+b*B+X*q,d[8]=N*ue+C*se+V*ve,d[9]=L*ue+k*se+$*ve,d[10]=R*ue+O*se+ee*ve,d[11]=T*ue+b*se+X*ve,d},D.rotateX=function(a,h,m){var d=Math.sin(h),f=Math.cos(h),p=a[4],_=a[5],v=a[6],S=a[7],I=a[8],P=a[9],N=a[10],L=a[11];return m?a!=m&&(m[0]=a[0],m[1]=a[1],m[2]=a[2],m[3]=a[3],m[12]=a[12],m[13]=a[13],m[14]=a[14],m[15]=a[15]):m=a,m[4]=p*f+I*d,m[5]=_*f+P*d,m[6]=v*f+N*d,m[7]=S*f+L*d,m[8]=p*-d+I*f,m[9]=_*-d+P*f,m[10]=v*-d+N*f,m[11]=S*-d+L*f,m},D.rotateY=function(a,h,m){var d=Math.sin(h),f=Math.cos(h),p=a[0],_=a[1],v=a[2],S=a[3],I=a[8],P=a[9],N=a[10],L=a[11];return m?a!=m&&(m[4]=a[4],m[5]=a[5],m[6]=a[6],m[7]=a[7],m[12]=a[12],m[13]=a[13],m[14]=a[14],m[15]=a[15]):m=a,m[0]=p*f+I*-d,m[1]=_*f+P*-d,m[2]=v*f+N*-d,m[3]=S*f+L*-d,m[8]=p*d+I*f,m[9]=_*d+P*f,m[10]=v*d+N*f,m[11]=S*d+L*f,m},D.rotateZ=function(a,h,m){var d=Math.sin(h),f=Math.cos(h),p=a[0],_=a[1],v=a[2],S=a[3],I=a[4],P=a[5],N=a[6],L=a[7];return m?a!=m&&(m[8]=a[8],m[9]=a[9],m[10]=a[10],m[11]=a[11],m[12]=a[12],m[13]=a[13],m[14]=a[14],m[15]=a[15]):m=a,m[0]=p*f+I*d,m[1]=_*f+P*d,m[2]=v*f+N*d,m[3]=S*f+L*d,m[4]=p*-d+I*f,m[5]=_*-d+P*f,m[6]=v*-d+N*f,m[7]=S*-d+L*f,m},D.frustum=function(a,h,m,d,f,p,_){_||(_=D.create());var v=h-a,S=d-m,I=p-f;return _[0]=f*2/v,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=f*2/S,_[6]=0,_[7]=0,_[8]=(h+a)/v,_[9]=(d+m)/S,_[10]=-(p+f)/I,_[11]=-1,_[12]=0,_[13]=0,_[14]=-(p*f*2)/I,_[15]=0,_},D.perspective=function(a,h,m,d,f){var p=m*Math.tan(a*Math.PI/360),_=p*h;return D.frustum(-_,_,-p,p,m,d,f)},D.ortho=function(a,h,m,d,f,p,_){_||(_=D.create());var v=h-a,S=d-m,I=p-f;return _[0]=2/v,_[1]=0,_[2]=0,_[3]=0,_[4]=0,_[5]=2/S,_[6]=0,_[7]=0,_[8]=0,_[9]=0,_[10]=-2/I,_[11]=0,_[12]=-(a+h)/v,_[13]=-(d+m)/S,_[14]=-(p+f)/I,_[15]=1,_},D.lookAt=function(a,h,m,d){d||(d=D.create());var f=a[0],p=a[1],_=a[2],v=m[0],S=m[1],I=m[2],P=h[0],N=h[1],L=h[2];if(f==P&&p==N&&_==L)return D.identity(d);var R,T,C,k,O,b,V,$,ee,X;return R=f-h[0],T=p-h[1],C=_-h[2],X=1/Math.sqrt(R*R+T*T+C*C),R*=X,T*=X,C*=X,k=S*C-I*T,O=I*R-v*C,b=v*T-S*R,X=Math.sqrt(k*k+O*O+b*b),X?(X=1/X,k*=X,O*=X,b*=X):(k=0,O=0,b=0),V=T*b-C*O,$=C*k-R*b,ee=R*O-T*k,X=Math.sqrt(V*V+$*$+ee*ee),X?(X=1/X,V*=X,$*=X,ee*=X):(V=0,$=0,ee=0),d[0]=k,d[1]=V,d[2]=R,d[3]=0,d[4]=O,d[5]=$,d[6]=T,d[7]=0,d[8]=b,d[9]=ee,d[10]=C,d[11]=0,d[12]=-(k*f+O*p+b*_),d[13]=-(V*f+$*p+ee*_),d[14]=-(R*f+T*p+C*_),d[15]=1,d},D.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+`,
 `+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+`,
 `+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+`,
 `+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"},quat4={},quat4.create=function(a){var h;return a?(h=new glMatrixArrayType(4),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3]):glMatrixArrayType===Array?h=new glMatrixArrayType([0,0,0,0]):h=new glMatrixArrayType(4),h},quat4.set=function(a,h){return h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3],h},quat4.calculateW=function(a,h){var m=a[0],d=a[1],f=a[2];return!h||a==h?(a[3]=-Math.sqrt(Math.abs(1-m*m-d*d-f*f)),a):(h[0]=m,h[1]=d,h[2]=f,h[3]=-Math.sqrt(Math.abs(1-m*m-d*d-f*f)),h)},quat4.inverse=function(a,h){return!h||a==h?(a[0]*=-1,a[1]*=-1,a[2]*=-1,a):(h[0]=-a[0],h[1]=-a[1],h[2]=-a[2],h[3]=a[3],h)},quat4.length=function(a){var h=a[0],m=a[1],d=a[2],f=a[3];return Math.sqrt(h*h+m*m+d*d+f*f)},quat4.normalize=function(a,h){h||(h=a);var m=a[0],d=a[1],f=a[2],p=a[3],_=Math.sqrt(m*m+d*d+f*f+p*p);return _==0?(h[0]=0,h[1]=0,h[2]=0,h[3]=0,h):(_=1/_,h[0]=m*_,h[1]=d*_,h[2]=f*_,h[3]=p*_,h)},quat4.multiply=function(a,h,m){m||(m=a);var d=a[0],f=a[1],p=a[2],_=a[3],v=h[0],S=h[1],I=h[2],P=h[3];return m[0]=d*P+_*v+f*I-p*S,m[1]=f*P+_*S+p*v-d*I,m[2]=p*P+_*I+d*S-f*v,m[3]=_*P-d*v-f*S-p*I,m},quat4.multiplyVec3=function(a,h,m){m||(m=h);var d=h[0],f=h[1],p=h[2],_=a[0],v=a[1],S=a[2],I=a[3],P=I*d+v*p-S*f,N=I*f+S*d-_*p,L=I*p+_*f-v*d,R=-_*d-v*f-S*p;return m[0]=P*I+R*-_+N*-S-L*-v,m[1]=N*I+R*-v+L*-_-P*-S,m[2]=L*I+R*-S+P*-v-N*-_,m},quat4.toMat3=function(a,h){h||(h=A.create());var m=a[0],d=a[1],f=a[2],p=a[3],_=m+m,v=d+d,S=f+f,I=m*_,P=m*v,N=m*S,L=d*v,R=d*S,T=f*S,C=p*_,k=p*v,O=p*S;return h[0]=1-(L+T),h[1]=P-O,h[2]=N+k,h[3]=P+O,h[4]=1-(I+T),h[5]=R-C,h[6]=N-k,h[7]=R+C,h[8]=1-(I+L),h},quat4.toMat4=function(a,h){h||(h=D.create());var m=a[0],d=a[1],f=a[2],p=a[3],_=m+m,v=d+d,S=f+f,I=m*_,P=m*v,N=m*S,L=d*v,R=d*S,T=f*S,C=p*_,k=p*v,O=p*S;return h[0]=1-(L+T),h[1]=P-O,h[2]=N+k,h[3]=0,h[4]=P+O,h[5]=1-(I+T),h[6]=R-C,h[7]=0,h[8]=N-k,h[9]=R+C,h[10]=1-(I+L),h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h},quat4.slerp=function(a,h,m,d){d||(d=a);var f=a[0]*h[0]+a[1]*h[1]+a[2]*h[2]+a[3]*h[3];if(Math.abs(f)>=1)return d!=a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;var p=Math.acos(f),_=Math.sqrt(1-f*f);if(Math.abs(_)<.001)return d[0]=a[0]*.5+h[0]*.5,d[1]=a[1]*.5+h[1]*.5,d[2]=a[2]*.5+h[2]*.5,d[3]=a[3]*.5+h[3]*.5,d;var v=Math.sin((1-m)*p)/_,S=Math.sin(m*p)/_;return d[0]=a[0]*v+h[0]*S,d[1]=a[1]*v+h[1]*S,d[2]=a[2]*v+h[2]*S,d[3]=a[3]*v+h[3]*S,d},quat4.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"},u("glMatrix",["typedefs"],function(a){return function(){var h;return h||a.glMatrix}}(this)),D.xVec4=function(a,h,m){m||(m=h);var d=h[0],f=h[1],p=h[2],_=h[3];return m[0]=a[0]*d+a[1]*f+a[2]*p+a[3]*_,m[1]=a[4]*d+a[5]*f+a[6]*p+a[7]*_,m[2]=a[8]*d+a[9]*f+a[10]*p+a[11]*_,m[3]=a[12]*d+a[13]*f+a[14]*p+a[15]*_,m},A.scale=function(a,h,m){return!m||a==m?(a[0]*=h,a[1]*=h,a[2]*=h,a[3]*=h,a[4]*=h,a[5]*=h,a[6]*=h,a[7]*=h,a[8]*=h,a):(m=A.create(),m[0]=a[0]*h,m[1]=a[1]*h,m[2]=a[2]*h,m[3]=a[3]*h,m[4]=a[4]*h,m[5]=a[5]*h,m[6]=a[6]*h,m[7]=a[7]*h,m[8]=a[8]*h,m)},A.inverse=function(a,h){h||(h=a);var m=a[0],d=a[1],f=a[2],p=a[3],_=a[4],v=a[5],S=a[6],I=a[7],P=a[8],N=1/(m*_*P+d*v*S+f*p*I-f*_*S-d*p*P-m*v*I);return h[0]=(_*P-v*I)*N,h[1]=(f*I-d*P)*N,h[2]=(d*v-f*_)*N,h[3]=(v*S-p*P)*N,h[4]=(m*P-f*S)*N,h[5]=(f*p-m*v)*N,h[6]=(p*I-_*S)*N,h[7]=(d*S-m*I)*N,h[8]=(m*_-d*p)*N,h},A.multiply=function(a,h,m){m||(m=a);var d=a[0],f=a[1],p=a[2],_=a[3],v=a[4],S=a[5],I=a[6],P=a[7],N=a[8],L=h[0],R=h[1],T=h[2],C=h[3],k=h[4],O=h[5],b=h[6],V=h[7],$=h[8];return m[0]=d*L+f*C+p*b,m[1]=d*R+f*k+p*V,m[2]=d*T+f*O+p*$,m[3]=_*L+v*C+S*b,m[4]=_*R+v*k+S*V,m[5]=_*T+v*O+S*$,m[6]=I*L+P*C+N*b,m[7]=I*R+P*k+N*V,m[8]=I*T+P*O+N*$,m},A.xVec3=function(a,h,m){m||(m=h);var d=h[0],f=h[1],p=h[2];return m[0]=a[0]*d+a[1]*f+a[2]*p,m[1]=a[3]*d+a[4]*f+a[5]*p,m[2]=a[6]*d+a[7]*f+a[8]*p,m};var F={};F.create=function(a){var h;return a?(h=new glMatrixArrayType(4),h[0]=a[0],h[1]=a[1],h[2]=a[2],h[3]=a[3]):glMatrixArrayType===Array?h=new glMatrixArrayType([0,0,0,0]):h=new glMatrixArrayType(4),h},F.xVec2=function(a,h,m){m||(m=h);var d=h[0],f=h[1];return m[0]=a[0]*d+a[1]*f,m[1]=a[2]*d+a[3]*f,m},F.scale=function(a,h,m){return!m||a==m?(a[0]*=h,a[1]*=h,a[2]*=h,a[3]*=h,a):(m[0]=a[0]*h,m[1]=a[1]*h,m[2]=a[2]*h,m[3]=a[3]*h,m)},F.determinant=function(a){return a[0]*a[3]-a[1]*a[2]},F.inverse=function(a){var h=1/F.determinant(a),m=a[3]*h,d=-a[1]*h,f=-a[2]*h,p=a[0];return a[0]=m,a[1]=d,a[2]=f,a[3]=p,a};var U={};return U.create=function(a){var h;return a?(h=new glMatrixArrayType(2),h[0]=a[0],h[1]=a[1]):glMatrixArrayType===Array?h=new glMatrixArrayType([0,0]):h=new glMatrixArrayType(2),h},U.subtract=function(a,h,m){return!m||a==m?(a[0]-=h[0],a[1]-=h[1],a):(m[0]=a[0]-h[0],m[1]=a[1]-h[1],m)},U.add=function(a,h,m){return!m||a==m?(a[0]+=h[0],a[1]+=h[1],a):(m[0]=a[0]+h[0],m[1]=a[1]+h[1],m)},U.scale=function(a,h,m){return!m||a==m?(a[0]*=h,a[1]*=h,a):(m[0]=a[0]*h,m[1]=a[1]*h,m)},U.normalize=function(a,h){h||(h=a);var m=a[0],d=a[1],f=Math.sqrt(m*m+d*d);if(f){if(f==1)return h[0]=m,h[1]=d,h}else return h[0]=0,h[1]=0,h;return f=1/f,h[0]=m*f,h[1]=d*f,h},U.dot=function(a,h){return a[0]*h[0]+a[1]*h[1]},U.multiply=function(a,h,m){return m||(m=a),m[0]=a[0]*h[0],m[1]=a[1]*h[1],m},U.unproject=function(a){return g.create([a[0],a[1],1])},U.length=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])},U.perspectiveProject=function(a){var h=U.create(a);return U.scale(h,1/a[2])},g.project=function(a){return U.scale(U.create(a),1/a[2])},A.xVec3=function(a,h,m){m||(m=h);var d=h[0],f=h[1],p=h[2];return m[0]=a[0]*d+a[1]*f+a[2]*p,m[1]=a[3]*d+a[4]*f+a[5]*p,m[2]=a[6]*d+a[7]*f+a[8]*p,m},u("glMatrixAddon",["glMatrix"],function(a){return function(){var h;return h||a.glMatrixAddon}}(this)),u("array_helper",[],function(){return{init:function(a,h){for(var m=a.length;m--;)a[m]=h},shuffle:function(a){var h=a.length-1,m,d;for(h;h>=0;h--)m=Math.floor(Math.random()*h),d=a[h],a[h]=a[m],a[m]=d;return a},toPointList:function(a){var h,m,d=[],f=[];for(h=0;h<a.length;h++){for(d=[],m=0;m<a[h].length;m++)d[m]=a[h][m];f[h]="["+d.join(",")+"]"}return"["+f.join(`,\r
`)+"]"},threshold:function(a,h,m){var d,f=[];for(d=0;d<a.length;d++)m.apply(a,[a[d]])>=h&&f.push(a[d]);return f},maxIndex:function(a){var h,m=0;for(h=0;h<a.length;h++)a[h]>a[m]&&(m=h);return m},max:function(a){var h,m=0;for(h=0;h<a.length;h++)a[h]>m&&(m=a[h]);return m},sum:function(a){for(var h=a.length,m=0;h--;)m+=a[h];return m}}}),u("cv_utils",["cluster","glMatrixAddon","array_helper"],function(a,h,m){var d={};return d.imageRef=function(f,p){var _={x:f,y:p,toVec2:function(){return U.create([this.x,this.y])},toVec3:function(){return g.create([this.x,this.y,1])},round:function(){return this.x=this.x>0?Math.floor(this.x+.5):Math.floor(this.x-.5),this.y=this.y>0?Math.floor(this.y+.5):Math.floor(this.y-.5),this}};return _},d.computeIntegralImage2=function(f,p){var _=f.data,v=f.size.x,S=f.size.y,I=p.data,P=0,N=0,L=0,R=0,T=0,C,k;for(L=v,P=0,k=1;k<S;k++)P+=_[N],I[L]+=P,N+=v,L+=v;for(N=0,L=1,P=0,C=1;C<v;C++)P+=_[N],I[L]+=P,N++,L++;for(k=1;k<S;k++)for(N=k*v+1,L=(k-1)*v+1,R=k*v,T=(k-1)*v,C=1;C<v;C++)I[N]+=_[N]+I[L]+I[R]-I[T],N++,L++,R++,T++},d.computeIntegralImage=function(f,p){for(var _=f.data,v=f.size.x,S=f.size.y,I=p.data,P=0,N=0;N<v;N++)P+=_[N],I[N]=P;for(var L=1;L<S;L++){P=0;for(var R=0;R<v;R++)P+=_[L*v+R],I[L*v+R]=P+I[(L-1)*v+R]}},d.thresholdImage=function(f,p,_){_||(_=f);for(var v=f.data,S=v.length,I=_.data;S--;)I[S]=v[S]<p?1:0},d.computeHistogram=function(f,p){p||(p=8);for(var _=f.data,v=_.length,S=8-p,I=1<<p,P=new Int32Array(I);v--;)P[_[v]>>S]++;return P},d.sharpenLine=function(f){var p,_=f.length,v=f[0],S=f[1],I;for(p=1;p<_-1;p++)I=f[p+1],f[p-1]=S*2-v-I&255,v=S,S=I;return f},d.determineOtsuThreshold=function(f,p){p||(p=8);var _,v,S=8-p;function I(L,R){var T=0,C;for(C=L;C<=R;C++)T+=_[C];return T}function P(L,R){var T,C=0;for(T=L;T<=R;T++)C+=T*_[T];return C}function N(){var L=[0],R,T,C,k,O,b,V,$=(1<<p)-1;for(_=d.computeHistogram(f,p),k=1;k<$;k++)R=I(0,k),T=I(k+1,$),C=R*T,C===0&&(C=1),O=P(0,k)*T,b=P(k+1,$)*R,V=O-b,L[k]=V*V/C;return m.maxIndex(L)}return v=N(),v<<S},d.otsuThreshold=function(f,p){var _=d.determineOtsuThreshold(f);return d.thresholdImage(f,_,p),_},d.computeBinaryImage=function(f,p,_){d.computeIntegralImage(f,p),_||(_=f);var v=f.data,S=_.data,I=f.size.x,P=f.size.y,N=p.data,L=0,R,T,C=3,k,O,b,V,$,ee=(C*2+1)*(C*2+1);for(R=0;R<=C;R++)for(T=0;T<I;T++)S[R*I+T]=0,S[(P-1-R)*I+T]=0;for(R=C;R<P-C;R++)for(T=0;T<=C;T++)S[R*I+T]=0,S[R*I+(I-1-T)]=0;for(R=C+1;R<P-C-1;R++)for(T=C+1;T<I-C;T++)k=N[(R-C-1)*I+(T-C-1)],O=N[(R-C-1)*I+(T+C)],b=N[(R+C)*I+(T-C-1)],V=N[(R+C)*I+(T+C)],L=V-b-O+k,$=L/ee,S[R*I+T]=v[R*I+T]>$+5?0:1},d.cluster=function(f,p,_){var v,S,I,P,N=[];_||(_="rad");function L(R){var T=!1;for(S=0;S<N.length;S++)I=N[S],I.fits(R)&&(I.add(R),T=!0);return T}for(v=0;v<f.length;v++)P=a.createPoint(f[v],v,_),L(P)||N.push(a.create(P,p));return N},d.Tracer={trace:function(f,p){var _,v=10,S=[],I=[],P=0,N=0;function L(R,T){var C,k,O,b,V=1,$=Math.abs(p[1]/10),ee=!1;function X(oe,J){return oe.x>J.x-V&&oe.x<J.x+V&&oe.y>J.y-$&&oe.y<J.y+$}for(C=f[R],T?b={x:C.x+p[0],y:C.y+p[1]}:b={x:C.x-p[0],y:C.y-p[1]},O=T?R+1:R-1,k=f[O];k&&(ee=X(k,b))!==!0&&Math.abs(k.y-C.y)<p[1];)O=T?O+1:O-1,k=f[O];return ee?O:null}for(_=0;_<v;_++){for(P=Math.floor(Math.random()*f.length),S=[],N=P,S.push(f[N]);(N=L(N,!0))!==null;)S.push(f[N]);if(P>0)for(N=P;(N=L(N,!1))!==null;)S.push(f[N]);S.length>I.length&&(I=S)}return I}},d.DILATE=1,d.ERODE=2,d.dilate=function(f,p){var _,v,S=f.data,I=p.data,P=f.size.y,N=f.size.x,L,R,T,C,k;for(_=1;_<P-1;_++)for(v=1;v<N-1;v++)R=_-1,T=_+1,C=v-1,k=v+1,L=S[R*N+C]+S[R*N+k]+S[_*N+v]+S[T*N+C]+S[T*N+k],I[_*N+v]=L>0?1:0},d.erode=function(f,p){var _,v,S=f.data,I=p.data,P=f.size.y,N=f.size.x,L,R,T,C,k;for(_=1;_<P-1;_++)for(v=1;v<N-1;v++)R=_-1,T=_+1,C=v-1,k=v+1,L=S[R*N+C]+S[R*N+k]+S[_*N+v]+S[T*N+C]+S[T*N+k],I[_*N+v]=L===5?1:0},d.subtract=function(f,p,_){_||(_=f);for(var v=f.data.length,S=f.data,I=p.data,P=_.data;v--;)P[v]=S[v]-I[v]},d.bitwiseOr=function(f,p,_){_||(_=f);for(var v=f.data.length,S=f.data,I=p.data,P=_.data;v--;)P[v]=S[v]||I[v]},d.countNonZero=function(f){for(var p=f.data.length,_=f.data,v=0;p--;)v+=_[p];return v},d.topGeneric=function(f,p,_){var v,S=0,I=0,P=[],N,L,R;for(v=0;v<p;v++)P[v]={score:0,item:null};for(v=0;v<f.length;v++)if(N=_.apply(this,[f[v]]),N>I)for(L=P[S],L.score=N,L.item=f[v],I=Number.MAX_VALUE,R=0;R<p;R++)P[R].score<I&&(I=P[R].score,S=R);return P},d.grayArrayFromImage=function(f,p,_,v){_.drawImage(f,p,0,f.width,f.height);var S=_.getImageData(p,0,f.width,f.height).data;d.computeGray(S,v)},d.grayArrayFromContext=function(f,p,_,v){var S=f.getImageData(_.x,_.y,p.x,p.y).data;d.computeGray(S,v)},d.grayAndHalfSampleFromCanvasData=function(f,p,_){for(var v=0,S=p.x,I=Math.floor(f.length/4),P=p.x/2,N=0,L=p.x,R;S<I;){for(R=0;R<P;R++)_[N]=Math.floor((.299*f[v*4+0]+.587*f[v*4+1]+.114*f[v*4+2]+(.299*f[(v+1)*4+0]+.587*f[(v+1)*4+1]+.114*f[(v+1)*4+2])+(.299*f[S*4+0]+.587*f[S*4+1]+.114*f[S*4+2])+(.299*f[(S+1)*4+0]+.587*f[(S+1)*4+1]+.114*f[(S+1)*4+2]))/4),N++,v=v+2,S=S+2;v=v+L,S=S+L}},d.computeGray=function(f,p,_){var v=f.length/4|0,S,I=_&&_.singleChannel===!0;if(I)for(S=0;S<v;S++)p[S]=f[S*4+0];else for(S=0;S<v;S++)p[S]=Math.floor(.299*f[S*4+0]+.587*f[S*4+1]+.114*f[S*4+2])},d.loadImageArray=function(f,p,_){_||(_=document.createElement("canvas"));var v=new Image;v.callback=p,v.onload=function(){_.width=this.width,_.height=this.height;var S=_.getContext("2d");S.drawImage(this,0,0);var I=new Uint8Array(this.width*this.height);S.drawImage(this,0,0);var P=S.getImageData(0,0,this.width,this.height).data;d.computeGray(P,I),this.callback(I,{x:this.width,y:this.height},this)},v.src=f},d.halfSample=function(f,p){for(var _=f.data,v=f.size.x,S=p.data,I=0,P=v,N=_.length,L=v/2,R=0;P<N;){for(var T=0;T<L;T++)S[R]=Math.floor((_[I]+_[I+1]+_[P]+_[P+1])/4),R++,I=I+2,P=P+2;I=I+v,P=P+v}},d.hsv2rgb=function(f,p){var _=f[0],v=f[1],S=f[2],I=S*v,P=I*(1-Math.abs(_/60%2-1)),N=S-I,L=0,R=0,T=0;return p=p||[0,0,0],_<60?(L=I,R=P):_<120?(L=P,R=I):_<180?(R=I,T=P):_<240?(R=P,T=I):_<300?(L=P,T=I):_<360&&(L=I,T=P),p[0]=(L+N)*255|0,p[1]=(R+N)*255|0,p[2]=(T+N)*255|0,p},d._computeDivisors=function(f){var p=[],_=[],v;for(v=1;v<Math.sqrt(f)+1;v++)f%v===0&&(_.push(v),v!==f/v&&p.unshift(Math.floor(f/v)));return _.concat(p)},d._computeIntersection=function(f,p){for(var _=0,v=0,S=[];_<f.length&&v<p.length;)f[_]===p[v]?(S.push(f[_]),_++,v++):f[_]>p[v]?v++:_++;return S},d.calculatePatchSize=function(f,p){var _=this._computeDivisors(p.x),v=this._computeDivisors(p.y),S=Math.max(p.x,p.y),I=this._computeIntersection(_,v),P=[8,10,15,20,32,60,80],N={"x-small":5,small:4,medium:3,large:2,"x-large":1},L=N[f]||N.medium,R=P[L],T=Math.floor(S/R),C;function k(O){for(var b=0,V=O[Math.floor(O.length/2)];b<O.length-1&&O[b]<T;)b++;return b>0&&(Math.abs(O[b]-T)>Math.abs(O[b-1]-T)?V=O[b-1]:V=O[b]),T/V<P[L+1]/P[L]&&T/V>P[L-1]/P[L]?{x:V,y:V}:null}return C=k(I),C||(C=k(this._computeDivisors(S)),C||(C=k(this._computeDivisors(T*R)))),C},d._parseCSSDimensionValues=function(f){var p={value:parseFloat(f),unit:(f.indexOf("%")===f.length-1,"%")};return p},d._dimensionsConverters={top:function(f,p){if(f.unit==="%")return Math.floor(p.height*(f.value/100))},right:function(f,p){if(f.unit==="%")return Math.floor(p.width-p.width*(f.value/100))},bottom:function(f,p){if(f.unit==="%")return Math.floor(p.height-p.height*(f.value/100))},left:function(f,p){if(f.unit==="%")return Math.floor(p.width*(f.value/100))}},d.computeImageArea=function(f,p,_){var v={width:f,height:p},S=Object.keys(_).reduce(function(I,P){var N=_[P],L=d._parseCSSDimensionValues(N),R=d._dimensionsConverters[P](L,v);return I[P]=R,I},{});return{sx:S.left,sy:S.top,sw:S.right-S.left,sh:S.bottom-S.top}},d}),u("image_wrapper",["subImage","cv_utils","array_helper"],function(a,h,m){function d(f,p,_,v){p?this.data=p:_?(this.data=new _(f.x*f.y),_===Array&&v&&m.init(this.data,0)):(this.data=new Uint8Array(f.x*f.y),Uint8Array===Array&&v&&m.init(this.data,0)),this.size=f}return d.prototype.inImageWithBorder=function(f,p){return f.x>=p&&f.y>=p&&f.x<this.size.x-p&&f.y<this.size.y-p},d.transform=function(f,p,_,v,S){var I=p.size.x,P=p.size.y,N=f.size.x,L=f.size.y,R=U.create([_[0],_[2]]),T=U.create([_[1],_[3]]),C=0,k=U.subtract(v,F.xVec2(_,S,U.create()),U.create()),O=k[0],b=k[1],V=O,$=b,ee,X,oe,J=d.sample;R[0]<0?O+=I*R[0]:V+=I*R[0],T[0]<0?O+=P*T[0]:V+=P*T[0],R[1]<0?b+=I*R[1]:$+=I*R[1],T[1]<0?b+=P*T[1]:$+=P*T[1];var re=U.subtract(T,U.scale(R,I,U.create()),U.create());if(O>=0&&b>=0&&V<N-1&&$<L-1){for(ee=k,X=0;X<P;++X,U.add(ee,re))for(oe=0;oe<I;++oe,U.add(ee,R))p.set(oe,X,J(f,ee[0],ee[1]));return 0}else{var G=N-1,B=L-1,q=0;for(ee=k,X=0;X<P;++X,U.add(ee,re))for(oe=0;oe<I;++oe,U.add(ee,R))0<=ee[0]&&0<=ee[1]&&ee[0]<G&&ee[1]<B?p.set(oe,X,J(f,ee[0],ee[1])):(p.set(oe,X,C),++q);return q}},d.sample=function(f,p,_){var v=Math.floor(p),S=Math.floor(_),I=f.size.x,P=S*f.size.x+v,N=f.data[P+0],L=f.data[P+1],R=f.data[P+I],T=f.data[P+I+1],C=N-L;p-=v,_-=S;var k=Math.floor(p*(_*(C-R+T)-C)+_*(R-N)+N);return k},d.clearArray=function(f){for(var p=f.length;p--;)f[p]=0},d.prototype.subImage=function(f,p){return new a(f,p,this)},d.prototype.subImageAsCopy=function(f,p){var _=f.size.y,v=f.size.x,S,I;for(S=0;S<v;S++)for(I=0;I<_;I++)f.data[I*v+S]=this.data[(p.y+I)*this.size.x+p.x+S]},d.prototype.copyTo=function(f){for(var p=this.data.length,_=this.data,v=f.data;p--;)v[p]=_[p]},d.prototype.get=function(f,p){return this.data[p*this.size.x+f]},d.prototype.getSafe=function(f,p){var _;if(!this.indexMapping){for(this.indexMapping={x:[],y:[]},_=0;_<this.size.x;_++)this.indexMapping.x[_]=_,this.indexMapping.x[_+this.size.x]=_;for(_=0;_<this.size.y;_++)this.indexMapping.y[_]=_,this.indexMapping.y[_+this.size.y]=_}return this.data[this.indexMapping.y[p+this.size.y]*this.size.x+this.indexMapping.x[f+this.size.x]]},d.prototype.set=function(f,p,_){return this.data[p*this.size.x+f]=_,this},d.prototype.zeroBorder=function(){var f,p=this.size.x,_=this.size.y,v=this.data;for(f=0;f<p;f++)v[f]=v[(_-1)*p+f]=0;for(f=1;f<_-1;f++)v[f*p]=v[f*p+(p-1)]=0},d.prototype.invert=function(){for(var f=this.data,p=f.length;p--;)f[p]=f[p]?0:1},d.prototype.convolve=function(f){var p,_,v,S,I=f.length/2|0,P=0;for(_=0;_<this.size.y;_++)for(p=0;p<this.size.x;p++){for(P=0,S=-I;S<=I;S++)for(v=-I;v<=I;v++)P+=f[S+I][v+I]*this.getSafe(p+v,_+S);this.data[_*this.size.x+p]=P}},d.prototype.moments=function(f){var p=this.data,_,v,S=this.size.y,I=this.size.x,P,N,L=[],R,T,C,k,O,b,V,$,ee=[],X=Math.PI,oe=X/4;if(f<=0)return ee;for(R=0;R<f;R++)L[R]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(v=0;v<S;v++)for(N=v*v,_=0;_<I;_++)P=p[v*I+_],P>0&&(T=L[P-1],T.m00+=1,T.m01+=v,T.m10+=_,T.m11+=_*v,T.m02+=N,T.m20+=_*_);for(R=0;R<f;R++)T=L[R],!isNaN(T.m00)&&T.m00!==0&&(b=T.m10/T.m00,V=T.m01/T.m00,C=T.m11/T.m00-b*V,k=T.m02/T.m00-V*V,O=T.m20/T.m00-b*b,$=(k-O)/(2*C),$=.5*Math.atan($)+(C>=0?oe:-oe)+X,T.theta=($*180/X+90)%180-90,T.theta<0&&(T.theta+=180),T.rad=$>X?$-X:$,T.vec=U.create([Math.cos($),Math.sin($)]),ee.push(T));return ee},d.prototype.show=function(f,p){var _,v,S,I,P,N,L;for(p||(p=1),_=f.getContext("2d"),f.width=this.size.x,f.height=this.size.y,v=_.getImageData(0,0,f.width,f.height),S=v.data,I=0,L=0;L<this.size.y;L++)for(N=0;N<this.size.x;N++)P=L*this.size.x+N,I=this.get(N,L)*p,S[P*4+0]=I,S[P*4+1]=I,S[P*4+2]=I,S[P*4+3]=255;_.putImageData(v,0,0)},d.prototype.overlay=function(f,p,_){(!p||p<0||p>360)&&(p=360);for(var v=[0,1,1],S=[0,0,0],I=[255,255,255],P=[0,0,0],N=[],L=f.getContext("2d"),R=L.getImageData(_.x,_.y,this.size.x,this.size.y),T=R.data,C=this.data.length;C--;)v[0]=this.data[C]*p,N=v[0]<=0?I:v[0]>=360?P:h.hsv2rgb(v,S),T[C*4+0]=N[0],T[C*4+1]=N[1],T[C*4+2]=N[2],T[C*4+3]=255;L.putImageData(R,_.x,_.y)},d}),u("tracer",[],function(){var a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(h,m){var d=h.data,f=m.data,p=this.searchDirections,_=h.size.x,v;function S(N,L,R,T){var C,k,O;for(C=0;C<7;C++){if(k=N.cy+p[N.dir][0],O=N.cx+p[N.dir][1],v=k*_+O,d[v]===L&&(f[v]===0||f[v]===R))return f[v]=R,N.cy=k,N.cx=O,!0;f[v]===0&&(f[v]=T),N.dir=(N.dir+1)%8}return!1}function I(N,L,R){return{dir:R,x:N,y:L,next:null,prev:null}}function P(N,L,R,T,C){var k=null,O,b,V,$={cx:L,cy:N,dir:0};if(S($,T,R,C)){k=I(L,N,$.dir),O=k,V=$.dir,b=I($.cx,$.cy,0),b.prev=O,O.next=b,b.next=null,O=b;do $.dir=($.dir+6)%8,S($,T,R,C),V!=$.dir?(O.dir=$.dir,b=I($.cx,$.cy,0),b.prev=O,O.next=b,b.next=null,O=b):(O.dir=V,O.x=$.cx,O.y=$.cy),V=$.dir;while($.cx!=L||$.cy!=N);k.prev=O.prev,O.prev.next=k}return k}return{trace:function(N,L,R,T){return S(N,L,R,T)},contourTracing:function(N,L,R,T,C){return P(N,L,R,T,C)}}}};return a}),u("rasterizer",["tracer"],function(a){var h={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(m,d){var f=m.data,p=d.data,_=m.size.x,v=m.size.y,S=a.create(m,d);return{rasterize:function(I){var P,N,L,R,T,C,k=[],O,b,V,$,ee,X=0,oe;for(oe=0;oe<400;oe++)k[oe]=0;for(k[0]=f[0],V=null,C=1;C<v-1;C++)for(R=0,N=k[0],T=1;T<_-1;T++)if(ee=C*_+T,p[ee]===0)if(P=f[ee],P!==N){if(R===0)L=X+1,k[L]=P,N=P,O=S.contourTracing(C,T,L,P,h.DIR.OUTSIDE_EDGE),O!==null&&(X++,R=L,b=h.createContour2D(),b.dir=h.CONTOUR_DIR.CW_DIR,b.index=R,b.firstVertex=O,b.nextpeer=V,b.insideContours=null,V!==null&&(V.prevpeer=b),V=b);else if(O=S.contourTracing(C,T,h.DIR.INSIDE_EDGE,P,R),O!==null){for(b=h.createContour2D(),b.firstVertex=O,b.insideContours=null,I===0?b.dir=h.CONTOUR_DIR.CCW_DIR:b.dir=h.CONTOUR_DIR.CW_DIR,b.index=I,$=V;$!==null&&$.index!==R;)$=$.nextpeer;$!==null&&(b.nextpeer=$.insideContours,$.insideContours!==null&&($.insideContours.prevpeer=b),$.insideContours=b)}}else p[ee]=R;else p[ee]===h.DIR.OUTSIDE_EDGE||p[ee]===h.DIR.INSIDE_EDGE?(R=0,p[ee]===h.DIR.INSIDE_EDGE?N=f[ee]:N=k[0]):(R=p[ee],N=k[R]);for($=V;$!==null;)$.index=I,$=$.nextpeer;return{cc:V,count:X}},debug:{drawContour:function(I,P){var N=I.getContext("2d"),L=P,R,T,C;for(N.strokeStyle="red",N.fillStyle="red",N.lineWidth=1,L!==null?R=L.insideContours:R=null;L!==null;){switch(R!==null?(T=R,R=R.nextpeer):(T=L,L=L.nextpeer,L!==null?R=L.insideContours:R=null),T.dir){case h.CONTOUR_DIR.CW_DIR:N.strokeStyle="red";break;case h.CONTOUR_DIR.CCW_DIR:N.strokeStyle="blue";break;case h.CONTOUR_DIR.UNKNOWN_DIR:N.strokeStyle="green";break}C=T.firstVertex,N.beginPath(),N.moveTo(C.x,C.y);do C=C.next,N.lineTo(C.x,C.y);while(C!==T.firstVertex);N.stroke()}}}}}};return h}),u("skeletonizer",[],function(){/* @preserve ASM BEGIN */function a(h,m,d){var f=new h.Uint8Array(d),p=m.size|0,_=h.Math.imul;function v(k,O){k=k|0,O=O|0;var b=0,V=0,$=0,ee=0,X=0,oe=0,J=0,re=0;for(b=1;(b|0)<(p-1|0);b=b+1|0)for(re=re+p|0,V=1;(V|0)<(p-1|0);V=V+1|0)ee=re-p|0,X=re+p|0,oe=V-1|0,J=V+1|0,$=(f[k+ee+oe|0]|0)+(f[k+ee+J|0]|0)+(f[k+re+V|0]|0)+(f[k+X+oe|0]|0)+(f[k+X+J|0]|0)|0,($|0)==5?f[O+re+V|0]=1:f[O+re+V|0]=0}function S(k,O,b){k=k|0,O=O|0,b=b|0;var V=0;for(V=_(p,p)|0;(V|0)>0;)V=V-1|0,f[b+V|0]=(f[k+V|0]|0)-(f[O+V|0]|0)|0}function I(k,O,b){k=k|0,O=O|0,b=b|0;var V=0;for(V=_(p,p)|0;(V|0)>0;)V=V-1|0,f[b+V|0]=f[k+V|0]|0|(f[O+V|0]|0)|0}function P(k){k=k|0;var O=0,b=0;for(b=_(p,p)|0;(b|0)>0;)b=b-1|0,O=(O|0)+(f[k+b|0]|0)|0;return O|0}function N(k,O){k=k|0,O=O|0;var b=0;for(b=_(p,p)|0;(b|0)>0;)b=b-1|0,f[k+b|0]=O}function L(k,O){k=k|0,O=O|0;var b=0,V=0,$=0,ee=0,X=0,oe=0,J=0,re=0;for(b=1;(b|0)<(p-1|0);b=b+1|0)for(re=re+p|0,V=1;(V|0)<(p-1|0);V=V+1|0)ee=re-p|0,X=re+p|0,oe=V-1|0,J=V+1|0,$=(f[k+ee+oe|0]|0)+(f[k+ee+J|0]|0)+(f[k+re+V|0]|0)+(f[k+X+oe|0]|0)+(f[k+X+J|0]|0)|0,($|0)>0?f[O+re+V|0]=1:f[O+re+V|0]=0}function R(k,O){k=k|0,O=O|0;var b=0;for(b=_(p,p)|0;(b|0)>0;)b=b-1|0,f[O+b|0]=f[k+b|0]|0}function T(k){k=k|0;var O=0,b=0;for(O=0;(O|0)<(p-1|0);O=O+1|0)f[k+O|0]=0,f[k+b|0]=0,b=b+p-1|0,f[k+b|0]=0,b=b+1|0;for(O=0;(O|0)<(p|0);O=O+1|0)f[k+b|0]=0,b=b+1|0}function C(){var k=0,O=0,b=0,V=0,$=0,ee=0;O=_(p,p)|0,b=O+O|0,V=b+O|0,N(V,0),T(k);do v(k,O),L(O,b),S(k,b,b),I(V,b,V),R(O,k),$=P(k)|0,ee=($|0)==0|0;while(!ee)}return{skeletonize:C}}/* @preserve ASM END */return a}),u("image_debug",[],function(){return{drawRect:function(a,h,m,d){m.strokeStyle=d.color,m.fillStyle=d.color,m.lineWidth=1,m.beginPath(),m.strokeRect(a.x,a.y,h.x,h.y)},drawPath:function(a,h,m,d){m.strokeStyle=d.color,m.fillStyle=d.color,m.lineWidth=d.lineWidth,m.beginPath(),m.moveTo(a[0][h.x],a[0][h.y]);for(var f=1;f<a.length;f++)m.lineTo(a[f][h.x],a[f][h.y]);m.closePath(),m.stroke()},drawImage:function(a,h,m){var d=m.getImageData(0,0,h.x,h.y),f=d.data,p=a.length,_=f.length,v;if(_/p!==4)return!1;for(;p--;)v=a[p],f[--_]=255,f[--_]=v,f[--_]=v,f[--_]=v;return m.putImageData(d,0,0),!0}}}),u("barcode_locator",["image_wrapper","cv_utils","rasterizer","tracer","skeletonizer","array_helper","image_debug"],function(a,h,m,d,f,p,_){var v,S,I,P,N,L,R,T,C,k,O={ctx:{binary:null},dom:{binary:null}},b={x:0,y:0},V,$,ee=this;function X(){var ie;v.halfSample?S=new a({x:V.size.x/2|0,y:V.size.y/2|0}):S=V,k=h.calculatePatchSize(v.patchSize,S.size),b.x=S.size.x/k.x|0,b.y=S.size.y/k.y|0,C=new a(S.size,void 0,Uint8Array,!1),N=new a(k,void 0,Array,!0),ie=new ArrayBuffer(64*1024),P=new a(k,new Uint8Array(ie,0,k.x*k.y)),I=new a(k,new Uint8Array(ie,k.x*k.y*3,k.x*k.y),void 0,!0),$=f(ee,{size:k.x},ie),T=new a({x:S.size.x/P.size.x|0,y:S.size.y/P.size.y|0},void 0,Array,!0),L=new a(T.size,void 0,void 0,!0),R=new a(T.size,void 0,Int32Array,!0)}function oe(){v.useWorker||typeof document>"u"||(O.dom.binary=document.createElement("canvas"),O.dom.binary.className="binaryBuffer",v.showCanvas===!0&&document.querySelector("#debug").appendChild(O.dom.binary),O.ctx.binary=O.dom.binary.getContext("2d"),O.dom.binary.width=C.size.x,O.dom.binary.height=C.size.y)}function J(ie){var he,me,ye,Ee,xe,te=C.size.x,de=C.size.y,Ie=-C.size.x,Ve=-C.size.y,be,et;for(he=0,me=0;me<ie.length;me++)Ee=ie[me],he+=Ee.rad,v.showPatches&&_.drawRect(Ee.pos,P.size,O.ctx.binary,{color:"red"});for(he/=ie.length,he=(he*180/Math.PI+90)%180-90,he<0&&(he+=180),he=(180-he)*Math.PI/180,xe=F.create([Math.cos(he),-Math.sin(he),Math.sin(he),Math.cos(he)]),me=0;me<ie.length;me++){for(Ee=ie[me],ye=0;ye<4;ye++)F.xVec2(xe,Ee.box[ye]);v.boxFromPatches.showTransformed&&_.drawPath(Ee.box,{x:0,y:1},O.ctx.binary,{color:"#99ff00",lineWidth:2})}for(me=0;me<ie.length;me++)for(Ee=ie[me],ye=0;ye<4;ye++)Ee.box[ye][0]<te&&(te=Ee.box[ye][0]),Ee.box[ye][0]>Ie&&(Ie=Ee.box[ye][0]),Ee.box[ye][1]<de&&(de=Ee.box[ye][1]),Ee.box[ye][1]>Ve&&(Ve=Ee.box[ye][1]);for(be=[[te,de],[Ie,de],[Ie,Ve],[te,Ve]],v.boxFromPatches.showTransformedBox&&_.drawPath(be,{x:0,y:1},O.ctx.binary,{color:"#ff0000",lineWidth:2}),et=v.halfSample?2:1,xe=F.inverse(xe),ye=0;ye<4;ye++)F.xVec2(xe,be[ye]);for(v.boxFromPatches.showBB&&_.drawPath(be,{x:0,y:1},O.ctx.binary,{color:"#ff0000",lineWidth:2}),ye=0;ye<4;ye++)U.scale(be[ye],et);return be}function re(){h.otsuThreshold(S,C),C.zeroBorder(),v.showCanvas&&C.show(O.dom.binary,255)}function G(){var ie,he,me,ye,Ee,xe=[],te,de,Ie;for(ie=0;ie<b.x;ie++)for(he=0;he<b.y;he++)me=P.size.x*ie,ye=P.size.y*he,se(me,ye),I.zeroBorder(),p.init(N.data,0),te=m.create(I,N),de=te.rasterize(0),v.showLabels&&N.overlay(O.dom.binary,Math.floor(360/de.count),{x:me,y:ye}),Ee=N.moments(de.count),xe=xe.concat(ve(Ee,[ie,he],me,ye));if(v.showFoundPatches)for(ie=0;ie<xe.length;ie++)Ie=xe[ie],_.drawRect(Ie.pos,P.size,O.ctx.binary,{color:"#99ff00",lineWidth:2});return xe}function B(ie){var he,me,ye=[],Ee=[];for(he=0;he<ie;he++)ye.push(0);for(me=R.data.length;me--;)R.data[me]>0&&ye[R.data[me]-1]++;return ye=ye.map(function(xe,te){return{val:xe,label:te+1}}),ye.sort(function(xe,te){return te.val-xe.val}),Ee=ye.filter(function(xe){return xe.val>=5}),Ee}function q(ie,he){var me,ye,Ee,xe=[],te,de,Ie=[],Ve=[0,1,1],be=[0,0,0];for(me=0;me<ie.length;me++){for(Ee=R.data.length,xe.length=0;Ee--;)R.data[Ee]===ie[me].label&&(te=T.data[Ee],xe.push(te));if(de=J(xe),de&&(Ie.push(de),v.showRemainingPatchLabels))for(ye=0;ye<xe.length;ye++)te=xe[ye],Ve[0]=ie[me].label/(he+1)*360,h.hsv2rgb(Ve,be),_.drawRect(te.pos,P.size,O.ctx.binary,{color:"rgb("+be.join(",")+")",lineWidth:2})}return Ie}function ue(ie){var he=h.cluster(ie,.9),me=h.topGeneric(he,1,function(te){return te.getPoints().length}),ye=[],Ee=[];if(me.length===1){ye=me[0].item.getPoints();for(var xe=0;xe<ye.length;xe++)Ee.push(ye[xe].point)}return Ee}function se(ie,he){C.subImageAsCopy(P,h.imageRef(ie,he)),$.skeletonize(),v.showSkeleton&&I.overlay(O.dom.binary,360,h.imageRef(ie,he))}function ve(ie,he,me,ye){var Ee,xe,te=[],de,Ie,Ve=[],be=Math.ceil(k.x/3);if(ie.length>=2){for(Ee=0;Ee<ie.length;Ee++)ie[Ee].m00>be&&te.push(ie[Ee]);if(te.length>=2){for(te.length,de=ue(te),xe=0,Ee=0;Ee<de.length;Ee++)xe+=de[Ee].rad;de.length>1&&de.length>=te.length/4*3&&de.length>ie.length/4&&(xe/=de.length,Ie={index:he[1]*b.x+he[0],pos:{x:me,y:ye},box:[U.create([me,ye]),U.create([me+P.size.x,ye]),U.create([me+P.size.x,ye+P.size.y]),U.create([me,ye+P.size.y])],moments:de,rad:xe,vec:U.create([Math.cos(xe),Math.sin(xe)])},Ve.push(Ie))}}return Ve}function De(ie){var he=0,me=.95,ye=0,Ee,xe,te=[0,1,1],de=[0,0,0];function Ie(){var be;for(be=0;be<R.data.length;be++)if(R.data[be]===0&&L.data[be]===1)return be;return R.length}function Ve(be){var et,Xt,ht,bt,mn,yn,sr={x:be%R.size.x,y:be/R.size.x|0},Cr;if(be<R.data.length)for(ht=T.data[be],R.data[be]=he,yn=0;yn<d.searchDirections.length;yn++){if(Xt=sr.y+d.searchDirections[yn][0],et=sr.x+d.searchDirections[yn][1],mn=Xt*R.size.x+et,L.data[mn]===0){R.data[mn]=Number.MAX_VALUE;continue}bt=T.data[mn],R.data[mn]===0&&(Cr=Math.abs(U.dot(bt.vec,ht.vec)),Cr>me&&Ve(mn))}}for(p.init(L.data,0),p.init(R.data,0),p.init(T.data,null),Ee=0;Ee<ie.length;Ee++)xe=ie[Ee],T.data[xe.index]=xe,L.data[xe.index]=1;for(L.zeroBorder();(ye=Ie())<R.data.length;)he++,Ve(ye);if(v.showPatchLabels)for(Ee=0;Ee<R.data.length;Ee++)R.data[Ee]>0&&R.data[Ee]<=he&&(xe=T.data[Ee],te[0]=R.data[Ee]/(he+1)*360,h.hsv2rgb(te,de),_.drawRect(xe.pos,P.size,O.ctx.binary,{color:"rgb("+de.join(",")+")",lineWidth:2}));return he}return{init:function(ie,he){v=he,V=ie,X(),oe()},locate:function(){var ie,he,me;if(v.halfSample&&h.halfSample(V,S),re(),ie=G(),ie.length<b.x*b.y*.05)return null;var ye=De(ie);return ye<1||(he=B(ye),he.length===0)?null:(me=q(he,ye),me)},checkImageConstraints:function(ie,he){var me,ye=ie.getWidth(),Ee=ie.getHeight(),xe=he.halfSample?.5:1,te,de;if(ie.getConfig().area&&(de=h.computeImageArea(ye,Ee,ie.getConfig().area),ie.setTopRight({x:de.sx,y:de.sy}),ie.setCanvasSize({x:ye,y:Ee}),ye=de.sw,Ee=de.sh),te={x:Math.floor(ye*xe),y:Math.floor(Ee*xe)},me=h.calculatePatchSize(he.patchSize,te),console.log("Patch-Size: "+JSON.stringify(me)),ie.setWidth(Math.floor(Math.floor(te.x/me.x)*(1/xe)*me.x)),ie.setHeight(Math.floor(Math.floor(te.y/me.y)*(1/xe)*me.y)),ie.getWidth()%me.x===0&&ie.getHeight()%me.y===0)return!0;throw new Error("Image dimensions do not comply with the current settings: Width ("+ye+" )and height ("+Ee+") must a multiple of "+me.x)}}}),u("bresenham",["cv_utils","image_wrapper"],function(a,h){var m={},d={DIR:{UP:1,DOWN:-1}};return m.getBarcodeLine=function(f,p,_){var v=p.x|0,S=p.y|0,I=_.x|0,P=_.y|0,N=Math.abs(P-S)>Math.abs(I-v),L,R,T,C,k,O,b,V=[],$=f.data,ee=f.size.x,X,oe=255,J=0;function re(G,B){X=$[B*ee+G],oe=X<oe?X:oe,J=X>J?X:J,V.push(X)}for(N&&(O=v,v=S,S=O,O=I,I=P,P=O),v>I&&(O=v,v=I,I=O,O=S,S=P,P=O),L=I-v,R=Math.abs(P-S),T=L/2|0,k=S,C=S<P?1:-1,b=v;b<I;b++)N?re(k,b):re(b,k),T=T-R,T<0&&(k=k+C,T=T+L);return{line:V,min:oe,max:J}},m.toOtsuBinaryLine=function(f){var p=f.line,_=new h({x:p.length-1,y:1},p),v=a.determineOtsuThreshold(_,5);return p=a.sharpenLine(p),a.thresholdImage(_,v),{line:p,threshold:v}},m.toBinaryLine=function(f){var p=f.min,_=f.max,v=f.line,S,I,P=p+(_-p)/2,N=[],L,R,T=(_-p)/12,C=-T,k,O;for(L=v[0]>P?d.DIR.UP:d.DIR.DOWN,N.push({pos:0,val:v[0]}),k=0;k<v.length-2;k++)S=v[k+1]-v[k],I=v[k+2]-v[k+1],S+I<C&&v[k+1]<P*1.5?R=d.DIR.DOWN:S+I>T&&v[k+1]>P*.5?R=d.DIR.UP:R=L,L!==R&&(N.push({pos:k,val:v[k]}),L=R);for(N.push({pos:v.length,val:v[v.length-1]}),O=N[0].pos;O<N[1].pos;O++)v[O]=v[O]>P?0:1;for(k=1;k<N.length-1;k++)for(N[k+1].val>N[k].val?T=N[k].val+(N[k+1].val-N[k].val)/3*2|0:T=N[k+1].val+(N[k].val-N[k+1].val)/3|0,O=N[k].pos;O<N[k+1].pos;O++)v[O]=v[O]>T?0:1;return{line:v,threshold:T}},m.debug={printFrequency:function(f,p){var _,v=p.getContext("2d");for(p.width=f.length,p.height=256,v.beginPath(),v.strokeStyle="blue",_=0;_<f.length;_++)v.moveTo(_,255),v.lineTo(_,255-f[_]);v.stroke(),v.closePath()},printPattern:function(f,p){var _=p.getContext("2d"),v;for(p.width=f.length,_.fillColor="black",v=0;v<f.length;v++)f[v]===1&&_.fillRect(v,0,1,100)}},m}),u("barcode_reader",[],function(){function a(h){return this._row=[],this.config=h||{},this}return a.prototype._nextUnset=function(h,m){var d;for(m===void 0&&(m=0),d=m;d<h.length;d++)if(!h[d])return d;return h.length},a.prototype._matchPattern=function(h,m){var d,f=0,p=0,_=this.MODULO,v=this.SINGLE_CODE_ERROR||1;for(d=0;d<h.length;d++){if(p=Math.abs(m[d]-h[d]),p>v)return Number.MAX_VALUE;f+=p}return f/_},a.prototype._nextSet=function(h,m){var d;for(m=m||0,d=m;d<h.length;d++)if(h[d])return d;return h.length},a.prototype._normalize=function(h,m){var d,f=this,p=0,_,v=0,S=[],I=0;for(m||(m=f.MODULO),d=0;d<h.length;d++)h[d]===1?v++:p+=h[d];if(_=p/(m-v),_>1)for(d=0;d<h.length;d++)I=h[d]===1?h[d]:h[d]/_,S.push(I);else for(_=(p+v)/m,d=0;d<h.length;d++)I=h[d]/_,S.push(I);return S},a.prototype._matchTrace=function(h,m){var d=[],f,p=this,_=p._nextSet(p._row),v=!p._row[_],S=0,I={error:Number.MAX_VALUE,code:-1,start:0},P;if(h){for(f=0;f<h.length;f++)d.push(0);for(f=_;f<p._row.length;f++)if(p._row[f]^v)d[S]++;else{if(S===d.length-1)return P=p._matchPattern(d,h),P<m?(I.start=f-_,I.end=f,I.counter=d,I):null;S++,d[S]=1,v=!v}}else for(d.push(0),f=_;f<p._row.length;f++)p._row[f]^v?d[S]++:(S++,d.push(0),d[S]=1,v=!v);return I.start=_,I.end=p._row.length-1,I.counter=d,I},a.prototype.decodePattern=function(h){var m=this,d;return m._row=h,d=m._decode(),d===null?(m._row.reverse(),d=m._decode(),d&&(d.direction=a.DIRECTION.REVERSE,d.start=m._row.length-d.start,d.end=m._row.length-d.end)):d.direction=a.DIRECTION.FORWARD,d&&(d.format=m.FORMAT),d},a.prototype._matchRange=function(h,m,d){var f;for(h=h<0?0:h,f=h;f<m;f++)if(this._row[f]!==d)return!1;return!0},a.prototype._fillCounters=function(h,m,d){var f=this,p=0,_,v=[];for(d=typeof d<"u"?d:!0,h=typeof h<"u"?h:f._nextUnset(f._row),m=m||f._row.length,v[p]=0,_=h;_<m;_++)f._row[_]^d?v[p]++:(p++,v[p]=1,d=!d);return v},Object.defineProperty(a.prototype,"FORMAT",{value:"unknown",writeable:!1}),a.DIRECTION={FORWARD:1,REVERSE:-1},a.Exception={StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",PatternNotFoundException:"Pattern could not be found!"},a.CONFIG_KEYS={},a}),u("code_128_reader",["./barcode_reader"],function(a){function h(){a.call(this)}var m={CODE_SHIFT:{value:98},CODE_C:{value:99},CODE_B:{value:100},CODE_A:{value:101},START_CODE_A:{value:103},START_CODE_B:{value:104},START_CODE_C:{value:105},STOP_CODE:{value:106},MODULO:{value:11},CODE_PATTERN:{value:[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]},SINGLE_CODE_ERROR:{value:1},AVG_CODE_ERROR:{value:.5},FORMAT:{value:"code_128",writeable:!1}};return h.prototype=Object.create(a.prototype,m),h.prototype.constructor=h,h.prototype._decodeCode=function(d){var f=[0,0,0,0,0,0],p,_=this,v=d,S=!_._row[v],I=0,P={error:Number.MAX_VALUE,code:-1,start:d,end:d},N,L,R;for(p=v;p<_._row.length;p++)if(_._row[p]^S)f[I]++;else{if(I===f.length-1){if(R=_._normalize(f),R){for(N=0;N<_.CODE_PATTERN.length;N++)L=_._matchPattern(R,_.CODE_PATTERN[N]),L<P.error&&(P.code=N,P.error=L);return P.end=p,P}}else I++;f[I]=1,S=!S}return null},h.prototype._findStart=function(){var d=[0,0,0,0,0,0],f,p=this,_=p._nextSet(p._row),v=!1,S=0,I={error:Number.MAX_VALUE,code:-1,start:0,end:0},P,N,L,R,T;for(f=_;f<p._row.length;f++)if(p._row[f]^v)d[S]++;else{if(S===d.length-1){for(R=0,L=0;L<d.length;L++)R+=d[L];if(T=p._normalize(d),T){for(P=p.START_CODE_A;P<=p.START_CODE_C;P++)N=p._matchPattern(T,p.CODE_PATTERN[P]),N<I.error&&(I.code=P,I.error=N);if(I.error<p.AVG_CODE_ERROR)return I.start=f-R,I.end=f,I}for(L=0;L<4;L++)d[L]=d[L+2];d[4]=0,d[5]=0,S--}else S++;d[S]=1,v=!v}return null},h.prototype._decode=function(){var d=this,f=d._findStart(),p=null,_=!1,v=[],S=0,I=0,P,N=[],L=[],R=!1,T;if(f===null)return null;switch(p={code:f.code,start:f.start,end:f.end},L.push(p),I=p.code,p.code){case d.START_CODE_A:P=d.CODE_A;break;case d.START_CODE_B:P=d.CODE_B;break;case d.START_CODE_C:P=d.CODE_C;break;default:return null}for(;!_;){if(T=R,R=!1,p=d._decodeCode(p.end),p!==null)switch(p.code!==d.STOP_CODE&&(N.push(p.code),S++,I+=S*p.code),L.push(p),P){case d.CODE_A:if(p.code<64)v.push(String.fromCharCode(32+p.code));else if(p.code<96)v.push(String.fromCharCode(p.code-64));else switch(p.code){case d.CODE_SHIFT:R=!0,P=d.CODE_B;break;case d.CODE_B:P=d.CODE_B;break;case d.CODE_C:P=d.CODE_C;break;case d.STOP_CODE:_=!0;break}break;case d.CODE_B:if(p.code<96)v.push(String.fromCharCode(32+p.code));else switch(p.code!=d.STOP_CODE,p.code){case d.CODE_SHIFT:R=!0,P=d.CODE_A;break;case d.CODE_A:P=d.CODE_A;break;case d.CODE_C:P=d.CODE_C;break;case d.STOP_CODE:_=!0;break}break;case d.CODE_C:switch(p.code<100&&v.push(p.code<10?"0"+p.code:p.code),p.code){case d.CODE_A:P=d.CODE_A;break;case d.CODE_B:P=d.CODE_B;break;case d.STOP_CODE:_=!0;break}break}else _=!0;T&&(P=P==d.CODE_A?d.CODE_B:d.CODE_A)}return p===null||(p.end=d._nextUnset(d._row,p.end),!d._verifyTrailingWhitespace(p))||(I-=S*N[N.length-1],I%103!=N[N.length-1])||!v.length?null:(v.splice(v.length-1,1),{code:v.join(""),start:f.start,end:p.end,codeset:P,startInfo:f,decodedCodes:L,endInfo:p})},a.prototype._verifyTrailingWhitespace=function(d){var f=this,p;return p=d.end+(d.end-d.start)/2,p<f._row.length&&f._matchRange(d.end,p,0)?d:null},h}),u("ean_reader",["./barcode_reader"],function(a){function h(d){a.call(this,d)}var m={CODE_L_START:{value:0},MODULO:{value:7},CODE_G_START:{value:10},START_PATTERN:{value:[1/3*7,1/3*7,1/3*7]},STOP_PATTERN:{value:[1/3*7,1/3*7,1/3*7]},MIDDLE_PATTERN:{value:[1/5*7,1/5*7,1/5*7,1/5*7,1/5*7]},CODE_PATTERN:{value:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]]},CODE_FREQUENCY:{value:[0,11,13,14,19,25,28,21,22,26]},SINGLE_CODE_ERROR:{value:.67},AVG_CODE_ERROR:{value:.27},FORMAT:{value:"ean_13",writeable:!1}};return h.prototype=Object.create(a.prototype,m),h.prototype.constructor=h,h.prototype._decodeCode=function(d,f){var p=[0,0,0,0],_,v=this,S=d,I=!v._row[S],P=0,N={error:Number.MAX_VALUE,code:-1,start:d,end:d},L,R,T;for(f||(f=v.CODE_PATTERN.length),_=S;_<v._row.length;_++)if(v._row[_]^I)p[P]++;else{if(P===p.length-1){if(T=v._normalize(p),T){for(L=0;L<f;L++)R=v._matchPattern(T,v.CODE_PATTERN[L]),R<N.error&&(N.code=L,N.error=R);return N.end=_,N.error>v.AVG_CODE_ERROR?null:N}}else P++;p[P]=1,I=!I}return null},h.prototype._findPattern=function(d,f,p,_,v){var S=[],I=this,P,N=0,L={error:Number.MAX_VALUE,code:-1,start:0,end:0},R,T,C,k;for(f||(f=I._nextSet(I._row)),p===void 0&&(p=!1),_===void 0&&(_=!0),v===void 0&&(v=I.AVG_CODE_ERROR),P=0;P<d.length;P++)S[P]=0;for(P=f;P<I._row.length;P++)if(I._row[P]^p)S[N]++;else{if(N===S.length-1){for(C=0,T=0;T<S.length;T++)C+=S[T];if(k=I._normalize(S),k&&(R=I._matchPattern(k,d),R<v))return L.error=R,L.start=P-C,L.end=P,L;if(_){for(T=0;T<S.length-2;T++)S[T]=S[T+2];S[S.length-2]=0,S[S.length-1]=0,N--}else return null}else N++;S[N]=1,p=!p}return null},h.prototype._findStart=function(){for(var d=this,f,p=d._nextSet(d._row),_;!_;){if(_=d._findPattern(d.START_PATTERN,p),!_)return null;if(f=_.start-(_.end-_.start),f>=0&&d._matchRange(f,_.start,0))return _;p=_.end,_=null}},h.prototype._verifyTrailingWhitespace=function(d){var f=this,p;return p=d.end+(d.end-d.start),p<f._row.length&&f._matchRange(d.end,p,0)?d:null},h.prototype._findEnd=function(d,f){var p=this,_=p._findPattern(p.STOP_PATTERN,d,f,!1);return _!==null?p._verifyTrailingWhitespace(_):null},h.prototype._calculateFirstDigit=function(d){var f,p=this;for(f=0;f<p.CODE_FREQUENCY.length;f++)if(d===p.CODE_FREQUENCY[f])return f;return null},h.prototype._decodePayload=function(d,f,p){var _,v=this,S=0,I;for(_=0;_<6;_++){if(d=v._decodeCode(d.end),!d)return null;d.code>=v.CODE_G_START?(d.code=d.code-v.CODE_G_START,S|=1<<5-_):S|=0<<5-_,f.push(d.code),p.push(d)}if(I=v._calculateFirstDigit(S),I===null||(f.unshift(I),d=v._findPattern(v.MIDDLE_PATTERN,d.end,!0,!1),d===null))return null;for(p.push(d),_=0;_<6;_++){if(d=v._decodeCode(d.end,v.CODE_G_START),!d)return null;p.push(d),f.push(d.code)}return d},h.prototype._decode=function(){var d,f=this,p,_=[],v=[];return d=f._findStart(),!d||(p={code:d.code,start:d.start,end:d.end},v.push(p),p=f._decodePayload(p,_,v),!p)||(p=f._findEnd(p.end,!1),!p)||(v.push(p),!f._checksum(_))?null:{code:_.join(""),start:d.start,end:p.end,codeset:"",startInfo:d,decodedCodes:v}},h.prototype._checksum=function(d){var f=0,p;for(p=d.length-2;p>=0;p-=2)f+=d[p];for(f*=3,p=d.length-1;p>=0;p-=2)f+=d[p];return f%10===0},h}),u("code_39_reader",["./barcode_reader","./array_helper"],function(a,h){function m(){a.call(this)}var d={ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,46,32,42,36,47,43,37]},CHARACTER_ENCODINGS:{value:[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]},ASTERISK:{value:148},FORMAT:{value:"code_39",writeable:!1}};return m.prototype=Object.create(a.prototype,d),m.prototype.constructor=m,m.prototype._toCounters=function(f,p){var _=this,v=p.length,S=_._row.length,I=!_._row[f],P,N=0;for(h.init(p,0),P=f;P<S;P++)if(_._row[P]^I)p[N]++;else{if(N++,N===v)break;p[N]=1,I=!I}return p},m.prototype._decode=function(){var f=this,p=[0,0,0,0,0,0,0,0,0],_=[],v=f._findStart(),S,I,P,N;if(!v)return null;N=f._nextSet(f._row,v.end);do{if(p=f._toCounters(N,p),P=f._toPattern(p),P<0||(S=f._patternToChar(P),S<0))return null;_.push(S),I=N,N+=h.sum(p),N=f._nextSet(f._row,N)}while(S!=="*");return _.pop(),!_.length||!f._verifyTrailingWhitespace(I,N,p)?null:{code:_.join(""),start:v.start,end:N,startInfo:v,decodedCodes:_}},m.prototype._verifyTrailingWhitespace=function(f,p,_){var v,S=h.sum(_);return v=p-f-S,v*3>=S},m.prototype._patternToChar=function(f){var p,_=this;for(p=0;p<_.CHARACTER_ENCODINGS.length;p++)if(_.CHARACTER_ENCODINGS[p]===f)return String.fromCharCode(_.ALPHABET[p])},m.prototype._findNextWidth=function(f,p){var _,v=Number.MAX_VALUE;for(_=0;_<f.length;_++)f[_]<v&&f[_]>p&&(v=f[_]);return v},m.prototype._toPattern=function(f){for(var p=f.length,_=0,v=p,S=0,I=this,P,N;v>3;){for(_=I._findNextWidth(f,_),v=0,P=0,N=0;N<p;N++)f[N]>_&&(P|=1<<p-1-N,v++,S+=f[N]);if(v===3){for(N=0;N<p&&v>0;N++)if(f[N]>_&&(v--,f[N]*2>=S))return-1;return P}}return-1},m.prototype._findStart=function(){var f=this,p=f._nextSet(f._row),_=p,v=[0,0,0,0,0,0,0,0,0],S=0,I=!1,P,N,L;for(P=p;P<f._row.length;P++)if(f._row[P]^I)v[S]++;else{if(S===v.length-1){if(f._toPattern(v)===f.ASTERISK&&(L=Math.floor(Math.max(0,_-(P-_)/4)),f._matchRange(L,_,0)))return{start:_,end:P};for(_+=v[0]+v[1],N=0;N<7;N++)v[N]=v[N+2];v[7]=0,v[8]=0,S--}else S++;v[S]=1,I=!I}return null},m}),u("code_39_vin_reader",["./code_39_reader"],function(a){function h(){a.call(this)}var m={IOQ:/[IOQ]/g,AZ09:/[A-Z0-9]{17}/};return h.prototype=Object.create(a.prototype),h.prototype.constructor=h,h.prototype._decode=function(){var d=a.prototype._decode.apply(this);if(!d)return null;var f=d.code;if(f)return f=f.replace(m.IOQ,""),f.match(m.AZ09)?this._checkChecksum(f)?(d.code=f,d):null:(console.log("Failed AZ09 pattern code:",f),null)},h.prototype._checkChecksum=function(d){return!!d},h}),u("codabar_reader",["./barcode_reader"],function(a){function h(){a.call(this),this._counters=[]}var m={ALPHABETH_STRING:{value:"0123456789-$:/.+ABCD"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68]},CHARACTER_ENCODINGS:{value:[3,6,9,96,18,66,33,36,48,72,12,24,69,81,84,21,26,41,11,14]},START_END:{value:[26,41,11,14]},MIN_ENCODED_CHARS:{value:4},MAX_ACCEPTABLE:{value:2},PADDING:{value:1.5},FORMAT:{value:"codabar",writeable:!1}};return h.prototype=Object.create(a.prototype,m),h.prototype.constructor=h,h.prototype._decode=function(){var d=this,f=[],p,_,v,S,I;if(this._counters=d._fillCounters(),p=d._findStart(),!p)return null;S=p.startCounter;do{if(v=d._toPattern(S),v<0||(_=d._patternToChar(v),_<0))return null;if(f.push(_),S+=8,f.length>1&&d._isStartEnd(v))break}while(S<d._counters.length);return f.length-2<d.MIN_ENCODED_CHARS||!d._isStartEnd(v)||!d._verifyWhitespace(p.startCounter,S-8)||!d._validateResult(f,p.startCounter)?null:(S=S>d._counters.length?d._counters.length:S,I=p.start+d._sumCounters(p.startCounter,S-8),{code:f.join(""),start:p.start,end:I,startInfo:p,decodedCodes:f})},h.prototype._verifyWhitespace=function(d,f){return(d-1<=0||this._counters[d-1]>=this._calculatePatternLength(d)/2)&&(f+8>=this._counters.length||this._counters[f+7]>=this._calculatePatternLength(f)/2)},h.prototype._calculatePatternLength=function(d){var f,p=0;for(f=d;f<d+7;f++)p+=this._counters[f];return p},h.prototype._thresholdResultPattern=function(d,f){var p=this,_={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},v,S,I,P,N=f,L;for(I=0;I<d.length;I++){for(L=p._charToPattern(d[I]),P=6;P>=0;P--)v=(P&1)===2?_.bar:_.space,S=(L&1)===1?v.wide:v.narrow,S.size+=p._counters[N+P],S.counts++,L>>=1;N+=8}return["space","bar"].forEach(function(R){var T=_[R];T.wide.min=Math.floor((T.narrow.size/T.narrow.counts+T.wide.size/T.wide.counts)/2),T.narrow.max=Math.ceil(T.wide.min),T.wide.max=Math.ceil((T.wide.size*p.MAX_ACCEPTABLE+p.PADDING)/T.wide.counts)}),_},h.prototype._charToPattern=function(d){var f=this,p=d.charCodeAt(0),_;for(_=0;_<f.ALPHABET.length;_++)if(f.ALPHABET[_]===p)return f.CHARACTER_ENCODINGS[_];return 0},h.prototype._validateResult=function(d,f){var p=this,_=p._thresholdResultPattern(d,f),v,S,I,P,N,L=f,R;for(v=0;v<d.length;v++){for(R=p._charToPattern(d[v]),S=6;S>=0;S--){if(I=S&1?_.space:_.bar,P=(R&1)===1?I.wide:I.narrow,N=p._counters[L+S],N<P.min||N>P.max)return!1;R>>=1}L+=8}return!0},h.prototype._patternToChar=function(d){var f,p=this;for(f=0;f<p.CHARACTER_ENCODINGS.length;f++)if(p.CHARACTER_ENCODINGS[f]===d)return String.fromCharCode(p.ALPHABET[f]);return-1},h.prototype._computeAlternatingThreshold=function(d,f){var p,_=Number.MAX_VALUE,v=0,S;for(p=d;p<f;p+=2)S=this._counters[p],S>v&&(v=S),S<_&&(_=S);return(_+v)/2|0},h.prototype._toPattern=function(d){var f=7,p=d+f,_,v,S=1<<f-1,I=0,P,N;if(p>this._counters.length)return-1;for(_=this._computeAlternatingThreshold(d,p),v=this._computeAlternatingThreshold(d+1,p),P=0;P<f;P++)N=P&1?v:_,this._counters[d+P]>N&&(I|=S),S>>=1;return I},h.prototype._isStartEnd=function(d){var f;for(f=0;f<this.START_END.length;f++)if(this.START_END[f]===d)return!0;return!1},h.prototype._sumCounters=function(d,f){var p,_=0;for(p=d;p<f;p++)_+=this._counters[p];return _},h.prototype._findStart=function(){var d=this,f,p,_=d._nextUnset(d._row),v;for(f=1;f<this._counters.length;f++)if(p=d._toPattern(f),p!==-1&&d._isStartEnd(p))return _+=d._sumCounters(0,f),v=_+d._sumCounters(f,f+8),{start:_,end:v,startCounter:f,endCounter:f+8}},h}),u("upc_reader",["./ean_reader"],function(a){function h(){a.call(this)}var m={FORMAT:{value:"upc_a",writeable:!1}};return h.prototype=Object.create(a.prototype,m),h.prototype.constructor=h,h.prototype._decode=function(){var d=a.prototype._decode.call(this);return d&&d.code&&d.code.length===13&&d.code.charAt(0)==="0"?(d.code=d.code.substring(1),d):null},h}),u("ean_8_reader",["./ean_reader"],function(a){function h(){a.call(this)}var m={FORMAT:{value:"ean_8",writeable:!1}};return h.prototype=Object.create(a.prototype,m),h.prototype.constructor=h,h.prototype._decodePayload=function(d,f,p){var _,v=this;for(_=0;_<4;_++){if(d=v._decodeCode(d.end,v.CODE_G_START),!d)return null;f.push(d.code),p.push(d)}if(d=v._findPattern(v.MIDDLE_PATTERN,d.end,!0,!1),d===null)return null;for(p.push(d),_=0;_<4;_++){if(d=v._decodeCode(d.end,v.CODE_G_START),!d)return null;p.push(d),f.push(d.code)}return d},h}),u("upc_e_reader",["./ean_reader"],function(a){function h(){a.call(this)}var m={CODE_FREQUENCY:{value:[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]},STOP_PATTERN:{value:[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]},FORMAT:{value:"upc_e",writeable:!1}};return h.prototype=Object.create(a.prototype,m),h.prototype.constructor=h,h.prototype._decodePayload=function(d,f,p){var _,v=this,S=0;for(_=0;_<6;_++){if(d=v._decodeCode(d.end),!d)return null;d.code>=v.CODE_G_START&&(d.code=d.code-v.CODE_G_START,S|=1<<5-_),f.push(d.code),p.push(d)}return v._determineParity(S,f)?d:null},h.prototype._determineParity=function(d,f){var p=this,_,v;for(v=0;v<p.CODE_FREQUENCY.length;v++)for(_=0;_<p.CODE_FREQUENCY[v].length;_++)if(d===p.CODE_FREQUENCY[v][_])return f.unshift(v),f.push(_),!0;return!1},h.prototype._convertToUPCA=function(d){var f=[d[0]],p=d[d.length-2];return p<=2?f=f.concat(d.slice(1,3)).concat([p,0,0,0,0]).concat(d.slice(3,6)):p===3?f=f.concat(d.slice(1,4)).concat([0,0,0,0,0]).concat(d.slice(4,6)):p===4?f=f.concat(d.slice(1,5)).concat([0,0,0,0,0,d[5]]):f=f.concat(d.slice(1,6)).concat([0,0,0,0,p]),f.push(d[d.length-1]),f},h.prototype._checksum=function(d){return a.prototype._checksum.call(this,this._convertToUPCA(d))},h.prototype._findEnd=function(d,f){return f=!0,a.prototype._findEnd.call(this,d,f)},h.prototype._verifyTrailingWhitespace=function(d){var f=this,p;if(p=d.end+(d.end-d.start)/2,p<f._row.length&&f._matchRange(d.end,p,0))return d},h}),u("html_utils",[],function(){function a(m){var d=document.createElement("div");for(d.innerHTML=m;d.firstChild;)return d.firstChild}function h(m,d){for(var f in d)try{d[f].constructor==Object?m[f]=h(m[f],d[f]):m[f]=d[f]}catch{m[f]=d[f]}return m}return{createNode:function(m){return a(m)},mergeObjects:function(m,d){return h(m,d)}}}),u("i2of5_reader",["./barcode_reader","./html_utils"],function(a,h){function m(v){v=h.mergeObjects(d(),v),a.call(this,v),this.barSpaceRatio=[1,1],v.normalizeBarSpaceWidth&&(this.SINGLE_CODE_ERROR=.38,this.AVG_CODE_ERROR=.09)}function d(){var v={};return Object.keys(m.CONFIG_KEYS).forEach(function(S){v[S]=m.CONFIG_KEYS[S].default}),v}var f=1,p=3,_={MODULO:{value:10},START_PATTERN:{value:[f*2.5,f*2.5,f*2.5,f*2.5]},STOP_PATTERN:{value:[f*2,f*2,p*2]},CODE_PATTERN:{value:[[f,f,p,p,f],[p,f,f,f,p],[f,p,f,f,p],[p,p,f,f,f],[f,f,p,f,p],[p,f,p,f,f],[f,p,p,f,f],[f,f,f,p,p],[p,f,f,p,f],[f,p,f,p,f]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.38,writable:!0},MAX_CORRECTION_FACTOR:{value:5},FORMAT:{value:"i2of5"}};return m.prototype=Object.create(a.prototype,_),m.prototype.constructor=m,m.prototype._matchPattern=function(v,S){if(this.config.normalizeBarSpaceWidth){var I,P=[0,0],N=[0,0],L=[0,0],R=this.MAX_CORRECTION_FACTOR,T=1/R;for(I=0;I<v.length;I++)P[I%2]+=v[I],N[I%2]+=S[I];for(L[0]=N[0]/P[0],L[1]=N[1]/P[1],L[0]=Math.max(Math.min(L[0],R),T),L[1]=Math.max(Math.min(L[1],R),T),this.barSpaceRatio=L,I=0;I<v.length;I++)v[I]*=this.barSpaceRatio[I%2]}return a.prototype._matchPattern.call(this,v,S)},m.prototype._findPattern=function(v,S,I,P){var N=[],L=this,R,T=0,C={error:Number.MAX_VALUE,code:-1,start:0,end:0},k,O,b,V,$=L.AVG_CODE_ERROR;for(I=I||!1,P=P||!1,S||(S=L._nextSet(L._row)),R=0;R<v.length;R++)N[R]=0;for(R=S;R<L._row.length;R++)if(L._row[R]^I)N[T]++;else{if(T===N.length-1){for(b=0,O=0;O<N.length;O++)b+=N[O];if(V=L._normalize(N),V&&(k=L._matchPattern(V,v),k<$))return C.error=k,C.start=R-b,C.end=R,C;if(P){for(O=0;O<N.length-2;O++)N[O]=N[O+2];N[N.length-2]=0,N[N.length-1]=0,T--}else return null}else T++;N[T]=1,I=!I}return null},m.prototype._findStart=function(){for(var v=this,S,I=v._nextSet(v._row),P,N=1;!P;){if(P=v._findPattern(v.START_PATTERN,I,!1,!0),!P)return null;if(N=Math.floor((P.end-P.start)/4),S=P.start-N*10,S>=0&&v._matchRange(S,P.start,0))return P;I=P.end,P=null}},m.prototype._verifyTrailingWhitespace=function(v){var S=this,I;return I=v.end+(v.end-v.start)/2,I<S._row.length&&S._matchRange(v.end,I,0)?v:null},m.prototype._findEnd=function(){var v=this,S,I;return v._row.reverse(),S=v._findPattern(v.STOP_PATTERN),v._row.reverse(),S===null?null:(I=S.start,S.start=v._row.length-S.end,S.end=v._row.length-I,S!==null?v._verifyTrailingWhitespace(S):null)},m.prototype._decodePair=function(v){var S,I,P=[],N=this;for(S=0;S<v.length;S++){if(I=N._decodeCode(v[S]),!I)return null;P.push(I)}return P},m.prototype._decodeCode=function(v){var S,I=this,P=0,N,L,R=I.AVG_CODE_ERROR,T,C={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(S=0;S<v.length;S++)P+=v[S];if(N=I._normalize(v),N){for(T=0;T<I.CODE_PATTERN.length;T++)L=I._matchPattern(N,I.CODE_PATTERN[T]),L<C.error&&(C.code=T,C.error=L);if(C.error<R)return C}return null},m.prototype._decodePayload=function(v,S,I){for(var P,N=this,L=0,R=v.length,T=[[0,0,0,0,0],[0,0,0,0,0]],C;L<R;){for(P=0;P<5;P++)T[0][P]=v[L]*this.barSpaceRatio[0],T[1][P]=v[L+1]*this.barSpaceRatio[1],L+=2;if(C=N._decodePair(T),!C)return null;for(P=0;P<C.length;P++)S.push(C[P].code+""),I.push(C[P])}return C},m.prototype._verifyCounterLength=function(v){return v.length%10===0},m.prototype._decode=function(){var v,S,I=this,P,N=[],L=[],R;return v=I._findStart(),!v||(L.push(v),S=I._findEnd(),!S)||(R=I._fillCounters(v.end,S.start,!1),!I._verifyCounterLength(R))||(P=I._decodePayload(R,N,L),!P)||N.length%2!==0||N.length<6?null:(L.push(S),{code:N.join(""),start:v.start,end:S.end,startInfo:v,decodedCodes:L})},m.CONFIG_KEYS={normalizeBarSpaceWidth:{type:"boolean",default:!1,description:"If true, the reader tries to normalize thewidth-difference between bars and spaces"}},m}),u("barcode_decoder",["bresenham","image_debug","code_128_reader","ean_reader","code_39_reader","code_39_vin_reader","codabar_reader","upc_reader","ean_8_reader","upc_e_reader","i2of5_reader"],function(a,h,m,d,f,p,_,v,S,I,P){var N={code_128_reader:m,ean_reader:d,ean_8_reader:S,code_39_reader:f,code_39_vin_reader:p,codabar_reader:_,upc_reader:v,upc_e_reader:I,i2of5_reader:P},L={create:function(R,T){var C={ctx:{frequency:null,pattern:null,overlay:null},dom:{frequency:null,pattern:null,overlay:null}},k=[];O(),b(),V();function O(){if(typeof document<"u"){var G=document.querySelector("#debug.detection");C.dom.frequency=document.querySelector("canvas.frequency"),C.dom.frequency||(C.dom.frequency=document.createElement("canvas"),C.dom.frequency.className="frequency",G&&G.appendChild(C.dom.frequency)),C.ctx.frequency=C.dom.frequency.getContext("2d"),C.dom.pattern=document.querySelector("canvas.patternBuffer"),C.dom.pattern||(C.dom.pattern=document.createElement("canvas"),C.dom.pattern.className="patternBuffer",G&&G.appendChild(C.dom.pattern)),C.ctx.pattern=C.dom.pattern.getContext("2d"),C.dom.overlay=document.querySelector("canvas.drawingBuffer"),C.dom.overlay&&(C.ctx.overlay=C.dom.overlay.getContext("2d"))}}function b(){R.readers.forEach(function(G){var B,q={};typeof G=="object"?(B=G.format,q=G.config):typeof G=="string"&&(B=G),k.push(new N[B](q))}),console.log("Registered Readers: "+k.map(function(G){return JSON.stringify({format:G.FORMAT,config:G.config})}).join(", "))}function V(){if(typeof document<"u"){var G,B=[{node:C.dom.frequency,prop:R.showFrequency},{node:C.dom.pattern,prop:R.showPattern}];for(G=0;G<B.length;G++)B[G].prop===!0?B[G].node.style.display="block":B[G].node.style.display="none"}}function $(G,B,q){function ue(se){var ve={y:se*Math.sin(B),x:se*Math.cos(B)};G[0].y-=ve.y,G[0].x-=ve.x,G[1].y+=ve.y,G[1].x+=ve.x}for(ue(q);q>1&&(!T.inImageWithBorder(G[0],0)||!T.inImageWithBorder(G[1],0));)q-=Math.ceil(q/2),ue(-q);return G}function ee(G){return[{x:(G[1][0]-G[0][0])/2+G[0][0],y:(G[1][1]-G[0][1])/2+G[0][1]},{x:(G[3][0]-G[2][0])/2+G[2][0],y:(G[3][1]-G[2][1])/2+G[2][1]}]}function X(G){var B=null,q,ue=a.getBarcodeLine(T,G[0],G[1]);for(R.showFrequency&&(h.drawPath(G,{x:"x",y:"y"},C.ctx.overlay,{color:"red",lineWidth:3}),a.debug.printFrequency(ue.line,C.dom.frequency)),a.toBinaryLine(ue),R.showPattern&&a.debug.printPattern(ue.line,C.dom.pattern),q=0;q<k.length&&B===null;q++)B=k[q].decodePattern(ue.line);return B===null?null:{codeResult:B,barcodeLine:ue}}function oe(G,B,q){var ue=Math.sqrt(Math.pow(G[1][0]-G[0][0],2)+Math.pow(G[1][1]-G[0][1],2)),se,ve=16,De=null,ie,he,me=Math.sin(q),ye=Math.cos(q);for(se=1;se<ve&&De===null;se++)ie=ue/ve*se*(se%2===0?-1:1),he={y:ie*me,x:ie*ye},B[0].y+=he.x,B[0].x-=he.y,B[1].y+=he.x,B[1].x-=he.y,De=X(B);return De}function J(G){return Math.sqrt(Math.pow(Math.abs(G[1].y-G[0].y),2)+Math.pow(Math.abs(G[1].x-G[0].x),2))}function re(G){var B,q,ue=C.ctx.overlay,se,ve;return R.drawBoundingBox&&ue&&h.drawPath(G,{x:0,y:1},ue,{color:"blue",lineWidth:2}),B=ee(G),ve=J(B),q=Math.atan2(B[1].y-B[0].y,B[1].x-B[0].x),B=$(B,q,Math.floor(ve*.1)),B===null||(se=X(B),se===null&&(se=oe(G,B,q)),se===null)?null:(se&&R.drawScanline&&ue&&h.drawPath(B,{x:"x",y:"y"},ue,{color:"red",lineWidth:3}),{codeResult:se.codeResult,line:B,angle:q,pattern:se.barcodeLine.line,threshold:se.barcodeLine.threshold})}return{decodeFromBoundingBox:function(G){return re(G)},decodeFromBoundingBoxes:function(G){var B,q;for(B=0;B<G.length;B++)if(q=re(G[B]),q&&q.codeResult)return q.box=G[B],q},setReaders:function(G){R.readers=G,k.length=0,b()}}}};return L}),u("frame_grabber",["cv_utils"],function(a){var h={};return h.create=function(m,d){var f={},p=m.getConfig(),_=a.imageRef(m.getRealWidth(),m.getRealHeight()),v=m.getCanvasSize(),S=a.imageRef(m.getWidth(),m.getHeight()),I=m.getTopRight(),P=I.x,N=I.y,L,R=null,T=null;return L=d||document.createElement("canvas"),L.width=v.x,L.height=v.y,R=L.getContext("2d"),T=new Uint8Array(S.x*S.y),console.log("FrameGrabber",JSON.stringify({size:S,topRight:I,videoSize:_,canvasSize:v})),f.attachData=function(C){T=C},f.getData=function(){return T},f.grab=function(){var C=p.halfSample,k=m.getFrame(),O;return k?(R.drawImage(k,0,0,v.x,v.y),O=R.getImageData(P,N,S.x,S.y).data,C?a.grayAndHalfSampleFromCanvasData(O,S,T):a.computeGray(O,T,p),!0):!1},f.getSize=function(){return S},f},h}),u("config",[],function(){var a={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,minAspectRatio:0,maxAspectRatio:100,facing:"environment"},area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},tracking:!1,debug:!1,controls:!1,locate:!0,numOfWorkers:4,visual:{show:!0},decoder:{drawBoundingBox:!1,showFrequency:!1,drawScanline:!1,showPattern:!1,readers:["code_128_reader"]},locator:{halfSample:!0,patchSize:"medium",showCanvas:!1,showPatches:!1,showFoundPatches:!1,showSkeleton:!1,showLabels:!1,showPatchLabels:!1,showRemainingPatchLabels:!1,boxFromPatches:{showTransformed:!1,showTransformedBox:!1,showBB:!1}}};return a}),u("events",[],function(){var a=function(){var h={};function m(_){return h[_]||(h[_]={subscribers:[]}),h[_]}function d(){h={}}function f(_,v){_.async?setTimeout(function(){_.callback(v)},4):_.callback(v)}function p(_,v,S){var I;if(typeof v=="function")I={callback:v,async:S};else if(I=v,!I.callback)throw"Callback was not specified on options";m(_).subscribers.push(I)}return{subscribe:function(_,v,S){return p(_,v,S)},publish:function(_,v){var S=m(_),I=S.subscribers;S.subscribers=I.filter(function(P){return f(P,v),!P.once})},once:function(_,v,S){p(_,{callback:v,async:S,once:!0})},unsubscribe:function(_,v){var S;_?(S=m(_),S&&v?S.subscribers=S.subscribers.filter(function(I){return I.callback!==v}):S.subscribers=[]):d()}}}();return a}),u("camera_access",["html_utils"],function(a){var h,m;function d(S,I,P){typeof navigator.getUserMedia<"u"?navigator.getUserMedia(S,function(N){h=N;var L=window.URL&&window.URL.createObjectURL(N)||N;I.apply(null,[L])},P):P(new TypeError("getUserMedia not available"))}function f(S,I){var P=10;function N(){P>0?S.videoWidth>0&&S.videoHeight>0?(console.log(S.videoWidth+"px x "+S.videoHeight+"px"),I()):window.setTimeout(N,500):I("Unable to play video stream. Is webcam working?"),P--}N()}function p(S,I,P){d(S,function(N){I.src=N,m&&I.removeEventListener("loadeddata",m,!1),m=f.bind(null,I,P),I.addEventListener("loadeddata",m,!1),I.play()},function(N){P(N)})}function _(S,I){var P={audio:!1,video:!0},N=a.mergeObjects({width:640,height:480,minAspectRatio:0,maxAspectRatio:100,facing:"environment"},S);if(typeof MediaStreamTrack<"u"&&typeof MediaStreamTrack.getSources<"u")MediaStreamTrack.getSources(function(L){for(var R,T=0;T!=L.length;++T){var C=L[T];C.kind=="video"&&C.facing==N.facing&&(R=C.id)}return P.video={mandatory:{minWidth:N.width,minHeight:N.height,minAspectRatio:N.minAspectRatio,maxAspectRatio:N.maxAspectRatio},optional:[{sourceId:R}]},I(P)});else return P.video={mediaSource:"camera",width:{min:N.width,max:N.width},height:{min:N.height,max:N.height},require:["width","height"]},I(P)}function v(S,I,P){_(I,function(N){p(N,S,P)})}return{request:function(S,I,P){v(S,I,P)},release:function(){var S=h&&h.getVideoTracks();S.length&&S[0].stop(),h=null}}}),u("result_collector",["image_debug"],function(a){function h(d,f){return f?f.some(function(p){return Object.keys(p).every(function(_){return p[_]===d[_]})}):!1}function m(d,f){return typeof f=="function"?f(d):!0}return{create:function(d){var f=document.createElement("canvas"),p=f.getContext("2d"),_=[],v=d.capacity||20,S=d.capture===!0;function I(P){return v&&P&&!h(P,d.blacklist)&&m(P,d.filter)}return{addResult:function(P,N,L){var R={};I(L)&&(v--,R.codeResult=L,S&&(f.width=N.x,f.height=N.y,a.drawImage(P,N,p),R.frame=f.toDataURL()),_.push(R))},getResults:function(){return _}}}}}),u("quagga",["input_stream","image_wrapper","barcode_locator","barcode_decoder","frame_grabber","html_utils","config","events","camera_access","image_debug","result_collector"],function(a,h,m,d,f,p,_,v,S,I,P){var N,L,R,T={ctx:{image:null,overlay:null},dom:{image:null,overlay:null}},C,k,O,b=[],V=!0,$;function ee(te){B(te),O=d.create(_.decoder,C)}function X(){if(typeof document<"u")for(var te=[{node:document.querySelector("div[data-controls]"),prop:_.controls},{node:T.dom.overlay,prop:_.visual.show}],de=0;de<te.length;de++)te[de].node&&(te[de].prop===!0?te[de].node.style.display="block":te[de].node.style.display="none")}function oe(te){var de;if(_.inputStream.type=="VideoStream")de=document.createElement("video"),N=a.createVideoStream(de);else if(_.inputStream.type=="ImageStream")N=a.createImageStream();else if(_.inputStream.type=="LiveStream"){var Ie=document.querySelector("#interactive.viewport");Ie&&(de=Ie.querySelector("video"),de||(de=document.createElement("video"),Ie.appendChild(de))),N=a.createLiveStream(de),S.request(de,_.inputStream.constraints,function(Ve){if(!Ve)N.trigger("canrecord");else return te(Ve)})}N.setAttribute("preload","auto"),N.setAttribute("autoplay",!0),N.setInputStream(_.inputStream),N.addEventListener("canrecord",J.bind(void 0,te))}function J(te){m.checkImageConstraints(N,_.locator),G(),L=f.create(N,T.dom.image),X(),_.numOfWorkers>0?he(function(){console.log("Workers created"),re(te)}):(ee(),re(te))}function re(te){N.play(),te()}function G(){if(typeof document<"u"){var te=document.querySelector("#interactive.viewport");if(T.dom.image=document.querySelector("canvas.imgBuffer"),T.dom.image||(T.dom.image=document.createElement("canvas"),T.dom.image.className="imgBuffer",te&&_.inputStream.type=="ImageStream"&&te.appendChild(T.dom.image)),T.ctx.image=T.dom.image.getContext("2d"),T.dom.image.width=N.getCanvasSize().x,T.dom.image.height=N.getCanvasSize().y,T.dom.overlay=document.querySelector("canvas.drawingBuffer"),!T.dom.overlay){T.dom.overlay=document.createElement("canvas"),T.dom.overlay.className="drawingBuffer",te&&te.appendChild(T.dom.overlay);var de=document.createElement("br");de.setAttribute("clear","all"),te&&te.appendChild(de)}T.ctx.overlay=T.dom.overlay.getContext("2d"),T.dom.overlay.width=N.getCanvasSize().x,T.dom.overlay.height=N.getCanvasSize().y}}function B(te){te?C=te:C=new h({x:N.getWidth(),y:N.getHeight()}),console.log(C.size),k=[U.create([0,0]),U.create([0,C.size.y]),U.create([C.size.x,C.size.y]),U.create([C.size.x,0])],m.init(C,_.locator)}function q(){return _.locate?m.locate():[[U.create(k[0]),U.create(k[1]),U.create(k[2]),U.create(k[3])]]}function ue(te){var de=N.getTopRight(),Ie=de.x,Ve=de.y,be;if(!te||Ie===0&&Ve===0)return;if(te.line&&te.line.length===2&&Xt(te.line),te.boxes&&te.boxes.length>0)for(be=0;be<te.boxes.length;be++)et(te.boxes[be]);function et(ht){for(var bt=ht.length;bt--;)ht[bt][0]+=Ie,ht[bt][1]+=Ve}function Xt(ht){ht[0].x+=Ie,ht[0].y+=Ve,ht[1].x+=Ie,ht[1].y+=Ve}}function se(te,de){V&&(ue(te),de&&te&&te.codeResult&&$&&$.addResult(de,N.getCanvasSize(),te.codeResult)),v.publish("processed",te),te&&te.codeResult&&v.publish("detected",te)}function ve(){var te,de;de=q(),de?(te=O.decodeFromBoundingBoxes(de),te=te||{},te.boxes=de,se(te,C.data)):se()}function De(){var te;if(V){if(b.length>0)if(te=b.filter(function(de){return!de.busy})[0],te)L.attachData(te.imageData);else return;else L.attachData(C.data);L.grab()&&(te?(te.busy=!0,te.worker.postMessage({cmd:"process",imageData:te.imageData},[te.imageData.buffer])):ve())}else ve()}function ie(){R=!1,function te(){R||(De(),V&&_.inputStream.type=="LiveStream"&&window.requestAnimFrame(te))}()}function he(te){var de;for(b=[],de=0;de<_.numOfWorkers;de++)me(Ie);function Ie(Ve){b.push(Ve),b.length>=_.numOfWorkers&&te()}}function me(te){var de,Ie={worker:void 0,imageData:new Uint8Array(N.getWidth()*N.getHeight()),busy:!0};de=Ee(),Ie.worker=new Worker(de),Ie.worker.onmessage=function(Ve){if(Ve.data.event==="initialized")return URL.revokeObjectURL(de),Ie.busy=!1,Ie.imageData=new Uint8Array(Ve.data.imageData),console.log("Worker initialized"),te(Ie);Ve.data.event==="processed"?(Ie.imageData=new Uint8Array(Ve.data.imageData),Ie.busy=!1,se(Ve.data.result,Ie.imageData)):Ve.data.event==="error"&&console.log("Worker error: "+Ve.data.message)},Ie.worker.postMessage({cmd:"init",size:{x:N.getWidth(),y:N.getHeight()},imageData:Ie.imageData,config:_},[Ie.imageData.buffer])}function ye(te){if(te){var de=te();if(!de){self.postMessage({event:"error",message:"Quagga could not be created"});return}}var Ie;self.onmessage=function(et){if(et.data.cmd==="init"){var Xt=et.data.config;Xt.numOfWorkers=0,Ie=new de.ImageWrapper({x:et.data.size.x,y:et.data.size.y},new Uint8Array(et.data.imageData)),de.init(Xt,be,Ie),de.onProcessed(Ve)}else et.data.cmd==="process"?(Ie.data=new Uint8Array(et.data.imageData),de.start()):et.data.cmd==="setReaders"&&de.setReaders(et.data.readers)};function Ve(et){self.postMessage({event:"processed",imageData:Ie.data,result:et},[Ie.data.buffer])}function be(){self.postMessage({event:"initialized",imageData:Ie.data},[Ie.data.buffer])}}function Ee(){var te,de;return typeof t<"u"&&(de=t),te=new Blob(["("+ye.toString()+")("+de+");"],{type:"text/javascript"}),window.URL.createObjectURL(te)}function xe(te){O?O.setReaders(te):V&&b.length>0&&b.forEach(function(de){de.worker.postMessage({cmd:"setReaders",readers:te})})}return{init:function(te,de,Ie){if(_=p.mergeObjects(_,te),Ie)return V=!1,ee(Ie),de();oe(de)},start:function(){ie()},stop:function(){R=!0,b.forEach(function(te){te.worker.terminate(),console.log("Worker terminated!")}),b.length=0,_.inputStream.type==="LiveStream"&&(S.release(),N.clearEventHandlers())},pause:function(){R=!0},onDetected:function(te){v.subscribe("detected",te)},offDetected:function(te){v.unsubscribe("detected",te)},onProcessed:function(te){v.subscribe("processed",te)},offProcessed:function(te){v.unsubscribe("processed",te)},setReaders:function(te){xe(te)},registerResultCollector:function(te){te&&typeof te.addResult=="function"&&($=te)},canvas:T,decodeSingle:function(te,de){te=p.mergeObjects({inputStream:{type:"ImageStream",sequence:!1,size:800,src:te.src},numOfWorkers:1,locator:{halfSample:!1}},te),this.init(te,function(){v.once("processed",function(Ie){R=!0,de.call(null,Ie)},!0),ie()})},ImageWrapper:h,ImageDebug:I,ResultCollector:P}}),s("quagga")})}(kl)),kl.exports}var tE=eE();const Rl=vm(tE),nE="_container_1iaxo_1",rE="_form_1iaxo_15",iE="_nfcButton_1iaxo_39",oE="_scanButton_1iaxo_39",sE="_selfieButton_1iaxo_39",aE="_submitButton_1iaxo_39",Mo={container:nE,form:rE,nfcButton:iE,scanButton:oE,selfieButton:sE,submitButton:aE},lE={apiKey:"AIzaSyC8tDVbDIrKuylsyF3rbDSSPlzsEHXqZIs",authDomain:"online-attendance-21f95.firebaseapp.com",databaseURL:"https://online-attendance-21f95-default-rtdb.firebaseio.com",projectId:"online-attendance-21f95",storageBucket:"online-attendance-21f95.appspot.com",messagingSenderId:"756223518392",appId:"1:756223518392:web:5e8d28c78f7eefb8be764d"},g0=Kp(lE),uE=Sv(g0),cE=Kw(g0),hE=()=>{const[i,t]=Yr.useState(null),[r,s]=Yr.useState(null),[u,g]=Yr.useState(!1),[A,D]=Yr.useState(null),[F,U]=Yr.useState({studentName:"",email:"",course:"",campus:""}),a=Yr.useRef(null),h=Yr.useRef(null),m=()=>{Rl.init({inputStream:{name:"Live",type:"LiveStream",target:a.current,constraints:{facingMode:"environment"}},decoder:{readers:["code_128_reader","ean_reader","ean_8_reader","code_39_reader","upc_reader"]}},v=>{if(v){console.error("Barcode Scanner Error:",v);return}Rl.start(),g(!0)}),Rl.onDetected(v=>{v.codeResult.code&&(t(v.codeResult.code),Rl.stop(),g(!1))})},d=v=>{const S=v.target.files[0];s(S)},f=async()=>{if(!r)return null;const v=F.email.replace(/[@.]/g,"_"),S=Qw(cE,`users/${v}/profile/${r.name}`),I=await qw(S,r);return await Gw(I.ref)},p=async v=>{if("NDEFWriter"in window)try{return await new NDEFWriter().write({records:[{recordType:"text",data:v}]}),!0}catch(S){return console.error("NFC Write Error:",S),!1}else return alert("Web NFC writing not supported"),!1},_=async v=>{if(v.preventDefault(),!!window.confirm("Proceed with registration?"))try{const S=await f(),I={...F,barcodeData:i,selfieUrl:S,createdAt:Fv()},P=await Lv(Ev(uE,"RegisteredStudent"),I);D(P.id),alert("Please tap NFC tag to complete registration"),await p(P.id)?(alert("Registration complete!"),t(null),s(null),D(null),U({studentName:"",email:"",course:"",campus:""})):alert("NFC write failed. Please try again.")}catch(S){console.error("Registration Error:",S),alert("Registration failed")}};return Xe.jsxs("div",{className:Mo.container,children:[Xe.jsx("h1",{children:"Student Registration"}),i?Xe.jsxs("form",{onSubmit:_,className:Mo.form,children:[Xe.jsxs("p",{children:["Student ID: ",i]}),Xe.jsx("input",{type:"text",placeholder:"Student Name",value:F.studentName,onChange:v=>U({...F,studentName:v.target.value}),required:!0}),Xe.jsx("input",{type:"email",placeholder:"Email",value:F.email,onChange:v=>U({...F,email:v.target.value}),required:!0}),Xe.jsx("input",{type:"text",placeholder:"Course",value:F.course,onChange:v=>U({...F,course:v.target.value}),required:!0}),Xe.jsxs("select",{value:F.campus,onChange:v=>U({...F,campus:v.target.value}),required:!0,children:[Xe.jsx("option",{value:"",children:"Select Campus"}),Xe.jsx("option",{value:"Main",children:"Main Campus"}),Xe.jsx("option",{value:"North",children:"North Campus"}),Xe.jsx("option",{value:"Online",children:"Online Campus"})]}),r?Xe.jsxs("p",{children:["Selfie Captured: ",r.name]}):Xe.jsxs(Xe.Fragment,{children:[Xe.jsx("input",{type:"file",ref:h,onChange:d,accept:"image/*",capture:"user",style:{display:"none"}}),Xe.jsx("button",{type:"button",onClick:()=>h.current.click(),className:Mo.selfieButton,children:"Take Selfie"})]}),Xe.jsx("button",{type:"submit",className:Mo.submitButton,disabled:!r,children:"Register"})]}):Xe.jsxs("div",{children:[Xe.jsx("div",{ref:a,className:Mo.videoContainer}),Xe.jsx("button",{onClick:m,className:Mo.scanButton,disabled:u,children:u?"Scanning...":"Scan Student ID"})]})]})};function fE(){return Xe.jsx(Xe.Fragment,{children:Xe.jsx(hE,{})})}xm.createRoot(document.getElementById("root")).render(Xe.jsx(Yr.StrictMode,{children:Xe.jsx(fE,{})}));
